var zw=Object.create;var ou=Object.defineProperty;var _y=Object.getOwnPropertyDescriptor;var Hw=Object.getOwnPropertyNames;var Ww=Object.getPrototypeOf,$w=Object.prototype.hasOwnProperty;var Xw=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+i+'" is not supported')});var Mf=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),qy=(i,t)=>{for(var n in t)ou(i,n,{get:t[n],enumerable:!0})},Yw=(i,t,n,d)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Hw(t))!$w.call(i,r)&&r!==n&&ou(i,r,{get:()=>t[r],enumerable:!(d=_y(t,r))||d.enumerable});return i};var Le=(i,t,n)=>(n=i!=null?zw(Ww(i)):{},Yw(t||!i||!i.__esModule?ou(n,"default",{value:i,enumerable:!0}):n,i));var et=(i,t,n,d)=>{for(var r=d>1?void 0:d?_y(t,n):t,m=i.length-1,e;m>=0;m--)(e=i[m])&&(r=(d?e(t,n,r):e(r))||r);return d&&r&&ou(t,n,r),r};var tx=(i,t,n)=>{if(!t.has(i))throw TypeError("Cannot "+n)};var jt=(i,t,n)=>(tx(i,t,"read from private field"),n?n.call(i):t.get(i)),lr=(i,t,n)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,n)},Gi=(i,t,n,d)=>(tx(i,t,"write to private field"),d?d.call(i,n):t.set(i,n),n);var Ax=Mf(Eu=>{(function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var s=this||t;return s._counter=1e3,s._html5AudioPool=[],s.html5PoolSize=10,s._codecs={},s._howls=[],s._muted=!1,s._volume=1,s._canPlayEvent="canplaythrough",s._navigator=typeof window<"u"&&window.navigator?window.navigator:null,s.masterGain=null,s.noAudio=!1,s.usingWebAudio=!0,s.autoSuspend=!0,s.ctx=null,s.autoUnlock=!0,s._setup(),s},volume:function(s){var o=this||t;if(s=parseFloat(s),o.ctx||c(),typeof s<"u"&&s>=0&&s<=1){if(o._volume=s,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(s,t.ctx.currentTime);for(var a=0;a<o._howls.length;a++)if(!o._howls[a]._webAudio)for(var l=o._howls[a]._getSoundIds(),p=0;p<l.length;p++){var h=o._howls[a]._soundById(l[p]);h&&h._node&&(h._node.volume=h._volume*s)}return o}return o._volume},mute:function(s){var o=this||t;o.ctx||c(),o._muted=s,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(s?0:o._volume,t.ctx.currentTime);for(var a=0;a<o._howls.length;a++)if(!o._howls[a]._webAudio)for(var l=o._howls[a]._getSoundIds(),p=0;p<l.length;p++){var h=o._howls[a]._soundById(l[p]);h&&h._node&&(h._node.muted=s?!0:h._muted)}return o},stop:function(){for(var s=this||t,o=0;o<s._howls.length;o++)s._howls[o].stop();return s},unload:function(){for(var s=this||t,o=s._howls.length-1;o>=0;o--)s._howls[o].unload();return s.usingWebAudio&&s.ctx&&typeof s.ctx.close<"u"&&(s.ctx.close(),s.ctx=null,c()),s},codecs:function(s){return(this||t)._codecs[s.replace(/^x-/,"")]},_setup:function(){var s=this||t;if(s.state=s.ctx&&s.ctx.state||"suspended",s._autoSuspend(),!s.usingWebAudio)if(typeof Audio<"u")try{var o=new Audio;typeof o.oncanplaythrough>"u"&&(s._canPlayEvent="canplay")}catch{s.noAudio=!0}else s.noAudio=!0;try{var o=new Audio;o.muted&&(s.noAudio=!0)}catch{}return s.noAudio||s._setupCodecs(),s},_setupCodecs:function(){var s=this||t,o=null;try{o=typeof Audio<"u"?new Audio:null}catch{return s}if(!o||typeof o.canPlayType!="function")return s;var a=o.canPlayType("audio/mpeg;").replace(/^no$/,""),l=s._navigator?s._navigator.userAgent:"",p=l.match(/OPR\/(\d+)/g),h=p&&parseInt(p[0].split("/")[1],10)<33,f=l.indexOf("Safari")!==-1&&l.indexOf("Chrome")===-1,v=l.match(/Version\/(.*?) /),y=f&&v&&parseInt(v[1],10)<15;return s._codecs={mp3:!!(!h&&(a||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!a,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!y&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!y&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},s},_unlockAudio:function(){var s=this||t;if(!(s._audioUnlocked||!s.ctx)){s._audioUnlocked=!1,s.autoUnlock=!1,!s._mobileUnloaded&&s.ctx.sampleRate!==44100&&(s._mobileUnloaded=!0,s.unload()),s._scratchBuffer=s.ctx.createBuffer(1,1,22050);var o=function(a){for(;s._html5AudioPool.length<s.html5PoolSize;)try{var l=new Audio;l._unlocked=!0,s._releaseHtml5Audio(l)}catch{s.noAudio=!0;break}for(var p=0;p<s._howls.length;p++)if(!s._howls[p]._webAudio)for(var h=s._howls[p]._getSoundIds(),f=0;f<h.length;f++){var v=s._howls[p]._soundById(h[f]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}s._autoResume();var y=s.ctx.createBufferSource();y.buffer=s._scratchBuffer,y.connect(s.ctx.destination),typeof y.start>"u"?y.noteOn(0):y.start(0),typeof s.ctx.resume=="function"&&s.ctx.resume(),y.onended=function(){y.disconnect(0),s._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var x=0;x<s._howls.length;x++)s._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),s}},_obtainHtml5Audio:function(){var s=this||t;if(s._html5AudioPool.length)return s._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise<"u"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(s){var o=this||t;return s._unlocked&&o._html5AudioPool.push(s),o},_autoSuspend:function(){var s=this;if(!(!s.autoSuspend||!s.ctx||typeof s.ctx.suspend>"u"||!t.usingWebAudio)){for(var o=0;o<s._howls.length;o++)if(s._howls[o]._webAudio){for(var a=0;a<s._howls[o]._sounds.length;a++)if(!s._howls[o]._sounds[a]._paused)return s}return s._suspendTimer&&clearTimeout(s._suspendTimer),s._suspendTimer=setTimeout(function(){if(s.autoSuspend){s._suspendTimer=null,s.state="suspending";var l=function(){s.state="suspended",s._resumeAfterSuspend&&(delete s._resumeAfterSuspend,s._autoResume())};s.ctx.suspend().then(l,l)}},3e4),s}},_autoResume:function(){var s=this;if(!(!s.ctx||typeof s.ctx.resume>"u"||!t.usingWebAudio))return s.state==="running"&&s.ctx.state!=="interrupted"&&s._suspendTimer?(clearTimeout(s._suspendTimer),s._suspendTimer=null):s.state==="suspended"||s.state==="running"&&s.ctx.state==="interrupted"?(s.ctx.resume().then(function(){s.state="running";for(var o=0;o<s._howls.length;o++)s._howls[o]._emit("resume")}),s._suspendTimer&&(clearTimeout(s._suspendTimer),s._suspendTimer=null)):s.state==="suspending"&&(s._resumeAfterSuspend=!0),s}};var t=new i,n=function(s){var o=this;if(!s.src||s.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(s)};n.prototype={init:function(s){var o=this;return t.ctx||c(),o._autoplay=s.autoplay||!1,o._format=typeof s.format!="string"?s.format:[s.format],o._html5=s.html5||!1,o._muted=s.mute||!1,o._loop=s.loop||!1,o._pool=s.pool||5,o._preload=typeof s.preload=="boolean"||s.preload==="metadata"?s.preload:!0,o._rate=s.rate||1,o._sprite=s.sprite||{},o._src=typeof s.src!="string"?s.src:[s.src],o._volume=s.volume!==void 0?s.volume:1,o._xhr={method:s.xhr&&s.xhr.method?s.xhr.method:"GET",headers:s.xhr&&s.xhr.headers?s.xhr.headers:null,withCredentials:s.xhr&&s.xhr.withCredentials?s.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=s.onend?[{fn:s.onend}]:[],o._onfade=s.onfade?[{fn:s.onfade}]:[],o._onload=s.onload?[{fn:s.onload}]:[],o._onloaderror=s.onloaderror?[{fn:s.onloaderror}]:[],o._onplayerror=s.onplayerror?[{fn:s.onplayerror}]:[],o._onpause=s.onpause?[{fn:s.onpause}]:[],o._onplay=s.onplay?[{fn:s.onplay}]:[],o._onstop=s.onstop?[{fn:s.onstop}]:[],o._onmute=s.onmute?[{fn:s.onmute}]:[],o._onvolume=s.onvolume?[{fn:s.onvolume}]:[],o._onrate=s.onrate?[{fn:s.onrate}]:[],o._onseek=s.onseek?[{fn:s.onseek}]:[],o._onunlock=s.onunlock?[{fn:s.onunlock}]:[],o._onresume=[],o._webAudio=t.usingWebAudio&&!o._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var s=this,o=null;if(t.noAudio){s._emit("loaderror",null,"No audio support.");return}typeof s._src=="string"&&(s._src=[s._src]);for(var a=0;a<s._src.length;a++){var l,p;if(s._format&&s._format[a])l=s._format[a];else{if(p=s._src[a],typeof p!="string"){s._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}l=/^data:audio\/([^;,]+);/i.exec(p),l||(l=/\.([^.]+)$/.exec(p.split("?",1)[0])),l&&(l=l[1].toLowerCase())}if(l||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),l&&t.codecs(l)){o=s._src[a];break}}if(!o){s._emit("loaderror",null,"No codec support for selected audio sources.");return}return s._src=o,s._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(s._html5=!0,s._webAudio=!1),new d(s),s._webAudio&&m(s),s},play:function(s,o){var a=this,l=null;if(typeof s=="number")l=s,s=null;else{if(typeof s=="string"&&a._state==="loaded"&&!a._sprite[s])return null;if(typeof s>"u"&&(s="__default",!a._playLock)){for(var p=0,h=0;h<a._sounds.length;h++)a._sounds[h]._paused&&!a._sounds[h]._ended&&(p++,l=a._sounds[h]._id);p===1?s=null:l=null}}var f=l?a._soundById(l):a._inactiveSound();if(!f)return null;if(l&&!s&&(s=f._sprite||"__default"),a._state!=="loaded"){f._sprite=s,f._ended=!1;var v=f._id;return a._queue.push({event:"play",action:function(){a.play(v)}}),v}if(l&&!f._paused)return o||a._loadQueue("play"),f._id;a._webAudio&&t._autoResume();var y=Math.max(0,f._seek>0?f._seek:a._sprite[s][0]/1e3),x=Math.max(0,(a._sprite[s][0]+a._sprite[s][1])/1e3-y),S=x*1e3/Math.abs(f._rate),E=a._sprite[s][0]/1e3,b=(a._sprite[s][0]+a._sprite[s][1])/1e3;f._sprite=s,f._ended=!1;var T=function(){f._paused=!1,f._seek=y,f._start=E,f._stop=b,f._loop=!!(f._loop||a._sprite[s][2])};if(y>=b){a._ended(f);return}var P=f._node;if(a._webAudio){var C=function(){a._playLock=!1,T(),a._refreshBuffer(f);var I=f._muted||a._muted?0:f._volume;P.gain.setValueAtTime(I,t.ctx.currentTime),f._playStart=t.ctx.currentTime,typeof P.bufferSource.start>"u"?f._loop?P.bufferSource.noteGrainOn(0,y,86400):P.bufferSource.noteGrainOn(0,y,x):f._loop?P.bufferSource.start(0,y,86400):P.bufferSource.start(0,y,x),S!==1/0&&(a._endTimers[f._id]=setTimeout(a._ended.bind(a,f),S)),o||setTimeout(function(){a._emit("play",f._id),a._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?C():(a._playLock=!0,a.once("resume",C),a._clearTimer(f._id))}else{var w=function(){P.currentTime=y,P.muted=f._muted||a._muted||t._muted||P.muted,P.volume=f._volume*t.volume(),P.playbackRate=f._rate;try{var I=P.play();if(I&&typeof Promise<"u"&&(I instanceof Promise||typeof I.then=="function")?(a._playLock=!0,T(),I.then(function(){a._playLock=!1,P._unlocked=!0,o?a._loadQueue():a._emit("play",f._id)}).catch(function(){a._playLock=!1,a._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),f._ended=!0,f._paused=!0})):o||(a._playLock=!1,T(),a._emit("play",f._id)),P.playbackRate=f._rate,P.paused){a._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}s!=="__default"||f._loop?a._endTimers[f._id]=setTimeout(a._ended.bind(a,f),S):(a._endTimers[f._id]=function(){a._ended(f),P.removeEventListener("ended",a._endTimers[f._id],!1)},P.addEventListener("ended",a._endTimers[f._id],!1))}catch(L){a._emit("playerror",f._id,L)}};P.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(P.src=a._src,P.load());var A=window&&window.ejecta||!P.readyState&&t._navigator.isCocoonJS;if(P.readyState>=3||A)w();else{a._playLock=!0,a._state="loading";var R=function(){a._state="loaded",w(),P.removeEventListener(t._canPlayEvent,R,!1)};P.addEventListener(t._canPlayEvent,R,!1),a._clearTimer(f._id)}}return f._id},pause:function(s){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(s)}}),o;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){o._clearTimer(a[l]);var p=o._soundById(a[l]);if(p&&!p._paused&&(p._seek=o.seek(a[l]),p._rateSeek=0,p._paused=!0,o._stopFade(a[l]),p._node))if(o._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),o._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||o._emit("pause",p?p._id:null)}return o},stop:function(s,o){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"stop",action:function(){a.stop(s)}}),a;for(var l=a._getSoundIds(s),p=0;p<l.length;p++){a._clearTimer(l[p]);var h=a._soundById(l[p]);h&&(h._seek=h._start||0,h._rateSeek=0,h._paused=!0,h._ended=!0,a._stopFade(l[p]),h._node&&(a._webAudio?h._node.bufferSource&&(typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),a._cleanBuffer(h._node)):(!isNaN(h._node.duration)||h._node.duration===1/0)&&(h._node.currentTime=h._start||0,h._node.pause(),h._node.duration===1/0&&a._clearSound(h._node))),o||a._emit("stop",h._id))}return a},mute:function(s,o){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"mute",action:function(){a.mute(s,o)}}),a;if(typeof o>"u")if(typeof s=="boolean")a._muted=s;else return a._muted;for(var l=a._getSoundIds(o),p=0;p<l.length;p++){var h=a._soundById(l[p]);h&&(h._muted=s,h._interval&&a._stopFade(h._id),a._webAudio&&h._node?h._node.gain.setValueAtTime(s?0:h._volume,t.ctx.currentTime):h._node&&(h._node.muted=t._muted?!0:s),a._emit("mute",h._id))}return a},volume:function(){var s=this,o=arguments,a,l;if(o.length===0)return s._volume;if(o.length===1||o.length===2&&typeof o[1]>"u"){var p=s._getSoundIds(),h=p.indexOf(o[0]);h>=0?l=parseInt(o[0],10):a=parseFloat(o[0])}else o.length>=2&&(a=parseFloat(o[0]),l=parseInt(o[1],10));var f;if(typeof a<"u"&&a>=0&&a<=1){if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,o)}}),s;typeof l>"u"&&(s._volume=a),l=s._getSoundIds(l);for(var v=0;v<l.length;v++)f=s._soundById(l[v]),f&&(f._volume=a,o[2]||s._stopFade(l[v]),s._webAudio&&f._node&&!f._muted?f._node.gain.setValueAtTime(a,t.ctx.currentTime):f._node&&!f._muted&&(f._node.volume=a*t.volume()),s._emit("volume",f._id))}else return f=l?s._soundById(l):s._sounds[0],f?f._volume:0;return s},fade:function(s,o,a,l){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(s,o,a,l)}}),p;s=Math.min(Math.max(0,parseFloat(s)),1),o=Math.min(Math.max(0,parseFloat(o)),1),a=parseFloat(a),p.volume(s,l);for(var h=p._getSoundIds(l),f=0;f<h.length;f++){var v=p._soundById(h[f]);if(v){if(l||p._stopFade(h[f]),p._webAudio&&!v._muted){var y=t.ctx.currentTime,x=y+a/1e3;v._volume=s,v._node.gain.setValueAtTime(s,y),v._node.gain.linearRampToValueAtTime(o,x)}p._startFadeInterval(v,s,o,a,h[f],typeof l>"u")}}return p},_startFadeInterval:function(s,o,a,l,p,h){var f=this,v=o,y=a-o,x=Math.abs(y/.01),S=Math.max(4,x>0?l/x:l),E=Date.now();s._fadeTo=a,s._interval=setInterval(function(){var b=(Date.now()-E)/l;E=Date.now(),v+=y*b,v=Math.round(v*100)/100,y<0?v=Math.max(a,v):v=Math.min(a,v),f._webAudio?s._volume=v:f.volume(v,s._id,!0),h&&(f._volume=v),(a<o&&v<=a||a>o&&v>=a)&&(clearInterval(s._interval),s._interval=null,s._fadeTo=null,f.volume(a,s._id),f._emit("fade",s._id))},S)},_stopFade:function(s){var o=this,a=o._soundById(s);return a&&a._interval&&(o._webAudio&&a._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(a._interval),a._interval=null,o.volume(a._fadeTo,s),a._fadeTo=null,o._emit("fade",s)),o},loop:function(){var s=this,o=arguments,a,l,p;if(o.length===0)return s._loop;if(o.length===1)if(typeof o[0]=="boolean")a=o[0],s._loop=a;else return p=s._soundById(parseInt(o[0],10)),p?p._loop:!1;else o.length===2&&(a=o[0],l=parseInt(o[1],10));for(var h=s._getSoundIds(l),f=0;f<h.length;f++)p=s._soundById(h[f]),p&&(p._loop=a,s._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=a,a&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,s.playing(h[f])&&(s.pause(h[f],!0),s.play(h[f],!0)))));return s},rate:function(){var s=this,o=arguments,a,l;if(o.length===0)l=s._sounds[0]._id;else if(o.length===1){var p=s._getSoundIds(),h=p.indexOf(o[0]);h>=0?l=parseInt(o[0],10):a=parseFloat(o[0])}else o.length===2&&(a=parseFloat(o[0]),l=parseInt(o[1],10));var f;if(typeof a=="number"){if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,o)}}),s;typeof l>"u"&&(s._rate=a),l=s._getSoundIds(l);for(var v=0;v<l.length;v++)if(f=s._soundById(l[v]),f){s.playing(l[v])&&(f._rateSeek=s.seek(l[v]),f._playStart=s._webAudio?t.ctx.currentTime:f._playStart),f._rate=a,s._webAudio&&f._node&&f._node.bufferSource?f._node.bufferSource.playbackRate.setValueAtTime(a,t.ctx.currentTime):f._node&&(f._node.playbackRate=a);var y=s.seek(l[v]),x=(s._sprite[f._sprite][0]+s._sprite[f._sprite][1])/1e3-y,S=x*1e3/Math.abs(f._rate);(s._endTimers[l[v]]||!f._paused)&&(s._clearTimer(l[v]),s._endTimers[l[v]]=setTimeout(s._ended.bind(s,f),S)),s._emit("rate",f._id)}}else return f=s._soundById(l),f?f._rate:s._rate;return s},seek:function(){var s=this,o=arguments,a,l;if(o.length===0)s._sounds.length&&(l=s._sounds[0]._id);else if(o.length===1){var p=s._getSoundIds(),h=p.indexOf(o[0]);h>=0?l=parseInt(o[0],10):s._sounds.length&&(l=s._sounds[0]._id,a=parseFloat(o[0]))}else o.length===2&&(a=parseFloat(o[0]),l=parseInt(o[1],10));if(typeof l>"u")return 0;if(typeof a=="number"&&(s._state!=="loaded"||s._playLock))return s._queue.push({event:"seek",action:function(){s.seek.apply(s,o)}}),s;var f=s._soundById(l);if(f)if(typeof a=="number"&&a>=0){var v=s.playing(l);v&&s.pause(l,!0),f._seek=a,f._ended=!1,s._clearTimer(l),!s._webAudio&&f._node&&!isNaN(f._node.duration)&&(f._node.currentTime=a);var y=function(){v&&s.play(l,!0),s._emit("seek",l)};if(v&&!s._webAudio){var x=function(){s._playLock?setTimeout(x,0):y()};setTimeout(x,0)}else y()}else if(s._webAudio){var S=s.playing(l)?t.ctx.currentTime-f._playStart:0,E=f._rateSeek?f._rateSeek-f._seek:0;return f._seek+(E+S*Math.abs(f._rate))}else return f._node.currentTime;return s},playing:function(s){var o=this;if(typeof s=="number"){var a=o._soundById(s);return a?!a._paused:!1}for(var l=0;l<o._sounds.length;l++)if(!o._sounds[l]._paused)return!0;return!1},duration:function(s){var o=this,a=o._duration,l=o._soundById(s);return l&&(a=o._sprite[l._sprite][1]/1e3),a},state:function(){return this._state},unload:function(){for(var s=this,o=s._sounds,a=0;a<o.length;a++)o[a]._paused||s.stop(o[a]._id),s._webAudio||(s._clearSound(o[a]._node),o[a]._node.removeEventListener("error",o[a]._errorFn,!1),o[a]._node.removeEventListener(t._canPlayEvent,o[a]._loadFn,!1),o[a]._node.removeEventListener("ended",o[a]._endFn,!1),t._releaseHtml5Audio(o[a]._node)),delete o[a]._node,s._clearTimer(o[a]._id);var l=t._howls.indexOf(s);l>=0&&t._howls.splice(l,1);var p=!0;for(a=0;a<t._howls.length;a++)if(t._howls[a]._src===s._src||s._src.indexOf(t._howls[a]._src)>=0){p=!1;break}return r&&p&&delete r[s._src],t.noAudio=!1,s._state="unloaded",s._sounds=[],s=null,null},on:function(s,o,a,l){var p=this,h=p["_on"+s];return typeof o=="function"&&h.push(l?{id:a,fn:o,once:l}:{id:a,fn:o}),p},off:function(s,o,a){var l=this,p=l["_on"+s],h=0;if(typeof o=="number"&&(a=o,o=null),o||a)for(h=0;h<p.length;h++){var f=a===p[h].id;if(o===p[h].fn&&f||!o&&f){p.splice(h,1);break}}else if(s)l["_on"+s]=[];else{var v=Object.keys(l);for(h=0;h<v.length;h++)v[h].indexOf("_on")===0&&Array.isArray(l[v[h]])&&(l[v[h]]=[])}return l},once:function(s,o,a){var l=this;return l.on(s,o,a,1),l},_emit:function(s,o,a){for(var l=this,p=l["_on"+s],h=p.length-1;h>=0;h--)(!p[h].id||p[h].id===o||s==="load")&&(setTimeout(function(f){f.call(this,o,a)}.bind(l,p[h].fn),0),p[h].once&&l.off(s,p[h].fn,p[h].id));return l._loadQueue(s),l},_loadQueue:function(s){var o=this;if(o._queue.length>0){var a=o._queue[0];a.event===s&&(o._queue.shift(),o._loadQueue()),s||a.action()}return o},_ended:function(s){var o=this,a=s._sprite;if(!o._webAudio&&s._node&&!s._node.paused&&!s._node.ended&&s._node.currentTime<s._stop)return setTimeout(o._ended.bind(o,s),100),o;var l=!!(s._loop||o._sprite[a][2]);if(o._emit("end",s._id),!o._webAudio&&l&&o.stop(s._id,!0).play(s._id),o._webAudio&&l){o._emit("play",s._id),s._seek=s._start||0,s._rateSeek=0,s._playStart=t.ctx.currentTime;var p=(s._stop-s._start)*1e3/Math.abs(s._rate);o._endTimers[s._id]=setTimeout(o._ended.bind(o,s),p)}return o._webAudio&&!l&&(s._paused=!0,s._ended=!0,s._seek=s._start||0,s._rateSeek=0,o._clearTimer(s._id),o._cleanBuffer(s._node),t._autoSuspend()),!o._webAudio&&!l&&o.stop(s._id,!0),o},_clearTimer:function(s){var o=this;if(o._endTimers[s]){if(typeof o._endTimers[s]!="function")clearTimeout(o._endTimers[s]);else{var a=o._soundById(s);a&&a._node&&a._node.removeEventListener("ended",o._endTimers[s],!1)}delete o._endTimers[s]}return o},_soundById:function(s){for(var o=this,a=0;a<o._sounds.length;a++)if(s===o._sounds[a]._id)return o._sounds[a];return null},_inactiveSound:function(){var s=this;s._drain();for(var o=0;o<s._sounds.length;o++)if(s._sounds[o]._ended)return s._sounds[o].reset();return new d(s)},_drain:function(){var s=this,o=s._pool,a=0,l=0;if(!(s._sounds.length<o)){for(l=0;l<s._sounds.length;l++)s._sounds[l]._ended&&a++;for(l=s._sounds.length-1;l>=0;l--){if(a<=o)return;s._sounds[l]._ended&&(s._webAudio&&s._sounds[l]._node&&s._sounds[l]._node.disconnect(0),s._sounds.splice(l,1),a--)}}},_getSoundIds:function(s){var o=this;if(typeof s>"u"){for(var a=[],l=0;l<o._sounds.length;l++)a.push(o._sounds[l]._id);return a}else return[s]},_refreshBuffer:function(s){var o=this;return s._node.bufferSource=t.ctx.createBufferSource(),s._node.bufferSource.buffer=r[o._src],s._panner?s._node.bufferSource.connect(s._panner):s._node.bufferSource.connect(s._node),s._node.bufferSource.loop=s._loop,s._loop&&(s._node.bufferSource.loopStart=s._start||0,s._node.bufferSource.loopEnd=s._stop||0),s._node.bufferSource.playbackRate.setValueAtTime(s._rate,t.ctx.currentTime),o},_cleanBuffer:function(s){var o=this,a=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!s.bufferSource)return o;if(t._scratchBuffer&&s.bufferSource&&(s.bufferSource.onended=null,s.bufferSource.disconnect(0),a))try{s.bufferSource.buffer=t._scratchBuffer}catch{}return s.bufferSource=null,o},_clearSound:function(s){var o=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);o||(s.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var d=function(s){this._parent=s,this.init()};d.prototype={init:function(){var s=this,o=s._parent;return s._muted=o._muted,s._loop=o._loop,s._volume=o._volume,s._rate=o._rate,s._seek=0,s._paused=!0,s._ended=!0,s._sprite="__default",s._id=++t._counter,o._sounds.push(s),s.create(),s},create:function(){var s=this,o=s._parent,a=t._muted||s._muted||s._parent._muted?0:s._volume;return o._webAudio?(s._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),s._node.gain.setValueAtTime(a,t.ctx.currentTime),s._node.paused=!0,s._node.connect(t.masterGain)):t.noAudio||(s._node=t._obtainHtml5Audio(),s._errorFn=s._errorListener.bind(s),s._node.addEventListener("error",s._errorFn,!1),s._loadFn=s._loadListener.bind(s),s._node.addEventListener(t._canPlayEvent,s._loadFn,!1),s._endFn=s._endListener.bind(s),s._node.addEventListener("ended",s._endFn,!1),s._node.src=o._src,s._node.preload=o._preload===!0?"auto":o._preload,s._node.volume=a*t.volume(),s._node.load()),s},reset:function(){var s=this,o=s._parent;return s._muted=o._muted,s._loop=o._loop,s._volume=o._volume,s._rate=o._rate,s._seek=0,s._rateSeek=0,s._paused=!0,s._ended=!0,s._sprite="__default",s._id=++t._counter,s},_errorListener:function(){var s=this;s._parent._emit("loaderror",s._id,s._node.error?s._node.error.code:0),s._node.removeEventListener("error",s._errorFn,!1)},_loadListener:function(){var s=this,o=s._parent;o._duration=Math.ceil(s._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),s._node.removeEventListener(t._canPlayEvent,s._loadFn,!1)},_endListener:function(){var s=this,o=s._parent;o._duration===1/0&&(o._duration=Math.ceil(s._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(s)),s._node.removeEventListener("ended",s._endFn,!1)}};var r={},m=function(s){var o=s._src;if(r[o]){s._duration=r[o].duration,g(s);return}if(/^data:[^;]+;base64,/.test(o)){for(var a=atob(o.split(",")[1]),l=new Uint8Array(a.length),p=0;p<a.length;++p)l[p]=a.charCodeAt(p);u(l.buffer,s)}else{var h=new XMLHttpRequest;h.open(s._xhr.method,o,!0),h.withCredentials=s._xhr.withCredentials,h.responseType="arraybuffer",s._xhr.headers&&Object.keys(s._xhr.headers).forEach(function(f){h.setRequestHeader(f,s._xhr.headers[f])}),h.onload=function(){var f=(h.status+"")[0];if(f!=="0"&&f!=="2"&&f!=="3"){s._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".");return}u(h.response,s)},h.onerror=function(){s._webAudio&&(s._html5=!0,s._webAudio=!1,s._sounds=[],delete r[o],s.load())},e(h)}},e=function(s){try{s.send()}catch{s.onerror()}},u=function(s,o){var a=function(){o._emit("loaderror",null,"Decoding audio data failed.")},l=function(p){p&&o._sounds.length>0?(r[o._src]=p,g(o,p)):a()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(s).then(l).catch(a):t.ctx.decodeAudioData(s,l,a)},g=function(s,o){o&&!s._duration&&(s._duration=o.duration),Object.keys(s._sprite).length===0&&(s._sprite={__default:[0,s._duration*1e3]}),s._state!=="loaded"&&(s._state="loaded",s._emit("load"),s._loadQueue())},c=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var s=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),o=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=o?parseInt(o[1],10):null;if(s&&a&&a<9){var l=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!l&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:n}}),typeof Eu<"u"&&(Eu.Howler=t,Eu.Howl=n),typeof global<"u"?(global.HowlerGlobal=i,global.Howler=t,global.Howl=n,global.Sound=d):typeof window<"u"&&(window.HowlerGlobal=i,window.Howler=t,window.Howl=n,window.Sound=d)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var d=n._howls.length-1;d>=0;d--)n._howls[d].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,d){var r=this;if(!r.ctx||!r.ctx.listener)return r;if(n=typeof n!="number"?r._pos[1]:n,d=typeof d!="number"?r._pos[2]:d,typeof t=="number")r._pos=[t,n,d],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]);else return r._pos;return r},HowlerGlobal.prototype.orientation=function(t,n,d,r,m,e){var u=this;if(!u.ctx||!u.ctx.listener)return u;var g=u._orientation;if(n=typeof n!="number"?g[1]:n,d=typeof d!="number"?g[2]:d,r=typeof r!="number"?g[3]:r,m=typeof m!="number"?g[4]:m,e=typeof e!="number"?g[5]:e,typeof t=="number")u._orientation=[t,n,d,r,m,e],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(d,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(m,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(e,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(t,n,d,r,m,e);else return g;return u},Howl.prototype.init=function(t){return function(n){var d=this;return d._orientation=n.orientation||[1,0,0],d._stereo=n.stereo||null,d._pos=n.pos||null,d._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},d._onstereo=n.onstereo?[{fn:n.onstereo}]:[],d._onpos=n.onpos?[{fn:n.onpos}]:[],d._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"stereo",action:function(){d.stereo(t,n)}}),d;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")d._stereo=t,d._pos=[t,0,0];else return d._stereo;for(var m=d._getSoundIds(n),e=0;e<m.length;e++){var u=d._soundById(m[e]);if(u)if(typeof t=="number")u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&i(u,r),r==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),d._emit("stereo",u._id);else return u._stereo}return d},Howl.prototype.pos=function(t,n,d,r){var m=this;if(!m._webAudio)return m;if(m._state!=="loaded")return m._queue.push({event:"pos",action:function(){m.pos(t,n,d,r)}}),m;if(n=typeof n!="number"?0:n,d=typeof d!="number"?-.5:d,typeof r>"u")if(typeof t=="number")m._pos=[t,n,d];else return m._pos;for(var e=m._getSoundIds(r),u=0;u<e.length;u++){var g=m._soundById(e[u]);if(g)if(typeof t=="number")g._pos=[t,n,d],g._node&&((!g._panner||g._panner.pan)&&i(g,"spatial"),typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(d,Howler.ctx.currentTime)):g._panner.setPosition(t,n,d)),m._emit("pos",g._id);else return g._pos}return m},Howl.prototype.orientation=function(t,n,d,r){var m=this;if(!m._webAudio)return m;if(m._state!=="loaded")return m._queue.push({event:"orientation",action:function(){m.orientation(t,n,d,r)}}),m;if(n=typeof n!="number"?m._orientation[1]:n,d=typeof d!="number"?m._orientation[2]:d,typeof r>"u")if(typeof t=="number")m._orientation=[t,n,d];else return m._orientation;for(var e=m._getSoundIds(r),u=0;u<e.length;u++){var g=m._soundById(e[u]);if(g)if(typeof t=="number")g._orientation=[t,n,d],g._node&&(g._panner||(g._pos||(g._pos=m._pos||[0,0,-.5]),i(g,"spatial")),typeof g._panner.orientationX<"u"?(g._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),g._panner.orientationZ.setValueAtTime(d,Howler.ctx.currentTime)):g._panner.setOrientation(t,n,d)),m._emit("orientation",g._id);else return g._orientation}return m},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,d,r,m;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")d=n[0],typeof r>"u"&&(d.pannerAttr||(d.pannerAttr={coneInnerAngle:d.coneInnerAngle,coneOuterAngle:d.coneOuterAngle,coneOuterGain:d.coneOuterGain,distanceModel:d.distanceModel,maxDistance:d.maxDistance,refDistance:d.refDistance,rolloffFactor:d.rolloffFactor,panningModel:d.panningModel}),t._pannerAttr={coneInnerAngle:typeof d.pannerAttr.coneInnerAngle<"u"?d.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof d.pannerAttr.coneOuterAngle<"u"?d.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof d.pannerAttr.coneOuterGain<"u"?d.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof d.pannerAttr.distanceModel<"u"?d.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof d.pannerAttr.maxDistance<"u"?d.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof d.pannerAttr.refDistance<"u"?d.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof d.pannerAttr.rolloffFactor<"u"?d.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof d.pannerAttr.panningModel<"u"?d.pannerAttr.panningModel:t._panningModel});else return m=t._soundById(parseInt(n[0],10)),m?m._pannerAttr:t._pannerAttr;else n.length===2&&(d=n[0],r=parseInt(n[1],10));for(var e=t._getSoundIds(r),u=0;u<e.length;u++)if(m=t._soundById(e[u]),m){var g=m._pannerAttr;g={coneInnerAngle:typeof d.coneInnerAngle<"u"?d.coneInnerAngle:g.coneInnerAngle,coneOuterAngle:typeof d.coneOuterAngle<"u"?d.coneOuterAngle:g.coneOuterAngle,coneOuterGain:typeof d.coneOuterGain<"u"?d.coneOuterGain:g.coneOuterGain,distanceModel:typeof d.distanceModel<"u"?d.distanceModel:g.distanceModel,maxDistance:typeof d.maxDistance<"u"?d.maxDistance:g.maxDistance,refDistance:typeof d.refDistance<"u"?d.refDistance:g.refDistance,rolloffFactor:typeof d.rolloffFactor<"u"?d.rolloffFactor:g.rolloffFactor,panningModel:typeof d.panningModel<"u"?d.panningModel:g.panningModel};var c=m._panner;c||(m._pos||(m._pos=t._pos||[0,0,-.5]),i(m,"spatial"),c=m._panner),c.coneInnerAngle=g.coneInnerAngle,c.coneOuterAngle=g.coneOuterAngle,c.coneOuterGain=g.coneOuterGain,c.distanceModel=g.distanceModel,c.maxDistance=g.maxDistance,c.refDistance=g.refDistance,c.rolloffFactor=g.rolloffFactor,c.panningModel=g.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,d=n._parent;n._orientation=d._orientation,n._stereo=d._stereo,n._pos=d._pos,n._pannerAttr=d._pannerAttr,t.call(this),n._stereo?d.stereo(n._stereo):n._pos&&d.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,d=n._parent;return n._orientation=d._orientation,n._stereo=d._stereo,n._pos=d._pos,n._pannerAttr=d._pannerAttr,n._stereo?d.stereo(n._stereo):n._pos?d.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,d._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var i=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var Fb=Mf((_W,to)=>{"use strict";var K={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(i){this.toString=function(){return"CORRUPT: "+this.message},this.message=i},invalid:function(i){this.toString=function(){return"INVALID: "+this.message},this.message=i},bug:function(i){this.toString=function(){return"BUG: "+this.message},this.message=i},notReady:function(i){this.toString=function(){return"NOT READY: "+this.message},this.message=i}}};K.cipher.aes=function(i){this.s[0][0][0]||this.O();var t,n,d,r,m=this.s[0][4],e=this.s[1];t=i.length;var u=1;if(t!==4&&t!==6&&t!==8)throw new K.exception.invalid("invalid aes key size");for(this.b=[d=i.slice(0),r=[]],i=t;i<4*t+28;i++)n=d[i-1],(i%t===0||t===8&&i%t===4)&&(n=m[n>>>24]<<24^m[n>>16&255]<<16^m[n>>8&255]<<8^m[n&255],i%t===0&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*(u>>7))),d[i]=d[i-t]^n;for(t=0;i;t++,i--)n=d[t&3?i:i-4],r[t]=4>=i||4>t?n:e[0][m[n>>>24]]^e[1][m[n>>16&255]]^e[2][m[n>>8&255]]^e[3][m[n&255]]};K.cipher.aes.prototype={encrypt:function(i){return Lb(this,i,0)},decrypt:function(i){return Lb(this,i,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var i=this.s[0],t=this.s[1],n=i[4],d=t[4],r,m,e,u=[],g=[],c,s,o,a;for(r=0;256>r;r++)g[(u[r]=r<<1^283*(r>>7))^r]=r;for(m=e=0;!n[m];m^=c||1,e=g[e]||1)for(o=e^e<<1^e<<2^e<<3^e<<4,o=o>>8^o&255^99,n[m]=o,d[o]=m,s=u[r=u[c=u[m]]],a=16843009*s^65537*r^257*c^16843008*m,s=257*u[o]^16843008*o,r=0;4>r;r++)i[r][m]=s=s<<24^s>>>8,t[r][o]=a=a<<24^a>>>8;for(r=0;5>r;r++)i[r]=i[r].slice(0),t[r]=t[r].slice(0)}};function Lb(i,t,n){if(t.length!==4)throw new K.exception.invalid("invalid aes block size");var d=i.b[n],r=t[0]^d[0],m=t[n?3:1]^d[1],e=t[2]^d[2];t=t[n?1:3]^d[3];var u,g,c,s=d.length/4-2,o,a=4,l=[0,0,0,0];u=i.s[n],i=u[0];var p=u[1],h=u[2],f=u[3],v=u[4];for(o=0;o<s;o++)u=i[r>>>24]^p[m>>16&255]^h[e>>8&255]^f[t&255]^d[a],g=i[m>>>24]^p[e>>16&255]^h[t>>8&255]^f[r&255]^d[a+1],c=i[e>>>24]^p[t>>16&255]^h[r>>8&255]^f[m&255]^d[a+2],t=i[t>>>24]^p[r>>16&255]^h[m>>8&255]^f[e&255]^d[a+3],a+=4,r=u,m=g,e=c;for(o=0;4>o;o++)l[n?3&-o:o]=v[r>>>24]<<24^v[m>>16&255]<<16^v[e>>8&255]<<8^v[t&255]^d[a++],u=r,r=m,m=e,e=t,t=u;return l}K.bitArray={bitSlice:function(i,t,n){return i=K.bitArray.$(i.slice(t/32),32-(t&31)).slice(1),n===void 0?i:K.bitArray.clamp(i,n-t)},extract:function(i,t,n){var d=Math.floor(-t-n&31);return((t+n-1^t)&-32?i[t/32|0]<<32-d^i[t/32+1|0]>>>d:i[t/32|0]>>>d)&(1<<n)-1},concat:function(i,t){if(i.length===0||t.length===0)return i.concat(t);var n=i[i.length-1],d=K.bitArray.getPartial(n);return d===32?i.concat(t):K.bitArray.$(t,d,n|0,i.slice(0,i.length-1))},bitLength:function(i){var t=i.length;return t===0?0:32*(t-1)+K.bitArray.getPartial(i[t-1])},clamp:function(i,t){if(32*i.length<t)return i;i=i.slice(0,Math.ceil(t/32));var n=i.length;return t=t&31,0<n&&t&&(i[n-1]=K.bitArray.partial(t,i[n-1]&2147483648>>t-1,1)),i},partial:function(i,t,n){return i===32?t:(n?t|0:t<<32-i)+1099511627776*i},getPartial:function(i){return Math.round(i/1099511627776)||32},equal:function(i,t){if(K.bitArray.bitLength(i)!==K.bitArray.bitLength(t))return!1;var n=0,d;for(d=0;d<i.length;d++)n|=i[d]^t[d];return n===0},$:function(i,t,n,d){var r;for(r=0,d===void 0&&(d=[]);32<=t;t-=32)d.push(n),n=0;if(t===0)return d.concat(i);for(r=0;r<i.length;r++)d.push(n|i[r]>>>t),n=i[r]<<32-t;return r=i.length?i[i.length-1]:0,i=K.bitArray.getPartial(r),d.push(K.bitArray.partial(t+i&31,32<t+i?n:d.pop(),1)),d},i:function(i,t){return[i[0]^t[0],i[1]^t[1],i[2]^t[2],i[3]^t[3]]},byteswapM:function(i){var t,n;for(t=0;t<i.length;++t)n=i[t],i[t]=n>>>24|n>>>8&65280|(n&65280)<<8|n<<24;return i}};K.codec.utf8String={fromBits:function(i){var t="",n=K.bitArray.bitLength(i),d,r;for(d=0;d<n/8;d++)!(d&3)&&(r=i[d/4]),t+=String.fromCharCode(r>>>8>>>8>>>8),r<<=8;return decodeURIComponent(escape(t))},toBits:function(i){i=unescape(encodeURIComponent(i));var t=[],n,d=0;for(n=0;n<i.length;n++)d=d<<8|i.charCodeAt(n),(n&3)===3&&(t.push(d),d=0);return n&3&&t.push(K.bitArray.partial(8*(n&3),d)),t}};K.codec.hex={fromBits:function(i){var t="",n;for(n=0;n<i.length;n++)t+=((i[n]|0)+0xf00000000000).toString(16).substr(4);return t.substr(0,K.bitArray.bitLength(i)/4)},toBits:function(i){var t,n=[],d;for(i=i.replace(/\s|0x/g,""),d=i.length,i=i+"00000000",t=0;t<i.length;t+=8)n.push(parseInt(i.substr(t,8),16)^0);return K.bitArray.clamp(n,4*d)}};K.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(i,t,n){var d=K.codec.base32.BASE,r=K.codec.base32.REMAINING,m="",e=0,u=K.codec.base32.B,g=0,c=K.bitArray.bitLength(i);for(n&&(u=K.codec.base32.X),n=0;m.length*d<c;)m+=u.charAt((g^i[n]>>>e)>>>r),e<d?(g=i[n]<<d-e,e+=r,n++):(g<<=d,e-=d);for(;m.length&7&&!t;)m+="=";return m},toBits:function(i,t){i=i.replace(/\s|=/g,"").toUpperCase();var n=K.codec.base32.BITS,d=K.codec.base32.BASE,r=K.codec.base32.REMAINING,m=[],e,u=0,g=K.codec.base32.B,c=0,s,o="base32";for(t&&(g=K.codec.base32.X,o="base32hex"),e=0;e<i.length;e++){if(s=g.indexOf(i.charAt(e)),0>s){if(!t)try{return K.codec.base32hex.toBits(i)}catch{}throw new K.exception.invalid("this isn't "+o+"!")}u>r?(u-=r,m.push(c^s>>>u),c=s<<n-u):(u+=d,c^=s<<n-u)}return u&56&&m.push(K.bitArray.partial(u&56,c,1)),m}};K.codec.base32hex={fromBits:function(i,t){return K.codec.base32.fromBits(i,t,1)},toBits:function(i){return K.codec.base32.toBits(i,1)}};K.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(i,t,n){var d="",r=0,m=K.codec.base64.B,e=0,u=K.bitArray.bitLength(i);for(n&&(m=m.substr(0,62)+"-_"),n=0;6*d.length<u;)d+=m.charAt((e^i[n]>>>r)>>>26),6>r?(e=i[n]<<6-r,r+=26,n++):(e<<=6,r-=6);for(;d.length&3&&!t;)d+="=";return d},toBits:function(i,t){i=i.replace(/\s|=/g,"");var n=[],d,r=0,m=K.codec.base64.B,e=0,u;for(t&&(m=m.substr(0,62)+"-_"),d=0;d<i.length;d++){if(u=m.indexOf(i.charAt(d)),0>u)throw new K.exception.invalid("this isn't base64!");26<r?(r-=26,n.push(e^u>>>r),e=u<<32-r):(r+=6,e^=u<<32-r)}return r&56&&n.push(K.bitArray.partial(r&56,e,1)),n}};K.codec.base64url={fromBits:function(i){return K.codec.base64.fromBits(i,1,1)},toBits:function(i){return K.codec.base64.toBits(i,1)}};K.hash.sha256=function(i){this.b[0]||this.O(),i?(this.F=i.F.slice(0),this.A=i.A.slice(0),this.l=i.l):this.reset()};K.hash.sha256.hash=function(i){return new K.hash.sha256().update(i).finalize()};K.hash.sha256.prototype={blockSize:512,reset:function(){return this.F=this.Y.slice(0),this.A=[],this.l=0,this},update:function(i){typeof i=="string"&&(i=K.codec.utf8String.toBits(i));var t,n=this.A=K.bitArray.concat(this.A,i);if(t=this.l,i=this.l=t+K.bitArray.bitLength(i),9007199254740991<i)throw new K.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var d=new Uint32Array(n),r=0;for(t=512+t-(512+t&511);t<=i;t+=512)gg(this,d.subarray(16*r,16*(r+1))),r+=1;n.splice(0,16*r)}else for(t=512+t-(512+t&511);t<=i;t+=512)gg(this,n.splice(0,16));return this},finalize:function(){var i,n=this.A,t=this.F,n=K.bitArray.concat(n,[K.bitArray.partial(1,1)]);for(i=n.length+2;i&15;i++)n.push(0);for(n.push(Math.floor(this.l/4294967296)),n.push(this.l|0);n.length;)gg(this,n.splice(0,16));return this.reset(),t},Y:[],b:[],O:function(){function i(m){return 4294967296*(m-Math.floor(m))|0}for(var t=0,n=2,d,r;64>t;n++){for(r=!0,d=2;d*d<=n;d++)if(n%d===0){r=!1;break}r&&(8>t&&(this.Y[t]=i(Math.pow(n,.5))),this.b[t]=i(Math.pow(n,1/3)),t++)}}};function gg(i,t){var n,d,r,m=i.F,e=i.b,u=m[0],g=m[1],c=m[2],s=m[3],o=m[4],a=m[5],l=m[6],p=m[7];for(n=0;64>n;n++)16>n?d=t[n]:(d=t[n+1&15],r=t[n+14&15],d=t[n&15]=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+t[n&15]+t[n+9&15]|0),d=d+p+(o>>>6^o>>>11^o>>>25^o<<26^o<<21^o<<7)+(l^o&(a^l))+e[n],p=l,l=a,a=o,o=s+d|0,s=c,c=g,g=u,u=d+(g&c^s&(g^c))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;m[0]=m[0]+u|0,m[1]=m[1]+g|0,m[2]=m[2]+c|0,m[3]=m[3]+s|0,m[4]=m[4]+o|0,m[5]=m[5]+a|0,m[6]=m[6]+l|0,m[7]=m[7]+p|0}K.mode.ccm={name:"ccm",G:[],listenProgress:function(i){K.mode.ccm.G.push(i)},unListenProgress:function(i){i=K.mode.ccm.G.indexOf(i),-1<i&&K.mode.ccm.G.splice(i,1)},fa:function(i){var t=K.mode.ccm.G.slice(),n;for(n=0;n<t.length;n+=1)t[n](i)},encrypt:function(i,t,n,d,r){var m,e=t.slice(0),u=K.bitArray,g=u.bitLength(n)/8,c=u.bitLength(e)/8;if(r=r||64,d=d||[],7>g)throw new K.exception.invalid("ccm: iv must be at least 7 bytes");for(m=2;4>m&&c>>>8*m;m++);return m<15-g&&(m=15-g),n=u.clamp(n,8*(15-m)),t=K.mode.ccm.V(i,t,n,d,r,m),e=K.mode.ccm.C(i,e,n,t,r,m),u.concat(e.data,e.tag)},decrypt:function(i,t,n,d,r){r=r||64,d=d||[];var m=K.bitArray,e=m.bitLength(n)/8,c=m.bitLength(t),u=m.clamp(t,c-r),g=m.bitSlice(t,c-r),c=(c-r)/8;if(7>e)throw new K.exception.invalid("ccm: iv must be at least 7 bytes");for(t=2;4>t&&c>>>8*t;t++);if(t<15-e&&(t=15-e),n=m.clamp(n,8*(15-t)),u=K.mode.ccm.C(i,u,n,g,r,t),i=K.mode.ccm.V(i,u.data,n,d,r,t),!m.equal(u.tag,i))throw new K.exception.corrupt("ccm: tag doesn't match");return u.data},na:function(i,t,n,d,r,m){var e=[],u=K.bitArray,g=u.i;if(d=[u.partial(8,(t.length?64:0)|d-2<<2|m-1)],d=u.concat(d,n),d[3]|=r,d=i.encrypt(d),t.length)for(n=u.bitLength(t)/8,65279>=n?e=[u.partial(16,n)]:4294967295>=n&&(e=u.concat([u.partial(16,65534)],[n])),e=u.concat(e,t),t=0;t<e.length;t+=4)d=i.encrypt(g(d,e.slice(t,t+4).concat([0,0,0])));return d},V:function(i,t,n,d,r,m){var e=K.bitArray,u=e.i;if(r/=8,r%2||4>r||16<r)throw new K.exception.invalid("ccm: invalid tag length");if(4294967295<d.length||4294967295<t.length)throw new K.exception.bug("ccm: can't deal with 4GiB or more data");for(n=K.mode.ccm.na(i,d,n,r,e.bitLength(t)/8,m),d=0;d<t.length;d+=4)n=i.encrypt(u(n,t.slice(d,d+4).concat([0,0,0])));return e.clamp(n,8*r)},C:function(i,t,n,d,r,m){var e,u=K.bitArray;e=u.i;var g=t.length,c=u.bitLength(t),s=g/50,o=s;if(n=u.concat([u.partial(8,m-1)],n).concat([0,0,0]).slice(0,4),d=u.bitSlice(e(d,i.encrypt(n)),0,r),!g)return{tag:d,data:[]};for(e=0;e<g;e+=4)e>s&&(K.mode.ccm.fa(e/g),s+=o),n[3]++,r=i.encrypt(n),t[e]^=r[0],t[e+1]^=r[1],t[e+2]^=r[2],t[e+3]^=r[3];return{tag:d,data:u.clamp(t,c)}}};K.mode.ocb2={name:"ocb2",encrypt:function(i,t,n,d,r,m){if(K.bitArray.bitLength(n)!==128)throw new K.exception.invalid("ocb iv must be 128 bits");var e,u=K.mode.ocb2.S,g=K.bitArray,c=g.i,s=[0,0,0,0];n=u(i.encrypt(n));var o,a=[];for(d=d||[],r=r||64,e=0;e+4<t.length;e+=4)o=t.slice(e,e+4),s=c(s,o),a=a.concat(c(n,i.encrypt(c(n,o)))),n=u(n);return o=t.slice(e),t=g.bitLength(o),e=i.encrypt(c(n,[0,0,0,t])),o=g.clamp(c(o.concat([0,0,0]),e),t),s=c(s,c(o.concat([0,0,0]),e)),s=i.encrypt(c(s,c(n,u(n)))),d.length&&(s=c(s,m?d:K.mode.ocb2.pmac(i,d))),a.concat(g.concat(o,g.clamp(s,r)))},decrypt:function(i,t,n,d,r,m){if(K.bitArray.bitLength(n)!==128)throw new K.exception.invalid("ocb iv must be 128 bits");r=r||64;var e=K.mode.ocb2.S,u=K.bitArray,g=u.i,c=[0,0,0,0],s=e(i.encrypt(n)),o,a,l=K.bitArray.bitLength(t)-r,p=[];for(d=d||[],n=0;n+4<l/32;n+=4)o=g(s,i.decrypt(g(s,t.slice(n,n+4)))),c=g(c,o),p=p.concat(o),s=e(s);if(a=l-32*n,o=i.encrypt(g(s,[0,0,0,a])),o=g(o,u.clamp(t.slice(n),a).concat([0,0,0])),c=g(c,o),c=i.encrypt(g(c,g(s,e(s)))),d.length&&(c=g(c,m?d:K.mode.ocb2.pmac(i,d))),!u.equal(u.clamp(c,r),u.bitSlice(t,l)))throw new K.exception.corrupt("ocb: tag doesn't match");return p.concat(u.clamp(o,a))},pmac:function(i,t){var n,d=K.mode.ocb2.S,r=K.bitArray,m=r.i,e=[0,0,0,0],u=i.encrypt([0,0,0,0]),u=m(u,d(d(u)));for(n=0;n+4<t.length;n+=4)u=d(u),e=m(e,i.encrypt(m(u,t.slice(n,n+4))));return n=t.slice(n),128>r.bitLength(n)&&(u=m(u,d(u)),n=r.concat(n,[-2147483648,0,0,0])),e=m(e,n),i.encrypt(m(d(m(u,d(u))),e))},S:function(i){return[i[0]<<1^i[1]>>>31,i[1]<<1^i[2]>>>31,i[2]<<1^i[3]>>>31,i[3]<<1^135*(i[0]>>>31)]}};K.mode.gcm={name:"gcm",encrypt:function(i,t,n,d,r){var m=t.slice(0);return t=K.bitArray,d=d||[],i=K.mode.gcm.C(!0,i,m,d,n,r||128),t.concat(i.data,i.tag)},decrypt:function(i,t,n,d,r){var m=t.slice(0),e=K.bitArray,u=e.bitLength(m);if(r=r||128,d=d||[],r<=u?(t=e.bitSlice(m,u-r),m=e.bitSlice(m,0,u-r)):(t=m,m=[]),i=K.mode.gcm.C(!1,i,m,d,n,r),!e.equal(i.tag,t))throw new K.exception.corrupt("gcm: tag doesn't match");return i.data},ka:function(i,t){var n,d,r,m,e,u=K.bitArray.i;for(r=[0,0,0,0],m=t.slice(0),n=0;128>n;n++){for((d=(i[Math.floor(n/32)]&1<<31-n%32)!==0)&&(r=u(r,m)),e=(m[3]&1)!==0,d=3;0<d;d--)m[d]=m[d]>>>1|(m[d-1]&1)<<31;m[0]>>>=1,e&&(m[0]^=-520093696)}return r},j:function(i,t,n){var d,r=n.length;for(t=t.slice(0),d=0;d<r;d+=4)t[0]^=4294967295&n[d],t[1]^=4294967295&n[d+1],t[2]^=4294967295&n[d+2],t[3]^=4294967295&n[d+3],t=K.mode.gcm.ka(t,i);return t},C:function(i,t,n,d,r,m){var e,u,g,c,s,o,a,l,p=K.bitArray;for(o=n.length,a=p.bitLength(n),l=p.bitLength(d),u=p.bitLength(r),e=t.encrypt([0,0,0,0]),u===96?(r=r.slice(0),r=p.concat(r,[1])):(r=K.mode.gcm.j(e,[0,0,0,0],r),r=K.mode.gcm.j(e,r,[0,0,Math.floor(u/4294967296),u&4294967295])),u=K.mode.gcm.j(e,[0,0,0,0],d),s=r.slice(0),d=u.slice(0),i||(d=K.mode.gcm.j(e,u,n)),c=0;c<o;c+=4)s[3]++,g=t.encrypt(s),n[c]^=g[0],n[c+1]^=g[1],n[c+2]^=g[2],n[c+3]^=g[3];return n=p.clamp(n,a),i&&(d=K.mode.gcm.j(e,u,n)),i=[Math.floor(l/4294967296),l&4294967295,Math.floor(a/4294967296),a&4294967295],d=K.mode.gcm.j(e,d,i),g=t.encrypt(r),d[0]^=g[0],d[1]^=g[1],d[2]^=g[2],d[3]^=g[3],{tag:p.bitSlice(d,0,m),data:n}}};K.misc.hmac=function(i,t){this.W=t=t||K.hash.sha256;var n=[[],[]],d,r=t.prototype.blockSize/32;for(this.w=[new t,new t],i.length>r&&(i=t.hash(i)),d=0;d<r;d++)n[0][d]=i[d]^909522486,n[1][d]=i[d]^1549556828;this.w[0].update(n[0]),this.w[1].update(n[1]),this.R=new t(this.w[0])};K.misc.hmac.prototype.encrypt=K.misc.hmac.prototype.mac=function(i){if(this.aa)throw new K.exception.invalid("encrypt on already updated hmac called!");return this.update(i),this.digest(i)};K.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]),this.aa=!1};K.misc.hmac.prototype.update=function(i){this.aa=!0,this.R.update(i)};K.misc.hmac.prototype.digest=function(){var i=this.R.finalize(),i=new this.W(this.w[1]).update(i).finalize();return this.reset(),i};K.misc.pbkdf2=function(i,t,n,d,r){if(n=n||1e4,0>d||0>n)throw new K.exception.invalid("invalid params to pbkdf2");typeof i=="string"&&(i=K.codec.utf8String.toBits(i)),typeof t=="string"&&(t=K.codec.utf8String.toBits(t)),r=r||K.misc.hmac,i=new r(i);var m,e,u,g,c=[],s=K.bitArray;for(g=1;32*c.length<(d||1);g++){for(r=m=i.encrypt(s.concat(t,[g])),e=1;e<n;e++)for(m=i.encrypt(m),u=0;u<m.length;u++)r[u]^=m[u];c=c.concat(r)}return d&&(c=s.clamp(c,d)),c};K.prng=function(i){this.c=[new K.hash.sha256],this.m=[0],this.P=0,this.H={},this.N=0,this.U={},this.Z=this.f=this.o=this.ha=0,this.b=[0,0,0,0,0,0,0,0],this.h=[0,0,0,0],this.L=void 0,this.M=i,this.D=!1,this.K={progress:{},seeded:{}},this.u=this.ga=0,this.I=1,this.J=2,this.ca=65536,this.T=[0,48,64,96,128,192,256,384,512,768,1024],this.da=3e4,this.ba=80};K.prng.prototype={randomWords:function(i,t){var n=[],d;d=this.isReady(t);var r;if(d===this.u)throw new K.exception.notReady("generator isn't seeded");if(d&this.J){d=!(d&this.I),r=[];var m=0,e;for(this.Z=r[0]=new Date().valueOf()+this.da,e=0;16>e;e++)r.push(4294967296*Math.random()|0);for(e=0;e<this.c.length&&(r=r.concat(this.c[e].finalize()),m+=this.m[e],this.m[e]=0,d||!(this.P&1<<e));e++);for(this.P>=1<<this.c.length&&(this.c.push(new K.hash.sha256),this.m.push(0)),this.f-=m,m>this.o&&(this.o=m),this.P++,this.b=K.hash.sha256.hash(this.b.concat(r)),this.L=new K.cipher.aes(this.b),d=0;4>d&&(this.h[d]=this.h[d]+1|0,!this.h[d]);d++);}for(d=0;d<i;d+=4)(d+1)%this.ca===0&&Db(this),r=yg(this),n.push(r[0],r[1],r[2],r[3]);return Db(this),n.slice(0,i)},setDefaultParanoia:function(i,t){if(i===0&&t!=="Setting paranoia=0 will ruin your security; use it only for testing")throw new K.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=i},addEntropy:function(i,t,n){n=n||"user";var d,r,m=new Date().valueOf(),e=this.H[n],u=this.isReady(),g=0;switch(d=this.U[n],d===void 0&&(d=this.U[n]=this.ha++),e===void 0&&(e=this.H[n]=0),this.H[n]=(this.H[n]+1)%this.c.length,typeof i){case"number":t===void 0&&(t=1),this.c[e].update([d,this.N++,1,t,m,1,i|0]);break;case"object":if(n=Object.prototype.toString.call(i),n==="[object Uint32Array]"){for(r=[],n=0;n<i.length;n++)r.push(i[n]);i=r}else for(n!=="[object Array]"&&(g=1),n=0;n<i.length&&!g;n++)typeof i[n]!="number"&&(g=1);if(!g){if(t===void 0)for(n=t=0;n<i.length;n++)for(r=i[n];0<r;)t++,r=r>>>1;this.c[e].update([d,this.N++,2,t,m,i.length].concat(i))}break;case"string":t===void 0&&(t=i.length),this.c[e].update([d,this.N++,3,t,m,i.length]),this.c[e].update(i);break;default:g=1}if(g)throw new K.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[e]+=t,this.f+=t,u===this.u&&(this.isReady()!==this.u&&Ob("seeded",Math.max(this.o,this.f)),Ob("progress",this.getProgress()))},isReady:function(i){return i=this.T[i!==void 0?i:this.M],this.o&&this.o>=i?this.m[0]>this.ba&&new Date().valueOf()>this.Z?this.J|this.I:this.I:this.f>=i?this.J|this.u:this.u},getProgress:function(i){return i=this.T[i||this.M],this.o>=i||this.f>i?1:this.f/i},startCollectors:function(){if(!this.D){if(this.a={loadTimeCollector:hh(this,this.ma),mouseCollector:hh(this,this.oa),keyboardCollector:hh(this,this.la),accelerometerCollector:hh(this,this.ea),touchCollector:hh(this,this.qa)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new K.exception.bug("can't attach event");this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(i,t){this.K[i][this.ga++]=t},removeEventListener:function(i,t){var n,d,r=this.K[i],m=[];for(d in r)r.hasOwnProperty(d)&&r[d]===t&&m.push(d);for(n=0;n<m.length;n++)d=m[n],delete r[d]},la:function(){lh(this,1)},oa:function(i){var t,n;try{t=i.x||i.clientX||i.offsetX||0,n=i.y||i.clientY||i.offsetY||0}catch{n=t=0}t!=0&&n!=0&&this.addEntropy([t,n],2,"mouse"),lh(this,0)},qa:function(i){i=i.touches[0]||i.changedTouches[0],this.addEntropy([i.pageX||i.clientX,i.pageY||i.clientY],1,"touch"),lh(this,0)},ma:function(){lh(this,2)},ea:function(i){if(i=i.accelerationIncludingGravity.x||i.accelerationIncludingGravity.y||i.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;typeof t=="number"&&this.addEntropy(t,1,"accelerometer")}i&&this.addEntropy(i,2,"accelerometer"),lh(this,0)}};function Ob(i,t){var n,d=K.random.K[i],r=[];for(n in d)d.hasOwnProperty(n)&&r.push(d[n]);for(n=0;n<r.length;n++)r[n](t)}function lh(i,t){typeof window<"u"&&window.performance&&typeof window.performance.now=="function"?i.addEntropy(window.performance.now(),t,"loadtime"):i.addEntropy(new Date().valueOf(),t,"loadtime")}function Db(i){i.b=yg(i).concat(yg(i)),i.L=new K.cipher.aes(i.b)}function yg(i){for(var t=0;4>t&&(i.h[t]=i.h[t]+1|0,!i.h[t]);t++);return i.L.encrypt(i.h)}function hh(i,t){return function(){t.apply(i,arguments)}}K.random=new K.prng(6);t:try{if(xc=typeof to<"u"&&to.exports){try{Sc=Xw("crypto")}catch{Sc=null}xc=yc=Sc}if(xc&&yc.randomBytes)uh=yc.randomBytes(128),uh=new Uint32Array(new Uint8Array(uh).buffer),K.random.addEntropy(uh,1024,"crypto['randomBytes']");else if(typeof window<"u"&&typeof Uint32Array<"u"){if(dh=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(dh);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(dh);else break t;K.random.addEntropy(dh,1024,"crypto['getRandomValues']")}}catch(i){typeof window<"u"&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(i))}var uh,yc,dh,xc,Sc;K.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(i,t,n,d){n=n||{},d=d||{};var r=K.json,m=r.g({iv:K.random.randomWords(4,0)},r.defaults),e;if(r.g(m,n),n=m.adata,typeof m.salt=="string"&&(m.salt=K.codec.base64.toBits(m.salt)),typeof m.iv=="string"&&(m.iv=K.codec.base64.toBits(m.iv)),!K.mode[m.mode]||!K.cipher[m.cipher]||typeof i=="string"&&100>=m.iter||m.ts!==64&&m.ts!==96&&m.ts!==128||m.ks!==128&&m.ks!==192&&m.ks!==256||2>m.iv.length||4<m.iv.length)throw new K.exception.invalid("json encrypt: invalid parameters");return typeof i=="string"?(e=K.misc.cachedPbkdf2(i,m),i=e.key.slice(0,m.ks/32),m.salt=e.salt):K.ecc&&i instanceof K.ecc.elGamal.publicKey&&(e=i.kem(),m.kemtag=e.tag,i=e.key.slice(0,m.ks/32)),typeof t=="string"&&(t=K.codec.utf8String.toBits(t)),typeof n=="string"&&(m.adata=n=K.codec.utf8String.toBits(n)),e=new K.cipher[m.cipher](i),r.g(d,m),d.key=i,m.ct=m.mode==="ccm"&&K.arrayBuffer&&K.arrayBuffer.ccm&&t instanceof ArrayBuffer?K.arrayBuffer.ccm.encrypt(e,t,m.iv,n,m.ts):K.mode[m.mode].encrypt(e,t,m.iv,n,m.ts),m},encrypt:function(i,t,n,d){var r=K.json,m=r.ja.apply(r,arguments);return r.encode(m)},ia:function(i,t,n,d){n=n||{},d=d||{};var r=K.json;t=r.g(r.g(r.g({},r.defaults),t),n,!0);var m,e;if(m=t.adata,typeof t.salt=="string"&&(t.salt=K.codec.base64.toBits(t.salt)),typeof t.iv=="string"&&(t.iv=K.codec.base64.toBits(t.iv)),!K.mode[t.mode]||!K.cipher[t.cipher]||typeof i=="string"&&100>=t.iter||t.ts!==64&&t.ts!==96&&t.ts!==128||t.ks!==128&&t.ks!==192&&t.ks!==256||!t.iv||2>t.iv.length||4<t.iv.length)throw new K.exception.invalid("json decrypt: invalid parameters");return typeof i=="string"?(e=K.misc.cachedPbkdf2(i,t),i=e.key.slice(0,t.ks/32),t.salt=e.salt):K.ecc&&i instanceof K.ecc.elGamal.secretKey&&(i=i.unkem(K.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),typeof m=="string"&&(m=K.codec.utf8String.toBits(m)),e=new K.cipher[t.cipher](i),m=t.mode==="ccm"&&K.arrayBuffer&&K.arrayBuffer.ccm&&t.ct instanceof ArrayBuffer?K.arrayBuffer.ccm.decrypt(e,t.ct,t.iv,t.tag,m,t.ts):K.mode[t.mode].decrypt(e,t.ct,t.iv,m,t.ts),r.g(d,t),d.key=i,n.raw===1?m:K.codec.utf8String.fromBits(m)},decrypt:function(i,t,n,d){var r=K.json;return r.ia(i,r.decode(t),n,d)},encode:function(i){var t,n="{",d="";for(t in i)if(i.hasOwnProperty(t)){if(!t.match(/^[a-z0-9]+$/i))throw new K.exception.invalid("json encode: invalid property name");switch(n+=d+'"'+t+'":',d=",",typeof i[t]){case"number":case"boolean":n+=i[t];break;case"string":n+='"'+escape(i[t])+'"';break;case"object":n+='"'+K.codec.base64.fromBits(i[t],0)+'"';break;default:throw new K.exception.bug("json encode: unsupported type")}}return n+"}"},decode:function(i){if(i=i.replace(/\s/g,""),!i.match(/^\{.*\}$/))throw new K.exception.invalid("json decode: this isn't json!");i=i.replace(/^\{|\}$/g,"").split(/,/);var t={},n,d;for(n=0;n<i.length;n++){if(!(d=i[n].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new K.exception.invalid("json decode: this isn't json!");d[3]!=null?t[d[2]]=parseInt(d[3],10):d[4]!=null?t[d[2]]=d[2].match(/^(ct|adata|salt|iv)$/)?K.codec.base64.toBits(d[4]):unescape(d[4]):d[5]!=null&&(t[d[2]]=d[5]==="true")}return t},g:function(i,t,n){if(i===void 0&&(i={}),t===void 0)return i;for(var d in t)if(t.hasOwnProperty(d)){if(n&&i[d]!==void 0&&i[d]!==t[d])throw new K.exception.invalid("required parameter overridden");i[d]=t[d]}return i},sa:function(i,t){var n={},d;for(d in i)i.hasOwnProperty(d)&&i[d]!==t[d]&&(n[d]=i[d]);return n},ra:function(i,t){var n={},d;for(d=0;d<t.length;d++)i[t[d]]!==void 0&&(n[t[d]]=i[t[d]]);return n}};K.encrypt=K.json.encrypt;K.decrypt=K.json.decrypt;K.misc.pa={};K.misc.cachedPbkdf2=function(i,t){var n=K.misc.pa,d;return t=t||{},d=t.iter||1e3,n=n[i]=n[i]||{},d=n[d]=n[d]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):K.random.randomWords(2,0)},n=t.salt===void 0?d.firstSalt:t.salt,d[n]=d[n]||K.misc.pbkdf2(i,n,t.iter),{key:d[n].slice(0),salt:n.slice(0)}};typeof to<"u"&&to.exports&&(to.exports=K);typeof define=="function"&&define([],function(){return K})});var $e=Mf((eu,Yy)=>{(function(t,n){typeof eu=="object"&&typeof Yy=="object"?Yy.exports=n():typeof define=="function"&&define.amd?define("Phaser",[],n):typeof eu=="object"?eu.Phaser=n():t.Phaser=n()})(eu,()=>(()=>{var i={6659:r=>{"use strict";var m=Object.prototype.hasOwnProperty,e="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(e=!1));function g(a,l,p){this.fn=a,this.context=l,this.once=p||!1}function c(a,l,p,h,f){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new g(p,h||a,f),y=e?e+l:l;return a._events[y]?a._events[y].fn?a._events[y]=[a._events[y],v]:a._events[y].push(v):(a._events[y]=v,a._eventsCount++),a}function s(a,l){--a._eventsCount===0?a._events=new u:delete a._events[l]}function o(){this._events=new u,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],p,h;if(this._eventsCount===0)return l;for(h in p=this._events)m.call(p,h)&&l.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(p)):l},o.prototype.listeners=function(l){var p=e?e+l:l,h=this._events[p];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,v=h.length,y=new Array(v);f<v;f++)y[f]=h[f].fn;return y},o.prototype.listenerCount=function(l){var p=e?e+l:l,h=this._events[p];return h?h.fn?1:h.length:0},o.prototype.emit=function(l,p,h,f,v,y){var x=e?e+l:l;if(!this._events[x])return!1;var S=this._events[x],E=arguments.length,b,T;if(S.fn){switch(S.once&&this.removeListener(l,S.fn,void 0,!0),E){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,h),!0;case 4:return S.fn.call(S.context,p,h,f),!0;case 5:return S.fn.call(S.context,p,h,f,v),!0;case 6:return S.fn.call(S.context,p,h,f,v,y),!0}for(T=1,b=new Array(E-1);T<E;T++)b[T-1]=arguments[T];S.fn.apply(S.context,b)}else{var P=S.length,C;for(T=0;T<P;T++)switch(S[T].once&&this.removeListener(l,S[T].fn,void 0,!0),E){case 1:S[T].fn.call(S[T].context);break;case 2:S[T].fn.call(S[T].context,p);break;case 3:S[T].fn.call(S[T].context,p,h);break;case 4:S[T].fn.call(S[T].context,p,h,f);break;default:if(!b)for(C=1,b=new Array(E-1);C<E;C++)b[C-1]=arguments[C];S[T].fn.apply(S[T].context,b)}}return!0},o.prototype.on=function(l,p,h){return c(this,l,p,h,!1)},o.prototype.once=function(l,p,h){return c(this,l,p,h,!0)},o.prototype.removeListener=function(l,p,h,f){var v=e?e+l:l;if(!this._events[v])return this;if(!p)return s(this,v),this;var y=this._events[v];if(y.fn)y.fn===p&&(!f||y.once)&&(!h||y.context===h)&&s(this,v);else{for(var x=0,S=[],E=y.length;x<E;x++)(y[x].fn!==p||f&&!y[x].once||h&&y[x].context!==h)&&S.push(y[x]);S.length?this._events[v]=S.length===1?S[0]:S:s(this,v)}return this},o.prototype.removeAllListeners=function(l){var p;return l?(p=e?e+l:l,this._events[p]&&s(this,p)):(this._events=new u,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o},62270:(r,m,e)=>{var u=e(82590),g=function(c,s,o,a){for(var l=c[0],p=1;p<c.length;p++){var h=c[p];u(h,l,s,o,a),l=h}return c};r.exports=g},61148:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l){return u(c,"angle",s,o,a,l)};r.exports=g},22015:r=>{var m=function(e,u,g){for(var c=0;c<e.length;c++){var s=e[c];u.call(g,s)}return e};r.exports=m},31060:r=>{var m=function(e,u,g){g===void 0&&(g=0);for(var c=g;c<e.length;c++){var s=e[c],o=!0;for(var a in u)s[a]!==u[a]&&(o=!1);if(o)return s}return null};r.exports=m},52367:r=>{var m=function(e,u,g){g===void 0&&(g=0);for(var c=g;c<e.length;c++){var s=e[c],o=!0;for(var a in u)s[a]!==u[a]&&(o=!1);if(o)return s}return null};r.exports=m},12673:(r,m,e)=>{var u=e(40327),g=e(84093),c=e(72632),s=e(72283),o=e(71030),a=new o({sys:{queueDepthSort:s,events:{once:s}}},0,0,1,1).setOrigin(0,0),l=function(p,h){h===void 0&&(h={});var f=h.hasOwnProperty("width"),v=h.hasOwnProperty("height"),y=c(h,"width",-1),x=c(h,"height",-1),S=c(h,"cellWidth",1),E=c(h,"cellHeight",S),b=c(h,"position",g.TOP_LEFT),T=c(h,"x",0),P=c(h,"y",0),C=0,w=0,A=y*S,R=x*E;a.setPosition(T,P),a.setSize(S,E);for(var I=0;I<p.length;I++)if(u(p[I],a,b),f&&y===-1)a.x+=S;else if(v&&x===-1)a.y+=E;else if(v&&!f){if(w+=E,a.y+=E,w===R&&(w=0,C+=S,a.y=P,a.x+=S,C===A))break}else if(C+=S,a.x+=S,C===A&&(C=0,w+=E,a.x=T,a.y+=E,w===R))break;return p};r.exports=l},691:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l){return u(c,"alpha",s,o,a,l)};r.exports=g},3877:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l){return u(c,"x",s,o,a,l)};r.exports=g},71020:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l,p,h){return o==null&&(o=s),u(c,"x",s,a,p,h),u(c,"y",o,l,p,h)};r.exports=g},28970:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l){return u(c,"y",s,o,a,l)};r.exports=g},82249:r=>{var m=function(e,u,g,c){g===void 0&&(g=0),c===void 0&&(c=6.28);for(var s=g,o=(c-g)/e.length,a=u.x,l=u.y,p=u.radius,h=0;h<e.length;h++)e[h].x=a+p*Math.cos(s),e[h].y=l+p*Math.sin(s),s+=o;return e};r.exports=m},30285:r=>{var m=function(e,u,g,c){g===void 0&&(g=0),c===void 0&&(c=6.28);for(var s=g,o=(c-g)/e.length,a=u.width/2,l=u.height/2,p=0;p<e.length;p++)e[p].x=u.x+a*Math.cos(s),e[p].y=u.y+l*Math.sin(s),s+=o;return e};r.exports=m},61557:(r,m,e)=>{var u=e(8570),g=function(c,s){for(var o=u(s,c.length),a=0;a<c.length;a++){var l=c[a],p=o[a];l.x=p.x,l.y=p.y}return c};r.exports=g},63549:(r,m,e)=>{var u=e(40053),g=e(77640),c=e(38487),s=function(o,a,l){l===void 0&&(l=0);var p=u(a,!1,o.length);l>0?g(p,l):l<0&&c(p,Math.abs(l));for(var h=0;h<o.length;h++)o[h].x=p[h].x,o[h].y=p[h].y;return o};r.exports=s},51629:(r,m,e)=>{var u=e(58813),g=function(c,s,o){var a=u({x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2},o),l=u({x1:s.x2,y1:s.y2,x2:s.x3,y2:s.y3},o),p=u({x1:s.x3,y1:s.y3,x2:s.x1,y2:s.y1},o);a.pop(),l.pop(),p.pop(),a=a.concat(l,p);for(var h=a.length/c.length,f=0,v=0;v<c.length;v++){var y=c[v],x=a[Math.floor(f)];y.x=x.x,y.y=x.y,f+=h}return c};r.exports=g},1045:r=>{var m=function(e,u,g){for(var c=0;c<e.length;c++){var s=e[c];s.anims&&s.anims.play(u,g)}return e};r.exports=m},6124:r=>{var m=function(e,u,g,c,s,o){c===void 0&&(c=0),s===void 0&&(s=0),o===void 0&&(o=1);var a,l=0,p=e.length;if(o===1)for(a=s;a<p;a++)e[a][u]+=g+l*c,l++;else for(a=s;a>=0;a--)e[a][u]+=g+l*c,l++;return e};r.exports=m},23646:r=>{var m=function(e,u,g,c,s,o){c===void 0&&(c=0),s===void 0&&(s=0),o===void 0&&(o=1);var a,l=0,p=e.length;if(o===1)for(a=s;a<p;a++)e[a][u]=g+l*c,l++;else for(a=s;a>=0;a--)e[a][u]=g+l*c,l++;return e};r.exports=m},4392:(r,m,e)=>{var u=e(30977),g=function(c,s){for(var o=0;o<c.length;o++)u(s,c[o]);return c};r.exports=g},94985:(r,m,e)=>{var u=e(72006),g=function(c,s){for(var o=0;o<c.length;o++)u(s,c[o]);return c};r.exports=g},63305:(r,m,e)=>{var u=e(74077),g=function(c,s){for(var o=0;o<c.length;o++)u(s,c[o]);return c};r.exports=g},90739:(r,m,e)=>{var u=e(30001),g=function(c,s){for(var o=0;o<c.length;o++)u(s,c[o]);return c};r.exports=g},91417:(r,m,e)=>{var u=e(99761),g=function(c,s){for(var o=0;o<c.length;o++)u(s,c[o]);return c};r.exports=g},26182:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l){return u(c,"rotation",s,o,a,l)};r.exports=g},87299:(r,m,e)=>{var u=e(72395),g=e(53996),c=function(s,o,a){for(var l=o.x,p=o.y,h=0;h<s.length;h++){var f=s[h];u(f,l,p,a,Math.max(1,g(f.x,f.y,l,p)))}return s};r.exports=c},92194:(r,m,e)=>{var u=e(72395),g=function(c,s,o,a){var l=s.x,p=s.y;if(a===0)return c;for(var h=0;h<c.length;h++)u(c[h],l,p,o,a);return c};r.exports=g},30363:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l){return u(c,"scaleX",s,o,a,l)};r.exports=g},51449:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l,p,h){return o==null&&(o=s),u(c,"scaleX",s,a,p,h),u(c,"scaleY",o,l,p,h)};r.exports=g},64895:(r,m,e)=>{var u=e(6124),g=function(c,s,o,a,l){return u(c,"scaleY",s,o,a,l)};r.exports=g},30329:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"alpha",s,o,a,l)};r.exports=g},43954:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a){return u(c,"blendMode",s,0,o,a)};r.exports=g},70688:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"depth",s,o,a,l)};r.exports=g},8314:r=>{var m=function(e,u,g){for(var c=0;c<e.length;c++)e[c].setInteractive(u,g);return e};r.exports=m},12894:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l,p,h){return o==null&&(o=s),u(c,"originX",s,a,p,h),u(c,"originY",o,l,p,h),c.forEach(function(f){f.updateDisplayOrigin()}),c};r.exports=g},38767:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"rotation",s,o,a,l)};r.exports=g},18584:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l,p,h){return o==null&&(o=s),u(c,"scaleX",s,a,p,h),u(c,"scaleY",o,l,p,h)};r.exports=g},17381:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"scaleX",s,o,a,l)};r.exports=g},74370:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"scaleY",s,o,a,l)};r.exports=g},27773:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l,p,h){return o==null&&(o=s),u(c,"scrollFactorX",s,a,p,h),u(c,"scrollFactorY",o,l,p,h)};r.exports=g},75257:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"scrollFactorX",s,o,a,l)};r.exports=g},54512:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"scrollFactorY",s,o,a,l)};r.exports=g},69423:r=>{var m=function(e,u,g,c,s){for(var o=0;o<e.length;o++)e[o].setTint(u,g,c,s);return e};r.exports=m},58291:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a){return u(c,"visible",s,0,o,a)};r.exports=g},94833:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"x",s,o,a,l)};r.exports=g},14284:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l,p,h){return o==null&&(o=s),u(c,"x",s,a,p,h),u(c,"y",o,l,p,h)};r.exports=g},96574:(r,m,e)=>{var u=e(23646),g=function(c,s,o,a,l){return u(c,"y",s,o,a,l)};r.exports=g},74086:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l){a===void 0&&(a=0),l===void 0&&(l=new u);var p,h,f=c.length;if(f===1)p=c[0].x,h=c[0].y,c[0].x=s,c[0].y=o;else{var v=1,y=0;a===0&&(y=f-1,v=f-2),p=c[y].x,h=c[y].y,c[y].x=s,c[y].y=o;for(var x=0;x<f;x++)if(!(v>=f||v===-1)){var S=c[v],E=S.x,b=S.y;S.x=p,S.y=h,p=E,h=b,a===0?v--:v++}}return l.x=p,l.y=h,l};r.exports=g},86347:(r,m,e)=>{var u=e(18592),g=function(c){return u(c)};r.exports=g},1558:(r,m,e)=>{var u=e(5514),g=function(c,s,o,a,l){l===void 0&&(l=!1);var p=Math.abs(a-o)/c.length,h;if(l)for(h=0;h<c.length;h++)c[h][s]+=u(h*p,o,a);else for(h=0;h<c.length;h++)c[h][s]=u(h*p,o,a);return c};r.exports=g},9938:(r,m,e)=>{var u=e(87736),g=function(c,s,o,a,l){l===void 0&&(l=!1);var p=Math.abs(a-o)/c.length,h;if(l)for(h=0;h<c.length;h++)c[h][s]+=u(h*p,o,a);else for(h=0;h<c.length;h++)c[h][s]=u(h*p,o,a);return c};r.exports=g},71060:r=>{var m=function(e,u,g,c,s){if(s===void 0&&(s=!1),e.length===0)return e;if(e.length===1)return s?e[0][u]+=(c+g)/2:e[0][u]=(c+g)/2,e;var o=Math.abs(c-g)/(e.length-1),a;if(s)for(a=0;a<e.length;a++)e[a][u]+=a*o+g;else for(a=0;a<e.length;a++)e[a][u]=a*o+g;return e};r.exports=m},11207:r=>{var m=function(e){for(var u=0;u<e.length;u++)e[u].visible=!e[u].visible;return e};r.exports=m},24404:(r,m,e)=>{var u=e(1071),g=function(c,s,o){o===void 0&&(o=0);for(var a=0;a<c.length;a++){var l=c[a];l.x=u(l.x,s.left-o,s.right+o),l.y=u(l.y,s.top-o,s.bottom+o)}return c};r.exports=g},83979:(r,m,e)=>{r.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}},85463:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(16938),s=e(2406),o=e(71519),a=e(10850),l=e(28834),p=new g({initialize:function(f,v,y){this.manager=f,this.key=v,this.type="frame",this.frames=this.getFrames(f.textureManager,a(y,"frames",[]),a(y,"defaultTextureKey",null),a(y,"sortFrames",!0)),this.frameRate=a(y,"frameRate",null),this.duration=a(y,"duration",null),this.msPerFrame,this.skipMissedFrames=a(y,"skipMissedFrames",!0),this.delay=a(y,"delay",0),this.repeat=a(y,"repeat",0),this.repeatDelay=a(y,"repeatDelay",0),this.yoyo=a(y,"yoyo",!1),this.showBeforeDelay=a(y,"showBeforeDelay",!1),this.showOnStart=a(y,"showOnStart",!1),this.hideOnComplete=a(y,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(c.PAUSE_ALL,this.pause,this),this.manager.on(c.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(h,f,v,y){v===null&&y===null?(h.frameRate=24,h.duration=24/f*1e3):v&&y===null?(h.duration=v,h.frameRate=f/(v/1e3)):(h.frameRate=y,h.duration=f/y*1e3),h.msPerFrame=1e3/h.frameRate},addFrame:function(h){return this.addFrameAt(this.frames.length,h)},addFrameAt:function(h,f){var v=this.getFrames(this.manager.textureManager,f);if(v.length>0){if(h===0)this.frames=v.concat(this.frames);else if(h===this.frames.length)this.frames=this.frames.concat(v);else{var y=this.frames.slice(0,h),x=this.frames.slice(h);this.frames=y.concat(v,x)}this.updateFrameSequence()}return this},checkFrame:function(h){return h>=0&&h<this.frames.length},getFirstTick:function(h){h.accumulator=0,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameAt:function(h){return this.frames[h]},getFrames:function(h,f,v,y){y===void 0&&(y=!0);var x=[],S,E,b=1,T,P;if(typeof f=="string"){if(P=f,!h.exists(P))return console.warn('Texture "%s" not found',P),x;var C=h.get(P),w=C.getFrameNames();y&&l(w),f=[],w.forEach(function(D){f.push({key:P,frame:D})})}if(!Array.isArray(f)||f.length===0)return x;for(T=0;T<f.length;T++){var A=f[T],R=a(A,"key",v);if(R){var I=a(A,"frame",0),L=h.getFrame(R,I);if(!L){console.warn('Texture "%s" not found',R);continue}E=new o(R,I,b,L),E.duration=a(A,"duration",0),E.isFirst=!S,S&&(S.nextFrame=E,E.prevFrame=S),x.push(E),S=E,b++}}if(x.length>0){E.isLast=!0,E.nextFrame=x[0],x[0].prevFrame=E;var O=1/(x.length-1);for(T=0;T<x.length;T++)x[T].progress=T*O}return x},getNextTick:function(h){h.accumulator-=h.nextTick,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameByProgress:function(h){return h=u(h,0,1),s(h,this.frames,"progress")},nextFrame:function(h){var f=h.currentFrame;f.isLast?h.yoyo?this.handleYoyoFrame(h,!1):h.repeatCounter>0?h.inReverse&&h.forward?h.forward=!1:this.repeatAnimation(h):h.complete():this.updateAndGetNextTick(h,f.nextFrame)},handleYoyoFrame:function(h,f){if(f||(f=!1),h.inReverse===!f&&h.repeatCounter>0){(h.repeatDelay===0||h.pendingRepeat)&&(h.forward=f),this.repeatAnimation(h);return}if(h.inReverse!==f&&h.repeatCounter===0){h.complete();return}h.forward=f;var v=f?h.currentFrame.nextFrame:h.currentFrame.prevFrame;this.updateAndGetNextTick(h,v)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(h){var f=h.currentFrame;f.isFirst?h.yoyo?this.handleYoyoFrame(h,!0):h.repeatCounter>0?h.inReverse&&!h.forward?this.repeatAnimation(h):(h.forward=!0,this.repeatAnimation(h)):h.complete():this.updateAndGetNextTick(h,f.prevFrame)},updateAndGetNextTick:function(h,f){h.setCurrentFrame(f),this.getNextTick(h)},removeFrame:function(h){var f=this.frames.indexOf(h);return f!==-1&&this.removeFrameAt(f),this},removeFrameAt:function(h){return this.frames.splice(h,1),this.updateFrameSequence(),this},repeatAnimation:function(h){if(h._pendingStop===2){if(h._pendingStopValue===0)return h.stop();h._pendingStopValue--}h.repeatDelay>0&&!h.pendingRepeat?(h.pendingRepeat=!0,h.accumulator-=h.nextTick,h.nextTick+=h.repeatDelay):(h.repeatCounter--,h.forward?h.setCurrentFrame(h.currentFrame.nextFrame):h.setCurrentFrame(h.currentFrame.prevFrame),h.isPlaying&&(this.getNextTick(h),h.handleRepeat()))},toJSON:function(){var h={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(f){h.frames.push(f.toJSON())}),h},updateFrameSequence:function(){for(var h=this.frames.length,f=1/(h-1),v,y=0;y<h;y++)v=this.frames[y],v.index=y+1,v.isFirst=!1,v.isLast=!1,v.progress=y*f,y===0?(v.isFirst=!0,h===1?(v.isLast=!0,v.nextFrame=v,v.prevFrame=v):(v.isLast=!1,v.prevFrame=this.frames[h-1],v.nextFrame=this.frames[y+1])):y===h-1&&h>1?(v.isLast=!0,v.prevFrame=this.frames[h-2],v.nextFrame=this.frames[0]):h>1&&(v.prevFrame=this.frames[y-1],v.nextFrame=this.frames[y+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(c.PAUSE_ALL,this.pause,this),this.manager.off(c.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var h=0;h<this.frames.length;h++)this.frames[h].destroy();this.frames=[],this.manager=null}});r.exports=p},71519:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a,l,p){p===void 0&&(p=!1),this.textureKey=s,this.textureFrame=o,this.index=a,this.frame=l,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=p},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});r.exports=g},90249:(r,m,e)=>{var u=e(85463),g=e(56694),c=e(33885),s=e(6659),o=e(16938),a=e(97081),l=e(72632),p=e(10850),h=e(83392),f=e(13401),v=e(76400),y=new g({Extends:s,initialize:function(S){s.call(this),this.game=S,this.textureManager=null,this.globalTimeScale=1,this.anims=new c,this.mixes=new c,this.paused=!1,this.name="AnimationManager",S.events.once(a.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(a.DESTROY,this.destroy,this)},addMix:function(x,S,E){var b=this.anims,T=this.mixes,P=typeof x=="string"?x:x.key,C=typeof S=="string"?S:S.key;if(b.has(P)&&b.has(C)){var w=T.get(P);w||(w={}),w[C]=E,T.set(P,w)}return this},removeMix:function(x,S){var E=this.mixes,b=typeof x=="string"?x:x.key,T=E.get(b);if(T)if(S){var P=typeof S=="string"?S:S.key;T.hasOwnProperty(P)&&delete T[P]}else S||E.delete(b);return this},getMix:function(x,S){var E=this.mixes,b=typeof x=="string"?x:x.key,T=typeof S=="string"?S:S.key,P=E.get(b);return P&&P.hasOwnProperty(T)?P[T]:0},add:function(x,S){return this.anims.has(x)?(console.warn("Animation key exists: "+x),this):(S.key=x,this.anims.set(x,S),this.emit(o.ADD_ANIMATION,x,S),this)},exists:function(x){return this.anims.has(x)},createFromAseprite:function(x,S,E){var b=[],T=this.game.cache.json.get(x);if(!T)return console.warn("No Aseprite data found for: "+x),b;var P=this,C=p(T,"meta",null),w=p(T,"frames",null);if(C&&w){var A=p(C,"frameTags",[]);A.forEach(function(R){var I=[],L=l(R,"name",null),O=l(R,"from",0),D=l(R,"to",0),V=l(R,"direction","forward");if(L&&(!S||S&&S.indexOf(L)>-1)){for(var B=0,U=O;U<=D;U++){var W=U.toString(),F=w[W];if(F){var G=l(F,"duration",h.MAX_SAFE_INTEGER);I.push({key:x,frame:W,duration:G}),B+=G}}var M=B/I.length;I.forEach(function(z){z.duration-=M}),V==="reverse"&&(I=I.reverse());var N={key:L,frames:I,duration:B,yoyo:V==="pingpong"},k;E?E.anims&&(k=E.anims.create(N)):k=P.create(N),k&&b.push(k)}})}return b},create:function(x){var S=x.key,E=!1;return S&&(E=this.get(S),E?console.warn("AnimationManager key already exists: "+S):(E=new u(this,S,x),this.anims.set(S,E),this.emit(o.ADD_ANIMATION,S,E))),E},fromJSON:function(x,S){S===void 0&&(S=!1),S&&this.anims.clear(),typeof x=="string"&&(x=JSON.parse(x));var E=[];if(x.hasOwnProperty("anims")&&Array.isArray(x.anims)){for(var b=0;b<x.anims.length;b++)E.push(this.create(x.anims[b]));x.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=x.globalTimeScale)}else x.hasOwnProperty("key")&&x.type==="frame"&&E.push(this.create(x));return E},generateFrameNames:function(x,S){var E=p(S,"prefix",""),b=p(S,"start",0),T=p(S,"end",0),P=p(S,"suffix",""),C=p(S,"zeroPad",0),w=p(S,"outputArray",[]),A=p(S,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),w;var R=this.textureManager.get(x);if(!R)return w;var I;if(S)for(A||(A=f(b,T)),I=0;I<A.length;I++){var L=E+v(A[I],C,"0",1)+P;R.has(L)?w.push({key:x,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,x)}else for(A=R.getFrameNames(),I=0;I<A.length;I++)w.push({key:x,frame:A[I]});return w},generateFrameNumbers:function(x,S){var E=p(S,"start",0),b=p(S,"end",-1),T=p(S,"first",!1),P=p(S,"outputArray",[]),C=p(S,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),P;var w=this.textureManager.get(x);if(!w)return P;T&&w.has(T)&&P.push({key:x,frame:T}),C||(b===-1&&(b=w.frameTotal-2),C=f(E,b));for(var A=0;A<C.length;A++){var R=C[A];w.has(R)?P.push({key:x,frame:R}):console.warn('Frame "%s" not found in texture "%s"',R,x)}return P},get:function(x){return this.anims.get(x)},getAnimsFromTexture:function(x){for(var S=this.textureManager.get(x),E=S.key,b=this.anims.getArray(),T=[],P=0;P<b.length;P++)for(var C=b[P],w=C.frames,A=0;A<w.length;A++)if(w[A].textureKey===E){T.push(C.key);break}return T},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(o.PAUSE_ALL)),this},play:function(x,S){Array.isArray(S)||(S=[S]);for(var E=0;E<S.length;E++)S[E].anims.play(x);return this},staggerPlay:function(x,S,E,b){E===void 0&&(E=0),b===void 0&&(b=!0),Array.isArray(S)||(S=[S]);var T=S.length;b||T--;for(var P=0;P<S.length;P++){var C=E<0?Math.abs(E)*(T-P):E*P;S[P].anims.playAfterDelay(x,C)}return this},remove:function(x){var S=this.get(x);return S&&(this.emit(o.REMOVE_ANIMATION,x,S),this.anims.delete(x),this.removeMix(x)),S},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(o.RESUME_ALL)),this},toJSON:function(x){var S={anims:[],globalTimeScale:this.globalTimeScale};return x!==void 0&&x!==""?S.anims.push(this.anims.get(x).toJSON()):this.anims.each(function(E,b){S.anims.push(b.toJSON())}),S},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});r.exports=y},16569:(r,m,e)=>{var u=e(56694),g=e(33885),c=e(72632),s=e(16938),o=e(85463),a=new u({initialize:function(p){this.parent=p,this.animationManager=p.scene.sys.anims,this.animationManager.on(s.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(l){var p=this.parent;if(l===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,p;Array.isArray(l)||(l=[l]);for(var h=0;h<l.length;h++){var f=l[h];this.nextAnim?this.nextAnimsQueue.push(f):this.nextAnim=f}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(l){this.isPlaying&&this.stop();var p=this.animationManager,h=typeof l=="string"?l:c(l,"key",null),f=this.exists(h)?this.get(h):p.get(h);if(!f)console.warn("Missing animation: "+h);else{this.currentAnim=f;var v=f.getTotalFrames(),y=c(l,"frameRate",f.frameRate),x=c(l,"duration",f.duration);f.calculateDuration(this,v,x,y),this.delay=c(l,"delay",f.delay),this.repeat=c(l,"repeat",f.repeat),this.repeatDelay=c(l,"repeatDelay",f.repeatDelay),this.yoyo=c(l,"yoyo",f.yoyo),this.showBeforeDelay=c(l,"showBeforeDelay",f.showBeforeDelay),this.showOnStart=c(l,"showOnStart",f.showOnStart),this.hideOnComplete=c(l,"hideOnComplete",f.hideOnComplete),this.skipMissedFrames=c(l,"skipMissedFrames",f.skipMissedFrames),this.timeScale=c(l,"timeScale",this.timeScale);var S=c(l,"startFrame",0);S>f.getTotalFrames()&&(S=0);var E=f.frames[S];S===0&&!this.forward&&(E=f.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(l){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),l!==void 0&&this.setCurrentFrame(l),this.parent},resume:function(l){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),l!==void 0&&this.setCurrentFrame(l),this.parent},playAfterDelay:function(l,p){if(!this.isPlaying)this.delayCounter=p,this.play(l,!0);else{var h=this.nextAnim,f=this.nextAnimsQueue;h&&f.unshift(h),this.nextAnim=l,this._pendingStop=1,this._pendingStopValue=p}return this.parent},playAfterRepeat:function(l,p){if(p===void 0&&(p=1),!this.isPlaying)this.play(l);else{var h=this.nextAnim,f=this.nextAnimsQueue;h&&f.unshift(h),this.repeatCounter!==-1&&p>this.repeatCounter&&(p=this.repeatCounter),this.nextAnim=l,this._pendingStop=2,this._pendingStopValue=p}return this.parent},play:function(l,p){p===void 0&&(p=!1);var h=this.currentAnim,f=this.parent,v=typeof l=="string"?l:l.key;if(p&&this.isPlaying&&h.key===v)return f;if(h&&this.isPlaying){var y=this.animationManager.getMix(h.key,l);if(y>0)return this.playAfterDelay(l,y)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(l)},playReverse:function(l,p){p===void 0&&(p=!1);var h=typeof l=="string"?l:l.key;return p&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(l))},startAnimation:function(l){this.load(l);var p=this.currentAnim,h=this.parent;return p&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,p.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),h},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(s.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(s.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(s.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(s.ANIMATION_COMPLETE,s.ANIMATION_COMPLETE_KEY)},emitEvents:function(l,p){var h=this.currentAnim;if(h){var f=this.currentFrame,v=this.parent,y=f.textureFrame;v.emit(l,h,f,v,y),p&&v.emit(p+h.key,h,f,v,y)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var l=this.currentFrame;if(!l)return 0;var p=l.progress;return this.inReverse&&(p*=-1),p},setProgress:function(l){return this.forward||(l=1-l),this.setCurrentFrame(this.currentAnim.getFrameByProgress(l)),this.parent},setRepeat:function(l){return this.repeatCounter=l===-1?Number.MAX_VALUE:l,this.parent},globalRemove:function(l,p){p===void 0&&(p=this.currentAnim),this.isPlaying&&p.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(l,p){l===void 0&&(l=!1),p===void 0&&(p=!1);var h=this.currentAnim,f=this.parent;return h?(p&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),h.getFirstTick(this),this.emitEvents(s.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!l,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(h.frames[0]),this.parent):f},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var l=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(l)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var l=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(l)}return this.parent},stopAfterDelay:function(l){return this._pendingStop=1,this._pendingStopValue=l,this.parent},stopAfterRepeat:function(l){return l===void 0&&(l=1),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=l,this.parent},stopOnFrame:function(l){return this._pendingStop=3,this._pendingStopValue=l,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(l,p){var h=this.currentAnim;if(!(!this.isPlaying||!h||h.paused)){if(this.accumulator+=p*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=p,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?h.nextFrame(this):h.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var f=0;do this.forward?h.nextFrame(this):h.previousFrame(this),f++;while(this.isPlaying&&this.accumulator>this.nextTick&&f<60)}}},setCurrentFrame:function(l){var p=this.parent;return this.currentFrame=l,p.texture=l.frame.texture,p.frame=l.frame,p.isCropped&&p.frame.updateCropUVs(p._crop,p.flipX,p.flipY),l.setAlpha&&(p.alpha=l.alpha),p.setSizeToFrame(),p._originComponent&&(l.frame.customPivot?p.setOrigin(l.frame.pivotX,l.frame.pivotY):p.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(s.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===l&&this.stop()),p},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(l){return this.anims?this.anims.get(l):null},exists:function(l){return this.anims?this.anims.has(l):!1},create:function(l){var p=l.key,h=!1;return p&&(h=this.get(p),h?console.warn("Animation key already exists: "+p):(h=new o(this,p,l),this.anims||(this.anims=new g),this.anims.set(p,h))),h},createFromAseprite:function(l,p){return this.animationManager.createFromAseprite(l,p,this.parent)},generateFrameNames:function(l,p){return this.animationManager.generateFrameNames(l,p)},generateFrameNumbers:function(l,p){return this.animationManager.generateFrameNumbers(l,p)},remove:function(l){var p=this.get(l);return p&&(this.currentAnim===p&&this.stop(),this.anims.delete(l)),p},destroy:function(){this.animationManager.off(s.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});r.exports=a},44509:r=>{r.exports="add"},84563:r=>{r.exports="animationcomplete"},61586:r=>{r.exports="animationcomplete-"},72175:r=>{r.exports="animationrepeat"},568:r=>{r.exports="animationrestart"},37690:r=>{r.exports="animationstart"},58525:r=>{r.exports="animationstop"},5243:r=>{r.exports="animationupdate"},10598:r=>{r.exports="pauseall"},4860:r=>{r.exports="remove"},31865:r=>{r.exports="resumeall"},16938:(r,m,e)=>{r.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}},13517:(r,m,e)=>{r.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}},23740:(r,m,e)=>{var u=e(56694),g=e(33885),c=e(6659),s=e(69773),o=new u({initialize:function(){this.entries=new g,this.events=new c},add:function(a,l){return this.entries.set(a,l),this.events.emit(s.ADD,this,a,l),this},has:function(a){return this.entries.has(a)},exists:function(a){return this.entries.has(a)},get:function(a){return this.entries.get(a)},remove:function(a){var l=this.get(a);return l&&(this.entries.delete(a),this.events.emit(s.REMOVE,this,a,l.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});r.exports=o},43474:(r,m,e)=>{var u=e(23740),g=e(56694),c=e(97081),s=new g({initialize:function(a){this.game=a,this.binary=new u,this.bitmapFont=new u,this.json=new u,this.physics=new u,this.shader=new u,this.audio=new u,this.video=new u,this.text=new u,this.html=new u,this.obj=new u,this.tilemap=new u,this.xml=new u,this.custom={},this.game.events.once(c.DESTROY,this.destroy,this)},addCustom:function(o){return this.custom.hasOwnProperty(o)||(this.custom[o]=new u),this.custom[o]},destroy:function(){for(var o=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],a=0;a<o.length;a++)this[o[a]].destroy(),this[o[a]]=null;for(var l in this.custom)this.custom[l].destroy();this.custom=null,this.game=null}});r.exports=s},94762:r=>{r.exports="add"},75968:r=>{r.exports="remove"},69773:(r,m,e)=>{r.exports={ADD:e(94762),REMOVE:e(75968)}},45820:(r,m,e)=>{r.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}},51052:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(75606),s=e(6659),o=e(89787),a=e(74118),l=e(69360),p=e(93222),h=e(93736),f=new u({Extends:s,Mixins:[g.AlphaSingle,g.Visible],initialize:function(y,x,S,E){y===void 0&&(y=0),x===void 0&&(x=0),S===void 0&&(S=0),E===void 0&&(E=0),s.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new a,this.dirty=!0,this._x=y,this._y=x,this._width=S,this._height=E,this._bounds=new a,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=p("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new h(S/2,E/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(v){this.renderList.push(v)},setOrigin:function(v,y){return v===void 0&&(v=.5),y===void 0&&(y=v),this.originX=v,this.originY=y,this},getScroll:function(v,y,x){x===void 0&&(x=new h);var S=this.width*.5,E=this.height*.5;return x.x=v-S,x.y=y-E,this.useBounds&&(x.x=this.clampX(x.x),x.y=this.clampY(x.y)),x},centerOnX:function(v){var y=this.width*.5;return this.midPoint.x=v,this.scrollX=v-y,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(v){var y=this.height*.5;return this.midPoint.y=v,this.scrollY=v-y,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(v,y){return this.centerOnX(v),this.centerOnY(y),this},centerToBounds:function(){if(this.useBounds){var v=this._bounds,y=this.width*.5,x=this.height*.5;this.midPoint.set(v.centerX,v.centerY),this.scrollX=v.centerX-y,this.scrollY=v.centerY-x}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(v){if(this.disableCull)return v;var y=this.matrix.matrix,x=y[0],S=y[1],E=y[2],b=y[3],T=x*b-S*E;if(!T)return v;var P=y[4],C=y[5],w=this.scrollX,A=this.scrollY,R=this.width,I=this.height,L=this.y,O=L+I,D=this.x,V=D+R,B=this.culledObjects,U=v.length;T=1/T,B.length=0;for(var W=0;W<U;++W){var F=v[W];if(!F.hasOwnProperty("width")||F.parentContainer){B.push(F);continue}var G=F.width,M=F.height,N=F.x-w*F.scrollFactorX-G*F.originX,k=F.y-A*F.scrollFactorY-M*F.originY,z=N*x+k*E+P,H=N*S+k*b+C,$=(N+G)*x+(k+M)*E+P,X=(N+G)*S+(k+M)*b+C;$>D&&z<V&&X>L&&H<O&&B.push(F)}return B},getWorldPoint:function(v,y,x){x===void 0&&(x=new h);var S=this.matrix.matrix,E=S[0],b=S[1],T=S[2],P=S[3],C=S[4],w=S[5],A=E*P-b*T;if(!A)return x.x=v,x.y=y,x;A=1/A;var R=P*A,I=-b*A,L=-T*A,O=E*A,D=(T*w-P*C)*A,V=(b*C-E*w)*A,B=Math.cos(this.rotation),U=Math.sin(this.rotation),W=this.zoomX,F=this.zoomY,G=this.scrollX,M=this.scrollY,N=v+(G*B-M*U)*W,k=y+(G*U+M*B)*F;return x.x=N*R+k*L+D,x.y=N*I+k*O+V,x},ignore:function(v){var y=this.id;Array.isArray(v)||(v=[v]);for(var x=0;x<v.length;x++){var S=v[x];Array.isArray(S)?this.ignore(S):S.isParent?this.ignore(S.getChildren()):S.cameraFilter|=y}return this},preRender:function(){this.renderList.length=0;var v=this.width,y=this.height,x=v*.5,S=y*.5,E=this.zoomX,b=this.zoomY,T=this.matrix,P=v*this.originX,C=y*this.originY,w=this.scrollX,A=this.scrollY;this.useBounds&&(w=this.clampX(w),A=this.clampY(A)),this.roundPixels&&(P=Math.round(P),C=Math.round(C)),this.scrollX=w,this.scrollY=A;var R=w+x,I=A+S;this.midPoint.set(R,I);var L=v/E,O=y/b;this.worldView.setTo(R-L/2,I-O/2,L,O),T.applyITRS(this.x+P,this.y+C,this.rotation,E,b),T.translate(-P,-C)},clampX:function(v){var y=this._bounds,x=this.displayWidth,S=y.x+(x-this.width)/2,E=Math.max(S,S+y.width-x);return v<S?v=S:v>E&&(v=E),v},clampY:function(v){var y=this._bounds,x=this.displayHeight,S=y.y+(x-this.height)/2,E=Math.max(S,S+y.height-x);return v<S?v=S:v>E&&(v=E),v},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(v){return v===void 0&&(v=0),this.rotation=c(v),this},setBackgroundColor:function(v){return v===void 0&&(v="rgba(0,0,0,0)"),this.backgroundColor=p(v),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(v,y,x,S,E){return E===void 0&&(E=!1),this._bounds.setTo(v,y,x,S),this.dirty=!0,this.useBounds=!0,E?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(v){v===void 0&&(v=new a);var y=this._bounds;return v.setTo(y.x,y.y,y.width,y.height),v},setName:function(v){return v===void 0&&(v=""),this.name=v,this},setPosition:function(v,y){return y===void 0&&(y=v),this.x=v,this.y=y,this},setRotation:function(v){return v===void 0&&(v=0),this.rotation=v,this},setRoundPixels:function(v){return this.roundPixels=v,this},setScene:function(v,y){y===void 0&&(y=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=v,this.isSceneCamera=y;var x=v.sys;return this.sceneManager=x.game.scene,this.scaleManager=x.scale,this.cameraManager=x.cameras,this.updateSystem(),this},setScroll:function(v,y){return y===void 0&&(y=v),this.scrollX=v,this.scrollY=y,this},setSize:function(v,y){return y===void 0&&(y=v),this.width=v,this.height=y,this},setViewport:function(v,y,x,S){return this.x=v,this.y=y,this.width=x,this.height=S,this},setZoom:function(v,y){return v===void 0&&(v=1),y===void 0&&(y=v),v===0&&(v=.001),y===0&&(y=.001),this.zoomX=v,this.zoomY=y,this},setMask:function(v,y){return y===void 0&&(y=!0),this.mask=v,this._maskCamera=y?this.cameraManager.default:this,this},clearMask:function(v){return v===void 0&&(v=!1),v&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var v={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(v.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),v},update:function(){},setIsSceneCamera:function(v){return this.isSceneCamera=v,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var v=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,y=this.sceneManager;v&&!this._customViewport?y.customViewports++:!v&&this._customViewport&&y.customViewports--,this.dirty=!0,this._customViewport=v}},destroy:function(){this.emit(o.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(v){this._x=v,this.updateSystem()}},y:{get:function(){return this._y},set:function(v){this._y=v,this.updateSystem()}},width:{get:function(){return this._width},set:function(v){this._width=v,this.updateSystem()}},height:{get:function(){return this._height},set:function(v){this._height=v,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(v){v!==this._scrollX&&(this._scrollX=v,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(v){v!==this._scrollY&&(this._scrollY=v,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(v){this._zoomX=v,this._zoomY=v,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(v){this._zoomX=v,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(v){this._zoomY=v,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});r.exports=f},47751:(r,m,e)=>{var u=e(51052),g=e(79993),c=e(82897),s=e(56694),o=e(64937),a=e(53030),l=e(89787),p=e(42798),h=e(74118),f=e(93736),v=new s({Extends:u,Mixins:[o.PostPipeline],initialize:function(x,S,E,b){u.call(this,x,S,E,b),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new a.Fade(this),this.flashEffect=new a.Flash(this),this.shakeEffect=new a.Shake(this),this.panEffect=new a.Pan(this),this.rotateToEffect=new a.RotateTo(this),this.zoomEffect=new a.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(y,x){if(y===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=y,this.deadzone.height=x):this.deadzone=new h(0,0,y,x),this._follow){var S=this.width/2,E=this.height/2,b=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(b,T),this.scrollX=b-S,this.scrollY=T-E}g(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(y,x,S,E,b,T){return this.fadeEffect.start(!1,y,x,S,E,!0,b,T)},fadeOut:function(y,x,S,E,b,T){return this.fadeEffect.start(!0,y,x,S,E,!0,b,T)},fadeFrom:function(y,x,S,E,b,T,P){return this.fadeEffect.start(!1,y,x,S,E,b,T,P)},fade:function(y,x,S,E,b,T,P){return this.fadeEffect.start(!0,y,x,S,E,b,T,P)},flash:function(y,x,S,E,b,T,P){return this.flashEffect.start(y,x,S,E,b,T,P)},shake:function(y,x,S,E,b){return this.shakeEffect.start(y,x,S,E,b)},pan:function(y,x,S,E,b,T,P){return this.panEffect.start(y,x,S,E,b,T,P)},rotateTo:function(y,x,S,E,b,T,P){return this.rotateToEffect.start(y,x,S,E,b,T,P)},zoomTo:function(y,x,S,E,b,T){return this.zoomEffect.start(y,x,S,E,b,T)},preRender:function(){this.renderList.length=0;var y=this.width,x=this.height,S=y*.5,E=x*.5,b=this.zoom,T=this.matrix,P=y*this.originX,C=x*this.originY,w=this._follow,A=this.deadzone,R=this.scrollX,I=this.scrollY;A&&g(A,this.midPoint.x,this.midPoint.y);var L=!1;if(this.roundPixels&&(P=Math.floor(P),C=Math.floor(C)),w&&!this.panEffect.isRunning){var O=this.lerp,D=w.x-this.followOffset.x,V=w.y-this.followOffset.y;this.roundPixels&&(D=Math.floor(D),V=Math.floor(V)),A?(D<A.x?R=p(R,R-(A.x-D),O.x):D>A.right&&(R=p(R,R+(D-A.right),O.x)),V<A.y?I=p(I,I-(A.y-V),O.y):V>A.bottom&&(I=p(I,I+(V-A.bottom),O.y))):(R=p(R,D-P,O.x),I=p(I,V-C,O.y)),L=!0}this.useBounds&&(R=this.clampX(R),I=this.clampY(I)),this.roundPixels&&(R=Math.floor(R),I=Math.floor(I)),this.scrollX=R,this.scrollY=I;var B=R+S,U=I+E;this.midPoint.set(B,U);var W=y/b,F=x/b,G=B-W/2,M=U-F/2;this.roundPixels&&(G=Math.floor(G),M=Math.floor(M)),this.worldView.setTo(G,M,W,F),T.applyITRS(Math.floor(this.x+P),Math.floor(this.y+C),this.rotation,b,b),T.translate(-P,-C),this.shakeEffect.preRender(),L&&this.emit(l.FOLLOW_UPDATE,this,w)},setLerp:function(y,x){return y===void 0&&(y=1),x===void 0&&(x=y),this.lerp.set(y,x),this},setFollowOffset:function(y,x){return y===void 0&&(y=0),x===void 0&&(x=0),this.followOffset.set(y,x),this},startFollow:function(y,x,S,E,b,T){x===void 0&&(x=!1),S===void 0&&(S=1),E===void 0&&(E=S),b===void 0&&(b=0),T===void 0&&(T=b),this._follow=y,this.roundPixels=x,S=c(S,0,1),E=c(E,0,1),this.lerp.set(S,E),this.followOffset.set(b,T);var P=this.width/2,C=this.height/2,w=y.x-b,A=y.y-T;return this.midPoint.set(w,A),this.scrollX=w-P,this.scrollY=A-C,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(y,x){this.visible&&(this.rotateToEffect.update(y,x),this.panEffect.update(y,x),this.zoomEffect.update(y,x),this.shakeEffect.update(y,x),this.flashEffect.update(y,x),this.fadeEffect.update(y,x))},destroy:function(){this.resetFX(),u.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});r.exports=v},62382:(r,m,e)=>{var u=e(47751),g=e(56694),c=e(72632),s=e(91963),o=e(94287),a=e(40444),l=e(7599),p=new g({initialize:function(f){this.scene=f,this.systems=f.sys,this.roundPixels=f.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,f.sys.events.once(l.BOOT,this.boot,this),f.sys.events.on(l.START,this.start,this)},boot:function(){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new u(0,0,h.scale.width,h.scale.height).setScene(this.scene),h.game.scale.on(a.RESIZE,this.onResize,this),this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){if(!this.main){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0]}var f=this.systems.events;f.on(l.UPDATE,this.update,this),f.once(l.SHUTDOWN,this.shutdown,this)},add:function(h,f,v,y,x,S){h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=this.scene.sys.scale.width),y===void 0&&(y=this.scene.sys.scale.height),x===void 0&&(x=!1),S===void 0&&(S="");var E=new u(h,f,v,y);return E.setName(S),E.setScene(this.scene),E.setRoundPixels(this.roundPixels),E.id=this.getNextID(),this.cameras.push(E),x&&(this.main=E),E},addExisting:function(h,f){f===void 0&&(f=!1);var v=this.cameras.indexOf(h);return v===-1?(h.id=this.getNextID(),h.setRoundPixels(this.roundPixels),this.cameras.push(h),f&&(this.main=h),h):null},getNextID:function(){for(var h=this.cameras,f=1,v=0;v<32;v++){for(var y=!1,x=0;x<h.length;x++){var S=h[x];if(S&&S.id===f){y=!0;continue}}if(y)f=f<<1;else return f}return 0},getTotal:function(h){h===void 0&&(h=!1);for(var f=0,v=this.cameras,y=0;y<v.length;y++){var x=v[y];(!h||h&&x.visible)&&f++}return f},fromJSON:function(h){Array.isArray(h)||(h=[h]);for(var f=this.scene.sys.scale.width,v=this.scene.sys.scale.height,y=0;y<h.length;y++){var x=h[y],S=c(x,"x",0),E=c(x,"y",0),b=c(x,"width",f),T=c(x,"height",v),P=this.add(S,E,b,T);P.name=c(x,"name",""),P.zoom=c(x,"zoom",1),P.rotation=c(x,"rotation",0),P.scrollX=c(x,"scrollX",0),P.scrollY=c(x,"scrollY",0),P.roundPixels=c(x,"roundPixels",!1),P.visible=c(x,"visible",!0);var C=c(x,"backgroundColor",!1);C&&P.setBackgroundColor(C);var w=c(x,"bounds",null);if(w){var A=c(w,"x",0),R=c(w,"y",0),I=c(w,"width",f),L=c(w,"height",v);P.setBounds(A,R,I,L)}}return this},getCamera:function(h){for(var f=this.cameras,v=0;v<f.length;v++)if(f[v].name===h)return f[v];return null},getCamerasBelowPointer:function(h){for(var f=this.cameras,v=h.x,y=h.y,x=[],S=0;S<f.length;S++){var E=f[S];E.visible&&E.inputEnabled&&o(E,v,y)&&x.unshift(E)}return x},remove:function(h,f){f===void 0&&(f=!0),Array.isArray(h)||(h=[h]);for(var v=0,y=this.cameras,x=0;x<h.length;x++){var S=y.indexOf(h[x]);S!==-1&&(f?y[S].destroy():y[S].renderList=[],y.splice(S,1),v++)}return!this.main&&y[0]&&(this.main=y[0]),v},render:function(h,f){for(var v=this.scene,y=this.cameras,x=0;x<y.length;x++){var S=y[x];if(S.visible&&S.alpha>0){S.preRender();var E=this.getVisibleChildren(f.getChildren(),S);h.render(v,E,S)}}},getVisibleChildren:function(h,f){return h.filter(function(v){return v.willRender(f)})},resetAll:function(){for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(h,f){for(var v=0;v<this.cameras.length;v++)this.cameras[v].update(h,f)},onResize:function(h,f,v,y,x){for(var S=0;S<this.cameras.length;S++){var E=this.cameras[S];E._x===0&&E._y===0&&E._width===y&&E._height===x&&E.setSize(f.width,f.height)}},resize:function(h,f){for(var v=0;v<this.cameras.length;v++)this.cameras[v].setSize(h,f)},shutdown:function(){this.main=void 0;for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();this.cameras=[];var f=this.systems.events;f.off(l.UPDATE,this.update,this),f.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(l.START,this.start,this),this.systems.events.off(l.DESTROY,this.destroy,this),this.systems.game.scale.off(a.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});s.register("CameraManager",p,"cameras"),r.exports=p},92522:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(89787),s=new g({initialize:function(a){this.camera=a,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,a,l,p,h,f,v,y){if(o===void 0&&(o=!0),a===void 0&&(a=1e3),l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=!1),v===void 0&&(v=null),y===void 0&&(y=this.camera.scene),!f&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=a,this.direction=o,this.progress=0,this.red=l,this.green=p,this.blue=h,this.alpha=o?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=y;var x=o?c.FADE_OUT_START:c.FADE_IN_START;return this.camera.emit(x,this.camera,this,a,l,p,h),this.camera},update:function(o,a){this.isRunning&&(this._elapsed+=a,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(o){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(o,a){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera,p=this.red/255,h=this.green/255,f=this.blue/255;return o.drawFillRect(l.x,l.y,l.width,l.height,a(f,h,p,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var o=this.direction?c.FADE_OUT_COMPLETE:c.FADE_IN_COMPLETE;this.camera.emit(o,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=s},22151:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(89787),s=new g({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(o,a,l,p,h,f,v){return o===void 0&&(o=250),a===void 0&&(a=255),l===void 0&&(l=255),p===void 0&&(p=255),h===void 0&&(h=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=o,this.progress=0,this.red=a,this.green=l,this.blue=p,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(c.FLASH_START,this.camera,this,o,a,l,p),this.camera)},update:function(o,a){this.isRunning&&(this._elapsed+=a,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(o){if(!this.isRunning)return!1;var a=this.camera;return o.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",o.fillRect(a.x,a.y,a.width,a.height),!0},postRenderWebGL:function(o,a){if(!this.isRunning)return!1;var l=this.camera,p=this.red/255,h=this.green/255,f=this.blue/255;return o.drawFillRect(l.x,l.y,l.width,l.height,a(f,h,p,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=s},37551:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(35060),s=e(89787),o=e(93736),a=new g({initialize:function(p){this.camera=p,this.isRunning=!1,this.duration=0,this.source=new o,this.current=new o,this.destination=new o,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,p,h,f,v,y,x){h===void 0&&(h=1e3),f===void 0&&(f=c.Linear),v===void 0&&(v=!1),y===void 0&&(y=null),x===void 0&&(x=this.camera.scene);var S=this.camera;return!v&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source.set(S.scrollX,S.scrollY),this.destination.set(l,p),S.getScroll(l,p,this.current),typeof f=="string"&&c.hasOwnProperty(f)?this.ease=c[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=y,this._onUpdateScope=x,this.camera.emit(s.PAN_START,this.camera,this,h,l,p)),S},update:function(l,p){if(this.isRunning){this._elapsed+=p;var h=u(this._elapsed/this.duration,0,1);this.progress=h;var f=this.camera;if(this._elapsed<this.duration){var v=this.ease(h);f.getScroll(this.destination.x,this.destination.y,this.current);var y=this.source.x+(this.current.x-this.source.x)*v,x=this.source.y+(this.current.y-this.source.y)*v;f.setScroll(y,x),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,h,y,x)}else f.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,h,f.scrollX,f.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=a},1771:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(89787),s=e(35060),o=new g({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(a,l,p,h,f,v,y){p===void 0&&(p=1e3),h===void 0&&(h=s.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),y===void 0&&(y=this.camera.scene),l===void 0&&(l=!1),this.shortestPath=l;var x=a;a<0?(x=-1*a,this.clockwise=!1):this.clockwise=!0;var S=360*Math.PI/180;x=x-Math.floor(x/S)*S;var E=this.camera;if(!f&&this.isRunning)return E;if(this.isRunning=!0,this.duration=p,this.progress=0,this.source=E.rotation,this.destination=x,typeof h=="string"&&s.hasOwnProperty(h)?this.ease=s[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=y,this.shortestPath){var b=0,T=0;this.destination>this.source?b=Math.abs(this.destination-this.source):b=Math.abs(this.destination+S)-this.source,this.source>this.destination?T=Math.abs(this.source-this.destination):T=Math.abs(this.source+S)-this.destination,b<T?this.clockwise=!0:b>T&&(this.clockwise=!1)}return this.camera.emit(c.ROTATE_START,this.camera,this,p,x),E},update:function(a,l){if(this.isRunning){this._elapsed+=l;var p=u(this._elapsed/this.duration,0,1);this.progress=p;var h=this.camera;if(this._elapsed<this.duration){var f=this.ease(p);this.current=h.rotation;var v=0,y=360*Math.PI/180,x=this.destination,S=this.current;this.clockwise===!1&&(x=this.current,S=this.destination),x>=S?v=Math.abs(x-S):v=Math.abs(x+y)-S;var E=0;this.clockwise?E=h.rotation+v*f:E=h.rotation-v*f,h.rotation=E,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,p,E)}else h.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,p,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=o},3241:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(89787),s=e(93736),o=new g({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.intensity=new s,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(a,l,p,h,f){return a===void 0&&(a=100),l===void 0&&(l=.05),p===void 0&&(p=!1),h===void 0&&(h=null),f===void 0&&(f=this.camera.scene),!p&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,typeof l=="number"?this.intensity.set(l):this.intensity.set(l.x,l.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=h,this._onUpdateScope=f,this.camera.emit(c.SHAKE_START,this.camera,this,a,l),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(a,l){if(this.isRunning)if(this._elapsed+=l,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var p=this.intensity,h=this.camera.width,f=this.camera.height,v=this.camera.zoom;this._offsetX=(Math.random()*p.x*h*2-p.x*h)*v,this._offsetY=(Math.random()*p.y*f*2-p.y*f)*v,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});r.exports=o},13383:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(35060),s=e(89787),o=new g({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,l,p,h,f,v){l===void 0&&(l=1e3),p===void 0&&(p=c.Linear),h===void 0&&(h=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene);var y=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.source=y.zoom,this.destination=a,typeof p=="string"&&c.hasOwnProperty(p)?this.ease=c[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(s.ZOOM_START,this.camera,this,l,a)),y},update:function(a,l){this.isRunning&&(this._elapsed+=l,this.progress=u(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=o},53030:(r,m,e)=>{r.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}},39577:r=>{r.exports="cameradestroy"},85373:r=>{r.exports="camerafadeincomplete"},92057:r=>{r.exports="camerafadeinstart"},1903:r=>{r.exports="camerafadeoutcomplete"},96131:r=>{r.exports="camerafadeoutstart"},85409:r=>{r.exports="cameraflashcomplete"},25500:r=>{r.exports="cameraflashstart"},44071:r=>{r.exports="followupdate"},19818:r=>{r.exports="camerapancomplete"},80002:r=>{r.exports="camerapanstart"},87966:r=>{r.exports="postrender"},74217:r=>{r.exports="prerender"},34805:r=>{r.exports="camerarotatecomplete"},30408:r=>{r.exports="camerarotatestart"},49856:r=>{r.exports="camerashakecomplete"},69189:r=>{r.exports="camerashakestart"},67657:r=>{r.exports="camerazoomcomplete"},14229:r=>{r.exports="camerazoomstart"},89787:(r,m,e)=>{r.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}},32356:(r,m,e)=>{r.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}},84219:(r,m,e)=>{var u=e(56694),g=e(10850),c=new u({initialize:function(o){this.camera=g(o,"camera",null),this.left=g(o,"left",null),this.right=g(o,"right",null),this.up=g(o,"up",null),this.down=g(o,"down",null),this.zoomIn=g(o,"zoomIn",null),this.zoomOut=g(o,"zoomOut",null),this.zoomSpeed=g(o,"zoomSpeed",.01),this.minZoom=g(o,"minZoom",.001),this.maxZoom=g(o,"maxZoom",1e3),this.speedX=0,this.speedY=0;var a=g(o,"speed",null);typeof a=="number"?(this.speedX=a,this.speedY=a):(this.speedX=g(o,"speed.x",0),this.speedY=g(o,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(s){return this.camera=s,this},update:function(s){if(this.active){s===void 0&&(s=1);var o=this.camera;this.up&&this.up.isDown?o.scrollY-=this.speedY*s|0:this.down&&this.down.isDown&&(o.scrollY+=this.speedY*s|0),this.left&&this.left.isDown?o.scrollX-=this.speedX*s|0:this.right&&this.right.isDown&&(o.scrollX+=this.speedX*s|0),this.zoomIn&&this.zoomIn.isDown?(o.zoom-=this.zoomSpeed,o.zoom<this.minZoom&&(o.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(o.zoom+=this.zoomSpeed,o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=c},69370:(r,m,e)=>{var u=e(56694),g=e(10850),c=new u({initialize:function(o){this.camera=g(o,"camera",null),this.left=g(o,"left",null),this.right=g(o,"right",null),this.up=g(o,"up",null),this.down=g(o,"down",null),this.zoomIn=g(o,"zoomIn",null),this.zoomOut=g(o,"zoomOut",null),this.zoomSpeed=g(o,"zoomSpeed",.01),this.minZoom=g(o,"minZoom",.001),this.maxZoom=g(o,"maxZoom",1e3),this.accelX=0,this.accelY=0;var a=g(o,"acceleration",null);typeof a=="number"?(this.accelX=a,this.accelY=a):(this.accelX=g(o,"acceleration.x",0),this.accelY=g(o,"acceleration.y",0)),this.dragX=0,this.dragY=0;var l=g(o,"drag",null);typeof l=="number"?(this.dragX=l,this.dragY=l):(this.dragX=g(o,"drag.x",0),this.dragY=g(o,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var p=g(o,"maxSpeed",null);typeof p=="number"?(this.maxSpeedX=p,this.maxSpeedY=p):(this.maxSpeedX=g(o,"maxSpeed.x",0),this.maxSpeedY=g(o,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(s){return this.camera=s,this},update:function(s){if(this.active){s===void 0&&(s=1);var o=this.camera;this._speedX>0?(this._speedX-=this.dragX*s,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*s,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*s,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*s,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(o.scrollX-=this._speedX*s|0),this._speedY!==0&&(o.scrollY-=this._speedY*s|0),this._zoom!==0&&(o.zoom+=this._zoom,o.zoom<this.minZoom?o.zoom=this.minZoom:o.zoom>this.maxZoom&&(o.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=c},6524:(r,m,e)=>{r.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}},44143:(r,m,e)=>{r.exports={Controls:e(6524),Scene2D:e(32356)}},86459:(r,m,e)=>{var u={VERSION:"3.60.0",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};r.exports=u},14033:(r,m,e)=>{var u=e(56694),g=e(86459),c=e(18360),s=e(77290),o=e(72632),a=e(10850),l=e(42911),p=e(72283),h=e(5923),f=e(65641),v=e(93222),y=new u({initialize:function(S){S===void 0&&(S={});var E=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],b="#ffffff",T=a(S,"scale",null);this.width=a(T,"width",1024,S),this.height=a(T,"height",768,S),this.zoom=a(T,"zoom",1,S),this.parent=a(T,"parent",void 0,S),this.scaleMode=a(T,T?"mode":"scaleMode",0,S),this.expandParent=a(T,"expandParent",!0,S),this.autoRound=a(T,"autoRound",!1,S),this.autoCenter=a(T,"autoCenter",0,S),this.resizeInterval=a(T,"resizeInterval",500,S),this.fullscreenTarget=a(T,"fullscreenTarget",null,S),this.minWidth=a(T,"minWidth",0,S),this.maxWidth=a(T,"maxWidth",0,S),this.minHeight=a(T,"minHeight",0,S),this.maxHeight=a(T,"maxHeight",0,S),this.renderType=a(S,"type",g.AUTO),this.canvas=a(S,"canvas",null),this.context=a(S,"context",null),this.canvasStyle=a(S,"canvasStyle",null),this.customEnvironment=a(S,"customEnvironment",!1),this.sceneConfig=a(S,"scene",null),this.seed=a(S,"seed",[(Date.now()*Math.random()).toString()]),h.RND=new h.RandomDataGenerator(this.seed),this.gameTitle=a(S,"title",""),this.gameURL=a(S,"url","https://phaser.io"),this.gameVersion=a(S,"version",""),this.autoFocus=a(S,"autoFocus",!0),this.stableSort=a(S,"stableSort",-1),this.stableSort===-1&&(this.stableSort=s.browser.es2019?1:0),s.features.stableSort=this.stableSort,this.domCreateContainer=a(S,"dom.createContainer",!1),this.domPointerEvents=a(S,"dom.pointerEvents","none"),this.inputKeyboard=a(S,"input.keyboard",!0),this.inputKeyboardEventTarget=a(S,"input.keyboard.target",window),this.inputKeyboardCapture=a(S,"input.keyboard.capture",[]),this.inputMouse=a(S,"input.mouse",!0),this.inputMouseEventTarget=a(S,"input.mouse.target",null),this.inputMousePreventDefaultDown=a(S,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=a(S,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=a(S,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=a(S,"input.mouse.preventDefaultWheel",!0),this.inputTouch=a(S,"input.touch",s.input.touch),this.inputTouchEventTarget=a(S,"input.touch.target",null),this.inputTouchCapture=a(S,"input.touch.capture",!0),this.inputActivePointers=a(S,"input.activePointers",1),this.inputSmoothFactor=a(S,"input.smoothFactor",0),this.inputWindowEvents=a(S,"input.windowEvents",!0),this.inputGamepad=a(S,"input.gamepad",!1),this.inputGamepadEventTarget=a(S,"input.gamepad.target",window),this.disableContextMenu=a(S,"disableContextMenu",!1),this.audio=a(S,"audio",{}),this.hideBanner=a(S,"banner",null)===!1,this.hidePhaser=a(S,"banner.hidePhaser",!1),this.bannerTextColor=a(S,"banner.text",b),this.bannerBackgroundColor=a(S,"banner.background",E),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(S,"fps",null);var P=a(S,"render",null);this.pipeline=a(P,"pipeline",null,S),this.autoMobilePipeline=a(P,"autoMobilePipeline",!0,S),this.defaultPipeline=a(P,"defaultPipeline",f.MULTI_PIPELINE,S),this.antialias=a(P,"antialias",!0,S),this.antialiasGL=a(P,"antialiasGL",!0,S),this.mipmapFilter=a(P,"mipmapFilter","",S),this.desynchronized=a(P,"desynchronized",!1,S),this.roundPixels=a(P,"roundPixels",!1,S),this.pixelArt=a(P,"pixelArt",this.zoom!==1,S),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=a(P,"transparent",!1,S),this.clearBeforeRender=a(P,"clearBeforeRender",!0,S),this.preserveDrawingBuffer=a(P,"preserveDrawingBuffer",!1,S),this.premultipliedAlpha=a(P,"premultipliedAlpha",!0,S),this.failIfMajorPerformanceCaveat=a(P,"failIfMajorPerformanceCaveat",!1,S),this.powerPreference=a(P,"powerPreference","default",S),this.batchSize=a(P,"batchSize",4096,S),this.maxTextures=a(P,"maxTextures",-1,S),this.maxLights=a(P,"maxLights",10,S);var C=a(S,"backgroundColor",0);this.backgroundColor=v(C),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=a(S,"callbacks.preBoot",p),this.postBoot=a(S,"callbacks.postBoot",p),this.physics=a(S,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(S,"loader.baseURL",""),this.loaderPath=a(S,"loader.path",""),this.loaderMaxParallelDownloads=a(S,"loader.maxParallelDownloads",s.os.android?6:32),this.loaderCrossOrigin=a(S,"loader.crossOrigin",void 0),this.loaderResponseType=a(S,"loader.responseType",""),this.loaderAsync=a(S,"loader.async",!0),this.loaderUser=a(S,"loader.user",""),this.loaderPassword=a(S,"loader.password",""),this.loaderTimeout=a(S,"loader.timeout",0),this.loaderWithCredentials=a(S,"loader.withCredentials",!1),this.loaderImageLoadType=a(S,"loader.imageLoadType","XHR"),this.loaderLocalScheme=a(S,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=a(S,"fx.glow.quality",.1),this.glowFXDistance=a(S,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var w=a(S,"plugins",null),A=c.DefaultScene;w&&(Array.isArray(w)?this.defaultPlugins=w:l(w)&&(this.installGlobalPlugins=o(w,"global",[]),this.installScenePlugins=o(w,"scene",[]),Array.isArray(w.default)?A=w.default:Array.isArray(w.defaultMerge)&&(A=A.concat(w.defaultMerge)))),this.defaultPlugins=A;var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(S,"images.default",R+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(S,"images.missing",R+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=a(S,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=g.WEBGL:window.FORCE_CANVAS&&(this.renderType=g.CANVAS))}});r.exports=y},50150:(r,m,e)=>{var u=e(70616),g=e(61068),c=e(86459),s=e(90185),o=function(a){var l=a.config;if((l.customEnvironment||l.canvas)&&l.renderType===c.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!l.customEnvironment&&!l.canvas&&l.renderType!==c.HEADLESS)if(l.renderType===c.AUTO&&(l.renderType=s.webGL?c.WEBGL:c.CANVAS),l.renderType===c.WEBGL){if(!s.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(l.renderType===c.CANVAS){if(!s.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+l.renderType);l.antialias||g.disableSmoothing();var p=a.scale.baseSize,h=p.width,f=p.height;if(l.canvas?(a.canvas=l.canvas,a.canvas.width=h,a.canvas.height=f):a.canvas=g.create(a,h,f,l.renderType),l.canvasStyle&&(a.canvas.style=l.canvasStyle),l.antialias||u.setCrisp(a.canvas),l.renderType!==c.HEADLESS){var v,y;v=e(91135),y=e(11857),l.renderType===c.WEBGL?a.renderer=new y(a):(a.renderer=new v(a),a.context=a.renderer.gameContext)}};r.exports=o},77291:(r,m,e)=>{var u=e(86459),g=function(c){var s=c.config;if(!s.hideBanner){var o="WebGL";s.renderType===u.CANVAS?o="Canvas":s.renderType===u.HEADLESS&&(o="Headless");var a=s.audio,l=c.device.audio,p;if(l.webAudio&&!a.disableWebAudio?p="Web Audio":a.noAudio||!l.webAudio&&!l.audioData?p="No Audio":p="HTML5 Audio",c.device.browser.ie)window.console&&console.log("Phaser v"+u.VERSION+" / https://phaser.io");else{var h="",f=[h];if(Array.isArray(s.bannerBackgroundColor)){var v;s.bannerBackgroundColor.forEach(function(x){h=h.concat("%c "),f.push("background: "+x),v=x}),f[f.length-1]="color: "+s.bannerTextColor+"; background: "+v}else h=h.concat("%c "),f.push("color: "+s.bannerTextColor+"; background: "+s.bannerBackgroundColor);f.push("background: transparent"),s.gameTitle&&(h=h.concat(s.gameTitle),s.gameVersion&&(h=h.concat(" v"+s.gameVersion)),s.hidePhaser||(h=h.concat(" / ")));var y="";s.hidePhaser||(h=h.concat("Phaser v"+u.VERSION+y+" ("+o+" | "+p+")")),h=h.concat(" %c "+s.gameURL),f[0]=h,console.log.apply(console,f)}}};r.exports=g},15213:(r,m,e)=>{var u=e(99584),g=e(90249),c=e(43474),s=e(61068),o=e(56694),a=e(14033),l=e(85178),p=e(50150),h=e(81078),f=e(77291),v=e(77290),y=e(21546),x=e(6659),S=e(97081),E=e(69898),b=e(91963),T=e(49274),P=e(756),C=e(13553),w=e(38203),A=e(6237),R=e(26617),I=e(26493),L=e(84191);if(!1)var O;var D=new o({initialize:function(B){this.config=new a(B),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new x,this.anims=new g(this),this.textures=new A(this),this.cache=new c(this),this.registry=new h(this,new x),this.input=new E(this,this.config),this.scene=new C(this,this.config.sceneConfig),this.device=v,this.scale=new P(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new R(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,y(this.boot.bind(this))},boot:function(){if(!b.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),p(this),l(this),f(this),u(this.canvas,this.config.parent),this.textures.once(w.READY,this.texturesReady,this),this.events.emit(S.BOOT)},texturesReady:function(){this.events.emit(S.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),I(this);var V=this.events;V.on(S.HIDDEN,this.onHidden,this),V.on(S.VISIBLE,this.onVisible,this),V.on(S.BLUR,this.onBlur,this),V.on(S.FOCUS,this.onFocus,this)},step:function(V,B){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(S.PRE_STEP,V,B),U.emit(S.STEP,V,B),this.scene.update(V,B),U.emit(S.POST_STEP,V,B);var W=this.renderer;W.preRender(),U.emit(S.PRE_RENDER,W,V,B),this.scene.render(W),W.postRender(),U.emit(S.POST_RENDER,W,V,B)}},headlessStep:function(V,B){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(S.PRE_STEP,V,B),U.emit(S.STEP,V,B),this.scene.update(V,B),U.emit(S.POST_STEP,V,B),this.scene.isProcessing=!1,U.emit(S.PRE_RENDER,null,V,B),U.emit(S.POST_RENDER,null,V,B)}},onHidden:function(){this.loop.pause(),this.events.emit(S.PAUSE)},pause:function(){var V=this.isPaused;this.isPaused=!0,V||this.events.emit(S.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(S.RESUME)},resume:function(){var V=this.isPaused;this.isPaused=!1,V&&this.events.emit(S.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(V,B){B===void 0&&(B=!1),this.pendingDestroy=!0,this.removeCanvas=V,this.noReturn=B},runDestroy:function(){this.scene.destroy(),this.events.emit(S.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(s.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});r.exports=D},26617:(r,m,e)=>{var u=e(56694),g=e(10850),c=e(72283),s=e(27385),o=new u({initialize:function(l,p){this.game=l,this.raf=new s,this.started=!1,this.running=!1,this.minFps=g(p,"min",5),this.targetFps=g(p,"target",60),this.fpsLimit=g(p,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=c,this.forceSetTimeOut=g(p,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=g(p,"deltaHistory",10),this.panicMax=g(p,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=g(p,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var a=window.performance.now();this.time=a,this.lastTime=a,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=Math.min(this._target,this.deltaHistory[l]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(a){if(this.started)return this;this.started=!0,this.running=!0;for(var l=0;l<this.deltaSmoothingMax;l++)this.deltaHistory[l]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=a;var p=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(p,this.forceSetTimeOut,this._target)},smoothDelta:function(a){var l=this.deltaIndex,p=this.deltaHistory,h=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,a=Math.min(a,this._target)),a>this._min&&(a=p[l],a=Math.min(a,this._min)),p[l]=a,this.deltaIndex++,this.deltaIndex>=h&&(this.deltaIndex=0);for(var f=0,v=0;v<h;v++)f+=p[v];return f/=h,f},updateFPS:function(a){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0},stepLimitFPS:function(a){this.now=a;var l=Math.max(0,a-this.lastTime);this.rawDelta=l,this.time+=this.rawDelta,this.smoothStep&&(l=this.smoothDelta(l)),this.delta+=l,a>=this.nextFpsUpdate&&this.updateFPS(a),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(a,this.delta),this.delta=0),this.lastTime=a,this.frame++},step:function(a){this.now=a;var l=Math.max(0,a-this.lastTime);this.rawDelta=l,this.time+=this.rawDelta,this.smoothStep&&(l=this.smoothDelta(l)),this.delta=l,a>=this.nextFpsUpdate&&this.updateFPS(a),this.framesThisSecond++,this.callback(a,l),this.lastTime=a,this.frame++},tick:function(){var a=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(a):this.step(a)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(a){a===void 0&&(a=!1);var l=window.performance.now();if(!this.running){a&&(this.startTime+=-this.lastTime+(this.lastTime+l));var p=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(p,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});r.exports=o},26493:(r,m,e)=>{var u=e(97081),g=function(c){var s,o=c.events;if(document.hidden!==void 0)s="visibilitychange";else{var a=["webkit","moz","ms"];a.forEach(function(p){document[p+"Hidden"]!==void 0&&(document.hidden=function(){return document[p+"Hidden"]},s=p+"visibilitychange")})}var l=function(p){document.hidden||p.type==="pause"?o.emit(u.HIDDEN):o.emit(u.VISIBLE)};s&&document.addEventListener(s,l,!1),window.onblur=function(){o.emit(u.BLUR)},window.onfocus=function(){o.emit(u.FOCUS)},window.focus&&c.config.autoFocus&&window.focus()};r.exports=g},41651:r=>{r.exports="blur"},5520:r=>{r.exports="boot"},51673:r=>{r.exports="contextlost"},25055:r=>{r.exports="destroy"},23767:r=>{r.exports="focus"},57564:r=>{r.exports="hidden"},38327:r=>{r.exports="pause"},43807:r=>{r.exports="postrender"},73652:r=>{r.exports="poststep"},780:r=>{r.exports="prerender"},13781:r=>{r.exports="prestep"},38247:r=>{r.exports="ready"},29129:r=>{r.exports="resume"},34994:r=>{r.exports="step"},98704:r=>{r.exports="visible"},97081:(r,m,e)=>{r.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}},80293:(r,m,e)=>{r.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}},52780:(r,m,e)=>{var u=e(81543),g=e(61068),c=e(10850),s=function(o){var a=c(o,"data",[]),l=c(o,"canvas",null),p=c(o,"palette",u),h=c(o,"pixelWidth",1),f=c(o,"pixelHeight",h),v=c(o,"resizeCanvas",!0),y=c(o,"clearCanvas",!0),x=c(o,"preRender",null),S=c(o,"postRender",null),E=Math.floor(Math.abs(a[0].length*h)),b=Math.floor(Math.abs(a.length*f));l||(l=g.create2D(this,E,b),v=!1,y=!1),v&&(l.width=E,l.height=b);var T=l.getContext("2d",{willReadFrequently:!0});y&&T.clearRect(0,0,E,b),x&&x(l,T);for(var P=0;P<a.length;P++)for(var C=a[P],w=0;w<C.length;w++){var A=C[w];A!=="."&&A!==" "&&(T.fillStyle=p[A],T.fillRect(w*h,P*f,h,f))}return S&&S(l,T),l};r.exports=s},84106:(r,m,e)=>{r.exports={GenerateTexture:e(52780),Palettes:e(25235)}},81543:r=>{r.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:r=>{r.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:r=>{r.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:r=>{r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:r=>{r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(r,m,e)=>{r.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}},63120:(r,m,e)=>{var u=e(56694),g=e(34631),c=e(38517),s=e(93736),o=new u({Extends:c,initialize:function(l,p,h,f){c.call(this,"CubicBezierCurve"),Array.isArray(l)&&(f=new s(l[6],l[7]),h=new s(l[4],l[5]),p=new s(l[2],l[3]),l=new s(l[0],l[1])),this.p0=l,this.p1=p,this.p2=h,this.p3=f},getStartPoint:function(a){return a===void 0&&(a=new s),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,l){l===void 0&&(l=new s);var p=this.p0,h=this.p1,f=this.p2,v=this.p3;return l.set(g(a,p.x,h.x,f.x,v.x),g(a,p.y,h.y,f.y,v.y))},draw:function(a,l){l===void 0&&(l=32);var p=this.getPoints(l);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var h=1;h<p.length;h++)a.lineTo(p[h].x,p[h].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});o.fromJSON=function(a){var l=a.points,p=new s(l[0],l[1]),h=new s(l[2],l[3]),f=new s(l[4],l[5]),v=new s(l[6],l[7]);return new o(p,h,f,v)},r.exports=o},38517:(r,m,e)=>{var u=e(56694),g=e(80222),c=e(74118),s=e(93736),o=new u({initialize:function(l){this.type=l,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new s,this._tmpVec2B=new s},draw:function(a,l){return l===void 0&&(l=32),a.strokePoints(this.getPoints(l))},getBounds:function(a,l){a||(a=new c),l===void 0&&(l=16);var p=this.getLength();l>p&&(l=p/2);var h=Math.max(1,Math.round(p/l));return g(this.getSpacedPoints(h),a)},getDistancePoints:function(a){var l=this.getLength(),p=Math.max(1,l/a);return this.getSpacedPoints(p)},getEndPoint:function(a){return a===void 0&&(a=new s),this.getPointAt(1,a)},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a===void 0&&(a=this.arcLengthDivisions),this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var l=[],p,h=this.getPoint(0,this._tmpVec2A),f=0;l.push(0);for(var v=1;v<=a;v++)p=this.getPoint(v/a,this._tmpVec2B),f+=p.distance(h),l.push(f),h.copy(p);return this.cacheArcLengths=l,l},getPointAt:function(a,l){var p=this.getUtoTmapping(a);return this.getPoint(p,l)},getPoints:function(a,l,p){p===void 0&&(p=[]),a||(l?a=this.getLength()/l:a=this.defaultDivisions);for(var h=0;h<=a;h++)p.push(this.getPoint(h/a));return p},getRandomPoint:function(a){return a===void 0&&(a=new s),this.getPoint(Math.random(),a)},getSpacedPoints:function(a,l,p){p===void 0&&(p=[]),a||(l?a=this.getLength()/l:a=this.defaultDivisions);for(var h=0;h<=a;h++){var f=this.getUtoTmapping(h/a,null,a);p.push(this.getPoint(f))}return p},getStartPoint:function(a){return a===void 0&&(a=new s),this.getPointAt(0,a)},getTangent:function(a,l){l===void 0&&(l=new s);var p=1e-4,h=a-p,f=a+p;return h<0&&(h=0),f>1&&(f=1),this.getPoint(h,this._tmpVec2A),this.getPoint(f,l),l.subtract(this._tmpVec2A).normalize()},getTangentAt:function(a,l){var p=this.getUtoTmapping(a);return this.getTangent(p,l)},getTFromDistance:function(a,l){return a<=0?0:this.getUtoTmapping(0,a,l)},getUtoTmapping:function(a,l,p){var h=this.getLengths(p),f=0,v=h.length,y;l?y=Math.min(l,h[v-1]):y=a*h[v-1];for(var x=0,S=v-1,E;x<=S;)if(f=Math.floor(x+(S-x)/2),E=h[f]-y,E<0)x=f+1;else if(E>0)S=f-1;else{S=f;break}if(f=S,h[f]===y)return f/(v-1);var b=h[f],T=h[f+1],P=T-b,C=(y-b)/P;return(f+C)/(v-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});r.exports=o},48835:(r,m,e)=>{var u=e(56694),g=e(38517),c=e(75606),s=e(10850),o=e(23701),a=e(93736),l=new u({Extends:g,initialize:function(h,f,v,y,x,S,E,b){if(typeof h=="object"){var T=h;h=s(T,"x",0),f=s(T,"y",0),v=s(T,"xRadius",0),y=s(T,"yRadius",v),x=s(T,"startAngle",0),S=s(T,"endAngle",360),E=s(T,"clockwise",!1),b=s(T,"rotation",0)}else y===void 0&&(y=v),x===void 0&&(x=0),S===void 0&&(S=360),E===void 0&&(E=!1),b===void 0&&(b=0);g.call(this,"EllipseCurve"),this.p0=new a(h,f),this._xRadius=v,this._yRadius=y,this._startAngle=c(x),this._endAngle=c(S),this._clockwise=E,this._rotation=c(b)},getStartPoint:function(p){return p===void 0&&(p=new a),this.getPoint(0,p)},getResolution:function(p){return p*2},getPoint:function(p,h){h===void 0&&(h=new a);for(var f=Math.PI*2,v=this._endAngle-this._startAngle,y=Math.abs(v)<Number.EPSILON;v<0;)v+=f;for(;v>f;)v-=f;v<Number.EPSILON&&(y?v=0:v=f),this._clockwise&&!y&&(v===f?v=-f:v=v-f);var x=this._startAngle+p*v,S=this.p0.x+this._xRadius*Math.cos(x),E=this.p0.y+this._yRadius*Math.sin(x);if(this._rotation!==0){var b=Math.cos(this._rotation),T=Math.sin(this._rotation),P=S-this.p0.x,C=E-this.p0.y;S=P*b-C*T+this.p0.x,E=P*T+C*b+this.p0.y}return h.set(S,E)},setXRadius:function(p){return this.xRadius=p,this},setYRadius:function(p){return this.yRadius=p,this},setWidth:function(p){return this.xRadius=p/2,this},setHeight:function(p){return this.yRadius=p/2,this},setStartAngle:function(p){return this.startAngle=p,this},setEndAngle:function(p){return this.endAngle=p,this},setClockwise:function(p){return this.clockwise=p,this},setRotation:function(p){return this.rotation=p,this},x:{get:function(){return this.p0.x},set:function(p){this.p0.x=p}},y:{get:function(){return this.p0.y},set:function(p){this.p0.y=p}},xRadius:{get:function(){return this._xRadius},set:function(p){this._xRadius=p}},yRadius:{get:function(){return this._yRadius},set:function(p){this._yRadius=p}},startAngle:{get:function(){return o(this._startAngle)},set:function(p){this._startAngle=c(p)}},endAngle:{get:function(){return o(this._endAngle)},set:function(p){this._endAngle=c(p)}},clockwise:{get:function(){return this._clockwise},set:function(p){this._clockwise=p}},angle:{get:function(){return o(this._rotation)},set:function(p){this._rotation=c(p)}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:o(this._startAngle),endAngle:o(this._endAngle),clockwise:this._clockwise,rotation:o(this._rotation)}}});l.fromJSON=function(p){return new l(p)},r.exports=l},58084:(r,m,e)=>{var u=e(56694),g=e(38517),c=e(80222),s=e(74118),o=e(93736),a=new u({Extends:g,initialize:function(p,h){g.call(this,"LineCurve"),Array.isArray(p)&&(h=new o(p[2],p[3]),p=new o(p[0],p[1])),this.p0=p,this.p1=h,this.arcLengthDivisions=1},getBounds:function(l){return l===void 0&&(l=new s),c([this.p0,this.p1],l)},getStartPoint:function(l){return l===void 0&&(l=new o),l.copy(this.p0)},getResolution:function(l){return l===void 0&&(l=1),l},getPoint:function(l,p){return p===void 0&&(p=new o),l===1?p.copy(this.p1):(p.copy(this.p1).subtract(this.p0).scale(l).add(this.p0),p)},getPointAt:function(l,p){return this.getPoint(l,p)},getTangent:function(l,p){return p===void 0&&(p=new o),p.copy(this.p1).subtract(this.p0).normalize(),p},getUtoTmapping:function(l,p,h){var f;if(p){var v=this.getLengths(h),y=v[v.length-1],x=Math.min(p,y);f=x/y}else f=l;return f},draw:function(l){return l.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});a.fromJSON=function(l){var p=l.points,h=new o(p[0],p[1]),f=new o(p[2],p[3]);return new a(h,f)},r.exports=a},64761:(r,m,e)=>{var u=e(56694),g=e(38517),c=e(16252),s=e(93736),o=new u({Extends:g,initialize:function(l,p,h){g.call(this,"QuadraticBezierCurve"),Array.isArray(l)&&(h=new s(l[4],l[5]),p=new s(l[2],l[3]),l=new s(l[0],l[1])),this.p0=l,this.p1=p,this.p2=h},getStartPoint:function(a){return a===void 0&&(a=new s),a.copy(this.p0)},getResolution:function(a){return a},getPoint:function(a,l){l===void 0&&(l=new s);var p=this.p0,h=this.p1,f=this.p2;return l.set(c(a,p.x,h.x,f.x),c(a,p.y,h.y,f.y))},draw:function(a,l){l===void 0&&(l=32);var p=this.getPoints(l);a.beginPath(),a.moveTo(this.p0.x,this.p0.y);for(var h=1;h<p.length;h++)a.lineTo(p[h].x,p[h].y);return a.strokePath(),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});o.fromJSON=function(a){var l=a.points,p=new s(l[0],l[1]),h=new s(l[2],l[3]),f=new s(l[4],l[5]);return new o(p,h,f)},r.exports=o},11956:(r,m,e)=>{var u=e(14976),g=e(56694),c=e(38517),s=e(93736),o=new g({Extends:c,initialize:function(l){l===void 0&&(l=[]),c.call(this,"SplineCurve"),this.points=[],this.addPoints(l)},addPoints:function(a){for(var l=0;l<a.length;l++){var p=new s;typeof a[l]=="number"?(p.x=a[l],p.y=a[l+1],l++):Array.isArray(a[l])?(p.x=a[l][0],p.y=a[l][1]):(p.x=a[l].x,p.y=a[l].y),this.points.push(p)}return this},addPoint:function(a,l){var p=new s(a,l);return this.points.push(p),p},getStartPoint:function(a){return a===void 0&&(a=new s),a.copy(this.points[0])},getResolution:function(a){return a*this.points.length},getPoint:function(a,l){l===void 0&&(l=new s);var p=this.points,h=(p.length-1)*a,f=Math.floor(h),v=h-f,y=p[f===0?f:f-1],x=p[f],S=p[f>p.length-2?p.length-1:f+1],E=p[f>p.length-3?p.length-1:f+2];return l.set(u(v,y.x,x.x,S.x,E.x),u(v,y.y,x.y,S.y,E.y))},toJSON:function(){for(var a=[],l=0;l<this.points.length;l++)a.push(this.points[l].x),a.push(this.points[l].y);return{type:this.type,points:a}}});o.fromJSON=function(a){return new o(a.points)},r.exports=o},73962:(r,m,e)=>{r.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}},53639:(r,m,e)=>{var u=e(56694),g=e(93736),c=new u({initialize:function(o,a){this.active=!1,this.p0=new g(o,a)},getPoint:function(s,o){return o===void 0&&(o=new g),o.copy(this.p0)},getPointAt:function(s,o){return this.getPoint(s,o)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});r.exports=c},12822:(r,m,e)=>{var u=e(56694),g=e(63120),c=e(48835),s=e(61286),o=e(58084),a=e(53639),l=e(64761),p=e(74118),h=e(11956),f=e(93736),v=e(83392),y=new u({initialize:function(S,E){S===void 0&&(S=0),E===void 0&&(E=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,typeof S=="object"?this.fromJSON(S):this.startPoint.set(S,E)},add:function(x){return this.curves.push(x),this},circleTo:function(x,S,E){return S===void 0&&(S=!1),this.ellipseTo(x,x,0,360,S,E)},closePath:function(){var x=this.curves[0].getPoint(0),S=this.curves[this.curves.length-1].getPoint(1);return x.equals(S)||this.curves.push(new o(S,x)),this},cubicBezierTo:function(x,S,E,b,T,P){var C=this.getEndPoint(),w,A,R;return x instanceof f?(w=x,A=S,R=E):(w=new f(E,b),A=new f(T,P),R=new f(x,S)),this.add(new g(C,w,A,R))},quadraticBezierTo:function(x,S,E,b){var T=this.getEndPoint(),P,C;return x instanceof f?(P=x,C=S):(P=new f(E,b),C=new f(x,S)),this.add(new l(T,P,C))},draw:function(x,S){for(var E=0;E<this.curves.length;E++){var b=this.curves[E];b.active&&b.draw(x,S)}return x},ellipseTo:function(x,S,E,b,T,P){var C=new c(0,0,x,S,E,b,T,P),w=this.getEndPoint(this._tmpVec2A),A=C.getStartPoint(this._tmpVec2B);return w.subtract(A),C.x=w.x,C.y=w.y,this.add(C)},fromJSON:function(x){this.curves=[],this.cacheLengths=[],this.startPoint.set(x.x,x.y),this.autoClose=x.autoClose;for(var S=0;S<x.curves.length;S++){var E=x.curves[S];switch(E.type){case"LineCurve":this.add(o.fromJSON(E));break;case"EllipseCurve":this.add(c.fromJSON(E));break;case"SplineCurve":this.add(h.fromJSON(E));break;case"CubicBezierCurve":this.add(g.fromJSON(E));break;case"QuadraticBezierCurve":this.add(l.fromJSON(E));break}}return this},getBounds:function(x,S){x===void 0&&(x=new p),S===void 0&&(S=16),x.x=Number.MAX_VALUE,x.y=Number.MAX_VALUE;for(var E=new p,b=v.MIN_SAFE_INTEGER,T=v.MIN_SAFE_INTEGER,P=0;P<this.curves.length;P++){var C=this.curves[P];C.active&&(C.getBounds(E,S),x.x=Math.min(x.x,E.x),x.y=Math.min(x.y,E.y),b=Math.max(b,E.right),T=Math.max(T,E.bottom))}return x.right=b,x.bottom=T,x},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var x=[],S=0,E=0;E<this.curves.length;E++)S+=this.curves[E].getLength(),x.push(S);return this.cacheLengths=x,x},getCurveAt:function(x){for(var S=x*this.getLength(),E=this.getCurveLengths(),b=0;b<E.length;){if(E[b]>=S)return this.curves[b];b++}return null},getEndPoint:function(x){return x===void 0&&(x=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,x):x.copy(this.startPoint),x},getLength:function(){var x=this.getCurveLengths();return x[x.length-1]},getPoint:function(x,S){S===void 0&&(S=new f);for(var E=x*this.getLength(),b=this.getCurveLengths(),T=0;T<b.length;){if(b[T]>=E){var P=b[T]-E,C=this.curves[T],w=C.getLength(),A=w===0?0:1-P/w;return C.getPointAt(A,S)}T++}return null},getPoints:function(x){x===void 0&&(x=12);for(var S=[],E,b=0;b<this.curves.length;b++){var T=this.curves[b];if(T.active)for(var P=T.getResolution(x),C=T.getPoints(P),w=0;w<C.length;w++){var A=C[w];E&&E.equals(A)||(S.push(A),E=A)}}return this.autoClose&&S.length>1&&!S[S.length-1].equals(S[0])&&S.push(S[0]),S},getRandomPoint:function(x){return x===void 0&&(x=new f),this.getPoint(Math.random(),x)},getSpacedPoints:function(x){x===void 0&&(x=40);for(var S=[],E=0;E<=x;E++)S.push(this.getPoint(E/x));return this.autoClose&&S.push(S[0]),S},getStartPoint:function(x){return x===void 0&&(x=new f),x.copy(this.startPoint)},getTangent:function(x,S){S===void 0&&(S=new f);for(var E=x*this.getLength(),b=this.getCurveLengths(),T=0;T<b.length;){if(b[T]>=E){var P=b[T]-E,C=this.curves[T],w=C.getLength(),A=w===0?0:1-P/w;return C.getTangentAt(A,S)}T++}return null},lineTo:function(x,S){x instanceof f?this._tmpVec2B.copy(x):this._tmpVec2B.set(x,S);var E=this.getEndPoint(this._tmpVec2A);return this.add(new o([E.x,E.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(x){return x.unshift(this.getEndPoint()),this.add(new h(x))},moveTo:function(x,S){return x instanceof f?this.add(new a(x.x,x.y)):this.add(new a(x,S))},toJSON:function(){for(var x=[],S=0;S<this.curves.length;S++)x.push(this.curves[S].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:x}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});s.register("path",function(x,S){return new y(x,S)}),r.exports=y},81078:(r,m,e)=>{var u=e(56694),g=e(35026),c=new u({initialize:function(o,a){this.parent=o,this.events=a,a||(this.events=o.events?o.events:o),this.list={},this.values={},this._frozen=!1,!o.hasOwnProperty("sys")&&this.events&&this.events.once(g.DESTROY,this.destroy,this)},get:function(s){var o=this.list;if(Array.isArray(s)){for(var a=[],l=0;l<s.length;l++)a.push(o[s[l]]);return a}else return o[s]},getAll:function(){var s={};for(var o in this.list)this.list.hasOwnProperty(o)&&(s[o]=this.list[o]);return s},query:function(s){var o={};for(var a in this.list)this.list.hasOwnProperty(a)&&a.match(s)&&(o[a]=this.list[a]);return o},set:function(s,o){if(this._frozen)return this;if(typeof s=="string")return this.setValue(s,o);for(var a in s)this.setValue(a,s[a]);return this},inc:function(s,o){if(this._frozen)return this;o===void 0&&(o=1);var a=this.get(s);return a===void 0&&(a=0),this.set(s,a+o),this},toggle:function(s){return this._frozen?this:(this.set(s,!this.get(s)),this)},setValue:function(s,o){if(this._frozen)return this;if(this.has(s))this.values[s]=o;else{var a=this,l=this.list,p=this.events,h=this.parent;Object.defineProperty(this.values,s,{enumerable:!0,configurable:!0,get:function(){return l[s]},set:function(f){if(!a._frozen){var v=l[s];l[s]=f,p.emit(g.CHANGE_DATA,h,s,f,v),p.emit(g.CHANGE_DATA_KEY+s,h,f,v)}}}),l[s]=o,p.emit(g.SET_DATA,h,s,o)}return this},each:function(s,o){for(var a=[this.parent,null,void 0],l=1;l<arguments.length;l++)a.push(arguments[l]);for(var p in this.list)a[1]=p,a[2]=this.list[p],s.apply(o,a);return this},merge:function(s,o){o===void 0&&(o=!0);for(var a in s)s.hasOwnProperty(a)&&(o||!o&&!this.has(a))&&this.setValue(a,s[a]);return this},remove:function(s){if(this._frozen)return this;if(Array.isArray(s))for(var o=0;o<s.length;o++)this.removeValue(s[o]);else return this.removeValue(s);return this},removeValue:function(s){if(this.has(s)){var o=this.list[s];delete this.list[s],delete this.values[s],this.events.emit(g.REMOVE_DATA,this.parent,s,o)}return this},pop:function(s){var o=void 0;return!this._frozen&&this.has(s)&&(o=this.list[s],delete this.list[s],delete this.values[s],this.events.emit(g.REMOVE_DATA,this.parent,s,o)),o},has:function(s){return this.list.hasOwnProperty(s)},setFreeze:function(s){return this._frozen=s,this},reset:function(){for(var s in this.list)delete this.list[s],delete this.values[s];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(g.CHANGE_DATA),this.events.off(g.SET_DATA),this.events.off(g.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(s){this._frozen=!!s}},count:{get:function(){var s=0;for(var o in this.list)this.list[o]!==void 0&&s++;return s}}});r.exports=c},76508:(r,m,e)=>{var u=e(56694),g=e(81078),c=e(91963),s=e(7599),o=new u({Extends:g,initialize:function(l){g.call(this,l,l.sys.events),this.scene=l,this.systems=l.sys,l.sys.events.once(s.BOOT,this.boot,this),l.sys.events.on(s.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){g.prototype.destroy.call(this),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});c.register("DataManagerPlugin",o,"data"),r.exports=o},73569:r=>{r.exports="changedata"},15590:r=>{r.exports="changedata-"},37669:r=>{r.exports="destroy"},87090:r=>{r.exports="removedata"},90142:r=>{r.exports="setdata"},35026:(r,m,e)=>{r.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}},1999:(r,m,e)=>{r.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}},10720:(r,m,e)=>{var u=e(1350),g={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function c(){if(typeof importScripts=="function")return g;g.audioData=!!window.Audio,g.webAudio=!!(window.AudioContext||window.webkitAudioContext);var s=document.createElement("audio"),o=!!s.canPlayType;try{if(o){var a=function(h,f){var v=s.canPlayType("audio/"+h).replace(/^no$/,"");return f?!!(v||s.canPlayType("audio/"+f).replace(/^no$/,"")):!!v};if(g.ogg=a('ogg; codecs="vorbis"'),g.opus=a('ogg; codecs="opus"',"opus"),g.mp3=a("mpeg"),g.wav=a("wav"),g.m4a=a("x-m4a"),g.aac=a("aac"),g.flac=a("flac","x-flac"),g.webm=a('webm; codecs="vorbis"'),s.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(u.edge)g.dolby=!0;else if(u.safari&&u.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var l=parseInt(RegExp.$1,10),p=parseInt(RegExp.$2,10);(l===10&&p>=11||l>10)&&(g.dolby=!0)}}}}catch{}return g}r.exports=c()},1350:(r,m,e)=>{var u=e(36580),g={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function c(){var s=navigator.userAgent;return/Edg\/\d+/.test(s)?(g.edge=!0,g.es2019=!0):/OPR/.test(s)?(g.opera=!0,g.es2019=!0):/Chrome\/(\d+)/.test(s)&&!u.windowsPhone?(g.chrome=!0,g.chromeVersion=parseInt(RegExp.$1,10),g.es2019=g.chromeVersion>69):/Firefox\D+(\d+)/.test(s)?(g.firefox=!0,g.firefoxVersion=parseInt(RegExp.$1,10),g.es2019=g.firefoxVersion>10):/AppleWebKit/.test(s)&&u.iOS?g.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(s)?(g.ie=!0,g.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(s)&&!u.windowsPhone?(g.safari=!0,g.safariVersion=parseInt(RegExp.$1,10),g.es2019=g.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(s)&&(g.ie=!0,g.trident=!0,g.tridentVersion=parseInt(RegExp.$1,10),g.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(s)&&(g.silk=!0),g}r.exports=c()},98581:(r,m,e)=>{var u=e(61068),g={supportInverseAlpha:!1,supportNewBlendModes:!1};function c(){var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",l="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",p=new Image;return p.onload=function(){var h=new Image;h.onload=function(){var f=u.create2D(h,6),v=f.getContext("2d",{willReadFrequently:!0});if(v.globalCompositeOperation="multiply",v.drawImage(p,0,0),v.drawImage(h,2,0),!v.getImageData(2,0,1,1))return!1;var y=v.getImageData(2,0,1,1).data;u.remove(h),g.supportNewBlendModes=y[0]===255&&y[1]===0&&y[2]===0},h.src=a+"/wCKxvRF"+l},p.src=a+"AP804Oa6"+l,!1}function s(){var a=u.create2D(this,2),l=a.getContext("2d",{willReadFrequently:!0});l.fillStyle="rgba(10, 20, 30, 0.5)",l.fillRect(0,0,1,1);var p=l.getImageData(0,0,1,1);if(p===null)return!1;l.putImageData(p,1,0);var h=l.getImageData(1,0,1,1),f=h.data[0]===p.data[0]&&h.data[1]===p.data[1]&&h.data[2]===p.data[2]&&h.data[3]===p.data[3];return u.remove(this),f}function o(){return typeof importScripts!="function"&&document!==void 0&&(g.supportNewBlendModes=c(),g.supportInverseAlpha=s()),g}r.exports=o()},90185:(r,m,e)=>{var u=e(36580),g=e(1350),c=e(61068),s={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function o(){var l=new ArrayBuffer(4),p=new Uint8Array(l),h=new Uint32Array(l);return p[0]=161,p[1]=178,p[2]=195,p[3]=212,h[0]===3569595041?!0:h[0]===2712847316?!1:null}function a(){if(typeof importScripts=="function")return s;s.canvas=!!window.CanvasRenderingContext2D;try{s.localStorage=!!localStorage.getItem}catch{s.localStorage=!1}s.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,s.fileSystem=!!window.requestFileSystem;var l=!1,p=function(){if(window.WebGLRenderingContext)try{var h=c.createWebGL(this),f=h.getContext("webgl")||h.getContext("experimental-webgl"),v=c.create2D(this),y=v.getContext("2d",{willReadFrequently:!0}),x=y.createImageData(1,1);return l=x.data instanceof Uint8ClampedArray,c.remove(h),c.remove(v),!!f}catch{return!1}return!1};return s.webGL=p(),s.worker=!!window.Worker,s.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,s.getUserMedia=s.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,g.firefox&&g.firefoxVersion<21&&(s.getUserMedia=!1),!u.iOS&&(g.ie||g.firefox||g.chrome)&&(s.canvasBitBltShift=!0),(g.safari||g.mobileSafari)&&(s.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(s.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(s.littleEndian=o()),s.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&s.littleEndian!==null&&l,s}r.exports=a()},33553:r=>{var m={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return m;var u,g="Fullscreen",c="FullScreen",s=["request"+g,"request"+c,"webkitRequest"+g,"webkitRequest"+c,"msRequest"+g,"msRequest"+c,"mozRequest"+c,"mozRequest"+g];for(u=0;u<s.length;u++)if(document.documentElement[s[u]]){m.available=!0,m.request=s[u];break}var o=["cancel"+c,"exit"+g,"webkitCancel"+c,"webkitExit"+g,"msCancel"+c,"msExit"+g,"mozCancel"+c,"mozExit"+g];if(m.available){for(u=0;u<o.length;u++)if(document[o[u]]){m.cancel=o[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(m.keyboard=!0),Object.defineProperty(m,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),m}r.exports=e()},95872:(r,m,e)=>{var u=e(1350),g={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function c(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(g.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(g.mspointer=!0),navigator.getGamepads&&(g.gamepads=!0),"onwheel"in window||u.ie&&"WheelEvent"in window?g.wheelEvent="wheel":"onmousewheel"in window?g.wheelEvent="mousewheel":u.firefox&&"MouseScrollEvent"in window&&(g.wheelEvent="DOMMouseScroll")),g}r.exports=c()},36580:r=>{var m={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return m;var u=navigator.userAgent;/Windows/.test(u)?m.windows=!0:/Mac OS/.test(u)&&!/like Mac OS/.test(u)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(m.iOS=!0,m.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),m.iOSVersion=parseInt(RegExp.$1,10)):m.macOS=!0:/Android/.test(u)?m.android=!0:/Linux/.test(u)?m.linux=!0:/iP[ao]d|iPhone/i.test(u)?(m.iOS=!0,navigator.appVersion.match(/OS (\d+)/),m.iOSVersion=parseInt(RegExp.$1,10),m.iPhone=u.toLowerCase().indexOf("iphone")!==-1,m.iPad=u.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(u)||/\bKF[A-Z][A-Z]+/.test(u)||/Silk.*Mobile Safari/.test(u)?m.kindle=!0:/CrOS/.test(u)&&(m.chromeOS=!0),(/Windows Phone/i.test(u)||/IEMobile/i.test(u))&&(m.android=!1,m.iOS=!1,m.macOS=!1,m.windows=!0,m.windowsPhone=!0);var g=/Silk/.test(u);return(m.windows||m.macOS||m.linux&&!g||m.chromeOS)&&(m.desktop=!0),(m.windowsPhone||/Windows NT/i.test(u)&&/Touch/i.test(u))&&(m.desktop=!1),navigator.standalone&&(m.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(m.cordova=!0),window.ejecta!==void 0&&(m.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(m.node=!0),m.node&&typeof process.versions=="object"&&(m.nodeWebkit=!!process.versions["node-webkit"],m.electron=!!process.versions.electron),/Crosswalk/.test(u)&&(m.crosswalk=!0),m.pixelRatio=window.devicePixelRatio||1,m}r.exports=e()},53861:(r,m,e)=>{var u=e(72632),g={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function c(){if(typeof importScripts=="function")return g;var s=document.createElement("video"),o=!!s.canPlayType,a=/^no$/;try{o&&(s.canPlayType('video/ogg; codecs="theora"').replace(a,"")&&(g.ogg=!0),s.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(a,"")&&(g.h264=!0,g.mp4=!0),s.canPlayType("video/x-m4v").replace(a,"")&&(g.m4v=!0),s.canPlayType('video/webm; codecs="vp8, vorbis"').replace(a,"")&&(g.webm=!0),s.canPlayType('video/webm; codecs="vp9"').replace(a,"")&&(g.vp9=!0),s.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(a,"")&&(g.hls=!0))}catch{}return s.parentNode&&s.parentNode.removeChild(s),g.getVideoURL=function(l){Array.isArray(l)||(l=[l]);for(var p=0;p<l.length;p++){var h=u(l[p],"url",l[p]);if(h.indexOf("blob:")===0)return{url:h,type:""};var f;if(h.indexOf("data:")===0?f=h.split(",")[0].match(/\/(.*?);/):f=h.match(/\.([a-zA-Z0-9]+)($|\?)/),f=u(l[p],"type",f?f[1]:"").toLowerCase(),g[f])return{url:h,type:f}}return null},g}r.exports=c()},77290:(r,m,e)=>{r.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}},65246:(r,m,e)=>{var u=e(56694),g=new Float32Array(20),c=new u({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(s){return this._matrix.set(s),this._dirty=!0,this},reset:function(){var s=this._matrix;return s.fill(0),s[0]=1,s[6]=1,s[12]=1,s[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var s=this._data;return this._dirty&&(s.set(this._matrix),s[4]/=255,s[9]/=255,s[14]/=255,s[19]/=255,this._dirty=!1),s},brightness:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1);var a=s;return this.multiply([a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],o)},saturate:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1);var a=s*2/3+1,l=(a-1)*-.5;return this.multiply([a,l,l,0,0,l,a,l,0,0,l,l,a,0,0,0,0,0,1,0],o)},desaturate:function(s){return s===void 0&&(s=!1),this.saturate(-1,s)},hue:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1),s=s/180*Math.PI;var a=Math.cos(s),l=Math.sin(s),p=.213,h=.715,f=.072;return this.multiply([p+a*(1-p)+l*-p,h+a*-h+l*-h,f+a*-f+l*(1-f),0,0,p+a*-p+l*.143,h+a*(1-h)+l*.14,f+a*-f+l*-.283,0,0,p+a*-p+l*-(1-p),h+a*-h+l*h,f+a*(1-f)+l*f,0,0,0,0,0,1,0],o)},grayscale:function(s,o){return s===void 0&&(s=1),o===void 0&&(o=!1),this.saturate(-s,o)},blackWhite:function(s){return s===void 0&&(s=!1),this.multiply(c.BLACK_WHITE,s)},contrast:function(s,o){s===void 0&&(s=0),o===void 0&&(o=!1);var a=s+1,l=-.5*(a-1);return this.multiply([a,0,0,0,l,0,a,0,0,l,0,0,a,0,l,0,0,0,1,0],o)},negative:function(s){return s===void 0&&(s=!1),this.multiply(c.NEGATIVE,s)},desaturateLuminance:function(s){return s===void 0&&(s=!1),this.multiply(c.DESATURATE_LUMINANCE,s)},sepia:function(s){return s===void 0&&(s=!1),this.multiply(c.SEPIA,s)},night:function(s,o){return s===void 0&&(s=.1),o===void 0&&(o=!1),this.multiply([s*-2,-s,0,0,0,-s,0,s,0,0,0,s,s*2,0,0,0,0,0,1,0],o)},lsd:function(s){return s===void 0&&(s=!1),this.multiply(c.LSD,s)},brown:function(s){return s===void 0&&(s=!1),this.multiply(c.BROWN,s)},vintagePinhole:function(s){return s===void 0&&(s=!1),this.multiply(c.VINTAGE,s)},kodachrome:function(s){return s===void 0&&(s=!1),this.multiply(c.KODACHROME,s)},technicolor:function(s){return s===void 0&&(s=!1),this.multiply(c.TECHNICOLOR,s)},polaroid:function(s){return s===void 0&&(s=!1),this.multiply(c.POLAROID,s)},shiftToBGR:function(s){return s===void 0&&(s=!1),this.multiply(c.SHIFT_BGR,s)},multiply:function(s,o){o===void 0&&(o=!1),o||this.reset();var a=this._matrix,l=g;return l.set(a),a.set([l[0]*s[0]+l[1]*s[5]+l[2]*s[10]+l[3]*s[15],l[0]*s[1]+l[1]*s[6]+l[2]*s[11]+l[3]*s[16],l[0]*s[2]+l[1]*s[7]+l[2]*s[12]+l[3]*s[17],l[0]*s[3]+l[1]*s[8]+l[2]*s[13]+l[3]*s[18],l[0]*s[4]+l[1]*s[9]+l[2]*s[14]+l[3]*s[19]+l[4],l[5]*s[0]+l[6]*s[5]+l[7]*s[10]+l[8]*s[15],l[5]*s[1]+l[6]*s[6]+l[7]*s[11]+l[8]*s[16],l[5]*s[2]+l[6]*s[7]+l[7]*s[12]+l[8]*s[17],l[5]*s[3]+l[6]*s[8]+l[7]*s[13]+l[8]*s[18],l[5]*s[4]+l[6]*s[9]+l[7]*s[14]+l[8]*s[19]+l[9],l[10]*s[0]+l[11]*s[5]+l[12]*s[10]+l[13]*s[15],l[10]*s[1]+l[11]*s[6]+l[12]*s[11]+l[13]*s[16],l[10]*s[2]+l[11]*s[7]+l[12]*s[12]+l[13]*s[17],l[10]*s[3]+l[11]*s[8]+l[12]*s[13]+l[13]*s[18],l[10]*s[4]+l[11]*s[9]+l[12]*s[14]+l[13]*s[19]+l[14],l[15]*s[0]+l[16]*s[5]+l[17]*s[10]+l[18]*s[15],l[15]*s[1]+l[16]*s[6]+l[17]*s[11]+l[18]*s[16],l[15]*s[2]+l[16]*s[7]+l[17]*s[12]+l[18]*s[17],l[15]*s[3]+l[16]*s[8]+l[17]*s[13]+l[18]*s[18],l[15]*s[4]+l[16]*s[9]+l[17]*s[14]+l[18]*s[19]+l[19]]),this._dirty=!0,this}});c.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],c.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],c.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],c.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],c.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],c.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],c.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],c.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],c.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],c.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],c.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r.exports=c},39298:(r,m,e)=>{var u=e(56694),g=e(72283),c=new u({initialize:function(o,a,l){this._rgb=[0,0,0],this.onChangeCallback=g,this.dirty=!1,this.set(o,a,l)},set:function(s,o,a){return s===void 0&&(s=0),o===void 0&&(o=0),a===void 0&&(a=0),this._rgb=[s,o,a],this.onChange(),this},equals:function(s,o,a){var l=this._rgb;return l[0]===s&&l[1]===o&&l[2]===a},onChange:function(){this.dirty=!0;var s=this._rgb;this.onChangeCallback.call(this,s[0],s[1],s[2])},r:{get:function(){return this._rgb[0]},set:function(s){this._rgb[0]=s,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(s){this._rgb[1]=s,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(s){this._rgb[2]=s,this.onChange()}},destroy:function(){this.onChangeCallback=null}});r.exports=c},84093:r=>{var m={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};r.exports=m},32058:(r,m,e)=>{var u=e(97328),g=e(59994),c=e(73174),s=e(28417),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)+p),c(a,u(l)+h),a};r.exports=o},85535:(r,m,e)=>{var u=e(97328),g=e(40163),c=e(73174),s=e(74465),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)-p),c(a,u(l)+h),a};r.exports=o},9605:(r,m,e)=>{var u=e(97328),g=e(70271),c=e(73174),s=e(19298),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)+p),c(a,u(l)+h),a};r.exports=o},22529:(r,m,e)=>{var u=e(21843),g=e(59994),c=e(29568),s=function(o,a,l,p){return l===void 0&&(l=0),p===void 0&&(p=0),u(o,g(a)+l,c(a)+p),o};r.exports=s},5739:(r,m,e)=>{var u=e(29568),g=e(40163),c=e(81711),s=e(74465),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)-p),c(a,u(l)+h),a};r.exports=o},40327:(r,m,e)=>{var u=e(84093),g=[];g[u.BOTTOM_CENTER]=e(32058),g[u.BOTTOM_LEFT]=e(85535),g[u.BOTTOM_RIGHT]=e(9605),g[u.CENTER]=e(22529),g[u.LEFT_CENTER]=e(5739),g[u.RIGHT_CENTER]=e(27683),g[u.TOP_CENTER]=e(96439),g[u.TOP_LEFT]=e(81447),g[u.TOP_RIGHT]=e(47888),g[u.LEFT_BOTTOM]=g[u.BOTTOM_LEFT],g[u.LEFT_TOP]=g[u.TOP_LEFT],g[u.RIGHT_BOTTOM]=g[u.BOTTOM_RIGHT],g[u.RIGHT_TOP]=g[u.TOP_RIGHT];var c=function(s,o,a,l,p){return g[a](s,o,l,p)};r.exports=c},27683:(r,m,e)=>{var u=e(29568),g=e(70271),c=e(81711),s=e(19298),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)+p),c(a,u(l)+h),a};r.exports=o},96439:(r,m,e)=>{var u=e(59994),g=e(47196),c=e(28417),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,u(l)+p),s(a,g(l)-h),a};r.exports=o},81447:(r,m,e)=>{var u=e(40163),g=e(47196),c=e(74465),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,u(l)-p),s(a,g(l)-h),a};r.exports=o},47888:(r,m,e)=>{var u=e(70271),g=e(47196),c=e(19298),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,u(l)+p),s(a,g(l)-h),a};r.exports=o},46997:(r,m,e)=>{r.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}},93545:(r,m,e)=>{var u=e(84093),g=e(98611),c={In:e(46997),To:e(86639)};c=g(!1,c,u),r.exports=c},27118:(r,m,e)=>{var u=e(97328),g=e(59994),c=e(28417),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,g(l)+p),s(a,u(l)+h),a};r.exports=o},84469:(r,m,e)=>{var u=e(97328),g=e(40163),c=e(74465),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,g(l)-p),s(a,u(l)+h),a};r.exports=o},51577:(r,m,e)=>{var u=e(97328),g=e(70271),c=e(19298),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,g(l)+p),s(a,u(l)+h),a};r.exports=o},90271:(r,m,e)=>{var u=e(97328),g=e(40163),c=e(73174),s=e(19298),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)-p),c(a,u(l)+h),a};r.exports=o},30466:(r,m,e)=>{var u=e(29568),g=e(40163),c=e(81711),s=e(19298),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)-p),c(a,u(l)+h),a};r.exports=o},50087:(r,m,e)=>{var u=e(40163),g=e(47196),c=e(19298),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,u(l)-p),s(a,g(l)-h),a};r.exports=o},82590:(r,m,e)=>{var u=e(84093),g=[];g[u.BOTTOM_CENTER]=e(27118),g[u.BOTTOM_LEFT]=e(84469),g[u.BOTTOM_RIGHT]=e(51577),g[u.LEFT_BOTTOM]=e(90271),g[u.LEFT_CENTER]=e(30466),g[u.LEFT_TOP]=e(50087),g[u.RIGHT_BOTTOM]=e(13555),g[u.RIGHT_CENTER]=e(99049),g[u.RIGHT_TOP]=e(67788),g[u.TOP_CENTER]=e(78170),g[u.TOP_LEFT]=e(54145),g[u.TOP_RIGHT]=e(75548);var c=function(s,o,a,l,p){return g[a](s,o,l,p)};r.exports=c},13555:(r,m,e)=>{var u=e(97328),g=e(70271),c=e(73174),s=e(74465),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)+p),c(a,u(l)+h),a};r.exports=o},99049:(r,m,e)=>{var u=e(29568),g=e(70271),c=e(81711),s=e(74465),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,g(l)+p),c(a,u(l)+h),a};r.exports=o},67788:(r,m,e)=>{var u=e(70271),g=e(47196),c=e(74465),s=e(84349),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),c(a,u(l)+p),s(a,g(l)-h),a};r.exports=o},78170:(r,m,e)=>{var u=e(59994),g=e(47196),c=e(73174),s=e(28417),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,u(l)+p),c(a,g(l)-h),a};r.exports=o},54145:(r,m,e)=>{var u=e(40163),g=e(47196),c=e(73174),s=e(74465),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,u(l)-p),c(a,g(l)-h),a};r.exports=o},75548:(r,m,e)=>{var u=e(70271),g=e(47196),c=e(73174),s=e(19298),o=function(a,l,p,h){return p===void 0&&(p=0),h===void 0&&(h=0),s(a,u(l)+p),c(a,g(l)-h),a};r.exports=o},86639:(r,m,e)=>{r.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}},21843:(r,m,e)=>{var u=e(28417),g=e(81711),c=function(s,o,a){return u(s,o),g(s,a)};r.exports=c},97328:r=>{var m=function(e){return e.y+e.height-e.height*e.originY};r.exports=m},7126:(r,m,e)=>{var u=e(97328),g=e(40163),c=e(70271),s=e(47196),o=e(74118),a=function(l,p){p===void 0&&(p=new o);var h=g(l),f=s(l);return p.x=h,p.y=f,p.width=c(l)-h,p.height=u(l)-f,p};r.exports=a},59994:r=>{var m=function(e){return e.x-e.width*e.originX+e.width*.5};r.exports=m},29568:r=>{var m=function(e){return e.y-e.height*e.originY+e.height*.5};r.exports=m},40163:r=>{var m=function(e){return e.x-e.width*e.originX};r.exports=m},52088:r=>{var m=function(e){return e.width*e.originX};r.exports=m},23379:r=>{var m=function(e){return e.height*e.originY};r.exports=m},70271:r=>{var m=function(e){return e.x+e.width-e.width*e.originX};r.exports=m},47196:r=>{var m=function(e){return e.y-e.height*e.originY};r.exports=m},73174:r=>{var m=function(e,u){return e.y=u-e.height+e.height*e.originY,e};r.exports=m},28417:r=>{var m=function(e,u){var g=e.width*e.originX;return e.x=u+g-e.width*.5,e};r.exports=m},81711:r=>{var m=function(e,u){var g=e.height*e.originY;return e.y=u+g-e.height*.5,e};r.exports=m},74465:r=>{var m=function(e,u){return e.x=u+e.width*e.originX,e};r.exports=m},19298:r=>{var m=function(e,u){return e.x=u-e.width+e.width*e.originX,e};r.exports=m},84349:r=>{var m=function(e,u){return e.y=u+e.height*e.originY,e};r.exports=m},15252:(r,m,e)=>{r.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}},70616:r=>{var m={setCrisp:function(e){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(g){e.style["image-rendering"]=g}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};r.exports=m},61068:(r,m,e)=>{var u=e(86459),g=e(8213),c=[],s=!1,o=function(){var a=function(E,b,T,P,C){b===void 0&&(b=1),T===void 0&&(T=1),P===void 0&&(P=u.CANVAS),C===void 0&&(C=!1);var w,A=h(P);return A===null?(A={parent:E,canvas:document.createElement("canvas"),type:P},P===u.CANVAS&&c.push(A),w=A.canvas):(A.parent=E,w=A.canvas),C&&(A.parent=w),w.width=b,w.height=T,s&&P===u.CANVAS&&g.disable(w.getContext("2d",{willReadFrequently:!1})),w},l=function(E,b,T){return a(E,b,T,u.CANVAS)},p=function(E,b,T){return a(E,b,T,u.WEBGL)},h=function(E){if(E===void 0&&(E=u.CANVAS),E===u.WEBGL)return null;for(var b=0;b<c.length;b++){var T=c[b];if(!T.parent&&T.type===E)return T}return null},f=function(E){var b=E instanceof HTMLCanvasElement;c.forEach(function(T){(b&&T.canvas===E||!b&&T.parent===E)&&(T.parent=null,T.canvas.width=1,T.canvas.height=1)})},v=function(){var E=0;return c.forEach(function(b){b.parent&&E++}),E},y=function(){return c.length-v()},x=function(){s=!0},S=function(){s=!1};return{create2D:l,create:a,createWebGL:p,disableSmoothing:x,enableSmoothing:S,first:h,free:y,pool:c,remove:f,total:v}};r.exports=o()},8213:r=>{var m="",e=function(){var u=function(o){for(var a=["i","webkitI","msI","mozI","oI"],l=0;l<a.length;l++){var p=a[l]+"mageSmoothingEnabled";if(p in o)return p}return null},g=function(o){return m===""&&(m=u(o)),m&&(o[m]=!0),o},c=function(o){return m===""&&(m=u(o)),m&&(o[m]=!1),o},s=function(o){return m!==null?o[m]:null};return{disable:c,enable:g,getPrefix:u,isEnabled:s}};r.exports=e()},59271:r=>{var m=function(e,u){return u===void 0&&(u="none"),e.style.msTouchAction=u,e.style["ms-touch-action"]=u,e.style["touch-action"]=u,e};r.exports=m},36505:r=>{var m=function(e,u){u===void 0&&(u="none");var g=["-webkit-","-khtml-","-moz-","-ms-",""];return g.forEach(function(c){e.style[c+"user-select"]=u}),e.style["-webkit-touch-callout"]=u,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};r.exports=m},23514:(r,m,e)=>{r.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}},27119:(r,m,e)=>{var u=e(56694),g=e(22946),c=e(5657),s=e(24650),o=e(68033),a=new u({initialize:function(p,h,f,v){p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(p,h,f,v)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(l,p,h,f,v){return f===void 0&&(f=255),v===void 0&&(v=!0),this._locked=!0,this.red=l,this.green=p,this.blue=h,this.alpha=f,this._locked=!1,this.update(v)},setGLTo:function(l,p,h,f){return f===void 0&&(f=1),this._locked=!0,this.redGL=l,this.greenGL=p,this.blueGL=h,this.alphaGL=f,this._locked=!1,this.update(!0)},setFromRGB:function(l){return this._locked=!0,this.red=l.r,this.green=l.g,this.blue=l.b,l.hasOwnProperty("a")&&(this.alpha=l.a),this._locked=!1,this.update(!0)},setFromHSV:function(l,p,h){return s(l,p,h,this)},update:function(l){if(l===void 0&&(l=!1),this._locked)return this;var p=this.r,h=this.g,f=this.b,v=this.a;return this._color=g(p,h,f),this._color32=c(p,h,f,v),this._rgba="rgba("+p+","+h+","+f+","+v/255+")",l&&o(p,h,f,this),this},updateHSV:function(){var l=this.r,p=this.g,h=this.b;return o(l,p,h,this),this},clone:function(){return new a(this.r,this.g,this.b,this.a)},gray:function(l){return this.setTo(l,l,l)},random:function(l,p){l===void 0&&(l=0),p===void 0&&(p=255);var h=Math.floor(l+Math.random()*(p-l)),f=Math.floor(l+Math.random()*(p-l)),v=Math.floor(l+Math.random()*(p-l));return this.setTo(h,f,v)},randomGray:function(l,p){l===void 0&&(l=0),p===void 0&&(p=255);var h=Math.floor(l+Math.random()*(p-l));return this.setTo(h,h,h)},saturate:function(l){return this.s+=l/100,this},desaturate:function(l){return this.s-=l/100,this},lighten:function(l){return this.v+=l/100,this},darken:function(l){return this.v-=l/100,this},brighten:function(l){var p=this.r,h=this.g,f=this.b;return p=Math.max(0,Math.min(255,p-Math.round(255*-(l/100)))),h=Math.max(0,Math.min(255,h-Math.round(255*-(l/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(l/100)))),this.setTo(p,h,f)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(l){this.gl[0]=Math.min(Math.abs(l),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(l){this.gl[1]=Math.min(Math.abs(l),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(l){this.gl[2]=Math.min(Math.abs(l),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(l){this.gl[3]=Math.min(Math.abs(l),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(l){l=Math.floor(Math.abs(l)),this.r=Math.min(l,255),this.gl[0]=l/255,this.update(!0)}},green:{get:function(){return this.g},set:function(l){l=Math.floor(Math.abs(l)),this.g=Math.min(l,255),this.gl[1]=l/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(l){l=Math.floor(Math.abs(l)),this.b=Math.min(l,255),this.gl[2]=l/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(l){l=Math.floor(Math.abs(l)),this.a=Math.min(l,255),this.gl[3]=l/255,this.update()}},h:{get:function(){return this._h},set:function(l){this._h=l,s(l,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(l){this._s=l,s(this._h,l,this._v,this)}},v:{get:function(){return this._v},set:function(l){this._v=l,s(this._h,this._s,l,this)}}});r.exports=a},30245:(r,m,e)=>{var u=e(22946),g=function(c){c===void 0&&(c=1024);var s=[],o=255,a,l=255,p=0,h=0;for(a=0;a<=o;a++)s.push({r:l,g:a,b:h,color:u(l,a,h)});for(p=255,a=o;a>=0;a--)s.push({r:a,g:p,b:h,color:u(a,p,h)});for(l=0,a=0;a<=o;a++,p--)s.push({r:l,g:p,b:a,color:u(l,p,a)});for(p=0,h=255,a=0;a<=o;a++,h--,l++)s.push({r:l,g:p,b:h,color:u(l,p,h)});if(c===1024)return s;var f=[],v=0,y=1024/c;for(a=0;a<c;a++)f.push(s[Math.floor(v)]),v+=y;return f};r.exports=g},86672:r=>{var m=function(e){var u={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(u.a=e>>>24),u};r.exports=m},25409:r=>{var m=function(e){var u=e.toString(16);return u.length===1?"0"+u:u};r.exports=m},22946:r=>{var m=function(e,u,g){return e<<16|u<<8|g};r.exports=m},5657:r=>{var m=function(e,u,g,c){return c<<24|e<<16|u<<8|g};r.exports=m},74777:(r,m,e)=>{var u=e(27119),g=e(59998),c=function(s,o,a){var l=a,p=a,h=a;if(o!==0){var f=a<.5?a*(1+o):a+o-a*o,v=2*a-f;l=g(v,f,s+1/3),p=g(v,f,s),h=g(v,f,s-1/3)}var y=new u;return y.setGLTo(l,p,h,1)};r.exports=c},89263:(r,m,e)=>{var u=e(24650),g=function(c,s){c===void 0&&(c=1),s===void 0&&(s=1);for(var o=[],a=0;a<=359;a++)o.push(u(a/359,c,s));return o};r.exports=g},24650:(r,m,e)=>{var u=e(22946);function g(s,o,a,l){var p=(s+o*6)%6,h=Math.min(p,4-p,1);return Math.round(255*(l-l*a*Math.max(0,h)))}var c=function(s,o,a,l){o===void 0&&(o=1),a===void 0&&(a=1);var p=g(5,s,o,a),h=g(3,s,o,a),f=g(1,s,o,a);return l?l.setTo?l.setTo(p,h,f,l.alpha,!0):(l.r=p,l.g=h,l.b=f,l.color=u(p,h,f),l):{r:p,g:h,b:f,color:u(p,h,f)}};r.exports=c},91487:(r,m,e)=>{var u=e(27119),g=function(c){var s=new u;c=c.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,f,v,y){return f+f+v+v+y+y});var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(o){var a=parseInt(o[1],16),l=parseInt(o[2],16),p=parseInt(o[3],16);s.setTo(a,l,p)}return s};r.exports=g},59998:r=>{var m=function(e,u,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?e+(u-e)*6*g:g<.5?u:g<.6666666666666666?e+(u-e)*(.6666666666666666-g)*6:e};r.exports=m},74853:(r,m,e)=>{var u=e(27119),g=e(15978),c=function(s){var o=g(s);return new u(o.r,o.g,o.b,o.a)};r.exports=c},15978:r=>{var m=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};r.exports=m},53756:(r,m,e)=>{var u=e(42798),g=function(o,a,l,p,h,f,v,y){v===void 0&&(v=100),y===void 0&&(y=0);var x=y/v;return{r:u(o,p,x),g:u(a,h,x),b:u(l,f,x)}},c=function(o,a,l,p){return l===void 0&&(l=100),p===void 0&&(p=0),g(o.r,o.g,o.b,a.r,a.g,a.b,l,p)},s=function(o,a,l,p,h,f){return h===void 0&&(h=100),f===void 0&&(f=0),g(o.r,o.g,o.b,a,l,p,h,f)};r.exports={RGBWithRGB:g,ColorWithRGB:s,ColorWithColor:c}},73904:(r,m,e)=>{var u=e(27119),g=function(c){return new u(c.r,c.g,c.b,c.a)};r.exports=g},26841:(r,m,e)=>{var u=e(27119),g=function(c){var s=new u,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(c.toLowerCase());if(o){var a=parseInt(o[1],10),l=parseInt(o[2],10),p=parseInt(o[3],10),h=o[4]!==void 0?parseFloat(o[4]):1;s.setTo(a,l,p,h*255)}return s};r.exports=g},68033:r=>{var m=function(e,u,g,c){c===void 0&&(c={h:0,s:0,v:0}),e/=255,u/=255,g/=255;var s=Math.min(e,u,g),o=Math.max(e,u,g),a=o-s,l=0,p=o===0?0:a/o,h=o;return o!==s&&(o===e?l=(u-g)/a+(u<g?6:0):o===u?l=(g-e)/a+2:o===g&&(l=(e-u)/a+4),l/=6),c.hasOwnProperty("_h")?(c._h=l,c._s=p,c._v=h):(c.h=l,c.s=p,c.v=h),c};r.exports=m},4880:(r,m,e)=>{var u=e(25409),g=function(c,s,o,a,l){return a===void 0&&(a=255),l===void 0&&(l="#"),l==="#"?"#"+((1<<24)+(c<<16)+(s<<8)+o).toString(16).slice(1,7):"0x"+u(a)+u(c)+u(s)+u(o)};r.exports=g},37243:(r,m,e)=>{var u=e(17489),g=e(27119),c=function(s,o){return s===void 0&&(s=0),o===void 0&&(o=255),new g(u(s,o),u(s,o),u(s,o))};r.exports=c},93222:(r,m,e)=>{var u=e(91487),g=e(74853),c=e(73904),s=e(26841),o=function(a){var l=typeof a;switch(l){case"string":return a.substr(0,3).toLowerCase()==="rgb"?s(a):u(a);case"number":return g(a);case"object":return c(a)}};r.exports=o},95509:(r,m,e)=>{var u=e(27119);u.ColorSpectrum=e(30245),u.ColorToRGBA=e(86672),u.ComponentToHex=e(25409),u.GetColor=e(22946),u.GetColor32=e(5657),u.HexStringToColor=e(91487),u.HSLToColor=e(74777),u.HSVColorWheel=e(89263),u.HSVToRGB=e(24650),u.HueToComponent=e(59998),u.IntegerToColor=e(74853),u.IntegerToRGB=e(15978),u.Interpolate=e(53756),u.ObjectToColor=e(73904),u.RandomRGB=e(37243),u.RGBStringToColor=e(26841),u.RGBToHSV=e(68033),u.RGBToString=e(4880),u.ValueToColor=e(93222),r.exports=u},24816:(r,m,e)=>{r.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}},76756:(r,m,e)=>{var u=e(56694),g=e(61286),c=new u({initialize:function(o,a,l,p,h,f){a||(a=o.sys.make.image({x:l,y:p,key:h,frame:f,add:!1})),this.bitmapMask=a,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(s){this.bitmapMask=s},preRenderWebGL:function(s,o,a){s.pipelines.BITMAPMASK_PIPELINE.beginMask(this,o,a)},postRenderWebGL:function(s,o,a){s.pipelines.BITMAPMASK_PIPELINE.endMask(this,o,a)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});g.register("bitmapMask",function(s,o,a,l,p){return new c(this.scene,s,o,a,l,p)}),r.exports=c},63037:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o){this.geometryMask=o,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(c){return this.geometryMask=c,this},setInvertAlpha:function(c){return c===void 0&&(c=!0),this.invertAlpha=c,this},preRenderWebGL:function(c,s,o){var a=c.gl;c.flush(),c.maskStack.length===0&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),c.maskCount=0),c.currentCameraMask.mask!==this&&(c.currentMask.mask=this),c.maskStack.push({mask:this,camera:o}),this.applyStencil(c,o,!0),c.maskCount++},applyStencil:function(c,s,o){var a=c.gl,l=this.geometryMask,p=c.maskCount,h=255;a.colorMask(!1,!1,!1,!1),o?(a.stencilFunc(a.EQUAL,p,h),a.stencilOp(a.KEEP,a.KEEP,a.INCR),p++):(a.stencilFunc(a.EQUAL,p+1,h),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),this.level=p,l.renderWebGL(c,l,s),c.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),this.invertAlpha?a.stencilFunc(a.NOTEQUAL,p,h):a.stencilFunc(a.EQUAL,p,h)},postRenderWebGL:function(c){var s=c.gl;c.maskStack.pop(),c.maskCount--,c.flush();var o=c.currentMask;if(c.maskStack.length===0)o.mask=null,s.disable(s.STENCIL_TEST);else{var a=c.maskStack[c.maskStack.length-1];a.mask.applyStencil(c,a.camera,!1),c.currentCameraMask.mask!==a.mask?(o.mask=a.mask,o.camera=a.camera):o.mask=null}},preRenderCanvas:function(c,s,o){var a=this.geometryMask;c.currentContext.save(),a.renderCanvas(c,a,o,null,null,!0),c.currentContext.clip()},postRenderCanvas:function(c){c.currentContext.restore()},destroy:function(){this.geometryMask=null}});r.exports=g},93310:(r,m,e)=>{r.exports={BitmapMask:e(76756),GeometryMask:e(63037)}},31053:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a,l){(!o||o==="")&&(o=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!a||a==="")&&(a=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),l===void 0&&(l=null),this.key=s,this.fragmentSrc=o,this.vertexSrc=a,this.uniforms=l}});r.exports=g},99584:r=>{var m=function(e,u){var g;if(u)typeof u=="string"?g=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(g=u);else if(e.parentElement||u===null)return e;return g||(g=document.body),g.appendChild(e),e};r.exports=m},85178:(r,m,e)=>{var u=e(99584),g=function(c){var s=c.config;if(!(!s.parent||!s.domCreateContainer)){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+c.scale.width+"px;","height: "+c.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+s.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),c.domContainer=o,u(o,s.parent)}};r.exports=g},21546:(r,m,e)=>{var u=e(36580),g=function(c){if(document.readyState==="complete"||document.readyState==="interactive"){c();return}var s=function(){document.removeEventListener("deviceready",s,!0),document.removeEventListener("DOMContentLoaded",s,!0),window.removeEventListener("load",s,!0),c()};document.body?u.cordova?document.addEventListener("deviceready",s,!1):(document.addEventListener("DOMContentLoaded",s,!0),window.addEventListener("load",s,!0)):window.setTimeout(s,20)};r.exports=g},74181:r=>{var m=function(e){if(!e)return window.innerHeight;var u=Math.abs(window.orientation),g={w:0,h:0},c=document.createElement("div");return c.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(c),g.w=u===90?c.offsetHeight:window.innerWidth,g.h=u===90?window.innerWidth:c.offsetHeight,document.documentElement.removeChild(c),c=null,Math.abs(window.orientation)!==90?g.h:g.w};r.exports=m},9229:(r,m,e)=>{var u=e(55301),g=function(c,s){var o=window.screen,a=o?o.orientation||o.mozOrientation||o.msOrientation:!1;if(a&&typeof a.type=="string")return a.type;if(typeof a=="string")return a;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return u.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return u.ORIENTATION.LANDSCAPE}else return s>c?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE};r.exports=g},2893:r=>{var m=function(e){var u;return e!==""&&(typeof e=="string"?u=document.getElementById(e):e&&e.nodeType===1&&(u=e)),u||(u=document.body),u};r.exports=m},89200:r=>{var m=function(e){var u="";try{if(window.DOMParser){var g=new DOMParser;u=g.parseFromString(e,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(e)}catch{u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};r.exports=m},55638:r=>{var m=function(e){e.parentNode&&e.parentNode.removeChild(e)};r.exports=m},27385:(r,m,e)=>{var u=e(56694),g=e(72283),c=new u({initialize:function(){this.isRunning=!1,this.callback=g,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var o=this;this.step=function a(l){o.callback(l),o.isRunning&&(o.timeOutID=window.requestAnimationFrame(a))},this.stepTimeout=function a(){o.isRunning&&(o.timeOutID=window.setTimeout(a,o.delay)),o.callback(window.performance.now())}},start:function(s,o,a){this.isRunning||(this.callback=s,this.isSetTimeOut=o,this.delay=a,this.isRunning=!0,this.timeOutID=o?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=g}});r.exports=c},3590:(r,m,e)=>{var u={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};r.exports=u},78491:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(91963),s=new u({Extends:g,initialize:function(){g.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});c.register("EventEmitter",s,"events"),r.exports=s},95146:(r,m,e)=>{r.exports={EventEmitter:e(78491)}},20170:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l){l===void 0&&(l=1),g.call(this,c.BARREL,a),this.amount=l}});r.exports=s},51182:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f,v,y){p===void 0&&(p=1),h===void 0&&(h=1),f===void 0&&(f=1),v===void 0&&(v=1),y===void 0&&(y=4),g.call(this,c.BLOOM,a),this.steps=y,this.offsetX=p,this.offsetY=h,this.blurStrength=f,this.strength=v,this.glcolor=[1,1,1],l!=null&&(this.color=l)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var a=this.glcolor;a[0]=(o>>16&255)/255,a[1]=(o>>8&255)/255,a[2]=(o&255)/255}}});r.exports=s},51498:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f,v,y){l===void 0&&(l=0),p===void 0&&(p=2),h===void 0&&(h=2),f===void 0&&(f=1),y===void 0&&(y=4),g.call(this,c.BLUR,a),this.quality=0,this.x=p,this.y=h,this.steps=y,this.strength=f,this.glcolor=[1,1,1],v!=null&&(this.color=v)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var a=this.glcolor;a[0]=(o>>16&255)/255,a[1]=(o>>8&255)/255,a[2]=(o&255)/255}}});r.exports=s},12042:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f,v,y,x){l===void 0&&(l=.5),p===void 0&&(p=1),h===void 0&&(h=.2),f===void 0&&(f=!1),v===void 0&&(v=1),y===void 0&&(y=1),x===void 0&&(x=1),g.call(this,c.BOKEH,a),this.radius=l,this.amount=p,this.contrast=h,this.isTiltShift=f,this.strength=x,this.blurX=v,this.blurY=y}});r.exports=s},69900:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f,v){l===void 0&&(l=8),f===void 0&&(f=1),v===void 0&&(v=.005),g.call(this,c.CIRCLE,a),this.scale=f,this.feather=v,this.thickness=l,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],p!=null&&(this.color=p),h!=null&&(this.backgroundColor=h)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var a=this.glcolor;a[0]=(o>>16&255)/255,a[1]=(o>>8&255)/255,a[2]=(o&255)/255}},backgroundColor:{get:function(){var o=this.glcolor2;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var a=this.glcolor2;a[0]=(o>>16&255)/255,a[1]=(o>>8&255)/255,a[2]=(o&255)/255}}});r.exports=s},48991:(r,m,e)=>{var u=e(56694),g=e(65246),c=e(47406),s=new u({Extends:g,initialize:function(a){g.call(this),this.type=c.COLOR_MATRIX,this.gameObject=a,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});r.exports=s},47551:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o){this.type=s,this.gameObject=o,this.active=!0},setActive:function(c){return this.active=c,this},destroy:function(){this.gameObject=null,this.active=!1}});r.exports=g},47909:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h){l===void 0&&(l="__WHITE"),p===void 0&&(p=.005),h===void 0&&(h=.005),g.call(this,c.DISPLACEMENT,a),this.x=p,this.y=h,this.glTexture,this.setTexture(l)},setTexture:function(o){var a=this.gameObject.scene.sys.textures.getFrame(o);return a&&(this.glTexture=a.glTexture),this}});r.exports=s},18919:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f){p===void 0&&(p=4),h===void 0&&(h=0),f===void 0&&(f=!1),g.call(this,c.GLOW,a),this.outerStrength=p,this.innerStrength=h,this.knockout=f,this.glcolor=[1,1,1,1],l!==void 0&&(this.color=l)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var a=this.glcolor;a[0]=(o>>16&255)/255,a[1]=(o>>8&255)/255,a[2]=(o&255)/255}}});r.exports=s},62494:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f,v,y,x,S){h===void 0&&(h=.2),f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=1),S===void 0&&(S=0),g.call(this,c.GRADIENT,a),this.alpha=h,this.size=S,this.fromX=f,this.fromY=v,this.toX=y,this.toY=x,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],l!=null&&(this.color1=l),p!=null&&(this.color2=p)},color1:{get:function(){var o=this.glcolor1;return(o[0]<<16)+(o[1]<<8)+(o[2]|0)},set:function(o){var a=this.glcolor1;a[0]=o>>16&255,a[1]=o>>8&255,a[2]=o&255}},color2:{get:function(){var o=this.glcolor2;return(o[0]<<16)+(o[1]<<8)+(o[2]|0)},set:function(o){var a=this.glcolor2;a[0]=o>>16&255,a[1]=o>>8&255,a[2]=o&255}}});r.exports=s},68897:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l){l===void 0&&(l=1),g.call(this,c.PIXELATE,a),this.amount=l}});r.exports=s},58575:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f,v,y,x){l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=.1),f===void 0&&(f=1),y===void 0&&(y=6),x===void 0&&(x=1),g.call(this,c.SHADOW,a),this.x=l,this.y=p,this.decay=h,this.power=f,this.glcolor=[0,0,0,1],this.samples=y,this.intensity=x,v!==void 0&&(this.color=v)},color:{get:function(){var o=this.glcolor;return(o[0]*255<<16)+(o[1]*255<<8)+(o[2]*255|0)},set:function(o){var a=this.glcolor;a[0]=(o>>16&255)/255,a[1]=(o>>8&255)/255,a[2]=(o&255)/255}}});r.exports=s},33755:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f){l===void 0&&(l=.5),p===void 0&&(p=.5),h===void 0&&(h=3),f===void 0&&(f=!1),g.call(this,c.SHINE,a),this.speed=l,this.lineWidth=p,this.gradient=h,this.reveal=f}});r.exports=s},24949:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f){l===void 0&&(l=.5),p===void 0&&(p=.5),h===void 0&&(h=.5),f===void 0&&(f=.5),g.call(this,c.VIGNETTE,a),this.x=l,this.y=p,this.radius=h,this.strength=f}});r.exports=s},66241:(r,m,e)=>{var u=e(56694),g=e(47551),c=e(47406),s=new u({Extends:g,initialize:function(a,l,p,h,f){l===void 0&&(l=.1),p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=!1),g.call(this,c.WIPE,a),this.progress=0,this.wipeWidth=l,this.direction=p,this.axis=h,this.reveal=f}});r.exports=s},47406:r=>{var m={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};r.exports=m},96910:(r,m,e)=>{var u=e(98611),g=e(47406),c={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};c=u(!1,c,g),r.exports=c},88933:(r,m,e)=>{var u=e(95723),g=e(20494),c=function(s,o,a){o.x=g(a,"x",0),o.y=g(a,"y",0),o.depth=g(a,"depth",0),o.flipX=g(a,"flipX",!1),o.flipY=g(a,"flipY",!1);var l=g(a,"scale",null);typeof l=="number"?o.setScale(l):l!==null&&(o.scaleX=g(l,"x",1),o.scaleY=g(l,"y",1));var p=g(a,"scrollFactor",null);typeof p=="number"?o.setScrollFactor(p):p!==null&&(o.scrollFactorX=g(p,"x",1),o.scrollFactorY=g(p,"y",1)),o.rotation=g(a,"rotation",0);var h=g(a,"angle",null);h!==null&&(o.angle=h),o.alpha=g(a,"alpha",1);var f=g(a,"origin",null);if(typeof f=="number")o.setOrigin(f);else if(f!==null){var v=g(f,"x",.5),y=g(f,"y",.5);o.setOrigin(v,y)}o.blendMode=g(a,"blendMode",u.NORMAL),o.visible=g(a,"visible",!0);var x=g(a,"add",!0);return x&&s.sys.displayList.add(o),o.preUpdate&&s.sys.updateList.add(o),o};r.exports=c},32291:(r,m,e)=>{var u=e(20494),g=function(c,s){var o=u(s,"anims",null);if(o===null)return c;if(typeof o=="string")c.anims.play(o);else if(typeof o=="object"){var a=c.anims,l=u(o,"key",void 0);if(l){var p=u(o,"startFrame",void 0),h=u(o,"delay",0),f=u(o,"repeat",0),v=u(o,"repeatDelay",0),y=u(o,"yoyo",!1),x=u(o,"play",!1),S=u(o,"delayedPlay",0),E={key:l,delay:h,repeat:f,repeatDelay:v,yoyo:y,startFrame:p};x?a.play(E):S>0?a.playAfterDelay(E,S):a.load(E)}}return c};r.exports=g},91713:(r,m,e)=>{var u=e(56694),g=e(71207),c=e(91963),s=e(56631),o=e(7599),a=e(17922),l=new u({Extends:g,initialize:function(h){g.call(this,h),this.sortChildrenFlag=!1,this.scene=h,this.systems=h.sys,this.events=h.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.events.once(o.DESTROY,this.destroy,this)},addChildCallback:function(p){p.displayList&&p.displayList!==this&&p.removeFromDisplayList(),p.parentContainer&&p.parentContainer.remove(p),p.displayList||(this.queueDepthSort(),p.displayList=this,p.emit(s.ADDED_TO_SCENE,p,this.scene),this.events.emit(o.ADDED_TO_SCENE,p,this.scene))},removeChildCallback:function(p){this.queueDepthSort(),p.displayList=null,p.emit(s.REMOVED_FROM_SCENE,p,this.scene),this.events.emit(o.REMOVED_FROM_SCENE,p,this.scene)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(a(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(p,h){return p._depth-h._depth},getChildren:function(){return this.list},shutdown:function(){for(var p=this.list;p.length;)p[0].destroy(!0);this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});c.register("DisplayList",l,"displayList"),r.exports=l},89980:(r,m,e)=>{var u=e(56694),g=e(48129),c=e(81078),s=e(6659),o=e(56631),a=e(7599),l=new u({Extends:s,initialize:function(h,f){s.call(this),this.scene=h,this.displayList=null,this.type=f,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this),h.sys.queueDepthSort()},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},setState:function(p){return this.state=p,this},setDataEnabled:function(){return this.data||(this.data=new c(this)),this},setData:function(p,h){return this.data||(this.data=new c(this)),this.data.set(p,h),this},incData:function(p,h){return this.data||(this.data=new c(this)),this.data.inc(p,h),this},toggleData:function(p){return this.data||(this.data=new c(this)),this.data.toggle(p),this},getData:function(p){return this.data||(this.data=new c(this)),this.data.get(p)},setInteractive:function(p,h,f){return this.scene.sys.input.enable(this,p,h,f),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return g(this)},willRender:function(p){var h=this.displayList&&this.displayList.active?this.displayList.willRender(p):!0;return!(!h||l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},getIndexList:function(){for(var p=this,h=this.parentContainer,f=[];h&&(f.unshift(h.getIndex(p)),p=h,h.parentContainer);)h=h.parentContainer;return this.displayList?f.unshift(this.displayList.getIndex(p)):f.unshift(this.scene.sys.displayList.getIndex(p)),f},addToDisplayList:function(p){return p===void 0&&(p=this.scene.sys.displayList),this.displayList&&this.displayList!==p&&this.removeFromDisplayList(),p.exists(this)||(this.displayList=p,p.add(this,!0),p.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),p.events.emit(a.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var p=this.displayList||this.scene.sys.displayList;return p&&p.exists(this)&&(p.remove(this,!0),p.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),p.events.emit(a.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(p){!this.scene||this.ignoreDestroy||(p===void 0&&(p=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(o.DESTROY,this,p),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,r.exports=l},99325:(r,m,e)=>{var u=e(56694),g=e(91963),c=e(7599),s=new u({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(o,a){s.prototype.hasOwnProperty(o)||(s.prototype[o]=a)},s.remove=function(o){s.prototype.hasOwnProperty(o)&&delete s.prototype[o]},g.register("GameObjectCreator",s,"make"),r.exports=s},61286:(r,m,e)=>{var u=e(56694),g=e(91963),c=e(7599),s=new u({initialize:function(a){this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},existing:function(o){return(o.renderCanvas||o.renderWebGL)&&this.displayList.add(o),o.preUpdate&&this.updateList.add(o),o},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(o,a){s.prototype.hasOwnProperty(o)||(s.prototype[o]=a)},s.remove=function(o){s.prototype.hasOwnProperty(o)&&delete s.prototype[o]},g.register("GameObjectFactory",s,"add"),r.exports=s},73329:(r,m,e)=>{var u=e(69360),g=new u,c=new u,s=new u,o={camera:g,sprite:c,calc:s},a=function(l,p,h){var f=g,v=c,y=s;return v.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),f.copyFrom(p.matrix),h?(f.multiplyWithOffset(h,-p.scrollX*l.scrollFactorX,-p.scrollY*l.scrollFactorY),v.e=l.x,v.f=l.y):(v.e-=p.scrollX*l.scrollFactorX,v.f-=p.scrollY*l.scrollFactorY),f.multiply(v,y),o};r.exports=a},92034:(r,m,e)=>{var u=e(56694),g=e(74623),c=e(91963),s=e(7599),o=new u({Extends:g,initialize:function(l){g.call(this),this.checkQueue=!0,this.scene=l,this.systems=l.sys,l.sys.events.once(s.BOOT,this.boot,this),l.sys.events.on(s.START,this.start,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var a=this.systems.events;a.on(s.PRE_UPDATE,this.update,this),a.on(s.UPDATE,this.sceneUpdate,this),a.once(s.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(a,l){for(var p=this._active,h=p.length,f=0;f<h;f++){var v=p[f];v.active&&v.preUpdate.call(v,a,l)}},shutdown:function(){for(var a=this._active.length;a--;)this._active[a].destroy(!0);for(a=this._pending.length;a--;)this._pending[a].destroy(!0);for(a=this._destroy.length;a--;)this._destroy[a].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var l=this.systems.events;l.off(s.PRE_UPDATE,this.update,this),l.off(s.UPDATE,this.sceneUpdate,this),l.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});c.register("UpdateList",o,"updateList"),r.exports=o},8810:r=>{var m=function(e,u,g,c,s,o,a,l,p,h,f,v,y,x,S){var E=g.x-u.displayOriginX+s,b=g.y-u.displayOriginY+o,T=E+g.w,P=b+g.h,C=a.getXRound(E,b,l),w=a.getYRound(E,b,l),A=a.getXRound(E,P,l),R=a.getYRound(E,P,l),I=a.getXRound(T,P,l),L=a.getYRound(T,P,l),O=a.getXRound(T,b,l),D=a.getYRound(T,b,l);e.batchQuad(u,C,w,A,R,I,L,O,D,c.u0,c.v0,c.u1,c.v1,p,h,f,v,y,x,S)};r.exports=m},82173:r=>{var m=function(e,u,g,c){if(g===void 0&&(g=!1),c===void 0)return c={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},c;var s=e.text,o=s.length,a=e.maxWidth,l=e.wordWrapCharCode,p=Number.MAX_VALUE,h=Number.MAX_VALUE,f=0,v=0,y=e.fontData.chars,x=e.fontData.lineHeight,S=e.letterSpacing,E=e.lineSpacing,b=0,T=0,P=0,C=null,w=e._align,A=0,R=0,I=e.fontSize/e.fontData.size,L=I*e.scaleX,O=I*e.scaleY,D=null,V=0,B=[],U=Number.MAX_VALUE,W=0,F=0,G=0,M,N=[],k=[],z=null;if(a>0){for(M=0;M<o;M++){if(P=s.charCodeAt(M),P===10){z!==null&&(N.push({word:z.word,i:z.i,x:z.x*L,y:z.y*O,w:z.w*L,h:z.h*O,cr:!0}),z=null),b=0,T+=x+E,D=null;continue}if(C=y[P],!!C){if(D!==null)var H=C.kerning[V];P===l?z!==null&&(N.push({word:z.word,i:z.i,x:z.x*L,y:z.y*O,w:z.w*L,h:z.h*O,cr:!1}),z=null):(z===null&&(z={word:"",i:M,x:b,y:T,w:0,h:x,cr:!1}),z.word=z.word.concat(s[M]),z.w+=C.xOffset+C.xAdvance+(H!==void 0?H:0)),b+=C.xAdvance+S,D=C,V=P}}z!==null&&N.push({word:z.word,i:z.i,x:z.x*L,y:z.y*O,w:z.w*L,h:z.h*O,cr:!1}),b=0,T=0,D=null,V=0;var $,X=0,Y=[];for(M=0;M<N.length;M++){var j=N[M],J=j.x,Q=j.x+j.w;if($){var Z=J-($.x+$.w);X=J-(Z+$.w),$=null}var it=J-X,rt=Q-X;it>a||rt>a?(Y.push(j.i-1),j.cr?(Y.push(j.i+j.word.length),X=0,$=null):$=j):j.cr&&(Y.push(j.i+j.word.length),X=0,$=null)}var ut=function(ae,Me,Ge){return ae.substr(0,Me)+Ge+ae.substr(Me+1)};for(M=Y.length-1;M>=0;M--)s=ut(s,Y[M],`
`);c.wrappedText=s,o=s.length,N=[],z=null}var dt=0;for(M=0;M<o;M++){if(P=s.charCodeAt(M),P===10){z!==null&&(N.push({word:z.word,i:z.i,x:z.x*L,y:z.y*O,w:z.w*L,h:z.h*O}),z=null),b=0,T+=x+E,D=null,B[F]=G,G>W&&(W=G),G<U&&(U=G),F++,G=0;continue}if(C=y[P],!!C){if(A=b,R=T,D!==null){var ct=C.kerning[V];A+=ct!==void 0?ct:0}p>A&&(p=A),h>R&&(h=R);var nt=A+C.xAdvance,ht=R+x;f<nt&&(f=nt),v<ht&&(v=ht);var ot=C.xOffset+C.xAdvance+(ct!==void 0?ct:0);P===l?z!==null&&(N.push({word:z.word,i:z.i,x:z.x*L,y:z.y*O,w:z.w*L,h:z.h*O}),z=null):(z===null&&(z={word:"",i:dt,x:b,y:T,w:0,h:x}),z.word=z.word.concat(s[M]),z.w+=ot),k.push({i:dt,idx:M,char:s[M],code:P,x:(C.xOffset+A)*I,y:(C.yOffset+T)*I,w:C.width*I,h:C.height*I,t:T*I,r:nt*I,b:x*I,line:F,glyph:C}),b+=C.xAdvance+S+(ct!==void 0?ct:0),D=C,V=P,G=nt*I,dt++}}if(z!==null&&N.push({word:z.word,i:z.i,x:z.x*L,y:z.y*O,w:z.w*L,h:z.h*O}),B[F]=G,G>W&&(W=G),G<U&&(U=G),w>0)for(var mt=0;mt<k.length;mt++){var gt=k[mt];if(w===1){var Ft=(W-B[gt.line])/2;gt.x+=Ft,gt.r+=Ft}else if(w===2){var kt=W-B[gt.line];gt.x+=kt,gt.r+=kt}}var Lt=c.local,St=c.global,Yt=c.lines;return Lt.x=p*I,Lt.y=h*I,Lt.width=f*I,Lt.height=v*I,St.x=e.x-e._displayOriginX+p*L,St.y=e.y-e._displayOriginY+h*O,St.width=f*L,St.height=v*O,Yt.shortest=U,Yt.longest=W,Yt.lengths=B,u&&(Lt.x=Math.ceil(Lt.x),Lt.y=Math.ceil(Lt.y),Lt.width=Math.ceil(Lt.width),Lt.height=Math.ceil(Lt.height),St.x=Math.ceil(St.x),St.y=Math.ceil(St.y),St.width=Math.ceil(St.width),St.height=Math.ceil(St.height),Yt.shortest=Math.ceil(U),Yt.longest=Math.ceil(W)),g&&(e._displayOriginX=e.originX*Lt.width,e._displayOriginY=e.originY*Lt.height,St.x=e.x-e._displayOriginX*e.scaleX,St.y=e.y-e._displayOriginY*e.scaleY,u&&(St.x=Math.ceil(St.x),St.y=Math.ceil(St.y))),c.words=N,c.characters=k,c.lines.height=x,c.scale=I,c.scaleX=e.scaleX,c.scaleY=e.scaleY,c};r.exports=m},68298:(r,m,e)=>{var u=e(31476),g=function(c,s,o,a,l,p,h){var f=c.sys.textures.get(o),v=f.get(a),y=c.sys.cache.xml.get(l);if(v&&y){var x=u(y,v,p,h,f);return c.sys.cache.bitmapFont.add(s,{data:x,texture:o,frame:a,fromAtlas:!0}),!0}else return!1};r.exports=g},39860:(r,m,e)=>{var u=e(10850),g=function(c,s){var o=s.width,a=s.height,l=Math.floor(o/2),p=Math.floor(a/2),h=u(s,"chars","");if(h!==""){var f=u(s,"image",""),v=c.sys.textures.getFrame(f),y=v.cutX,x=v.cutY,S=v.source.width,E=v.source.height,b=u(s,"offset.x",0),T=u(s,"offset.y",0),P=u(s,"spacing.x",0),C=u(s,"spacing.y",0),w=u(s,"lineSpacing",0),A=u(s,"charsPerRow",null);A===null&&(A=S/o,A>h.length&&(A=h.length));for(var R=b,I=T,L={retroFont:!0,font:f,size:o,lineHeight:a+w,chars:{}},O=0,D=0;D<h.length;D++){var V=h.charCodeAt(D),B=(y+R)/S,U=(x+I)/E,W=(y+R+o)/S,F=(x+I+a)/E;L.chars[V]={x:R,y:I,width:o,height:a,centerX:l,centerY:p,xOffset:0,yOffset:0,xAdvance:o,data:{},kerning:{},u0:B,v0:U,u1:W,v1:F},O++,O===A?(O=0,R=b,I+=a+C):R+=o+P}var G={data:L,frame:null,texture:f};return G}};r.exports=g},31476:r=>{function m(u,g){return parseInt(u.getAttribute(g),10)}var e=function(u,g,c,s,o){c===void 0&&(c=0),s===void 0&&(s=0);var a=g.cutX,l=g.cutY,p=g.source.width,h=g.source.height,f=g.sourceIndex,v={},y=u.getElementsByTagName("info")[0],x=u.getElementsByTagName("common")[0];v.font=y.getAttribute("face"),v.size=m(y,"size"),v.lineHeight=m(x,"lineHeight")+s,v.chars={};var S=u.getElementsByTagName("char"),E=g!==void 0&&g.trimmed;if(E)var b=g.height,T=g.width;for(var P=0;P<S.length;P++){var C=S[P],w=m(C,"id"),A=String.fromCharCode(w),R=m(C,"x"),I=m(C,"y"),L=m(C,"width"),O=m(C,"height");E&&(R<T&&(T=R),I<b&&(b=I)),E&&b!==0&&T!==0&&(R-=g.x,I-=g.y);var D=(a+R)/p,V=(l+I)/h,B=(a+R+L)/p,U=(l+I+O)/h;if(v.chars[w]={x:R,y:I,width:L,height:O,centerX:Math.floor(L/2),centerY:Math.floor(O/2),xOffset:m(C,"xoffset"),yOffset:m(C,"yoffset"),xAdvance:m(C,"xadvance")+c,data:{},kerning:{},u0:D,v0:V,u1:B,v1:U},o&&L!==0&&O!==0){var W=o.add(A,f,R,I,L,O);W&&W.setUVs(L,O,D,V,B,U)}}var F=u.getElementsByTagName("kerning");for(P=0;P<F.length;P++){var G=F[P],M=m(G,"first"),N=m(G,"second"),k=m(G,"amount");v.chars[N].kerning[M]=k}return v};r.exports=e},55873:(r,m,e)=>{var u=e(66863),g=e(98611),c={Parse:e(39860)};c=g(!1,c,u),r.exports=c},66863:r=>{var m={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};r.exports=m},13468:(r,m,e)=>{var u=e(44616),g=e(56694),c=e(88899),s=new g({Extends:u,Mixins:[c],initialize:function(a,l,p,h,f,v,y){u.call(this,a,l,p,h,f,v,y),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(o,a){return this.cropWidth=o,this.cropHeight=a,this},setDisplayCallback:function(o){return this.displayCallback=o,this},setScrollX:function(o){return this.scrollX=o,this},setScrollY:function(o){return this.scrollY=o,this}});r.exports=s},93438:(r,m,e)=>{var u=e(49584),g=function(c,s,o,a){var l=s._text,p=l.length,h=c.currentContext;if(!(p===0||!u(c,h,s,o,a))){o.addToRenderList(s);var f=s.fromAtlas?s.frame:s.texture.frames.__BASE,v=s.displayCallback,y=s.callbackData,x=s.fontData.chars,S=s.fontData.lineHeight,E=s._letterSpacing,b=0,T=0,P=0,C=null,w=0,A=0,R=0,I=0,L=0,O=0,D=null,V=0,B=s.frame.source.image,U=f.cutX,W=f.cutY,F=0,G=0,M=s._fontSize/s.fontData.size,N=s._align,k=0,z=0;s.getTextBounds(!1);var H=s._bounds.lines;N===1?z=(H.longest-H.lengths[0])/2:N===2&&(z=H.longest-H.lengths[0]),h.translate(-s.displayOriginX,-s.displayOriginY);var $=o.roundPixels;s.cropWidth>0&&s.cropHeight>0&&(h.beginPath(),h.rect(0,0,s.cropWidth,s.cropHeight),h.clip());for(var X=0;X<p;X++){if(G=M,F=0,P=l.charCodeAt(X),P===10){k++,N===1?z=(H.longest-H.lengths[k])/2:N===2&&(z=H.longest-H.lengths[k]),b=0,T+=S,D=null;continue}if(C=x[P],!!C){if(w=U+C.x,A=W+C.y,R=C.width,I=C.height,L=C.xOffset+b-s.scrollX,O=C.yOffset+T-s.scrollY,D!==null){var Y=C.kerning[V];L+=Y!==void 0?Y:0}if(v){y.index=X,y.charCode=P,y.x=L,y.y=O,y.scale=G,y.rotation=F,y.data=C.data;var j=v(y);L=j.x,O=j.y,G=j.scale,F=j.rotation}L*=G,O*=G,L+=z,b+=C.xAdvance+E+(Y!==void 0?Y:0),D=C,V=P,!(R===0||I===0||P===32)&&($&&(L=Math.round(L),O=Math.round(O)),h.save(),h.translate(L,O),h.rotate(F),h.scale(G,G),h.drawImage(B,w,A,R,I,0,0,R,I),h.restore())}}h.restore()}};r.exports=g},67513:(r,m,e)=>{var u=e(13468),g=e(88933),c=e(99325),s=e(20494);c.register("dynamicBitmapText",function(o,a){o===void 0&&(o={});var l=s(o,"font",""),p=s(o,"text",""),h=s(o,"size",!1),f=new u(this.scene,0,0,l,p,h);return a!==void 0&&(o.add=a),g(this.scene,f,o),f})},94145:(r,m,e)=>{var u=e(13468),g=e(61286);g.register("dynamicBitmapText",function(c,s,o,a,l){return this.displayList.add(new u(this.scene,c,s,o,a,l))})},88899:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(16873),c=e(93438),r.exports={renderWebGL:g,renderCanvas:c}},16873:(r,m,e)=>{var u=e(73329),g=e(69360),c=e(75512),s=new g,o=function(a,l,p,h){var f=l.text,v=f.length;if(v!==0){p.addToRenderList(l);var y=a.pipelines.set(l.pipeline,l),x=u(l,p,h);a.pipelines.preBatch(l);var S=x.sprite,E=x.calc,b=s,T=l.cropWidth>0||l.cropHeight>0;T&&(y.flush(),a.pushScissor(E.tx,E.ty,l.cropWidth*E.scaleX,l.cropHeight*E.scaleY));var P=l.frame,C=P.glTexture,w=l.tintFill,A=c.getTintAppendFloatAlpha(l.tintTopLeft,p.alpha*l._alphaTL),R=c.getTintAppendFloatAlpha(l.tintTopRight,p.alpha*l._alphaTR),I=c.getTintAppendFloatAlpha(l.tintBottomLeft,p.alpha*l._alphaBL),L=c.getTintAppendFloatAlpha(l.tintBottomRight,p.alpha*l._alphaBR),O=y.setGameObject(l),D=0,V=0,B=0,U=0,W=l.letterSpacing,F,G=0,M=0,N,k=l.scrollX,z=l.scrollY,H=l.fontData,$=H.chars,X=H.lineHeight,Y=l.fontSize/H.size,j=0,J=l._align,Q=0,Z=0,it=l.getTextBounds(!1);l.maxWidth>0&&(f=it.wrappedText,v=f.length);var rt=l._bounds.lines;J===1?Z=(rt.longest-rt.lengths[0])/2:J===2&&(Z=rt.longest-rt.lengths[0]);for(var ut=p.roundPixels,dt=l.displayCallback,ct=l.callbackData,nt=0;nt<v;nt++){if(B=f.charCodeAt(nt),B===10){Q++,J===1?Z=(rt.longest-rt.lengths[Q])/2:J===2&&(Z=rt.longest-rt.lengths[Q]),D=0,V+=X,N=null;continue}if(F=$[B],!!F){G=F.width,M=F.height;var ht=F.xOffset+D-k,ot=F.yOffset+V-z;if(N!==null){var mt=F.kerning[U];ht+=mt!==void 0?mt:0}if(D+=F.xAdvance+W,N=F,U=B,!(G===0||M===0||B===32)){if(Y=l.fontSize/l.fontData.size,j=0,dt){ct.color=0,ct.tint.topLeft=A,ct.tint.topRight=R,ct.tint.bottomLeft=I,ct.tint.bottomRight=L,ct.index=nt,ct.charCode=B,ct.x=ht,ct.y=ot,ct.scale=Y,ct.rotation=j,ct.data=F.data;var gt=dt(ct);ht=gt.x,ot=gt.y,Y=gt.scale,j=gt.rotation,gt.color?(A=gt.color,R=gt.color,I=gt.color,L=gt.color):(A=gt.tint.topLeft,R=gt.tint.topRight,I=gt.tint.bottomLeft,L=gt.tint.bottomRight),A=c.getTintAppendFloatAlpha(A,p.alpha*l._alphaTL),R=c.getTintAppendFloatAlpha(R,p.alpha*l._alphaTR),I=c.getTintAppendFloatAlpha(I,p.alpha*l._alphaBL),L=c.getTintAppendFloatAlpha(L,p.alpha*l._alphaBR)}ht*=Y,ot*=Y,ht-=l.displayOriginX,ot-=l.displayOriginY,ht+=Z,b.applyITRS(ht,ot,j,Y,Y),E.multiply(b,S);var Ft=F.u0,kt=F.v0,Lt=F.u1,St=F.v1,Yt=G,ae=M,Me=S.e,Ge=S.f,yi=ae*S.c+S.e,Zr=ae*S.d+S.f,Qr=Yt*S.a+ae*S.c+S.e,_r=Yt*S.b+ae*S.d+S.f,qr=Yt*S.a+S.e,ts=Yt*S.b+S.f;ut&&(Me=Math.round(Me),Ge=Math.round(Ge),yi=Math.round(yi),Zr=Math.round(Zr),Qr=Math.round(Qr),_r=Math.round(_r),qr=Math.round(qr),ts=Math.round(ts)),y.batchQuad(l,Me,Ge,yi,Zr,Qr,_r,qr,ts,Ft,kt,Lt,St,A,R,I,L,w,C,O)}}}T&&(y.flush(),a.popScissor()),a.pipelines.postBatch(l)}};r.exports=o},44616:(r,m,e)=>{var u=e(56694),g=e(82897),c=e(64937),s=e(89980),o=e(82173),a=e(68298),l=e(31476),p=e(74118),h=e(84557),f=new u({Extends:s,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Texture,c.Tint,c.Transform,c.Visible,h],initialize:function(y,x,S,E,b,T,P){b===void 0&&(b=""),P===void 0&&(P=0),s.call(this,y,"BitmapText"),this.font=E;var C=this.scene.sys.cache.bitmapFont.get(E);C||console.warn("Invalid BitmapText key: "+E),this.fontData=C.data,this._text="",this._fontSize=T||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=P,this._bounds=o(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=C.fromAtlas,this.setTexture(C.texture,C.frame),this.setPosition(x,S),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(b)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(v){return this._fontSize=v,this._dirty=!0,this},setLetterSpacing:function(v){return v===void 0&&(v=0),this._letterSpacing=v,this._dirty=!0,this},setLineSpacing:function(v){return v===void 0&&(v=0),this.lineSpacing=v,this},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this.text&&(this._text=v.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(v,y,x,S){return v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=0),S===void 0&&(S=.5),this.dropShadowX=v,this.dropShadowY=y,this.dropShadowColor=x,this.dropShadowAlpha=S,this},setCharacterTint:function(v,y,x,S,E,b,T){v===void 0&&(v=0),y===void 0&&(y=1),x===void 0&&(x=!1),S===void 0&&(S=-1),E===void 0&&(E=S,b=S,T=S);var P=this.text.length;y===-1&&(y=P),v<0&&(v=P+v),v=g(v,0,P-1);for(var C=g(v+y,v,P),w=this.charColors,A=v;A<C;A++){var R=w[A];if(S===-1)w[A]=null;else{var I=x?1:0;R?(R.tintEffect=I,R.tintTL=S,R.tintTR=E,R.tintBL=b,R.tintBR=T):w[A]={tintEffect:I,tintTL:S,tintTR:E,tintBL:b,tintBR:T}}}return this},setWordTint:function(v,y,x,S,E,b,T){y===void 0&&(y=1);for(var P=this.getTextBounds(),C=P.words,w=typeof v=="number",A=0,R=0;R<C.length;R++){var I=C[R];if((w&&R===v||!w&&I.word===v)&&(this.setCharacterTint(I.i,I.word.length,x,S,E,b,T),A++,A===y))return this}return this},getTextBounds:function(v){var y=this._bounds;return(this._dirty||v||this.scaleX!==y.scaleX||this.scaleY!==y.scaleY)&&(o(this,v,!0,y),this._dirty=!1),y},getCharacterAt:function(v,y,x){for(var S=this.getLocalPoint(v,y,null,x),E=this.getTextBounds(),b=E.characters,T=new p,P=0;P<b.length;P++){var C=b[P];if(T.setTo(C.x,C.t,C.r-C.x,C.b),T.contains(S.x,S.y))return C}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(v,y,x){if(y===void 0&&(y=this._fontSize),x===void 0&&(x=this._align),v!==this.font){var S=this.scene.sys.cache.bitmapFont.get(v);S&&(this.font=v,this.fontData=S.data,this._fontSize=y,this._align=x,this.fromAtlas=S.fromAtlas===!0,this.setTexture(S.texture,S.frame),o(this,!1,!0,this._bounds))}return this},setMaxWidth:function(v,y){return this._maxWidth=v,this._dirty=!0,y!==void 0&&(this.wordWrapCharCode=y),this},align:{set:function(v){this._align=v,this._dirty=!0},get:function(){return this._align}},text:{set:function(v){this.setText(v)},get:function(){return this._text}},fontSize:{set:function(v){this._fontSize=v,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(v){this._letterSpacing=v,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(v){this._lineSpacing=v,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(v){this._maxWidth=v,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var v=c.ToJSON(this),y={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return v.data=y,v},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=a,f.ParseXMLBitmapFont=l,r.exports=f},97545:(r,m,e)=>{var u=e(49584),g=function(c,s,o,a){var l=s._text,p=l.length,h=c.currentContext;if(!(p===0||!u(c,h,s,o,a))){o.addToRenderList(s);var f=s.fromAtlas?s.frame:s.texture.frames.__BASE,v=s.fontData.chars,y=s.fontData.lineHeight,x=s._letterSpacing,S=s._lineSpacing,E=0,b=0,T=0,P=null,C=0,w=0,A=0,R=0,I=0,L=0,O=null,D=0,V=f.source.image,B=f.cutX,U=f.cutY,W=s._fontSize/s.fontData.size,F=s._align,G=0,M=0,N=s.getTextBounds(!1);s.maxWidth>0&&(l=N.wrappedText,p=l.length);var k=s._bounds.lines;F===1?M=(k.longest-k.lengths[0])/2:F===2&&(M=k.longest-k.lengths[0]),h.translate(-s.displayOriginX,-s.displayOriginY);for(var z=o.roundPixels,H=0;H<p;H++){if(T=l.charCodeAt(H),T===10){G++,F===1?M=(k.longest-k.lengths[G])/2:F===2&&(M=k.longest-k.lengths[G]),E=0,b+=y+S,O=null;continue}if(P=v[T],!!P){if(C=B+P.x,w=U+P.y,A=P.width,R=P.height,I=P.xOffset+E,L=P.yOffset+b,O!==null){var $=P.kerning[D];I+=$!==void 0?$:0}I*=W,L*=W,I+=M,E+=P.xAdvance+x+($!==void 0?$:0),O=P,D=T,!(A===0||R===0||T===32)&&(z&&(I=Math.round(I),L=Math.round(L)),h.save(),h.translate(I,L),h.scale(W,W),h.drawImage(V,C,w,A,R,0,0,A,R),h.restore())}}h.restore()}};r.exports=g},95499:(r,m,e)=>{var u=e(44616),g=e(88933),c=e(99325),s=e(20494),o=e(10850);c.register("bitmapText",function(a,l){a===void 0&&(a={});var p=o(a,"font",""),h=s(a,"text",""),f=s(a,"size",!1),v=o(a,"align",0),y=new u(this.scene,0,0,p,h,f,v);return l!==void 0&&(a.add=l),g(this.scene,y,a),y})},21797:(r,m,e)=>{var u=e(44616),g=e(61286);g.register("bitmapText",function(c,s,o,a,l,p){return this.displayList.add(new u(this.scene,c,s,o,a,l,p))})},84557:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(26372),c=e(97545),r.exports={renderWebGL:g,renderCanvas:c}},26372:(r,m,e)=>{var u=e(8810),g=e(73329),c=e(75512),s=function(o,a,l,p){var h=a._text,f=h.length;if(f!==0){l.addToRenderList(a);var v=o.pipelines.set(a.pipeline,a),y=g(a,l,p).calc;o.pipelines.preBatch(a);var x=l.roundPixels,S=l.alpha,E=a.charColors,b=a.tintFill,T=c.getTintAppendFloatAlpha,P=T(a.tintTopLeft,S*a._alphaTL),C=T(a.tintTopRight,S*a._alphaTR),w=T(a.tintBottomLeft,S*a._alphaBL),A=T(a.tintBottomRight,S*a._alphaBR),R=a.frame.glTexture,I=v.setGameObject(a),L=a.getTextBounds(!1),O,D,V,B=L.characters,U=a.dropShadowX,W=a.dropShadowY,F=U!==0||W!==0;if(F){var G=a.dropShadowColor,M=a.dropShadowAlpha,N=T(G,S*M*a._alphaTL),k=T(G,S*M*a._alphaTR),z=T(G,S*M*a._alphaBL),H=T(G,S*M*a._alphaBR);for(O=0;O<B.length;O++)D=B[O],V=D.glyph,!(D.code===32||V.width===0||V.height===0)&&u(v,a,D,V,U,W,y,x,N,k,z,H,1,R,I)}for(O=0;O<B.length;O++)if(D=B[O],V=D.glyph,!(D.code===32||V.width===0||V.height===0))if(E[D.i]){var $=E[D.i],X=$.tintEffect,Y=T($.tintTL,S*a._alphaTL),j=T($.tintTR,S*a._alphaTR),J=T($.tintBL,S*a._alphaBL),Q=T($.tintBR,S*a._alphaBR);u(v,a,D,V,0,0,y,x,Y,j,J,Q,X,R,I)}else u(v,a,D,V,0,0,y,x,P,C,w,A,b,R,I);o.pipelines.postBatch(a)}};r.exports=s},52816:(r,m,e)=>{var u=e(92246),g=e(41664),c=e(56694),s=e(64937),o=e(82047),a=e(89980),l=e(71207),p=new c({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Size,s.Texture,s.Transform,s.Visible,u],initialize:function(f,v,y,x,S){a.call(this,f,"Blitter"),this.setTexture(x,S),this.setPosition(v,y),this.initPipeline(),this.initPostPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(h,f,v,y,x){y===void 0&&(y=!0),x===void 0&&(x=this.children.length),v===void 0?v=this.frame:v instanceof o||(v=this.texture.get(v));var S=new g(this,h,f,v,y);return this.children.addAt(S,x,!1),this.dirty=!0,S},createFromCallback:function(h,f,v,y){for(var x=this.createMultiple(f,v,y),S=0;S<x.length;S++){var E=x[S];h.call(this,E,S)}return x},createMultiple:function(h,f,v){f===void 0&&(f=this.frame.name),v===void 0&&(v=!0),Array.isArray(f)||(f=[f]);var y=[],x=this;return f.forEach(function(S){for(var E=0;E<h;E++)y.push(x.create(0,0,S,v))}),y},childCanRender:function(h){return h.visible&&h.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});r.exports=p},33177:r=>{var m=function(e,u,g,c){var s=u.getRenderList();if(s.length!==0){var o=e.currentContext,a=g.alpha*u.alpha;if(a!==0){g.addToRenderList(u),o.globalCompositeOperation=e.blendModes[u.blendMode],o.imageSmoothingEnabled=!u.frame.source.scaleMode;var l=u.x-g.scrollX*u.scrollFactorX,p=u.y-g.scrollY*u.scrollFactorY;o.save(),c&&c.copyToContext(o);for(var h=g.roundPixels,f=0;f<s.length;f++){var v=s[f],y=v.flipX||v.flipY,x=v.frame,S=x.canvasData,E=x.x,b=x.y,T=1,P=1,C=v.alpha*a;C!==0&&(o.globalAlpha=C,y?(v.flipX&&(T=-1,E-=S.width),v.flipY&&(P=-1,b-=S.height),S.width>0&&S.height>0&&(o.save(),o.translate(v.x+l,v.y+p),o.scale(T,P),o.drawImage(x.source.image,S.x,S.y,S.width,S.height,E,b,S.width,S.height),o.restore())):(h&&(E=Math.round(E),b=Math.round(b)),S.width>0&&S.height>0&&o.drawImage(x.source.image,S.x,S.y,S.width,S.height,E+v.x+l,b+v.y+p,S.width,S.height)))}o.restore()}}};r.exports=m},68452:(r,m,e)=>{var u=e(52816),g=e(88933),c=e(99325),s=e(20494);c.register("blitter",function(o,a){o===void 0&&(o={});var l=s(o,"key",null),p=s(o,"frame",null),h=new u(this.scene,0,0,l,p);return a!==void 0&&(o.add=a),g(this.scene,h,o),h})},38906:(r,m,e)=>{var u=e(52816),g=e(61286);g.register("blitter",function(c,s,o,a){return this.displayList.add(new u(this.scene,c,s,o,a))})},92246:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(89165),c=e(33177),r.exports={renderWebGL:g,renderCanvas:c}},89165:(r,m,e)=>{var u=e(69360),g=e(75512),c=new u,s=function(o,a,l,p){var h=a.getRenderList(),f=l.alpha*a.alpha;if(!(h.length===0||f===0)){l.addToRenderList(a);var v=o.pipelines.set(this.pipeline,a),y=l.scrollX*a.scrollFactorX,x=l.scrollY*a.scrollFactorY,S=c.copyFrom(l.matrix);p&&(S.multiplyWithOffset(p,-y,-x),y=0,x=0);var E=a.x-y,b=a.y-x,T=-1,P=!1,C=l.roundPixels;o.pipelines.preBatch(a);for(var w=0;w<h.length;w++){var A=h[w],R=A.frame,I=A.alpha*f;if(I!==0){var L=R.width,O=R.height,D=E+A.x+R.x,V=b+A.y+R.y;A.flipX&&(L*=-1,D+=R.width),A.flipY&&(O*=-1,V+=R.height);var B=S.setQuad(D,V,D+L,V+O,C),U=g.getTintAppendFloatAlpha(A.tint,I);if(R.sourceIndex!==T){var W=v.setGameObject(a,R);T=R.sourceIndex}v.batchQuad(a,B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],R.u0,R.v0,R.u1,R.v1,U,U,U,U,P,R.glTexture,W)&&(T=-1)}}o.pipelines.postBatch(a)}};r.exports=s},41664:(r,m,e)=>{var u=e(56694),g=e(82047),c=new u({initialize:function(o,a,l,p,h){this.parent=o,this.x=a,this.y=l,this.frame=p,this.data={},this.tint=16777215,this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(s){return s===void 0?this.frame=this.parent.frame:s instanceof g&&s.texture===this.parent.texture?this.frame=s:this.frame=this.parent.texture.get(s),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(s,o,a){return this.x=s,this.y=o,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,a&&this.setFrame(a),this},setPosition:function(s,o){return this.x=s,this.y=o,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,o){return this.flipX=s,this.flipY=o,this},setVisible:function(s){return this.visible=s,this},setAlpha:function(s){return this.alpha=s,this},setTint:function(s){return this.tint=s,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(s){this.parent.dirty|=this._visible!==s,this._visible=s}},alpha:{get:function(){return this._alpha},set:function(s){this.parent.dirty|=this._alpha>0!=s>0,this._alpha=s}}});r.exports=c},97123:(r,m,e)=>{var u=e(82897),g=2,c={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(s,o,a,l){return s===void 0&&(s=1),o===void 0?this.alpha=s:(this._alphaTL=u(s,0,1),this._alphaTR=u(o,0,1),this._alphaBL=u(a,0,1),this._alphaBR=u(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(s){var o=u(s,0,1);this._alpha=o,this._alphaTL=o,this._alphaTR=o,this._alphaBL=o,this._alphaBR=o,o===0?this.renderFlags&=~g:this.renderFlags|=g}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(s){var o=u(s,0,1);this._alphaTL=o,o!==0&&(this.renderFlags|=g)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(s){var o=u(s,0,1);this._alphaTR=o,o!==0&&(this.renderFlags|=g)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(s){var o=u(s,0,1);this._alphaBL=o,o!==0&&(this.renderFlags|=g)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(s){var o=u(s,0,1);this._alphaBR=o,o!==0&&(this.renderFlags|=g)}}};r.exports=c},15720:(r,m,e)=>{var u=e(82897),g=2,c={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(s){return s===void 0&&(s=1),this.alpha=s,this},alpha:{get:function(){return this._alpha},set:function(s){var o=u(s,0,1);this._alpha=o,o===0?this.renderFlags&=~g:this.renderFlags|=g}}};r.exports=c},69732:(r,m,e)=>{var u=e(95723),g={_blendMode:u.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(c){typeof c=="string"&&(c=u[c]),c|=0,c>=-1&&(this._blendMode=c)}},setBlendMode:function(c){return this.blendMode=c,this}};r.exports=g},28284:r=>{var m={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,u){return this.width=e,this.height=u,this},setDisplaySize:function(e,u){return this.displayWidth=e,this.displayHeight=u,this}};r.exports=m},85293:r=>{var m={texture:null,frame:null,isCropped:!1,setCrop:function(e,u,g,c){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,u,g,c,this.flipX,this.flipY);else{var s=e;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=m},14975:r=>{var m={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};r.exports=m},88677:(r,m,e)=>{var u=e(56694),g=e(96910),c=e(72677),s=new u({initialize:function(a,l){this.gameObject=a,this.isPost=l,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(o){return o===void 0&&(o=0),this.padding=o,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(o){if(!this.isPost){var a=this.gameObject.scene.sys.renderer;a&&a.pipelines?(this.gameObject.pipeline=a.pipelines.FX_PIPELINE,o!==void 0&&(this.padding=o),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var o=this.list,a=0;a<o.length;a++)o[a].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(o){var a;if(this.isPost){var l=this.gameObject.getPostPipeline(String(o.type));for(Array.isArray(l)||(l=[l]),a=0;a<l.length;a++){var p=l[a];if(p.controller===o){this.gameObject.removePostPipeline(p),o.destroy();break}}}else{var h=this.list;for(a=0;a<h.length;a++)h[a]===o&&(c(h,a),o.destroy())}return this.gameObject},disable:function(o){return o===void 0&&(o=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,o&&this.clear(),this.gameObject},add:function(o,a){if(this.isPost){var l=String(o.type);this.gameObject.setPostPipeline(l,a);var p=this.gameObject.getPostPipeline(l);if(p)return Array.isArray(p)&&(p=p.pop()),p.controller=o,o}else return this.enabled||this.enable(),this.list.push(o),o},addGlow:function(o,a,l,p,h,f){return this.add(new g.Glow(this.gameObject,o,a,l,p),{quality:h,distance:f})},addShadow:function(o,a,l,p,h,f,v){return this.add(new g.Shadow(this.gameObject,o,a,l,p,h,f,v))},addPixelate:function(o){return this.add(new g.Pixelate(this.gameObject,o))},addVignette:function(o,a,l,p){return this.add(new g.Vignette(this.gameObject,o,a,l,p))},addShine:function(o,a,l,p){return this.add(new g.Shine(this.gameObject,o,a,l,p))},addBlur:function(o,a,l,p,h,f){return this.add(new g.Blur(this.gameObject,o,a,l,p,h,f))},addGradient:function(o,a,l,p,h,f,v,y){return this.add(new g.Gradient(this.gameObject,o,a,l,p,h,f,v,y))},addBloom:function(o,a,l,p,h,f){return this.add(new g.Bloom(this.gameObject,o,a,l,p,h,f))},addColorMatrix:function(){return this.add(new g.ColorMatrix(this.gameObject))},addCircle:function(o,a,l,p,h){return this.add(new g.Circle(this.gameObject,o,a,l,p,h))},addBarrel:function(o){return this.add(new g.Barrel(this.gameObject,o))},addDisplacement:function(o,a,l){return this.add(new g.Displacement(this.gameObject,o,a,l))},addWipe:function(o,a,l){return this.add(new g.Wipe(this.gameObject,o,a,l))},addReveal:function(o,a,l){return this.add(new g.Wipe(this.gameObject,o,a,l,!0))},addBokeh:function(o,a,l){return this.add(new g.Bokeh(this.gameObject,o,a,l))},addTiltShift:function(o,a,l,p,h,f){return this.add(new g.Bokeh(this.gameObject,o,a,l,!0,p,h,f))},destroy:function(){this.clear(),this.gameObject=null}});r.exports=s},92972:r=>{var m={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,u){return this.flipX=e,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};r.exports=m},80693:(r,m,e)=>{var u=e(74118),g=e(2386),c=e(93736),s={prepareBoundsOutput:function(o,a){if(a===void 0&&(a=!1),this.rotation!==0&&g(o,this.x,this.y,this.rotation),a&&this.parentContainer){var l=this.parentContainer.getBoundsTransformMatrix();l.transformPoint(o.x,o.y,o)}return o},getCenter:function(o,a){return o===void 0&&(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,a)},getTopLeft:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,a)},getTopCenter:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,a)},getTopRight:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(o,a)},getLeftCenter:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,a)},getRightCenter:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(o,a)},getBottomLeft:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,a)},getBottomCenter:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,a)},getBottomRight:function(o,a){return o||(o=new c),o.x=this.x-this.displayWidth*this.originX+this.displayWidth,o.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(o,a)},getBounds:function(o){o===void 0&&(o=new u);var a,l,p,h,f,v,y,x;if(this.parentContainer){var S=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(o),S.transformPoint(o.x,o.y,o),a=o.x,l=o.y,this.getTopRight(o),S.transformPoint(o.x,o.y,o),p=o.x,h=o.y,this.getBottomLeft(o),S.transformPoint(o.x,o.y,o),f=o.x,v=o.y,this.getBottomRight(o),S.transformPoint(o.x,o.y,o),y=o.x,x=o.y}else this.getTopLeft(o),a=o.x,l=o.y,this.getTopRight(o),p=o.x,h=o.y,this.getBottomLeft(o),f=o.x,v=o.y,this.getBottomRight(o),y=o.x,x=o.y;return o.x=Math.min(a,p,f,y),o.y=Math.min(l,h,v,x),o.width=Math.max(a,p,f,y)-o.x,o.height=Math.max(l,h,v,x)-o.y,o}};r.exports=s},39171:(r,m,e)=>{var u=e(76756),g=e(63037),c={mask:null,setMask:function(s){return this.mask=s,this},clearMask:function(s){return s===void 0&&(s=!1),s&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(s,o,a,l,p){return s===void 0&&(this.texture||this.shader||this.geom)&&(s=this),new u(this.scene,s,o,a,l,p)},createGeometryMask:function(s){return s===void 0&&(this.type==="Graphics"||this.geom)&&(s=this),new g(this.scene,s)}};r.exports=c},28072:r=>{var m={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,u){return e===void 0&&(e=.5),u===void 0&&(u=e),this.originX=e,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,u){return e===void 0&&(e=0),u===void 0&&(u=e),this.displayOriginX=e,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};r.exports=m},54211:(r,m,e)=>{var u=e(75606),g=e(63130),c=e(10850),s=e(55303),o=e(93736),a={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:s.PLAYING_FORWARD,setPath:function(l,p){p===void 0&&(p=this.pathConfig);var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this.path=l,p&&this.startFollow(p),this},setRotateToPath:function(l,p){return p===void 0&&(p=0),this.rotateToPath=l,this.pathRotationOffset=p,this},isFollowing:function(){var l=this.pathTween;return l&&l.isPlaying()},startFollow:function(l,p){l===void 0&&(l={}),p===void 0&&(p=0);var h=this.pathTween;h&&h.isPlaying()&&h.stop(),typeof l=="number"&&(l={duration:l}),l.from=c(l,"from",0),l.to=c(l,"to",1);var f=g(l,"positionOnPath",!1);this.rotateToPath=g(l,"rotateToPath",!1),this.pathRotationOffset=c(l,"rotationOffset",0);var v=c(l,"startAt",p);if(v&&(l.onStart=function(x){var S=x.data[0];S.progress=v,S.elapsed=S.duration*v;var E=S.ease(S.progress);S.current=S.start+(S.end-S.start)*E,S.setTargetValue()}),this.pathOffset||(this.pathOffset=new o(this.x,this.y)),this.pathVector||(this.pathVector=new o),this.pathDelta||(this.pathDelta=new o),this.pathDelta.reset(),l.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(l),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=s.PLAYING_FORWARD,this.rotateToPath){var y=this.path.getPoint(.1);this.rotation=Math.atan2(y.y-this.y,y.x-this.x)+u(this.pathRotationOffset)}return this.pathConfig=l,this},pauseFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.pause(),this},resumeFollow:function(){var l=this.pathTween;return l&&l.isPaused()&&l.resume(),this},stopFollow:function(){var l=this.pathTween;return l&&l.isPlaying()&&l.stop(),this},pathUpdate:function(){var l=this.pathTween;if(l){var p=l.data[0],h=this.pathDelta,f=this.pathVector;if(h.copy(f).negate(),p.state===s.COMPLETE){this.path.getPoint(p.end,f),h.add(f),f.add(this.pathOffset),this.setPosition(f.x,f.y);return}else if(p.state!==s.PLAYING_FORWARD&&p.state!==s.PLAYING_BACKWARD)return;this.path.getPoint(l.getValue(),f),h.add(f),f.add(this.pathOffset);var v=this.x,y=this.y;this.setPosition(f.x,f.y);var x=this.x-v,S=this.y-y;if(x===0&&S===0)return;if(p.state!==this._prevDirection){this._prevDirection=p.state;return}this.rotateToPath&&(this.rotation=Math.atan2(S,x)+u(this.pathRotationOffset))}}};r.exports=a},58210:(r,m,e)=>{var u=e(28699),g={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(c){this.pipelineData={};var s=this.scene.sys.renderer;if(!s)return!1;var o=s.pipelines;if(o){c===void 0&&(c=o.default);var a=o.get(c);if(a)return this.defaultPipeline=a,this.pipeline=a,!0}return!1},setPipeline:function(c,s,o){var a=this.scene.sys.renderer;if(!a)return this;var l=a.pipelines;if(l){var p=l.get(c);p&&(this.pipeline=p),s&&(this.pipelineData=o?u(s):s)}return this},setPipelineData:function(c,s){var o=this.pipelineData;return s===void 0?delete o[c]:o[c]=s,this},resetPipeline:function(c){return c===void 0&&(c=!1),this.pipeline=this.defaultPipeline,c&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};r.exports=g},44086:(r,m,e)=>{var u=e(28699),g=e(88677),c=e(72677),s={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(o){this.postPipelines=[],this.postPipelineData={},this.postFX=new g(this,!0),o&&(this.preFX=new g(this,!1))},setPostPipeline:function(o,a,l){var p=this.scene.sys.renderer;if(!p)return this;var h=p.pipelines;if(h){Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++){var v=h.getPostPipeline(o[f],this,a);v&&this.postPipelines.push(v)}a&&(this.postPipelineData=l?u(a):a)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(o,a){var l=this.postPipelineData;return a===void 0?delete l[o]:l[o]=a,this},getPostPipeline:function(o){for(var a=typeof o=="string",l=this.postPipelines,p=[],h=0;h<l.length;h++){var f=l[h];(a&&f.name===o||!a&&f instanceof o)&&p.push(f)}return p.length===1?p[0]:p},resetPostPipeline:function(o){o===void 0&&(o=!1);for(var a=this.postPipelines,l=0;l<a.length;l++)a[l].destroy();this.postPipelines=[],this.hasPostPipeline=!1,o&&(this.postPipelineData={})},removePostPipeline:function(o){for(var a=typeof o=="string",l=this.postPipelines,p=l.length-1;p>=0;p--){var h=l[p];(a&&h.name===o||!a&&h===o)&&(h.destroy(),c(l,p))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};r.exports=s},45900:r=>{var m={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,u){return u===void 0&&(u=e),this.scrollFactorX=e,this.scrollFactorY=u,this}};r.exports=m},31654:r=>{var m={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this},setSize:function(e,u){return this.width=e,this.height=u,this},setDisplaySize:function(e,u){return this.displayWidth=e,this.displayHeight=u,this}};r.exports=m},82081:(r,m,e)=>{var u=e(82047),g=8,c={texture:null,frame:null,isCropped:!1,setTexture:function(s,o){return this.texture=this.scene.sys.textures.get(s),this.setFrame(o)},setFrame:function(s,o,a){return o===void 0&&(o=!0),a===void 0&&(a=!0),s instanceof u?(this.texture=this.scene.sys.textures.get(s.texture.key),this.frame=s):this.frame=this.texture.get(s),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&o&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};r.exports=c},21850:(r,m,e)=>{var u=e(82047),g=8,c={texture:null,frame:null,isCropped:!1,setCrop:function(s,o,a,l){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,o,a,l,this.flipX,this.flipY);else{var p=s;this.frame.setCropUVs(this._crop,p.x,p.y,p.width,p.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(s,o){return this.texture=this.scene.sys.textures.get(s),this.setFrame(o)},setFrame:function(s,o,a){return o===void 0&&(o=!0),a===void 0&&(a=!0),s instanceof u?(this.texture=this.scene.sys.textures.get(s.texture.key),this.frame=s):this.frame=this.texture.get(s),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&o&&this.setSizeToFrame(),this._originComponent&&a&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=c},58072:r=>{var m={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,u,g,c){return e===void 0&&(e=16777215),u===void 0&&(u=e,g=e,c=e),this.tintTopLeft=e,this.tintTopRight=u,this.tintBottomLeft=g,this.tintBottomRight=c,this.tintFill=!1,this},setTintFill:function(e,u,g,c){return this.setTint(e,u,g,c),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};r.exports=m},48129:r=>{var m=function(e){var u={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(u.textureKey=e.texture.key,u.frameKey=e.frame.name),u};r.exports=m},56584:(r,m,e)=>{var u=e(83392),g=e(69360),c=e(64462),s=e(35786),o=e(62138),a=e(93736),l=4,p={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(h){this._scaleX=h,this._scaleY=h,h===0?this.renderFlags&=~l:this.renderFlags|=l}},scaleX:{get:function(){return this._scaleX},set:function(h){this._scaleX=h,h===0?this.renderFlags&=~l:this._scaleY!==0&&(this.renderFlags|=l)}},scaleY:{get:function(){return this._scaleY},set:function(h){this._scaleY=h,h===0?this.renderFlags&=~l:this._scaleX!==0&&(this.renderFlags|=l)}},angle:{get:function(){return o(this._rotation*u.RAD_TO_DEG)},set:function(h){this.rotation=o(h)*u.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=s(h)}},setPosition:function(h,f,v,y){return h===void 0&&(h=0),f===void 0&&(f=h),v===void 0&&(v=0),y===void 0&&(y=0),this.x=h,this.y=f,this.z=v,this.w=y,this},copyPosition:function(h){return h.x!==void 0&&(this.x=h.x),h.y!==void 0&&(this.y=h.y),h.z!==void 0&&(this.z=h.z),h.w!==void 0&&(this.w=h.w),this},setRandomPosition:function(h,f,v,y){return h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=this.scene.sys.scale.width),y===void 0&&(y=this.scene.sys.scale.height),this.x=h+Math.random()*v,this.y=f+Math.random()*y,this},setRotation:function(h){return h===void 0&&(h=0),this.rotation=h,this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,this},setScale:function(h,f){return h===void 0&&(h=1),f===void 0&&(f=h),this.scaleX=h,this.scaleY=f,this},setX:function(h){return h===void 0&&(h=0),this.x=h,this},setY:function(h){return h===void 0&&(h=0),this.y=h,this},setZ:function(h){return h===void 0&&(h=0),this.z=h,this},setW:function(h){return h===void 0&&(h=0),this.w=h,this},getLocalTransformMatrix:function(h){return h===void 0&&(h=new g),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(h,f){h===void 0&&(h=new g);var v=this.parentContainer;if(!v)return this.getLocalTransformMatrix(h);for(f||(f=new g),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);v;)f.applyITRS(v.x,v.y,v._rotation,v._scaleX,v._scaleY),f.multiply(h,h),v=v.parentContainer;return h},getLocalPoint:function(h,f,v,y){v||(v=new a),y||(y=this.scene.sys.cameras.main);var x=y.scrollX,S=y.scrollY,E=h+x*this.scrollFactorX-x,b=f+S*this.scrollFactorY-S;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(E,b,v):c(E,b,this.x,this.y,this.rotation,this.scaleX,this.scaleY,v),this._originComponent&&(v.x+=this._displayOriginX,v.y+=this._displayOriginY),v},getParentRotation:function(){for(var h=0,f=this.parentContainer;f;)h+=f.rotation,f=f.parentContainer;return h}};r.exports=p},69360:(r,m,e)=>{var u=e(56694),g=e(83392),c=e(93736),s=new u({initialize:function(a,l,p,h,f,v){a===void 0&&(a=1),l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=1),f===void 0&&(f=0),v===void 0&&(v=0),this.matrix=new Float32Array([a,l,p,h,f,v,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(o){this.matrix[0]=o}},b:{get:function(){return this.matrix[1]},set:function(o){this.matrix[1]=o}},c:{get:function(){return this.matrix[2]},set:function(o){this.matrix[2]=o}},d:{get:function(){return this.matrix[3]},set:function(o){this.matrix[3]=o}},e:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},f:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},tx:{get:function(){return this.matrix[4]},set:function(o){this.matrix[4]=o}},ty:{get:function(){return this.matrix[5]},set:function(o){this.matrix[5]=o}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var o=this.matrix,a=o[0],l=o[1],p=o[2],h=o[3];return a||l?l>0?Math.acos(a/this.scaleX):-Math.acos(a/this.scaleX):p||h?g.TAU-(h>0?Math.acos(-p/this.scaleY):-Math.acos(p/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var o=this.matrix;return o[0]=1,o[1]=0,o[2]=0,o[3]=1,o[4]=0,o[5]=0,this},translate:function(o,a){var l=this.matrix;return l[4]=l[0]*o+l[2]*a+l[4],l[5]=l[1]*o+l[3]*a+l[5],this},scale:function(o,a){var l=this.matrix;return l[0]*=o,l[1]*=o,l[2]*=a,l[3]*=a,this},rotate:function(o){var a=Math.sin(o),l=Math.cos(o),p=this.matrix,h=p[0],f=p[1],v=p[2],y=p[3];return p[0]=h*l+v*a,p[1]=f*l+y*a,p[2]=h*-a+v*l,p[3]=f*-a+y*l,this},multiply:function(o,a){var l=this.matrix,p=o.matrix,h=l[0],f=l[1],v=l[2],y=l[3],x=l[4],S=l[5],E=p[0],b=p[1],T=p[2],P=p[3],C=p[4],w=p[5],A=a===void 0?l:a.matrix;return A[0]=E*h+b*v,A[1]=E*f+b*y,A[2]=T*h+P*v,A[3]=T*f+P*y,A[4]=C*h+w*v+x,A[5]=C*f+w*y+S,A},multiplyWithOffset:function(o,a,l){var p=this.matrix,h=o.matrix,f=p[0],v=p[1],y=p[2],x=p[3],S=p[4],E=p[5],b=a*f+l*y+S,T=a*v+l*x+E,P=h[0],C=h[1],w=h[2],A=h[3],R=h[4],I=h[5];return p[0]=P*f+C*y,p[1]=P*v+C*x,p[2]=w*f+A*y,p[3]=w*v+A*x,p[4]=R*f+I*y+b,p[5]=R*v+I*x+T,this},transform:function(o,a,l,p,h,f){var v=this.matrix,y=v[0],x=v[1],S=v[2],E=v[3],b=v[4],T=v[5];return v[0]=o*y+a*S,v[1]=o*x+a*E,v[2]=l*y+p*S,v[3]=l*x+p*E,v[4]=h*y+f*S+b,v[5]=h*x+f*E+T,this},transformPoint:function(o,a,l){l===void 0&&(l={x:0,y:0});var p=this.matrix,h=p[0],f=p[1],v=p[2],y=p[3],x=p[4],S=p[5];return l.x=o*h+a*v+x,l.y=o*f+a*y+S,l},invert:function(){var o=this.matrix,a=o[0],l=o[1],p=o[2],h=o[3],f=o[4],v=o[5],y=a*h-l*p;return o[0]=h/y,o[1]=-l/y,o[2]=-p/y,o[3]=a/y,o[4]=(p*v-h*f)/y,o[5]=-(a*v-l*f)/y,this},copyFrom:function(o){var a=this.matrix;return a[0]=o.a,a[1]=o.b,a[2]=o.c,a[3]=o.d,a[4]=o.e,a[5]=o.f,this},copyFromArray:function(o){var a=this.matrix;return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],this},copyToContext:function(o){var a=this.matrix;return o.transform(a[0],a[1],a[2],a[3],a[4],a[5]),o},setToContext:function(o){var a=this.matrix;return o.setTransform(a[0],a[1],a[2],a[3],a[4],a[5]),o},copyToArray:function(o){var a=this.matrix;return o===void 0?o=[a[0],a[1],a[2],a[3],a[4],a[5]]:(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5]),o},setTransform:function(o,a,l,p,h,f){var v=this.matrix;return v[0]=o,v[1]=a,v[2]=l,v[3]=p,v[4]=h,v[5]=f,this},decomposeMatrix:function(){var o=this.decomposedMatrix,a=this.matrix,l=a[0],p=a[1],h=a[2],f=a[3],v=l*f-p*h;if(o.translateX=a[4],o.translateY=a[5],l||p){var y=Math.sqrt(l*l+p*p);o.rotation=p>0?Math.acos(l/y):-Math.acos(l/y),o.scaleX=y,o.scaleY=v/y}else if(h||f){var x=Math.sqrt(h*h+f*f);o.rotation=Math.PI*.5-(f>0?Math.acos(-h/x):-Math.acos(h/x)),o.scaleX=v/x,o.scaleY=x}else o.rotation=0,o.scaleX=0,o.scaleY=0;return o},applyITRS:function(o,a,l,p,h){var f=this.matrix,v=Math.sin(l),y=Math.cos(l);return f[4]=o,f[5]=a,f[0]=y*p,f[1]=v*p,f[2]=-v*h,f[3]=y*h,this},applyInverse:function(o,a,l){l===void 0&&(l=new c);var p=this.matrix,h=p[0],f=p[1],v=p[2],y=p[3],x=p[4],S=p[5],E=1/(h*y+v*-f);return l.x=y*E*o+-v*E*a+(S*v-x*y)*E,l.y=h*E*a+-f*E*o+(-S*h+x*f)*E,l},setQuad:function(o,a,l,p,h,f){f===void 0&&(f=this.quad);var v=this.matrix,y=v[0],x=v[1],S=v[2],E=v[3],b=v[4],T=v[5];return f[0]=o*y+a*S+b,f[1]=o*x+a*E+T,f[2]=o*y+p*S+b,f[3]=o*x+p*E+T,f[4]=l*y+p*S+b,f[5]=l*x+p*E+T,f[6]=l*y+a*S+b,f[7]=l*x+a*E+T,h&&f.forEach(function(P,C){f[C]=Math.round(P)}),f},getX:function(o,a){return o*this.a+a*this.c+this.e},getY:function(o,a){return o*this.b+a*this.d+this.f},getXRound:function(o,a,l){var p=this.getX(o,a);return l&&(p=Math.round(p)),p},getYRound:function(o,a,l){var p=this.getY(o,a);return l&&(p=Math.round(p)),p},getCSSMatrix:function(){var o=this.matrix;return"matrix("+o[0]+","+o[1]+","+o[2]+","+o[3]+","+o[4]+","+o[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});r.exports=s},59694:r=>{var m=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=m):(this._visible=!1,this.renderFlags&=~m)}},setVisible:function(u){return this.visible=u,this}};r.exports=e},64937:(r,m,e)=>{r.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}},70339:(r,m,e)=>{var u=e(59959),g=e(95723),c=e(56694),s=e(64937),o=e(56631),a=e(89980),l=e(74118),p=e(98524),h=e(58795),f=e(93736),v=new c({Extends:a,Mixins:[s.AlphaSingle,s.BlendMode,s.ComputedSize,s.Depth,s.Mask,s.PostPipeline,s.Transform,s.Visible,p],initialize:function(x,S,E,b){a.call(this,x,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new s.TransformMatrix,this.tempTransformMatrix=new s.TransformMatrix,this._sortKey="",this._sysEvents=x.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(S,E),this.setBlendMode(g.SKIP_CHECK),b&&this.add(b)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(y){return y===void 0&&(y=!0),this.exclusive=y,this},getBounds:function(y){if(y===void 0&&(y=new l),y.setTo(this.x,this.y,0,0),this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix(),S=x.transformPoint(this.x,this.y);y.setTo(S.x,S.y,0,0)}if(this.list.length>0){var E=this.list,b=new l,T=!1;y.setEmpty();for(var P=0;P<E.length;P++){var C=E[P];C.getBounds&&(C.getBounds(b),T?h(b,y,y):(y.setTo(b.x,b.y,b.width,b.height),T=!0))}}return y},addHandler:function(y){y.once(o.DESTROY,this.remove,this),this.exclusive&&(y.parentContainer&&y.parentContainer.remove(y),y.parentContainer=this,y.removeFromDisplayList(),y.addedToScene())},removeHandler:function(y){y.off(o.DESTROY,this.remove,this),this.exclusive&&(y.parentContainer=null,y.removedFromScene(),y.addToDisplayList())},pointToContainer:function(y,x){x===void 0&&(x=new f),this.parentContainer?this.parentContainer.pointToContainer(y,x):(x.x=y.x,x.y=y.y);var S=this.tempTransformMatrix;return S.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),S.invert(),S.transformPoint(y.x,y.y,x),x},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(y){return u.Add(this.list,y,this.maxSize,this.addHandler,this),this},addAt:function(y,x){return u.AddAt(this.list,y,x,this.maxSize,this.addHandler,this),this},getAt:function(y){return this.list[y]},getIndex:function(y){return this.list.indexOf(y)},sort:function(y,x){return y?(x===void 0&&(x=function(S,E){return S[y]-E[y]}),u.StableSort(this.list,x),this):this},getByName:function(y){return u.GetFirst(this.list,"name",y)},getRandom:function(y,x){return u.GetRandom(this.list,y,x)},getFirst:function(y,x,S,E){return u.GetFirst(this.list,y,x,S,E)},getAll:function(y,x,S,E){return u.GetAll(this.list,y,x,S,E)},count:function(y,x,S,E){return u.CountAllMatching(this.list,y,x,S,E)},swap:function(y,x){return u.Swap(this.list,y,x),this},moveTo:function(y,x){return u.MoveTo(this.list,y,x),this},moveAbove:function(y,x){return u.MoveAbove(this.list,y,x),this},moveBelow:function(y,x){return u.MoveBelow(this.list,y,x),this},remove:function(y,x){var S=u.Remove(this.list,y,this.removeHandler,this);if(x&&S){Array.isArray(S)||(S=[S]);for(var E=0;E<S.length;E++)S[E].destroy()}return this},removeAt:function(y,x){var S=u.RemoveAt(this.list,y,this.removeHandler,this);return x&&S&&S.destroy(),this},removeBetween:function(y,x,S){var E=u.RemoveBetween(this.list,y,x,this.removeHandler,this);if(S)for(var b=0;b<E.length;b++)E[b].destroy();return this},removeAll:function(y){var x=this.list;if(y){for(var S=0;S<x.length;S++)x[S]&&x[S].scene&&(x[S].off(o.DESTROY,this.remove,this),x[S].destroy());this.list=[]}else u.RemoveBetween(x,0,x.length,this.removeHandler,this);return this},bringToTop:function(y){return u.BringToTop(this.list,y),this},sendToBack:function(y){return u.SendToBack(this.list,y),this},moveUp:function(y){return u.MoveUp(this.list,y),this},moveDown:function(y){return u.MoveDown(this.list,y),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(y,x,S){var E=u.Replace(this.list,y,x);return E&&(this.addHandler(x),this.removeHandler(y),S&&y.destroy()),this},exists:function(y){return this.list.indexOf(y)>-1},setAll:function(y,x,S,E){return u.SetAll(this.list,y,x,S,E),this},each:function(y,x){var S=[null],E,b=this.list.slice(),T=b.length;for(E=2;E<arguments.length;E++)S.push(arguments[E]);for(E=0;E<T;E++)S[0]=b[E],y.apply(x,S);return this},iterate:function(y,x){var S=[null],E;for(E=2;E<arguments.length;E++)S.push(arguments[E]);for(E=0;E<this.list.length;E++)S[0]=this.list[E],y.apply(x,S);return this},setScrollFactor:function(y,x,S){return x===void 0&&(x=y),S===void 0&&(S=!1),this.scrollFactorX=y,this.scrollFactorY=x,S&&(u.SetAll(this.list,"scrollFactorX",y),u.SetAll(this.list,"scrollFactorY",x)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});r.exports=v},13916:r=>{var m=function(e,u,g,c){g.addToRenderList(u);var s=u.list;if(s.length!==0){var o=u.localTransform;c?(o.loadIdentity(),o.multiply(c),o.translate(u.x,u.y),o.rotate(u.rotation),o.scale(u.scaleX,u.scaleY)):o.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var a=u.blendMode!==-1;a||e.setBlendMode(0);var l=u._alpha,p=u.scrollFactorX,h=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(e,null,g);for(var f=0;f<s.length;f++){var v=s[f];if(v.willRender(g)){var y=v.alpha,x=v.scrollFactorX,S=v.scrollFactorY;!a&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode),v.setScrollFactor(x*p,S*h),v.setAlpha(y*l),v.renderCanvas(e,v,g,o),v.setAlpha(y),v.setScrollFactor(x,S)}}u.mask&&u.mask.postRenderCanvas(e)}};r.exports=m},44516:(r,m,e)=>{var u=e(88933),g=e(70339),c=e(99325),s=e(20494);c.register("container",function(o,a){o===void 0&&(o={});var l=s(o,"x",0),p=s(o,"y",0),h=s(o,"children",null),f=new g(this.scene,l,p,h);return a!==void 0&&(o.add=a),u(this.scene,f,o),f})},23400:(r,m,e)=>{var u=e(70339),g=e(61286);g.register("container",function(c,s,o){return this.displayList.add(new u(this.scene,c,s,o))})},98524:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(36934),c=e(13916),r.exports={renderWebGL:g,renderCanvas:c}},36934:r=>{var m=function(e,u,g,c){g.addToRenderList(u);var s=u.list,o=s.length;if(o!==0){var a=u.localTransform;c?(a.loadIdentity(),a.multiply(c),a.translate(u.x,u.y),a.rotate(u.rotation),a.scale(u.scaleX,u.scaleY)):a.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),e.pipelines.preBatch(u);var l=u.blendMode!==-1;l||e.setBlendMode(0);for(var p=u.alpha,h=u.scrollFactorX,f=u.scrollFactorY,v=0;v<o;v++){var y=s[v];if(y.willRender(g)){var x,S,E,b;if(y.alphaTopLeft!==void 0)x=y.alphaTopLeft,S=y.alphaTopRight,E=y.alphaBottomLeft,b=y.alphaBottomRight;else{var T=y.alpha;x=T,S=T,E=T,b=T}var P=y.scrollFactorX,C=y.scrollFactorY;!l&&y.blendMode!==e.currentBlendMode&&e.setBlendMode(y.blendMode);var w=y.mask;w&&w.preRenderWebGL(e,y,g);var A=y.type;A!==e.currentType&&(e.newType=!0,e.currentType=A),e.nextTypeMatch=v<o-1?s[v+1].type===e.currentType:!1,y.setScrollFactor(P*h,C*f),y.setAlpha(x*p,S*p,E*p,b*p),y.renderWebGL(e,y,g,a,u),y.setAlpha(x,S,E,b),y.setScrollFactor(P,C),w&&w.postRenderWebGL(e,g),e.newType=!1}}e.pipelines.postBatch(u)}};r.exports=m},2452:r=>{r.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(11603),s=e(89980),o=e(42911),a=e(55638),l=e(7599),p=e(51729),h=new u({Extends:s,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Origin,g.ScrollFactor,g.Transform,g.Visible,c],initialize:function(v,y,x,S,E,b){s.call(this,v,"DOMElement"),this.parent=v.sys.game.domContainer,this.cache=v.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new p,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(y,x),typeof S=="string"?S[0]==="#"?this.setElement(S.substr(1),E,b):this.createElement(S,E,b):S&&this.setElement(S,E,b),v.sys.events.on(l.SLEEP,this.handleSceneEvent,this),v.sys.events.on(l.WAKE,this.handleSceneEvent,this),v.sys.events.on(l.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(f){var v=this.node,y=v.style;v&&(y.display=f.settings.visible?"block":"none")},setSkew:function(f,v){return f===void 0&&(f=0),v===void 0&&(v=f),this.skewX=f,this.skewY=v,this},setPerspective:function(f){return this.parent.style.perspective=f+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(f){this.parent.style.perspective=f+"px"}},addListener:function(f){if(this.node){f=f.split(" ");for(var v=0;v<f.length;v++)this.node.addEventListener(f[v],this.handler,!1)}return this},removeListener:function(f){if(this.node){f=f.split(" ");for(var v=0;v<f.length;v++)this.node.removeEventListener(f[v],this.handler)}return this},dispatchNativeEvent:function(f){this.emit(f.type,f)},createElement:function(f,v,y){return this.setElement(document.createElement(f),v,y)},setElement:function(f,v,y){this.removeElement();var x;if(typeof f=="string"?(f[0]==="#"&&(f=f.substr(1)),x=document.getElementById(f)):typeof f=="object"&&f.nodeType===1&&(x=f),!x)return this;if(this.node=x,v&&o(v))for(var S in v)x.style[S]=v[S];else typeof v=="string"&&(x.style=v);return x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent&&this.parent.appendChild(x),y&&(x.innerText=y),this.updateSize()},createFromCache:function(f,v){var y=this.cache.get(f);return y&&this.createFromHTML(y,v),this},createFromHTML:function(f,v){v===void 0&&(v="div"),this.removeElement();var y=document.createElement(v);return this.node=y,y.style.zIndex="0",y.style.display="inline",y.style.position="absolute",y.phaser=this,this.parent&&this.parent.appendChild(y),y.innerHTML=f,this.updateSize()},removeElement:function(){return this.node&&(a(this.node),this.node=null),this},updateSize:function(){var f=this.node,v=f.getBoundingClientRect();return this.width=f.clientWidth,this.height=f.clientHeight,this.displayWidth=v.width||0,this.displayHeight=v.height||0,this},getChildByProperty:function(f,v){if(this.node){for(var y=this.node.querySelectorAll("*"),x=0;x<y.length;x++)if(y[x][f]===v)return y[x]}return null},getChildByID:function(f){return this.getChildByProperty("id",f)},getChildByName:function(f){return this.getChildByProperty("name",f)},setClassName:function(f){return this.node&&(this.node.className=f,this.updateSize()),this},setText:function(f){return this.node&&(this.node.innerText=f,this.updateSize()),this},setHTML:function(f){return this.node&&(this.node.innerHTML=f,this.updateSize()),this},preRender:function(){var f=this.parentContainer,v=this.node;v&&f&&!f.willRender()&&(v.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(l.PRE_RENDER,this.preRender,this)}});r.exports=h},66070:(r,m,e)=>{var u=e(2452),g=e(89980),c=e(69360),s=new c,o=new c,a=new c,l=function(p,h,f,v){if(h.node){var y=h.node.style,x=h.scene.sys.settings;if(!y||!x.visible||g.RENDER_MASK!==h.renderFlags||h.cameraFilter!==0&&h.cameraFilter&f.id||h.parentContainer&&!h.parentContainer.willRender()){y.display="none";return}var S=h.parentContainer,E=f.alpha*h.alpha;S&&(E*=S.alpha);var b=s,T=o,P=a,C=0,w=0,A="0%",R="0%";v?(C=h.width*h.scaleX*h.originX,w=h.height*h.scaleY*h.originY,T.applyITRS(h.x-C,h.y-w,h.rotation,h.scaleX,h.scaleY),b.copyFrom(f.matrix),b.multiplyWithOffset(v,-f.scrollX*h.scrollFactorX,-f.scrollY*h.scrollFactorY),T.e=h.x-C,T.f=h.y-w,b.multiply(T,P)):(C=h.width*h.originX,w=h.height*h.originY,T.applyITRS(h.x-C,h.y-w,h.rotation,h.scaleX,h.scaleY),b.copyFrom(f.matrix),A=100*h.originX+"%",R=100*h.originY+"%",T.e-=f.scrollX*h.scrollFactorX,T.f-=f.scrollY*h.scrollFactorY,b.multiply(T,P)),h.transformOnly||(y.display="block",y.opacity=E,y.zIndex=h._depth,y.pointerEvents=h.pointerEvents,y.mixBlendMode=u[h._blendMode]),y.transform=P.getCSSMatrix()+" skew("+h.skewX+"rad, "+h.skewY+"rad) rotate3d("+h.rotate3d.x+","+h.rotate3d.y+","+h.rotate3d.z+","+h.rotate3d.w+h.rotate3dAngle+")",y.transformOrigin=A+" "+R}};r.exports=l},66788:(r,m,e)=>{var u=e(38943),g=e(61286);g.register("dom",function(c,s,o,a,l){var p=new u(this.scene,c,s,o,a,l);return this.displayList.add(p),p})},11603:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(66070),c=e(66070),r.exports={renderWebGL:g,renderCanvas:c}},65492:r=>{r.exports="addedtoscene"},98398:r=>{r.exports="destroy"},40239:r=>{r.exports="removedfromscene"},17286:r=>{r.exports="complete"},31496:r=>{r.exports="created"},89587:r=>{r.exports="error"},59792:r=>{r.exports="locked"},96342:r=>{r.exports="loop"},6017:r=>{r.exports="playing"},49614:r=>{r.exports="play"},24418:r=>{r.exports="seeked"},87318:r=>{r.exports="seeking"},50009:r=>{r.exports="stalled"},61922:r=>{r.exports="stop"},79501:r=>{r.exports="textureready"},4052:r=>{r.exports="unlocked"},54857:r=>{r.exports="unsupported"},56631:(r,m,e)=>{r.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOCKED:e(59792),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_PLAYING:e(6017),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STALLED:e(50009),VIDEO_STOP:e(61922),VIDEO_TEXTURE:e(79501),VIDEO_UNLOCKED:e(4052),VIDEO_UNSUPPORTED:e(54857)}},39419:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(89980),s=e(79394),o=new u({Extends:c,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.Origin,g.ScrollFactor,g.Size,g.Texture,g.Tint,g.Transform,g.Visible,s],initialize:function(l){c.call(this,l,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});r.exports=o},96699:()=>{},41155:(r,m,e)=>{var u=e(39419),g=e(61286);g.register("extern",function(){var c=new u(this.scene);return this.displayList.add(c),c})},79394:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(81410),c=e(96699),r.exports={renderWebGL:g,renderCanvas:c}},81410:(r,m,e)=>{var u=e(73329),g=function(c,s,o,a){c.pipelines.clear();var l=u(s,o,a).calc;s.render.call(s,c,o,l),c.pipelines.rebind()};r.exports=g},36266:r=>{r.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(r,m,e)=>{var u=e(51052),g=e(56694),c=e(36266),s=e(64937),o=e(95669),a=e(89980),l=e(72632),p=e(10850),h=e(83392),f=e(60898),v=new g({Extends:a,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.PostPipeline,s.Transform,s.Visible,s.ScrollFactor,f],initialize:function(x,S){var E=p(S,"x",0),b=p(S,"y",0);a.call(this,x,"Graphics"),this.setPosition(E,b),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(S)},setDefaultStyles:function(y){return p(y,"lineStyle",null)&&(this.defaultStrokeWidth=p(y,"lineStyle.width",1),this.defaultStrokeColor=p(y,"lineStyle.color",16777215),this.defaultStrokeAlpha=p(y,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),p(y,"fillStyle",null)&&(this.defaultFillColor=p(y,"fillStyle.color",16777215),this.defaultFillAlpha=p(y,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(y,x,S){return S===void 0&&(S=1),this.commandBuffer.push(c.LINE_STYLE,y,x,S),this._lineWidth=y,this},fillStyle:function(y,x){return x===void 0&&(x=1),this.commandBuffer.push(c.FILL_STYLE,y,x),this},fillGradientStyle:function(y,x,S,E,b,T,P,C){return b===void 0&&(b=1),T===void 0&&(T=b),P===void 0&&(P=b),C===void 0&&(C=b),this.commandBuffer.push(c.GRADIENT_FILL_STYLE,b,T,P,C,y,x,S,E),this},lineGradientStyle:function(y,x,S,E,b,T){return T===void 0&&(T=1),this.commandBuffer.push(c.GRADIENT_LINE_STYLE,y,T,x,S,E,b),this},beginPath:function(){return this.commandBuffer.push(c.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(c.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(c.FILL_PATH),this},fill:function(){return this.commandBuffer.push(c.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(c.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(c.STROKE_PATH),this},fillCircleShape:function(y){return this.fillCircle(y.x,y.y,y.radius)},strokeCircleShape:function(y){return this.strokeCircle(y.x,y.y,y.radius)},fillCircle:function(y,x,S){return this.beginPath(),this.arc(y,x,S,0,h.PI2),this.fillPath(),this},strokeCircle:function(y,x,S){return this.beginPath(),this.arc(y,x,S,0,h.PI2),this.strokePath(),this},fillRectShape:function(y){return this.fillRect(y.x,y.y,y.width,y.height)},strokeRectShape:function(y){return this.strokeRect(y.x,y.y,y.width,y.height)},fillRect:function(y,x,S,E){return this.commandBuffer.push(c.FILL_RECT,y,x,S,E),this},strokeRect:function(y,x,S,E){var b=this._lineWidth/2,T=y-b,P=y+b;return this.beginPath(),this.moveTo(y,x),this.lineTo(y,x+E),this.strokePath(),this.beginPath(),this.moveTo(y+S,x),this.lineTo(y+S,x+E),this.strokePath(),this.beginPath(),this.moveTo(T,x),this.lineTo(P+S,x),this.strokePath(),this.beginPath(),this.moveTo(T,x+E),this.lineTo(P+S,x+E),this.strokePath(),this},fillRoundedRect:function(y,x,S,E,b){b===void 0&&(b=20);var T=b,P=b,C=b,w=b;typeof b!="number"&&(T=l(b,"tl",20),P=l(b,"tr",20),C=l(b,"bl",20),w=l(b,"br",20));var A=T>=0,R=P>=0,I=C>=0,L=w>=0;return T=Math.abs(T),P=Math.abs(P),C=Math.abs(C),w=Math.abs(w),this.beginPath(),this.moveTo(y+T,x),this.lineTo(y+S-P,x),R?this.arc(y+S-P,x+P,P,-h.TAU,0):this.arc(y+S,x,P,Math.PI,h.TAU,!0),this.lineTo(y+S,x+E-w),L?this.arc(y+S-w,x+E-w,w,0,h.TAU):this.arc(y+S,x+E,w,-h.TAU,Math.PI,!0),this.lineTo(y+C,x+E),I?this.arc(y+C,x+E-C,C,h.TAU,Math.PI):this.arc(y,x+E,C,0,-h.TAU,!0),this.lineTo(y,x+T),A?this.arc(y+T,x+T,T,-Math.PI,-h.TAU):this.arc(y,x,T,h.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(y,x,S,E,b){b===void 0&&(b=20);var T=b,P=b,C=b,w=b,A=Math.min(S,E)/2;typeof b!="number"&&(T=l(b,"tl",20),P=l(b,"tr",20),C=l(b,"bl",20),w=l(b,"br",20));var R=T>=0,I=P>=0,L=C>=0,O=w>=0;return T=Math.min(Math.abs(T),A),P=Math.min(Math.abs(P),A),C=Math.min(Math.abs(C),A),w=Math.min(Math.abs(w),A),this.beginPath(),this.moveTo(y+T,x),this.lineTo(y+S-P,x),this.moveTo(y+S-P,x),I?this.arc(y+S-P,x+P,P,-h.TAU,0):this.arc(y+S,x,P,Math.PI,h.TAU,!0),this.lineTo(y+S,x+E-w),this.moveTo(y+S,x+E-w),O?this.arc(y+S-w,x+E-w,w,0,h.TAU):this.arc(y+S,x+E,w,-h.TAU,Math.PI,!0),this.lineTo(y+C,x+E),this.moveTo(y+C,x+E),L?this.arc(y+C,x+E-C,C,h.TAU,Math.PI):this.arc(y,x+E,C,0,-h.TAU,!0),this.lineTo(y,x+T),this.moveTo(y,x+T),R?this.arc(y+T,x+T,T,-Math.PI,-h.TAU):this.arc(y,x,T,h.TAU,0,!0),this.strokePath(),this},fillPointShape:function(y,x){return this.fillPoint(y.x,y.y,x)},fillPoint:function(y,x,S){return!S||S<1?S=1:(y-=S/2,x-=S/2),this.commandBuffer.push(c.FILL_RECT,y,x,S,S),this},fillTriangleShape:function(y){return this.fillTriangle(y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)},strokeTriangleShape:function(y){return this.strokeTriangle(y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)},fillTriangle:function(y,x,S,E,b,T){return this.commandBuffer.push(c.FILL_TRIANGLE,y,x,S,E,b,T),this},strokeTriangle:function(y,x,S,E,b,T){return this.commandBuffer.push(c.STROKE_TRIANGLE,y,x,S,E,b,T),this},strokeLineShape:function(y){return this.lineBetween(y.x1,y.y1,y.x2,y.y2)},lineBetween:function(y,x,S,E){return this.beginPath(),this.moveTo(y,x),this.lineTo(S,E),this.strokePath(),this},lineTo:function(y,x){return this.commandBuffer.push(c.LINE_TO,y,x),this},moveTo:function(y,x){return this.commandBuffer.push(c.MOVE_TO,y,x),this},strokePoints:function(y,x,S,E){x===void 0&&(x=!1),S===void 0&&(S=!1),E===void 0&&(E=y.length),this.beginPath(),this.moveTo(y[0].x,y[0].y);for(var b=1;b<E;b++)this.lineTo(y[b].x,y[b].y);return x&&this.lineTo(y[0].x,y[0].y),S&&this.closePath(),this.strokePath(),this},fillPoints:function(y,x,S,E){x===void 0&&(x=!1),S===void 0&&(S=!1),E===void 0&&(E=y.length),this.beginPath(),this.moveTo(y[0].x,y[0].y);for(var b=1;b<E;b++)this.lineTo(y[b].x,y[b].y);return x&&this.lineTo(y[0].x,y[0].y),S&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(y,x){x===void 0&&(x=32);var S=y.getPoints(x);return this.strokePoints(S,!0)},strokeEllipse:function(y,x,S,E,b){b===void 0&&(b=32);var T=new o(y,x,S,E),P=T.getPoints(b);return this.strokePoints(P,!0)},fillEllipseShape:function(y,x){x===void 0&&(x=32);var S=y.getPoints(x);return this.fillPoints(S,!0)},fillEllipse:function(y,x,S,E,b){b===void 0&&(b=32);var T=new o(y,x,S,E),P=T.getPoints(b);return this.fillPoints(P,!0)},arc:function(y,x,S,E,b,T,P){return T===void 0&&(T=!1),P===void 0&&(P=0),this.commandBuffer.push(c.ARC,y,x,S,E,b,T,P),this},slice:function(y,x,S,E,b,T,P){return T===void 0&&(T=!1),P===void 0&&(P=0),this.commandBuffer.push(c.BEGIN_PATH),this.commandBuffer.push(c.MOVE_TO,y,x),this.commandBuffer.push(c.ARC,y,x,S,E,b,T,P),this.commandBuffer.push(c.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(c.SAVE),this},restore:function(){return this.commandBuffer.push(c.RESTORE),this},translateCanvas:function(y,x){return this.commandBuffer.push(c.TRANSLATE,y,x),this},scaleCanvas:function(y,x){return this.commandBuffer.push(c.SCALE,y,x),this},rotateCanvas:function(y){return this.commandBuffer.push(c.ROTATE,y),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(y,x,S){var E=this.scene.sys,b=E.game.renderer;x===void 0&&(x=E.scale.width),S===void 0&&(S=E.scale.height),v.TargetCamera.setScene(this.scene),v.TargetCamera.setViewport(0,0,x,S),v.TargetCamera.scrollX=this.x,v.TargetCamera.scrollY=this.y;var T,P,C={willReadFrequently:!0};if(typeof y=="string")if(E.textures.exists(y)){T=E.textures.get(y);var w=T.getSourceImage();w instanceof HTMLCanvasElement&&(P=w.getContext("2d",C))}else T=E.textures.createCanvas(y,x,S),P=T.getSourceImage().getContext("2d",C);else y instanceof HTMLCanvasElement&&(P=y.getContext("2d",C));return P&&(this.renderCanvas(b,this,v.TargetCamera,null,P,!1),T&&T.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});v.TargetCamera=new u,r.exports=v},91543:(r,m,e)=>{var u=e(36266),g=e(49584),c=function(s,o,a,l,p,h){var f=o.commandBuffer,v=f.length,y=p||s.currentContext;if(!(v===0||!g(s,y,o,a,l))){a.addToRenderList(o);var x=1,S=1,E=0,b=0,T=1,P=0,C=0,w=0;y.beginPath();for(var A=0;A<v;++A){var R=f[A];switch(R){case u.ARC:y.arc(f[A+1],f[A+2],f[A+3],f[A+4],f[A+5],f[A+6]),A+=7;break;case u.LINE_STYLE:T=f[A+1],E=f[A+2],x=f[A+3],P=(E&16711680)>>>16,C=(E&65280)>>>8,w=E&255,y.strokeStyle="rgba("+P+","+C+","+w+","+x+")",y.lineWidth=T,A+=3;break;case u.FILL_STYLE:b=f[A+1],S=f[A+2],P=(b&16711680)>>>16,C=(b&65280)>>>8,w=b&255,y.fillStyle="rgba("+P+","+C+","+w+","+S+")",A+=2;break;case u.BEGIN_PATH:y.beginPath();break;case u.CLOSE_PATH:y.closePath();break;case u.FILL_PATH:h||y.fill();break;case u.STROKE_PATH:h||y.stroke();break;case u.FILL_RECT:h?y.rect(f[A+1],f[A+2],f[A+3],f[A+4]):y.fillRect(f[A+1],f[A+2],f[A+3],f[A+4]),A+=4;break;case u.FILL_TRIANGLE:y.beginPath(),y.moveTo(f[A+1],f[A+2]),y.lineTo(f[A+3],f[A+4]),y.lineTo(f[A+5],f[A+6]),y.closePath(),h||y.fill(),A+=6;break;case u.STROKE_TRIANGLE:y.beginPath(),y.moveTo(f[A+1],f[A+2]),y.lineTo(f[A+3],f[A+4]),y.lineTo(f[A+5],f[A+6]),y.closePath(),h||y.stroke(),A+=6;break;case u.LINE_TO:y.lineTo(f[A+1],f[A+2]),A+=2;break;case u.MOVE_TO:y.moveTo(f[A+1],f[A+2]),A+=2;break;case u.LINE_FX_TO:y.lineTo(f[A+1],f[A+2]),A+=5;break;case u.MOVE_FX_TO:y.moveTo(f[A+1],f[A+2]),A+=5;break;case u.SAVE:y.save();break;case u.RESTORE:y.restore();break;case u.TRANSLATE:y.translate(f[A+1],f[A+2]),A+=2;break;case u.SCALE:y.scale(f[A+1],f[A+2]),A+=2;break;case u.ROTATE:y.rotate(f[A+1]),A+=1;break;case u.GRADIENT_FILL_STYLE:A+=5;break;case u.GRADIENT_LINE_STYLE:A+=6;break}}y.restore()}};r.exports=c},41286:(r,m,e)=>{var u=e(99325),g=e(33182);u.register("graphics",function(c,s){c===void 0&&(c={}),s!==void 0&&(c.add=s);var o=new g(this.scene,c);return c.add&&this.scene.sys.displayList.add(o),o})},13122:(r,m,e)=>{var u=e(33182),g=e(61286);g.register("graphics",function(c){return this.displayList.add(new u(this.scene,c))})},60898:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(34429),c=e(91543),c=e(91543),r.exports={renderWebGL:g,renderCanvas:c}},34429:(r,m,e)=>{var u=e(36266),g=e(73329),c=e(69360),s=e(75512),o=function(f,v,y){this.x=f,this.y=v,this.width=y},a=function(f,v,y){this.points=[],this.pointsLength=1,this.points[0]=new o(f,v,y)},l=[],p=new c,h=function(f,v,y,x){if(v.commandBuffer.length!==0){y.addToRenderList(v);var S=f.pipelines.set(v.pipeline,v);f.pipelines.preBatch(v);for(var E=g(v,y,x).calc,b=p.loadIdentity(),T=v.commandBuffer,P=y.alpha*v.alpha,C=1,w=S.fillTint,A=S.strokeTint,R=0,I=0,L=0,O=.01,D=Math.PI*2,V,B=[],U=0,W=!0,F=null,G=s.getTintAppendFloatAlpha,M=0;M<T.length;M++)switch(V=T[M],V){case u.BEGIN_PATH:{B.length=0,F=null,W=!0;break}case u.CLOSE_PATH:{W=!1,F&&F.points.length&&F.points.push(F.points[0]);break}case u.FILL_PATH:{for(U=0;U<B.length;U++)S.batchFillPath(B[U].points,b,E);break}case u.STROKE_PATH:{for(U=0;U<B.length;U++)S.batchStrokePath(B[U].points,C,W,b,E);break}case u.LINE_STYLE:{C=T[++M];var N=T[++M],k=T[++M]*P,z=G(N,k);A.TL=z,A.TR=z,A.BL=z,A.BR=z;break}case u.FILL_STYLE:{var H=T[++M],$=T[++M]*P,X=G(H,$);w.TL=X,w.TR=X,w.BL=X,w.BR=X;break}case u.GRADIENT_FILL_STYLE:{var Y=T[++M]*P,j=T[++M]*P,J=T[++M]*P,Q=T[++M]*P;w.TL=G(T[++M],Y),w.TR=G(T[++M],j),w.BL=G(T[++M],J),w.BR=G(T[++M],Q);break}case u.GRADIENT_LINE_STYLE:{C=T[++M];var Z=T[++M]*P;A.TL=G(T[++M],Z),A.TR=G(T[++M],Z),A.BL=G(T[++M],Z),A.BR=G(T[++M],Z);break}case u.ARC:{var it=0,rt=T[++M],ut=T[++M],dt=T[++M],ct=T[++M],nt=T[++M],ht=T[++M],ot=T[++M];for(nt-=ct,ht?nt<-D?nt=-D:nt>0&&(nt=-D+nt%D):nt>D?nt=D:nt<0&&(nt=D+nt%D),F===null&&(F=new a(rt+Math.cos(ct)*dt,ut+Math.sin(ct)*dt,C),B.push(F),it+=O);it<1+ot;)L=nt*it+ct,R=rt+Math.cos(L)*dt,I=ut+Math.sin(L)*dt,F.points.push(new o(R,I,C)),it+=O;L=nt+ct,R=rt+Math.cos(L)*dt,I=ut+Math.sin(L)*dt,F.points.push(new o(R,I,C));break}case u.FILL_RECT:{S.batchFillRect(T[++M],T[++M],T[++M],T[++M],b,E);break}case u.FILL_TRIANGLE:{S.batchFillTriangle(T[++M],T[++M],T[++M],T[++M],T[++M],T[++M],b,E);break}case u.STROKE_TRIANGLE:{S.batchStrokeTriangle(T[++M],T[++M],T[++M],T[++M],T[++M],T[++M],C,b,E);break}case u.LINE_TO:{F!==null?F.points.push(new o(T[++M],T[++M],C)):(F=new a(T[++M],T[++M],C),B.push(F));break}case u.MOVE_TO:{F=new a(T[++M],T[++M],C),B.push(F);break}case u.SAVE:{l.push(b.copyToArray());break}case u.RESTORE:{b.copyFromArray(l.pop());break}case u.TRANSLATE:{rt=T[++M],ut=T[++M],b.translate(rt,ut);break}case u.SCALE:{rt=T[++M],ut=T[++M],b.scale(rt,ut);break}case u.ROTATE:{b.rotate(T[++M]);break}}f.pipelines.postBatch(v)}};r.exports=h},59192:(r,m,e)=>{var u=e(83979),g=e(56694),c=e(56631),s=e(6659),o=e(71608),a=e(72632),l=e(10850),p=e(19256),h=e(42911),f=e(75757),v=e(58403),y=e(13747),x=new g({Extends:s,initialize:function(E,b,T){s.call(this),T?b&&!Array.isArray(b)&&(b=[b]):Array.isArray(b)?h(b[0])&&(T=b,b=null):h(b)&&(T=b,b=null),this.scene=E,this.children=new v,this.isParent=!0,this.type="Group",this.classType=a(T,"classType",y),this.name=a(T,"name",""),this.active=a(T,"active",!0),this.maxSize=a(T,"maxSize",-1),this.defaultKey=a(T,"defaultKey",null),this.defaultFrame=a(T,"defaultFrame",null),this.runChildUpdate=a(T,"runChildUpdate",!1),this.createCallback=a(T,"createCallback",null),this.removeCallback=a(T,"removeCallback",null),this.createMultipleCallback=a(T,"createMultipleCallback",null),this.internalCreateCallback=a(T,"internalCreateCallback",null),this.internalRemoveCallback=a(T,"internalRemoveCallback",null),b&&this.addMultiple(b),T&&this.createMultiple(T),this.on(c.ADDED_TO_SCENE,this.addedToScene,this),this.on(c.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(S,E,b,T,P,C){if(S===void 0&&(S=0),E===void 0&&(E=0),b===void 0&&(b=this.defaultKey),T===void 0&&(T=this.defaultFrame),P===void 0&&(P=!0),C===void 0&&(C=!0),this.isFull())return null;var w=new this.classType(this.scene,S,E,b,T);return w.addToDisplayList(this.scene.sys.displayList),w.addToUpdateList(),w.visible=P,w.setActive(C),this.add(w),w},createMultiple:function(S){if(this.isFull())return[];Array.isArray(S)||(S=[S]);var E=[];if(S[0].key)for(var b=0;b<S.length;b++){var T=this.createFromConfig(S[b]);E=E.concat(T)}return E},createFromConfig:function(S){if(this.isFull())return[];this.classType=a(S,"classType",this.classType);var E=a(S,"key",void 0),b=a(S,"frame",null),T=a(S,"visible",!0),P=a(S,"active",!0),C=[];if(E===void 0)return C;Array.isArray(E)||(E=[E]),Array.isArray(b)||(b=[b]);var w=a(S,"repeat",0),A=a(S,"randomKey",!1),R=a(S,"randomFrame",!1),I=a(S,"yoyo",!1),L=a(S,"quantity",!1),O=a(S,"frameQuantity",1),D=a(S,"max",0),V=f(E,b,{max:D,qty:L||O,random:A,randomB:R,repeat:w,yoyo:I});S.createCallback&&(this.createCallback=S.createCallback),S.removeCallback&&(this.removeCallback=S.removeCallback);for(var B=0;B<V.length;B++){var U=this.create(0,0,V[B].a,V[B].b,T,P);if(!U)break;C.push(U)}if(p(S,"setXY")){var W=l(S,"setXY.x",0),F=l(S,"setXY.y",0),G=l(S,"setXY.stepX",0),M=l(S,"setXY.stepY",0);u.SetXY(C,W,F,G,M)}if(p(S,"setRotation")){var N=l(S,"setRotation.value",0),k=l(S,"setRotation.step",0);u.SetRotation(C,N,k)}if(p(S,"setScale")){var z=l(S,"setScale.x",1),H=l(S,"setScale.y",z),$=l(S,"setScale.stepX",0),X=l(S,"setScale.stepY",0);u.SetScale(C,z,H,$,X)}if(p(S,"setOrigin")){var Y=l(S,"setOrigin.x",.5),j=l(S,"setOrigin.y",Y),J=l(S,"setOrigin.stepX",0),Q=l(S,"setOrigin.stepY",0);u.SetOrigin(C,Y,j,J,Q)}if(p(S,"setAlpha")){var Z=l(S,"setAlpha.value",1),it=l(S,"setAlpha.step",0);u.SetAlpha(C,Z,it)}if(p(S,"setDepth")){var rt=l(S,"setDepth.value",0),ut=l(S,"setDepth.step",0);u.SetDepth(C,rt,ut)}if(p(S,"setScrollFactor")){var dt=l(S,"setScrollFactor.x",1),ct=l(S,"setScrollFactor.y",dt),nt=l(S,"setScrollFactor.stepX",0),ht=l(S,"setScrollFactor.stepY",0);u.SetScrollFactor(C,dt,ct,nt,ht)}var ot=a(S,"hitArea",null),mt=a(S,"hitAreaCallback",null);ot&&u.SetHitArea(C,ot,mt);var gt=a(S,"gridAlign",!1);return gt&&u.GridAlign(C,gt),this.createMultipleCallback&&this.createMultipleCallback.call(this,C),C},preUpdate:function(S,E){if(!(!this.runChildUpdate||this.children.size===0))for(var b=this.children.entries.slice(),T=0;T<b.length;T++){var P=b[T];P.active&&P.update(S,E)}},add:function(S,E){return E===void 0&&(E=!1),this.isFull()?this:(this.children.set(S),this.internalCreateCallback&&this.internalCreateCallback.call(this,S),this.createCallback&&this.createCallback.call(this,S),E&&(S.addToDisplayList(this.scene.sys.displayList),S.addToUpdateList()),S.on(c.DESTROY,this.remove,this),this)},addMultiple:function(S,E){if(E===void 0&&(E=!1),Array.isArray(S))for(var b=0;b<S.length;b++)this.add(S[b],E);return this},remove:function(S,E,b){return E===void 0&&(E=!1),b===void 0&&(b=!1),this.children.contains(S)?(this.children.delete(S),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,S),this.removeCallback&&this.removeCallback.call(this,S),S.off(c.DESTROY,this.remove,this),b?S.destroy():E&&(S.removeFromDisplayList(),S.removeFromUpdateList()),this):this},clear:function(S,E){S===void 0&&(S=!1),E===void 0&&(E=!1);for(var b=this.children,T=0;T<b.size;T++){var P=b.entries[T];P.off(c.DESTROY,this.remove,this),E?P.destroy():S&&(P.removeFromDisplayList(),P.removeFromUpdateList())}return this.children.clear(),this},contains:function(S){return this.children.contains(S)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(S,E,b,T){return o(this.children.entries,S,E,b,T)},getFirst:function(S,E,b,T,P,C,w){return this.getHandler(!0,1,S,E,b,T,P,C,w)},getFirstNth:function(S,E,b,T,P,C,w,A){return this.getHandler(!0,S,E,b,T,P,C,w,A)},getLast:function(S,E,b,T,P,C,w){return this.getHandler(!1,1,S,E,b,T,P,C,w)},getLastNth:function(S,E,b,T,P,C,w,A){return this.getHandler(!1,S,E,b,T,P,C,w,A)},getHandler:function(S,E,b,T,P,C,w,A,R){b===void 0&&(b=!1),T===void 0&&(T=!1);var I,L,O=0,D=this.children.entries;if(S)for(L=0;L<D.length;L++)if(I=D[L],I.active===b){if(O++,O===E)break}else I=null;else for(L=D.length-1;L>=0;L--)if(I=D[L],I.active===b){if(O++,O===E)break}else I=null;return I?(typeof P=="number"&&(I.x=P),typeof C=="number"&&(I.y=C),I):T?this.create(P,C,w,A,R):null},get:function(S,E,b,T,P){return this.getFirst(!1,!0,S,E,b,T,P)},getFirstAlive:function(S,E,b,T,P,C){return this.getFirst(!0,S,E,b,T,P,C)},getFirstDead:function(S,E,b,T,P,C){return this.getFirst(!1,S,E,b,T,P,C)},playAnimation:function(S,E){return u.PlayAnimation(this.children.entries,S,E),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(S){S===void 0&&(S=!0);for(var E=0,b=0;b<this.children.size;b++)this.children.entries[b].active===S&&E++;return E},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var S=this.getTotalUsed(),E=this.maxSize===-1?999999999999:this.maxSize;return E-S},setActive:function(S){return this.active=S,this},setName:function(S){return this.name=S,this},propertyValueSet:function(S,E,b,T,P){return u.PropertyValueSet(this.children.entries,S,E,b,T,P),this},propertyValueInc:function(S,E,b,T,P){return u.PropertyValueInc(this.children.entries,S,E,b,T,P),this},setX:function(S,E){return u.SetX(this.children.entries,S,E),this},setY:function(S,E){return u.SetY(this.children.entries,S,E),this},setXY:function(S,E,b,T){return u.SetXY(this.children.entries,S,E,b,T),this},incX:function(S,E){return u.IncX(this.children.entries,S,E),this},incY:function(S,E){return u.IncY(this.children.entries,S,E),this},incXY:function(S,E,b,T){return u.IncXY(this.children.entries,S,E,b,T),this},shiftPosition:function(S,E,b){return u.ShiftPosition(this.children.entries,S,E,b),this},angle:function(S,E){return u.Angle(this.children.entries,S,E),this},rotate:function(S,E){return u.Rotate(this.children.entries,S,E),this},rotateAround:function(S,E){return u.RotateAround(this.children.entries,S,E),this},rotateAroundDistance:function(S,E,b){return u.RotateAroundDistance(this.children.entries,S,E,b),this},setAlpha:function(S,E){return u.SetAlpha(this.children.entries,S,E),this},setTint:function(S,E,b,T){return u.SetTint(this.children.entries,S,E,b,T),this},setOrigin:function(S,E,b,T){return u.SetOrigin(this.children.entries,S,E,b,T),this},scaleX:function(S,E){return u.ScaleX(this.children.entries,S,E),this},scaleY:function(S,E){return u.ScaleY(this.children.entries,S,E),this},scaleXY:function(S,E,b,T){return u.ScaleXY(this.children.entries,S,E,b,T),this},setDepth:function(S,E){return u.SetDepth(this.children.entries,S,E),this},setBlendMode:function(S){return u.SetBlendMode(this.children.entries,S),this},setHitArea:function(S,E){return u.SetHitArea(this.children.entries,S,E),this},shuffle:function(){return u.Shuffle(this.children.entries),this},kill:function(S){this.children.contains(S)&&S.setActive(!1)},killAndHide:function(S){this.children.contains(S)&&(S.setActive(!1),S.setVisible(!1))},setVisible:function(S,E,b){return u.SetVisible(this.children.entries,S,E,b),this},toggleVisible:function(){return u.ToggleVisible(this.children.entries),this},destroy:function(S,E){S===void 0&&(S=!1),E===void 0&&(E=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(c.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(E,S),this.scene=void 0,this.children=void 0)}});r.exports=x},61295:(r,m,e)=>{var u=e(99325),g=e(59192);u.register("group",function(c){return new g(this.scene,null,c)})},62598:(r,m,e)=>{var u=e(59192),g=e(61286);g.register("group",function(c,s){return this.updateList.add(new u(this.scene,c,s))})},1539:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(89980),s=e(57322),o=new u({Extends:c,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.TextureCrop,g.Tint,g.Transform,g.Visible,s],initialize:function(l,p,h,f,v){c.call(this,l,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,v),this.setPosition(p,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=o},57786:r=>{var m=function(e,u,g,c){g.addToRenderList(u),e.batchSprite(u,u.frame,g,c)};r.exports=m},83556:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(1539);g.register("image",function(o,a){o===void 0&&(o={});var l=c(o,"key",null),p=c(o,"frame",null),h=new s(this.scene,0,0,l,p);return a!==void 0&&(o.add=a),u(this.scene,h,o),h})},20927:(r,m,e)=>{var u=e(1539),g=e(61286);g.register("image",function(c,s,o,a){return this.displayList.add(new u(this.scene,c,s,o,a))})},57322:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(59390),c=e(57786),r.exports={renderWebGL:g,renderCanvas:c}},59390:r=>{var m=function(e,u,g,c){g.addToRenderList(u),this.pipeline.batchSprite(u,g,c)};r.exports=m},48013:(r,m,e)=>{var u={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};u.Shader=e(27902),u.Mesh=e(83321),u.NineSlice=e(44139),u.PointLight=e(13171),u.Plane=e(33412),u.Factories.Shader=e(51979),u.Factories.Mesh=e(8767),u.Factories.NineSlice=e(53778),u.Factories.PointLight=e(91201),u.Factories.Plane=e(58322),u.Creators.Shader=e(13908),u.Creators.Mesh=e(41839),u.Creators.NineSlice=e(40964),u.Creators.PointLight=e(162),u.Creators.Plane=e(10912),u.Light=e(14455),u.LightsManager=e(26193),u.LightsPlugin=e(50296),r.exports=u},85305:(r,m,e)=>{var u=e(95723),g=e(56694),c=e(64937),s=e(48129),o=e(81078),a=e(6659),l=e(56631),p=e(71207),h=e(58010),f=e(7599),v=e(17922),y=new g({Extends:p,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Mask,c.PostPipeline,c.Visible,a,h],initialize:function(S,E){p.call(this,S),a.call(this),this.scene=S,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=S.sys,this.events=S.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),E&&this.add(E),S.sys.queueDepthSort()},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},setState:function(x){return this.state=x,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(x,S){return this.data||(this.data=new o(this)),this.data.set(x,S),this},incData:function(x,S){return this.data||(this.data=new o(this)),this.data.inc(x,S),this},toggleData:function(x){return this.data||(this.data=new o(this)),this.data.toggle(x),this},getData:function(x){return this.data||(this.data=new o(this)),this.data.get(x)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return s(this)},willRender:function(x){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&x.id)},getIndexList:function(){for(var x=this,S=this.parentContainer,E=[];S&&(E.unshift(S.getIndex(x)),x=S,S.parentContainer);)S=S.parentContainer;return E.unshift(this.displayList.getIndex(x)),E},addChildCallback:function(x){x.displayList&&x.displayList!==this&&x.removeFromDisplayList(),x.displayList||(this.queueDepthSort(),x.displayList=this,x.emit(l.ADDED_TO_SCENE,x,this.scene),this.events.emit(f.ADDED_TO_SCENE,x,this.scene))},removeChildCallback:function(x){this.queueDepthSort(),x.displayList=null,x.emit(l.REMOVED_FROM_SCENE,x,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,x,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(v(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(x,S){return x._depth-S._depth},getChildren:function(){return this.list},addToDisplayList:function(x){return x===void 0&&(x=this.scene.sys.displayList),this.displayList&&this.displayList!==x&&this.removeFromDisplayList(),x.exists(this)||(this.displayList=x,x.add(this,!0),x.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),x.events.emit(f.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var x=this.displayList||this.scene.sys.displayList;return x.exists(this)&&(x.remove(this,!0),x.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),x.events.emit(f.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(x){if(!(!this.scene||this.ignoreDestroy)){this.emit(l.DESTROY,this);for(var S=this.list;S.length;)S[0].destroy(x);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});r.exports=y},834:r=>{var m=function(e,u,g){var c=u.list;if(c.length!==0){u.depthSort();var s=u.blendMode!==-1;s||e.setBlendMode(0);var o=u._alpha;u.mask&&u.mask.preRenderCanvas(e,null,g);for(var a=0;a<c.length;a++){var l=c[a];if(l.willRender(g)){var p=l.alpha;!s&&l.blendMode!==e.currentBlendMode&&e.setBlendMode(l.blendMode),l.setAlpha(p*o),l.renderCanvas(e,l,g),l.setAlpha(p)}}u.mask&&u.mask.postRenderCanvas(e)}};r.exports=m},56378:(r,m,e)=>{var u=e(88933),g=e(85305),c=e(99325),s=e(20494);c.register("layer",function(o,a){o===void 0&&(o={});var l=s(o,"children",null),p=new g(this.scene,l);return a!==void 0&&(o.add=a),u(this.scene,p,o),p})},17676:(r,m,e)=>{var u=e(85305),g=e(61286);g.register("layer",function(c){return this.displayList.add(new u(this.scene,c))})},58010:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(17576),c=e(834),r.exports={renderWebGL:g,renderCanvas:c}},17576:r=>{var m=function(e,u,g){var c=u.list,s=c.length;if(s!==0){u.depthSort(),e.pipelines.preBatch(u);var o=u.blendMode!==-1;o||e.setBlendMode(0);for(var a=u.alpha,l=0;l<s;l++){var p=c[l];if(p.willRender(g)){var h,f,v,y;if(p.alphaTopLeft!==void 0)h=p.alphaTopLeft,f=p.alphaTopRight,v=p.alphaBottomLeft,y=p.alphaBottomRight;else{var x=p.alpha;h=x,f=x,v=x,y=x}!o&&p.blendMode!==e.currentBlendMode&&e.setBlendMode(p.blendMode);var S=p.mask;S&&S.preRenderWebGL(e,p,g);var E=p.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=l<s-1?c[l+1].type===e.currentType:!1,p.setAlpha(h*a,f*a,v*a,y*a),p.renderWebGL(e,p,g),p.setAlpha(h,f,v,y),S&&S.postRenderWebGL(e,g),e.newType=!1}}e.pipelines.postBatch(u)}};r.exports=m},14455:(r,m,e)=>{var u=e(26673),g=e(56694),c=e(64937),s=e(39298),o=e(75512),a=new g({Extends:u,Mixins:[c.Origin,c.ScrollFactor,c.Transform,c.Visible],initialize:function(p,h,f,v,y,x,S){u.call(this,p,h,f),this.color=new s(v,y,x),this.intensity=S,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(f)},displayWidth:{get:function(){return this.diameter},set:function(l){this.diameter=l}},displayHeight:{get:function(){return this.diameter},set:function(l){this.diameter=l}},width:{get:function(){return this.diameter},set:function(l){this.diameter=l}},height:{get:function(){return this.diameter},set:function(l){this.diameter=l}},willRender:function(l){return!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setColor:function(l){var p=o.getFloatsFromUintRGB(l);return this.color.set(p[0],p[1],p[2]),this},setIntensity:function(l){return this.intensity=l,this},setRadius:function(l){return this.radius=l,this}});a.RENDER_MASK=15,r.exports=a},26193:(r,m,e)=>{var u=e(26535),g=e(56694),c=e(53996),s=e(14455),o=e(13171),a=e(39298),l=e(72677),p=e(17922),h=e(75512),f=new g({initialize:function(){this.lights=[],this.ambientColor=new a(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(v,y,x,S,E,b){return this.systems.displayList.add(new o(this.scene,v,y,x,S,E,b))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(v){for(var y=this.lights,x=v.worldView,S=[],E=0;E<y.length;E++){var b=y[E];b.willRender(v)&&u(b,x)&&S.push({light:b,distance:c(b.x,b.y,x.centerX,x.centerY)})}return S.length>this.maxLights&&(p(S,this.sortByDistance),S=S.slice(0,this.maxLights)),this.visibleLights=S.length,S},sortByDistance:function(v,y){return v.distance>=y.distance},setAmbientColor:function(v){var y=h.getFloatsFromUintRGB(v);return this.ambientColor.set(y[0],y[1],y[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(v,y,x,S,E){v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=128),S===void 0&&(S=16777215),E===void 0&&(E=1);var b=h.getFloatsFromUintRGB(S),T=new s(v,y,x,b[0],b[1],b[2],E);return this.lights.push(T),T},removeLight:function(v){var y=this.lights.indexOf(v);return y>=0&&l(this.lights,y),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});r.exports=f},50296:(r,m,e)=>{var u=e(56694),g=e(26193),c=e(91963),s=e(7599),o=new u({Extends:g,initialize:function(l){this.scene=l,this.systems=l.sys,l.sys.settings.isBooted||l.sys.events.once(s.BOOT,this.boot,this),g.call(this)},boot:function(){var a=this.systems.events;a.on(s.SHUTDOWN,this.shutdown,this),a.on(s.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});c.register("LightsPlugin",o,"lights"),r.exports=o},83321:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(75606),s=e(18693),o=e(89980),a=e(53267),l=e(67623),p=e(73329),h=e(16650),f=e(23464),v=e(23701),y=e(17922),x=e(70015),S=e(85769),E=new u({Extends:o,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.Texture,g.Transform,g.Visible,f],initialize:function(T,P,C,w,A,R,I,L,O,D,V,B){P===void 0&&(P=0),C===void 0&&(C=0),w===void 0&&(w="__WHITE"),o.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new x,this.modelScale=new x(1,1,1),this.modelRotation=new x,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new h,this.viewPosition=new x,this.viewMatrix=new h,this.projectionMatrix=new h,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var U=T.sys.renderer;this.setPosition(P,C),this.setTexture(w,A),this.setSize(U.width,U.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(U.width,U.height),R&&this.addVertices(R,I,L,O,D,V,B)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(b){return this.viewPosition.addScale(x.LEFT,b),this.dirtyCache[10]=1,this},panY:function(b){return this.viewPosition.y+=x.DOWN.y*b,this.dirtyCache[10]=1,this},panZ:function(b){return this.viewPosition.z+=b,this.dirtyCache[10]=1,this},setPerspective:function(b,T,P,C,w){return P===void 0&&(P=45),C===void 0&&(C=.01),w===void 0&&(w=1e3),this.fov=P,this.projectionMatrix.perspective(c(P),b/T,C,w),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(b,T,P,C){return b===void 0&&(b=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),P===void 0&&(P=-1e3),C===void 0&&(C=1e3),this.fov=0,this.projectionMatrix.ortho(-b,b,-T,T,P,C),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(b){b.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(b,T,P,C,w,A,R,I,L){var O=this.scene.sys.cache.obj.get(b),D;return O&&(D=a(O,this,T,P,C,w,A,R,I,L)),(!D||D.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",b),this},sortByDepth:function(b,T){return b.depth-T.depth},depthSort:function(){return y(this.faces,this.sortByDepth),this},addVertex:function(b,T,P,C,w,A,R){var I=new S(b,T,P,C,w,A,R);return this.vertices.push(I),I},addFace:function(b,T,P){var C=new s(b,T,P);return this.faces.push(C),this.dirtyCache[9]=-1,C},addVertices:function(b,T,P,C,w,A,R){var I=l(b,T,P,C,w,A,R);return I?(this.faces=this.faces.concat(I.faces),this.vertices=this.vertices.concat(I.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(b){return this.faces[b]},hasFaceAt:function(b,T,P){P===void 0&&(P=this.scene.sys.cameras.main);for(var C=p(this,P).calc,w=this.faces,A=0;A<w.length;A++){var R=w[A];if(R.contains(b,T,C))return!0}return!1},getFaceAt:function(b,T,P){P===void 0&&(P=this.scene.sys.cameras.main);for(var C=p(this,P).calc,w=this.faces,A=[],R=0;R<w.length;R++){var I=w[R];I.contains(b,T,C)&&A.push(I)}return y(A,this.sortByDepth)},setDebug:function(b,T){return this.debugGraphic=b,!b&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var b=this.modelPosition,T=this.modelRotation,P=this.modelScale,C=this.dirtyCache,w=b.x,A=b.y,R=b.z,I=T.x,L=T.y,O=T.z,D=P.x,V=P.y,B=P.z,U=this.getFaceCount(),W=C[0],F=C[1],G=C[2],M=C[3],N=C[4],k=C[5],z=C[6],H=C[7],$=C[8],X=C[9];return C[0]=w,C[1]=A,C[2]=R,C[3]=I,C[4]=L,C[5]=O,C[6]=D,C[7]=V,C[8]=B,C[9]=U,W!==w||F!==A||G!==R||M!==I||N!==L||k!==O||z!==D||H!==V||$!==B||X!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var b=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!b[10]&&!this.isDirty())){var T=this.width,P=this.height,C=this.viewMatrix,w=this.viewPosition;b[10]&&(C.identity(),C.translate(w),C.invert(),b[10]=0);var A=this.transformMatrix;A.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var R=w.z,I=this.faces,L=0;L<I.length;L++)I[L].transformCoordinatesLocal(A,T,P,R);this.depthSort()}},renderDebug:function(b,T){for(var P=b.debugGraphic,C=0;C<T.length;C++){var w=T[C],A=w.vertex1.tx,R=w.vertex1.ty,I=w.vertex2.tx,L=w.vertex2.ty,O=w.vertex3.tx,D=w.vertex3.ty;P.strokeTriangle(A,R,I,L,O,D)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var b=this.faces,T=function(P,C,w){for(var A=0;A<b.length;A++){var R=b[A];if(R.contains(C,w))return!0}return!1};return this.scene.sys.input.enable(this,T),this},setTint:function(b){b===void 0&&(b=16777215);for(var T=this.vertices,P=0;P<T.length;P++)T[P].color=b;return this},uvScroll:function(b,T){for(var P=this.faces,C=0;C<P.length;C++)P[C].scrollUV(b,T);return this},uvScale:function(b,T){for(var P=this.faces,C=0;C<P.length;C++)P[C].scaleUV(b,T);return this},tint:{set:function(b){this.setTint(b)}},rotateX:{get:function(){return v(this.modelRotation.x)},set:function(b){this.modelRotation.x=c(b)}},rotateY:{get:function(){return v(this.modelRotation.y)},set:function(b){this.modelRotation.y=c(b)}},rotateZ:{get:function(){return v(this.modelRotation.z)},set:function(b){this.modelRotation.z=c(b)}}});r.exports=E},6317:r=>{var m=function(){};r.exports=m},41839:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(10850),o=e(83321);g.register("mesh",function(a,l){a===void 0&&(a={});var p=c(a,"key",null),h=c(a,"frame",null),f=s(a,"vertices",[]),v=s(a,"uvs",[]),y=s(a,"indicies",[]),x=s(a,"containsZ",!1),S=s(a,"normals",[]),E=s(a,"colors",16777215),b=s(a,"alphas",1),T=new o(this.scene,0,0,p,h,f,v,y,x,S,E,b);return l!==void 0&&(a.add=l),u(this.scene,T,a),T})},8767:(r,m,e)=>{var u=e(83321),g=e(61286);g.register("mesh",function(c,s,o,a,l,p,h,f,v,y,x){return this.displayList.add(new u(this.scene,c,s,o,a,l,p,h,f,v,y,x))})},23464:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(57410),c=e(6317),r.exports={renderWebGL:g,renderCanvas:c}},57410:(r,m,e)=>{var u=e(73329),g=function(c,s,o,a){var l=s.faces,p=l.length;if(p!==0){o.addToRenderList(s);var h=c.pipelines.set(s.pipeline,s),f=u(s,o,a).calc;c.pipelines.preBatch(s);for(var v=h.setGameObject(s),y=h.vertexViewF32,x=h.vertexViewU32,S=h.vertexCount*h.currentShader.vertexComponentCount-1,E=s.tintFill,b=[],T=s.debugCallback,P=f.a,C=f.b,w=f.c,A=f.d,R=f.e,I=f.f,L=s.viewPosition.z,O=s.hideCCW,D=o.roundPixels,V=o.alpha*s.alpha,B=0,U=0;U<p;U++){var W=l[U];W.isInView(o,O,L,V,P,C,w,A,R,I,D)&&(h.shouldFlush(3)&&(h.flush(),v=h.setGameObject(s),S=0),S=W.load(y,x,S,v,E),B++,h.vertexCount+=3,h.currentBatch.count=h.vertexCount-h.currentBatch.start,T&&b.push(W))}s.totalFrame+=B,T&&T.call(s,s,b),c.pipelines.postBatch(s)}};r.exports=g},44139:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(89980),s=e(94456),o=e(85769),a=new u({Extends:c,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,s],initialize:function(p,h,f,v,y,x,S,E,b,T,P){x===void 0&&(x=256),S===void 0&&(S=256),E===void 0&&(E=10),b===void 0&&(b=10),T===void 0&&(T=0),P===void 0&&(P=0),c.call(this,p,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=T===0&&P===0;for(var C=this.is3Slice?18:54,w=0;w<C;w++)this.vertices.push(new o);this.setPosition(h,f),this.setTexture(v,y),this.setSlices(x,S,E,b,T,P),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(l,p,h,f,v,y){l===void 0&&(l=256),p===void 0&&(p=256),h===void 0&&(h=10),f===void 0&&(f=10),v===void 0&&(v=0),y===void 0&&(y=0);var x=v===0&&y===0;return this.is3Slice!==x?console.warn("Cannot change 9 slice to 3 slice"):(this._width=l,this._height=p,this.leftWidth=h,this.rightWidth=f,this.topHeight=v,this.bottomHeight=y,this.is3Slice&&(p=this.frame.height,this._height=p,this.topHeight=p,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var l=this.leftWidth,p=this.rightWidth,h=this.topHeight,f=this.bottomHeight,v=this.frame.width,y=this.frame.height;this.updateQuadUVs(0,0,0,l/v,h/y),this.updateQuadUVs(6,l/v,0,1-p/v,h/y),this.updateQuadUVs(12,1-p/v,0,1,h/y),this.is3Slice||(this.updateQuadUVs(18,0,h/y,l/v,1-f/y),this.updateQuadUVs(24,l/v,h/y,1-p/v,1-f/y),this.updateQuadUVs(30,1-p/v,h/y,1,1-f/y),this.updateQuadUVs(36,0,1-f/y,l/v,1),this.updateQuadUVs(42,l/v,1-f/y,1-p/v,1),this.updateQuadUVs(48,1-p/v,1-f/y,1,1))},updateVertices:function(){var l=this.leftWidth,p=this.rightWidth,h=this.topHeight,f=this.bottomHeight,v=this.width,y=this.height;this.updateQuad(0,-.5,.5,-.5+l/v,.5-h/y),this.updateQuad(6,-.5+l/v,.5,.5-p/v,.5-h/y),this.updateQuad(12,.5-p/v,.5,.5,.5-h/y),this.is3Slice||(this.updateQuad(18,-.5,.5-h/y,-.5+l/v,-.5+f/y),this.updateQuad(24,-.5+l/v,.5-h/y,.5-p/v,-.5+f/y),this.updateQuad(30,.5-p/v,.5-h/y,.5,-.5+f/y),this.updateQuad(36,-.5,-.5+f/y,-.5+l/v,-.5),this.updateQuad(42,-.5+l/v,-.5+f/y,.5-p/v,-.5),this.updateQuad(48,.5-p/v,-.5+f/y,.5,-.5))},updateQuad:function(l,p,h,f,v){var y=this.width,x=this.height,S=this.originX,E=this.originY,b=this.vertices;b[l+0].resize(p,h,y,x,S,E),b[l+1].resize(p,v,y,x,S,E),b[l+2].resize(f,h,y,x,S,E),b[l+3].resize(p,v,y,x,S,E),b[l+4].resize(f,v,y,x,S,E),b[l+5].resize(f,h,y,x,S,E)},updateQuadUVs:function(l,p,h,f,v){var y=this.vertices,x=this.frame,S=x.u0,E=x.v0,b=x.u1,T=x.v1;if(S!==0||b!==1){var P=b-S;p=S+p*P,f=S+f*P}if(E!==0||T!==1){var C=T-E;h=E+h*C,v=E+v*C}y[l+0].setUVs(p,h),y[l+1].setUVs(p,v),y[l+2].setUVs(f,h),y[l+3].setUVs(p,v),y[l+4].setUVs(f,v),y[l+5].setUVs(f,h)},clearTint:function(){return this.setTint(16777215),this},setTint:function(l){return l===void 0&&(l=16777215),this.tint=l,this.tintFill=!1,this},setTintFill:function(l){return this.setTint(l),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(l){this._width=Math.max(l,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(l){this.is3Slice||(this._height=Math.max(l,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,p){this.width=l,this.height=p;var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=this.width,h.hitArea.height=this.height),this},setDisplaySize:function(l,p){return this.displayWidth=l,this.displayHeight=p,this},originX:{get:function(){return this._originX},set:function(l){this._originX=l,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(l){this._originY=l,this.updateVertices()}},setOrigin:function(l,p){return l===void 0&&(l=.5),p===void 0&&(p=l),this._originX=l,this._originY=p,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var l=this.frame.height;this._height=l,this.topHeight=l,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});r.exports=a},40964:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(10850),o=e(44139);g.register("nineslice",function(a,l){a===void 0&&(a={});var p=c(a,"key",null),h=c(a,"frame",null),f=s(a,"width",256),v=s(a,"height",256),y=s(a,"leftWidth",10),x=s(a,"rightWidth",10),S=s(a,"topHeight",0),E=s(a,"bottomHeight",0),b=new o(this.scene,0,0,p,h,f,v,y,x,S,E);return l!==void 0&&(a.add=l),u(this.scene,b,a),b})},53778:(r,m,e)=>{var u=e(44139),g=e(61286);g.register("nineslice",function(c,s,o,a,l,p,h,f,v,y){return this.displayList.add(new u(this.scene,c,s,o,a,l,p,h,f,v,y))})},94456:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(27420),r.exports={renderWebGL:g,renderCanvas:c}},27420:(r,m,e)=>{var u=e(73329),g=e(75512),c=function(s,o,a,l){var p=o.vertices,h=p.length;if(h!==0){a.addToRenderList(o);var f=s.pipelines.set(o.pipeline,o),v=u(o,a,l,!1).calc;s.pipelines.preBatch(o);var y=f.setGameObject(o),x=f.vertexViewF32,S=f.vertexViewU32,E=f.vertexCount*f.currentShader.vertexComponentCount-1,b=a.roundPixels,T=o.tintFill,P=a.alpha*o.alpha,C=g.getTintAppendFloatAlpha(o.tint,P),w=f.vertexAvailable(),A=-1;w<h&&(A=w);for(var R=0;R<h;R++){var I=p[R];R===A&&(f.flush(),y=f.setGameObject(o),E=0),x[++E]=v.getXRound(I.vx,I.vy,b),x[++E]=v.getYRound(I.vx,I.vy,b),x[++E]=I.u,x[++E]=I.v,x[++E]=y,x[++E]=T,S[++E]=C,f.vertexCount++,f.currentBatch.count=f.vertexCount-f.currentBatch.start}s.pipelines.postBatch(o)}};r.exports=c},19737:(r,m,e)=>{var u=e(56694),g=e(93025),c=e(22946),s=e(21902),o=e(4840),a=e(15978),l=new u({Extends:g,initialize:function(h){g.call(this,h,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var p=this.propertyValue,h=p,f=this.defaultEmit,v=this.defaultUpdate;if(this.method===9){this.start=p[0],this.ease=s("Linear"),this.interpolation=o("linear"),f=this.easedValueEmit,v=this.easeValueUpdate,h=p[0],this.active=!0;for(var y=0;y<p.length;y++){var x=a(p[y]);this.r.push(x.r),this.g.push(x.g),this.b.push(x.b)}}return this.onEmit=f,this.onUpdate=v,this.current=h,this},setEase:function(p){this.easeName=p,this.ease=s(p)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(p,h,f){var v=this.ease(f),y=this.interpolation(this.r,v),x=this.interpolation(this.g,v),S=this.interpolation(this.b,v),E=c(y,x,S);return this.current=E,E}});r.exports=l},93025:(r,m,e)=>{var u=e(17489),g=e(82897),c=e(56694),s=e(61616),o=e(21902),a=e(72632),l=e(4840),p=e(88462),h=e(1071),f=new c({initialize:function(y,x,S){S===void 0&&(S=!1),this.propertyKey=y,this.propertyValue=x,this.defaultValue=x,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=S,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(v,y){v===void 0&&(v={}),y&&(this.propertyKey=y),this.propertyValue=a(v,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(v){var y;switch(this.method){case 1:case 3:case 8:y=v;break;case 2:this.propertyValue.indexOf(v)>=0&&(y=v);break;case 4:var x=(this.end-this.start)/this.steps;y=p(v,x),this.counter=y;break;case 5:case 6:case 7:y=g(v,this.start,this.end);break;case 9:y=this.start[0];break}return this.current=y,this},getMethod:function(){var v=this.propertyValue;if(v===null)return 0;var y=typeof v;if(y==="number")return 1;if(Array.isArray(v))return 2;if(y==="function")return 3;if(y==="object"){if(this.hasBoth(v,"start","end"))return this.has(v,"steps")?4:5;if(this.hasBoth(v,"min","max"))return 6;if(this.has(v,"random"))return 7;if(this.hasEither(v,"onEmit","onUpdate"))return 8;if(this.has(v,"interpolation"))return 9}return 0},setMethods:function(){var v=this.propertyValue,y=v,x=this.defaultEmit,S=this.defaultUpdate;switch(this.method){case 1:x=this.staticValueEmit;break;case 2:x=this.randomStaticValueEmit,y=v[0];break;case 3:this._onEmit=v,x=this.proxyEmit;break;case 4:this.start=v.start,this.end=v.end,this.steps=v.steps,this.counter=this.start,this.yoyo=this.has(v,"yoyo")?v.yoyo:!1,this.direction=0,x=this.steppedEmit,y=this.start;break;case 5:this.start=v.start,this.end=v.end;var E=this.has(v,"ease")?v.ease:"Linear";this.ease=o(E,v.easeParams),x=this.has(v,"random")&&v.random?this.randomRangedValueEmit:this.easedValueEmit,S=this.easeValueUpdate,y=this.start;break;case 6:this.start=v.min,this.end=v.max,x=this.has(v,"int")&&v.int?this.randomRangedIntEmit:this.randomRangedValueEmit,y=this.start;break;case 7:var b=v.random;Array.isArray(b)&&(this.start=b[0],this.end=b[1]),x=this.randomRangedIntEmit,y=this.start;break;case 8:this._onEmit=this.has(v,"onEmit")?v.onEmit:this.defaultEmit,this._onUpdate=this.has(v,"onUpdate")?v.onUpdate:this.defaultUpdate,x=this.proxyEmit,S=this.proxyUpdate;break;case 9:this.start=v.values;var T=this.has(v,"ease")?v.ease:"Linear";this.ease=o(T,v.easeParams),this.interpolation=l(v.interpolation),x=this.easedValueEmit,S=this.easeValueUpdate,y=this.start[0];break}return this.onEmit=x,this.onUpdate=S,this.current=y,this},has:function(v,y){return v.hasOwnProperty(y)},hasBoth:function(v,y,x){return v.hasOwnProperty(y)&&v.hasOwnProperty(x)},hasEither:function(v,y,x){return v.hasOwnProperty(y)||v.hasOwnProperty(x)},defaultEmit:function(v,y,x){return x},defaultUpdate:function(v,y,x,S){return S},proxyEmit:function(v,y,x){var S=this._onEmit(v,y,x);return this.current=S,S},proxyUpdate:function(v,y,x,S){var E=this._onUpdate(v,y,x,S);return this.current=E,E},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var v=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[v],this.current},randomRangedValueEmit:function(v,y){var x=s(this.start,this.end);return v&&v.data[y]&&(v.data[y].min=x,v.data[y].max=this.end),this.current=x,x},randomRangedIntEmit:function(v,y){var x=u(this.start,this.end);return v&&v.data[y]&&(v.data[y].min=x,v.data[y].max=this.end),this.current=x,x},steppedEmit:function(){var v=this.counter,y=v,x=(this.end-this.start)/this.steps;if(this.yoyo){var S;this.direction===0?(y+=x,y>=this.end&&(S=y-this.end,y=this.end-S,this.direction=1)):(y-=x,y<=this.start&&(S=this.start-y,y=this.start+S,this.direction=0)),this.counter=y}else this.counter=h(y+x,this.start,this.end);return this.current=v,v},easedValueEmit:function(v,y){if(v&&v.data[y]){var x=v.data[y];x.min=this.start,x.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(v,y,x){var S=v.data[y],E,b=this.ease(x);return this.interpolation?E=this.interpolation(this.start,b):E=(S.max-S.min)*b+S.min,this.current=E,E},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});r.exports=f},87811:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(30891),s=new u({Extends:c,initialize:function(a,l,p,h,f){if(typeof a=="object"){var v=a;a=g(v,"x",0),l=g(v,"y",0),p=g(v,"power",0),h=g(v,"epsilon",100),f=g(v,"gravity",50)}else a===void 0&&(a=0),l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=100),f===void 0&&(f=50);c.call(this,a,l,!0),this._gravity=f,this._power=p*f,this._epsilon=h*h},update:function(o,a){var l=this.x-o.x,p=this.y-o.y,h=l*l+p*p;if(h!==0){var f=Math.sqrt(h);h<this._epsilon&&(h=this._epsilon);var v=this._power*a/(h*f)*100;o.velocityX+=l*v,o.velocityY+=p*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var a=this.power;this._gravity=o,this.power=a}}});r.exports=s},14909:(r,m,e)=>{var u=e(16569),g=e(82897),c=e(56694),s=e(75606),o=e(74118),a=e(2386),l=e(93736),p=new c({initialize:function(f){this.emitter=f,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new l,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=f.scene,this.anims=new u(this),this.bounds=new o},emit:function(h,f,v,y,x,S){return this.emitter.emit(h,f,v,y,x,S)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(h,f){h===void 0&&(h=0),f===void 0&&(f=0),this.x=h,this.y=f},fire:function(h,f){var v=this.emitter,y=v.ops,x=v.getAnim();if(x?this.anims.play(x):(this.frame=v.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(v.getEmitZone(this),h===void 0?this.x+=y.x.onEmit(this,"x"):y.x.steps>0?this.x+=h+y.x.onEmit(this,"x"):this.x+=h,f===void 0?this.y+=y.y.onEmit(this,"y"):y.y.steps>0?this.y+=f+y.y.onEmit(this,"y"):this.y+=f,this.life=y.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=y.delay.onEmit(this,"delay"),this.holdCurrent=y.hold.onEmit(this,"hold"),this.scaleX=y.scaleX.onEmit(this,"scaleX"),this.scaleY=y.scaleY.active?y.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=y.rotate.onEmit(this,"rotate"),this.rotation=s(this.angle),v.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&v.getDeathZone(this))return this.lifeCurrent=0,!1;var S=y.speedX.onEmit(this,"speedX"),E=y.speedY.active?y.speedY.onEmit(this,"speedY"):S;if(v.radial){var b=s(y.angle.onEmit(this,"angle"));this.velocityX=Math.cos(b)*Math.abs(S),this.velocityY=Math.sin(b)*Math.abs(E)}else if(v.moveTo){var T=y.moveToX.onEmit(this,"moveToX"),P=y.moveToY.onEmit(this,"moveToY"),C=this.life/1e3;this.velocityX=(T-this.x)/C,this.velocityY=(P-this.y)/C}else this.velocityX=S,this.velocityY=E;return v.acceleration&&(this.accelerationX=y.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=y.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=y.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=y.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=y.bounce.onEmit(this,"bounce"),this.alpha=y.alpha.onEmit(this,"alpha"),y.color.active?this.tint=y.color.onEmit(this,"tint"):this.tint=y.tint.onEmit(this,"tint"),!0},update:function(h,f,v){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=h,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=h,!1;this.anims.update(0,h);var y=this.emitter,x=y.ops,S=1-this.lifeCurrent/this.life;if(this.lifeT=S,this.x=x.x.onUpdate(this,"x",S,this.x),this.y=x.y.onUpdate(this,"y",S,this.y),y.moveTo){var E=x.moveToX.onUpdate(this,"moveToX",S,y.moveToX),b=x.moveToY.onUpdate(this,"moveToY",S,y.moveToY),T=this.lifeCurrent/1e3;this.velocityX=(E-this.x)/T,this.velocityY=(b-this.y)/T}return this.computeVelocity(y,h,f,v,S),this.scaleX=x.scaleX.onUpdate(this,"scaleX",S,this.scaleX),this.scaleY=this.scaleX,x.scaleY.active&&(this.scaleY=x.scaleY.onUpdate(this,"scaleY",S,this.scaleY)),this.angle=x.rotate.onUpdate(this,"rotate",S,this.angle),this.rotation=s(this.angle),y.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=x.alpha.onUpdate(this,"alpha",S,this.alpha),x.color.active?this.tint=x.color.onUpdate(this,"color",S,this.tint):this.tint=x.tint.onUpdate(this,"tint",S,this.tint),this.lifeCurrent-=h,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(h,f,v,y,x){var S=h.ops,E=this.velocityX,b=this.velocityY,T=S.accelerationX.onUpdate(this,"accelerationX",x,this.accelerationX),P=S.accelerationY.onUpdate(this,"accelerationY",x,this.accelerationY),C=S.maxVelocityX.onUpdate(this,"maxVelocityX",x,this.maxVelocityX),w=S.maxVelocityY.onUpdate(this,"maxVelocityY",x,this.maxVelocityY);this.bounce=S.bounce.onUpdate(this,"bounce",x,this.bounce),E+=h.gravityX*v+T*v,b+=h.gravityY*v+P*v,E=g(E,-C,C),b=g(b,-w,w),this.velocityX=E,this.velocityY=b,this.x+=E*v,this.y+=b*v,h.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var A=0;A<y.length;A++){var R=y[A];R.active&&R.update(this,f,v,x)}},setSizeToFrame:function(){},getBounds:function(h){h===void 0&&(h=this.emitter.getWorldTransformMatrix());var f=Math.abs(h.scaleX)*this.scaleX,v=Math.abs(h.scaleY)*this.scaleY,y=this.x,x=this.y,S=this.rotation,E=this.frame.width*f/2,b=this.frame.height*v/2,T=this.bounds,P=new l(y-E,x-b),C=new l(y+E,x-b),w=new l(y-E,x+b),A=new l(y+E,x+b);return S!==0&&(a(P,y,x,S),a(C,y,x,S),a(w,y,x,S),a(A,y,x,S)),h.transformPoint(P.x,P.y,P),h.transformPoint(C.x,C.y,C),h.transformPoint(w.x,w.y,w),h.transformPoint(A.x,A.y,A),T.x=Math.min(P.x,C.x,w.x,A.x),T.y=Math.min(P.y,C.y,w.y,A.y),T.width=Math.max(P.x,C.x,w.x,A.x)-T.x,T.height=Math.max(P.y,C.y,w.y,A.y)-T.y,T},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});r.exports=p},73106:(r,m,e)=>{var u=e(56694),g=e(30891),c=e(74118),s=new u({Extends:g,initialize:function(a,l,p,h,f,v,y,x){f===void 0&&(f=!0),v===void 0&&(v=!0),y===void 0&&(y=!0),x===void 0&&(x=!0),g.call(this,a,l,!0),this.bounds=new c(a,l,p,h),this.collideLeft=f,this.collideRight=v,this.collideTop=y,this.collideBottom=x},update:function(o){var a=this.bounds,l=-o.bounce,p=o.worldPosition;p.x<a.x&&this.collideLeft?(o.x+=a.x-p.x,o.velocityX*=l):p.x>a.right&&this.collideRight&&(o.x-=p.x-a.right,o.velocityX*=l),p.y<a.y&&this.collideTop?(o.y+=a.y-p.y,o.velocityY*=l):p.y>a.bottom&&this.collideBottom&&(o.y-=p.y-a.bottom,o.velocityY*=l)}});r.exports=s},9216:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(48129),s=e(29538),o=e(69361),a=e(54213),l=e(19737),p=e(93025),h=e(40629),f=e(89980),v=e(72632),y=e(72861),x=e(87811),S=e(53523),E=e(19256),b=e(7782),T=e(71207),P=e(14655),C=e(14909),w=e(68433),A=e(74118),R=e(90205),I=e(66458),L=e(69116),O=e(17922),D=e(69360),V=e(93736),B=e(1071),U=e(73106),W=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],F=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],G=new u({Extends:f,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,L],initialize:function(N,k,z,H,$){f.call(this,N,"ParticleEmitter"),this.particleClass=C,this.ops={accelerationX:new p("accelerationX",0),accelerationY:new p("accelerationY",0),alpha:new p("alpha",1),angle:new p("angle",{min:0,max:360},!0),bounce:new p("bounce",0),color:new l("color"),delay:new p("delay",0,!0),hold:new p("hold",0,!0),lifespan:new p("lifespan",1e3,!0),maxVelocityX:new p("maxVelocityX",1e4),maxVelocityY:new p("maxVelocityY",1e4),moveToX:new p("moveToX",0),moveToY:new p("moveToY",0),quantity:new p("quantity",1,!0),rotate:new p("rotate",0),scaleX:new p("scaleX",1),scaleY:new p("scaleY",1),speedX:new p("speedX",0,!0),speedY:new p("speedY",0,!0),tint:new p("tint",16777215),x:new p("x",0),y:new p("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new V,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new D,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new T(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(k,z),this.setTexture(H),$&&this.setConfig($)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(M){if(!M)return this;var N=0,k="",z=this.ops;for(N=0;N<F.length;N++)k=F[N],z[k].loadConfig(M);for(N=0;N<W.length;N++)k=W[N],E(M,k)&&(this[k]=v(M,k));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,E(M,"speed")&&(z.speedX.loadConfig(M,"speed"),z.speedY.active=!1),(S(M,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),E(M,"scale")&&(z.scaleX.loadConfig(M,"scale"),z.scaleY.active=!1),E(M,"callbackScope")){var H=v(M,"callbackScope",null);this.emitCallbackScope=H,this.deathCallbackScope=H}if(E(M,"emitZone")&&this.addEmitZone(M.emitZone),E(M,"deathZone")&&this.addDeathZone(M.deathZone),E(M,"bounds")){var $=this.addParticleBounds(M.bounds);$.collideLeft=v(M,"collideLeft",!0),$.collideRight=v(M,"collideRight",!0),$.collideTop=v(M,"collideTop",!0),$.collideBottom=v(M,"collideBottom",!0)}return E(M,"followOffset")&&this.followOffset.setFromObject(v(M,"followOffset",0)),E(M,"texture")&&this.setTexture(M.texture),E(M,"frame")?this.setEmitterFrame(M.frame):E(M,"anim")&&this.setAnim(M.anim),E(M,"reserve")&&this.reserve(M.reserve),E(M,"advance")&&this.fastForward(M.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(h.START,this),this},toJSON:function(){var M=c(this),N=0,k="";for(N=0;N<W.length;N++)k=W[N],M[k]=this[k];var z=this.ops;for(N=0;N<F.length;N++)k=F[N],z[k]&&(M[k]=z[k].toJSON());return z.speedY.active||(delete M.speedX,M.speed=z.speedX.toJSON()),this.scaleX===this.scaleY&&(delete M.scaleX,delete M.scaleY,M.scale=z.scaleX.toJSON()),M},resetCounters:function(M,N){var k=this.counters;k.fill(0),k[0]=M,N&&(k[5]=1)},startFollow:function(M,N,k,z){return N===void 0&&(N=0),k===void 0&&(k=0),z===void 0&&(z=!1),this.follow=M,this.followOffset.set(N,k),this.trackVisible=z,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var M=this.frames,N=M.length,k;return N===1?k=M[0]:this.randomFrame?k=y(M):(k=M[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===N&&(this.currentFrame=0))),this.texture.get(k)},setEmitterFrame:function(M,N,k){N===void 0&&(N=!0),k===void 0&&(k=1),this.randomFrame=N,this.frameQuantity=k,this.currentFrame=0;var z=typeof M;if(this.frames.length=0,Array.isArray(M))this.frames=this.frames.concat(M);else if(z==="string"||z==="number")this.frames.push(M);else if(z==="object"){var H=M;M=v(H,"frames",null),M&&(this.frames=this.frames.concat(M));var $=v(H,"cycle",!1);this.randomFrame=!$,this.frameQuantity=v(H,"quantity",k)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var M=this.anims,N=M.length;if(N===0)return null;if(N===1)return M[0];if(this.randomAnim)return y(M);var k=M[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=B(this.currentAnim+1,0,N-1)),k},setAnim:function(M,N,k){N===void 0&&(N=!0),k===void 0&&(k=1),this.randomAnim=N,this.animQuantity=k,this.currentAnim=0;var z=typeof M;if(this.anims.length=0,Array.isArray(M))this.anims=this.anims.concat(M);else if(z==="string")this.anims.push(M);else if(z==="object"){var H=M;M=v(H,"anims",null),M&&(this.anims=this.anims.concat(M));var $=v(H,"cycle",!1);this.randomAnim=!$,this.animQuantity=v(H,"quantity",k)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(M){return M===void 0&&(M=!0),this.radial=M,this},addParticleBounds:function(M,N,k,z,H,$,X,Y){if(typeof M=="object"){var j=M;M=j.x,N=j.y,k=E(j,"w")?j.w:j.width,z=E(j,"h")?j.h:j.height}return this.addParticleProcessor(new U(M,N,k,z,H,$,X,Y))},setParticleSpeed:function(M,N){return N===void 0&&(N=M),this.ops.speedX.onChange(M),M===N?this.ops.speedY.active=!1:this.ops.speedY.onChange(N),this.radial=!0,this},setParticleScale:function(M,N){return M===void 0&&(M=1),N===void 0&&(N=M),this.ops.scaleX.onChange(M),this.ops.scaleY.onChange(N),this},setParticleGravity:function(M,N){return this.gravityX=M,this.gravityY=N,this},setParticleAlpha:function(M){return this.ops.alpha.onChange(M),this},setParticleTint:function(M){return this.ops.tint.onChange(M),this},setEmitterAngle:function(M){return this.ops.angle.onChange(M),this},setParticleLifespan:function(M){return this.ops.lifespan.onChange(M),this},setQuantity:function(M){return this.quantity=M,this},setFrequency:function(M,N){return this.frequency=M,this.flowCounter=M>0?M:0,N&&(this.quantity=N),this},addDeathZone:function(M){Array.isArray(M)||(M=[M]);for(var N,k=this.deathZones,z=0;z<M.length;z++)if(N=M[z],N instanceof o)k.push(N);else if(typeof N.contains=="function")N=new o(N,!0),k.push(N);else{var H=v(N,"type","onEnter"),$=v(N,"source",null);if($&&typeof $.contains=="function"){var X=H==="onEnter";N=new o($,X),k.push(N)}}return N},removeDeathZone:function(M){return I(this.deathZones,M),this},addEmitZone:function(M){Array.isArray(M)||(M=[M]);for(var N,k=this.emitZones,z=[],H=0;H<M.length;H++){if(N=M[H],N instanceof w||N instanceof a)k.push(N);else{var $=v(N,"type","random"),X=v(N,"source",null);if($==="random")N=new w(X);else if($==="edge"){var Y=v(N,"quantity",1),j=v(N,"stepRate",0),J=v(N,"yoyo",!1),Q=v(N,"seamless",!0),Z=v(N,"total",-1);N=new a(X,Y,j,J,Q,Z)}N&&k.push(N)}z.push(N)}return z},removeEmitZone:function(M){return I(this.emitZones,M),this.zoneIndex=0,this},getEmitZone:function(M){var N=this.emitZones,k=N.length;if(k!==0){var z=N[this.zoneIndex];z.getPoint(M),z.total>-1&&(this.zoneTotal++,this.zoneTotal===z.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===k&&(this.zoneIndex=0)))}},getDeathZone:function(M){for(var N=this.deathZones,k=0;k<N.length;k++){var z=N[k];if(z.willKill(M))return this.emit(h.DEATH_ZONE,this,M,z),!0}return!1},setEmitZone:function(M){var N;return isFinite(M)?N=M:N=this.emitZones.indexOf(M),N>=0&&(this.zoneIndex=N),this},addParticleProcessor:function(M){return this.processors.exists(M)||(M.emitter&&M.emitter.removeParticleProcessor(M),this.processors.add(M),M.emitter=this),M},removeParticleProcessor:function(M){return this.processors.exists(M)&&(this.processors.remove(M,!0),M.emitter=null),M},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(M){return this.addParticleProcessor(new x(M))},reserve:function(M){var N=this.dead;if(this.maxParticles>0){var k=this.getParticleCount();k+M>this.maxParticles&&(M=this.maxParticles-(k+M))}for(var z=0;z<M;z++)N.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(M,N){return M===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof M=="function"&&(this.emitCallback=M,N&&(this.emitCallbackScope=N)),this},onParticleDeath:function(M,N){return M===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof M=="function"&&(this.deathCallback=M,N&&(this.deathCallbackScope=N)),this},killAll:function(){for(var M=this.dead,N=this.alive;N.length>0;)M.push(N.pop());return this},forEachAlive:function(M,N){for(var k=this.alive,z=k.length,H=0;H<z;H++)M.call(N,k[H],this);return this},forEachDead:function(M,N){for(var k=this.dead,z=k.length,H=0;H<z;H++)M.call(N,k[H],this);return this},start:function(M,N){return M===void 0&&(M=0),this.emitting||(M>0&&this.fastForward(M),this.emitting=!0,this.resetCounters(this.frequency,!0),N!==void 0&&(this.duration=Math.abs(N)),this.emit(h.START,this)),this},stop:function(M){return M===void 0&&(M=!1),this.emitting&&(this.emitting=!1,M&&this.killAll(),this.emit(h.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(M,N){return M===void 0&&(M=""),N===void 0&&(N=this.true),this.sortProperty=M,this.sortOrderAsc=N,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(M){return this.sortProperty!==""?M=this.depthSortCallback:M=null,this.sortCallback=M,this},depthSort:function(){return O(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(M,N){var k=this.sortProperty;return this.sortOrderAsc?M[k]-N[k]:N[k]-M[k]},flow:function(M,N,k){return N===void 0&&(N=1),this.emitting=!1,this.frequency=M,this.quantity=N,k!==void 0&&(this.stopAfter=k),this.start()},explode:function(M,N,k){this.frequency=-1,this.resetCounters(-1,!0);var z=this.emitParticle(M,N,k);return this.emit(h.EXPLODE,this,z),z},emitParticleAt:function(M,N,k){return this.emitParticle(k,M,N)},emitParticle:function(M,N,k){if(!this.atLimit()){M===void 0&&(M=this.ops.quantity.onEmit());for(var z=this.dead,H=this.stopAfter,$=this.follow?this.follow.x+this.followOffset.x:N,X=this.follow?this.follow.y+this.followOffset.y:k,Y=0;Y<M;Y++){var j=z.pop();if(j||(j=new this.particleClass(this)),j.fire($,X)?(this.particleBringToTop?this.alive.push(j):this.alive.unshift(j),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,j,this)):this.dead.push(j),H>0&&(this.stopCounter++,this.stopCounter>=H)||this.atLimit())break}return j}},fastForward:function(M,N){N===void 0&&(N=1e3/60);var k=0;for(this.skipping=!0;k<Math.abs(M);)this.preUpdate(0,N),k+=N;return this.skipping=!1,this},preUpdate:function(M,N){N*=this.timeScale;var k=N/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var z=this.getProcessors(),H=this.alive,$=this.dead,X=0,Y=[],j=H.length;for(X=0;X<j;X++){var J=H[X];J.update(N,k,z)&&Y.push({index:X,particle:J})}if(j=Y.length,j>0){var Q=this.deathCallback,Z=this.deathCallbackScope;for(X=j-1;X>=0;X--){var it=Y[X];H.splice(it.index,1),$.push(it.particle),Q&&Q.call(Z,it.particle),it.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&H.length===0&&(this.completeFlag=0,this.emit(h.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=N;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=N,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(M){for(var N=this.getWorldTransformMatrix(),k=this.alive,z=k.length,H=[],$=0;$<z;$++){var X=k[$];R(M,X.getBounds(N))&&H.push(X)}return H},getBounds:function(M,N,k,z){M===void 0&&(M=0),N===void 0&&(N=0),k===void 0&&(k=1e3/60),z===void 0&&(z=new A);var H=this.getWorldTransformMatrix(),$,X,Y=this.alive,j=!1;if(z.setTo(0,0,0,0),N>0){var J=0;for(this.skipping=!0;J<Math.abs(N);){for(this.preUpdate(0,k),$=0;$<Y.length;$++)X=Y[$].getBounds(H),j?P(z,X):(j=!0,s(X,z));J+=k}this.skipping=!1}else for($=0;$<Y.length;$++)X=Y[$].getBounds(H),j?P(z,X):(j=!0,s(X,z));return M>0&&b(z,M,M),z},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(M){this.ops.x.onChange(M)}},particleY:{get:function(){return this.ops.y.current},set:function(M){this.ops.y.onChange(M)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(M){this.ops.accelerationX.onChange(M)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(M){this.ops.accelerationY.onChange(M)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(M){this.ops.maxVelocityX.onChange(M)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(M){this.ops.maxVelocityY.onChange(M)}},speed:{get:function(){return this.ops.speedX.current},set:function(M){this.ops.speedX.onChange(M),this.ops.speedY.onChange(M)}},speedX:{get:function(){return this.ops.speedX.current},set:function(M){this.ops.speedX.onChange(M)}},speedY:{get:function(){return this.ops.speedY.current},set:function(M){this.ops.speedY.onChange(M)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(M){this.ops.moveToX.onChange(M)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(M){this.ops.moveToY.onChange(M)}},bounce:{get:function(){return this.ops.bounce.current},set:function(M){this.ops.bounce.onChange(M)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(M){this.ops.scaleX.onChange(M)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(M){this.ops.scaleY.onChange(M)}},particleColor:{get:function(){return this.ops.color.current},set:function(M){this.ops.color.onChange(M)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(M){this.ops.color.setEase(M)}},particleTint:{get:function(){return this.ops.tint.current},set:function(M){this.ops.tint.onChange(M)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(M){this.ops.alpha.onChange(M)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(M){this.ops.lifespan.onChange(M)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(M){this.ops.angle.onChange(M)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(M){this.ops.rotate.onChange(M)}},quantity:{get:function(){return this.ops.quantity.current},set:function(M){this.ops.quantity.onChange(M)}},delay:{get:function(){return this.ops.delay.current},set:function(M){this.ops.delay.onChange(M)}},hold:{get:function(){return this.ops.hold.current},set:function(M){this.ops.hold.onChange(M)}},flowCounter:{get:function(){return this.counters[0]},set:function(M){this.counters[0]=M}},frameCounter:{get:function(){return this.counters[1]},set:function(M){this.counters[1]=M}},animCounter:{get:function(){return this.counters[2]},set:function(M){this.counters[2]=M}},elapsed:{get:function(){return this.counters[3]},set:function(M){this.counters[3]=M}},stopCounter:{get:function(){return this.counters[4]},set:function(M){this.counters[4]=M}},completeFlag:{get:function(){return this.counters[5]},set:function(M){this.counters[5]=M}},zoneIndex:{get:function(){return this.counters[6]},set:function(M){this.counters[6]=M}},zoneTotal:{get:function(){return this.counters[7]},set:function(M){this.counters[7]=M}},currentFrame:{get:function(){return this.counters[8]},set:function(M){this.counters[8]=M}},currentAnim:{get:function(){return this.counters[9]},set:function(M){this.counters[9]=M}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var M,N=this.ops;for(M=0;M<F.length;M++){var k=F[M];N[k].destroy()}for(M=0;M<this.alive.length;M++)this.alive[M].destroy();for(M=0;M<this.dead.length;M++)this.dead[M].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});r.exports=G},10456:(r,m,e)=>{var u=e(90205),g=e(69360),c=new g,s=new g,o=new g,a=new g,l=function(p,h,f,v){var y=c,x=s,S=o,E=a;v?(E.loadIdentity(),E.multiply(v),E.translate(h.x,h.y),E.rotate(h.rotation),E.scale(h.scaleX,h.scaleY)):E.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var b=p.currentContext,T=f.roundPixels,P=f.alpha,C=h.alpha,w=h.alive,A=w.length,R=h.viewBounds;if(!(!h.visible||A===0||R&&!u(R,f.worldView))){h.sortCallback&&h.depthSort(),f.addToRenderList(h);var I=h.scrollFactorX,L=h.scrollFactorY;b.save(),b.globalCompositeOperation=p.blendModes[h.blendMode];for(var O=0;O<A;O++){var D=w[O],V=D.alpha*C*P;if(!(V<=0||D.scaleX===0||D.scaleY===0)){S.applyITRS(D.x,D.y,D.rotation,D.scaleX,D.scaleY),y.copyFrom(f.matrix),y.multiplyWithOffset(E,-f.scrollX*I,-f.scrollY*L),S.e=D.x,S.f=D.y,y.multiply(S,x);var B=D.frame,U=B.canvasData;if(U.width>0&&U.height>0){var W=-B.halfWidth,F=-B.halfHeight;b.globalAlpha=V,b.save(),x.setToContext(b),T&&(W=Math.round(W),F=Math.round(F)),b.imageSmoothingEnabled=!B.source.scaleMode,b.drawImage(B.source.image,U.x,U.y,U.width,U.height,W,F,U.width,U.height),b.restore()}}}b.restore()}};r.exports=l},765:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(72632),o=e(9216);g.register("particles",function(a,l){a===void 0&&(a={});var p=c(a,"key",null),h=s(a,"config",null),f=new o(this.scene,0,0,p);return l!==void 0&&(a.add=l),u(this.scene,f,a),h&&f.setConfig(h),f})},81212:(r,m,e)=>{var u=e(61286),g=e(9216);u.register("particles",function(c,s,o,a){return c!==void 0&&typeof c=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new g(this.scene,c,s,o,a))})},69116:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(10275),c=e(10456),r.exports={renderWebGL:g,renderCanvas:c}},10275:(r,m,e)=>{var u=e(90205),g=e(69360),c=e(75512),s=new g,o=new g,a=new g,l=new g,p=function(h,f,v,y){var x=h.pipelines.set(f.pipeline),S=s,E=o,b=a,T=l;y?(T.loadIdentity(),T.multiply(y),T.translate(f.x,f.y),T.rotate(f.rotation),T.scale(f.scaleX,f.scaleY)):T.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var P=v.roundPixels,C=c.getTintAppendFloatAlpha,w=v.alpha,A=f.alpha,R=f.frame.glTexture;h.pipelines.preBatch(f);var I=f.alive,L=I.length,O=f.viewBounds;if(!(L===0||O&&!u(O,v.worldView))){f.sortCallback&&f.depthSort();var D=x.setGameObject(f,f.frame);v.addToRenderList(f),S.copyFrom(v.matrix),S.multiplyWithOffset(T,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),h.setBlendMode(f.blendMode),f.mask&&(f.mask.preRenderWebGL(h,f,v),h.pipelines.set(f.pipeline));for(var V=f.tintFill,B=0;B<L;B++){var U=I[B],W=U.alpha*A*w;if(!(W<=0||U.scaleX===0||U.scaleY===0)){b.applyITRS(U.x,U.y,U.rotation,U.scaleX,U.scaleY),b.e=U.x,b.f=U.y,S.multiply(b,E);var F=U.frame,G=-F.halfWidth,M=-F.halfHeight,N=E.setQuad(G,M,G+F.width,M+F.height,P),k=C(U.tint,W);x.shouldFlush(6)&&(x.flush(),D=x.setGameObject(f,f.frame)),x.batchQuad(f,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],F.u0,F.v0,F.u1,F.v1,k,k,k,k,V,R,D)}}f.mask&&f.mask.postRenderWebGL(h,v),h.pipelines.postBatch(f)}};r.exports=p},30891:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a){s===void 0&&(s=0),o===void 0&&(o=0),a===void 0&&(a=!0),this.emitter,this.x=s,this.y=o,this.active=a},update:function(){},destroy:function(){this.emitter=null}});r.exports=g},76100:r=>{r.exports="complete"},26677:r=>{r.exports="deathzone"},62736:r=>{r.exports="explode"},56490:r=>{r.exports="start"},85715:r=>{r.exports="stop"},40629:(r,m,e)=>{r.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}},27684:(r,m,e)=>{r.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}},69361:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o){this.source=s,this.killOnEnter=o},willKill:function(c){var s=c.worldPosition,o=this.source.contains(s.x,s.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});r.exports=g},54213:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a,l,p,h){l===void 0&&(l=!1),p===void 0&&(p=!0),h===void 0&&(h=-1),this.source=s,this.points=[],this.quantity=o,this.stepRate=a,this.yoyo=l,this.counter=-1,this.seamless=p,this._length=0,this._direction=0,this.total=h,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var c=this.points[0],s=this.points[this.points.length-1];c.x===s.x&&c.y===s.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(c){return this.source=c,this.updateSource()},getPoint:function(c){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var s=this.points[this.counter];s&&(c.x=s.x,c.y=s.y)}});r.exports=g},68433:(r,m,e)=>{var u=e(56694),g=e(93736),c=new u({initialize:function(o){this.source=o,this._tempVec=new g,this.total=-1},getPoint:function(s){var o=this._tempVec;this.source.getRandomPoint(o),s.x=o.x,s.y=o.y}});r.exports=c},25962:(r,m,e)=>{r.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}},29598:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(13747),s=new u({Extends:c,Mixins:[g.PathFollower],initialize:function(a,l,p,h,f,v){c.call(this,a,p,h,f,v),this.path=l},preUpdate:function(o,a){this.anims.update(o,a),this.pathUpdate(o)}});r.exports=s},19626:(r,m,e)=>{var u=e(61286),g=e(29598);u.register("follower",function(c,s,o,a,l){var p=new g(this.scene,c,s,o,a,l);return this.displayList.add(p),this.updateList.add(p),p})},33412:(r,m,e)=>{var u=e(16569),g=e(56694),c=e(99425),s=e(15978),o=e(83321),a=e(76583),l=new g({Extends:o,initialize:function(h,f,v,y,x,S,E,b){y||(y="__DEFAULT"),o.call(this,h,f,v,y,x),this.type="Plane",this.anims=new u(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(S,E,b),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(p,h,f){p===void 0&&(p=8),h===void 0&&(h=8),f===void 0&&(f=!1);var v=!1;return f&&(v=!0),this.gridWidth=p,this.gridHeight=h,this.isTiled=f,this.clear(),c({mesh:this,widthSegments:p,heightSegments:h,isOrtho:!1,tile:f,flipY:v}),this},setSizeToFrame:function(p){p===void 0&&(p=!0);var h=this.frame;if(this.setPerspective(this.width/h.width,this.height/h.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!p)return this;var f=this.gridWidth,v=this.gridHeight,y=this.vertices,x=h.u0,S=h.u1,E=h.v0,b=h.v1,T,P,C=0;if(this.isTiled)for(E=h.v1,b=h.v0,P=0;P<v;P++)for(T=0;T<f;T++)y[C++].setUVs(x,b),y[C++].setUVs(x,E),y[C++].setUVs(S,b),y[C++].setUVs(x,E),y[C++].setUVs(S,E),y[C++].setUVs(S,b);else{var w=f+1,A=v+1,R=S-x,I=b-E,L=[];for(P=0;P<A;P++)for(T=0;T<w;T++){var O=x+R*(T/f),D=E+I*(P/v);L.push(O,D)}for(P=0;P<v;P++)for(T=0;T<f;T++){var V=(T+w*P)*2,B=(T+w*(P+1))*2,U=(T+1+w*(P+1))*2,W=(T+1+w*P)*2;y[C++].setUVs(L[V],L[V+1]),y[C++].setUVs(L[B],L[B+1]),y[C++].setUVs(L[W],L[W+1]),y[C++].setUVs(L[B],L[B+1]),y[C++].setUVs(L[U],L[U+1]),y[C++].setUVs(L[W],L[W+1])}}return this},setViewHeight:function(p){p===void 0&&(p=this.frame.height);var h=this.fov*(Math.PI/180);this.viewPosition.z=this.height/p/Math.tan(h/2),this.dirtyCache[10]=1},createCheckerboard:function(p,h,f,v,y){p===void 0&&(p=16777215),h===void 0&&(h=255),f===void 0&&(f=255),v===void 0&&(v=255),y===void 0&&(y=128);var x=this.scene.sys.renderer.gl,S=x.createTexture();x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,S),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST);for(var E=s(p),b=s(h),T=[],P=0;P<16;P++)for(var C=0;C<16;C++)P<8&&C<8||P>7&&C>7?T.push(E.r,E.g,E.b,f):T.push(b.r,b.g,b.b,v);x.texImage2D(x.TEXTURE_2D,0,x.RGBA,16,16,0,x.RGBA,x.UNSIGNED_BYTE,new Uint8Array(T)),S.isAlphaPremultiplied=!0,S.isRenderTexture=!1,S.width=16,S.height=16;var w=this.scene.sys.textures.addGLTexture(a(),S,16,16);return this.removeCheckerboard(),this._checkerboard=w,x.bindTexture(x.TEXTURE_2D,null),this.setTexture(w),this.setSizeToFrame(),this.setViewHeight(y),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(p,h){return this.anims.play(p,h)},playReverse:function(p,h){return this.anims.playReverse(p,h)},playAfterDelay:function(p,h){return this.anims.playAfterDelay(p,h)},playAfterRepeat:function(p,h){return this.anims.playAfterRepeat(p,h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(p){return this.anims.stopAfterDelay(p)},stopAfterRepeat:function(p){return this.anims.stopAfterRepeat(p)},stopOnFrame:function(p){return this.anims.stopOnFrame(p)},preUpdate:function(p,h){o.prototype.preUpdate.call(this,p,h),this.anims.update(p,h)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});r.exports=l},10912:(r,m,e)=>{var u=e(88933),g=e(32291),c=e(99325),s=e(20494),o=e(10850),a=e(33412);c.register("plane",function(l,p){l===void 0&&(l={});var h=s(l,"key",null),f=s(l,"frame",null),v=o(l,"width",8),y=o(l,"height",8),x=o(l,"tile",!1),S=new a(this.scene,0,0,h,f,v,y,x);p!==void 0&&(l.add=p);var E=o(l,"checkerboard",null);if(E){var b=o(E,"color1",16777215),T=o(E,"color2",255),P=o(E,"alpha1",255),C=o(E,"alpha2",255),w=o(E,"height",128);S.createCheckerboard(b,T,P,C,w)}return u(this.scene,S,l),g(S,l),S})},58322:(r,m,e)=>{var u=e(33412),g=e(61286);g.register("plane",function(c,s,o,a,l,p,h){return this.displayList.add(new u(this.scene,c,s,o,a,l,p,h))})},13171:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(89980),s=e(74853),o=e(65641),a=e(71606),l=new u({Extends:c,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible,a],initialize:function(h,f,v,y,x,S,E){y===void 0&&(y=16777215),x===void 0&&(x=128),S===void 0&&(S=1),E===void 0&&(E=.1),c.call(this,h,"PointLight"),this.initPipeline(o.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(f,v),this.color=s(y),this.intensity=S,this.attenuation=E,this.width=x*2,this.height=x*2,this._radius=x},radius:{get:function(){return this._radius},set:function(p){this._radius=p,this.width=p*2,this.height=p*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});r.exports=l},162:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(13171);g.register("pointlight",function(o,a){o===void 0&&(o={});var l=c(o,"color",16777215),p=c(o,"radius",128),h=c(o,"intensity",1),f=c(o,"attenuation",.1),v=new s(this.scene,0,0,l,p,h,f);return a!==void 0&&(o.add=a),u(this.scene,v,o),v})},91201:(r,m,e)=>{var u=e(61286),g=e(13171);u.register("pointlight",function(c,s,o,a,l,p){return this.displayList.add(new g(this.scene,c,s,o,a,l,p))})},71606:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(80590),r.exports={renderWebGL:g,renderCanvas:c}},80590:(r,m,e)=>{var u=e(73329),g=function(c,s,o,a){o.addToRenderList(s);var l=c.pipelines.set(s.pipeline),p=u(s,o,a).calc,h=s.width,f=s.height,v=-s._radius,y=-s._radius,x=v+h,S=y+f,E=p.getX(0,0),b=p.getY(0,0),T=p.getX(v,y),P=p.getY(v,y),C=p.getX(v,S),w=p.getY(v,S),A=p.getX(x,S),R=p.getY(x,S),I=p.getX(x,y),L=p.getY(x,y);c.pipelines.preBatch(s),l.batchPointLight(s,o,T,P,C,w,A,R,I,L,E,b),c.pipelines.postBatch(s)};r.exports=g},15996:(r,m,e)=>{var u=e(56694),g=e(845),c=e(1539),s=new u({Extends:c,initialize:function(a,l,p,h,f){l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=32),f===void 0&&(f=32);var v=new g(a.sys.textures,"",h,f);c.call(this,a,l,p,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(o,a){this.width=o,this.height=a,this.texture.setSize(o,a),this.updateDisplayOrigin();var l=this.input;return l&&!l.customHitArea&&(l.hitArea.width=o,l.hitArea.height=a),this},resize:function(o,a){return this.setSize(o,a),this},saveTexture:function(o){var a=this.texture;return a.key=o,a.manager.addDynamicTexture(a)&&(this._saved=!0),a},fill:function(o,a,l,p,h,f){return this.texture.fill(o,a,l,p,h,f),this},clear:function(){return this.texture.clear(),this},stamp:function(o,a,l,p,h){return this.texture.stamp(o,a,l,p,h),this},erase:function(o,a,l){return this.texture.erase(o,a,l),this},draw:function(o,a,l,p,h){return this.texture.draw(o,a,l,p,h),this},drawFrame:function(o,a,l,p,h,f){return this.texture.drawFrame(o,a,l,p,h,f),this},repeat:function(o,a,l,p,h,f,v,y,x){return this.texture.repeat(o,a,l,p,h,f,v,y,x),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(o,a,l,p,h){return this.texture.batchDraw(o,a,l,p,h),this},batchDrawFrame:function(o,a,l,p,h,f){return this.texture.batchDrawFrame(o,a,l,p,h,f),this},endDraw:function(o){return this.texture.endDraw(o),this},snapshotArea:function(o,a,l,p,h,f,v){return this.texture.snapshotArea(o,a,l,p,h,f,v),this},snapshot:function(o,a,l){return this.snapshotArea(0,0,this.width,this.height,o,a,l)},snapshotPixel:function(o,a,l){return this.snapshotArea(o,a,1,1,l,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});r.exports=s},85692:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(15996);g.register("renderTexture",function(o,a){o===void 0&&(o={});var l=c(o,"x",0),p=c(o,"y",0),h=c(o,"width",32),f=c(o,"height",32),v=new s(this.scene,l,p,h,f);return a!==void 0&&(o.add=a),u(this.scene,v,o),v})},29599:(r,m,e)=>{var u=e(61286),g=e(15996);u.register("renderTexture",function(c,s,o,a){return this.displayList.add(new g(this.scene,c,s,o,a))})},79968:(r,m,e)=>{var u=e(16569),g=e(56694),c=e(64937),s=e(89980),o=e(65641),a=e(58912),l=e(93736),p=new g({Extends:s,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Flip,c.Mask,c.Pipeline,c.PostPipeline,c.Size,c.Texture,c.Transform,c.Visible,c.ScrollFactor,a],initialize:function(f,v,y,x,S,E,b,T,P){x===void 0&&(x="__DEFAULT"),E===void 0&&(E=2),b===void 0&&(b=!0),s.call(this,f,"Rope"),this.anims=new u(this),this.points=E,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=x==="__DEFAULT",this.dirty=!1,this.horizontal=b,this._flipX=!1,this._flipY=!1,this._perp=new l,this.debugCallback=null,this.debugGraphic=null,this.setTexture(x,S),this.setPosition(v,y),this.setSizeToFrame(),this.initPipeline(o.ROPE_PIPELINE),Array.isArray(E)&&this.resizeArrays(E.length),this.setPoints(E,T,P),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,f){var v=this.anims.currentFrame;this.anims.update(h,f),this.anims.currentFrame!==v&&(this.updateUVs(),this.updateVertices())},play:function(h,f,v){return this.anims.play(h,f,v),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(h,f,v){return h===void 0&&(h=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(h,f,v))},setVertical:function(h,f,v){return h===void 0&&(h=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(h,f,v)):this},setTintFill:function(h){return h===void 0&&(h=!1),this.tintFill=h,this},setAlphas:function(h,f){var v=this.points.length;if(v<1)return this;var y=this.alphas;h===void 0?h=[1]:!Array.isArray(h)&&f===void 0&&(h=[h]);var x,S=0;if(f!==void 0)for(x=0;x<v;x++)S=x*2,y[S]=h,y[S+1]=f;else if(h.length===v)for(x=0;x<v;x++)S=x*2,y[S]=h[x],y[S+1]=h[x];else{var E=h[0];for(x=0;x<v;x++)S=x*2,h.length>S&&(E=h[S]),y[S]=E,h.length>S+1&&(E=h[S+1]),y[S+1]=E}return this},setColors:function(h){var f=this.points.length;if(f<1)return this;var v=this.colors;h===void 0?h=[16777215]:Array.isArray(h)||(h=[h]);var y,x=0;if(h.length===f)for(y=0;y<f;y++)x=y*2,v[x]=h[y],v[x+1]=h[y];else{var S=h[0];for(y=0;y<f;y++)x=y*2,h.length>x&&(S=h[x]),v[x]=S,h.length>x+1&&(S=h[x+1]),v[x+1]=S}return this},setPoints:function(h,f,v){if(h===void 0&&(h=2),typeof h=="number"){var y=h;y<2&&(y=2),h=[];var x,S,E;if(this.horizontal)for(E=-this.frame.halfWidth,S=this.frame.width/(y-1),x=0;x<y;x++)h.push({x:E+x*S,y:0});else for(E=-this.frame.halfHeight,S=this.frame.height/(y-1),x=0;x<y;x++)h.push({x:0,y:E+x*S})}var b=h.length,T=this.points.length;return b<1?(console.warn("Rope: Not enough points given"),this):(b===1&&(h.unshift({x:0,y:0}),b++),T!==b&&this.resizeArrays(b),this.dirty=!0,this.points=h,this.updateUVs(),f!=null&&this.setColors(f),v!=null&&this.setAlphas(v),this)},updateUVs:function(){for(var h=this.uv,f=this.points.length,v=this.frame.u0,y=this.frame.v0,x=this.frame.u1,S=this.frame.v1,E=(x-v)/(f-1),b=(S-y)/(f-1),T=0;T<f;T++){var P=T*4,C,w,A,R;this.horizontal?(this._flipX?(C=x-T*E,A=x-T*E):(C=v+T*E,A=v+T*E),this._flipY?(w=S,R=y):(w=y,R=S)):(this._flipX?(C=v,A=x):(C=x,A=v),this._flipY?(w=S-T*b,R=S-T*b):(w=y+T*b,R=y+T*b)),h[P+0]=C,h[P+1]=w,h[P+2]=A,h[P+3]=R}return this},resizeArrays:function(h){var f=this.colors,v=this.alphas;this.vertices=new Float32Array(h*4),this.uv=new Float32Array(h*4),f=new Uint32Array(h*2),v=new Float32Array(h*2);for(var y=0;y<h*2;y++)f[y]=16777215,v[y]=1;return this.colors=f,this.alphas=v,this.dirty=!0,this},updateVertices:function(){var h=this._perp,f=this.points,v=this.vertices,y=f.length;if(this.dirty=!1,!(y<1)){for(var x,S=f[0],E=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,b=0;b<y;b++){var T=f[b],P=b*4;b<y-1?x=f[b+1]:x=T,h.x=x.y-S.y,h.y=-(x.x-S.x);var C=h.length();h.x/=C,h.y/=C,h.x*=E,h.y*=E,v[P]=T.x+h.x,v[P+1]=T.y+h.y,v[P+2]=T.x-h.x,v[P+3]=T.y-h.y,S=T}return this}},setDebug:function(h,f){return this.debugGraphic=h,!h&&!f?this.debugCallback=null:f?this.debugCallback=f:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(h,f,v){var y=h.debugGraphic,x=v[0],S=v[1],E=v[2],b=v[3];y.lineBetween(x,S,E,b);for(var T=4;T<f;T+=4){var P=v[T+0],C=v[T+1],w=v[T+2],A=v[T+3];y.lineBetween(x,S,P,C),y.lineBetween(E,b,w,A),y.lineBetween(E,b,P,C),y.lineBetween(P,C,w,A),x=P,S=C,E=w,b=A}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(h){return this._flipX=h,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(h){return this._flipY=h,this.updateUVs()}}});r.exports=p},44598:r=>{var m=function(){};r.exports=m},96027:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(10850),o=e(79968);g.register("rope",function(a,l){a===void 0&&(a={});var p=c(a,"key",null),h=c(a,"frame",null),f=c(a,"horizontal",!0),v=s(a,"points",void 0),y=s(a,"colors",void 0),x=s(a,"alphas",void 0),S=new o(this.scene,0,0,p,h,v,f,y,x);return l!==void 0&&(a.add=l),u(this.scene,S,a),S})},31982:(r,m,e)=>{var u=e(79968),g=e(61286);g.register("rope",function(c,s,o,a,l,p,h,f){return this.displayList.add(new u(this.scene,c,s,o,a,l,p,h,f))})},58912:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(49489),c=e(44598),r.exports={renderWebGL:g,renderCanvas:c}},49489:(r,m,e)=>{var u=e(73329),g=e(75512),c=function(s,o,a,l){a.addToRenderList(o);var p=s.pipelines.set(o.pipeline,o),h=u(o,a,l).calc,f=o.vertices,v=o.uv,y=o.colors,x=o.alphas,S=o.alpha,E=g.getTintAppendFloatAlpha,b=a.roundPixels,T=f.length,P=Math.floor(T*.5);p.flush(),s.pipelines.preBatch(o);var C=p.setGameObject(o),w=p.vertexViewF32,A=p.vertexViewU32,R=p.vertexCount*p.currentShader.vertexComponentCount-1,I=0,L=o.tintFill;o.dirty&&o.updateVertices();for(var O=o.debugCallback,D=[],V=0;V<T;V+=2){var B=f[V+0],U=f[V+1],W=B*h.a+U*h.c+h.e,F=B*h.b+U*h.d+h.f;b&&(W=Math.round(W),F=Math.round(F)),w[++R]=W,w[++R]=F,w[++R]=v[V+0],w[++R]=v[V+1],w[++R]=C,w[++R]=L,A[++R]=E(y[I],a.alpha*(x[I]*S)),I++,O&&(D[V+0]=W,D[V+1]=F)}O&&O.call(o,o,T,D),p.vertexCount+=P,p.currentBatch.count=p.vertexCount-p.currentBatch.start,s.pipelines.postBatch(o)};r.exports=c},27902:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(89980),s=e(72632),o=e(98611),a=e(22440),l=e(24252),p=e(69360),h=new u({Extends:c,Mixins:[g.ComputedSize,g.Depth,g.GetBounds,g.Mask,g.Origin,g.ScrollFactor,g.Transform,g.Visible,l],initialize:function(v,y,x,S,E,b,T,P){x===void 0&&(x=0),S===void 0&&(S=0),E===void 0&&(E=128),b===void 0&&(b=128),c.call(this,v,"Shader"),this.blendMode=-1,this.shader;var C=v.sys.renderer;this.renderer=C,this.gl=C.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=C.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=C.width,this._rendererHeight=C.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(x,S),this.setSize(E,b),this.setOrigin(.5,.5),this.setShader(y,T,P)},willRender:function(f){return this.renderToTexture?!0:!(c.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setRenderToTexture:function(f,v){if(v===void 0&&(v=!1),!this.renderToTexture){var y=this.width,x=this.height,S=this.renderer;this.glTexture=S.createTextureFromSource(null,y,x,0),this.glTexture.flipY=v,this.framebuffer=S.createFramebuffer(y,x,this.glTexture,!1),this._rendererWidth=y,this._rendererHeight=x,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),f&&(this.texture=this.scene.sys.textures.addGLTexture(f,this.glTexture,y,x))}return this.shader&&(S.pipelines.clear(),this.load(),this.flush(),S.pipelines.rebind()),this},setShader:function(f,v,y){if(v===void 0&&(v=[]),typeof f=="string"){var x=this.scene.sys.cache.shader;if(!x.has(f))return console.warn("Shader missing: "+f),this;this.shader=x.get(f)}else this.shader=f;var S=this.gl,E=this.renderer;this.program&&S.deleteProgram(this.program);var b=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);S.uniformMatrix4fv(S.getUniformLocation(b,"uViewMatrix"),!1,this.viewMatrix),S.uniformMatrix4fv(S.getUniformLocation(b,"uProjectionMatrix"),!1,this.projectionMatrix),S.uniform2f(S.getUniformLocation(b,"uResolution"),this.width,this.height),this.program=b;var T=new Date,P={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[T.getFullYear(),T.getMonth(),T.getDate(),T.getHours()*60*60+T.getMinutes()*60+T.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=o(!0,{},this.shader.uniforms,P):this.uniforms=P;for(var C=0;C<4;C++)v[C]&&this.setSampler2D("iChannel"+C,v[C],C,y);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(f){return this.pointer=f,this},projOrtho:function(f,v,y,x){var S=-1e3,E=1e3,b=1/(f-v),T=1/(y-x),P=1/(S-E),C=this.projectionMatrix;C[0]=-2*b,C[5]=-2*T,C[10]=2*P,C[12]=(f+v)*b,C[13]=(x+y)*T,C[14]=(E+S)*P;var w=this.program,A=this.gl,R=this.renderer;R.setProgram(w),A.uniformMatrix4fv(A.getUniformLocation(w,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=v,this._rendererHeight=y},initUniforms:function(){var f=this.gl,v=this.renderer.glFuncMap,y=this.program;this._textureCount=0;for(var x in this.uniforms){var S=this.uniforms[x],E=S.type,b=v[E];S.uniformLocation=f.getUniformLocation(y,x),E!=="sampler2D"&&(S.glMatrix=b.matrix,S.glValueLength=b.length,S.glFunc=b.func)}},setSampler2DBuffer:function(f,v,y,x,S,E){S===void 0&&(S=0),E===void 0&&(E={});var b=this.uniforms[f];return b.value=v,E.width=y,E.height=x,b.textureData=E,this._textureCount=S,this.initSampler2D(b),this},setSampler2D:function(f,v,y,x){y===void 0&&(y=0);var S=this.scene.sys.textures;if(S.exists(v)){var E=S.getFrame(v);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(f,E.glTexture,E.width,E.height,y,x);var b=this.uniforms[f],T=E.source;b.textureKey=v,b.source=T.image,b.value=E.glTexture,T.isGLTexture&&(x||(x={}),x.width=T.width,x.height=T.height),x&&(b.textureData=x),this._textureCount=y,this.initSampler2D(b)}return this},setUniform:function(f,v){return a(this.uniforms,f,v),this},getUniform:function(f){return s(this.uniforms,f,null)},setChannel0:function(f,v){return this.setSampler2D("iChannel0",f,0,v)},setChannel1:function(f,v){return this.setSampler2D("iChannel1",f,1,v)},setChannel2:function(f,v){return this.setSampler2D("iChannel2",f,2,v)},setChannel3:function(f,v){return this.setSampler2D("iChannel3",f,3,v)},initSampler2D:function(f){if(f.value){var v=this.gl;v.activeTexture(v.TEXTURE0+this._textureCount),v.bindTexture(v.TEXTURE_2D,f.value);var y=f.textureData;if(y&&!f.value.isRenderTexture){var x=v[s(y,"magFilter","linear").toUpperCase()],S=v[s(y,"minFilter","linear").toUpperCase()],E=v[s(y,"wrapS","repeat").toUpperCase()],b=v[s(y,"wrapT","repeat").toUpperCase()],T=v[s(y,"format","rgba").toUpperCase()];if(y.repeat&&(E=v.REPEAT,b=v.REPEAT),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,!!y.flipY),y.width){var P=s(y,"width",512),C=s(y,"height",2),w=s(y,"border",0);v.texImage2D(v.TEXTURE_2D,0,T,P,C,w,T,v.UNSIGNED_BYTE,null)}else v.texImage2D(v.TEXTURE_2D,0,T,v.RGBA,v.UNSIGNED_BYTE,f.source);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,x),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,S),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,E),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,b)}this.renderer.setProgram(this.program),v.uniform1i(f.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var f=this.gl,v=this.uniforms,y,x,S,E,b,T=0;for(var P in v)y=v[P],S=y.glFunc,x=y.glValueLength,E=y.uniformLocation,b=y.value,b!==null&&(x===1?y.glMatrix?S.call(f,E,y.transpose,b):S.call(f,E,b):x===2?S.call(f,E,b.x,b.y):x===3?S.call(f,E,b.x,b.y,b.z):x===4?S.call(f,E,b.x,b.y,b.z,b.w):y.type==="sampler2D"&&(f.activeTexture(f.TEXTURE0+T),f.bindTexture(f.TEXTURE_2D,b),f.uniform1i(E,T),T++))},load:function(f){var v=this.gl,y=this.width,x=this.height,S=this.renderer,E=this.program,b=this.viewMatrix;if(!this.renderToTexture){var T=-this._displayOriginX,P=-this._displayOriginY;b[0]=f[0],b[1]=f[1],b[4]=f[2],b[5]=f[3],b[8]=f[4],b[9]=f[5],b[12]=b[0]*T+b[4]*P,b[13]=b[1]*T+b[5]*P}v.useProgram(E),v.uniformMatrix4fv(v.getUniformLocation(E,"uViewMatrix"),!1,b),v.uniform2f(v.getUniformLocation(E,"uResolution"),this.width,this.height);var C=this.uniforms,w=C.resolution;w.value.x=y,w.value.y=x,C.time.value=S.game.loop.getDuration();var A=this.pointer;if(A){var R=C.mouse,I=A.x/y,L=1-A.y/x;R.value.x=I.toFixed(2),R.value.y=L.toFixed(2)}this.syncUniforms()},flush:function(){var f=this.width,v=this.height,y=this.program,x=this.gl,S=this.vertexBuffer,E=this.renderer,b=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT)),x.bindBuffer(x.ARRAY_BUFFER,S);var T=x.getAttribLocation(y,"inPosition");T!==-1&&(x.enableVertexAttribArray(T),x.vertexAttribPointer(T,2,x.FLOAT,!1,b,0));var P=this.vertexViewF32;P[3]=v,P[4]=f,P[5]=v,P[8]=f,P[9]=v,P[10]=f;var C=6;x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,C*b)),x.drawArrays(x.TRIANGLES,0,C),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var f=this.gl;f.deleteProgram(this.program),f.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});r.exports=h},10612:r=>{var m=function(){};r.exports=m},13908:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(27902);g.register("shader",function(o,a){o===void 0&&(o={});var l=c(o,"key",null),p=c(o,"x",0),h=c(o,"y",0),f=c(o,"width",128),v=c(o,"height",128),y=new s(this.scene,l,p,h,f,v);return a!==void 0&&(o.add=a),u(this.scene,y,o),y})},51979:(r,m,e)=>{var u=e(27902),g=e(61286);g.register("shader",function(c,s,o,a,l,p,h){return this.displayList.add(new u(this.scene,c,s,o,a,l,p,h))})},24252:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(19782),c=e(10612),r.exports={renderWebGL:g,renderCanvas:c}},19782:(r,m,e)=>{var u=e(73329),g=function(c,s,o,a){if(s.shader){if(o.addToRenderList(s),c.pipelines.clear(),s.renderToTexture)s.load(),s.flush();else{var l=u(s,o,a).calc;(c.width!==s._rendererWidth||c.height!==s._rendererHeight)&&s.projOrtho(0,c.width,c.height,0),s.load(l.matrix),s.flush()}c.pipelines.rebind()}};r.exports=g},19543:(r,m,e)=>{var u=e(75512),g=function(c,s,o,a,l,p){for(var h=u.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*a),f=o.pathData,v=o.pathIndexes,y=0;y<v.length;y+=3){var x=v[y]*2,S=v[y+1]*2,E=v[y+2]*2,b=f[x+0]-l,T=f[x+1]-p,P=f[S+0]-l,C=f[S+1]-p,w=f[E+0]-l,A=f[E+1]-p,R=s.getX(b,T),I=s.getY(b,T),L=s.getX(P,C),O=s.getY(P,C),D=s.getX(w,A),V=s.getY(w,A);c.batchTri(o,R,I,L,O,D,V,0,0,1,1,h,h,h,2)}};r.exports=g},15608:r=>{var m=function(e,u,g,c){var s=g||u.fillColor,o=c||u.fillAlpha,a=(s&16711680)>>>16,l=(s&65280)>>>8,p=s&255;e.fillStyle="rgba("+a+","+l+","+p+","+o+")"};r.exports=m},17876:r=>{var m=function(e,u,g,c){var s=g||u.strokeColor,o=c||u.strokeAlpha,a=(s&16711680)>>>16,l=(s&65280)>>>8,p=s&255;e.strokeStyle="rgba("+a+","+l+","+p+","+o+")",e.lineWidth=u.lineWidth};r.exports=m},91461:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(89980),s=e(88829),o=new u({Extends:c,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible],initialize:function(l,p,h){p===void 0&&(p="Shape"),c.call(this,l,p),this.geom=h,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new s,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(a,l){return l===void 0&&(l=1),a===void 0?this.isFilled=!1:(this.fillColor=a,this.fillAlpha=l,this.isFilled=!0),this},setStrokeStyle:function(a,l,p){return p===void 0&&(p=1),a===void 0?this.isStroked=!1:(this.lineWidth=a,this.strokeColor=l,this.strokeAlpha=p,this.isStroked=!0),this},setClosePath:function(a){return this.closePath=a,this},setSize:function(a,l){return this.width=a,this.height=l,this},setDisplaySize:function(a,l){return this.displayWidth=a,this.displayHeight=l,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}}});r.exports=o},50262:(r,m,e)=>{var u=e(75512),g=function(c,s,o,a,l){var p=c.strokeTint,h=u.getTintAppendFloatAlpha(s.strokeColor,s.strokeAlpha*o);p.TL=h,p.TR=h,p.BL=h,p.BR=h;var f=s.pathData,v=f.length-1,y=s.lineWidth,x=y/2,S=f[0]-a,E=f[1]-l;s.closePath||(v-=2);for(var b=2;b<v;b+=2){var T=f[b]-a,P=f[b+1]-l;c.batchLine(S,E,T,P,x,x,y,b-2,s.closePath?b===v-1:!1),S=T,E=P}};r.exports=g},28593:(r,m,e)=>{var u=e(2213),g=e(56694),c=e(75606),s=e(11117),o=e(26673),a=e(83392),l=e(91461),p=new g({Extends:l,Mixins:[u],initialize:function(f,v,y,x,S,E,b,T,P){v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=128),S===void 0&&(S=0),E===void 0&&(E=360),b===void 0&&(b=!1),l.call(this,f,"Arc",new o(0,0,x)),this._startAngle=S,this._endAngle=E,this._anticlockwise=b,this._iterations=.01,this.setPosition(v,y);var C=this.geom.radius*2;this.setSize(C,C),T!==void 0&&this.setFillStyle(T,P),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(h){this._iterations=h,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(h){this.geom.radius=h;var f=h*2;this.setSize(f,f),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(h){this._startAngle=h,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(h){this._endAngle=h,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(h){this._anticlockwise=h,this.updateData()}},setRadius:function(h){return this.radius=h,this},setIterations:function(h){return h===void 0&&(h=.01),this.iterations=h,this},setStartAngle:function(h,f){return this._startAngle=h,f!==void 0&&(this._anticlockwise=f),this.updateData()},setEndAngle:function(h,f){return this._endAngle=h,f!==void 0&&(this._anticlockwise=f),this.updateData()},updateData:function(){var h=this._iterations,f=h,v=this.geom.radius,y=c(this._startAngle),x=c(this._endAngle),S=this._anticlockwise,E=v,b=v;x-=y,S?x<-a.PI2?x=-a.PI2:x>0&&(x=-a.PI2+x%a.PI2):x>a.PI2?x=a.PI2:x<0&&(x=a.PI2+x%a.PI2);for(var T=[E+Math.cos(y)*v,b+Math.sin(y)*v],P;f<1;)P=x*f+y,T.push(E+Math.cos(P)*v,b+Math.sin(P)*v),f+=h;return P=x+y,T.push(E+Math.cos(P)*v,b+Math.sin(P)*v),T.push(E+Math.cos(y)*v,b+Math.sin(y)*v),this.pathIndexes=s(T),this.pathData=T,this}});r.exports=p},23560:(r,m,e)=>{var u=e(75606),g=e(15608),c=e(17876),s=e(49584),o=function(a,l,p,h){p.addToRenderList(l);var f=a.currentContext;if(s(a,f,l,p,h)){var v=l.radius;f.beginPath(),f.arc(v-l.originX*(v*2),v-l.originY*(v*2),v,u(l._startAngle),u(l._endAngle),l.anticlockwise),l.closePath&&f.closePath(),l.isFilled&&(g(f,l),f.fill()),l.isStroked&&(c(f,l),f.stroke()),f.restore()}};r.exports=o},10369:(r,m,e)=>{var u=e(28593),g=e(61286);g.register("arc",function(c,s,o,a,l,p,h,f){return this.displayList.add(new u(this.scene,c,s,o,a,l,p,h,f))}),g.register("circle",function(c,s,o,a,l){return this.displayList.add(new u(this.scene,c,s,o,0,360,!1,a,l))})},2213:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(58356),c=e(23560),r.exports={renderWebGL:g,renderCanvas:c}},58356:(r,m,e)=>{var u=e(73329),g=e(19543),c=e(50262),s=function(o,a,l,p){l.addToRenderList(a);var h=o.pipelines.set(a.pipeline),f=u(a,l,p),v=h.calcMatrix.copyFrom(f.calc),y=a._displayOriginX,x=a._displayOriginY,S=l.alpha*a.alpha;o.pipelines.preBatch(a),a.isFilled&&g(h,v,a,S,y,x),a.isStroked&&c(h,a,S,y,x),o.pipelines.postBatch(a)};r.exports=s},15220:(r,m,e)=>{var u=e(56694),g=e(87203),c=e(11117),s=e(74118),o=e(91461),a=new u({Extends:o,Mixins:[g],initialize:function(p,h,f,v,y,x){h===void 0&&(h=0),f===void 0&&(f=0),o.call(this,p,"Curve",v),this._smoothness=32,this._curveBounds=new s,this.closePath=!1,this.setPosition(h,f),y!==void 0&&this.setFillStyle(y,x),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){var l=this._curveBounds,p=this._smoothness;this.geom.getBounds(l,p),this.setSize(l.width,l.height),this.updateDisplayOrigin();for(var h=[],f=this.geom.getPoints(p),v=0;v<f.length;v++)h.push(f[v].x,f[v].y);return h.push(f[0].x,f[0].y),this.pathIndexes=c(h),this.pathData=h,this}});r.exports=a},4024:(r,m,e)=>{var u=e(15608),g=e(17876),c=e(49584),s=function(o,a,l,p){l.addToRenderList(a);var h=o.currentContext;if(c(o,h,a,l,p)){var f=a._displayOriginX+a._curveBounds.x,v=a._displayOriginY+a._curveBounds.y,y=a.pathData,x=y.length-1,S=y[0]-f,E=y[1]-v;h.beginPath(),h.moveTo(S,E),a.closePath||(x-=2);for(var b=2;b<x;b+=2){var T=y[b]-f,P=y[b+1]-v;h.lineTo(T,P)}a.closePath&&h.closePath(),a.isFilled&&(u(h,a),h.fill()),a.isStroked&&(g(h,a),h.stroke()),h.restore()}};r.exports=s},10147:(r,m,e)=>{var u=e(61286),g=e(15220);u.register("curve",function(c,s,o,a,l){return this.displayList.add(new g(this.scene,c,s,o,a,l))})},87203:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(82958),c=e(4024),r.exports={renderWebGL:g,renderCanvas:c}},82958:(r,m,e)=>{var u=e(19543),g=e(73329),c=e(50262),s=function(o,a,l,p){l.addToRenderList(a);var h=o.pipelines.set(a.pipeline),f=g(a,l,p),v=h.calcMatrix.copyFrom(f.calc),y=a._displayOriginX+a._curveBounds.x,x=a._displayOriginY+a._curveBounds.y,S=l.alpha*a.alpha;o.pipelines.preBatch(a),a.isFilled&&u(h,v,a,S,y,x),a.isStroked&&c(h,a,S,y,x),o.pipelines.postBatch(a)};r.exports=s},28591:(r,m,e)=>{var u=e(56694),g=e(11117),c=e(84171),s=e(95669),o=e(91461),a=new u({Extends:o,Mixins:[c],initialize:function(p,h,f,v,y,x,S){h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=128),y===void 0&&(y=128),o.call(this,p,"Ellipse",new s(v/2,y/2,v,y)),this._smoothness=64,this.setPosition(h,f),this.width=v,this.height=y,x!==void 0&&this.setFillStyle(x,S),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(l){this._smoothness=l,this.updateData()}},setSize:function(l,p){return this.width=l,this.height=p,this.geom.setPosition(l/2,p/2),this.geom.setSize(l,p),this.updateData()},setSmoothness:function(l){return this._smoothness=l,this.updateData()},updateData:function(){for(var l=[],p=this.geom.getPoints(this._smoothness),h=0;h<p.length;h++)l.push(p[h].x,p[h].y);return l.push(p[0].x,p[0].y),this.pathIndexes=g(l),this.pathData=l,this}});r.exports=a},55881:(r,m,e)=>{var u=e(15608),g=e(17876),c=e(49584),s=function(o,a,l,p){l.addToRenderList(a);var h=o.currentContext;if(c(o,h,a,l,p)){var f=a._displayOriginX,v=a._displayOriginY,y=a.pathData,x=y.length-1,S=y[0]-f,E=y[1]-v;h.beginPath(),h.moveTo(S,E),a.closePath||(x-=2);for(var b=2;b<x;b+=2){var T=y[b]-f,P=y[b+1]-v;h.lineTo(T,P)}h.closePath(),a.isFilled&&(u(h,a),h.fill()),a.isStroked&&(g(h,a),h.stroke()),h.restore()}};r.exports=s},99869:(r,m,e)=>{var u=e(28591),g=e(61286);g.register("ellipse",function(c,s,o,a,l,p){return this.displayList.add(new u(this.scene,c,s,o,a,l,p))})},84171:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(17554),c=e(55881),r.exports={renderWebGL:g,renderCanvas:c}},17554:(r,m,e)=>{var u=e(19543),g=e(73329),c=e(50262),s=function(o,a,l,p){l.addToRenderList(a);var h=o.pipelines.set(a.pipeline),f=g(a,l,p),v=h.calcMatrix.copyFrom(f.calc),y=a._displayOriginX,x=a._displayOriginY,S=l.alpha*a.alpha;o.pipelines.preBatch(a),a.isFilled&&u(h,v,a,S,y,x),a.isStroked&&c(h,a,S,y,x),o.pipelines.postBatch(a)};r.exports=s},39169:(r,m,e)=>{var u=e(56694),g=e(91461),c=e(88059),s=new u({Extends:g,Mixins:[c],initialize:function(a,l,p,h,f,v,y,x,S,E,b){l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=128),f===void 0&&(f=128),v===void 0&&(v=32),y===void 0&&(y=32),g.call(this,a,"Grid",null),this.cellWidth=v,this.cellHeight=y,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(l,p),this.setSize(h,f),this.setFillStyle(x,S),E!==void 0&&this.setOutlineStyle(E,b),this.updateDisplayOrigin()},setFillStyle:function(o,a){return a===void 0&&(a=1),o===void 0?this.showCells=!1:(this.fillColor=o,this.fillAlpha=a,this.showCells=!0),this},setAltFillStyle:function(o,a){return a===void 0&&(a=1),o===void 0?this.showAltCells=!1:(this.altFillColor=o,this.altFillAlpha=a,this.showAltCells=!0),this},setOutlineStyle:function(o,a){return a===void 0&&(a=1),o===void 0?this.showOutline=!1:(this.outlineFillColor=o,this.outlineFillAlpha=a,this.showOutline=!0),this}});r.exports=s},95525:(r,m,e)=>{var u=e(15608),g=e(17876),c=e(49584),s=function(o,a,l,p){l.addToRenderList(a);var h=o.currentContext;if(c(o,h,a,l,p)){var f=-a._displayOriginX,v=-a._displayOriginY,y=l.alpha*a.alpha,x=a.width,S=a.height,E=a.cellWidth,b=a.cellHeight,T=Math.ceil(x/E),P=Math.ceil(S/b),C=E,w=b,A=E-(T*E-x),R=b-(P*b-S),I=a.showCells,L=a.showAltCells,O=a.showOutline,D=0,V=0,B=0,U=0,W=0;if(O&&(C--,w--,A===E&&A--,R===b&&R--),I&&a.fillAlpha>0)for(u(h,a),V=0;V<P;V++)for(L&&(B=V%2),D=0;D<T;D++){if(L&&B){B=0;continue}B++,U=D<T-1?C:A,W=V<P-1?w:R,h.fillRect(f+D*E,v+V*b,U,W)}if(L&&a.altFillAlpha>0)for(u(h,a,a.altFillColor,a.altFillAlpha*y),V=0;V<P;V++)for(L&&(B=V%2),D=0;D<T;D++){if(L&&!B){B=1;continue}B=0,U=D<T-1?C:A,W=V<P-1?w:R,h.fillRect(f+D*E,v+V*b,U,W)}if(O&&a.outlineFillAlpha>0){for(g(h,a,a.outlineFillColor,a.outlineFillAlpha*y),D=1;D<T;D++){var F=D*E;h.beginPath(),h.moveTo(F+f,v),h.lineTo(F+f,S+v),h.stroke()}for(V=1;V<P;V++){var G=V*b;h.beginPath(),h.moveTo(f,G+v),h.lineTo(f+x,G+v),h.stroke()}}h.restore()}};r.exports=s},9326:(r,m,e)=>{var u=e(61286),g=e(39169);u.register("grid",function(c,s,o,a,l,p,h,f,v,y){return this.displayList.add(new g(this.scene,c,s,o,a,l,p,h,f,v,y))})},88059:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(50639),c=e(95525),r.exports={renderWebGL:g,renderCanvas:c}},50639:(r,m,e)=>{var u=e(73329),g=e(75512),c=function(s,o,a,l){a.addToRenderList(o);var p=s.pipelines.set(o.pipeline),h=u(o,a,l),f=p.calcMatrix.copyFrom(h.calc);f.translate(-o._displayOriginX,-o._displayOriginY);var v=a.alpha*o.alpha,y=o.width,x=o.height,S=o.cellWidth,E=o.cellHeight,b=Math.ceil(y/S),T=Math.ceil(x/E),P=S,C=E,w=S-(b*S-y),A=E-(T*E-x),R,I,L=o.showCells,O=o.showAltCells,D=o.showOutline,V=0,B=0,U=0,W=0,F=0;if(D&&(P--,C--,w===S&&w--,A===E&&A--),s.pipelines.preBatch(o),L&&o.fillAlpha>0)for(R=p.fillTint,I=g.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*v),R.TL=I,R.TR=I,R.BL=I,R.BR=I,B=0;B<T;B++)for(O&&(U=B%2),V=0;V<b;V++){if(O&&U){U=0;continue}U++,W=V<b-1?P:w,F=B<T-1?C:A,p.batchFillRect(V*S,B*E,W,F)}if(O&&o.altFillAlpha>0)for(R=p.fillTint,I=g.getTintAppendFloatAlpha(o.altFillColor,o.altFillAlpha*v),R.TL=I,R.TR=I,R.BL=I,R.BR=I,B=0;B<T;B++)for(O&&(U=B%2),V=0;V<b;V++){if(O&&!U){U=1;continue}U=0,W=V<b-1?P:w,F=B<T-1?C:A,p.batchFillRect(V*S,B*E,W,F)}if(D&&o.outlineFillAlpha>0){var G=p.strokeTint,M=g.getTintAppendFloatAlpha(o.outlineFillColor,o.outlineFillAlpha*v);for(G.TL=M,G.TR=M,G.BL=M,G.BR=M,V=1;V<b;V++){var N=V*S;p.batchLine(N,0,N,x,1,1,1,0,!1)}for(B=1;B<T;B++){var k=B*E;p.batchLine(0,k,y,k,1,1,1,0,!1)}}s.pipelines.postBatch(o)};r.exports=c},4415:(r,m,e)=>{var u=e(72296),g=e(56694),c=e(91461),s=new g({Extends:c,Mixins:[u],initialize:function(a,l,p,h,f,v,y,x){l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=48),f===void 0&&(f=32),v===void 0&&(v=15658734),y===void 0&&(y=10066329),x===void 0&&(x=13421772),c.call(this,a,"IsoBox",null),this.projection=4,this.fillTop=v,this.fillLeft=y,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(l,p),this.setSize(h,f),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setFaces:function(o,a,l){return o===void 0&&(o=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),this.showTop=o,this.showLeft=a,this.showRight=l,this},setFillStyle:function(o,a,l){return this.fillTop=o,this.fillLeft=a,this.fillRight=l,this.isFilled=!0,this}});r.exports=s},32884:(r,m,e)=>{var u=e(15608),g=e(49584),c=function(s,o,a,l){a.addToRenderList(o);var p=s.currentContext;if(g(s,p,o,a,l)&&o.isFilled){var h=o.width,f=o.height,v=h/2,y=h/o.projection;o.showTop&&(u(p,o,o.fillTop),p.beginPath(),p.moveTo(-v,-f),p.lineTo(0,-y-f),p.lineTo(v,-f),p.lineTo(v,-1),p.lineTo(0,y-1),p.lineTo(-v,-1),p.lineTo(-v,-f),p.fill()),o.showLeft&&(u(p,o,o.fillLeft),p.beginPath(),p.moveTo(-v,0),p.lineTo(0,y),p.lineTo(0,y-f),p.lineTo(-v,-f),p.lineTo(-v,0),p.fill()),o.showRight&&(u(p,o,o.fillRight),p.beginPath(),p.moveTo(v,0),p.lineTo(0,y),p.lineTo(0,y-f),p.lineTo(v,-f),p.lineTo(v,0),p.fill()),p.restore()}};r.exports=c},88154:(r,m,e)=>{var u=e(61286),g=e(4415);u.register("isobox",function(c,s,o,a,l,p,h){return this.displayList.add(new g(this.scene,c,s,o,a,l,p,h))})},72296:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(33101),c=e(32884),r.exports={renderWebGL:g,renderCanvas:c}},33101:(r,m,e)=>{var u=e(73329),g=e(75512),c=function(s,o,a,l){a.addToRenderList(o);var p=s.pipelines.set(o.pipeline),h=u(o,a,l),f=p.calcMatrix.copyFrom(h.calc),v=o.width,y=o.height,x=v/2,S=v/o.projection,E=a.alpha*o.alpha;if(o.isFilled){var b,T,P,C,w,A,R,I,L;s.pipelines.preBatch(o),o.showTop&&(b=g.getTintAppendFloatAlpha(o.fillTop,E),T=f.getX(-x,-y),P=f.getY(-x,-y),C=f.getX(0,-S-y),w=f.getY(0,-S-y),A=f.getX(x,-y),R=f.getY(x,-y),I=f.getX(0,S-y),L=f.getY(0,S-y),p.batchQuad(o,T,P,C,w,A,R,I,L,0,0,1,1,b,b,b,b,2)),o.showLeft&&(b=g.getTintAppendFloatAlpha(o.fillLeft,E),T=f.getX(-x,0),P=f.getY(-x,0),C=f.getX(0,S),w=f.getY(0,S),A=f.getX(0,S-y),R=f.getY(0,S-y),I=f.getX(-x,-y),L=f.getY(-x,-y),p.batchQuad(o,T,P,C,w,A,R,I,L,0,0,1,1,b,b,b,b,2)),o.showRight&&(b=g.getTintAppendFloatAlpha(o.fillRight,E),T=f.getX(x,0),P=f.getY(x,0),C=f.getX(0,S),w=f.getY(0,S),A=f.getX(0,S-y),R=f.getY(0,S-y),I=f.getX(x,-y),L=f.getY(x,-y),p.batchQuad(o,T,P,C,w,A,R,I,L,0,0,1,1,b,b,b,b,2)),s.pipelines.postBatch(o)}};r.exports=c},65159:(r,m,e)=>{var u=e(56694),g=e(93387),c=e(91461),s=new u({Extends:c,Mixins:[g],initialize:function(a,l,p,h,f,v,y,x,S){l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h=48),f===void 0&&(f=32),v===void 0&&(v=!1),y===void 0&&(y=15658734),x===void 0&&(x=10066329),S===void 0&&(S=13421772),c.call(this,a,"IsoTriangle",null),this.projection=4,this.fillTop=y,this.fillLeft=x,this.fillRight=S,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=v,this.isFilled=!0,this.setPosition(l,p),this.setSize(h,f),this.updateDisplayOrigin()},setProjection:function(o){return this.projection=o,this},setReversed:function(o){return this.isReversed=o,this},setFaces:function(o,a,l){return o===void 0&&(o=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),this.showTop=o,this.showLeft=a,this.showRight=l,this},setFillStyle:function(o,a,l){return this.fillTop=o,this.fillLeft=a,this.fillRight=l,this.isFilled=!0,this}});r.exports=s},9923:(r,m,e)=>{var u=e(15608),g=e(49584),c=function(s,o,a,l){a.addToRenderList(o);var p=s.currentContext;if(g(s,p,o,a,l)&&o.isFilled){var h=o.width,f=o.height,v=h/2,y=h/o.projection,x=o.isReversed;o.showTop&&x&&(u(p,o,o.fillTop),p.beginPath(),p.moveTo(-v,-f),p.lineTo(0,-y-f),p.lineTo(v,-f),p.lineTo(0,y-f),p.fill()),o.showLeft&&(u(p,o,o.fillLeft),p.beginPath(),x?(p.moveTo(-v,-f),p.lineTo(0,y),p.lineTo(0,y-f)):(p.moveTo(-v,0),p.lineTo(0,y),p.lineTo(0,y-f)),p.fill()),o.showRight&&(u(p,o,o.fillRight),p.beginPath(),x?(p.moveTo(v,-f),p.lineTo(0,y),p.lineTo(0,y-f)):(p.moveTo(v,0),p.lineTo(0,y),p.lineTo(0,y-f)),p.fill()),p.restore()}};r.exports=c},67765:(r,m,e)=>{var u=e(61286),g=e(65159);u.register("isotriangle",function(c,s,o,a,l,p,h,f){return this.displayList.add(new g(this.scene,c,s,o,a,l,p,h,f))})},93387:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(54946),c=e(9923),r.exports={renderWebGL:g,renderCanvas:c}},54946:(r,m,e)=>{var u=e(73329),g=e(75512),c=function(s,o,a,l){a.addToRenderList(o);var p=s.pipelines.set(o.pipeline),h=u(o,a,l),f=p.calcMatrix.copyFrom(h.calc),v=o.width,y=o.height,x=v/2,S=v/o.projection,E=o.isReversed,b=a.alpha*o.alpha;if(o.isFilled){s.pipelines.preBatch(o);var T,P,C,w,A,R,I;if(o.showTop&&E){T=g.getTintAppendFloatAlpha(o.fillTop,b),P=f.getX(-x,-y),C=f.getY(-x,-y),w=f.getX(0,-S-y),A=f.getY(0,-S-y),R=f.getX(x,-y),I=f.getY(x,-y);var L=f.getX(0,S-y),O=f.getY(0,S-y);p.batchQuad(o,P,C,w,A,R,I,L,O,0,0,1,1,T,T,T,T,2)}o.showLeft&&(T=g.getTintAppendFloatAlpha(o.fillLeft,b),E?(P=f.getX(-x,-y),C=f.getY(-x,-y),w=f.getX(0,S),A=f.getY(0,S),R=f.getX(0,S-y),I=f.getY(0,S-y)):(P=f.getX(-x,0),C=f.getY(-x,0),w=f.getX(0,S),A=f.getY(0,S),R=f.getX(0,S-y),I=f.getY(0,S-y)),p.batchTri(o,P,C,w,A,R,I,0,0,1,1,T,T,T,2)),o.showRight&&(T=g.getTintAppendFloatAlpha(o.fillRight,b),E?(P=f.getX(x,-y),C=f.getY(x,-y),w=f.getX(0,S),A=f.getY(0,S),R=f.getX(0,S-y),I=f.getY(0,S-y)):(P=f.getX(x,0),C=f.getY(x,0),w=f.getX(0,S),A=f.getY(0,S),R=f.getX(0,S-y),I=f.getY(0,S-y)),p.batchTri(o,P,C,w,A,R,I,0,0,1,1,T,T,T,2)),s.pipelines.postBatch(o)}};r.exports=c},579:(r,m,e)=>{var u=e(56694),g=e(91461),c=e(88829),s=e(52660),o=new u({Extends:g,Mixins:[s],initialize:function(l,p,h,f,v,y,x,S,E){p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=128),x===void 0&&(x=0),g.call(this,l,"Line",new c(f,v,y,x));var b=Math.max(1,this.geom.right-this.geom.left),T=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(p,h),this.setSize(b,T),S!==void 0&&this.setStrokeStyle(1,S,E),this.updateDisplayOrigin()},setLineWidth:function(a,l){return l===void 0&&(l=a),this._startWidth=a,this._endWidth=l,this.lineWidth=a,this},setTo:function(a,l,p,h){return this.geom.setTo(a,l,p,h),this}});r.exports=o},52044:(r,m,e)=>{var u=e(17876),g=e(49584),c=function(s,o,a,l){a.addToRenderList(o);var p=s.currentContext;if(g(s,p,o,a,l)){var h=o._displayOriginX,f=o._displayOriginY;o.isStroked&&(u(p,o),p.beginPath(),p.moveTo(o.geom.x1-h,o.geom.y1-f),p.lineTo(o.geom.x2-h,o.geom.y2-f),p.stroke()),p.restore()}};r.exports=c},85665:(r,m,e)=>{var u=e(61286),g=e(579);u.register("line",function(c,s,o,a,l,p,h,f){return this.displayList.add(new g(this.scene,c,s,o,a,l,p,h,f))})},52660:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(46952),c=e(52044),r.exports={renderWebGL:g,renderCanvas:c}},46952:(r,m,e)=>{var u=e(73329),g=e(75512),c=function(s,o,a,l){a.addToRenderList(o);var p=s.pipelines.set(o.pipeline),h=u(o,a,l);p.calcMatrix.copyFrom(h.calc);var f=o._displayOriginX,v=o._displayOriginY,y=a.alpha*o.alpha;if(s.pipelines.preBatch(o),o.isStroked){var x=p.strokeTint,S=g.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*y);x.TL=S,x.TR=S,x.BL=S,x.BR=S;var E=o._startWidth,b=o._endWidth;p.batchLine(o.geom.x1-f,o.geom.y1-v,o.geom.x2-f,o.geom.y2-v,E,b,1,0,!1,h.sprite,h.camera)}s.pipelines.postBatch(o)};r.exports=c},91249:(r,m,e)=>{var u=e(70573),g=e(56694),c=e(11117),s=e(14045),o=e(8580),a=e(91461),l=e(18974),p=new g({Extends:a,Mixins:[u],initialize:function(f,v,y,x,S,E){v===void 0&&(v=0),y===void 0&&(y=0),a.call(this,f,"Polygon",new o(x));var b=s(this.geom);this.setPosition(v,y),this.setSize(b.width,b.height),S!==void 0&&this.setFillStyle(S,E),this.updateDisplayOrigin(),this.updateData()},smooth:function(h){h===void 0&&(h=1);for(var f=0;f<h;f++)l(this.geom);return this.updateData()},setTo:function(h){this.geom.setTo(h);var f=s(this.geom);return this.setSize(f.width,f.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var h=[],f=this.geom.points,v=0;v<f.length;v++)h.push(f[v].x,f[v].y);return h.push(f[0].x,f[0].y),this.pathIndexes=c(h),this.pathData=h,this}});r.exports=p},40834:(r,m,e)=>{var u=e(15608),g=e(17876),c=e(49584),s=function(o,a,l,p){l.addToRenderList(a);var h=o.currentContext;if(c(o,h,a,l,p)){var f=a._displayOriginX,v=a._displayOriginY,y=a.pathData,x=y.length-1,S=y[0]-f,E=y[1]-v;h.beginPath(),h.moveTo(S,E),a.closePath||(x-=2);for(var b=2;b<x;b+=2){var T=y[b]-f,P=y[b+1]-v;h.lineTo(T,P)}a.closePath&&h.closePath(),a.isFilled&&(u(h,a),h.fill()),a.isStroked&&(g(h,a),h.stroke()),h.restore()}};r.exports=s},88203:(r,m,e)=>{var u=e(61286),g=e(91249);u.register("polygon",function(c,s,o,a,l){return this.displayList.add(new g(this.scene,c,s,o,a,l))})},70573:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(72841),c=e(40834),r.exports={renderWebGL:g,renderCanvas:c}},72841:(r,m,e)=>{var u=e(19543),g=e(73329),c=e(50262),s=function(o,a,l,p){l.addToRenderList(a);var h=o.pipelines.set(a.pipeline),f=g(a,l,p),v=h.calcMatrix.copyFrom(f.calc),y=a._displayOriginX,x=a._displayOriginY,S=l.alpha*a.alpha;o.pipelines.preBatch(a),a.isFilled&&u(h,v,a,S,y,x),a.isStroked&&c(h,a,S,y,x),o.pipelines.postBatch(a)};r.exports=s},517:(r,m,e)=>{var u=e(56694),g=e(74118),c=e(91461),s=e(37673),o=new u({Extends:c,Mixins:[s],initialize:function(l,p,h,f,v,y,x){p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=128),v===void 0&&(v=128),c.call(this,l,"Rectangle",new g(0,0,f,v)),this.setPosition(p,h),this.setSize(f,v),y!==void 0&&this.setFillStyle(y,x),this.updateDisplayOrigin(),this.updateData()},setSize:function(a,l){this.width=a,this.height=l,this.geom.setSize(a,l),this.updateData(),this.updateDisplayOrigin();var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=a,p.hitArea.height=l),this},updateData:function(){var a=[],l=this.geom,p=this._tempLine;return l.getLineA(p),a.push(p.x1,p.y1,p.x2,p.y2),l.getLineB(p),a.push(p.x2,p.y2),l.getLineC(p),a.push(p.x2,p.y2),l.getLineD(p),a.push(p.x2,p.y2),this.pathData=a,this}});r.exports=o},4091:(r,m,e)=>{var u=e(15608),g=e(17876),c=e(49584),s=function(o,a,l,p){l.addToRenderList(a);var h=o.currentContext;if(c(o,h,a,l,p)){var f=a._displayOriginX,v=a._displayOriginY;a.isFilled&&(u(h,a),h.fillRect(-f,-v,a.width,a.height)),a.isStroked&&(g(h,a),h.beginPath(),h.rect(-f,-v,a.width,a.height),h.stroke()),h.restore()}};r.exports=s},94355:(r,m,e)=>{var u=e(61286),g=e(517);u.register("rectangle",function(c,s,o,a,l,p){return this.displayList.add(new g(this.scene,c,s,o,a,l,p))})},37673:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(43532),c=e(4091),r.exports={renderWebGL:g,renderCanvas:c}},43532:(r,m,e)=>{var u=e(73329),g=e(50262),c=e(75512),s=function(o,a,l,p){l.addToRenderList(a);var h=o.pipelines.set(a.pipeline),f=u(a,l,p);h.calcMatrix.copyFrom(f.calc);var v=a._displayOriginX,y=a._displayOriginY,x=l.alpha*a.alpha;if(o.pipelines.preBatch(a),a.isFilled){var S=h.fillTint,E=c.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*x);S.TL=E,S.TR=E,S.BL=E,S.BR=E,h.batchFillRect(-v,-y,a.width,a.height)}a.isStroked&&g(h,a,x,v,y),o.pipelines.postBatch(a)};r.exports=s},77843:(r,m,e)=>{var u=e(87956),g=e(56694),c=e(11117),s=e(91461),o=new g({Extends:s,Mixins:[u],initialize:function(l,p,h,f,v,y,x,S){p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=5),v===void 0&&(v=32),y===void 0&&(y=64),s.call(this,l,"Star",null),this._points=f,this._innerRadius=v,this._outerRadius=y,this.setPosition(p,h),this.setSize(y*2,y*2),x!==void 0&&this.setFillStyle(x,S),this.updateDisplayOrigin(),this.updateData()},setPoints:function(a){return this._points=a,this.updateData()},setInnerRadius:function(a){return this._innerRadius=a,this.updateData()},setOuterRadius:function(a){return this._outerRadius=a,this.updateData()},points:{get:function(){return this._points},set:function(a){this._points=a,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(a){this._innerRadius=a,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(a){this._outerRadius=a,this.updateData()}},updateData:function(){var a=[],l=this._points,p=this._innerRadius,h=this._outerRadius,f=Math.PI/2*3,v=Math.PI/l,y=h,x=h;a.push(y,x+-h);for(var S=0;S<l;S++)a.push(y+Math.cos(f)*h,x+Math.sin(f)*h),f+=v,a.push(y+Math.cos(f)*p,x+Math.sin(f)*p),f+=v;return a.push(y,x+-h),this.pathIndexes=c(a),this.pathData=a,this}});r.exports=o},11401:(r,m,e)=>{var u=e(15608),g=e(17876),c=e(49584),s=function(o,a,l,p){l.addToRenderList(a);var h=o.currentContext;if(c(o,h,a,l,p)){var f=a._displayOriginX,v=a._displayOriginY,y=a.pathData,x=y.length-1,S=y[0]-f,E=y[1]-v;h.beginPath(),h.moveTo(S,E),a.closePath||(x-=2);for(var b=2;b<x;b+=2){var T=y[b]-f,P=y[b+1]-v;h.lineTo(T,P)}h.closePath(),a.isFilled&&(u(h,a),h.fill()),a.isStroked&&(g(h,a),h.stroke()),h.restore()}};r.exports=s},23962:(r,m,e)=>{var u=e(77843),g=e(61286);g.register("star",function(c,s,o,a,l,p,h){return this.displayList.add(new u(this.scene,c,s,o,a,l,p,h))})},87956:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(12037),c=e(11401),r.exports={renderWebGL:g,renderCanvas:c}},12037:(r,m,e)=>{var u=e(19543),g=e(73329),c=e(50262),s=function(o,a,l,p){l.addToRenderList(a);var h=o.pipelines.set(a.pipeline),f=g(a,l,p),v=h.calcMatrix.copyFrom(f.calc),y=a._displayOriginX,x=a._displayOriginY,S=l.alpha*a.alpha;o.pipelines.preBatch(a),a.isFilled&&u(h,v,a,S,y,x),a.isStroked&&c(h,a,S,y,x),o.pipelines.postBatch(a)};r.exports=s},21873:(r,m,e)=>{var u=e(56694),g=e(91461),c=e(66349),s=e(70498),o=new u({Extends:g,Mixins:[s],initialize:function(l,p,h,f,v,y,x,S,E,b,T){p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=128),y===void 0&&(y=64),x===void 0&&(x=0),S===void 0&&(S=128),E===void 0&&(E=128),g.call(this,l,"Triangle",new c(f,v,y,x,S,E));var P=this.geom.right-this.geom.left,C=this.geom.bottom-this.geom.top;this.setPosition(p,h),this.setSize(P,C),b!==void 0&&this.setFillStyle(b,T),this.updateDisplayOrigin(),this.updateData()},setTo:function(a,l,p,h,f,v){return this.geom.setTo(a,l,p,h,f,v),this.updateData()},updateData:function(){var a=[],l=this.geom,p=this._tempLine;return l.getLineA(p),a.push(p.x1,p.y1,p.x2,p.y2),l.getLineB(p),a.push(p.x2,p.y2),l.getLineC(p),a.push(p.x2,p.y2),this.pathData=a,this}});r.exports=o},60213:(r,m,e)=>{var u=e(15608),g=e(17876),c=e(49584),s=function(o,a,l,p){l.addToRenderList(a);var h=o.currentContext;if(c(o,h,a,l,p)){var f=a._displayOriginX,v=a._displayOriginY,y=a.geom.x1-f,x=a.geom.y1-v,S=a.geom.x2-f,E=a.geom.y2-v,b=a.geom.x3-f,T=a.geom.y3-v;h.beginPath(),h.moveTo(y,x),h.lineTo(S,E),h.lineTo(b,T),h.closePath(),a.isFilled&&(u(h,a),h.fill()),a.isStroked&&(g(h,a),h.stroke()),h.restore()}};r.exports=s},79296:(r,m,e)=>{var u=e(61286),g=e(21873);u.register("triangle",function(c,s,o,a,l,p,h,f,v,y){return this.displayList.add(new g(this.scene,c,s,o,a,l,p,h,f,v,y))})},70498:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(72291),c=e(60213),r.exports={renderWebGL:g,renderCanvas:c}},72291:(r,m,e)=>{var u=e(73329),g=e(50262),c=e(75512),s=function(o,a,l,p){l.addToRenderList(a);var h=o.pipelines.set(a.pipeline),f=u(a,l,p);h.calcMatrix.copyFrom(f.calc);var v=a._displayOriginX,y=a._displayOriginY,x=l.alpha*a.alpha;if(o.pipelines.preBatch(a),a.isFilled){var S=h.fillTint,E=c.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*x);S.TL=E,S.TR=E,S.BL=E,S.BR=E;var b=a.geom.x1-v,T=a.geom.y1-y,P=a.geom.x2-v,C=a.geom.y2-y,w=a.geom.x3-v,A=a.geom.y3-y;h.batchFillTriangle(b,T,P,C,w,A,f.sprite,f.camera)}a.isStroked&&g(h,a,x,v,y),o.pipelines.postBatch(a)};r.exports=s},13747:(r,m,e)=>{var u=e(16569),g=e(56694),c=e(64937),s=e(89980),o=e(20791),a=new g({Extends:s,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,o],initialize:function(p,h,f,v,y){s.call(this,p,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(v,y),this.setPosition(h,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(l,p){this.anims.update(l,p)},play:function(l,p){return this.anims.play(l,p)},playReverse:function(l,p){return this.anims.playReverse(l,p)},playAfterDelay:function(l,p){return this.anims.playAfterDelay(l,p)},playAfterRepeat:function(l,p){return this.anims.playAfterRepeat(l,p)},chain:function(l){return this.anims.chain(l)},stop:function(){return this.anims.stop()},stopAfterDelay:function(l){return this.anims.stopAfterDelay(l)},stopAfterRepeat:function(l){return this.anims.stopAfterRepeat(l)},stopOnFrame:function(l){return this.anims.stopOnFrame(l)},toJSON:function(){return c.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});r.exports=a},27573:r=>{var m=function(e,u,g,c){g.addToRenderList(u),e.batchSprite(u,u.frame,g,c)};r.exports=m},89219:(r,m,e)=>{var u=e(88933),g=e(32291),c=e(99325),s=e(20494),o=e(13747);c.register("sprite",function(a,l){a===void 0&&(a={});var p=s(a,"key",null),h=s(a,"frame",null),f=new o(this.scene,0,0,p,h);return l!==void 0&&(a.add=l),u(this.scene,f,a),g(f,a),f})},66135:(r,m,e)=>{var u=e(61286),g=e(13747);u.register("sprite",function(c,s,o,a){return this.displayList.add(new g(this.scene,c,s,o,a))})},20791:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(21034),c=e(27573),r.exports={renderWebGL:g,renderCanvas:c}},21034:r=>{var m=function(e,u,g,c){g.addToRenderList(u),u.pipeline.batchSprite(u,g,c)};r.exports=m},32979:r=>{var m=function(e,u,g){var c=e.canvas,s=e.context,o=e.style,a=[],l=0,p=g.length;o.maxLines>0&&o.maxLines<g.length&&(p=o.maxLines),o.syncFont(c,s);for(var h=0;h<p;h++){var f=o.strokeThickness;f+=s.measureText(g[h]).width,o.wordWrap&&(f-=s.measureText(" ").width),a[h]=Math.ceil(f),l=Math.max(l,a[h])}var v=u.fontSize+o.strokeThickness,y=v*p,x=e.lineSpacing;return p>1&&(y+=x*(p-1)),{width:l,height:y,lines:p,lineWidths:a,lineSpacing:x,lineHeight:v}};r.exports=m},27030:(r,m,e)=>{var u=e(61068),g=function(c){var s=u.create(this),o=s.getContext("2d",{willReadFrequently:!0});c.syncFont(s,o);var a=o.measureText(c.testString);if("actualBoundingBoxAscent"in a){var l=a.actualBoundingBoxAscent,p=a.actualBoundingBoxDescent;return u.remove(s),{ascent:l,descent:p,fontSize:l+p}}var h=Math.ceil(a.width*c.baselineX),f=h,v=2*f;f=f*c.baselineY|0,s.width=h,s.height=v,o.fillStyle="#f00",o.fillRect(0,0,h,v),o.font=c._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(c.testString,0,f);var y={ascent:0,descent:0,fontSize:0},x=o.getImageData(0,0,h,v);if(!x)return y.ascent=f,y.descent=f+6,y.fontSize=y.ascent+y.descent,u.remove(s),y;var S=x.data,E=S.length,b=h*4,T,P,C=0,w=!1;for(T=0;T<f;T++){for(P=0;P<b;P+=4)if(S[C+P]!==255){w=!0;break}if(!w)C+=b;else break}for(y.ascent=f-T,C=E-b,w=!1,T=v;T>f;T--){for(P=0;P<b;P+=4)if(S[C+P]!==255){w=!0;break}if(!w)C-=b;else break}return y.descent=T-f,y.fontSize=y.ascent+y.descent,u.remove(s),y};r.exports=g},76555:(r,m,e)=>{var u=e(99584),g=e(61068),c=e(56694),s=e(64937),o=e(89980),a=e(32979),l=e(10850),p=e(55638),h=e(80032),f=e(74744),v=new c({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,h],initialize:function(x,S,E,b,T){S===void 0&&(S=0),E===void 0&&(E=0),o.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(S,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=g.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new f(this,T),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(b),T&&T.padding&&this.setPadding(T.padding),T&&T.lineSpacing&&this.setLineSpacing(T.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",u(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(y){var x=this.style;if(x.wordWrapCallback){var S=x.wordWrapCallback.call(x.wordWrapCallbackScope,y,this);return Array.isArray(S)&&(S=S.join(`
`)),S}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(y,this.context,this.style.wordWrapWidth):this.basicWordWrap(y,this.context,this.style.wordWrapWidth):y},advancedWordWrap:function(y,x,S){for(var E="",b=y.replace(/ +/gi," ").split(this.splitRegExp),T=b.length,P=0;P<T;P++){var C=b[P],w="";C=C.replace(/^ *|\s*$/gi,"");var A=x.measureText(C).width;if(A<S){E+=C+`
`;continue}for(var R=S,I=C.split(" "),L=0;L<I.length;L++){var O=I[L],D=O+" ",V=x.measureText(D).width;if(V>R){if(L===0){for(var B=D;B.length&&(B=B.slice(0,-1),V=x.measureText(B).width,!(V<=R)););if(!B.length)throw new Error("wordWrapWidth < a single character");var U=O.substr(B.length);I[L]=U,w+=B}var W=I[L].length?L:L+1,F=I.slice(W).join(" ").replace(/[ \n]*$/gi,"");b.splice(P+1,0,F),T=b.length;break}else w+=D,R-=V}E+=w.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(y,x,S){for(var E="",b=y.split(this.splitRegExp),T=b.length-1,P=x.measureText(" ").width,C=0;C<=T;C++){for(var w=S,A=b[C].split(" "),R=A.length-1,I=0;I<=R;I++){var L=A[I],O=x.measureText(L).width,D=O;I<R&&(D+=P),D>w&&I>0&&(E+=`
`,w=S),E+=L,I<R?(E+=" ",w-=D):w-=O}C<T&&(E+=`
`)}return E},getWrappedText:function(y){y===void 0&&(y=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(y);return x.split(this.splitRegExp)},setText:function(y){return!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y!==this._text&&(this._text=y.toString(),this.updateText()),this},appendText:function(y,x){x===void 0&&(x=!0),!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y=y.toString();var S=this._text.concat(x?`
`+y:y);return S!==this._text&&(this._text=S,this.updateText()),this},setStyle:function(y){return this.style.setStyle(y)},setFont:function(y){return this.style.setFont(y)},setFontFamily:function(y){return this.style.setFontFamily(y)},setFontSize:function(y){return this.style.setFontSize(y)},setFontStyle:function(y){return this.style.setFontStyle(y)},setFixedSize:function(y,x){return this.style.setFixedSize(y,x)},setBackgroundColor:function(y){return this.style.setBackgroundColor(y)},setFill:function(y){return this.style.setFill(y)},setColor:function(y){return this.style.setColor(y)},setStroke:function(y,x){return this.style.setStroke(y,x)},setShadow:function(y,x,S,E,b,T){return this.style.setShadow(y,x,S,E,b,T)},setShadowOffset:function(y,x){return this.style.setShadowOffset(y,x)},setShadowColor:function(y){return this.style.setShadowColor(y)},setShadowBlur:function(y){return this.style.setShadowBlur(y)},setShadowStroke:function(y){return this.style.setShadowStroke(y)},setShadowFill:function(y){return this.style.setShadowFill(y)},setWordWrapWidth:function(y,x){return this.style.setWordWrapWidth(y,x)},setWordWrapCallback:function(y,x){return this.style.setWordWrapCallback(y,x)},setAlign:function(y){return this.style.setAlign(y)},setResolution:function(y){return this.style.setResolution(y)},setLineSpacing:function(y){return this.lineSpacing=y,this.updateText()},setPadding:function(y,x,S,E){if(typeof y=="object"){var b=y,T=l(b,"x",null);T!==null?(y=T,S=T):(y=l(b,"left",0),S=l(b,"right",y));var P=l(b,"y",null);P!==null?(x=P,E=P):(x=l(b,"top",0),E=l(b,"bottom",x))}else y===void 0&&(y=0),x===void 0&&(x=y),S===void 0&&(S=y),E===void 0&&(E=x);return this.padding.left=y,this.padding.top=x,this.padding.right=S,this.padding.bottom=E,this.updateText()},setMaxLines:function(y){return this.style.setMaxLines(y)},updateText:function(){var y=this.canvas,x=this.context,S=this.style,E=S.resolution,b=S.metrics;S.syncFont(y,x);var T=this._text;(S.wordWrapWidth||S.wordWrapCallback)&&(T=this.runWordWrap(this._text));var P=T.split(this.splitRegExp),C=a(this,b,P),w=this.padding,A;S.fixedWidth===0?(this.width=C.width+w.left+w.right,A=C.width):(this.width=S.fixedWidth,A=this.width-w.left-w.right,A<C.width&&(A=C.width)),S.fixedHeight===0?this.height=C.height+w.top+w.bottom:this.height=S.fixedHeight;var R=this.width,I=this.height;this.updateDisplayOrigin(),R*=E,I*=E,R=Math.max(R,1),I=Math.max(I,1),y.width!==R||y.height!==I?(y.width=R,y.height=I,this.frame.setSize(R,I),S.syncFont(y,x),S.rtl&&(x.direction="rtl")):x.clearRect(0,0,R,I),x.save(),x.scale(E,E),S.backgroundColor&&(x.fillStyle=S.backgroundColor,x.fillRect(0,0,R,I)),S.syncStyle(y,x),x.translate(w.left,w.top);for(var L,O,D=0;D<C.lines;D++){if(L=S.strokeThickness/2,O=S.strokeThickness/2+D*C.lineHeight+b.ascent,D>0&&(O+=C.lineSpacing*D),S.rtl)L=R-L-w.left-w.right;else if(S.align==="right")L+=A-C.lineWidths[D];else if(S.align==="center")L+=(A-C.lineWidths[D])/2;else if(S.align==="justify"){var V=.85;if(C.lineWidths[D]/C.width>=V){var B=C.width-C.lineWidths[D],U=x.measureText(" ").width,W=P[D].trim(),F=W.split(" ");B+=(P[D].length-W.length)*U;for(var G=Math.floor(B/U),M=0;G>0;)F[M]+=" ",M=(M+1)%(F.length-1||1),--G;P[D]=F.join(" ")}}this.autoRound&&(L=Math.round(L),O=Math.round(O)),S.strokeThickness&&(S.syncShadow(x,S.shadowStroke),x.strokeText(P[D],L,O)),S.color&&(S.syncShadow(x,S.shadowFill),x.fillText(P[D],L,O))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(y,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var N=this.input;return N&&!N.customHitArea&&(N.hitArea.width=this.width,N.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(y){this.setText(y)}},toJSON:function(){var y=s.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return y.data=x,y},preDestroy:function(){this.style.rtl&&p(this.canvas),g.remove(this.canvas),this.texture.destroy()}});r.exports=v},71649:r=>{var m=function(e,u,g,c){u.width===0||u.height===0||(g.addToRenderList(u),e.batchSprite(u,u.frame,g,c))};r.exports=m},75397:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(76555);g.register("text",function(o,a){o===void 0&&(o={});var l=c(o,"text",""),p=c(o,"style",null),h=c(o,"padding",null);h!==null&&(p.padding=h);var f=new s(this.scene,0,0,l,p);return a!==void 0&&(o.add=a),u(this.scene,f,o),f.autoRound=c(o,"autoRound",!0),f.resolution=c(o,"resolution",1),f})},94627:(r,m,e)=>{var u=e(76555),g=e(61286);g.register("text",function(c,s,o,a){return this.displayList.add(new u(this.scene,c,s,o,a))})},80032:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(76128),c=e(71649),r.exports={renderWebGL:g,renderCanvas:c}},74744:(r,m,e)=>{var u=e(56694),g=e(20494),c=e(10850),s=e(27030),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},a=new u({initialize:function(p,h){this.parent=p,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(h,!1,!0)},setStyle:function(l,p,h){p===void 0&&(p=!0),h===void 0&&(h=!1),l&&l.hasOwnProperty("fontSize")&&typeof l.fontSize=="number"&&(l.fontSize=l.fontSize.toString()+"px");for(var f in o){var v=h?o[f][1]:this[f];f==="wordWrapCallback"||f==="wordWrapCallbackScope"?this[f]=c(l,o[f][0],v):this[f]=g(l,o[f][0],v)}var y=c(l,"font",null);y!==null&&this.setFont(y,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var x=c(l,"fill",null);x!==null&&(this.color=x);var S=c(l,"metrics",!1);return S?this.metrics={ascent:c(S,"ascent",0),descent:c(S,"descent",0),fontSize:c(S,"fontSize",0)}:(p||!this.metrics)&&(this.metrics=s(this)),p?this.parent.updateText():this.parent},syncFont:function(l,p){p.font=this._font},syncStyle:function(l,p){p.textBaseline="alphabetic",p.fillStyle=this.color,p.strokeStyle=this.stroke,p.lineWidth=this.strokeThickness,p.lineCap="round",p.lineJoin="round"},syncShadow:function(l,p){p?(l.shadowOffsetX=this.shadowOffsetX,l.shadowOffsetY=this.shadowOffsetY,l.shadowColor=this.shadowColor,l.shadowBlur=this.shadowBlur):(l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowColor=0,l.shadowBlur=0)},update:function(l){return l&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=s(this)),this.parent.updateText()},setFont:function(l,p){p===void 0&&(p=!0);var h=l,f="",v="";if(typeof l!="string")h=c(l,"fontFamily","Courier"),f=c(l,"fontSize","16px"),v=c(l,"fontStyle","");else{var y=l.split(" "),x=0;v=y.length>2?y[x++]:"",f=y[x++]||"16px",h=y[x++]||"Courier"}return(h!==this.fontFamily||f!==this.fontSize||v!==this.fontStyle)&&(this.fontFamily=h,this.fontSize=f,this.fontStyle=v,p&&this.update(!0)),this.parent},setFontFamily:function(l){return this.fontFamily!==l&&(this.fontFamily=l,this.update(!0)),this.parent},setFontStyle:function(l){return this.fontStyle!==l&&(this.fontStyle=l,this.update(!0)),this.parent},setFontSize:function(l){return typeof l=="number"&&(l=l.toString()+"px"),this.fontSize!==l&&(this.fontSize=l,this.update(!0)),this.parent},setTestString:function(l){return this.testString=l,this.update(!0)},setFixedSize:function(l,p){return this.fixedWidth=l,this.fixedHeight=p,l&&(this.parent.width=l),p&&(this.parent.height=p),this.update(!1)},setBackgroundColor:function(l){return this.backgroundColor=l,this.update(!1)},setFill:function(l){return this.color=l,this.update(!1)},setColor:function(l){return this.color=l,this.update(!1)},setResolution:function(l){return this.resolution=l,this.update(!1)},setStroke:function(l,p){return p===void 0&&(p=this.strokeThickness),l===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==l||this.strokeThickness!==p)&&(this.stroke=l,this.strokeThickness=p,this.update(!0)),this.parent},setShadow:function(l,p,h,f,v,y){return l===void 0&&(l=0),p===void 0&&(p=0),h===void 0&&(h="#000"),f===void 0&&(f=0),v===void 0&&(v=!1),y===void 0&&(y=!0),this.shadowOffsetX=l,this.shadowOffsetY=p,this.shadowColor=h,this.shadowBlur=f,this.shadowStroke=v,this.shadowFill=y,this.update(!1)},setShadowOffset:function(l,p){return l===void 0&&(l=0),p===void 0&&(p=l),this.shadowOffsetX=l,this.shadowOffsetY=p,this.update(!1)},setShadowColor:function(l){return l===void 0&&(l="#000"),this.shadowColor=l,this.update(!1)},setShadowBlur:function(l){return l===void 0&&(l=0),this.shadowBlur=l,this.update(!1)},setShadowStroke:function(l){return this.shadowStroke=l,this.update(!1)},setShadowFill:function(l){return this.shadowFill=l,this.update(!1)},setWordWrapWidth:function(l,p){return p===void 0&&(p=!1),this.wordWrapWidth=l,this.wordWrapUseAdvanced=p,this.update(!1)},setWordWrapCallback:function(l,p){return p===void 0&&(p=null),this.wordWrapCallback=l,this.wordWrapCallbackScope=p,this.update(!1)},setAlign:function(l){return l===void 0&&(l="left"),this.align=l,this.update(!1)},setMaxLines:function(l){return l===void 0&&(l=0),this.maxLines=l,this.update(!1)},getTextMetrics:function(){var l=this.metrics;return{ascent:l.ascent,descent:l.descent,fontSize:l.fontSize}},toJSON:function(){var l={};for(var p in o)l[p]=this[p];return l.metrics=this.getTextMetrics(),l},destroy:function(){this.parent=void 0}});r.exports=a},76128:(r,m,e)=>{var u=e(75512),g=function(c,s,o,a){if(!(s.width===0||s.height===0)){o.addToRenderList(s);var l=s.frame,p=l.width,h=l.height,f=u.getTintAppendFloatAlpha,v=c.pipelines.set(s.pipeline,s),y=v.setTexture2D(l.glTexture,s);v.batchTexture(s,l.glTexture,p,h,s.x,s.y,p/s.style.resolution,h/s.style.resolution,s.scaleX,s.scaleY,s.rotation,s.flipX,s.flipY,s.scrollFactorX,s.scrollFactorY,s.displayOriginX,s.displayOriginY,0,0,p,h,f(s.tintTopLeft,o.alpha*s._alphaTL),f(s.tintTopRight,o.alpha*s._alphaTR),f(s.tintBottomLeft,o.alpha*s._alphaBL),f(s.tintBottomRight,o.alpha*s._alphaBR),s.tintFill,0,0,o,a,!1,y)}};r.exports=g},35856:(r,m,e)=>{var u=e(61068),g=e(56694),c=e(64937),s=e(89980),o=e(3504),a=e(8213),l=e(9271),p=e(93736),h=8,f=new g({Extends:s,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Crop,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Tint,c.Transform,c.Visible,l],initialize:function(y,x,S,E,b,T,P){var C=y.sys.renderer;s.call(this,y,"TileSprite");var w=y.sys.textures.get(T),A=w.get(P);A.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),w=y.sys.textures.get("__MISSING"),A=w.get()),w.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),w=y.sys.textures.get("__MISSING"),A=w.get()),!E||!b?(E=A.width,b=A.height):(E=Math.floor(E),b=Math.floor(b)),this._tilePosition=new p,this._tileScale=new p(1,1),this.dirty=!1,this.renderer=C,this.canvas=u.create(this,E,b),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=w,this.displayFrame=A,this._crop=this.resetCropObject(),this.texture=y.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=o(A.width),this.potHeight=o(A.height),this.fillCanvas=u.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(x,S),this.setSize(E,b),this.setFrame(P),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(v,y){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(y)},setFrame:function(v){var y=this.displayTexture.get(v);return this.potWidth=o(y.width),this.potHeight=o(y.height),this.canvas.width=0,!y.cutWidth||!y.cutHeight?this.renderFlags&=~h:this.renderFlags|=h,this.displayFrame=y,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,y){return v!==void 0&&(this.tilePositionX=v),y!==void 0&&(this.tilePositionY=y),this},setTileScale:function(v,y){return v===void 0&&(v=this.tileScaleX),y===void 0&&(y=v),this.tileScaleX=v,this.tileScaleY=y,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var y=this.fillContext,x=this.fillCanvas,S=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(S=v.cutWidth,E=v.cutHeight),y.clearRect(0,0,S,E),x.width=S,x.height=E,y.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,S,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=y.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var y=this.context;this.scene.sys.game.config.antialias||a.disable(y);var x=this._tileScale.x,S=this._tileScale.y,E=this._tilePosition.x,b=this._tilePosition.y;y.clearRect(0,0,this.width,this.height),y.save(),y.scale(x,S),y.translate(-E,-b),y.fillStyle=this.fillPattern,y.fillRect(E,b,this.width/x,this.height/S),y.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),u.remove(this.canvas),u.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});r.exports=f},93305:r=>{var m=function(e,u,g,c){u.updateCanvas(),g.addToRenderList(u),e.batchSprite(u,u.frame,g,c)};r.exports=m},63950:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(35856);g.register("tileSprite",function(o,a){o===void 0&&(o={});var l=c(o,"x",0),p=c(o,"y",0),h=c(o,"width",512),f=c(o,"height",512),v=c(o,"key",""),y=c(o,"frame",""),x=new s(this.scene,l,p,h,f,v,y);return a!==void 0&&(o.add=a),u(this.scene,x,o),x})},20509:(r,m,e)=>{var u=e(35856),g=e(61286);g.register("tileSprite",function(c,s,o,a,l,p){return this.displayList.add(new u(this.scene,c,s,o,a,l,p))})},9271:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(74287),c=e(93305),r.exports={renderWebGL:g,renderCanvas:c}},74287:(r,m,e)=>{var u=e(75512),g=function(c,s,o,a){s.updateCanvas();var l=s.width,p=s.height;if(!(l===0||p===0)){o.addToRenderList(s);var h=u.getTintAppendFloatAlpha,f=c.pipelines.set(s.pipeline,s),v=f.setTexture2D(s.fillPattern,s);f.batchTexture(s,s.fillPattern,s.displayFrame.width*s.tileScaleX,s.displayFrame.height*s.tileScaleY,s.x,s.y,l,p,s.scaleX,s.scaleY,s.rotation,s.flipX,s.flipY,s.scrollFactorX,s.scrollFactorY,s.originX*l,s.originY*p,0,0,l,p,h(s.tintTopLeft,o.alpha*s._alphaTL),h(s.tintTopRight,o.alpha*s._alphaTR),h(s.tintBottomLeft,o.alpha*s._alphaBL),h(s.tintBottomRight,o.alpha*s._alphaBR),s.tintFill,s.tilePositionX%s.displayFrame.width/s.displayFrame.width,s.tilePositionY%s.displayFrame.height/s.displayFrame.height,o,a,!1,v)}};r.exports=g},8630:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(64937),s=e(56631),o=e(97081),a=e(89980),l=e(83392),p=e(76038),h=e(76583),f=e(77974),v=new g({Extends:a,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,f],initialize:function(x,S,E,b){a.call(this,x,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=h(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var T=x.sys.game;this._device=T.device.video,this.setPosition(S,E),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),T.events.on(o.PAUSE,this.globalPause,this),T.events.on(o.RESUME,this.globalResume,this);var P=x.sys.sound;P&&P.on(p.GLOBAL_MUTE,this.globalMute,this),b&&this.load(b)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(y){var x=this.scene.sys.cache.video.get(y);return x?(this.cacheKey=y,this.loadHandler(x.url,x.noAudio,x.crossOrigin)):console.warn("No video in cache for key: "+y),this},changeSource:function(y,x,S,E,b){x===void 0&&(x=!0),S===void 0&&(S=!1),this.cacheKey!==y&&(this.load(y),x&&this.play(S,E,b))},getVideoKey:function(){return this.cacheKey},loadURL:function(y,x,S){x===void 0&&(x=!1);var E=this._device.getVideoURL(y);return E?(this.cacheKey="",this.loadHandler(E.url,x,S)):console.warn("No supported video format found for "+y),this},loadMediaStream:function(y,x,S){return this.loadHandler(null,x,S,y)},loadHandler:function(y,x,S,E){x||(x=!1);var b=this.video;if(b?(this.removeLoadEventHandlers(),this.stop()):(b=document.createElement("video"),b.controls=!1,b.setAttribute("playsinline","playsinline"),b.setAttribute("preload","auto"),b.setAttribute("disablePictureInPicture","true")),x?(b.muted=!0,b.defaultMuted=!0,b.setAttribute("autoplay","autoplay")):(b.muted=!1,b.defaultMuted=!1,b.removeAttribute("autoplay")),S?b.setAttribute("crossorigin",S):b.removeAttribute("crossorigin"),E)if("srcObject"in b)try{b.srcObject=E}catch(T){if(T.name!=="TypeError")throw T;b.src=URL.createObjectURL(E)}else b.src=URL.createObjectURL(E);else b.src=y;return this.addLoadEventHandlers(),this.retry=0,this.video=b,this._playCalled=!1,b.load(),this},requestVideoFrame:function(y,x){var S=this.video;if(S){var E=x.width,b=x.height,T=this.videoTexture,P=this.videoTextureSource,C=!T||P.source!==S;C?(this._codePaused=S.paused,this._codeMuted=S.muted,T?(P.source=S,P.width=E,P.height=b,T.get().setSize(E,b)):(T=this.scene.sys.textures.create(this._key,S,E,b),T.add("__BASE",0,0,0,E,b),this.setTexture(T),this.videoTexture=T,this.videoTextureSource=T.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(s.VIDEO_TEXTURE,this,T)),this.setSizeToFrame(),this.updateDisplayOrigin()):P.update(),this.isStalled=!1,this.metadata=x;var w=x.mediaTime;C&&(this._lastUpdate=w,this.emit(s.VIDEO_CREATED,this,E,b),this.frameReady||(this.frameReady=!0,this.emit(s.VIDEO_PLAY,this))),this._playingMarker?w>=this._markerOut&&(S.loop?(S.currentTime=this._markerIn,this.emit(s.VIDEO_LOOP,this)):(this.stop(!1),this.emit(s.VIDEO_COMPLETE,this))):w<this._lastUpdate&&this.emit(s.VIDEO_LOOP,this),this._lastUpdate=w,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(y,x,S){x===void 0&&(x=-1),S===void 0&&(S=l.MAX_SAFE_INTEGER);var E=this.video;return!E||this.isPlaying()?(E||console.warn("Video not loaded"),this):(y===void 0&&(y=E.loop),E.loop=y,this._markerIn=x,this._markerOut=S,this._playingMarker=x>-1&&S>x&&S<l.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=E.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var y=this.video;y&&(y.addEventListener("error",this._loadCallbackHandler),y.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var y=this.video;y&&(y.removeEventListener("error",this._loadCallbackHandler),y.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var y=this.video;if(y){var x=this._callbacks;for(var S in x)y.addEventListener(S,x[S])}},removeEventHandlers:function(){var y=this.video;if(y){var x=this._callbacks;for(var S in x)y.removeEventListener(S,x[S])}},createPlayPromise:function(y){y===void 0&&(y=!0);var x=this.video,S=x.play();if(S!==void 0){var E=this.playSuccess.bind(this),b=this.playError.bind(this);if(!y){var T=this;b=function(){T.failedPlayAttempts++}}S.then(E).catch(b)}else x.addEventListener("playing",this._callbacks.legacy),y||this.failedPlayAttempts++},addMarker:function(y,x,S){return!isNaN(x)&&x>=0&&!isNaN(S)&&S>x&&(this.markers[y]=[x,S]),this},playMarker:function(y,x){var S=this.markers[y];return S&&this.play(x,S[0],S[1]),this},removeMarker:function(y){return delete this.markers[y],this},snapshot:function(y,x){return y===void 0&&(y=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,y,x)},snapshotArea:function(y,x,S,E,b,T){y===void 0&&(y=0),x===void 0&&(x=0),S===void 0&&(S=this.width),E===void 0&&(E=this.height),b===void 0&&(b=S),T===void 0&&(T=E);var P=this.video,C=this.snapshotTexture;return C?(C.setSize(b,T),P&&C.context.drawImage(P,y,x,S,E,0,0,b,T)):(C=this.scene.sys.textures.createCanvas(h(),b,T),this.snapshotTexture=C,P&&C.context.drawImage(P,y,x,S,E,0,0,b,T)),C.update()},saveSnapshotTexture:function(y){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,y):this.snapshotTexture=this.scene.sys.textures.createCanvas(y,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(s.VIDEO_UNLOCKED,this));var y=this.scene.sys.sound;y&&y.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(y){var x=y.name;x==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(s.VIDEO_LOCKED,this)):x==="NotSupportedError"?(this.stop(!1),this.emit(s.VIDEO_UNSUPPORTED,this,y)):(this.stop(!1),this.emit(s.VIDEO_ERROR,this,y))},legacyPlayHandler:function(){var y=this.video;y&&(this.playSuccess(),y.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(s.VIDEO_PLAYING,this)},loadErrorHandler:function(y){this.stop(!1),this.emit(s.VIDEO_ERROR,this,y)},stalledHandler:function(y){this.isStalled=!0,this.emit(s.VIDEO_STALLED,this,y)},completeHandler:function(){this._playCalled=!1,this.emit(s.VIDEO_COMPLETE,this)},preUpdate:function(y,x){var S=this.video;!S||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=x,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(y){var x=this.video;if(x){var S=x.duration;if(S!==1/0&&!isNaN(S)){var E=S*y;this.setCurrentTime(E)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(y){var x=this.video;if(x){if(typeof y=="string"){var S=y[0],E=parseFloat(y.substr(1));S==="+"?y=x.currentTime+E:S==="-"&&(y=x.currentTime-E)}x.currentTime=y}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(s.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(s.VIDEO_SEEKED,this)},getProgress:function(){var y=this.video;if(y){var x=y.duration;if(x!==1/0&&!isNaN(x))return y.currentTime/x}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(y){y===void 0&&(y=!0),this._codeMuted=y;var x=this.video;return x&&(x.muted=this._systemMuted?!0:y),this},isMuted:function(){return this._codeMuted},globalMute:function(y,x){this._systemMuted=x;var S=this.video;S&&(S.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(y){y===void 0&&(y=!0);var x=this.video;return this._codePaused=y,x&&!x.ended&&(y?x.paused||(this.removeEventHandlers(),x.pause()):y||(this._playCalled?x.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(y){return y===void 0&&(y=1),this.video&&(this.video.volume=u(y,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(y){return this.video&&(this.video.playbackRate=y),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(y){return y===void 0&&(y=!0),this.video&&(this.video.loop=y),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(y,x){return x===void 0&&(x=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,y),this.videoTextureSource.setFlipY(x)),this._key=y,this.flipY=x,!!this.videoTexture},stop:function(y){y===void 0&&(y=!0);var x=this.video;return x&&(this.removeEventHandlers(),x.cancelVideoFrameCallback(this._rfvCallbackId),x.pause()),this.retry=0,this._playCalled=!1,y&&this.emit(s.VIDEO_STOP,this),this},removeVideoElement:function(){var y=this.video;if(y){for(y.parentNode&&y.parentNode.removeChild(y);y.hasChildNodes();)y.removeChild(y.firstChild);y.removeAttribute("autoplay"),y.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var y=this.scene.sys.game.events;y.off(o.PAUSE,this.globalPause,this),y.off(o.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(p.GLOBAL_MUTE,this.globalMute,this)}});r.exports=v},56933:r=>{var m=function(e,u,g,c){u.videoTexture&&(g.addToRenderList(u),e.batchSprite(u,u.frame,g,c))};r.exports=m},65601:(r,m,e)=>{var u=e(88933),g=e(99325),c=e(20494),s=e(8630);g.register("video",function(o,a){o===void 0&&(o={});var l=c(o,"key",null),p=new s(this.scene,0,0,l);return a!==void 0&&(o.add=a),u(this.scene,p,o),p})},215:(r,m,e)=>{var u=e(8630),g=e(61286);g.register("video",function(c,s,o){return this.displayList.add(new u(this.scene,c,s,o))})},77974:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(83572),c=e(56933),r.exports={renderWebGL:g,renderCanvas:c}},83572:r=>{var m=function(e,u,g,c){u.videoTexture&&(g.addToRenderList(u),u.pipeline.batchSprite(u,g,c))};r.exports=m},71030:(r,m,e)=>{var u=e(95723),g=e(26673),c=e(65650),s=e(56694),o=e(64937),a=e(89980),l=e(74118),p=e(94287),h=new s({Extends:a,Mixins:[o.Depth,o.GetBounds,o.Origin,o.Transform,o.ScrollFactor,o.Visible],initialize:function(v,y,x,S,E){S===void 0&&(S=1),E===void 0&&(E=S),a.call(this,v,"Zone"),this.setPosition(y,x),this.width=S,this.height=E,this.blendMode=u.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(f){this.scaleX=f/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(f){this.scaleY=f/this.height}},setSize:function(f,v,y){y===void 0&&(y=!0),this.width=f,this.height=v,this.updateDisplayOrigin();var x=this.input;return y&&x&&!x.customHitArea&&(x.hitArea.width=f,x.hitArea.height=v),this},setDisplaySize:function(f,v){return this.displayWidth=f,this.displayHeight=v,this},setCircleDropZone:function(f){return this.setDropZone(new g(0,0,f),c)},setRectangleDropZone:function(f,v){return this.setDropZone(new l(0,0,f,v),p)},setDropZone:function(f,v){return this.input||this.setInteractive(f,v,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(f,v,y){y.addToRenderList(v)},renderWebGL:function(f,v,y){y.addToRenderList(v)}});r.exports=h},24067:(r,m,e)=>{var u=e(99325),g=e(20494),c=e(71030);u.register("zone",function(s){var o=g(s,"x",0),a=g(s,"y",0),l=g(s,"width",1),p=g(s,"height",l);return new c(this.scene,o,a,l,p)})},34546:(r,m,e)=>{var u=e(71030),g=e(61286);g.register("zone",function(c,s,o,a){return this.displayList.add(new u(this.scene,c,s,o,a))})},95847:r=>{var m=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};r.exports=m},26673:(r,m,e)=>{var u=e(56694),g=e(65650),c=e(94026),s=e(62941),o=e(52394),a=e(30977),l=new u({initialize:function(h,f,v){h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=0),this.type=o.CIRCLE,this.x=h,this.y=f,this._radius=v,this._diameter=v*2},contains:function(p,h){return g(this,p,h)},getPoint:function(p,h){return c(this,p,h)},getPoints:function(p,h,f){return s(this,p,h,f)},getRandomPoint:function(p){return a(this,p)},setTo:function(p,h,f){return this.x=p,this.y=h,this._radius=f,this._diameter=f*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(p,h){return h===void 0&&(h=p),this.x=p,this.y=h,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(p){this._radius=p,this._diameter=p*2}},diameter:{get:function(){return this._diameter},set:function(p){this._diameter=p,this._radius=p*.5}},left:{get:function(){return this.x-this._radius},set:function(p){this.x=p+this._radius}},right:{get:function(){return this.x+this._radius},set:function(p){this.x=p-this._radius}},top:{get:function(){return this.y-this._radius},set:function(p){this.y=p+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(p){this.y=p-this._radius}}});r.exports=l},37964:r=>{var m=function(e){return 2*(Math.PI*e.radius)};r.exports=m},72233:(r,m,e)=>{var u=e(79967),g=function(c,s,o){return o===void 0&&(o=new u),o.x=c.x+c.radius*Math.cos(s),o.y=c.y+c.radius*Math.sin(s),o};r.exports=g},61761:(r,m,e)=>{var u=e(26673),g=function(c){return new u(c.x,c.y,c.radius)};r.exports=g},65650:r=>{var m=function(e,u,g){if(e.radius>0&&u>=e.left&&u<=e.right&&g>=e.top&&g<=e.bottom){var c=(e.x-u)*(e.x-u),s=(e.y-g)*(e.y-g);return c+s<=e.radius*e.radius}else return!1};r.exports=m},39187:(r,m,e)=>{var u=e(65650),g=function(c,s){return u(c,s.x,s.y)};r.exports=g},58672:(r,m,e)=>{var u=e(65650),g=function(c,s){return u(c,s.x,s.y)&&u(c,s.right,s.y)&&u(c,s.x,s.bottom)&&u(c,s.right,s.bottom)};r.exports=g},42997:r=>{var m=function(e,u){return u.setTo(e.x,e.y,e.radius)};r.exports=m},94894:r=>{var m=function(e,u){return e.x===u.x&&e.y===u.y&&e.radius===u.radius};r.exports=m},48027:(r,m,e)=>{var u=e(74118),g=function(c,s){return s===void 0&&(s=new u),s.x=c.left,s.y=c.top,s.width=c.diameter,s.height=c.diameter,s};r.exports=g},94026:(r,m,e)=>{var u=e(72233),g=e(91806),c=e(83392),s=e(79967),o=function(a,l,p){p===void 0&&(p=new s);var h=g(l,0,c.PI2);return u(a,h,p)};r.exports=o},62941:(r,m,e)=>{var u=e(37964),g=e(72233),c=e(91806),s=e(83392),o=function(a,l,p,h){h===void 0&&(h=[]),!l&&p>0&&(l=u(a)/p);for(var f=0;f<l;f++){var v=c(f/l,0,s.PI2);h.push(g(a,v))}return h};r.exports=o},34585:r=>{var m=function(e,u,g){return e.x+=u,e.y+=g,e};r.exports=m},88665:r=>{var m=function(e,u){return e.x+=u.x,e.y+=u.y,e};r.exports=m},30977:(r,m,e)=>{var u=e(79967),g=function(c,s){s===void 0&&(s=new u);var o=2*Math.PI*Math.random(),a=Math.random()+Math.random(),l=a>1?2-a:a,p=l*Math.cos(o),h=l*Math.sin(o);return s.x=c.x+p*c.radius,s.y=c.y+h*c.radius,s};r.exports=g},6112:(r,m,e)=>{var u=e(26673);u.Area=e(95847),u.Circumference=e(37964),u.CircumferencePoint=e(72233),u.Clone=e(61761),u.Contains=e(65650),u.ContainsPoint=e(39187),u.ContainsRect=e(58672),u.CopyFrom=e(42997),u.Equals=e(94894),u.GetBounds=e(48027),u.GetPoint=e(94026),u.GetPoints=e(62941),u.Offset=e(34585),u.OffsetPoint=e(88665),u.Random=e(30977),r.exports=u},52394:r=>{var m={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};r.exports=m},58605:r=>{var m=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};r.exports=m},39507:r=>{var m=function(e){var u=e.width/2,g=e.height/2,c=Math.pow(u-g,2)/Math.pow(u+g,2);return Math.PI*(u+g)*(1+3*c/(10+Math.sqrt(4-3*c)))};r.exports=m},86998:(r,m,e)=>{var u=e(79967),g=function(c,s,o){o===void 0&&(o=new u);var a=c.width/2,l=c.height/2;return o.x=c.x+a*Math.cos(s),o.y=c.y+l*Math.sin(s),o};r.exports=g},81773:(r,m,e)=>{var u=e(95669),g=function(c){return new u(c.x,c.y,c.width,c.height)};r.exports=g},72313:r=>{var m=function(e,u,g){if(e.width<=0||e.height<=0)return!1;var c=(u-e.x)/e.width,s=(g-e.y)/e.height;return c*=c,s*=s,c+s<.25};r.exports=m},34368:(r,m,e)=>{var u=e(72313),g=function(c,s){return u(c,s.x,s.y)};r.exports=g},71431:(r,m,e)=>{var u=e(72313),g=function(c,s){return u(c,s.x,s.y)&&u(c,s.right,s.y)&&u(c,s.x,s.bottom)&&u(c,s.right,s.bottom)};r.exports=g},75459:r=>{var m=function(e,u){return u.setTo(e.x,e.y,e.width,e.height)};r.exports=m},95669:(r,m,e)=>{var u=e(56694),g=e(72313),c=e(95340),s=e(54978),o=e(52394),a=e(72006),l=new u({initialize:function(h,f,v,y){h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=0),this.type=o.ELLIPSE,this.x=h,this.y=f,this.width=v,this.height=y},contains:function(p,h){return g(this,p,h)},getPoint:function(p,h){return c(this,p,h)},getPoints:function(p,h,f){return s(this,p,h,f)},getRandomPoint:function(p){return a(this,p)},setTo:function(p,h,f,v){return this.x=p,this.y=h,this.width=f,this.height=v,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(p,h){return h===void 0&&(h=p),this.x=p,this.y=h,this},setSize:function(p,h){return h===void 0&&(h=p),this.width=p,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(p){this.x=p+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(p){this.x=p-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(p){this.y=p+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(p){this.y=p-this.height/2}}});r.exports=l},98068:r=>{var m=function(e,u){return e.x===u.x&&e.y===u.y&&e.width===u.width&&e.height===u.height};r.exports=m},72897:(r,m,e)=>{var u=e(74118),g=function(c,s){return s===void 0&&(s=new u),s.x=c.left,s.y=c.top,s.width=c.width,s.height=c.height,s};r.exports=g},95340:(r,m,e)=>{var u=e(86998),g=e(91806),c=e(83392),s=e(79967),o=function(a,l,p){p===void 0&&(p=new s);var h=g(l,0,c.PI2);return u(a,h,p)};r.exports=o},54978:(r,m,e)=>{var u=e(39507),g=e(86998),c=e(91806),s=e(83392),o=function(a,l,p,h){h===void 0&&(h=[]),!l&&p>0&&(l=u(a)/p);for(var f=0;f<l;f++){var v=c(f/l,0,s.PI2);h.push(g(a,v))}return h};r.exports=o},77951:r=>{var m=function(e,u,g){return e.x+=u,e.y+=g,e};r.exports=m},36233:r=>{var m=function(e,u){return e.x+=u.x,e.y+=u.y,e};r.exports=m},72006:(r,m,e)=>{var u=e(79967),g=function(c,s){s===void 0&&(s=new u);var o=Math.random()*Math.PI*2,a=Math.sqrt(Math.random());return s.x=c.x+a*Math.cos(o)*c.width/2,s.y=c.y+a*Math.sin(o)*c.height/2,s};r.exports=g},40652:(r,m,e)=>{var u=e(95669);u.Area=e(58605),u.Circumference=e(39507),u.CircumferencePoint=e(86998),u.Clone=e(81773),u.Contains=e(72313),u.ContainsPoint=e(34368),u.ContainsRect=e(71431),u.CopyFrom=e(75459),u.Equals=e(98068),u.GetBounds=e(72897),u.GetPoint=e(95340),u.GetPoints=e(54978),u.Offset=e(77951),u.OffsetPoint=e(36233),u.Random=e(72006),r.exports=u},84068:(r,m,e)=>{var u=e(52394),g=e(98611),c={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};c=g(!1,c,u),r.exports=c},22184:(r,m,e)=>{var u=e(53996),g=function(c,s){return u(c.x,c.y,s.x,s.y)<=c.radius+s.radius};r.exports=g},26535:r=>{var m=function(e,u){var g=u.width/2,c=u.height/2,s=Math.abs(e.x-u.x-g),o=Math.abs(e.y-u.y-c),a=g+e.radius,l=c+e.radius;if(s>a||o>l)return!1;if(s<=g||o<=c)return!0;var p=s-g,h=o-c,f=p*p,v=h*h,y=e.radius*e.radius;return f+v<=y};r.exports=m},71145:(r,m,e)=>{var u=e(79967),g=e(22184),c=function(s,o,a){if(a===void 0&&(a=[]),g(s,o)){var l=s.x,p=s.y,h=s.radius,f=o.x,v=o.y,y=o.radius,x,S,E,b,T;if(p===v)T=(y*y-h*h-f*f+l*l)/(2*(l-f)),x=1,S=-2*v,E=f*f+T*T-2*f*T+v*v-y*y,b=S*S-4*x*E,b===0?a.push(new u(T,-S/(2*x))):b>0&&(a.push(new u(T,(-S+Math.sqrt(b))/(2*x))),a.push(new u(T,(-S-Math.sqrt(b))/(2*x))));else{var P=(l-f)/(p-v),C=(y*y-h*h-f*f+l*l-v*v+p*p)/(2*(p-v));x=P*P+1,S=2*p*P-2*C*P-2*l,E=l*l+p*p+C*C-h*h-2*p*C,b=S*S-4*x*E,b===0?(T=-S/(2*x),a.push(new u(T,C-T*P))):b>0&&(T=(-S+Math.sqrt(b))/(2*x),a.push(new u(T,C-T*P)),T=(-S-Math.sqrt(b))/(2*x),a.push(new u(T,C-T*P)))}}return a};r.exports=c},62508:(r,m,e)=>{var u=e(26111),g=e(26535),c=function(s,o,a){if(a===void 0&&(a=[]),g(s,o)){var l=o.getLineA(),p=o.getLineB(),h=o.getLineC(),f=o.getLineD();u(l,s,a),u(p,s,a),u(h,s,a),u(f,s,a)}return a};r.exports=c},26111:(r,m,e)=>{var u=e(79967),g=e(61472),c=function(s,o,a){if(a===void 0&&(a=[]),g(s,o)){var l=s.x1,p=s.y1,h=s.x2,f=s.y2,v=o.x,y=o.y,x=o.radius,S=h-l,E=f-p,b=l-v,T=p-y,P=S*S+E*E,C=2*(S*b+E*T),w=b*b+T*T-x*x,A=C*C-4*P*w,R,I;if(A===0){var L=-C/(2*P);R=l+L*S,I=p+L*E,L>=0&&L<=1&&a.push(new u(R,I))}else if(A>0){var O=(-C-Math.sqrt(A))/(2*P);R=l+O*S,I=p+O*E,O>=0&&O<=1&&a.push(new u(R,I));var D=(-C+Math.sqrt(A))/(2*P);R=l+D*S,I=p+D*E,D>=0&&D<=1&&a.push(new u(R,I))}}return a};r.exports=c},96537:(r,m,e)=>{var u=e(70015),g=function(c,s,o,a){o===void 0&&(o=!1);var l=c.x1,p=c.y1,h=c.x2,f=c.y2,v=s.x1,y=s.y1,x=s.x2,S=s.y2,E=h-l,b=f-p,T=x-v,P=S-y,C=E*P-b*T;if(C===0)return null;var w,A,R;if(o){if(w=(E*(y-p)+b*(l-v))/(T*b-P*E),A=(v+T*w-l)/E,A<0||w<0||w>1)return null;R=A}else{if(w=((v-l)*P-(y-p)*T)/C,A=((p-y)*E-(l-v)*b)/C,w<0||w>1||A<0||A>1)return null;R=w}return a===void 0&&(a=new u),a.set(l+E*R,p+b*R,R)};r.exports=g},17647:(r,m,e)=>{var u=e(96537),g=e(88829),c=e(70015),s=new g,o=new c,a=function(l,p,h,f){h===void 0&&(h=!1),f===void 0&&(f=new c);var v=!1;f.set(),o.set();for(var y=p[0],x=1;x<p.length;x++){var S=p[x];s.setTo(y.x,y.y,S.x,S.y),y=S,u(l,s,h,o)&&(!v||o.z<f.z)&&(f.copy(o),v=!0)}return v?f:null};r.exports=a},68439:(r,m,e)=>{var u=e(70015),g=e(51729),c=e(17647),s=new u,o=function(a,l,p,h){h===void 0&&(h=new g),Array.isArray(l)||(l=[l]);var f=!1;h.set(),s.set();for(var v=0;v<l.length;v++)c(a,l[v].points,p,s)&&(!f||s.z<h.z)&&(h.set(s.x,s.y,s.z,v),f=!0);return f?h:null};r.exports=o},9569:(r,m,e)=>{var u=e(79967),g=e(25227),c=e(47910),s=function(o,a,l){if(l===void 0&&(l=[]),c(o,a))for(var p=a.getLineA(),h=a.getLineB(),f=a.getLineC(),v=a.getLineD(),y=[new u,new u,new u,new u],x=[g(p,o,y[0]),g(h,o,y[1]),g(f,o,y[2]),g(v,o,y[3])],S=0;S<4;S++)x[S]&&l.push(y[S]);return l};r.exports=s},7449:(r,m,e)=>{var u=e(51729),g=e(68439),c=e(88829),s=new c;function o(p,h,f,v,y){var x=Math.cos(p),S=Math.sin(p);s.setTo(h,f,h+x,f+S);var E=g(s,v,!0);E&&y.push(new u(E.x,E.y,p,E.w))}function a(p,h){return p.z-h.z}var l=function(p,h,f){Array.isArray(f)||(f=[f]);for(var v=[],y=[],x=0;x<f.length;x++)for(var S=f[x].points,E=0;E<S.length;E++){var b=Math.atan2(S[E].y-h,S[E].x-p);y.indexOf(b)===-1&&(o(b,p,h,f,v),o(b-1e-5,p,h,f,v),o(b+1e-5,p,h,f,v),y.push(b))}return v.sort(a)};r.exports=l},82931:(r,m,e)=>{var u=e(74118),g=e(90205),c=function(s,o,a){return a===void 0&&(a=new u),g(s,o)&&(a.x=Math.max(s.x,o.x),a.y=Math.max(s.y,o.y),a.width=Math.min(s.right,o.right)-a.x,a.height=Math.min(s.bottom,o.bottom)-a.y),a};r.exports=c},1946:(r,m,e)=>{var u=e(9569),g=e(90205),c=function(s,o,a){if(a===void 0&&(a=[]),g(s,o)){var l=s.getLineA(),p=s.getLineB(),h=s.getLineC(),f=s.getLineD();u(l,o,a),u(p,o,a),u(h,o,a),u(f,o,a)}return a};r.exports=c},34211:(r,m,e)=>{var u=e(20370),g=e(9569),c=function(s,o,a){if(a===void 0&&(a=[]),u(s,o)){var l=o.getLineA(),p=o.getLineB(),h=o.getLineC();g(l,s,a),g(p,s,a),g(h,s,a)}return a};r.exports=c},80511:(r,m,e)=>{var u=e(26111),g=e(48411),c=function(s,o,a){if(a===void 0&&(a=[]),g(s,o)){var l=s.getLineA(),p=s.getLineB(),h=s.getLineC();u(l,o,a),u(p,o,a),u(h,o,a)}return a};r.exports=c},31343:(r,m,e)=>{var u=e(79967),g=e(86117),c=e(25227),s=function(o,a,l){if(l===void 0&&(l=[]),g(o,a))for(var p=o.getLineA(),h=o.getLineB(),f=o.getLineC(),v=[new u,new u,new u],y=[c(p,a,v[0]),c(h,a,v[1]),c(f,a,v[2])],x=0;x<3;x++)y[x]&&l.push(v[x]);return l};r.exports=s},70534:(r,m,e)=>{var u=e(23589),g=e(31343),c=function(s,o,a){if(a===void 0&&(a=[]),u(s,o)){var l=o.getLineA(),p=o.getLineB(),h=o.getLineC();g(s,l,a),g(s,p,a),g(s,h,a)}return a};r.exports=c},61472:(r,m,e)=>{var u=e(65650),g=e(79967),c=new g,s=function(o,a,l){if(l===void 0&&(l=c),u(a,o.x1,o.y1))return l.x=o.x1,l.y=o.y1,!0;if(u(a,o.x2,o.y2))return l.x=o.x2,l.y=o.y2,!0;var p=o.x2-o.x1,h=o.y2-o.y1,f=a.x-o.x1,v=a.y-o.y1,y=p*p+h*h,x=p,S=h;if(y>0){var E=(f*p+v*h)/y;x*=E,S*=E}l.x=o.x1+x,l.y=o.y1+S;var b=x*x+S*S;return b<=y&&x*p+S*h>=0&&u(a,l.x,l.y)};r.exports=s},25227:r=>{var m=function(e,u,g){var c=e.x1,s=e.y1,o=e.x2,a=e.y2,l=u.x1,p=u.y1,h=u.x2,f=u.y2;if(c===o&&s===a||l===h&&p===f)return!1;var v=(f-p)*(o-c)-(h-l)*(a-s);if(v===0)return!1;var y=((h-l)*(s-p)-(f-p)*(c-l))/v,x=((o-c)*(s-p)-(a-s)*(c-l))/v;return y<0||y>1||x<0||x>1?!1:(g&&(g.x=c+y*(o-c),g.y=s+y*(a-s)),!0)};r.exports=m},47910:r=>{var m=function(e,u){var g=e.x1,c=e.y1,s=e.x2,o=e.y2,a=u.x,l=u.y,p=u.right,h=u.bottom,f=0;if(g>=a&&g<=p&&c>=l&&c<=h||s>=a&&s<=p&&o>=l&&o<=h)return!0;if(g<a&&s>=a){if(f=c+(o-c)*(a-g)/(s-g),f>l&&f<=h)return!0}else if(g>p&&s<=p&&(f=c+(o-c)*(p-g)/(s-g),f>=l&&f<=h))return!0;if(c<l&&o>=l){if(f=g+(s-g)*(l-c)/(o-c),f>=a&&f<=p)return!0}else if(c>h&&o<=h&&(f=g+(s-g)*(h-c)/(o-c),f>=a&&f<=p))return!0;return!1};r.exports=m},34426:r=>{var m=function(e,u,g){g===void 0&&(g=1);var c=u.x1,s=u.y1,o=u.x2,a=u.y2,l=e.x,p=e.y,h=(o-c)*(o-c)+(a-s)*(a-s);if(h===0)return!1;var f=((l-c)*(o-c)+(p-s)*(a-s))/h;if(f<0)return Math.sqrt((c-l)*(c-l)+(s-p)*(s-p))<=g;if(f>=0&&f<=1){var v=((s-p)*(o-c)-(c-l)*(a-s))/h;return Math.abs(v)*Math.sqrt(h)<=g}else return Math.sqrt((o-l)*(o-l)+(a-p)*(a-p))<=g};r.exports=m},81414:(r,m,e)=>{var u=e(34426),g=function(c,s){if(!u(c,s))return!1;var o=Math.min(s.x1,s.x2),a=Math.max(s.x1,s.x2),l=Math.min(s.y1,s.y2),p=Math.max(s.y1,s.y2);return c.x>=o&&c.x<=a&&c.y>=l&&c.y<=p};r.exports=g},90205:r=>{var m=function(e,u){return e.width<=0||e.height<=0||u.width<=0||u.height<=0?!1:!(e.right<u.x||e.bottom<u.y||e.x>u.right||e.y>u.bottom)};r.exports=m},20370:(r,m,e)=>{var u=e(25227),g=e(94287),c=e(86875),s=e(87279),o=function(a,l){if(l.left>a.right||l.right<a.left||l.top>a.bottom||l.bottom<a.top)return!1;var p=l.getLineA(),h=l.getLineB(),f=l.getLineC();if(g(a,p.x1,p.y1)||g(a,p.x2,p.y2)||g(a,h.x1,h.y1)||g(a,h.x2,h.y2)||g(a,f.x1,f.y1)||g(a,f.x2,f.y2))return!0;var v=a.getLineA(),y=a.getLineB(),x=a.getLineC(),S=a.getLineD();if(u(p,v)||u(p,y)||u(p,x)||u(p,S)||u(h,v)||u(h,y)||u(h,x)||u(h,S)||u(f,v)||u(f,y)||u(f,x)||u(f,S))return!0;var E=s(a),b=c(l,E,!0);return b.length>0};r.exports=o},8786:r=>{var m=function(e,u,g,c,s,o){return o===void 0&&(o=0),!(u>e.right+o||g<e.left-o||c>e.bottom+o||s<e.top-o)};r.exports=m},48411:(r,m,e)=>{var u=e(61472),g=e(60689),c=function(s,o){return s.left>o.right||s.right<o.left||s.top>o.bottom||s.bottom<o.top?!1:!!(g(s,o.x,o.y)||u(s.getLineA(),o)||u(s.getLineB(),o)||u(s.getLineC(),o))};r.exports=c},86117:(r,m,e)=>{var u=e(25227),g=function(c,s){return!!(c.contains(s.x1,s.y1)||c.contains(s.x2,s.y2)||u(c.getLineA(),s)||u(c.getLineB(),s)||u(c.getLineC(),s))};r.exports=g},23589:(r,m,e)=>{var u=e(86875),g=e(18680),c=e(25227),s=function(o,a){if(o.left>a.right||o.right<a.left||o.top>a.bottom||o.bottom<a.top)return!1;var l=o.getLineA(),p=o.getLineB(),h=o.getLineC(),f=a.getLineA(),v=a.getLineB(),y=a.getLineC();if(c(l,f)||c(l,v)||c(l,y)||c(p,f)||c(p,v)||c(p,y)||c(h,f)||c(h,v)||c(h,y))return!0;var x=g(o),S=u(a,x,!0);return S.length>0||(x=g(a),S=u(o,x,!0),S.length>0)};r.exports=s},7563:(r,m,e)=>{r.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}},50599:r=>{var m=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};r.exports=m},58813:r=>{var m=function(e,u,g){u===void 0&&(u=1),g===void 0&&(g=[]);var c=Math.round(e.x1),s=Math.round(e.y1),o=Math.round(e.x2),a=Math.round(e.y2),l=Math.abs(o-c),p=Math.abs(a-s),h=c<o?1:-1,f=s<a?1:-1,v=l-p;g.push({x:c,y:s});for(var y=1;!(c===o&&s===a);){var x=v<<1;x>-p&&(v-=p,c+=h),x<l&&(v+=l,s+=f),y%u===0&&g.push({x:c,y:s}),y++}return g};r.exports=m},88513:r=>{var m=function(e,u,g){var c=u-(e.x1+e.x2)/2,s=g-(e.y1+e.y2)/2;return e.x1+=c,e.y1+=s,e.x2+=c,e.y2+=s,e};r.exports=m},26718:(r,m,e)=>{var u=e(88829),g=function(c){return new u(c.x1,c.y1,c.x2,c.y2)};r.exports=g},88930:r=>{var m=function(e,u){return u.setTo(e.x1,e.y1,e.x2,e.y2)};r.exports=m},90656:r=>{var m=function(e,u){return e.x1===u.x1&&e.y1===u.y1&&e.x2===u.x2&&e.y2===u.y2};r.exports=m},30897:(r,m,e)=>{var u=e(16028),g=function(c,s,o){o===void 0&&(o=s);var a=u(c),l=c.x2-c.x1,p=c.y2-c.y1;return s&&(c.x1=c.x1-l/a*s,c.y1=c.y1-p/a*s),o&&(c.x2=c.x2+l/a*o,c.y2=c.y2+p/a*o),c};r.exports=g},30684:(r,m,e)=>{var u=e(92951),g=e(21902),c=e(79967),s=function(o,a,l,p,h){p===void 0&&(p=0),h===void 0&&(h=[]);var f=[],v=o.x1,y=o.y1,x=o.x2-v,S=o.y2-y,E=g(a,h),b,T,P=l-1;for(b=0;b<P;b++)T=E(b/P),f.push(new c(v+x*T,y+S*T));if(T=E(1),f.push(new c(v+x*T,y+S*T)),p>0){var C=f[0],w=[C];for(b=1;b<f.length-1;b++){var A=f[b];u(C,A)>=p&&(w.push(A),C=A)}var R=f[f.length-1];return u(C,R)<p&&w.pop(),w.push(R),w}else return f};r.exports=s},20487:(r,m,e)=>{var u=e(79967),g=function(c,s){return s===void 0&&(s=new u),s.x=(c.x1+c.x2)/2,s.y=(c.y1+c.y2)/2,s};r.exports=g},11222:(r,m,e)=>{var u=e(79967),g=function(c,s,o){o===void 0&&(o=new u);var a=c.x1,l=c.y1,p=c.x2,h=c.y2,f=(p-a)*(p-a)+(h-l)*(h-l);if(f===0)return o;var v=((s.x-a)*(p-a)+(s.y-l)*(h-l))/f;return o.x=a+v*(p-a),o.y=l+v*(h-l),o};r.exports=g},7377:(r,m,e)=>{var u=e(83392),g=e(50599),c=e(79967),s=function(o,a){a===void 0&&(a=new c);var l=g(o)-u.TAU;return a.x=Math.cos(l),a.y=Math.sin(l),a};r.exports=s},66464:(r,m,e)=>{var u=e(79967),g=function(c,s,o){return o===void 0&&(o=new u),o.x=c.x1+(c.x2-c.x1)*s,o.y=c.y1+(c.y2-c.y1)*s,o};r.exports=g},8570:(r,m,e)=>{var u=e(16028),g=e(79967),c=function(s,o,a,l){l===void 0&&(l=[]),!o&&a>0&&(o=u(s)/a);for(var p=s.x1,h=s.y1,f=s.x2,v=s.y2,y=0;y<o;y++){var x=y/o,S=p+(f-p)*x,E=h+(v-h)*x;l.push(new g(S,E))}return l};r.exports=c},65269:r=>{var m=function(e,u){var g=e.x1,c=e.y1,s=e.x2,o=e.y2,a=(s-g)*(s-g)+(o-c)*(o-c);if(a===0)return!1;var l=((c-u.y)*(s-g)-(g-u.x)*(o-c))/a;return Math.abs(l)*Math.sqrt(a)};r.exports=m},82996:r=>{var m=function(e){return Math.abs(e.y1-e.y2)};r.exports=m},16028:r=>{var m=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};r.exports=m},88829:(r,m,e)=>{var u=e(56694),g=e(66464),c=e(8570),s=e(52394),o=e(74077),a=e(93736),l=new u({initialize:function(h,f,v,y){h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=0),this.type=s.LINE,this.x1=h,this.y1=f,this.x2=v,this.y2=y},getPoint:function(p,h){return g(this,p,h)},getPoints:function(p,h,f){return c(this,p,h,f)},getRandomPoint:function(p){return o(this,p)},setTo:function(p,h,f,v){return p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=0),this.x1=p,this.y1=h,this.x2=f,this.y2=v,this},getPointA:function(p){return p===void 0&&(p=new a),p.set(this.x1,this.y1),p},getPointB:function(p){return p===void 0&&(p=new a),p.set(this.x2,this.y2),p},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(p){this.x1<=this.x2?this.x1=p:this.x2=p}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(p){this.x1>this.x2?this.x1=p:this.x2=p}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(p){this.y1<=this.y2?this.y1=p:this.y2=p}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(p){this.y1>this.y2?this.y1=p:this.y2=p}}});r.exports=l},73273:(r,m,e)=>{var u=e(83392),g=e(1071),c=e(50599),s=function(o){var a=c(o)-u.TAU;return g(a,-Math.PI,Math.PI)};r.exports=s},96936:(r,m,e)=>{var u=e(83392),g=e(50599),c=function(s){return Math.cos(g(s)-u.TAU)};r.exports=c},43581:(r,m,e)=>{var u=e(83392),g=e(50599),c=function(s){return Math.sin(g(s)-u.TAU)};r.exports=c},13990:r=>{var m=function(e,u,g){return e.x1+=u,e.y1+=g,e.x2+=u,e.y2+=g,e};r.exports=m},1298:r=>{var m=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};r.exports=m},74077:(r,m,e)=>{var u=e(79967),g=function(c,s){s===void 0&&(s=new u);var o=Math.random();return s.x=c.x1+o*(c.x2-c.x1),s.y=c.y1+o*(c.y2-c.y1),s};r.exports=g},30473:(r,m,e)=>{var u=e(50599),g=e(73273),c=function(s,o){return 2*g(o)-Math.PI-u(s)};r.exports=c},25968:(r,m,e)=>{var u=e(1809),g=function(c,s){var o=(c.x1+c.x2)/2,a=(c.y1+c.y2)/2;return u(c,o,a,s)};r.exports=g},24296:(r,m,e)=>{var u=e(1809),g=function(c,s,o){return u(c,s.x,s.y,o)};r.exports=g},1809:r=>{var m=function(e,u,g,c){var s=Math.cos(c),o=Math.sin(c),a=e.x1-u,l=e.y1-g;return e.x1=a*s-l*o+u,e.y1=a*o+l*s+g,a=e.x2-u,l=e.y2-g,e.x2=a*s-l*o+u,e.y2=a*o+l*s+g,e};r.exports=m},88171:r=>{var m=function(e,u,g,c,s){return e.x1=u,e.y1=g,e.x2=u+Math.cos(c)*s,e.y2=g+Math.sin(c)*s,e};r.exports=m},82797:r=>{var m=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};r.exports=m},41067:r=>{var m=function(e){return Math.abs(e.x1-e.x2)};r.exports=m},28482:(r,m,e)=>{var u=e(88829);u.Angle=e(50599),u.BresenhamPoints=e(58813),u.CenterOn=e(88513),u.Clone=e(26718),u.CopyFrom=e(88930),u.Equals=e(90656),u.Extend=e(30897),u.GetEasedPoints=e(30684),u.GetMidPoint=e(20487),u.GetNearestPoint=e(11222),u.GetNormal=e(7377),u.GetPoint=e(66464),u.GetPoints=e(8570),u.GetShortestDistance=e(65269),u.Height=e(82996),u.Length=e(16028),u.NormalAngle=e(73273),u.NormalX=e(96936),u.NormalY=e(43581),u.Offset=e(13990),u.PerpSlope=e(1298),u.Random=e(74077),u.ReflectAngle=e(30473),u.Rotate=e(25968),u.RotateAroundPoint=e(24296),u.RotateAroundXY=e(1809),u.SetToAngle=e(88171),u.Slope=e(82797),u.Width=e(41067),r.exports=u},18693:(r,m,e)=>{var u=e(56694),g=e(74118),c=e(93736);function s(a,l,p,h){var f=a-p,v=l-h,y=f*f+v*v;return Math.sqrt(y)}var o=new u({initialize:function(l,p,h){this.vertex1=l,this.vertex2=p,this.vertex3=h,this.bounds=new g,this._inCenter=new c},getInCenter:function(a){a===void 0&&(a=!0);var l=this.vertex1,p=this.vertex2,h=this.vertex3,f,v,y,x,S,E;a?(f=l.x,v=l.y,y=p.x,x=p.y,S=h.x,E=h.y):(f=l.vx,v=l.vy,y=p.vx,x=p.vy,S=h.vx,E=h.vy);var b=s(S,E,y,x),T=s(f,v,S,E),P=s(y,x,f,v),C=b+T+P;return this._inCenter.set((f*b+y*T+S*P)/C,(v*b+x*T+E*P)/C)},contains:function(a,l,p){var h=this.vertex1,f=this.vertex2,v=this.vertex3,y=h.vx,x=h.vy,S=f.vx,E=f.vy,b=v.vx,T=v.vy;if(p){var P=p.a,C=p.b,w=p.c,A=p.d,R=p.e,I=p.f;y=h.vx*P+h.vy*w+R,x=h.vx*C+h.vy*A+I,S=f.vx*P+f.vy*w+R,E=f.vx*C+f.vy*A+I,b=v.vx*P+v.vy*w+R,T=v.vx*C+v.vy*A+I}var L=b-y,O=T-x,D=S-y,V=E-x,B=a-y,U=l-x,W=L*L+O*O,F=L*D+O*V,G=L*B+O*U,M=D*D+V*V,N=D*B+V*U,k=W*M-F*F,z=k===0?0:1/k,H=(M*G-F*N)*z,$=(W*N-F*G)*z;return H>=0&&$>=0&&H+$<1},isCounterClockwise:function(a){var l=this.vertex1,p=this.vertex2,h=this.vertex3,f=(p.vx-l.vx)*(h.vy-l.vy)-(p.vy-l.vy)*(h.vx-l.vx);return a<=0?f>=0:f<0},load:function(a,l,p,h,f){return p=this.vertex1.load(a,l,p,h,f),p=this.vertex2.load(a,l,p,h,f),p=this.vertex3.load(a,l,p,h,f),p},transformCoordinatesLocal:function(a,l,p,h){return this.vertex1.transformCoordinatesLocal(a,l,p,h),this.vertex2.transformCoordinatesLocal(a,l,p,h),this.vertex3.transformCoordinatesLocal(a,l,p,h),this},updateBounds:function(){var a=this.vertex1,l=this.vertex2,p=this.vertex3,h=this.bounds;return h.x=Math.min(a.vx,l.vx,p.vx),h.y=Math.min(a.vy,l.vy,p.vy),h.width=Math.max(a.vx,l.vx,p.vx)-h.x,h.height=Math.max(a.vy,l.vy,p.vy)-h.y,this},isInView:function(a,l,p,h,f,v,y,x,S,E,b){this.update(h,f,v,y,x,S,E,b);var T=this.vertex1,P=this.vertex2,C=this.vertex3;if(T.ta<=0&&P.ta<=0&&C.ta<=0||l&&!this.isCounterClockwise(p))return!1;var w=this.bounds;w.x=Math.min(T.tx,P.tx,C.tx),w.y=Math.min(T.ty,P.ty,C.ty),w.width=Math.max(T.tx,P.tx,C.tx)-w.x,w.height=Math.max(T.ty,P.ty,C.ty)-w.y;var A=a.x+a.width,R=a.y+a.height;return w.width<=0||w.height<=0||a.width<=0||a.height<=0?!1:!(w.right<a.x||w.bottom<a.y||w.x>A||w.y>R)},scrollUV:function(a,l){return this.vertex1.scrollUV(a,l),this.vertex2.scrollUV(a,l),this.vertex3.scrollUV(a,l),this},scaleUV:function(a,l){return this.vertex1.scaleUV(a,l),this.vertex2.scaleUV(a,l),this.vertex3.scaleUV(a,l),this},setColor:function(a){return this.vertex1.color=a,this.vertex2.color=a,this.vertex3.color=a,this},update:function(a,l,p,h,f,v,y,x){return this.vertex1.update(l,p,h,f,v,y,x,a),this.vertex2.update(l,p,h,f,v,y,x,a),this.vertex3.update(l,p,h,f,v,y,x,a),this},translate:function(a,l){l===void 0&&(l=0);var p=this.vertex1,h=this.vertex2,f=this.vertex3;return p.x+=a,p.y+=l,h.x+=a,h.y+=l,f.x+=a,f.y+=l,this},x:{get:function(){return this.getInCenter().x},set:function(a){var l=this.getInCenter();this.translate(a-l.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(a){var l=this.getInCenter();this.translate(0,a-l.y)}},alpha:{get:function(){var a=this.vertex1,l=this.vertex2,p=this.vertex3;return(a.alpha+l.alpha+p.alpha)/3},set:function(a){this.vertex1.alpha=a,this.vertex2.alpha=a,this.vertex3.alpha=a}},depth:{get:function(){var a=this.vertex1,l=this.vertex2,p=this.vertex3;return(a.vz+l.vz+p.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});r.exports=o},99425:(r,m,e)=>{var u=e(18693),g=e(72632),c=e(16650),s=e(70015),o=e(85769),a=new s,l=new s,p=new c,h=function(f){var v=g(f,"mesh"),y=g(f,"texture",null),x=g(f,"frame"),S=g(f,"width",1),E=g(f,"height",S),b=g(f,"widthSegments",1),T=g(f,"heightSegments",b),P=g(f,"x",0),C=g(f,"y",0),w=g(f,"z",0),A=g(f,"rotateX",0),R=g(f,"rotateY",0),I=g(f,"rotateZ",0),L=g(f,"zIsUp",!0),O=g(f,"isOrtho",v?v.dirtyCache[11]:!1),D=g(f,"colors",[16777215]),V=g(f,"alphas",[1]),B=g(f,"tile",!1),U=g(f,"flipY",!1),W=g(f,"width",null),F={faces:[],verts:[]};a.set(P,C,w),l.set(A,R,I),p.fromRotationXYTranslation(l,a,L);var G;if(!y&&v)y=v.texture,x||(G=v.frame);else if(v&&typeof y=="string")y=v.scene.sys.textures.get(y);else if(!y)return F;G||(G=y.get(x)),!W&&O&&y&&v&&(S=G.width/v.height,E=G.height/v.height);var M=S/2,N=E/2,k=Math.floor(b),z=Math.floor(T),H=k+1,$=z+1,X=S/k,Y=E/z,j=[],J=[],Q,Z,it=0,rt=1,ut=0,dt=1;G&&(it=G.u0,rt=G.u1,U?(ut=G.v1,dt=G.v0):(ut=G.v0,dt=G.v1));var ct=rt-it,nt=dt-ut;for(Z=0;Z<$;Z++){var ht=Z*Y-N;for(Q=0;Q<H;Q++){var ot=Q*X-M;J.push(ot,-ht);var mt=it+ct*(Q/k),gt=ut+nt*(Z/z);j.push(mt,gt)}}Array.isArray(D)||(D=[D]),Array.isArray(V)||(V=[V]);var Ft=0,kt=0;for(Z=0;Z<z;Z++)for(Q=0;Q<k;Q++){var Lt=(Q+H*Z)*2,St=(Q+H*(Z+1))*2,Yt=(Q+1+H*(Z+1))*2,ae=(Q+1+H*Z)*2,Me=D[kt],Ge=V[Ft],yi=new o(J[Lt],J[Lt+1],0,j[Lt],j[Lt+1],Me,Ge).transformMat4(p),Zr=new o(J[St],J[St+1],0,j[St],j[St+1],Me,Ge).transformMat4(p),Qr=new o(J[ae],J[ae+1],0,j[ae],j[ae+1],Me,Ge).transformMat4(p),_r=new o(J[St],J[St+1],0,j[St],j[St+1],Me,Ge).transformMat4(p),qr=new o(J[Yt],J[Yt+1],0,j[Yt],j[Yt+1],Me,Ge).transformMat4(p),ts=new o(J[ae],J[ae+1],0,j[ae],j[ae+1],Me,Ge).transformMat4(p);B&&(yi.setUVs(it,dt),Zr.setUVs(it,ut),Qr.setUVs(rt,dt),_r.setUVs(it,ut),qr.setUVs(rt,ut),ts.setUVs(rt,dt)),kt++,kt===D.length&&(kt=0),Ft++,Ft===V.length&&(Ft=0),F.verts.push(yi,Zr,Qr,_r,qr,ts),F.faces.push(new u(yi,Zr,Qr),new u(_r,qr,ts))}return v&&(v.faces=v.faces.concat(F.faces),v.vertices=v.vertices.concat(F.verts)),F};r.exports=h},53267:(r,m,e)=>{var u=e(18693),g=e(16650),c=e(70015),s=e(85769),o=new c,a=new c,l=new g,p=function(h,f,v,y,x,S,E,b,T,P){v===void 0&&(v=1),y===void 0&&(y=0),x===void 0&&(x=0),S===void 0&&(S=0),E===void 0&&(E=0),b===void 0&&(b=0),T===void 0&&(T=0),P===void 0&&(P=!0);var C={faces:[],verts:[]},w=h.materials;o.set(y,x,S),a.set(E,b,T),l.fromRotationXYTranslation(a,o,P);for(var A=0;A<h.models.length;A++)for(var R=h.models[A],I=R.vertices,L=R.textureCoords,O=R.faces,D=0;D<O.length;D++){var V=O[D],B=V.vertices[0],U=V.vertices[1],W=V.vertices[2],F=I[B.vertexIndex],G=I[U.vertexIndex],M=I[W.vertexIndex],N=B.textureCoordsIndex,k=U.textureCoordsIndex,z=W.textureCoordsIndex,H=N===-1?{u:0,v:1}:L[N],$=k===-1?{u:0,v:0}:L[k],X=z===-1?{u:1,v:1}:L[z],Y=16777215;V.material!==""&&w[V.material]&&(Y=w[V.material]);var j=new s(F.x*v,F.y*v,F.z*v,H.u,H.v,Y).transformMat4(l),J=new s(G.x*v,G.y*v,G.z*v,$.u,$.v,Y).transformMat4(l),Q=new s(M.x*v,M.y*v,M.z*v,X.u,X.v,Y).transformMat4(l);C.verts.push(j,J,Q),C.faces.push(new u(j,J,Q))}return f&&(f.faces=f.faces.concat(C.faces),f.vertices=f.vertices.concat(C.verts)),C};r.exports=p},67623:(r,m,e)=>{var u=e(18693),g=e(85769),c=function(s,o,a,l,p,h,f,v){if(l===void 0&&(l=!1),h===void 0&&(h=16777215),f===void 0&&(f=1),v===void 0&&(v=!1),s.length!==o.length&&!l){console.warn("GenerateVerts: vertices and uvs count not equal");return}var y={faces:[],vertices:[]},x,S,E,b,T,P,C,w,A,R,I,L=l?3:2,O=Array.isArray(h),D=Array.isArray(f);if(Array.isArray(a)&&a.length>0)for(x=0;x<a.length;x++){var V=a[x],B=a[x]*2,U=a[x]*L;S=s[U],E=s[U+1],b=l?s[U+2]:0,T=o[B],P=o[B+1],v&&(P=1-P),C=O?h[V]:h,w=D?f[V]:f,A=0,R=0,I=0,p&&(A=p[U],R=p[U+1],I=l?p[U+2]:0),y.vertices.push(new g(S,E,b,T,P,C,w,A,R,I))}else{var W=0,F=0;for(x=0;x<s.length;x+=L)S=s[x],E=s[x+1],b=l?s[x+2]:0,T=o[W],P=o[W+1],C=O?h[F]:h,w=D?f[F]:f,A=0,R=0,I=0,p&&(A=p[x],R=p[x+1],I=l?p[x+2]:0),y.vertices.push(new g(S,E,b,T,P,C,w,A,R,I)),W+=2,F++}for(x=0;x<y.vertices.length;x+=3){var G=y.vertices[x],M=y.vertices[x+1],N=y.vertices[x+2];y.faces.push(new u(G,M,N))}return y};r.exports=c},27291:r=>{var m=!0,e="untitled",u="",g="";function c(S){var E=S.indexOf("#");return E>-1?S.substring(0,E):S}function s(S){return S.models.length===0&&S.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),u="",S.models[S.models.length-1]}function o(S,E){var b=S.length>=2?S[1]:e;E.models.push({faces:[],name:b,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function a(S){S.length===2&&(u=S[1])}function l(S,E){var b=S.length,T=b>=2?parseFloat(S[1]):0,P=b>=3?parseFloat(S[2]):0,C=b>=4?parseFloat(S[3]):0;s(E).vertices.push({x:T,y:P,z:C})}function p(S,E){var b=S.length,T=b>=2?parseFloat(S[1]):0,P=b>=3?parseFloat(S[2]):0,C=b>=4?parseFloat(S[3]):0;isNaN(T)&&(T=0),isNaN(P)&&(P=0),isNaN(C)&&(C=0),m&&(P=1-P),s(E).textureCoords.push({u:T,v:P,w:C})}function h(S,E){var b=S.length,T=b>=2?parseFloat(S[1]):0,P=b>=3?parseFloat(S[2]):0,C=b>=4?parseFloat(S[3]):0;s(E).vertexNormals.push({x:T,y:P,z:C})}function f(S,E){var b=S.length-1;if(!(b<3)){for(var T={group:u,material:g,vertices:[]},P=0;P<b;P++){var C=S[P+1],w=C.split("/"),A=w.length;if(!(A<1||A>3)){var R=0,I=0,L=0;R=parseInt(w[0],10),A>1&&w[1]!==""&&(I=parseInt(w[1],10)),A>2&&(L=parseInt(w[2],10)),R!==0&&(R<0&&(R=s(E).vertices.length+1+R),I-=1,R-=1,L-=1,T.vertices.push({textureCoordsIndex:I,vertexIndex:R,vertexNormalIndex:L}))}}s(E).faces.push(T)}}function v(S,E){S.length>=2&&E.materialLibraries.push(S[1])}function y(S){S.length>=2&&(g=S[1])}var x=function(S,E){E===void 0&&(E=!0),m=E;var b={materials:{},materialLibraries:[],models:[]};u="",g="";for(var T=S.split(`
`),P=0;P<T.length;P++){var C=c(T[P]),w=C.replace(/\s\s+/g," ").trim().split(" ");switch(w[0].toLowerCase()){case"o":o(w,b);break;case"g":a(w);break;case"v":l(w,b);break;case"vt":p(w,b);break;case"vn":h(w,b);break;case"f":f(w,b);break;case"mtllib":v(w,b);break;case"usemtl":y(w);break}}return b};r.exports=x},76799:(r,m,e)=>{var u=e(22946),g=function(c){for(var s={},o=c.split(`
`),a="",l=0;l<o.length;l++){var p=o[l].trim();if(!(p.indexOf("#")===0||p==="")){var h=p.replace(/\s\s+/g," ").trim().split(" ");switch(h[0].toLowerCase()){case"newmtl":{a=h[1];break}case"kd":{var f=Math.floor(h[1]*255),v=h.length>=2?Math.floor(h[2]*255):f,y=h.length>=3?Math.floor(h[3]*255):f;s[a]=u(f,v,y);break}}}}return s};r.exports=g},15313:r=>{var m=function(e,u,g,c){var s,o;if(g===void 0&&c===void 0){var a=e.getInCenter();s=a.x,o=a.y}var l=Math.cos(u),p=Math.sin(u),h=e.vertex1,f=e.vertex2,v=e.vertex3,y=h.x-s,x=h.y-o;h.set(y*l-x*p+s,y*p+x*l+o),y=f.x-s,x=f.y-o,f.set(y*l-x*p+s,y*p+x*l+o),y=v.x-s,x=v.y-o,v.set(y*l-x*p+s,y*p+x*l+o)};r.exports=m},85769:(r,m,e)=>{var u=e(56694),g=e(75512),c=e(70015),s=new u({Extends:c,initialize:function(a,l,p,h,f,v,y,x,S,E){v===void 0&&(v=16777215),y===void 0&&(y=1),x===void 0&&(x=0),S===void 0&&(S=0),E===void 0&&(E=0),c.call(this,a,l,p),this.vx=0,this.vy=0,this.vz=0,this.nx=x,this.ny=S,this.nz=E,this.u=h,this.v=f,this.color=v,this.alpha=y,this.tx=0,this.ty=0,this.ta=0,this.tu=h,this.tv=f},setUVs:function(o,a){return this.u=o,this.v=a,this.tu=o,this.tv=a,this},scrollUV:function(o,a){return this.tu+=o,this.tv+=a,this},scaleUV:function(o,a){return this.tu=this.u*o,this.tv=this.v*a,this},transformCoordinatesLocal:function(o,a,l,p){var h=this.x,f=this.y,v=this.z,y=o.val,x=h*y[0]+f*y[4]+v*y[8]+y[12],S=h*y[1]+f*y[5]+v*y[9]+y[13],E=h*y[2]+f*y[6]+v*y[10]+y[14],b=h*y[3]+f*y[7]+v*y[11]+y[15];this.vx=x/b*a,this.vy=-(S/b)*l,p<=0?this.vz=E/b:this.vz=-(E/b)},resize:function(o,a,l,p,h,f){return this.x=o,this.y=a,this.vx=this.x*l,this.vy=-this.y*p,this.vz=0,h<.5?this.vx+=l*(.5-h):h>.5&&(this.vx-=l*(h-.5)),f<.5?this.vy+=p*(.5-f):f>.5&&(this.vy-=p*(f-.5)),this},update:function(o,a,l,p,h,f,v,y){var x=this.vx*o+this.vy*l+h,S=this.vx*a+this.vy*p+f;return v&&(x=Math.round(x),S=Math.round(S)),this.tx=x,this.ty=S,this.ta=this.alpha*y,this},load:function(o,a,l,p,h){return o[++l]=this.tx,o[++l]=this.ty,o[++l]=this.tu,o[++l]=this.tv,o[++l]=p,o[++l]=h,a[++l]=g.getTintAppendFloatAlpha(this.color,this.ta),l}});r.exports=s},14293:(r,m,e)=>{var u={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};r.exports=u},77601:r=>{var m=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};r.exports=m},38933:(r,m,e)=>{var u=e(79967),g=function(c){return new u(c.x,c.y)};r.exports=g},47103:r=>{var m=function(e,u){return u.setTo(e.x,e.y)};r.exports=m},13625:r=>{var m=function(e,u){return e.x===u.x&&e.y===u.y};r.exports=m},12536:r=>{var m=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};r.exports=m},54205:(r,m,e)=>{var u=e(79967),g=function(c,s){if(s===void 0&&(s=new u),!Array.isArray(c))throw new Error("GetCentroid points argument must be an array");var o=c.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(o===1)s.x=c[0].x,s.y=c[0].y;else{for(var a=0;a<o;a++)s.x+=c[a].x,s.y+=c[a].y;s.x/=o,s.y/=o}return s};r.exports=g},50083:r=>{var m=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};r.exports=m},82712:r=>{var m=function(e){return e.x*e.x+e.y*e.y};r.exports=m},20052:(r,m,e)=>{var u=e(74118),g=function(c,s){s===void 0&&(s=new u);for(var o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY,h=0;h<c.length;h++){var f=c[h];f.x>o&&(o=f.x),f.x<a&&(a=f.x),f.y>l&&(l=f.y),f.y<p&&(p=f.y)}return s.x=a,s.y=p,s.width=o-a,s.height=l-p,s};r.exports=g},77154:(r,m,e)=>{var u=e(79967),g=function(c,s,o,a){return o===void 0&&(o=0),a===void 0&&(a=new u),a.x=c.x+(s.x-c.x)*o,a.y=c.y+(s.y-c.y)*o,a};r.exports=g},42397:r=>{var m=function(e){return e.setTo(e.y,e.x)};r.exports=m},59464:(r,m,e)=>{var u=e(79967),g=function(c,s){return s===void 0&&(s=new u),s.setTo(-c.x,-c.y)};r.exports=g},79967:(r,m,e)=>{var u=e(56694),g=e(52394),c=new u({initialize:function(o,a){o===void 0&&(o=0),a===void 0&&(a=o),this.type=g.POINT,this.x=o,this.y=a},setTo:function(s,o){return s===void 0&&(s=0),o===void 0&&(o=s),this.x=s,this.y=o,this}});r.exports=c},53581:(r,m,e)=>{var u=e(79967),g=e(82712),c=function(s,o,a){a===void 0&&(a=new u);var l=s.x*o.x+s.y*o.y,p=l/g(o);return p!==0&&(a.x=p*o.x,a.y=p*o.y),a};r.exports=c},50817:(r,m,e)=>{var u=e(79967),g=function(c,s,o){o===void 0&&(o=new u);var a=c.x*s.x+c.y*s.y;return a!==0&&(o.x=a*s.x,o.y=a*s.y),o};r.exports=g},40525:(r,m,e)=>{var u=e(50083),g=function(c,s){if(c.x!==0||c.y!==0){var o=u(c);c.x/=o,c.y/=o}return c.x*=s,c.y*=s,c};r.exports=g},63472:(r,m,e)=>{var u=e(79967);u.Ceil=e(77601),u.Clone=e(38933),u.CopyFrom=e(47103),u.Equals=e(13625),u.Floor=e(12536),u.GetCentroid=e(54205),u.GetMagnitude=e(50083),u.GetMagnitudeSq=e(82712),u.GetRectangleFromPoints=e(20052),u.Interpolate=e(77154),u.Invert=e(42397),u.Negative=e(59464),u.Project=e(53581),u.ProjectUnit=e(50817),u.SetMagnitude=e(40525),r.exports=u},19631:(r,m,e)=>{var u=e(8580),g=function(c){return new u(c.points)};r.exports=g},45604:r=>{var m=function(e,u,g){for(var c=!1,s=-1,o=e.points.length-1;++s<e.points.length;o=s){var a=e.points[s].x,l=e.points[s].y,p=e.points[o].x,h=e.points[o].y;(l<=g&&g<h||h<=g&&g<l)&&u<(p-a)*(g-l)/(h-l)+a&&(c=!c)}return c};r.exports=m},87289:(r,m,e)=>{var u=e(45604),g=function(c,s){return u(c,s.x,s.y)};r.exports=g},11117:r=>{"use strict";function m(F,G,M){M=M||2;var N=G&&G.length,k=N?G[0]*M:F.length,z=e(F,0,k,M,!0),H=[];if(!z||z.next===z.prev)return H;var $,X,Y,j,J,Q,Z;if(N&&(z=l(F,G,z,M)),F.length>80*M){$=Y=F[0],X=j=F[1];for(var it=M;it<k;it+=M)J=F[it],Q=F[it+1],J<$&&($=J),Q<X&&(X=Q),J>Y&&(Y=J),Q>j&&(j=Q);Z=Math.max(Y-$,j-X),Z=Z!==0?32767/Z:0}return g(z,H,M,$,X,Z,0),H}function e(F,G,M,N,k){var z,H;if(k===W(F,G,M,N)>0)for(z=G;z<M;z+=N)H=V(z,F[z],F[z+1],H);else for(z=M-N;z>=G;z-=N)H=V(z,F[z],F[z+1],H);return H&&C(H,H.next)&&(B(H),H=H.next),H}function u(F,G){if(!F)return F;G||(G=F);var M=F,N;do if(N=!1,!M.steiner&&(C(M,M.next)||P(M.prev,M,M.next)===0)){if(B(M),M=G=M.prev,M===M.next)break;N=!0}else M=M.next;while(N||M!==G);return G}function g(F,G,M,N,k,z,H){if(F){!H&&z&&y(F,N,k,z);for(var $=F,X,Y;F.prev!==F.next;){if(X=F.prev,Y=F.next,z?s(F,N,k,z):c(F)){G.push(X.i/M|0),G.push(F.i/M|0),G.push(Y.i/M|0),B(F),F=Y.next,$=Y.next;continue}if(F=Y,F===$){H?H===1?(F=o(u(F),G,M),g(F,G,M,N,k,z,2)):H===2&&a(F,G,M,N,k,z):g(u(F),G,M,N,k,z,1);break}}}}function c(F){var G=F.prev,M=F,N=F.next;if(P(G,M,N)>=0)return!1;for(var k=G.x,z=M.x,H=N.x,$=G.y,X=M.y,Y=N.y,j=k<z?k<H?k:H:z<H?z:H,J=$<X?$<Y?$:Y:X<Y?X:Y,Q=k>z?k>H?k:H:z>H?z:H,Z=$>X?$>Y?$:Y:X>Y?X:Y,it=N.next;it!==G;){if(it.x>=j&&it.x<=Q&&it.y>=J&&it.y<=Z&&b(k,$,z,X,H,Y,it.x,it.y)&&P(it.prev,it,it.next)>=0)return!1;it=it.next}return!0}function s(F,G,M,N){var k=F.prev,z=F,H=F.next;if(P(k,z,H)>=0)return!1;for(var $=k.x,X=z.x,Y=H.x,j=k.y,J=z.y,Q=H.y,Z=$<X?$<Y?$:Y:X<Y?X:Y,it=j<J?j<Q?j:Q:J<Q?J:Q,rt=$>X?$>Y?$:Y:X>Y?X:Y,ut=j>J?j>Q?j:Q:J>Q?J:Q,dt=S(Z,it,G,M,N),ct=S(rt,ut,G,M,N),nt=F.prevZ,ht=F.nextZ;nt&&nt.z>=dt&&ht&&ht.z<=ct;){if(nt.x>=Z&&nt.x<=rt&&nt.y>=it&&nt.y<=ut&&nt!==k&&nt!==H&&b($,j,X,J,Y,Q,nt.x,nt.y)&&P(nt.prev,nt,nt.next)>=0||(nt=nt.prevZ,ht.x>=Z&&ht.x<=rt&&ht.y>=it&&ht.y<=ut&&ht!==k&&ht!==H&&b($,j,X,J,Y,Q,ht.x,ht.y)&&P(ht.prev,ht,ht.next)>=0))return!1;ht=ht.nextZ}for(;nt&&nt.z>=dt;){if(nt.x>=Z&&nt.x<=rt&&nt.y>=it&&nt.y<=ut&&nt!==k&&nt!==H&&b($,j,X,J,Y,Q,nt.x,nt.y)&&P(nt.prev,nt,nt.next)>=0)return!1;nt=nt.prevZ}for(;ht&&ht.z<=ct;){if(ht.x>=Z&&ht.x<=rt&&ht.y>=it&&ht.y<=ut&&ht!==k&&ht!==H&&b($,j,X,J,Y,Q,ht.x,ht.y)&&P(ht.prev,ht,ht.next)>=0)return!1;ht=ht.nextZ}return!0}function o(F,G,M){var N=F;do{var k=N.prev,z=N.next.next;!C(k,z)&&w(k,N,N.next,z)&&L(k,z)&&L(z,k)&&(G.push(k.i/M|0),G.push(N.i/M|0),G.push(z.i/M|0),B(N),B(N.next),N=F=z),N=N.next}while(N!==F);return u(N)}function a(F,G,M,N,k,z){var H=F;do{for(var $=H.next.next;$!==H.prev;){if(H.i!==$.i&&T(H,$)){var X=D(H,$);H=u(H,H.next),X=u(X,X.next),g(H,G,M,N,k,z,0),g(X,G,M,N,k,z,0);return}$=$.next}H=H.next}while(H!==F)}function l(F,G,M,N){var k=[],z,H,$,X,Y;for(z=0,H=G.length;z<H;z++)$=G[z]*N,X=z<H-1?G[z+1]*N:F.length,Y=e(F,$,X,N,!1),Y===Y.next&&(Y.steiner=!0),k.push(E(Y));for(k.sort(p),z=0;z<k.length;z++)M=h(k[z],M);return M}function p(F,G){return F.x-G.x}function h(F,G){var M=f(F,G);if(!M)return G;var N=D(M,F);return u(N,N.next),u(M,M.next)}function f(F,G){var M=G,N=F.x,k=F.y,z=-1/0,H;do{if(k<=M.y&&k>=M.next.y&&M.next.y!==M.y){var $=M.x+(k-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if($<=N&&$>z&&(z=$,H=M.x<M.next.x?M:M.next,$===N))return H}M=M.next}while(M!==G);if(!H)return null;var X=H,Y=H.x,j=H.y,J=1/0,Q;M=H;do N>=M.x&&M.x>=Y&&N!==M.x&&b(k<j?N:z,k,Y,j,k<j?z:N,k,M.x,M.y)&&(Q=Math.abs(k-M.y)/(N-M.x),L(M,F)&&(Q<J||Q===J&&(M.x>H.x||M.x===H.x&&v(H,M)))&&(H=M,J=Q)),M=M.next;while(M!==X);return H}function v(F,G){return P(F.prev,F,G.prev)<0&&P(G.next,F,F.next)<0}function y(F,G,M,N){var k=F;do k.z===0&&(k.z=S(k.x,k.y,G,M,N)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next;while(k!==F);k.prevZ.nextZ=null,k.prevZ=null,x(k)}function x(F){var G,M,N,k,z,H,$,X,Y=1;do{for(M=F,F=null,z=null,H=0;M;){for(H++,N=M,$=0,G=0;G<Y&&($++,N=N.nextZ,!!N);G++);for(X=Y;$>0||X>0&&N;)$!==0&&(X===0||!N||M.z<=N.z)?(k=M,M=M.nextZ,$--):(k=N,N=N.nextZ,X--),z?z.nextZ=k:F=k,k.prevZ=z,z=k;M=N}z.nextZ=null,Y*=2}while(H>1);return F}function S(F,G,M,N,k){return F=(F-M)*k|0,G=(G-N)*k|0,F=(F|F<<8)&16711935,F=(F|F<<4)&252645135,F=(F|F<<2)&858993459,F=(F|F<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,F|G<<1}function E(F){var G=F,M=F;do(G.x<M.x||G.x===M.x&&G.y<M.y)&&(M=G),G=G.next;while(G!==F);return M}function b(F,G,M,N,k,z,H,$){return(k-H)*(G-$)>=(F-H)*(z-$)&&(F-H)*(N-$)>=(M-H)*(G-$)&&(M-H)*(z-$)>=(k-H)*(N-$)}function T(F,G){return F.next.i!==G.i&&F.prev.i!==G.i&&!I(F,G)&&(L(F,G)&&L(G,F)&&O(F,G)&&(P(F.prev,F,G.prev)||P(F,G.prev,G))||C(F,G)&&P(F.prev,F,F.next)>0&&P(G.prev,G,G.next)>0)}function P(F,G,M){return(G.y-F.y)*(M.x-G.x)-(G.x-F.x)*(M.y-G.y)}function C(F,G){return F.x===G.x&&F.y===G.y}function w(F,G,M,N){var k=R(P(F,G,M)),z=R(P(F,G,N)),H=R(P(M,N,F)),$=R(P(M,N,G));return!!(k!==z&&H!==$||k===0&&A(F,M,G)||z===0&&A(F,N,G)||H===0&&A(M,F,N)||$===0&&A(M,G,N))}function A(F,G,M){return G.x<=Math.max(F.x,M.x)&&G.x>=Math.min(F.x,M.x)&&G.y<=Math.max(F.y,M.y)&&G.y>=Math.min(F.y,M.y)}function R(F){return F>0?1:F<0?-1:0}function I(F,G){var M=F;do{if(M.i!==F.i&&M.next.i!==F.i&&M.i!==G.i&&M.next.i!==G.i&&w(M,M.next,F,G))return!0;M=M.next}while(M!==F);return!1}function L(F,G){return P(F.prev,F,F.next)<0?P(F,G,F.next)>=0&&P(F,F.prev,G)>=0:P(F,G,F.prev)<0||P(F,F.next,G)<0}function O(F,G){var M=F,N=!1,k=(F.x+G.x)/2,z=(F.y+G.y)/2;do M.y>z!=M.next.y>z&&M.next.y!==M.y&&k<(M.next.x-M.x)*(z-M.y)/(M.next.y-M.y)+M.x&&(N=!N),M=M.next;while(M!==F);return N}function D(F,G){var M=new U(F.i,F.x,F.y),N=new U(G.i,G.x,G.y),k=F.next,z=G.prev;return F.next=G,G.prev=F,M.next=k,k.prev=M,N.next=M,M.prev=N,z.next=N,N.prev=z,N}function V(F,G,M,N){var k=new U(F,G,M);return N?(k.next=N.next,k.prev=N,N.next.prev=k,N.next=k):(k.prev=k,k.next=k),k}function B(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function U(F,G,M){this.i=F,this.x=G,this.y=M,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}m.deviation=function(F,G,M,N){var k=G&&G.length,z=k?G[0]*M:F.length,H=Math.abs(W(F,0,z,M));if(k)for(var $=0,X=G.length;$<X;$++){var Y=G[$]*M,j=$<X-1?G[$+1]*M:F.length;H-=Math.abs(W(F,Y,j,M))}var J=0;for($=0;$<N.length;$+=3){var Q=N[$]*M,Z=N[$+1]*M,it=N[$+2]*M;J+=Math.abs((F[Q]-F[it])*(F[Z+1]-F[Q+1])-(F[Q]-F[Z])*(F[it+1]-F[Q+1]))}return H===0&&J===0?0:Math.abs((J-H)/H)};function W(F,G,M,N){for(var k=0,z=G,H=M-N;z<M;z+=N)k+=(F[H]-F[z])*(F[z+1]+F[H+1]),H=z;return k}m.flatten=function(F){for(var G=F[0][0].length,M={vertices:[],holes:[],dimensions:G},N=0,k=0;k<F.length;k++){for(var z=0;z<F[k].length;z++)for(var H=0;H<G;H++)M.vertices.push(F[k][z][H]);k>0&&(N+=F[k-1].length,M.holes.push(N))}return M},r.exports=m},14045:(r,m,e)=>{var u=e(74118),g=function(c,s){s===void 0&&(s=new u);for(var o=1/0,a=1/0,l=-o,p=-a,h,f=0;f<c.points.length;f++)h=c.points[f],o=Math.min(o,h.x),a=Math.min(a,h.y),l=Math.max(l,h.x),p=Math.max(p,h.y);return s.x=o,s.y=a,s.width=l-o,s.height=p-a,s};r.exports=g},98286:r=>{var m=function(e,u){u===void 0&&(u=[]);for(var g=0;g<e.points.length;g++)u.push(e.points[g].x),u.push(e.points[g].y);return u};r.exports=m},89294:(r,m,e)=>{var u=e(16028),g=e(88829),c=e(5159),s=function(o,a,l,p){p===void 0&&(p=[]);var h=o.points,f=c(o);!a&&l>0&&(a=f/l);for(var v=0;v<a;v++)for(var y=f*(v/a),x=0,S=0;S<h.length;S++){var E=h[S],b=h[(S+1)%h.length],T=new g(E.x,E.y,b.x,b.y),P=u(T);if(y<x||y>x+P){x+=P;continue}var C=T.getPoint((y-x)/P);p.push(C);break}return p};r.exports=s},5159:(r,m,e)=>{var u=e(16028),g=e(88829),c=function(s){for(var o=s.points,a=0,l=0;l<o.length;l++){var p=o[l],h=o[(l+1)%o.length],f=new g(p.x,p.y,h.x,h.y);a+=u(f)}return a};r.exports=c},8580:(r,m,e)=>{var u=e(56694),g=e(45604),c=e(89294),s=e(52394),o=new u({initialize:function(l){this.type=s.POLYGON,this.area=0,this.points=[],l&&this.setTo(l)},contains:function(a,l){return g(this,a,l)},setTo:function(a){if(this.area=0,this.points=[],typeof a=="string"&&(a=a.split(" ")),!Array.isArray(a))return this;for(var l,p=Number.MAX_VALUE,h=0;h<a.length;h++)l={x:0,y:0},typeof a[h]=="number"||typeof a[h]=="string"?(l.x=parseFloat(a[h]),l.y=parseFloat(a[h+1]),h++):Array.isArray(a[h])?(l.x=a[h][0],l.y=a[h][1]):(l.x=a[h].x,l.y=a[h].y),this.points.push(l),l.y<p&&(p=l.y);return this.calculateArea(p),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var a=0,l,p,h=0;h<this.points.length-1;h++)l=this.points[h],p=this.points[h+1],a+=(p.x-l.x)*(l.y+p.y);return l=this.points[0],p=this.points[this.points.length-1],a+=(l.x-p.x)*(p.y+l.y),this.area=-a*.5,this.area},getPoints:function(a,l,p){return c(this,a,l,p)}});r.exports=o},32244:r=>{var m=function(e){return e.points.reverse(),e};r.exports=m},95874:r=>{function m(o,a){var l=o.x-a.x,p=o.y-a.y;return l*l+p*p}function e(o,a,l){var p=a.x,h=a.y,f=l.x-p,v=l.y-h;if(f!==0||v!==0){var y=((o.x-p)*f+(o.y-h)*v)/(f*f+v*v);y>1?(p=l.x,h=l.y):y>0&&(p+=f*y,h+=v*y)}return f=o.x-p,v=o.y-h,f*f+v*v}function u(o,a){for(var l=o[0],p=[l],h,f=1,v=o.length;f<v;f++)h=o[f],m(h,l)>a&&(p.push(h),l=h);return l!==h&&p.push(h),p}function g(o,a,l,p,h){for(var f=p,v,y=a+1;y<l;y++){var x=e(o[y],o[a],o[l]);x>f&&(v=y,f=x)}f>p&&(v-a>1&&g(o,a,v,p,h),h.push(o[v]),l-v>1&&g(o,v,l,p,h))}function c(o,a){var l=o.length-1,p=[o[0]];return g(o,0,l,a,p),p.push(o[l]),p}var s=function(o,a,l){a===void 0&&(a=1),l===void 0&&(l=!1);var p=o.points;if(p.length>2){var h=a*a;l||(p=u(p,h)),o.setTo(c(p,h))}return o};r.exports=s},18974:r=>{var m=function(u,g){return u[0]=g[0],u[1]=g[1],u},e=function(u){var g,c=[],s=u.points;for(g=0;g<s.length;g++)c.push([s[g].x,s[g].y]);var o=[];for(c.length>0&&o.push(m([0,0],c[0])),g=0;g<c.length-1;g++){var a=c[g],l=c[g+1],p=a[0],h=a[1],f=l[0],v=l[1];o.push([.85*p+.15*f,.85*h+.15*v]),o.push([.15*p+.85*f,.15*h+.85*v])}return c.length>1&&o.push(m([0,0],c[c.length-1])),u.setTo(o)};r.exports=e},23490:r=>{var m=function(e,u,g){for(var c=e.points,s=0;s<c.length;s++)c[s].x+=u,c[s].y+=g;return e};r.exports=m},44359:(r,m,e)=>{var u=e(8580);u.Clone=e(19631),u.Contains=e(45604),u.ContainsPoint=e(87289),u.Earcut=e(11117),u.GetAABB=e(14045),u.GetNumberArray=e(98286),u.GetPoints=e(89294),u.Perimeter=e(5159),u.Reverse=e(32244),u.Simplify=e(95874),u.Smooth=e(18974),u.Translate=e(23490),r.exports=u},1653:r=>{var m=function(e){return e.width*e.height};r.exports=m},33943:r=>{var m=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};r.exports=m},58662:r=>{var m=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};r.exports=m},79993:r=>{var m=function(e,u,g){return e.x=u-e.width/2,e.y=g-e.height/2,e};r.exports=m},81572:(r,m,e)=>{var u=e(74118),g=function(c){return new u(c.x,c.y,c.width,c.height)};r.exports=g},94287:r=>{var m=function(e,u,g){return e.width<=0||e.height<=0?!1:e.x<=u&&e.x+e.width>=u&&e.y<=g&&e.y+e.height>=g};r.exports=m},28687:(r,m,e)=>{var u=e(94287),g=function(c,s){return u(c,s.x,s.y)};r.exports=g},73222:r=>{var m=function(e,u){return u.width*u.height>e.width*e.height?!1:u.x>e.x&&u.x<e.right&&u.right>e.x&&u.right<e.right&&u.y>e.y&&u.y<e.bottom&&u.bottom>e.y&&u.bottom<e.bottom};r.exports=m},29538:r=>{var m=function(e,u){return u.setTo(e.x,e.y,e.width,e.height)};r.exports=m},87279:r=>{var m=function(e,u){return u===void 0&&(u=[]),u.push({x:e.x,y:e.y}),u.push({x:e.right,y:e.y}),u.push({x:e.right,y:e.bottom}),u.push({x:e.x,y:e.bottom}),u};r.exports=m},19989:r=>{var m=function(e,u){return e.x===u.x&&e.y===u.y&&e.width===u.width&&e.height===u.height};r.exports=m},92628:(r,m,e)=>{var u=e(6700),g=function(c,s){var o=u(c);return o<u(s)?c.setSize(s.height*o,s.height):c.setSize(s.width,s.width/o),c.setPosition(s.centerX-c.width/2,s.centerY-c.height/2)};r.exports=g},85028:(r,m,e)=>{var u=e(6700),g=function(c,s){var o=u(c);return o>u(s)?c.setSize(s.height*o,s.height):c.setSize(s.width,s.width/o),c.setPosition(s.centerX-c.width/2,s.centerY-c.height/2)};r.exports=g},71356:r=>{var m=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};r.exports=m},21687:r=>{var m=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};r.exports=m},80222:(r,m,e)=>{var u=e(74118),g=e(83392),c=function(s,o){if(o===void 0&&(o=new u),s.length===0)return o;for(var a=Number.MAX_VALUE,l=Number.MAX_VALUE,p=g.MIN_SAFE_INTEGER,h=g.MIN_SAFE_INTEGER,f,v,y,x=0;x<s.length;x++)f=s[x],Array.isArray(f)?(v=f[0],y=f[1]):(v=f.x,y=f.y),a=Math.min(a,v),l=Math.min(l,y),p=Math.max(p,v),h=Math.max(h,y);return o.x=a,o.y=l,o.width=p-a,o.height=h-l,o};r.exports=c},75785:(r,m,e)=>{var u=e(74118),g=function(c,s,o,a,l){return l===void 0&&(l=new u),l.setTo(Math.min(c,o),Math.min(s,a),Math.abs(c-o),Math.abs(s-a))};r.exports=g},6700:r=>{var m=function(e){return e.height===0?NaN:e.width/e.height};r.exports=m},35242:(r,m,e)=>{var u=e(79967),g=function(c,s){return s===void 0&&(s=new u),s.x=c.centerX,s.y=c.centerY,s};r.exports=g},47698:(r,m,e)=>{var u=e(85876),g=e(79967),c=function(s,o,a){if(a===void 0&&(a=new g),o<=0||o>=1)return a.x=s.x,a.y=s.y,a;var l=u(s)*o;return o>.5?(l-=s.width+s.height,l<=s.width?(a.x=s.right-l,a.y=s.bottom):(a.x=s.x,a.y=s.bottom-(l-s.width))):l<=s.width?(a.x=s.x+l,a.y=s.y):(a.x=s.right,a.y=s.y+(l-s.width)),a};r.exports=c},54932:(r,m,e)=>{var u=e(47698),g=e(85876),c=function(s,o,a,l){l===void 0&&(l=[]),!o&&a>0&&(o=g(s)/a);for(var p=0;p<o;p++){var h=p/o;l.push(u(s,h))}return l};r.exports=c},31591:(r,m,e)=>{var u=e(79967),g=function(c,s){return s===void 0&&(s=new u),s.x=c.width,s.y=c.height,s};r.exports=g},7782:(r,m,e)=>{var u=e(79993),g=function(c,s,o){var a=c.centerX,l=c.centerY;return c.setSize(c.width+s*2,c.height+o*2),u(c,a,l)};r.exports=g},66217:(r,m,e)=>{var u=e(74118),g=e(90205),c=function(s,o,a){return a===void 0&&(a=new u),g(s,o)?(a.x=Math.max(s.x,o.x),a.y=Math.max(s.y,o.y),a.width=Math.min(s.right,o.right)-a.x,a.height=Math.min(s.bottom,o.bottom)-a.y):a.setEmpty(),a};r.exports=c},40053:(r,m,e)=>{var u=e(85876),g=e(79967),c=function(s,o,a,l){if(l===void 0&&(l=[]),!o&&!a)return l;o?a=Math.round(u(s)/o):o=u(s)/a;for(var p=s.x,h=s.y,f=0,v=0;v<a;v++)switch(l.push(new g(p,h)),f){case 0:p+=o,p>=s.right&&(f=1,h+=p-s.right,p=s.right);break;case 1:h+=o,h>=s.bottom&&(f=2,p-=h-s.bottom,h=s.bottom);break;case 2:p-=o,p<=s.left&&(f=3,h-=s.left-p,p=s.left);break;case 3:h-=o,h<=s.top&&(f=0,h=s.top);break}return l};r.exports=c},86673:r=>{var m=function(e,u){for(var g=e.x,c=e.right,s=e.y,o=e.bottom,a=0;a<u.length;a++)g=Math.min(g,u[a].x),c=Math.max(c,u[a].x),s=Math.min(s,u[a].y),o=Math.max(o,u[a].y);return e.x=g,e.y=s,e.width=c-g,e.height=o-s,e};r.exports=m},14655:r=>{var m=function(e,u){var g=Math.min(e.x,u.x),c=Math.max(e.right,u.right);e.x=g,e.width=c-g;var s=Math.min(e.y,u.y),o=Math.max(e.bottom,u.bottom);return e.y=s,e.height=o-s,e};r.exports=m},44755:r=>{var m=function(e,u,g){var c=Math.min(e.x,u),s=Math.max(e.right,u);e.x=c,e.width=s-c;var o=Math.min(e.y,g),a=Math.max(e.bottom,g);return e.y=o,e.height=a-o,e};r.exports=m},74466:r=>{var m=function(e,u,g){return e.x+=u,e.y+=g,e};r.exports=m},55946:r=>{var m=function(e,u){return e.x+=u.x,e.y+=u.y,e};r.exports=m},97474:r=>{var m=function(e,u){return e.x<u.right&&e.right>u.x&&e.y<u.bottom&&e.bottom>u.y};r.exports=m},85876:r=>{var m=function(e){return 2*(e.width+e.height)};r.exports=m},20243:(r,m,e)=>{var u=e(79967),g=e(75606),c=function(s,o,a){a===void 0&&(a=new u),o=g(o);var l=Math.sin(o),p=Math.cos(o),h=p>0?s.width/2:s.width/-2,f=l>0?s.height/2:s.height/-2;return Math.abs(h*l)<Math.abs(f*p)?f=h*l/p:h=f*p/l,a.x=h+s.centerX,a.y=f+s.centerY,a};r.exports=c},30001:(r,m,e)=>{var u=e(79967),g=function(c,s){return s===void 0&&(s=new u),s.x=c.x+Math.random()*c.width,s.y=c.y+Math.random()*c.height,s};r.exports=g},97691:(r,m,e)=>{var u=e(17489),g=e(73222),c=e(79967),s=function(o,a,l){if(l===void 0&&(l=new c),g(o,a))switch(u(0,3)){case 0:l.x=o.x+Math.random()*(a.right-o.x),l.y=o.y+Math.random()*(a.top-o.y);break;case 1:l.x=a.x+Math.random()*(o.right-a.x),l.y=a.bottom+Math.random()*(o.bottom-a.bottom);break;case 2:l.x=o.x+Math.random()*(a.x-o.x),l.y=a.y+Math.random()*(o.bottom-a.y);break;case 3:l.x=a.right+Math.random()*(o.right-a.right),l.y=o.y+Math.random()*(a.bottom-o.y);break}return l};r.exports=s},74118:(r,m,e)=>{var u=e(56694),g=e(94287),c=e(47698),s=e(54932),o=e(52394),a=e(88829),l=e(30001),p=new u({initialize:function(f,v,y,x){f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=0),this.type=o.RECTANGLE,this.x=f,this.y=v,this.width=y,this.height=x},contains:function(h,f){return g(this,h,f)},getPoint:function(h,f){return c(this,h,f)},getPoints:function(h,f,v){return s(this,h,f,v)},getRandomPoint:function(h){return l(this,h)},setTo:function(h,f,v,y){return this.x=h,this.y=f,this.width=v,this.height=y,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(h,f){return f===void 0&&(f=h),this.x=h,this.y=f,this},setSize:function(h,f){return f===void 0&&(f=h),this.width=h,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(h){return h===void 0&&(h=new a),h.setTo(this.x,this.y,this.right,this.y),h},getLineB:function(h){return h===void 0&&(h=new a),h.setTo(this.right,this.y,this.right,this.bottom),h},getLineC:function(h){return h===void 0&&(h=new a),h.setTo(this.right,this.bottom,this.x,this.bottom),h},getLineD:function(h){return h===void 0&&(h=new a),h.setTo(this.x,this.bottom,this.x,this.y),h},left:{get:function(){return this.x},set:function(h){h>=this.right?this.width=0:this.width=this.right-h,this.x=h}},right:{get:function(){return this.x+this.width},set:function(h){h<=this.x?this.width=0:this.width=h-this.x}},top:{get:function(){return this.y},set:function(h){h>=this.bottom?this.height=0:this.height=this.bottom-h,this.y=h}},bottom:{get:function(){return this.y+this.height},set:function(h){h<=this.y?this.height=0:this.height=h-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});r.exports=p},51828:r=>{var m=function(e,u){return e.width===u.width&&e.height===u.height};r.exports=m},5691:r=>{var m=function(e,u,g){return g===void 0&&(g=u),e.width*=u,e.height*=g,e};r.exports=m},58795:(r,m,e)=>{var u=e(74118),g=function(c,s,o){o===void 0&&(o=new u);var a=Math.min(c.x,s.x),l=Math.min(c.y,s.y),p=Math.max(c.right,s.right)-a,h=Math.max(c.bottom,s.bottom)-l;return o.setTo(a,l,p,h)};r.exports=g},66658:(r,m,e)=>{var u=e(74118);u.Area=e(1653),u.Ceil=e(33943),u.CeilAll=e(58662),u.CenterOn=e(79993),u.Clone=e(81572),u.Contains=e(94287),u.ContainsPoint=e(28687),u.ContainsRect=e(73222),u.CopyFrom=e(29538),u.Decompose=e(87279),u.Equals=e(19989),u.FitInside=e(92628),u.FitOutside=e(85028),u.Floor=e(71356),u.FloorAll=e(21687),u.FromPoints=e(80222),u.FromXY=e(75785),u.GetAspectRatio=e(6700),u.GetCenter=e(35242),u.GetPoint=e(47698),u.GetPoints=e(54932),u.GetSize=e(31591),u.Inflate=e(7782),u.Intersection=e(66217),u.MarchingAnts=e(40053),u.MergePoints=e(86673),u.MergeRect=e(14655),u.MergeXY=e(44755),u.Offset=e(74466),u.OffsetPoint=e(55946),u.Overlaps=e(97474),u.Perimeter=e(85876),u.PerimeterPoint=e(20243),u.Random=e(30001),u.RandomOutside=e(97691),u.SameDimensions=e(51828),u.Scale=e(5691),u.Union=e(58795),r.exports=u},19108:r=>{var m=function(e){var u=e.x1,g=e.y1,c=e.x2,s=e.y2,o=e.x3,a=e.y3;return Math.abs(((o-u)*(s-g)-(c-u)*(a-g))/2)};r.exports=m},41199:(r,m,e)=>{var u=e(66349),g=function(c,s,o){var a=o*(Math.sqrt(3)/2),l=c,p=s,h=c+o/2,f=s+a,v=c-o/2,y=s+a;return new u(l,p,h,f,v,y)};r.exports=g},88730:(r,m,e)=>{var u=e(11117),g=e(66349),c=function(s,o,a,l,p){o===void 0&&(o=null),a===void 0&&(a=1),l===void 0&&(l=1),p===void 0&&(p=[]);for(var h=u(s,o),f,v,y,x,S,E,b,T,P,C=0;C<h.length;C+=3)f=h[C],v=h[C+1],y=h[C+2],x=s[f*2]*a,S=s[f*2+1]*l,E=s[v*2]*a,b=s[v*2+1]*l,T=s[y*2]*a,P=s[y*2+1]*l,p.push(new g(x,S,E,b,T,P));return p};r.exports=c},3635:(r,m,e)=>{var u=e(66349),g=function(c,s,o,a){a===void 0&&(a=o);var l=c,p=s,h=c,f=s-a,v=c+o,y=s;return new u(l,p,h,f,v,y)};r.exports=g},1882:(r,m,e)=>{var u=e(56595),g=e(9640),c=function(s,o,a,l){l===void 0&&(l=u);var p=l(s),h=o-p.x,f=a-p.y;return g(s,h,f)};r.exports=c},56595:(r,m,e)=>{var u=e(79967),g=function(c,s){return s===void 0&&(s=new u),s.x=(c.x1+c.x2+c.x3)/3,s.y=(c.y1+c.y2+c.y3)/3,s};r.exports=g},91835:(r,m,e)=>{var u=e(93736);function g(s,o,a,l){return s*l-o*a}var c=function(s,o){o===void 0&&(o=new u);var a=s.x3,l=s.y3,p=s.x1-a,h=s.y1-l,f=s.x2-a,v=s.y2-l,y=2*g(p,h,f,v),x=g(h,p*p+h*h,v,f*f+v*v),S=g(p,p*p+h*h,f,f*f+v*v);return o.x=a-x/y,o.y=l+S/y,o};r.exports=c},97073:(r,m,e)=>{var u=e(26673),g=function(c,s){s===void 0&&(s=new u);var o=c.x1,a=c.y1,l=c.x2,p=c.y2,h=c.x3,f=c.y3,v=l-o,y=p-a,x=h-o,S=f-a,E=v*(o+l)+y*(a+p),b=x*(o+h)+S*(a+f),T=2*(v*(f-p)-y*(h-l)),P,C;if(Math.abs(T)<1e-6){var w=Math.min(o,l,h),A=Math.min(a,p,f);P=(Math.max(o,l,h)-w)*.5,C=(Math.max(a,p,f)-A)*.5,s.x=w+P,s.y=A+C,s.radius=Math.sqrt(P*P+C*C)}else s.x=(S*E-y*b)/T,s.y=(v*b-x*E)/T,P=s.x-o,C=s.y-a,s.radius=Math.sqrt(P*P+C*C);return s};r.exports=g},75974:(r,m,e)=>{var u=e(66349),g=function(c){return new u(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)};r.exports=g},60689:r=>{var m=function(e,u,g){var c=e.x3-e.x1,s=e.y3-e.y1,o=e.x2-e.x1,a=e.y2-e.y1,l=u-e.x1,p=g-e.y1,h=c*c+s*s,f=c*o+s*a,v=c*l+s*p,y=o*o+a*a,x=o*l+a*p,S=h*y-f*f,E=S===0?0:1/S,b=(y*v-f*x)*E,T=(h*x-f*v)*E;return b>=0&&T>=0&&b+T<1};r.exports=m},86875:r=>{var m=function(e,u,g,c){g===void 0&&(g=!1),c===void 0&&(c=[]);for(var s=e.x3-e.x1,o=e.y3-e.y1,a=e.x2-e.x1,l=e.y2-e.y1,p=s*s+o*o,h=s*a+o*l,f=a*a+l*l,v=p*f-h*h,y=v===0?0:1/v,x,S,E,b,T,P,C=e.x1,w=e.y1,A=0;A<u.length&&(E=u[A].x-C,b=u[A].y-w,T=s*E+o*b,P=a*E+l*b,x=(f*T-h*P)*y,S=(p*P-h*T)*y,!(x>=0&&S>=0&&x+S<1&&(c.push({x:u[A].x,y:u[A].y}),g)));A++);return c};r.exports=m},51532:(r,m,e)=>{var u=e(60689),g=function(c,s){return u(c,s.x,s.y)};r.exports=g},42538:r=>{var m=function(e,u){return u.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};r.exports=m},18680:r=>{var m=function(e,u){return u===void 0&&(u=[]),u.push({x:e.x1,y:e.y1}),u.push({x:e.x2,y:e.y2}),u.push({x:e.x3,y:e.y3}),u};r.exports=m},29977:r=>{var m=function(e,u){return e.x1===u.x1&&e.y1===u.y1&&e.x2===u.x2&&e.y2===u.y2&&e.x3===u.x3&&e.y3===u.y3};r.exports=m},56088:(r,m,e)=>{var u=e(79967),g=e(16028),c=function(s,o,a){a===void 0&&(a=new u);var l=s.getLineA(),p=s.getLineB(),h=s.getLineC();if(o<=0||o>=1)return a.x=l.x1,a.y=l.y1,a;var f=g(l),v=g(p),y=g(h),x=f+v+y,S=x*o,E=0;return S<f?(E=S/f,a.x=l.x1+(l.x2-l.x1)*E,a.y=l.y1+(l.y2-l.y1)*E):S>f+v?(S-=f+v,E=S/y,a.x=h.x1+(h.x2-h.x1)*E,a.y=h.y1+(h.y2-h.y1)*E):(S-=f,E=S/v,a.x=p.x1+(p.x2-p.x1)*E,a.y=p.y1+(p.y2-p.y1)*E),a};r.exports=c},24402:(r,m,e)=>{var u=e(16028),g=e(79967),c=function(s,o,a,l){l===void 0&&(l=[]);var p=s.getLineA(),h=s.getLineB(),f=s.getLineC(),v=u(p),y=u(h),x=u(f),S=v+y+x;!o&&a>0&&(o=S/a);for(var E=0;E<o;E++){var b=S*(E/o),T=0,P=new g;b<v?(T=b/v,P.x=p.x1+(p.x2-p.x1)*T,P.y=p.y1+(p.y2-p.y1)*T):b>v+y?(b-=v+y,T=b/x,P.x=f.x1+(f.x2-f.x1)*T,P.y=f.y1+(f.y2-f.y1)*T):(b-=v,T=b/y,P.x=h.x1+(h.x2-h.x1)*T,P.y=h.y1+(h.y2-h.y1)*T),l.push(P)}return l};r.exports=c},83648:(r,m,e)=>{var u=e(79967);function g(s,o,a,l){var p=s-a,h=o-l,f=p*p+h*h;return Math.sqrt(f)}var c=function(s,o){o===void 0&&(o=new u);var a=s.x1,l=s.y1,p=s.x2,h=s.y2,f=s.x3,v=s.y3,y=g(f,v,p,h),x=g(a,l,f,v),S=g(p,h,a,l),E=y+x+S;return o.x=(a*y+p*x+f*S)/E,o.y=(l*y+h*x+v*S)/E,o};r.exports=c},9640:r=>{var m=function(e,u,g){return e.x1+=u,e.y1+=g,e.x2+=u,e.y2+=g,e.x3+=u,e.y3+=g,e};r.exports=m},95290:(r,m,e)=>{var u=e(16028),g=function(c){var s=c.getLineA(),o=c.getLineB(),a=c.getLineC();return u(s)+u(o)+u(a)};r.exports=g},99761:(r,m,e)=>{var u=e(79967),g=function(c,s){s===void 0&&(s=new u);var o=c.x2-c.x1,a=c.y2-c.y1,l=c.x3-c.x1,p=c.y3-c.y1,h=Math.random(),f=Math.random();return h+f>=1&&(h=1-h,f=1-f),s.x=c.x1+(o*h+l*f),s.y=c.y1+(a*h+p*f),s};r.exports=g},21934:(r,m,e)=>{var u=e(19211),g=e(83648),c=function(s,o){var a=g(s);return u(s,a.x,a.y,o)};r.exports=c},68454:(r,m,e)=>{var u=e(19211),g=function(c,s,o){return u(c,s.x,s.y,o)};r.exports=g},19211:r=>{var m=function(e,u,g,c){var s=Math.cos(c),o=Math.sin(c),a=e.x1-u,l=e.y1-g;return e.x1=a*s-l*o+u,e.y1=a*o+l*s+g,a=e.x2-u,l=e.y2-g,e.x2=a*s-l*o+u,e.y2=a*o+l*s+g,a=e.x3-u,l=e.y3-g,e.x3=a*s-l*o+u,e.y3=a*o+l*s+g,e};r.exports=m},66349:(r,m,e)=>{var u=e(56694),g=e(60689),c=e(56088),s=e(24402),o=e(52394),a=e(88829),l=e(99761),p=new u({initialize:function(f,v,y,x,S,E){f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=0),S===void 0&&(S=0),E===void 0&&(E=0),this.type=o.TRIANGLE,this.x1=f,this.y1=v,this.x2=y,this.y2=x,this.x3=S,this.y3=E},contains:function(h,f){return g(this,h,f)},getPoint:function(h,f){return c(this,h,f)},getPoints:function(h,f,v){return s(this,h,f,v)},getRandomPoint:function(h){return l(this,h)},setTo:function(h,f,v,y,x,S){return h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=0),S===void 0&&(S=0),this.x1=h,this.y1=f,this.x2=v,this.y2=y,this.x3=x,this.y3=S,this},getLineA:function(h){return h===void 0&&(h=new a),h.setTo(this.x1,this.y1,this.x2,this.y2),h},getLineB:function(h){return h===void 0&&(h=new a),h.setTo(this.x2,this.y2,this.x3,this.y3),h},getLineC:function(h){return h===void 0&&(h=new a),h.setTo(this.x3,this.y3,this.x1,this.y1),h},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(h){var f=0;this.x1<=this.x2&&this.x1<=this.x3?f=this.x1-h:this.x2<=this.x1&&this.x2<=this.x3?f=this.x2-h:f=this.x3-h,this.x1-=f,this.x2-=f,this.x3-=f}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(h){var f=0;this.x1>=this.x2&&this.x1>=this.x3?f=this.x1-h:this.x2>=this.x1&&this.x2>=this.x3?f=this.x2-h:f=this.x3-h,this.x1-=f,this.x2-=f,this.x3-=f}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(h){var f=0;this.y1<=this.y2&&this.y1<=this.y3?f=this.y1-h:this.y2<=this.y1&&this.y2<=this.y3?f=this.y2-h:f=this.y3-h,this.y1-=f,this.y2-=f,this.y3-=f}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(h){var f=0;this.y1>=this.y2&&this.y1>=this.y3?f=this.y1-h:this.y2>=this.y1&&this.y2>=this.y3?f=this.y2-h:f=this.y3-h,this.y1-=f,this.y2-=f,this.y3-=f}}});r.exports=p},87619:(r,m,e)=>{var u=e(66349);u.Area=e(19108),u.BuildEquilateral=e(41199),u.BuildFromPolygon=e(88730),u.BuildRight=e(3635),u.CenterOn=e(1882),u.Centroid=e(56595),u.CircumCenter=e(91835),u.CircumCircle=e(97073),u.Clone=e(75974),u.Contains=e(60689),u.ContainsArray=e(86875),u.ContainsPoint=e(51532),u.CopyFrom=e(42538),u.Decompose=e(18680),u.Equals=e(29977),u.GetPoint=e(56088),u.GetPoints=e(24402),u.InCenter=e(83648),u.Perimeter=e(95290),u.Offset=e(9640),u.Random=e(99761),u.Rotate=e(21934),u.RotateAroundPoint=e(68454),u.RotateAroundXY=e(19211),r.exports=u},27395:r=>{var m=function(e,u,g){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:g,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};r.exports=m},18104:r=>{var m=function(e,u){return function(g,c,s,o){var a=e.getPixelAlpha(c,s,o.texture.key,o.frame.name);return a&&a>=u}};r.exports=m},69898:(r,m,e)=>{var u=e(56694),g=e(72687),c=e(6659),s=e(33963),o=e(97081),a=e(71064),l=e(7905),p=e(40398),h=e(37579),f=e(69360),v=e(64462),y=new u({initialize:function(S,E){this.game=S,this.scaleManager,this.canvas,this.config=E,this.enabled=!0,this.events=new c,this.isOver=!0,this.defaultCursor="",this.keyboard=E.inputKeyboard?new a(this):null,this.mouse=E.inputMouse?new l(this):null,this.touch=E.inputTouch?new h(this):null,this.pointers=[],this.pointersTotal=E.inputActivePointers,E.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var b=0;b<=this.pointersTotal;b++){var T=new p(this,b);T.smoothFactor=E.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=E.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],S.events.once(o.BOOT,this.boot,this)},boot:function(){var x=this.game,S=x.events;this.canvas=x.canvas,this.scaleManager=x.scale,this.events.emit(s.MANAGER_BOOT),S.on(o.PRE_RENDER,this.preRender,this),S.once(o.DESTROY,this.destroy,this)},setCanvasOver:function(x){this.isOver=!0,this.events.emit(s.GAME_OVER,x)},setCanvasOut:function(x){this.isOver=!1,this.events.emit(s.GAME_OUT,x)},preRender:function(){var x=this.game.loop.now,S=this.game.loop.delta,E=this.game.scene.getScenes(!0,!0);this.time=x,this.events.emit(s.MANAGER_UPDATE);for(var b=0;b<E.length;b++){var T=E[b];if(T.sys.input&&T.sys.input.updatePoll(x,S)&&this.globalTopOnly)return}},setDefaultCursor:function(x){this.defaultCursor=x,this.canvas.style.cursor!==x&&(this.canvas.style.cursor=x)},setCursor:function(x){x.cursor&&(this.canvas.style.cursor=x.cursor)},resetCursor:function(x){x.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(x){x===void 0&&(x=1);var S=[];this.pointersTotal+x>10&&(x=10-this.pointersTotal);for(var E=0;E<x;E++){var b=this.pointers.length,T=new p(this,b);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,S.push(T)}return S},updateInputPlugins:function(x,S){var E=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var b=0;b<E.length;b++){var T=E[b];if(T.sys.input){var P=T.sys.input.update(x,S);if(P&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(x){for(var S=this.pointers,E=[],b=0;b<x.changedTouches.length;b++)for(var T=x.changedTouches[b],P=1;P<this.pointersTotal;P++){var C=S[P];if(!C.active){C.touchstart(T,x),this.activePointer=C,E.push(C);break}}this.updateInputPlugins(g.TOUCH_START,E)},onTouchMove:function(x){for(var S=this.pointers,E=[],b=0;b<x.changedTouches.length;b++)for(var T=x.changedTouches[b],P=1;P<this.pointersTotal;P++){var C=S[P];if(C.active&&C.identifier===T.identifier){var w=document.elementFromPoint(T.pageX,T.pageY),A=w===this.canvas;!this.isOver&&A?this.setCanvasOver(x):this.isOver&&!A&&this.setCanvasOut(x),this.isOver&&(C.touchmove(T,x),this.activePointer=C,E.push(C));break}}this.updateInputPlugins(g.TOUCH_MOVE,E)},onTouchEnd:function(x){for(var S=this.pointers,E=[],b=0;b<x.changedTouches.length;b++)for(var T=x.changedTouches[b],P=1;P<this.pointersTotal;P++){var C=S[P];if(C.active&&C.identifier===T.identifier){C.touchend(T,x),E.push(C);break}}this.updateInputPlugins(g.TOUCH_END,E)},onTouchCancel:function(x){for(var S=this.pointers,E=[],b=0;b<x.changedTouches.length;b++)for(var T=x.changedTouches[b],P=1;P<this.pointersTotal;P++){var C=S[P];if(C.active&&C.identifier===T.identifier){C.touchcancel(T,x),E.push(C);break}}this.updateInputPlugins(g.TOUCH_CANCEL,E)},onMouseDown:function(x){var S=this.mousePointer;S.down(x),S.updateMotion(),this.activePointer=S,this.updateInputPlugins(g.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(x){var S=this.mousePointer;S.move(x),S.updateMotion(),this.activePointer=S,this.updateInputPlugins(g.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(x){var S=this.mousePointer;S.up(x),S.updateMotion(),this.activePointer=S,this.updateInputPlugins(g.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(x){var S=this.mousePointer;S.wheel(x),this.activePointer=S,this.updateInputPlugins(g.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(x){var S=this.mouse.locked;this.mousePointer.locked=S,this.events.emit(s.POINTERLOCK_CHANGE,x,S)},inputCandidate:function(x,S){var E=x.input;if(!E||!E.enabled||!x.willRender(S))return!1;var b=!0,T=x.parentContainer;if(T)do{if(!T.willRender(S)){b=!1;break}T=T.parentContainer}while(T);return b},hitTest:function(x,S,E,b){b===void 0&&(b=this._tempHitTest);var T=this._tempPoint,P=E.scrollX,C=E.scrollY;b.length=0;var w=x.x,A=x.y;E.getWorldPoint(w,A,T),x.worldX=T.x,x.worldY=T.y;for(var R={x:0,y:0},I=this._tempMatrix,L=this._tempMatrix2,O=0;O<S.length;O++){var D=S[O];if(this.inputCandidate(D,E)){var V=T.x+P*D.scrollFactorX-P,B=T.y+C*D.scrollFactorY-C;D.parentContainer?(D.getWorldTransformMatrix(I,L),I.applyInverse(V,B,R)):v(V,B,D.x,D.y,D.rotation,D.scaleX,D.scaleY,R),this.pointWithinHitArea(D,R.x,R.y)&&b.push(D)}}return b},pointWithinHitArea:function(x,S,E){S+=x.displayOriginX,E+=x.displayOriginY;var b=x.input;return b&&b.hitAreaCallback(b.hitArea,S,E,x)?(b.localX=S,b.localY=E,!0):!1},pointWithinInteractiveObject:function(x,S,E){return x.hitArea?(S+=x.gameObject.displayOriginX,E+=x.gameObject.displayOriginY,x.localX=S,x.localY=E,x.hitAreaCallback(x.hitArea,S,E,x)):!1},transformPointer:function(x,S,E,b){var T=x.position,P=x.prevPosition;P.x=T.x,P.y=T.y;var C=this.scaleManager.transformX(S),w=this.scaleManager.transformY(E),A=x.smoothFactor;!b||A===0?(T.x=C,T.y=w):(T.x=C*A+P.x*(1-A),T.y=w*A+P.y*(1-A))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(o.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var x=0;x<this.pointers.length;x++)this.pointers[x].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});r.exports=y},12499:(r,m,e)=>{var u=e(26673),g=e(65650),c=e(56694),s=e(72687),o=e(27395),a=e(18104),l=e(53996),p=e(95669),h=e(72313),f=e(33963),v=e(6659),y=e(72632),x=e(52394),S=e(63399),E=e(42911),b=e(91963),T=e(74118),P=e(94287),C=e(7599),w=e(66349),A=e(60689),R=new c({Extends:v,initialize:function(L){v.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new v,this.enabled=!0,this.displayList,this.cameras,S.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var O={cancelled:!1};this._eventContainer={stopPropagation:function(){O.cancelled=!0}},this._eventData=O,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(C.BOOT,this.boot,this),L.sys.events.on(C.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(C.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var I=this.systems.events;I.on(C.TRANSITION_START,this.transitionIn,this),I.on(C.TRANSITION_OUT,this.transitionOut,this),I.on(C.TRANSITION_COMPLETE,this.transitionComplete,this),I.on(C.PRE_UPDATE,this.preUpdate,this),I.once(C.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(I){this.isActive()&&this.emit(f.GAME_OVER,I.timeStamp,I)},onGameOut:function(I){this.isActive()&&this.emit(f.GAME_OUT,I.timeStamp,I)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var I=this._pendingRemoval,L=this._pendingInsertion,O=I.length,D=L.length;if(!(O===0&&D===0)){for(var V=this._list,B=0;B<O;B++){var U=I[B],W=V.indexOf(U);W>-1&&(V.splice(W,1),this.clear(U,!0))}this._pendingRemoval.length=0,this._list=V.concat(L.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(I,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,I,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var O,D=this.manager,V=D.pointers,B=D.pointersTotal;for(O=0;O<B;O++)V[O].updateMotion();if(this._list.length===0)return!1;var U=this.pollRate;if(U===-1)return!1;if(U>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var W=!1;for(O=0;O<B;O++){var F=0,G=V[O];this._tempZones=[],this._temp=this.hitTestPointer(G),this.sortGameObjects(this._temp,G),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),F+=this.processOverOutEvents(G),this.getDragState(G)===2&&this.processDragThresholdEvent(G,I),F>0&&(W=!0)}return W},update:function(I,L){if(!this.isActive())return!1;for(var O=L.length,D=!1,V=0;V<O;V++){var B=0,U=L[V];switch(this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),I){case s.MOUSE_DOWN:B+=this.processDragDownEvent(U),B+=this.processDownEvents(U),B+=this.processOverOutEvents(U);break;case s.MOUSE_UP:B+=this.processDragUpEvent(U),B+=this.processUpEvents(U),B+=this.processOverOutEvents(U);break;case s.TOUCH_START:B+=this.processDragDownEvent(U),B+=this.processDownEvents(U),B+=this.processOverEvents(U);break;case s.TOUCH_END:case s.TOUCH_CANCEL:B+=this.processDragUpEvent(U),B+=this.processUpEvents(U),B+=this.processOutEvents(U);break;case s.MOUSE_MOVE:case s.TOUCH_MOVE:B+=this.processDragMoveEvent(U),B+=this.processMoveEvents(U),B+=this.processOverOutEvents(U);break;case s.MOUSE_WHEEL:B+=this.processWheelEvent(U);break}B>0&&(D=!0)}return this._updatedThisFrame=!0,D},clear:function(I,L){L===void 0&&(L=!1),this.disable(I);var O=I.input;O&&(this.removeDebug(I),O.gameObject=void 0,O.target=void 0,O.hitArea=void 0,O.hitAreaCallback=void 0,O.callbackContext=void 0,I.input=null),L||this.queueForRemoval(I);var D=this._draggable.indexOf(I);return D>-1&&this._draggable.splice(D,1),I},disable:function(I){var L=I.input;L&&(L.enabled=!1,L.dragState=0);var O=this._temp,D=this._drag,V=this._over,B=this.manager,U=O.indexOf(I);U>-1&&O.splice(U,1);for(var W=0;W<B.pointersTotal;W++)U=D[W].indexOf(I),U>-1&&D[W].splice(U,1),U=V[W].indexOf(I),U>-1&&(V[W].splice(U,1),B.resetCursor(L));return this},enable:function(I,L,O,D){return D===void 0&&(D=!1),I.input?I.input.enabled=!0:this.setHitArea(I,L,O),I.input&&D&&!I.input.dropZone&&(I.input.dropZone=D),this},hitTestPointer:function(I){for(var L=this.cameras.getCamerasBelowPointer(I),O=0;O<L.length;O++){for(var D=L[O],V=this.manager.hitTest(I,this._list,D),B=0;B<V.length;B++){var U=V[B];U.input.dropZone&&this._tempZones.push(U)}if(V.length>0)return I.camera=D,V}return I.camera=L[0],[]},processDownEvents:function(I){var L=0,O=this._temp,D=this._eventData,V=this._eventContainer;D.cancelled=!1;for(var B=!1,U=0;U<O.length;U++){var W=O[U];if(!(!W.input||!W.input.enabled)){if(L++,W.emit(f.GAMEOBJECT_POINTER_DOWN,I,W.input.localX,W.input.localY,V),D.cancelled||!W.input||!W.input.enabled){B=!0;break}if(this.emit(f.GAMEOBJECT_DOWN,I,W,V),D.cancelled||!W.input){B=!0;break}}}return!B&&this.manager&&(I.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,I,O):this.emit(f.POINTER_DOWN_OUTSIDE,I)),L},getDragState:function(I){return this._dragState[I.id]},setDragState:function(I,L){this._dragState[I.id]=L},processDragThresholdEvent:function(I,L){var O=!1,D=this.dragTimeThreshold,V=this.dragDistanceThreshold;if((V>0&&l(I.x,I.y,I.downX,I.downY)>=V||D>0&&L>=I.downTime+D)&&(O=!0),O)return this.setDragState(I,3),this.processDragStartList(I)},processDragStartList:function(I){if(this.getDragState(I)!==3)return 0;for(var L=this._drag[I.id],O=0;O<L.length;O++){var D=L[O],V=D.input;V.dragState=2,V.dragStartX=D.x,V.dragStartY=D.y,V.dragStartXGlobal=I.worldX,V.dragStartYGlobal=I.worldY,V.dragX=V.dragStartXGlobal-V.dragStartX,V.dragY=V.dragStartYGlobal-V.dragStartY,D.emit(f.GAMEOBJECT_DRAG_START,I,V.dragX,V.dragY),this.emit(f.DRAG_START,I,D)}return this.setDragState(I,4),L.length},processDragDownEvent:function(I){var L=this._temp;if(this._draggable.length===0||L.length===0||!I.primaryDown||this.getDragState(I)!==0)return 0;this.setDragState(I,1);for(var O=[],D=0;D<L.length;D++){var V=L[D];V.input.draggable&&V.input.dragState===0&&O.push(V)}return O.length===0?(this.setDragState(I,0),0):(O.length>1&&(this.sortGameObjects(O,I),this.topOnly&&O.splice(1)),this._drag[I.id]=O,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(I,3),this.processDragStartList(I)):(this.setDragState(I,2),0))},processDragMoveEvent:function(I){if(this.getDragState(I)===2&&this.processDragThresholdEvent(I,this.manager.game.loop.now),this.getDragState(I)!==4)return 0;for(var L=this._tempZones,O=this._drag[I.id],D=0;D<O.length;D++){var V=O[D],B=V.input,U=B.target;if(U){var W=L.indexOf(U);W===0?(V.emit(f.GAMEOBJECT_DRAG_OVER,I,U),this.emit(f.DRAG_OVER,I,V,U)):W>0?(V.emit(f.GAMEOBJECT_DRAG_LEAVE,I,U),this.emit(f.DRAG_LEAVE,I,V,U),B.target=L[0],U=B.target,V.emit(f.GAMEOBJECT_DRAG_ENTER,I,U),this.emit(f.DRAG_ENTER,I,V,U)):(V.emit(f.GAMEOBJECT_DRAG_LEAVE,I,U),this.emit(f.DRAG_LEAVE,I,V,U),L[0]?(B.target=L[0],U=B.target,V.emit(f.GAMEOBJECT_DRAG_ENTER,I,U),this.emit(f.DRAG_ENTER,I,V,U)):B.target=null)}else!U&&L[0]&&(B.target=L[0],U=B.target,V.emit(f.GAMEOBJECT_DRAG_ENTER,I,U),this.emit(f.DRAG_ENTER,I,V,U));var F,G;if(!V.parentContainer)F=I.worldX-B.dragX,G=I.worldY-B.dragY;else{var M=I.worldX-B.dragStartXGlobal,N=I.worldY-B.dragStartYGlobal,k=V.getParentRotation(),z=M*Math.cos(k)+N*Math.sin(k),H=N*Math.cos(k)-M*Math.sin(k);z*=1/V.parentContainer.scaleX,H*=1/V.parentContainer.scaleY,F=z+B.dragStartX,G=H+B.dragStartY}V.emit(f.GAMEOBJECT_DRAG,I,F,G),this.emit(f.DRAG,I,V,F,G)}return O.length},processDragUpEvent:function(I){for(var L=this._drag[I.id],O=0;O<L.length;O++){var D=L[O],V=D.input;if(V&&V.dragState===2){V.dragState=0,V.dragX=V.localX-D.displayOriginX,V.dragY=V.localY-D.displayOriginY;var B=!1,U=V.target;U&&(D.emit(f.GAMEOBJECT_DROP,I,U),this.emit(f.DROP,I,D,U),V.target=null,B=!0),D.input&&D.input.enabled&&(D.emit(f.GAMEOBJECT_DRAG_END,I,V.dragX,V.dragY,B),this.emit(f.DRAG_END,I,D,B))}}return this.setDragState(I,0),L.splice(0),0},processMoveEvents:function(I){var L=0,O=this._temp,D=this._eventData,V=this._eventContainer;D.cancelled=!1;for(var B=!1,U=0;U<O.length;U++){var W=O[U];if(!(!W.input||!W.input.enabled)){if(L++,W.emit(f.GAMEOBJECT_POINTER_MOVE,I,W.input.localX,W.input.localY,V),D.cancelled||!W.input||!W.input.enabled){B=!0;break}if(this.emit(f.GAMEOBJECT_MOVE,I,W,V),D.cancelled||!W.input||!W.input.enabled){B=!0;break}if(this.topOnly)break}}return B||this.emit(f.POINTER_MOVE,I,O),L},processWheelEvent:function(I){var L=0,O=this._temp,D=this._eventData,V=this._eventContainer;D.cancelled=!1;for(var B=!1,U=I.deltaX,W=I.deltaY,F=I.deltaZ,G=0;G<O.length;G++){var M=O[G];if(!(!M.input||!M.input.enabled)){if(L++,M.emit(f.GAMEOBJECT_POINTER_WHEEL,I,U,W,F,V),D.cancelled||!M.input||!M.input.enabled){B=!0;break}if(this.emit(f.GAMEOBJECT_WHEEL,I,M,U,W,F,V),D.cancelled||!M.input||!M.input.enabled){B=!0;break}}}return B||this.emit(f.POINTER_WHEEL,I,O,U,W,F),L},processOverEvents:function(I){var L=this._temp,O=0,D=L.length,V=[];if(D>0){var B=this.manager,U=this._eventData,W=this._eventContainer;U.cancelled=!1;for(var F=!1,G=0;G<D;G++){var M=L[G];if(!(!M.input||!M.input.enabled)){if(V.push(M),B.setCursor(M.input),M.emit(f.GAMEOBJECT_POINTER_OVER,I,M.input.localX,M.input.localY,W),O++,U.cancelled||!M.input||!M.input.enabled){F=!0;break}if(this.emit(f.GAMEOBJECT_OVER,I,M,W),U.cancelled||!M.input||!M.input.enabled){F=!0;break}}}F||this.emit(f.POINTER_OVER,I,V)}return this._over[I.id]=V,O},processOutEvents:function(I){var L=this._over[I.id],O=0,D=L.length;if(D>0){var V=this.manager,B=this._eventData,U=this._eventContainer;B.cancelled=!1;var W=!1;this.sortGameObjects(L,I);for(var F=0;F<D;F++){var G=L[F];if(G=L[F],!(!G.input||!G.input.enabled)){if(V.resetCursor(G.input),G.emit(f.GAMEOBJECT_POINTER_OUT,I,U),O++,B.cancelled||!G.input||!G.input.enabled){W=!0;break}if(this.emit(f.GAMEOBJECT_OUT,I,G,U),B.cancelled||!G.input||!G.input.enabled){W=!0;break}W||this.emit(f.POINTER_OUT,I,L)}}this._over[I.id]=[]}return O},processOverOutEvents:function(I){var L=this._temp,O,D,V=[],B=[],U=[],W=this._over[I.id],F=this._drag[I.id],G=this.manager;for(O=0;O<W.length;O++)D=W[O],L.indexOf(D)===-1&&F.indexOf(D)===-1?V.push(D):U.push(D);for(O=0;O<L.length;O++)D=L[O],W.indexOf(D)===-1&&B.push(D);var M=V.length,N=0,k=this._eventData,z=this._eventContainer;k.cancelled=!1;var H=!1;if(M>0){for(this.sortGameObjects(V,I),O=0;O<M;O++)if(D=V[O],!(!D.input||!D.input.enabled)){if(G.resetCursor(D.input),D.emit(f.GAMEOBJECT_POINTER_OUT,I,z),N++,k.cancelled||!D.input||!D.input.enabled){H=!0;break}if(this.emit(f.GAMEOBJECT_OUT,I,D,z),k.cancelled||!D.input||!D.input.enabled){H=!0;break}}H||this.emit(f.POINTER_OUT,I,V)}if(M=B.length,k.cancelled=!1,H=!1,M>0){for(this.sortGameObjects(B,I),O=0;O<M;O++)if(D=B[O],!(!D.input||!D.input.enabled)){if(G.setCursor(D.input),D.emit(f.GAMEOBJECT_POINTER_OVER,I,D.input.localX,D.input.localY,z),N++,k.cancelled||!D.input||!D.input.enabled){H=!0;break}if(this.emit(f.GAMEOBJECT_OVER,I,D,z),k.cancelled||!D.input||!D.input.enabled){H=!0;break}}H||this.emit(f.POINTER_OVER,I,B)}return W=U.concat(B),this._over[I.id]=this.sortGameObjects(W,I),N},processUpEvents:function(I){var L=this._temp,O=this._eventData,D=this._eventContainer;O.cancelled=!1;for(var V=!1,B=0;B<L.length;B++){var U=L[B];if(!(!U.input||!U.input.enabled)){if(U.emit(f.GAMEOBJECT_POINTER_UP,I,U.input.localX,U.input.localY,D),O.cancelled||!U.input||!U.input.enabled){V=!0;break}if(this.emit(f.GAMEOBJECT_UP,I,U,D),O.cancelled||!U.input||!U.input.enabled){V=!0;break}}}return!V&&this.manager&&(I.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,I,L):this.emit(f.POINTER_UP_OUTSIDE,I)),L.length},queueForInsertion:function(I){return this._pendingInsertion.indexOf(I)===-1&&this._list.indexOf(I)===-1&&this._pendingInsertion.push(I),this},queueForRemoval:function(I){return this._pendingRemoval.push(I),this},setDraggable:function(I,L){L===void 0&&(L=!0),Array.isArray(I)||(I=[I]);for(var O=0;O<I.length;O++){var D=I[O];D.input.draggable=L;var V=this._draggable.indexOf(D);L&&V===-1?this._draggable.push(D):!L&&V>-1&&this._draggable.splice(V,1)}return this},makePixelPerfect:function(I){I===void 0&&(I=1);var L=this.systems.textures;return a(L,I)},setHitArea:function(I,L,O){if(L===void 0)return this.setHitAreaFromTexture(I);Array.isArray(I)||(I=[I]);var D=!1,V=!1,B=!1,U=!1,W=!1,F=!0;if(E(L)){var G=L;L=y(G,"hitArea",null),O=y(G,"hitAreaCallback",null),D=y(G,"draggable",!1),V=y(G,"dropZone",!1),B=y(G,"cursor",!1),U=y(G,"useHandCursor",!1),W=y(G,"pixelPerfect",!1);var M=y(G,"alphaTolerance",1);W&&(L={},O=this.makePixelPerfect(M)),(!L||!O)&&(this.setHitAreaFromTexture(I),F=!1)}else typeof L=="function"&&!O&&(O=L,L={});for(var N=0;N<I.length;N++){var k=I[N];if(W&&k.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var z=k.input?k.input:o(k,L,O);z.customHitArea=F,z.dropZone=V,z.cursor=U?"pointer":B,k.input=z,D&&this.setDraggable(k),this.queueForInsertion(k)}return this},setHitAreaCircle:function(I,L,O,D,V){V===void 0&&(V=g);var B=new u(L,O,D);return this.setHitArea(I,B,V)},setHitAreaEllipse:function(I,L,O,D,V,B){B===void 0&&(B=h);var U=new p(L,O,D,V);return this.setHitArea(I,U,B)},setHitAreaFromTexture:function(I,L){L===void 0&&(L=P),Array.isArray(I)||(I=[I]);for(var O=0;O<I.length;O++){var D=I[O],V=D.frame,B=0,U=0;if(D.width?(B=D.width,U=D.height):V&&(B=V.realWidth,U=V.realHeight),D.type==="Container"&&(B===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}B!==0&&U!==0&&(D.input=o(D,new T(0,0,B,U),L),this.queueForInsertion(D))}return this},setHitAreaRectangle:function(I,L,O,D,V,B){B===void 0&&(B=P);var U=new T(L,O,D,V);return this.setHitArea(I,U,B)},setHitAreaTriangle:function(I,L,O,D,V,B,U,W){W===void 0&&(W=A);var F=new w(L,O,D,V,B,U);return this.setHitArea(I,F,W)},enableDebug:function(I,L){L===void 0&&(L=65280);var O=I.input;if(!O||!O.hitArea)return this;var D=O.hitArea,V=D.type,B=O.hitAreaDebug,U=this.systems.add,W=this.systems.updateList;B&&(W.remove(B),B.destroy(),B=null);var F=0,G=0;switch(V){case x.CIRCLE:B=U.arc(0,0,D.radius),F=D.x-D.radius,G=D.y-D.radius;break;case x.ELLIPSE:B=U.ellipse(0,0,D.width,D.height),F=D.x-D.width/2,G=D.y-D.height/2;break;case x.LINE:B=U.line(0,0,D.x1,D.y1,D.x2,D.y2);break;case x.POLYGON:B=U.polygon(0,0,D.points);break;case x.RECTANGLE:B=U.rectangle(0,0,D.width,D.height),F=D.x,G=D.y;break;case x.TRIANGLE:B=U.triangle(0,0,D.x1,D.y1,D.x2,D.y2,D.x3,D.y3);break}return B&&(B.isFilled=!1,B.strokeColor=L,B.preUpdate=function(){B.setStrokeStyle(1/I.scale,B.strokeColor),B.setDisplayOrigin(I.displayOriginX,I.displayOriginY);var M=I.x,N=I.y,k=I.rotation,z=I.scaleX,H=I.scaleY;if(I.parentContainer){var $=I.getWorldTransformMatrix();M=$.tx,N=$.ty,k=$.rotation,z=$.scaleX,H=$.scaleY}B.setRotation(k),B.setScale(z,H),B.setPosition(M+F*z,N+G*H),B.setScrollFactor(I.scrollFactorX,I.scrollFactorY),B.setDepth(I.depth)},W.add(B),O.hitAreaDebug=B),this},removeDebug:function(I){var L=I.input;if(L&&L.hitAreaDebug){var O=L.hitAreaDebug;this.systems.updateList.remove(O),O.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(I){return this.pollRate=I,this._pollTimer=0,this},setGlobalTopOnly:function(I){return this.manager.globalTopOnly=I,this},setTopOnly:function(I){return this.topOnly=I,this},sortGameObjects:function(I,L){if(I.length<2||!L.camera)return I;var O=L.camera.renderList;return I.sort(function(D,V){var B=Math.max(O.indexOf(D),0),U=Math.max(O.indexOf(V),0);return U-B})},sortDropZones:function(I){return I.length<2?I:(this.scene.sys.depthSort(),I.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(I,L){if(!I.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(I);if(I.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-I.parentContainer.getIndex(I);if(I.parentContainer===L)return-1;if(L.parentContainer===I)return 1;for(var O=I.getIndexList(),D=L.getIndexList(),V=Math.min(O.length,D.length),B=0;B<V;B++){var U=O[B],W=D[B];if(U!==W)return W-U}return D.length-O.length;return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(I){return this.manager.addPointer(I)},setDefaultCursor:function(I){return this.manager.setDefaultCursor(I),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var I=0;I<10;I++)this._drag[I]=[],this._over[I]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var O=this.systems.events;O.off(C.TRANSITION_START,this.transitionIn,this),O.off(C.TRANSITION_OUT,this.transitionOut,this),O.off(C.TRANSITION_COMPLETE,this.transitionComplete,this),O.off(C.PRE_UPDATE,this.preUpdate,this),L.events.off(f.GAME_OUT,this.onGameOut,this),L.events.off(f.GAME_OVER,this.onGameOver,this),O.off(C.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var I=this.manager.pointers,L=0;L<I.length;L++)I[L].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(C.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});b.register("InputPlugin",R,"input"),r.exports=R},63399:(r,m,e)=>{var u=e(10850),g={},c={};c.register=function(s,o,a,l,p){g[s]={plugin:o,mapping:a,settingsKey:l,configKey:p}},c.getPlugin=function(s){return g[s]},c.install=function(s){var o=s.scene.sys,a=o.settings.input,l=o.game.config;for(var p in g){var h=g[p].plugin,f=g[p].mapping,v=g[p].settingsKey,y=g[p].configKey;u(a,v,l[y])&&(s[f]=new h(s))}},c.remove=function(s){g.hasOwnProperty(s)&&delete g[s]},r.exports=c},40398:(r,m,e)=>{var u=e(90447),g=e(56694),c=e(53996),s=e(88456),o=e(44521),a=e(93736),l=e(36580),p=new g({initialize:function(f,v){this.manager=f,this.id=v,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new a,this.prevPosition=new a,this.midPoint=new a(-1,-1),this.velocity=new a,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=v===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(h){var f=h.getWorldPoint(this.x,this.y);return this.worldX=f.x,this.worldY=f.y,this},positionToCamera:function(h,f){return h.getWorldPoint(this.x,this.y,f)},updateMotion:function(){var h=this.position.x,f=this.position.y,v=this.midPoint.x,y=this.midPoint.y;if(!(h===v&&f===y)){var x=o(this.motionFactor,v,h),S=o(this.motionFactor,y,f);s(x,h,.1)&&(x=h),s(S,f,.1)&&(S=f),this.midPoint.set(x,S);var E=h-x,b=f-S;this.velocity.set(E,b),this.angle=u(x,S,h,f),this.distance=Math.sqrt(E*E+b*b)}},up:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=h.timeStamp,this.wasTouch=!1)},down:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&h.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=h.timeStamp),this.wasTouch=!1},move:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.locked&&(this.movementX=h.movementX||h.mozMovementX||h.webkitMovementX||0,this.movementY=h.movementY||h.mozMovementY||h.webkitMovementY||0),this.moveTime=h.timeStamp,this.wasTouch=!1},wheel:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.deltaX=h.deltaX,this.deltaY=h.deltaY,this.deltaZ=h.deltaZ,this.wasTouch=!1},touchstart:function(h,f){h.pointerId&&(this.pointerId=h.pointerId),this.identifier=h.identifier,this.target=h.target,this.active=!0,this.buttons=1,this.event=f,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=f.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(h,f){this.event=f,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.moveTime=f.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(h,f){this.buttons=0,this.event=f,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(h,f){this.buttons=0,this.event=f,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=f.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?c(this.downX,this.downY,this.x,this.y):c(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(h,f){h===void 0&&(h=10),f===void 0&&(f=[]);for(var v=this.prevPosition.x,y=this.prevPosition.y,x=this.position.x,S=this.position.y,E=0;E<h;E++){var b=1/h*E;f[E]={x:o(b,v,x),y:o(b,y,S)}}return f},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},time:{get:function(){return this.event?this.event.timeStamp:0}}});r.exports=p},72687:r=>{var m={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};r.exports=m},14874:r=>{r.exports="boot"},54168:r=>{r.exports="destroy"},526:r=>{r.exports="dragend"},81623:r=>{r.exports="dragenter"},94472:r=>{r.exports="drag"},9304:r=>{r.exports="dragleave"},34265:r=>{r.exports="dragover"},50151:r=>{r.exports="dragstart"},98134:r=>{r.exports="drop"},56773:r=>{r.exports="gameobjectdown"},45824:r=>{r.exports="dragend"},39578:r=>{r.exports="dragenter"},72072:r=>{r.exports="drag"},82569:r=>{r.exports="dragleave"},70833:r=>{r.exports="dragover"},81442:r=>{r.exports="dragstart"},32936:r=>{r.exports="drop"},99658:r=>{r.exports="gameobjectmove"},60515:r=>{r.exports="gameobjectout"},55254:r=>{r.exports="gameobjectover"},34782:r=>{r.exports="pointerdown"},41769:r=>{r.exports="pointermove"},65588:r=>{r.exports="pointerout"},61640:r=>{r.exports="pointerover"},49342:r=>{r.exports="pointerup"},82662:r=>{r.exports="wheel"},13058:r=>{r.exports="gameobjectup"},52426:r=>{r.exports="gameobjectwheel"},78072:r=>{r.exports="gameout"},1545:r=>{r.exports="gameover"},67137:r=>{r.exports="boot"},27678:r=>{r.exports="process"},22257:r=>{r.exports="update"},90379:r=>{r.exports="pointerlockchange"},88909:r=>{r.exports="pointerdown"},36548:r=>{r.exports="pointerdownoutside"},18483:r=>{r.exports="pointermove"},22355:r=>{r.exports="pointerout"},7997:r=>{r.exports="pointerover"},66318:r=>{r.exports="pointerup"},94812:r=>{r.exports="pointerupoutside"},37310:r=>{r.exports="wheel"},24196:r=>{r.exports="preupdate"},27053:r=>{r.exports="shutdown"},29413:r=>{r.exports="start"},25165:r=>{r.exports="update"},33963:(r,m,e)=>{r.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}},70848:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o){this.pad=s,this.events=s.events,this.index=o,this.value=0,this.threshold=.1},update:function(c){this.value=c},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});r.exports=g},21274:(r,m,e)=>{var u=e(56694),g=e(43200),c=new u({initialize:function(o,a){this.pad=o,this.events=o.manager,this.index=a,this.value=0,this.threshold=1,this.pressed=!1},update:function(s){this.value=s;var o=this.pad,a=this.index;s>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(g.BUTTON_DOWN,o,this,s),this.pad.emit(g.GAMEPAD_BUTTON_DOWN,a,s,this)):this.pressed&&(this.pressed=!1,this.events.emit(g.BUTTON_UP,o,this,s),this.pad.emit(g.GAMEPAD_BUTTON_UP,a,s,this))},destroy:function(){this.pad=null,this.events=null}});r.exports=c},75956:(r,m,e)=>{var u=e(70848),g=e(21274),c=e(56694),s=e(6659),o=e(93736),a=new c({Extends:s,initialize:function(p,h){s.call(this),this.manager=p,this.pad=h,this.id=h.id,this.index=h.index;for(var f=[],v=0;v<h.buttons.length;v++)f.push(new g(this,v));this.buttons=f;var y=[];for(v=0;v<h.axes.length;v++)y.push(new u(this,v));this.axes=y,this.vibration=h.vibrationActuator;var x={value:0,pressed:!1};this._LCLeft=f[14]?f[14]:x,this._LCRight=f[15]?f[15]:x,this._LCTop=f[12]?f[12]:x,this._LCBottom=f[13]?f[13]:x,this._RCLeft=f[2]?f[2]:x,this._RCRight=f[1]?f[1]:x,this._RCTop=f[3]?f[3]:x,this._RCBottom=f[0]?f[0]:x,this._FBLeftTop=f[4]?f[4]:x,this._FBLeftBottom=f[6]?f[6]:x,this._FBRightTop=f[5]?f[5]:x,this._FBRightBottom=f[7]?f[7]:x;var S={value:0};this._HAxisLeft=y[0]?y[0]:S,this._VAxisLeft=y[1]?y[1]:S,this._HAxisRight=y[2]?y[2]:S,this._VAxisRight=y[3]?y[3]:S,this.leftStick=new o,this.rightStick=new o,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(l){return this.axes[l].getValue()},setAxisThreshold:function(l){for(var p=0;p<this.axes.length;p++)this.axes[p].threshold=l},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(l){return this.buttons[l].value},isButtonDown:function(l){return this.buttons[l].pressed},update:function(l){if(!(l.timestamp<this._created)){var p,h=this.buttons,f=l.buttons,v=h.length;for(p=0;p<v;p++)h[p].update(f[p].value);var y=this.axes,x=l.axes;for(v=y.length,p=0;p<v;p++)y[p].update(x[p]);v>=2&&(this.leftStick.set(y[0].getValue(),y[1].getValue()),v>=4&&this.rightStick.set(y[2].getValue(),y[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var l;for(l=0;l<this.buttons.length;l++)this.buttons[l].destroy();for(l=0;l<this.axes.length;l++)this.axes[l].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});r.exports=a},1379:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(43200),s=e(75956),o=e(10850),a=e(63399),l=e(33963),p=new u({Extends:g,initialize:function(f){g.call(this),this.scene=f.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=f,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,f.pluginEvents.once(l.BOOT,this.boot,this),f.pluginEvents.on(l.START,this.start,this)},boot:function(){var h=this.scene.sys.game,f=this.settings.input,v=h.config;this.enabled=o(f,"gamepad",v.inputGamepad)&&h.device.input.gamepads,this.target=o(f,"gamepad.target",v.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var h=this,f=this.target,v=function(y){y.defaultPrevented||!h.isActive()||(h.refreshPads(),h.queue.push(y))};this.onGamepadHandler=v,f.addEventListener("gamepadconnected",v,!1),f.addEventListener("gamepaddisconnected",v,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].removeAllListeners()},disconnectAll:function(){for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].pad.connected=!1},refreshPads:function(){var h=navigator.getGamepads();if(!h)this.disconnectAll();else for(var f=this.gamepads,v=0;v<h.length;v++){var y=h[v];if(y){var x=y.id,S=y.index,E=f[S];if(E)E.id!==x?(E.destroy(),f[S]=new s(this,y)):E.update(y);else{var b=new s(this,y);f[S]=b,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=b):this._pad3=b:this._pad2=b:this._pad1=b}}}},getAll:function(){for(var h=[],f=this.gamepads,v=0;v<f.length;v++)f[v]&&h.push(f[v]);return h},getPad:function(h){for(var f=this.gamepads,v=0;v<f.length;v++)if(f[v]&&f[v].index===h)return f[v]},update:function(){if(this.enabled){this.refreshPads();var h=this.queue.length;if(h!==0)for(var f=this.queue.splice(0,h),v=0;v<h;v++){var y=f[v],x=this.getPad(y.gamepad.index);y.type==="gamepadconnected"?this.emit(c.CONNECTED,x,y):y.type==="gamepaddisconnected"&&this.emit(c.DISCONNECTED,x,y)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var h=0;h<this.gamepads.length;h++)this.gamepads[h]&&this.gamepads[h].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});a.register("GamepadPlugin",p,"gamepad","gamepad","inputGamepad"),r.exports=p},33171:r=>{r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:r=>{r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:r=>{r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(r,m,e)=>{r.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}},17344:r=>{r.exports="down"},36635:r=>{r.exports="up"},85724:r=>{r.exports="connected"},55832:r=>{r.exports="disconnected"},772:r=>{r.exports="down"},33608:r=>{r.exports="up"},43200:(r,m,e)=>{r.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}},92636:(r,m,e)=>{r.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}},20873:(r,m,e)=>{var u=e(72687),g=e(98611),c={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};c=g(!1,c,u),r.exports=c},71064:(r,m,e)=>{var u=e(66458),g=e(56694),c=e(97081),s=e(33963),o=e(11873),a=e(72283),l=new g({initialize:function(h){this.manager=h,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=a,this.onKeyUp=a,h.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var p=this.manager.config;this.enabled=p.inputKeyboard,this.target=p.inputKeyboardEventTarget,this.addCapture(p.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(c.POST_STEP,this.postUpdate,this)},startListeners:function(){var p=this;this.onKeyDown=function(f){if(!(f.defaultPrevented||!p.enabled||!p.manager)){p.queue.push(f),p.manager.events.emit(s.MANAGER_PROCESS);var v=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;p.preventDefault&&!v&&p.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}},this.onKeyUp=function(f){if(!(f.defaultPrevented||!p.enabled||!p.manager)){p.queue.push(f),p.manager.events.emit(s.MANAGER_PROCESS);var v=f.altKey||f.ctrlKey||f.shiftKey||f.metaKey;p.preventDefault&&!v&&p.captures.indexOf(f.keyCode)>-1&&f.preventDefault()}};var h=this.target;h&&(h.addEventListener("keydown",this.onKeyDown,!1),h.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var p=this.target;p.removeEventListener("keydown",this.onKeyDown,!1),p.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(p){typeof p=="string"&&(p=p.split(",")),Array.isArray(p)||(p=[p]);for(var h=this.captures,f=0;f<p.length;f++){var v=p[f];typeof v=="string"&&(v=o[v.trim().toUpperCase()]),h.indexOf(v)===-1&&h.push(v)}this.preventDefault=h.length>0},removeCapture:function(p){typeof p=="string"&&(p=p.split(",")),Array.isArray(p)||(p=[p]);for(var h=this.captures,f=0;f<p.length;f++){var v=p[f];typeof v=="string"&&(v=o[v.toUpperCase()]),u(h,v)}this.preventDefault=h.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(c.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});r.exports=l},89666:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(94030),s=e(97081),o=e(10850),a=e(33963),l=e(63399),p=e(50165),h=e(11873),f=e(95625),v=e(48044),y=e(7599),x=e(84314),S=new u({Extends:g,initialize:function(b){g.call(this),this.game=b.systems.game,this.scene=b.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=b,this.manager=b.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,b.pluginEvents.once(a.BOOT,this.boot,this),b.pluginEvents.on(a.START,this.start,this)},boot:function(){var E=this.settings.input;this.enabled=o(E,"keyboard",!0);var b=o(E,"keyboard.capture",null);b&&this.addCaptures(b),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(a.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this),this.game.events.on(s.BLUR,this.resetKeys,this),this.scene.sys.events.on(y.PAUSE,this.resetKeys,this),this.scene.sys.events.on(y.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(E){return this.manager.addCapture(E),this},removeCapture:function(E){return this.manager.removeCapture(E),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:h.UP,down:h.DOWN,left:h.LEFT,right:h.RIGHT,space:h.SPACE,shift:h.SHIFT})},addKeys:function(E,b,T){b===void 0&&(b=!0),T===void 0&&(T=!1);var P={};if(typeof E=="string"){E=E.split(",");for(var C=0;C<E.length;C++){var w=E[C].trim();w&&(P[w]=this.addKey(w,b,T))}}else for(var A in E)P[A]=this.addKey(E[A],b,T);return P},addKey:function(E,b,T){b===void 0&&(b=!0),T===void 0&&(T=!1);var P=this.keys;if(E instanceof p){var C=P.indexOf(E);return C>-1?P[C]=E:P[E.keyCode]=E,b&&this.addCapture(E.keyCode),E.setEmitOnRepeat(T),E}return typeof E=="string"&&(E=h[E.toUpperCase()]),P[E]||(P[E]=new p(this,E),b&&this.addCapture(E),P[E].setEmitOnRepeat(T)),P[E]},removeKey:function(E,b,T){b===void 0&&(b=!1),T===void 0&&(T=!1);var P=this.keys,C;if(E instanceof p){var w=P.indexOf(E);w>-1&&(C=this.keys[w],this.keys[w]=void 0)}else typeof E=="string"&&(E=h[E.toUpperCase()]);return P[E]&&(C=P[E],P[E]=void 0),C&&(C.plugin=null,T&&this.removeCapture(C.keyCode),b&&C.destroy()),this},removeAllKeys:function(E,b){E===void 0&&(E=!1),b===void 0&&(b=!1);for(var T=this.keys,P=0;P<T.length;P++){var C=T[P];C&&(T[P]=void 0,b&&this.removeCapture(C.keyCode),E&&C.destroy())}return this},createCombo:function(E,b){return new f(this,E,b)},checkDown:function(E,b){if(b===void 0&&(b=0),this.enabled&&E.isDown){var T=x(this.time-E.timeDown,b);if(T>E._tick)return E._tick=T,!0}return!1},update:function(){var E=this.manager.queue,b=E.length;if(!(!this.isActive()||b===0))for(var T=this.keys,P=0;P<b;P++){var C=E[P],w=C.keyCode,A=T[w],R=!1;C.cancelled===void 0&&(C.cancelled=0,C.stopImmediatePropagation=function(){C.cancelled=1},C.stopPropagation=function(){C.cancelled=-1}),C.cancelled!==-1&&(w===this.prevCode&&C.timeStamp===this.prevTime&&C.type===this.prevType||(this.prevCode=w,this.prevTime=C.timeStamp,this.prevType=C.type,C.type==="keydown"?(A&&(R=A.isDown,A.onDown(C)),!C.cancelled&&(!A||!R)&&(v[w]&&this.emit(c.KEY_DOWN+v[w],C),C.cancelled||this.emit(c.ANY_KEY_DOWN,C))):(A&&A.onUp(C),C.cancelled||(v[w]&&this.emit(c.KEY_UP+v[w],C),C.cancelled||this.emit(c.ANY_KEY_UP,C))),C.cancelled===1&&(C.cancelled=0)))}},resetKeys:function(){for(var E=this.keys,b=0;b<E.length;b++)E[b]&&E[b].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(a.MANAGER_PROCESS,this.update,this),this.game.events.off(s.BLUR,this.resetKeys),this.scene.sys.events.off(y.PAUSE,this.resetKeys,this),this.scene.sys.events.off(y.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var E=this.keys,b=0;b<E.length;b++)E[b]&&E[b].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",S,"keyboard","keyboard","inputKeyboard"),r.exports=S},60258:r=>{var m=function(e,u){return u.timeLastMatched=e.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};r.exports=m},95625:(r,m,e)=>{var u=e(56694),g=e(94030),c=e(72632),s=e(2544),o=e(88754),a=new u({initialize:function(p,h,f){if(f===void 0&&(f={}),h.length<2)return!1;this.manager=p,this.enabled=!0,this.keyCodes=[];for(var v=0;v<h.length;v++){var y=h[v];typeof y=="string"?this.keyCodes.push(y.toUpperCase().charCodeAt(0)):typeof y=="number"?this.keyCodes.push(y):y.hasOwnProperty("keyCode")&&this.keyCodes.push(y.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=c(f,"resetOnWrongKey",!0),this.maxKeyDelay=c(f,"maxKeyDelay",0),this.resetOnMatch=c(f,"resetOnMatch",!1),this.deleteOnMatch=c(f,"deleteOnMatch",!1);var x=this,S=function(E){if(!(x.matched||!x.enabled)){var b=s(E,x);b&&(x.manager.emit(g.COMBO_MATCH,x,E),x.resetOnMatch?o(x):x.deleteOnMatch&&x.destroy())}};this.onKeyDown=S,this.manager.on(g.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(g.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});r.exports=a},2544:(r,m,e)=>{var u=e(60258),g=function(c,s){if(s.matched)return!0;var o=!1,a=!1;if(c.keyCode===s.current)if(s.index>0&&s.maxKeyDelay>0){var l=s.timeLastMatched+s.maxKeyDelay;c.timeStamp<=l&&(a=!0,o=u(c,s))}else a=!0,o=u(c,s);return!a&&s.resetOnWrongKey&&(s.index=0,s.current=s.keyCodes[0]),o&&(s.timeLastMatched=c.timeStamp,s.matched=!0,s.timeMatched=c.timeStamp),o};r.exports=g},88754:r=>{var m=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};r.exports=m},5044:r=>{r.exports="keydown"},40813:r=>{r.exports="keyup"},89319:r=>{r.exports="keycombomatch"},43267:r=>{r.exports="down"},78595:r=>{r.exports="keydown-"},30056:r=>{r.exports="keyup-"},81939:r=>{r.exports="up"},94030:(r,m,e)=>{r.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}},28388:(r,m,e)=>{r.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}},64964:r=>{var m=function(e,u){u===void 0&&(u=50);var g=e.plugin.game.loop.time-e.timeDown;return e.isDown&&g<u};r.exports=m},42460:r=>{var m=function(e){return e._justDown?(e._justDown=!1,!0):!1};r.exports=m},53162:r=>{var m=function(e){return e._justUp?(e._justUp=!1,!0):!1};r.exports=m},50165:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(94030),s=new u({Extends:g,initialize:function(a,l){g.call(this),this.plugin=a,this.keyCode=l,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(o){return this.emitOnRepeat=o,this},onDown:function(o){this.originalEvent=o,this.enabled&&(this.altKey=o.altKey,this.ctrlKey=o.ctrlKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.location=o.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(c.DOWN,this,o):(this.isDown=!0,this.isUp=!1,this.timeDown=o.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(c.DOWN,this,o)))},onUp:function(o){this.originalEvent=o,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=o.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(c.UP,this,o))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});r.exports=s},11873:r=>{var m={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};r.exports=m},48044:(r,m,e)=>{var u=e(11873),g={};for(var c in u)g[u[c]]=c;r.exports=g},70331:r=>{var m=function(e,u){u===void 0&&(u=50);var g=e.plugin.game.loop.time-e.timeUp;return e.isUp&&g<u};r.exports=m},7905:(r,m,e)=>{var u=e(56694),g=e(90185),c=e(33963),s=e(72283),o=new u({initialize:function(l){this.manager=l,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=s,this.onMouseDown=s,this.onMouseUp=s,this.onMouseDownWindow=s,this.onMouseUpWindow=s,this.onMouseOver=s,this.onMouseOut=s,this.onMouseWheel=s,this.pointerLockChange=s,this.isTop=!0,l.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputMouse,this.target=a.inputMouseEventTarget,this.passive=a.inputMousePassive,this.preventDefaultDown=a.inputMousePreventDefaultDown,this.preventDefaultUp=a.inputMousePreventDefaultUp,this.preventDefaultMove=a.inputMousePreventDefaultMove,this.preventDefaultWheel=a.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},requestPointerLock:function(){if(g.pointerLock){var a=this.target;a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock,a.requestPointerLock()}},releasePointerLock:function(){g.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var a=this.target;if(a){var l=this,p=this.manager,h=p.canvas,f=window&&window.focus&&p.game.config.autoFocus;this.onMouseMove=function(y){!y.defaultPrevented&&l.enabled&&p&&p.enabled&&(p.onMouseMove(y),l.preventDefaultMove&&y.preventDefault())},this.onMouseDown=function(y){f&&window.focus(),!y.defaultPrevented&&l.enabled&&p&&p.enabled&&(p.onMouseDown(y),l.preventDefaultDown&&y.target===h&&y.preventDefault())},this.onMouseDownWindow=function(y){!y.defaultPrevented&&l.enabled&&p&&p.enabled&&y.target!==h&&p.onMouseDown(y)},this.onMouseUp=function(y){!y.defaultPrevented&&l.enabled&&p&&p.enabled&&(p.onMouseUp(y),l.preventDefaultUp&&y.target===h&&y.preventDefault())},this.onMouseUpWindow=function(y){!y.defaultPrevented&&l.enabled&&p&&p.enabled&&y.target!==h&&p.onMouseUp(y)},this.onMouseOver=function(y){!y.defaultPrevented&&l.enabled&&p&&p.enabled&&p.setCanvasOver(y)},this.onMouseOut=function(y){!y.defaultPrevented&&l.enabled&&p&&p.enabled&&p.setCanvasOut(y)},this.onMouseWheel=function(y){!y.defaultPrevented&&l.enabled&&p&&p.enabled&&p.onMouseWheel(y),l.preventDefaultWheel&&y.target===h&&y.preventDefault()};var v={passive:!0};if(a.addEventListener("mousemove",this.onMouseMove),a.addEventListener("mousedown",this.onMouseDown),a.addEventListener("mouseup",this.onMouseUp),a.addEventListener("mouseover",this.onMouseOver,v),a.addEventListener("mouseout",this.onMouseOut,v),this.preventDefaultWheel?a.addEventListener("wheel",this.onMouseWheel,{passive:!1}):a.addEventListener("wheel",this.onMouseWheel,v),window&&p.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,v),window.top.addEventListener("mouseup",this.onMouseUpWindow,v)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,v),window.addEventListener("mouseup",this.onMouseUpWindow,v),this.isTop=!1}g.pointerLock&&(this.pointerLockChange=function(y){var x=l.target;l.locked=document.pointerLockElement===x||document.mozPointerLockElement===x||document.webkitPointerLockElement===x,p.onPointerLockChange(y)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("mousemove",this.onMouseMove),a.removeEventListener("mousedown",this.onMouseDown),a.removeEventListener("mouseup",this.onMouseUp),a.removeEventListener("mouseover",this.onMouseOver),a.removeEventListener("mouseout",this.onMouseOut),window&&(a=this.isTop?window.top:window,a.removeEventListener("mousedown",this.onMouseDownWindow),a.removeEventListener("mouseup",this.onMouseUpWindow)),g.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=o},11343:(r,m,e)=>{r.exports={MouseManager:e(7905)}},37579:(r,m,e)=>{var u=e(56694),g=e(33963),c=e(72283),s=new u({initialize:function(a){this.manager=a,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=c,this.onTouchStartWindow=c,this.onTouchMove=c,this.onTouchEnd=c,this.onTouchEndWindow=c,this.onTouchCancel=c,this.onTouchCancelWindow=c,this.isTop=!0,a.events.once(g.MANAGER_BOOT,this.boot,this)},boot:function(){var o=this.manager.config;this.enabled=o.inputTouch,this.target=o.inputTouchEventTarget,this.capture=o.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,o.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(o){return o.preventDefault(),!1}),this},startListeners:function(){var o=this.target;if(o){var a=this,l=this.manager,p=l.canvas,h=window&&window.focus&&l.game.config.autoFocus;this.onTouchMove=function(x){!x.defaultPrevented&&a.enabled&&l&&l.enabled&&(l.onTouchMove(x),a.capture&&x.cancelable&&x.preventDefault())},this.onTouchStart=function(x){h&&window.focus(),!x.defaultPrevented&&a.enabled&&l&&l.enabled&&(l.onTouchStart(x),a.capture&&x.cancelable&&x.target===p&&x.preventDefault())},this.onTouchStartWindow=function(x){!x.defaultPrevented&&a.enabled&&l&&l.enabled&&x.target!==p&&l.onTouchStart(x)},this.onTouchEnd=function(x){!x.defaultPrevented&&a.enabled&&l&&l.enabled&&(l.onTouchEnd(x),a.capture&&x.cancelable&&x.target===p&&x.preventDefault())},this.onTouchEndWindow=function(x){!x.defaultPrevented&&a.enabled&&l&&l.enabled&&x.target!==p&&l.onTouchEnd(x)},this.onTouchCancel=function(x){!x.defaultPrevented&&a.enabled&&l&&l.enabled&&(l.onTouchCancel(x),a.capture&&x.preventDefault())},this.onTouchCancelWindow=function(x){!x.defaultPrevented&&a.enabled&&l&&l.enabled&&l.onTouchCancel(x)};var f=this.capture,v={passive:!0},y={passive:!1};if(o.addEventListener("touchstart",this.onTouchStart,f?y:v),o.addEventListener("touchmove",this.onTouchMove,f?y:v),o.addEventListener("touchend",this.onTouchEnd,f?y:v),o.addEventListener("touchcancel",this.onTouchCancel,f?y:v),window&&l.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,y),window.top.addEventListener("touchend",this.onTouchEndWindow,y),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,y)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,y),window.addEventListener("touchend",this.onTouchEndWindow,y),window.addEventListener("touchcancel",this.onTouchCancelWindow,y),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var o=this.target;o.removeEventListener("touchstart",this.onTouchStart),o.removeEventListener("touchmove",this.onTouchMove),o.removeEventListener("touchend",this.onTouchEnd),o.removeEventListener("touchcancel",this.onTouchCancel),window&&(o=this.isTop?window.top:window,o.removeEventListener("touchstart",this.onTouchStartWindow),o.removeEventListener("touchend",this.onTouchEndWindow),o.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=s},77423:(r,m,e)=>{r.exports={TouchManager:e(37579)}},98035:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(683),s=e(72632),o=e(30750),a=e(43531),l=e(88490),p=e(33868),h=new u({initialize:function(v,y){if(this.loader=v,this.cache=s(y,"cache",!1),this.type=s(y,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=s(y,"key",!1);var x=this.key;if(v.prefix&&v.prefix!==""&&(this.key=v.prefix+x),!this.key)throw new Error("Invalid File key: "+this.key);var S=s(y,"url");S===void 0?S=v.path+x+"."+s(y,"extension",""):typeof S=="string"&&!S.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(S=v.path+S),this.url=S,this.src="",this.xhrSettings=p(s(y,"responseType",void 0)),s(y,"xhrSettings",!1)&&(this.xhrSettings=a(this.xhrSettings,s(y,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?g.FILE_POPULATED:g.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=s(y,"config",{}),this.multiFile,this.linkFile},setLink:function(f){this.linkFile=f,f.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===g.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=g.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(f,v){var y=f.responseURL&&this.loader.localSchemes.some(function(E){return f.responseURL.indexOf(E)===0}),x=y&&v.target.status===0,S=!(v.target&&v.target.status!==200)||x;f.readyState===4&&f.status>=400&&f.status<=599&&(S=!1),this.state=g.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,S)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(f){f.lengthComputable&&(this.bytesLoaded=f.loaded,this.bytesTotal=f.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=g.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=g.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=g.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(f){if(this.state!==g.FILE_PENDING_DESTROY){f===void 0&&(f=this.data);var v=this.key,y=this.type;this.loader.emit(c.FILE_COMPLETE,v,y,f),this.loader.emit(c.FILE_KEY_COMPLETE+y+"-"+v,v,y,f),this.loader.flagForRemoval(this),this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});h.createObjectURL=function(f,v,y){if(typeof URL=="function")f.src=URL.createObjectURL(v);else{var x=new FileReader;x.onload=function(){f.removeAttribute("crossOrigin"),f.src="data:"+(v.type||y)+";base64,"+x.result.split(",")[1]},x.onerror=f.onerror,x.readAsDataURL(v)}},h.revokeObjectURL=function(f){typeof URL=="function"&&URL.revokeObjectURL(f.src)},r.exports=h},76846:r=>{var m={},e={install:function(u){for(var g in m)u[g]=m[g]},register:function(u,g){m[u]=g},destroy:function(){m={}}};r.exports=e},30750:r=>{var m=function(e,u){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:u+e.url:!1};r.exports=m},67285:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(58403),s=e(6659),o=e(683),a=e(76846),l=e(72632),p=e(10850),h=e(91963),f=e(7599),v=e(33868),y=new u({Extends:s,initialize:function(S){s.call(this);var E=S.sys.game.config,b=S.sys.settings.loader;this.scene=S,this.systems=S.sys,this.cacheManager=S.sys.cache,this.textureManager=S.sys.textures,this.sceneManager=S.sys.game.scene,a.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(l(b,"baseURL",E.loaderBaseURL)),this.setPath(l(b,"path",E.loaderPath)),this.setPrefix(l(b,"prefix",E.loaderPrefix)),this.maxParallelDownloads=l(b,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=v(l(b,"responseType",E.loaderResponseType),l(b,"async",E.loaderAsync),l(b,"user",E.loaderUser),l(b,"password",E.loaderPassword),l(b,"timeout",E.loaderTimeout),l(b,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=l(b,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=l(b,"imageLoadType",E.loaderImageLoadType),this.localSchemes=l(b,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new c,this.inflight=new c,this.queue=new c,this._deleteQueue=new c,this.totalFailed=0,this.totalComplete=0,this.state=g.LOADER_IDLE,this.multiKeyIndex=0,S.sys.events.once(f.BOOT,this.boot,this),S.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},setBaseURL:function(x){return x===void 0&&(x=""),x!==""&&x.substr(-1)!=="/"&&(x=x.concat("/")),this.baseURL=x,this},setPath:function(x){return x===void 0&&(x=""),x!==""&&x.substr(-1)!=="/"&&(x=x.concat("/")),this.path=x,this},setPrefix:function(x){return x===void 0&&(x=""),this.prefix=x,this},setCORS:function(x){return this.crossOrigin=x,this},addFile:function(x){Array.isArray(x)||(x=[x]);for(var S=0;S<x.length;S++){var E=x[S];this.keyExists(E)||(this.list.set(E),this.emit(o.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(x){var S=x.hasCacheConflict();return S||this.list.iterate(function(E){if(E.type===x.type&&E.key===x.key)return S=!0,!1}),!S&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===x.type&&E.key===x.key)return S=!0,!1}),this.queue.iterate(function(E){if(E.type===x.type&&E.key===x.key)return S=!0,!1})),S},addPack:function(x,S){if(typeof S=="string"){var E=p(x,S);E&&(x={packKey:E})}var b=0,T=this.baseURL,P=this.path,C=this.prefix;for(var w in x)if(Object.prototype.hasOwnProperty.call(x,w)){var A=x[w],R=l(A,"baseURL",T),I=l(A,"path",P),L=l(A,"prefix",C),O=l(A,"files",null),D=l(A,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(R),this.setPath(I),this.setPrefix(L);for(var V=0;V<O.length;V++){var B=O[V],U=B.hasOwnProperty("type")?B.type:D;this[U]&&(this[U](B),b++)}}}return this.setBaseURL(T),this.setPath(P),this.setPrefix(C),b>0},isLoading:function(){return this.state===g.LOADER_LOADING||this.state===g.LOADER_PROCESSING},isReady:function(){return this.state===g.LOADER_IDLE||this.state===g.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(o.START,this),this.list.size===0?this.loadComplete():(this.state=g.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(f.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(o.PROGRESS,this.progress)},update:function(){this.state===g.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(x){if((x.state===g.FILE_POPULATED||x.state===g.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(x),this.list.delete(x),x.crossOrigin||(x.crossOrigin=this.crossOrigin),x.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(x,S){this.inflight&&(this.inflight.delete(x),this.updateProgress(),S?(this.totalComplete++,this.queue.set(x),this.emit(o.FILE_LOAD,x),x.onProcess()):(this.totalFailed++,this._deleteQueue.set(x),this.emit(o.FILE_LOAD_ERROR,x),this.fileProcessComplete(x)))},fileProcessComplete:function(x){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(x.state===g.FILE_ERRORED?x.multiFile&&x.multiFile.onFileFailed(x):x.state===g.FILE_COMPLETE&&(x.multiFile?x.multiFile.isReadyToProcess()&&(x.multiFile.addToCache(),x.multiFile.pendingDestroy()):(x.addToCache(),x.pendingDestroy())),this.queue.delete(x),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(o.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=g.LOADER_COMPLETE,this.systems.events.off(f.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(o.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(x){this._deleteQueue.set(x)},saveJSON:function(x,S){return this.save(JSON.stringify(x),S)},save:function(x,S,E){S===void 0&&(S="file.json"),E===void 0&&(E="application/json");var b=new Blob([x],{type:E}),T=URL.createObjectURL(b),P=document.createElement("a");return P.download=S,P.textContent="Download "+S,P.href=T,P.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var x=this.systems.game.config,S=this.systems.settings.loader;this.setBaseURL(l(S,"baseURL",x.loaderBaseURL)),this.setPath(l(S,"path",x.loaderPath)),this.setPrefix(l(S,"prefix",x.loaderPrefix)),this.state=g.LOADER_IDLE},shutdown:function(){this.reset(),this.state=g.LOADER_SHUTDOWN,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=g.LOADER_DESTROYED,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});h.register("Loader",y,"load"),r.exports=y},43531:(r,m,e)=>{var u=e(98611),g=e(33868),c=function(s,o){var a=s===void 0?g():u({},s);if(o)for(var l in o)o[l]!==void 0&&(a[l]=o[l]);return a};r.exports=c},45176:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(683),s=new u({initialize:function(a,l,p,h){var f=[];h.forEach(function(y){y&&f.push(y)}),this.loader=a,this.type=l,this.key=p,this.multiKeyIndex=a.multiKeyIndex++,this.files=f,this.state=g.FILE_PENDING,this.complete=!1,this.pending=f.length,this.failed=0,this.config={},this.baseURL=a.baseURL,this.path=a.path,this.prefix=a.prefix;for(var v=0;v<f.length;v++)f[v].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(o){return this.files.push(o),o.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(o){var a=this.files.indexOf(o);a!==-1&&this.pending--},onFileFailed:function(o){var a=this.files.indexOf(o);a!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,o.type,o.key))},pendingDestroy:function(){if(this.state!==g.FILE_PENDING_DESTROY){var o=this.key,a=this.type;this.loader.emit(c.FILE_COMPLETE,o,a),this.loader.emit(c.FILE_KEY_COMPLETE+a+"-"+o,o,a),this.loader.flagForRemoval(this);for(var l=0;l<this.files.length;l++)this.files[l].pendingDestroy();this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});r.exports=s},88490:(r,m,e)=>{var u=e(43531),g=function(c,s){var o=u(s,c.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",c.src,o.async,o.user,o.password),a.responseType=c.xhrSettings.responseType,a.timeout=o.timeout,o.headers)for(var l in o.headers)a.setRequestHeader(l,o.headers[l]);return o.header&&o.headerValue&&a.setRequestHeader(o.header,o.headerValue),o.requestedWith&&a.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&a.overrideMimeType(o.overrideMimeType),o.withCredentials&&(a.withCredentials=!0),a.onload=c.onLoad.bind(c,a),a.onerror=c.onError.bind(c,a),a.onprogress=c.onProgress.bind(c),a.send(),a};r.exports=g},33868:r=>{var m=function(e,u,g,c,s,o){return e===void 0&&(e=""),u===void 0&&(u=!0),g===void 0&&(g=""),c===void 0&&(c=""),s===void 0&&(s=0),o===void 0&&(o=!1),{responseType:e,async:u,user:g,password:c,timeout:s,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}};r.exports=m},12117:r=>{var m={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};r.exports=m},7398:r=>{r.exports="addfile"},52187:r=>{r.exports="complete"},36627:r=>{r.exports="filecomplete"},81925:r=>{r.exports="filecomplete-"},29774:r=>{r.exports="loaderror"},20943:r=>{r.exports="load"},74693:r=>{r.exports="fileprogress"},71176:r=>{r.exports="postprocess"},88984:r=>{r.exports="progress"},72753:r=>{r.exports="start"},683:(r,m,e)=>{r.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}},46468:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(70806),s=e(683),o=new u({Extends:c,initialize:function(l,p,h,f,v){c.call(this,l,p,h,f,v),this.type="animationJSON"},onProcess:function(){this.loader.once(s.POST_PROCESS,this.onLoadComplete,this),c.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});g.register("animation",function(a,l,p,h){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new o(this,a[f]));else this.addFile(new o(this,a,l,h,p));return this}),r.exports=o},31648:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42927),o=e(42911),a=e(70806),l=e(45176),p=new u({Extends:l,initialize:function(f,v,y,x,S,E){var b,T;if(o(v)){var P=v;v=c(P,"key"),b=new s(f,{key:v,url:c(P,"textureURL"),extension:c(P,"textureExtension","png"),normalMap:c(P,"normalMap"),xhrSettings:c(P,"textureXhrSettings")}),T=new a(f,{key:v,url:c(P,"atlasURL"),extension:c(P,"atlasExtension","json"),xhrSettings:c(P,"atlasXhrSettings")})}else b=new s(f,v,y,S),T=new a(f,v,x,E);b.linkFile?l.call(this,f,"atlasjson",v,[b,T,b.linkFile]):l.call(this,f,"atlasjson",v,[b,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,f.data,v),f.addToCache(),this.complete=!0}}});g.register("aseprite",function(h,f,v,y,x){var S;if(Array.isArray(h))for(var E=0;E<h.length;E++)S=new p(this,h[E]),this.addFile(S.files);else S=new p(this,h,f,v,y,x),this.addFile(S.files);return this}),r.exports=p},73152:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42927),o=e(42911),a=e(70806),l=e(45176),p=new u({Extends:l,initialize:function(f,v,y,x,S,E){var b,T;if(o(v)){var P=v;v=c(P,"key"),b=new s(f,{key:v,url:c(P,"textureURL"),extension:c(P,"textureExtension","png"),normalMap:c(P,"normalMap"),xhrSettings:c(P,"textureXhrSettings")}),T=new a(f,{key:v,url:c(P,"atlasURL"),extension:c(P,"atlasExtension","json"),xhrSettings:c(P,"atlasXhrSettings")})}else b=new s(f,v,y,S),T=new a(f,v,x,E);b.linkFile?l.call(this,f,"atlasjson",v,[b,T,b.linkFile]):l.call(this,f,"atlasjson",v,[b,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,f.data,v),this.complete=!0}}});g.register("atlas",function(h,f,v,y,x){var S;if(Array.isArray(h))for(var E=0;E<h.length;E++)S=new p(this,h[E]),this.addFile(S.files);else S=new p(this,h,f,v,y,x),this.addFile(S.files);return this}),r.exports=p},24616:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42927),o=e(42911),a=e(45176),l=e(15297),p=new u({Extends:a,initialize:function(f,v,y,x,S,E){var b,T;if(o(v)){var P=v;v=c(P,"key"),b=new s(f,{key:v,url:c(P,"textureURL"),extension:c(P,"textureExtension","png"),normalMap:c(P,"normalMap"),xhrSettings:c(P,"textureXhrSettings")}),T=new l(f,{key:v,url:c(P,"atlasURL"),extension:c(P,"atlasExtension","xml"),xhrSettings:c(P,"atlasXhrSettings")})}else b=new s(f,v,y,S),T=new l(f,v,x,E);b.linkFile?a.call(this,f,"atlasxml",v,[b,T,b.linkFile]):a.call(this,f,"atlasxml",v,[b,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(h.key,h.data,f.data,v),this.complete=!0}}});g.register("atlasXML",function(h,f,v,y,x){var S;if(Array.isArray(h))for(var E=0;E<h.length;E++)S=new p(this,h[E]),this.addFile(S.files);else S=new p(this,h,f,v,y,x),this.addFile(S.files);return this}),r.exports=p},67448:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(30929),l=e(42911),p=new u({Extends:c,initialize:function(f,v,y,x,S){if(l(v)){var E=v;v=o(E,"key"),x=o(E,"xhrSettings"),S=o(E,"context",S)}var b={type:"audio",cache:f.cacheManager.audio,extension:y.type,responseType:"arraybuffer",key:v,url:y.url,xhrSettings:x,config:{context:S}};c.call(this,f,b)},onProcess:function(){this.state=g.FILE_PROCESSING;var h=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(f){h.data=f,h.onProcessComplete()},function(f){console.error("Error decoding audio: "+h.key+" - ",f?f.message:null),h.onProcessError()}),this.config.context=null}});p.create=function(h,f,v,y,x){var S=h.systems.game,E=S.config.audio,b=S.device.audio;l(f)&&(v=o(f,"url",[]),y=o(f,"config",{}));var T=p.getAudioURL(S,v);return T?b.webAudio&&!E.disableWebAudio?new p(h,f,T,x,S.sound.context):new a(h,f,T,y):(console.warn('No audio URLs for "%s" matched this device',f),null)},p.getAudioURL=function(h,f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var y=o(f[v],"url",f[v]);if(y.indexOf("blob:")===0||y.indexOf("data:")===0)return{url:y,type:""};var x=y.match(/\.([a-zA-Z0-9]+)($|\?)/);if(x=o(f[v],"type",x?x[1]:"").toLowerCase(),h.device.audio[x])return{url:y,type:x}}return null},s.register("audio",function(h,f,v,y){var x=this.systems.game,S=x.config.audio,E=x.device.audio;if(S.noAudio||!E.webAudio&&!E.audioData)return this;var b;if(Array.isArray(h))for(var T=0;T<h.length;T++)b=p.create(this,h[T]),b&&this.addFile(b);else b=p.create(this,h,f,v,y),b&&this.addFile(b);return this}),r.exports=p},66109:(r,m,e)=>{var u=e(67448),g=e(56694),c=e(76846),s=e(72632),o=e(42911),a=e(70806),l=e(45176),p=new g({Extends:l,initialize:function(f,v,y,x,S,E,b){if(o(v)){var T=v;v=s(T,"key"),y=s(T,"jsonURL"),x=s(T,"audioURL"),S=s(T,"audioConfig"),E=s(T,"audioXhrSettings"),b=s(T,"jsonXhrSettings")}var P;if(!x)P=new a(f,v,y,b),l.call(this,f,"audiosprite",v,[P]),this.config.resourceLoad=!0,this.config.audioConfig=S,this.config.audioXhrSettings=E;else{var C=u.create(f,v,x,S,E);C&&(P=new a(f,v,y,b),l.call(this,f,"audiosprite",v,[C,P]),this.config.resourceLoad=!1)}},onFileComplete:function(h){var f=this.files.indexOf(h);if(f!==-1&&(this.pending--,this.config.resourceLoad&&h.type==="json"&&h.data.hasOwnProperty("resources"))){var v=h.data.resources,y=s(this.config,"audioConfig"),x=s(this.config,"audioXhrSettings"),S=u.create(this.loader,h.key,v,y,x);S&&(this.addToMultiFile(S),this.loader.addFile(S))}},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],f=this.files[1];h.addToCache(),f.addToCache(),this.complete=!0}}});c.register("audioSprite",function(h,f,v,y,x,S){var E=this.systems.game,b=E.config.audio,T=E.device.audio;if(b&&b.noAudio||!T.webAudio&&!T.audioData)return this;var P;if(Array.isArray(h))for(var C=0;C<h.length;C++)P=new p(this,h[C]),P.files&&this.addFile(P.files);else P=new p(this,h,f,v,y,x,S),P.files&&this.addFile(P.files);return this})},40612:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y,x){var S="bin";if(a(f)){var E=f;f=o(E,"key"),v=o(E,"url"),y=o(E,"xhrSettings"),S=o(E,"extension",S),x=o(E,"dataType",x)}var b={type:"binary",cache:h.cacheManager.binary,extension:S,responseType:"arraybuffer",key:f,url:v,xhrSettings:y,config:{dataType:x}};c.call(this,h,b)},onProcess:function(){this.state=g.FILE_PROCESSING;var p=this.config.dataType;this.data=p?new p(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});s.register("binary",function(p,h,f,v){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new l(this,p[y]));else this.addFile(new l(this,p,h,v,f));return this}),r.exports=l},54565:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42927),o=e(42911),a=e(45176),l=e(31476),p=e(15297),h=new u({Extends:a,initialize:function(v,y,x,S,E,b){var T,P;if(o(y)){var C=y;y=c(C,"key"),T=new s(v,{key:y,url:c(C,"textureURL"),extension:c(C,"textureExtension","png"),normalMap:c(C,"normalMap"),xhrSettings:c(C,"textureXhrSettings")}),P=new p(v,{key:y,url:c(C,"fontDataURL"),extension:c(C,"fontDataExtension","xml"),xhrSettings:c(C,"fontDataXhrSettings")})}else T=new s(v,y,x,E),P=new p(v,y,S,b);T.linkFile?a.call(this,v,"bitmapfont",y,[T,P,T.linkFile]):a.call(this,v,"bitmapfont",y,[T,P])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1];f.addToCache();var y=f.cache.get(f.key),x=l(v.data,f.cache.getFrame(f.key),0,0,y);this.loader.cacheManager.bitmapFont.add(f.key,{data:x,texture:f.key,frame:null}),this.complete=!0}}});g.register("bitmapFont",function(f,v,y,x,S){var E;if(Array.isArray(f))for(var b=0;b<f.length;b++)E=new h(this,f[b]),this.addFile(E.files);else E=new h(this,f,v,y,x,S),this.addFile(E.files);return this}),r.exports=h},99898:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y){var x="css";if(a(f)){var S=f;f=o(S,"key"),v=o(S,"url"),y=o(S,"xhrSettings"),x=o(S,"extension",x)}var E={type:"script",cache:!1,extension:x,responseType:"text",key:f,url:v,xhrSettings:y};c.call(this,h,E)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("css",function(p,h,f){if(Array.isArray(p))for(var v=0;v<p.length;v++)this.addFile(new l(this,p[v]));else this.addFile(new l(this,p,h,f));return this}),r.exports=l},47375:(r,m,e)=>{var u=e(73152),g=e(40612),c=e(56694),s=e(76846),o=e(72632),a=e(42927),l=e(42911),p=e(70806),h=e(67409),f=e(30657),v=e(80802),y=e(45176),x=e(24904),S=new c({Extends:y,initialize:function(b,T,P,C){if(P.multiAtlasURL){var w=new p(b,{key:T,url:P.multiAtlasURL,xhrSettings:C,config:P});y.call(this,b,"texture",T,[w])}else{var A=P.textureURL.substr(P.textureURL.length-3);P.type||(P.type=A.toLowerCase()==="ktx"?"KTX":"PVR");var R=new g(b,{key:T,url:P.textureURL,extension:A,xhrSettings:C,config:P});if(P.atlasURL){var I=new p(b,{key:T,url:P.atlasURL,xhrSettings:C,config:P});y.call(this,b,"texture",T,[R,I])}else y.call(this,b,"texture",T,[R])}this.config=P},onFileComplete:function(E){var b=this.files.indexOf(E);if(b!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var T=E.data.textures,P=this.config,C=this.loader,w=C.baseURL,A=C.path,R=C.prefix,I=o(P,"multiBaseURL",this.baseURL),L=o(P,"multiPath",this.path),O=o(P,"prefix",this.prefix),D=o(P,"textureXhrSettings");I&&C.setBaseURL(I),L&&C.setPath(L),O&&C.setPrefix(O);for(var V=0;V<T.length;V++){var B=T[V].image,U="CMA"+this.multiKeyIndex+"_"+B,W=new g(C,U,B,D);if(this.addToMultiFile(W),C.addFile(W),T[V].normalMap){var F=new g(C,U,T[V].normalMap,D);F.type="normalMap",W.setLink(F),this.addToMultiFile(F),C.addFile(F)}}C.setBaseURL(w),C.setPath(A),C.setPrefix(R)}}},addToCache:function(){if(this.isReadyToProcess()){var E=this.config;if(E.multiAtlasURL)this.addMultiToCache();else{var b=this.loader.systems.renderer,T=this.loader.textureManager,P,C=this.files[0],w=this.files[1];if(E.type==="PVR"?P=x(C.data):E.type==="KTX"&&(P=h(C.data)),P&&b.supportsCompressedTexture(E.format,P.internalFormat)){P.format=b.getCompressedTextureName(E.format,P.internalFormat);var A=w&&w.data?w.data:null;T.addCompressedTexture(C.key,P,A)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,b=this.files[0],T=[],P=[],C=[],w=this.loader.systems.renderer,A=this.loader.textureManager,R,I=1;I<this.files.length;I++){var L=this.files[I];if(L.type!=="normalMap")for(var O=L.key.indexOf("_"),D=L.key.substr(O+1),V=L.data,B=0;B<b.data.textures.length;B++){var U=b.data.textures[B];if(U.image===D){E.type==="PVR"?R=x(V):E.type==="KTX"&&(R=h(V)),R&&w.supportsCompressedTexture(E.format,R.internalFormat)&&(R.format=w.getCompressedTextureName(E.format,R.internalFormat),P.push(R),T.push(U),L.linkFile&&C.push(L.linkFile.data));break}}}C.length===0&&(C=void 0),A.addAtlasJSONArray(this.key,P,T,C),this.complete=!0}});s.register("texture",function(E,b,T){var P=this.systems.renderer,C=function(A,R,I,L){var O={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(l(R)){var D=R;R=o(D,"key"),I=o(D,"url"),L=o(D,"xhrSettings")}var V=!1;for(var B in I)if(P.supportsCompressedTexture(B)){var U=I[B];typeof U=="string"?O.textureURL=U:O=f(U,O),O.format=B.toUpperCase(),V=!0;break}if(!V)console.warn("No supported compressed texture format or IMG fallback",R);else if(O.format==="IMG"){var W,F;O.multiAtlasURL?(F=new v(A,R,O.multiAtlasURL,O.multiPath,O.multiBaseURL,L),W=F.files):O.atlasURL?(F=new u(A,R,O.textureURL,O.atlasURL,L),W=F.files):W=new a(A,R,O.textureURL,L),A.addFile(W)}else{var G=new S(A,R,O,L);A.addFile(G.files)}};if(Array.isArray(E))for(var w=0;w<E.length;w++)C(this,E[w]);else C(this,E,b,T);return this}),r.exports=S},46568:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=e(31053),p=new u({Extends:c,initialize:function(f,v,y,x,S){var E="glsl";if(a(v)){var b=v;v=o(b,"key"),y=o(b,"url"),x=o(b,"shaderType","fragment"),S=o(b,"xhrSettings"),E=o(b,"extension",E)}else x===void 0&&(x="fragment");var T={type:"glsl",cache:f.cacheManager.shader,extension:E,responseType:"text",key:v,url:y,config:{shaderType:x},xhrSettings:S};c.call(this,f,T)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.split(`
`),f=this.extractBlock(h,0);if(f)for(;f;){var v=this.getShaderName(f.header),y=this.getShaderType(f.header),x=this.getShaderUniforms(f.header),S=f.shader;if(this.cache.has(v)){var E=this.cache.get(v);y==="fragment"?E.fragmentSrc=S:E.vertexSrc=S,E.uniforms||(E.uniforms=x)}else y==="fragment"?this.cache.add(v,new l(v,S,"",x)):this.cache.add(v,new l(v,"",S,x));f=this.extractBlock(h,f.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new l(this.key,this.data)):this.cache.add(this.key,new l(this.key,"",this.data))},getShaderName:function(h){for(var f=0;f<h.length;f++){var v=h[f].trim();if(v.substring(0,5)==="name:")return v.substring(5).trim()}return this.key},getShaderType:function(h){for(var f=0;f<h.length;f++){var v=h[f].trim();if(v.substring(0,5)==="type:")return v.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(h){for(var f={},v=0;v<h.length;v++){var y=h[v].trim();if(y.substring(0,8)==="uniform."){var x=y.indexOf(":");if(x){var S=y.substring(8,x);try{f[S]=JSON.parse(y.substring(x+1))}catch{console.warn("Invalid uniform JSON: "+S)}}}}return f},extractBlock:function(h,f){for(var v=-1,y=-1,x=-1,S=!1,E=!1,b=[],T=[],P=f;P<h.length;P++){var C=h[P].trim();if(C==="---")if(v===-1)v=P,S=!0;else if(S)y=P,S=!1,E=!0;else{E=!1;break}else S?b.push(C):E&&(T.push(C),x=P)}return!S&&y!==-1?{header:b,shader:T.join(`
`),offset:x}:null}});s.register("glsl",function(h,f,v,y){if(Array.isArray(h))for(var x=0;x<h.length;x++)this.addFile(new p(this,h[x]));else this.addFile(new p(this,h,f,v,y));return this}),r.exports=p},30929:(r,m,e)=>{var u=e(56694),g=e(683),c=e(98035),s=e(72632),o=e(30750),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y){if(a(f)){var x=f;f=s(x,"key"),y=s(x,"config",y)}var S={type:"audio",cache:h.cacheManager.audio,extension:v.type,key:f,url:v.url,config:y};c.call(this,h,S),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var p=0;p<this.data.length;p++){var h=this.data[p];h.oncanplaythrough=null,h.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(p){var h=p.target;h.oncanplaythrough=null,h.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(g.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var p=this.config&&this.config.instances||1;this.filesTotal=p,this.filesLoaded=0,this.percentComplete=0;for(var h=0;h<p;h++){var f=new Audio;f.dataset||(f.dataset={}),f.dataset.name=this.key+("0"+h).slice(-2),f.dataset.used="false",this.locked?f.dataset.locked="true":(f.dataset.locked="false",f.preload="auto",f.oncanplaythrough=this.onProgress.bind(this),f.onerror=this.onError.bind(this)),this.data.push(f)}for(h=0;h<this.data.length;h++)f=this.data[h],f.src=o(this,this.loader.baseURL),this.locked||f.load();this.locked&&setTimeout(this.onLoad.bind(this))}});r.exports=l},77459:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y){var x="html";if(a(f)){var S=f;f=o(S,"key"),v=o(S,"url"),y=o(S,"xhrSettings"),x=o(S,"extension",x)}var E={type:"text",cache:h.cacheManager.html,extension:x,responseType:"text",key:f,url:v,xhrSettings:y};c.call(this,h,E)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("html",function(p,h,f){if(Array.isArray(p))for(var v=0;v<p.length;v++)this.addFile(new l(this,p[v]));else this.addFile(new l(this,p,h,f));return this}),r.exports=l},9755:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y,x,S){y===void 0&&(y=512),x===void 0&&(x=512);var E="html";if(a(f)){var b=f;f=o(b,"key"),v=o(b,"url"),S=o(b,"xhrSettings"),E=o(b,"extension",E),y=o(b,"width",y),x=o(b,"height",x)}var T={type:"html",cache:h.textureManager,extension:E,responseType:"text",key:f,url:v,xhrSettings:S,config:{width:y,height:x}};c.call(this,h,T)},onProcess:function(){this.state=g.FILE_PROCESSING;var p=this.config.width,h=this.config.height,f=[];f.push('<svg width="'+p+'px" height="'+h+'px" viewBox="0 0 '+p+" "+h+'" xmlns="http://www.w3.org/2000/svg">'),f.push('<foreignObject width="100%" height="100%">'),f.push('<body xmlns="http://www.w3.org/1999/xhtml">'),f.push(this.xhrLoader.responseText),f.push("</body>"),f.push("</foreignObject>"),f.push("</svg>");var v=[f.join(`
`)],y=this;try{var x=new window.Blob(v,{type:"image/svg+xml;charset=utf-8"})}catch{y.state=g.FILE_ERRORED,y.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){c.revokeObjectURL(y.data),y.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(y.data),y.onProcessError()},c.createObjectURL(this.data,x,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});s.register("htmlTexture",function(p,h,f,v,y){if(Array.isArray(p))for(var x=0;x<p.length;x++)this.addFile(new l(this,p[x]));else this.addFile(new l(this,p,h,f,v,y));return this}),r.exports=l},42927:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=e(30750),p=new u({Extends:c,initialize:function h(f,v,y,x,S){var E="png",b;if(a(v)){var T=v;v=o(T,"key"),y=o(T,"url"),b=o(T,"normalMap"),x=o(T,"xhrSettings"),E=o(T,"extension",E),S=o(T,"frameConfig")}Array.isArray(y)&&(b=y[1],y=y[0]);var P={type:"image",cache:f.textureManager,extension:E,responseType:"blob",key:v,url:y,xhrSettings:x,config:S};if(c.call(this,f,P),b){var C=new h(f,this.key,b,x,S);C.type="normalMap",this.setLink(C),f.addFile(C)}this.useImageElementLoad=f.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var h=this;this.data.onload=function(){c.revokeObjectURL(h.data),h.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(h.data),h.onProcessError()},c.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var h=this.state;this.state=g.FILE_PROCESSING,h===g.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=g.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var h=this;this.data.onload=function(){h.state=g.FILE_LOADED,h.loader.nextFile(h,!0)},this.data.onerror=function(){h.loader.nextFile(h,!1)},this.data.src=this.src}},addToCache:function(){var h=this.linkFile;h?h.state>=g.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,h.data,this.data):this.cache.addImage(this.key,this.data,h.data)):this.cache.addImage(this.key,this.data)}});s.register("image",function(h,f,v){if(Array.isArray(h))for(var y=0;y<h.length;y++)this.addFile(new p(this,h[y]));else this.addFile(new p(this,h,f,v));return this}),r.exports=p},70806:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(10850),l=e(42911),p=new u({Extends:c,initialize:function(f,v,y,x,S){var E="json";if(l(v)){var b=v;v=o(b,"key"),y=o(b,"url"),x=o(b,"xhrSettings"),E=o(b,"extension",E),S=o(b,"dataKey",S)}var T={type:"json",cache:f.cacheManager.json,extension:E,responseType:"text",key:v,url:y,xhrSettings:x,config:S};c.call(this,f,T),l(y)&&(S?this.data=a(y,S):this.data=y,this.state=g.FILE_POPULATED)},onProcess:function(){if(this.state!==g.FILE_POPULATED){this.state=g.FILE_PROCESSING;try{var h=JSON.parse(this.xhrLoader.responseText)}catch(v){throw this.onProcessError(),v}var f=this.config;typeof f=="string"?this.data=a(h,f,h):this.data=h}this.onProcessComplete()}});s.register("json",function(h,f,v,y){if(Array.isArray(h))for(var x=0;x<h.length;x++)this.addFile(new p(this,h[x]));else this.addFile(new p(this,h,f,y,v));return this}),r.exports=p},80802:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42927),o=e(42911),a=e(70806),l=e(45176),p=new u({Extends:l,initialize:function(f,v,y,x,S,E,b){if(o(v)){var T=v;v=c(T,"key"),c(T,"url",!1)?y=c(T,"url"):y=c(T,"atlasURL"),E=c(T,"xhrSettings"),x=c(T,"path"),S=c(T,"baseURL"),b=c(T,"textureXhrSettings")}var P=new a(f,v,y,E);l.call(this,f,"multiatlas",v,[P]),this.config.path=x,this.config.baseURL=S,this.config.textureXhrSettings=b},onFileComplete:function(h){var f=this.files.indexOf(h);if(f!==-1&&(this.pending--,h.type==="json"&&h.data.hasOwnProperty("textures"))){var v=h.data.textures,y=this.config,x=this.loader,S=x.baseURL,E=x.path,b=x.prefix,T=c(y,"baseURL",this.baseURL),P=c(y,"path",this.path),C=c(y,"prefix",this.prefix),w=c(y,"textureXhrSettings");x.setBaseURL(T),x.setPath(P),x.setPrefix(C);for(var A=0;A<v.length;A++){var R=v[A].image,I="MA"+this.multiKeyIndex+"_"+R,L=new s(x,I,R,w);if(this.addToMultiFile(L),x.addFile(L),v[A].normalMap){var O=new s(x,I,v[A].normalMap,w);O.type="normalMap",L.setLink(O),this.addToMultiFile(O),x.addFile(O)}}x.setBaseURL(S),x.setPath(E),x.setPrefix(b)}},addToCache:function(){if(this.isReadyToProcess()){for(var h=this.files[0],f=[],v=[],y=[],x=1;x<this.files.length;x++){var S=this.files[x];if(S.type!=="normalMap")for(var E=S.key.indexOf("_"),b=S.key.substr(E+1),T=S.data,P=0;P<h.data.textures.length;P++){var C=h.data.textures[P];if(C.image===b){v.push(T),f.push(C),S.linkFile&&y.push(S.linkFile.data);break}}}y.length===0&&(y=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,v,f,y),this.complete=!0}}});g.register("multiatlas",function(h,f,v,y,x){var S;if(Array.isArray(h))for(var E=0;E<h.length;E++)S=new p(this,h[E]),this.addFile(S.files);else S=new p(this,h,f,v,y,x),this.addFile(S.files);return this}),r.exports=p},39034:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42911),o=e(45176),a=e(55188),l=new u({Extends:o,initialize:function(h,f,v,y){var x="js",S=[];if(s(f)){var E=f;f=c(E,"key"),v=c(E,"url"),y=c(E,"xhrSettings"),x=c(E,"extension",x)}Array.isArray(v)||(v=[v]);for(var b=0;b<v.length;b++){var T=new a(h,{key:f+"_"+b.toString(),url:v[b],extension:x,xhrSettings:y});T.onProcess=function(){this.onProcessComplete()},S.push(T)}o.call(this,h,"scripts",f,S)},addToCache:function(){if(this.isReadyToProcess()){for(var p=0;p<this.files.length;p++){var h=this.files[p];h.data=document.createElement("script"),h.data.language="javascript",h.data.type="text/javascript",h.data.defer=!1,h.data.text=h.xhrLoader.responseText,document.head.appendChild(h.data)}this.complete=!0}}});g.register("scripts",function(p,h,f){var v;if(Array.isArray(p))for(var y=0;y<p.length;y++)v=new l(this,p[y]),this.addFile(v.files);else v=new l(this,p,h,f),this.addFile(v.files);return this}),r.exports=l},85527:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42911),o=e(45176),a=e(27291),l=e(76799),p=e(86897),h=new u({Extends:o,initialize:function(v,y,x,S,E,b){var T,P,C=v.cacheManager.obj;if(s(y)){var w=y;y=c(w,"key"),T=new p(v,{key:y,type:"obj",cache:C,url:c(w,"url"),extension:c(w,"extension","obj"),xhrSettings:c(w,"xhrSettings"),config:{flipUV:c(w,"flipUV",E)}}),S=c(w,"matURL"),S&&(P=new p(v,{key:y,type:"mat",cache:C,url:S,extension:c(w,"matExtension","mat"),xhrSettings:c(w,"xhrSettings")}))}else T=new p(v,{key:y,url:x,type:"obj",cache:C,extension:"obj",xhrSettings:b,config:{flipUV:E}}),S&&(P=new p(v,{key:y,url:S,type:"mat",cache:C,extension:"mat",xhrSettings:b}));o.call(this,v,"obj",y,[T,P])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],y=a(f.data,f.config.flipUV);v&&(y.materials=l(v.data)),f.cache.add(f.key,y),this.complete=!0}}});g.register("obj",function(f,v,y,x,S){var E;if(Array.isArray(f))for(var b=0;b<f.length;b++)E=new h(this,f[b]),this.addFile(E.files);else E=new h(this,f,v,y,x,S),this.addFile(E.files);return this}),r.exports=h},3616:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(76846),s=e(70806),o=new u({Extends:s,initialize:function(l,p,h,f,v){s.call(this,l,p,h,f,v),this.type="packfile"},onProcess:function(){if(this.state!==g.FILE_POPULATED&&(this.state=g.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var a={};a[this.config]=this.data,this.data=a}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});c.register("pack",function(a,l,p,h){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new o(this,a[f]));else this.addFile(new o(this,a,l,h,p));return this}),r.exports=o},12217:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y,x,S){var E="js";if(a(f)){var b=f;f=o(b,"key"),v=o(b,"url"),S=o(b,"xhrSettings"),E=o(b,"extension",E),y=o(b,"start"),x=o(b,"mapping")}var T={type:"plugin",cache:!1,extension:E,responseType:"text",key:f,url:v,xhrSettings:S,config:{start:y,mapping:x}};c.call(this,h,T),typeof v=="function"&&(this.data=v,this.state=g.FILE_POPULATED)},onProcess:function(){var p=this.loader.systems.plugins,h=this.config,f=o(h,"start",!1),v=o(h,"mapping",null);if(this.state===g.FILE_POPULATED)p.install(this.key,this.data,f,v);else{this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var y=p.install(this.key,window[this.key],f,v);(f||v)&&(this.loader.systems[v]=y,this.loader.scene[v]=y)}this.onProcessComplete()}});s.register("plugin",function(p,h,f,v,y){if(Array.isArray(p))for(var x=0;x<p.length;x++)this.addFile(new l(this,p[x]));else this.addFile(new l(this,p,h,f,v,y));return this}),r.exports=l},4474:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y,x){var S="svg";if(a(f)){var E=f;f=o(E,"key"),v=o(E,"url"),y=o(E,"svgConfig",{}),x=o(E,"xhrSettings"),S=o(E,"extension",S)}var b={type:"svg",cache:h.textureManager,extension:S,responseType:"text",key:f,url:v,xhrSettings:x,config:{width:o(y,"width"),height:o(y,"height"),scale:o(y,"scale")}};c.call(this,h,b)},onProcess:function(){this.state=g.FILE_PROCESSING;var p=this.xhrLoader.responseText,h=[p],f=this.config.width,v=this.config.height,y=this.config.scale;t:if(f&&v||y){var x=null,S=new DOMParser;x=S.parseFromString(p,"text/xml");var E=x.getElementsByTagName("svg")[0],b=E.hasAttribute("viewBox"),T=parseFloat(E.getAttribute("width")),P=parseFloat(E.getAttribute("height"));if(!b&&T&&P)E.setAttribute("viewBox","0  0 "+T+" "+P);else if(b&&!T&&!P){var C=E.getAttribute("viewBox").split(/\s+|,/);T=C[2],P=C[3]}if(y)if(T&&P)f=T*y,v=P*y;else break t;E.setAttribute("width",f.toString()+"px"),E.setAttribute("height",v.toString()+"px"),h=[new XMLSerializer().serializeToString(E)]}try{var w=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var A=this,R=!1;this.data.onload=function(){R||c.revokeObjectURL(A.data),A.onProcessComplete()},this.data.onerror=function(){R?A.onProcessError():(R=!0,c.revokeObjectURL(A.data),A.data.src="data:image/svg+xml,"+encodeURIComponent(h.join("")))},c.createObjectURL(this.data,w,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});s.register("svg",function(p,h,f,v){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new l(this,p[y]));else this.addFile(new l(this,p,h,f,v));return this}),r.exports=l},95171:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y){var x="js";if(a(f)){var S=f;f=o(S,"key"),v=o(S,"url"),y=o(S,"xhrSettings"),x=o(S,"extension",x)}var E={type:"text",extension:x,responseType:"text",key:f,url:v,xhrSettings:y};c.call(this,h,E)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var p=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),h=eval;this.loader.sceneManager.add(this.key,h(p)),this.complete=!0}});s.register("sceneFile",function(p,h,f){if(Array.isArray(p))for(var v=0;v<p.length;v++)this.addFile(new l(this,p[v]));else this.addFile(new l(this,p,h,f));return this}),r.exports=l},82458:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y,x,S){var E="js";if(a(f)){var b=f;f=o(b,"key"),v=o(b,"url"),S=o(b,"xhrSettings"),E=o(b,"extension",E),y=o(b,"systemKey"),x=o(b,"sceneKey")}var T={type:"scenePlugin",cache:!1,extension:E,responseType:"text",key:f,url:v,xhrSettings:S,config:{systemKey:y,sceneKey:x}};c.call(this,h,T),typeof v=="function"&&(this.data=v,this.state=g.FILE_POPULATED)},onProcess:function(){var p=this.loader.systems.plugins,h=this.config,f=this.key,v=o(h,"systemKey",f),y=o(h,"sceneKey",f);this.state===g.FILE_POPULATED?p.installScenePlugin(v,this.data,y,this.loader.scene,!0):(this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),p.installScenePlugin(v,window[this.key],y,this.loader.scene,!0)),this.onProcessComplete()}});s.register("scenePlugin",function(p,h,f,v,y){if(Array.isArray(p))for(var x=0;x<p.length;x++)this.addFile(new l(this,p[x]));else this.addFile(new l(this,p,h,f,v,y));return this}),r.exports=l},55188:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y,x){var S="js";if(a(f)){var E=f;f=o(E,"key"),v=o(E,"url"),y=o(E,"type","script"),x=o(E,"xhrSettings"),S=o(E,"extension",S)}else y===void 0&&(y="script");var b={type:y,cache:!1,extension:S,responseType:"text",key:f,url:v,xhrSettings:x};c.call(this,h,b)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("script",function(p,h,f,v){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new l(this,p[y]));else this.addFile(new l(this,p,h,f,v));return this}),r.exports=l},33536:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(76846),s=e(42927),o=new u({Extends:s,initialize:function(l,p,h,f,v){s.call(this,l,p,h,v,f),this.type="spritesheet"},addToCache:function(){var a=this.linkFile;a?a.state>=g.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,a.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,a.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});c.register("spritesheet",function(a,l,p,h){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new o(this,a[f]));else this.addFile(new o(this,a,l,p,h));return this}),r.exports=o},86897:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=new u({Extends:c,initialize:function(h,f,v,y){var x="text",S="txt",E=h.cacheManager.text;if(a(f)){var b=f;f=o(b,"key"),v=o(b,"url"),y=o(b,"xhrSettings"),S=o(b,"extension",S),x=o(b,"type",x),E=o(b,"cache",E)}var T={type:x,cache:E,extension:S,responseType:"text",key:f,url:v,xhrSettings:y};c.call(this,h,T)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("text",function(p,h,f){if(Array.isArray(p))for(var v=0;v<p.length;v++)this.addFile(new l(this,p[v]));else this.addFile(new l(this,p,h,f));return this}),r.exports=l},58673:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=e(93560),p=new u({Extends:c,initialize:function(f,v,y,x){var S="csv";if(a(v)){var E=v;v=o(E,"key"),y=o(E,"url"),x=o(E,"xhrSettings"),S=o(E,"extension",S)}var b={type:"tilemapCSV",cache:f.cacheManager.tilemap,extension:S,responseType:"text",key:v,url:y,xhrSettings:x};c.call(this,f,b),this.tilemapFormat=l.CSV},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,h)}});s.register("tilemapCSV",function(h,f,v){if(Array.isArray(h))for(var y=0;y<h.length;y++)this.addFile(new p(this,h[y]));else this.addFile(new p(this,h,f,v));return this}),r.exports=p},98896:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(70806),s=e(93560),o=new u({Extends:c,initialize:function(l,p,h,f){c.call(this,l,p,h,f),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var a={format:s.WELTMEISTER,data:this.data};this.cache.add(this.key,a)}});g.register("tilemapImpact",function(a,l,p){if(Array.isArray(a))for(var h=0;h<a.length;h++)this.addFile(new o(this,a[h]));else this.addFile(new o(this,a,l,p));return this}),r.exports=o},50563:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(70806),s=e(93560),o=new u({Extends:c,initialize:function(l,p,h,f){c.call(this,l,p,h,f),this.type="tilemapJSON",this.cache=l.cacheManager.tilemap},addToCache:function(){var a={format:s.TILED_JSON,data:this.data};this.cache.add(this.key,a)}});g.register("tilemapTiledJSON",function(a,l,p){if(Array.isArray(a))for(var h=0;h<a.length;h++)this.addFile(new o(this,a[h]));else this.addFile(new o(this,a,l,p));return this}),r.exports=o},82857:(r,m,e)=>{var u=e(56694),g=e(76846),c=e(72632),s=e(42927),o=e(42911),a=e(45176),l=e(86897),p=new u({Extends:a,initialize:function(f,v,y,x,S,E){var b,T;if(o(v)){var P=v;v=c(P,"key"),b=new s(f,{key:v,url:c(P,"textureURL"),extension:c(P,"textureExtension","png"),normalMap:c(P,"normalMap"),xhrSettings:c(P,"textureXhrSettings")}),T=new l(f,{key:v,url:c(P,"atlasURL"),extension:c(P,"atlasExtension","txt"),xhrSettings:c(P,"atlasXhrSettings")})}else b=new s(f,v,y,S),T=new l(f,v,x,E);b.linkFile?a.call(this,f,"unityatlas",v,[b,T,b.linkFile]):a.call(this,f,"unityatlas",v,[b,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],f=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(h.key,h.data,f.data,v),this.complete=!0}}});g.register("unityAtlas",function(h,f,v,y,x){var S;if(Array.isArray(h))for(var E=0;E<h.length;E++)S=new p(this,h[E]),this.addFile(S.files);else S=new p(this,h,f,v,y,x),this.addFile(S.files);return this}),r.exports=p},22833:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(30750),a=e(72632),l=e(42911),p=new u({Extends:c,initialize:function(f,v,y,x){if(x===void 0&&(x=!1),l(v)){var S=v;v=a(S,"key"),y=a(S,"url",[]),x=a(S,"noAudio",!1)}var E=f.systems.game.device.video.getVideoURL(y);E||console.warn("VideoFile: No supported format for "+v);var b={type:"video",cache:f.cacheManager.video,extension:E.type,key:v,url:E.url,config:{noAudio:x}};c.call(this,f,b)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=o(this,this.loader.baseURL),this.state=g.FILE_LOADED,this.loader.nextFile(this,!0)}});s.register("video",function(h,f,v){if(Array.isArray(h))for(var y=0;y<h.length;y++)this.addFile(new p(this,h[y]));else this.addFile(new p(this,h,f,v));return this}),r.exports=p},15297:(r,m,e)=>{var u=e(56694),g=e(12117),c=e(98035),s=e(76846),o=e(72632),a=e(42911),l=e(89200),p=new u({Extends:c,initialize:function(f,v,y,x){var S="xml";if(a(v)){var E=v;v=o(E,"key"),y=o(E,"url"),x=o(E,"xhrSettings"),S=o(E,"extension",S)}var b={type:"xml",cache:f.cacheManager.xml,extension:S,responseType:"text",key:v,url:y,xhrSettings:x};c.call(this,f,b)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});s.register("xml",function(h,f,v){if(Array.isArray(h))for(var y=0;y<h.length;y++)this.addFile(new p(this,h[y]));else this.addFile(new p(this,h,f,v));return this}),r.exports=p},34034:(r,m,e)=>{r.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}},95695:(r,m,e)=>{var u=e(12117),g=e(98611),c={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};c=g(!1,c,u),r.exports=c},26042:r=>{var m=function(e){for(var u=0,g=0;g<e.length;g++)u+=+e[g];return u/e.length};r.exports=m},22824:(r,m,e)=>{var u=e(8034),g=function(c,s){return u(c)/u(s)/u(c-s)};r.exports=g},17489:r=>{var m=function(e,u){return Math.floor(Math.random()*(u-e+1)+e)};r.exports=m},14976:r=>{var m=function(e,u,g,c,s){var o=(c-u)*.5,a=(s-g)*.5,l=e*e,p=e*l;return(2*g-2*c+o+a)*p+(-3*g+3*c-2*o-a)*l+o*e+g};r.exports=m},89129:r=>{var m=function(e,u,g){u===void 0&&(u=0),g===void 0&&(g=10);var c=Math.pow(g,-u);return Math.ceil(e*c)/c};r.exports=m},82897:r=>{var m=function(e,u,g){return Math.max(u,Math.min(g,e))};r.exports=m},75606:(r,m,e)=>{var u=e(83392),g=function(c){return c*u.DEG_TO_RAD};r.exports=g},767:r=>{var m=function(e,u){return Math.abs(e-u)};r.exports=m},9849:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(16650),s=e(72283),o=new c,a=new g({initialize:function l(p,h,f,v){p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v=l.DefaultOrder),this._x=p,this._y=h,this._z=f,this._order=v,this.onChangeCallback=s},x:{get:function(){return this._x},set:function(l){this._x=l,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(l){this._y=l,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(l){this._z=l,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(l){this._order=l,this.onChangeCallback(this)}},set:function(l,p,h,f){return f===void 0&&(f=this._order),this._x=l,this._y=p,this._z=h,this._order=f,this.onChangeCallback(this),this},copy:function(l){return this.set(l.x,l.y,l.z,l.order)},setFromQuaternion:function(l,p,h){return p===void 0&&(p=this._order),h===void 0&&(h=!1),o.fromQuat(l),this.setFromRotationMatrix(o,p,h)},setFromRotationMatrix:function(l,p,h){p===void 0&&(p=this._order),h===void 0&&(h=!1);var f=l.val,v=f[0],y=f[4],x=f[8],S=f[1],E=f[5],b=f[9],T=f[2],P=f[6],C=f[10],w=0,A=0,R=0,I=.99999;switch(p){case"XYZ":{A=Math.asin(u(x,-1,1)),Math.abs(x)<I?(w=Math.atan2(-b,C),R=Math.atan2(-y,v)):w=Math.atan2(P,E);break}case"YXZ":{w=Math.asin(-u(b,-1,1)),Math.abs(b)<I?(A=Math.atan2(x,C),R=Math.atan2(S,E)):A=Math.atan2(-T,v);break}case"ZXY":{w=Math.asin(u(P,-1,1)),Math.abs(P)<I?(A=Math.atan2(-T,C),R=Math.atan2(-y,E)):R=Math.atan2(S,v);break}case"ZYX":{A=Math.asin(-u(T,-1,1)),Math.abs(T)<I?(w=Math.atan2(P,C),R=Math.atan2(S,v)):R=Math.atan2(-y,E);break}case"YZX":{R=Math.asin(u(S,-1,1)),Math.abs(S)<I?(w=Math.atan2(-b,E),A=Math.atan2(-T,v)):A=Math.atan2(x,C);break}case"XZY":{R=Math.asin(-u(y,-1,1)),Math.abs(y)<I?(w=Math.atan2(P,E),A=Math.atan2(x,v)):w=Math.atan2(-b,C);break}}return this._x=w,this._y=A,this._z=R,this._order=p,h&&this.onChangeCallback(this),this}});a.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],a.DefaultOrder="XYZ",r.exports=a},8034:r=>{var m=function(e){if(e===0)return 1;for(var u=e;--e;)u*=e;return u};r.exports=m},61616:r=>{var m=function(e,u){return Math.random()*(u-e)+e};r.exports=m},60679:r=>{var m=function(e,u,g){u===void 0&&(u=0),g===void 0&&(g=10);var c=Math.pow(g,-u);return Math.floor(e*c)/c};r.exports=m},91806:(r,m,e)=>{var u=e(82897),g=function(c,s,o){return c=u(c,0,1),(o-s)*c+s};r.exports=g},79366:r=>{var m=function(e,u){return e/u/1e3};r.exports=m},43776:r=>{var m=function(e){return e==parseFloat(e)?!(e%2):void 0};r.exports=m},58442:r=>{var m=function(e){return e===parseFloat(e)?!(e%2):void 0};r.exports=m},42798:r=>{var m=function(e,u,g){return(u-e)*g+e};r.exports=m},61072:r=>{var m=function(e,u,g){return g===void 0&&(g=0),e.clone().lerp(u,g)};r.exports=m},5341:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s){this.val=new Float32Array(9),s?this.copy(s):this.identity()},clone:function(){return new g(this)},set:function(c){return this.copy(c)},copy:function(c){var s=this.val,o=c.val;return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],this},fromMat4:function(c){var s=c.val,o=this.val;return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[4],o[4]=s[5],o[5]=s[6],o[6]=s[8],o[7]=s[9],o[8]=s[10],this},fromArray:function(c){var s=this.val;return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],this},identity:function(){var c=this.val;return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=1,c[5]=0,c[6]=0,c[7]=0,c[8]=1,this},transpose:function(){var c=this.val,s=c[1],o=c[2],a=c[5];return c[1]=c[3],c[2]=c[6],c[3]=s,c[5]=c[7],c[6]=o,c[7]=a,this},invert:function(){var c=this.val,s=c[0],o=c[1],a=c[2],l=c[3],p=c[4],h=c[5],f=c[6],v=c[7],y=c[8],x=y*p-h*v,S=-y*l+h*f,E=v*l-p*f,b=s*x+o*S+a*E;return b?(b=1/b,c[0]=x*b,c[1]=(-y*o+a*v)*b,c[2]=(h*o-a*p)*b,c[3]=S*b,c[4]=(y*s-a*f)*b,c[5]=(-h*s+a*l)*b,c[6]=E*b,c[7]=(-v*s+o*f)*b,c[8]=(p*s-o*l)*b,this):null},adjoint:function(){var c=this.val,s=c[0],o=c[1],a=c[2],l=c[3],p=c[4],h=c[5],f=c[6],v=c[7],y=c[8];return c[0]=p*y-h*v,c[1]=a*v-o*y,c[2]=o*h-a*p,c[3]=h*f-l*y,c[4]=s*y-a*f,c[5]=a*l-s*h,c[6]=l*v-p*f,c[7]=o*f-s*v,c[8]=s*p-o*l,this},determinant:function(){var c=this.val,s=c[0],o=c[1],a=c[2],l=c[3],p=c[4],h=c[5],f=c[6],v=c[7],y=c[8];return s*(y*p-h*v)+o*(-y*l+h*f)+a*(v*l-p*f)},multiply:function(c){var s=this.val,o=s[0],a=s[1],l=s[2],p=s[3],h=s[4],f=s[5],v=s[6],y=s[7],x=s[8],S=c.val,E=S[0],b=S[1],T=S[2],P=S[3],C=S[4],w=S[5],A=S[6],R=S[7],I=S[8];return s[0]=E*o+b*p+T*v,s[1]=E*a+b*h+T*y,s[2]=E*l+b*f+T*x,s[3]=P*o+C*p+w*v,s[4]=P*a+C*h+w*y,s[5]=P*l+C*f+w*x,s[6]=A*o+R*p+I*v,s[7]=A*a+R*h+I*y,s[8]=A*l+R*f+I*x,this},translate:function(c){var s=this.val,o=c.x,a=c.y;return s[6]=o*s[0]+a*s[3]+s[6],s[7]=o*s[1]+a*s[4]+s[7],s[8]=o*s[2]+a*s[5]+s[8],this},rotate:function(c){var s=this.val,o=s[0],a=s[1],l=s[2],p=s[3],h=s[4],f=s[5],v=Math.sin(c),y=Math.cos(c);return s[0]=y*o+v*p,s[1]=y*a+v*h,s[2]=y*l+v*f,s[3]=y*p-v*o,s[4]=y*h-v*a,s[5]=y*f-v*l,this},scale:function(c){var s=this.val,o=c.x,a=c.y;return s[0]=o*s[0],s[1]=o*s[1],s[2]=o*s[2],s[3]=a*s[3],s[4]=a*s[4],s[5]=a*s[5],this},fromQuat:function(c){var s=c.x,o=c.y,a=c.z,l=c.w,p=s+s,h=o+o,f=a+a,v=s*p,y=s*h,x=s*f,S=o*h,E=o*f,b=a*f,T=l*p,P=l*h,C=l*f,w=this.val;return w[0]=1-(S+b),w[3]=y+C,w[6]=x-P,w[1]=y-C,w[4]=1-(v+b),w[7]=E+T,w[2]=x+P,w[5]=E-T,w[8]=1-(v+S),this},normalFromMat4:function(c){var s=c.val,o=this.val,a=s[0],l=s[1],p=s[2],h=s[3],f=s[4],v=s[5],y=s[6],x=s[7],S=s[8],E=s[9],b=s[10],T=s[11],P=s[12],C=s[13],w=s[14],A=s[15],R=a*v-l*f,I=a*y-p*f,L=a*x-h*f,O=l*y-p*v,D=l*x-h*v,V=p*x-h*y,B=S*C-E*P,U=S*w-b*P,W=S*A-T*P,F=E*w-b*C,G=E*A-T*C,M=b*A-T*w,N=R*M-I*G+L*F+O*W-D*U+V*B;return N?(N=1/N,o[0]=(v*M-y*G+x*F)*N,o[1]=(y*W-f*M-x*U)*N,o[2]=(f*G-v*W+x*B)*N,o[3]=(p*G-l*M-h*F)*N,o[4]=(a*M-p*W+h*U)*N,o[5]=(l*W-a*G-h*B)*N,o[6]=(C*V-w*D+A*O)*N,o[7]=(w*L-P*V-A*I)*N,o[8]=(P*D-C*L+A*R)*N,this):null}});r.exports=g},16650:(r,m,e)=>{var u=e(56694),g=e(70015),c=1e-6,s=new u({initialize:function(v){this.val=new Float32Array(16),v?this.copy(v):this.identity()},clone:function(){return new s(this)},set:function(f){return this.copy(f)},setValues:function(f,v,y,x,S,E,b,T,P,C,w,A,R,I,L,O){var D=this.val;return D[0]=f,D[1]=v,D[2]=y,D[3]=x,D[4]=S,D[5]=E,D[6]=b,D[7]=T,D[8]=P,D[9]=C,D[10]=w,D[11]=A,D[12]=R,D[13]=I,D[14]=L,D[15]=O,this},copy:function(f){var v=f.val;return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},fromArray:function(f){return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(f,v,y){var x=o.fromQuat(y),S=x.val,E=v.x,b=v.y,T=v.z;return this.setValues(S[0]*E,S[1]*E,S[2]*E,0,S[4]*b,S[5]*b,S[6]*b,0,S[8]*T,S[9]*T,S[10]*T,0,f.x,f.y,f.z,1)},xyz:function(f,v,y){this.identity();var x=this.val;return x[12]=f,x[13]=v,x[14]=y,this},scaling:function(f,v,y){this.zero();var x=this.val;return x[0]=f,x[5]=v,x[10]=y,x[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var f=this.val,v=f[1],y=f[2],x=f[3],S=f[6],E=f[7],b=f[11];return f[1]=f[4],f[2]=f[8],f[3]=f[12],f[4]=v,f[6]=f[9],f[7]=f[13],f[8]=y,f[9]=S,f[11]=f[14],f[12]=x,f[13]=E,f[14]=b,this},getInverse:function(f){return this.copy(f),this.invert()},invert:function(){var f=this.val,v=f[0],y=f[1],x=f[2],S=f[3],E=f[4],b=f[5],T=f[6],P=f[7],C=f[8],w=f[9],A=f[10],R=f[11],I=f[12],L=f[13],O=f[14],D=f[15],V=v*b-y*E,B=v*T-x*E,U=v*P-S*E,W=y*T-x*b,F=y*P-S*b,G=x*P-S*T,M=C*L-w*I,N=C*O-A*I,k=C*D-R*I,z=w*O-A*L,H=w*D-R*L,$=A*D-R*O,X=V*$-B*H+U*z+W*k-F*N+G*M;return X?(X=1/X,this.setValues((b*$-T*H+P*z)*X,(x*H-y*$-S*z)*X,(L*G-O*F+D*W)*X,(A*F-w*G-R*W)*X,(T*k-E*$-P*N)*X,(v*$-x*k+S*N)*X,(O*U-I*G-D*B)*X,(C*G-A*U+R*B)*X,(E*H-b*k+P*M)*X,(y*k-v*H-S*M)*X,(I*F-L*U+D*V)*X,(w*U-C*F-R*V)*X,(b*N-E*z-T*M)*X,(v*z-y*N+x*M)*X,(L*B-I*W-O*V)*X,(C*W-w*B+A*V)*X)):this},adjoint:function(){var f=this.val,v=f[0],y=f[1],x=f[2],S=f[3],E=f[4],b=f[5],T=f[6],P=f[7],C=f[8],w=f[9],A=f[10],R=f[11],I=f[12],L=f[13],O=f[14],D=f[15];return this.setValues(b*(A*D-R*O)-w*(T*D-P*O)+L*(T*R-P*A),-(y*(A*D-R*O)-w*(x*D-S*O)+L*(x*R-S*A)),y*(T*D-P*O)-b*(x*D-S*O)+L*(x*P-S*T),-(y*(T*R-P*A)-b*(x*R-S*A)+w*(x*P-S*T)),-(E*(A*D-R*O)-C*(T*D-P*O)+I*(T*R-P*A)),v*(A*D-R*O)-C*(x*D-S*O)+I*(x*R-S*A),-(v*(T*D-P*O)-E*(x*D-S*O)+I*(x*P-S*T)),v*(T*R-P*A)-E*(x*R-S*A)+C*(x*P-S*T),E*(w*D-R*L)-C*(b*D-P*L)+I*(b*R-P*w),-(v*(w*D-R*L)-C*(y*D-S*L)+I*(y*R-S*w)),v*(b*D-P*L)-E*(y*D-S*L)+I*(y*P-S*b),-(v*(b*R-P*w)-E*(y*R-S*w)+C*(y*P-S*b)),-(E*(w*O-A*L)-C*(b*O-T*L)+I*(b*A-T*w)),v*(w*O-A*L)-C*(y*O-x*L)+I*(y*A-x*w),-(v*(b*O-T*L)-E*(y*O-x*L)+I*(y*T-x*b)),v*(b*A-T*w)-E*(y*A-x*w)+C*(y*T-x*b))},determinant:function(){var f=this.val,v=f[0],y=f[1],x=f[2],S=f[3],E=f[4],b=f[5],T=f[6],P=f[7],C=f[8],w=f[9],A=f[10],R=f[11],I=f[12],L=f[13],O=f[14],D=f[15],V=v*b-y*E,B=v*T-x*E,U=v*P-S*E,W=y*T-x*b,F=y*P-S*b,G=x*P-S*T,M=C*L-w*I,N=C*O-A*I,k=C*D-R*I,z=w*O-A*L,H=w*D-R*L,$=A*D-R*O;return V*$-B*H+U*z+W*k-F*N+G*M},multiply:function(f){var v=this.val,y=v[0],x=v[1],S=v[2],E=v[3],b=v[4],T=v[5],P=v[6],C=v[7],w=v[8],A=v[9],R=v[10],I=v[11],L=v[12],O=v[13],D=v[14],V=v[15],B=f.val,U=B[0],W=B[1],F=B[2],G=B[3];return v[0]=U*y+W*b+F*w+G*L,v[1]=U*x+W*T+F*A+G*O,v[2]=U*S+W*P+F*R+G*D,v[3]=U*E+W*C+F*I+G*V,U=B[4],W=B[5],F=B[6],G=B[7],v[4]=U*y+W*b+F*w+G*L,v[5]=U*x+W*T+F*A+G*O,v[6]=U*S+W*P+F*R+G*D,v[7]=U*E+W*C+F*I+G*V,U=B[8],W=B[9],F=B[10],G=B[11],v[8]=U*y+W*b+F*w+G*L,v[9]=U*x+W*T+F*A+G*O,v[10]=U*S+W*P+F*R+G*D,v[11]=U*E+W*C+F*I+G*V,U=B[12],W=B[13],F=B[14],G=B[15],v[12]=U*y+W*b+F*w+G*L,v[13]=U*x+W*T+F*A+G*O,v[14]=U*S+W*P+F*R+G*D,v[15]=U*E+W*C+F*I+G*V,this},multiplyLocal:function(f){var v=this.val,y=f.val;return this.setValues(v[0]*y[0]+v[1]*y[4]+v[2]*y[8]+v[3]*y[12],v[0]*y[1]+v[1]*y[5]+v[2]*y[9]+v[3]*y[13],v[0]*y[2]+v[1]*y[6]+v[2]*y[10]+v[3]*y[14],v[0]*y[3]+v[1]*y[7]+v[2]*y[11]+v[3]*y[15],v[4]*y[0]+v[5]*y[4]+v[6]*y[8]+v[7]*y[12],v[4]*y[1]+v[5]*y[5]+v[6]*y[9]+v[7]*y[13],v[4]*y[2]+v[5]*y[6]+v[6]*y[10]+v[7]*y[14],v[4]*y[3]+v[5]*y[7]+v[6]*y[11]+v[7]*y[15],v[8]*y[0]+v[9]*y[4]+v[10]*y[8]+v[11]*y[12],v[8]*y[1]+v[9]*y[5]+v[10]*y[9]+v[11]*y[13],v[8]*y[2]+v[9]*y[6]+v[10]*y[10]+v[11]*y[14],v[8]*y[3]+v[9]*y[7]+v[10]*y[11]+v[11]*y[15],v[12]*y[0]+v[13]*y[4]+v[14]*y[8]+v[15]*y[12],v[12]*y[1]+v[13]*y[5]+v[14]*y[9]+v[15]*y[13],v[12]*y[2]+v[13]*y[6]+v[14]*y[10]+v[15]*y[14],v[12]*y[3]+v[13]*y[7]+v[14]*y[11]+v[15]*y[15])},premultiply:function(f){return this.multiplyMatrices(f,this)},multiplyMatrices:function(f,v){var y=f.val,x=v.val,S=y[0],E=y[4],b=y[8],T=y[12],P=y[1],C=y[5],w=y[9],A=y[13],R=y[2],I=y[6],L=y[10],O=y[14],D=y[3],V=y[7],B=y[11],U=y[15],W=x[0],F=x[4],G=x[8],M=x[12],N=x[1],k=x[5],z=x[9],H=x[13],$=x[2],X=x[6],Y=x[10],j=x[14],J=x[3],Q=x[7],Z=x[11],it=x[15];return this.setValues(S*W+E*N+b*$+T*J,P*W+C*N+w*$+A*J,R*W+I*N+L*$+O*J,D*W+V*N+B*$+U*J,S*F+E*k+b*X+T*Q,P*F+C*k+w*X+A*Q,R*F+I*k+L*X+O*Q,D*F+V*k+B*X+U*Q,S*G+E*z+b*Y+T*Z,P*G+C*z+w*Y+A*Z,R*G+I*z+L*Y+O*Z,D*G+V*z+B*Y+U*Z,S*M+E*H+b*j+T*it,P*M+C*H+w*j+A*it,R*M+I*H+L*j+O*it,D*M+V*H+B*j+U*it)},translate:function(f){return this.translateXYZ(f.x,f.y,f.z)},translateXYZ:function(f,v,y){var x=this.val;return x[12]=x[0]*f+x[4]*v+x[8]*y+x[12],x[13]=x[1]*f+x[5]*v+x[9]*y+x[13],x[14]=x[2]*f+x[6]*v+x[10]*y+x[14],x[15]=x[3]*f+x[7]*v+x[11]*y+x[15],this},scale:function(f){return this.scaleXYZ(f.x,f.y,f.z)},scaleXYZ:function(f,v,y){var x=this.val;return x[0]=x[0]*f,x[1]=x[1]*f,x[2]=x[2]*f,x[3]=x[3]*f,x[4]=x[4]*v,x[5]=x[5]*v,x[6]=x[6]*v,x[7]=x[7]*v,x[8]=x[8]*y,x[9]=x[9]*y,x[10]=x[10]*y,x[11]=x[11]*y,this},makeRotationAxis:function(f,v){var y=Math.cos(v),x=Math.sin(v),S=1-y,E=f.x,b=f.y,T=f.z,P=S*E,C=S*b;return this.setValues(P*E+y,P*b-x*T,P*T+x*b,0,P*b+x*T,C*b+y,C*T-x*E,0,P*T-x*b,C*T+x*E,S*T*T+y,0,0,0,0,1)},rotate:function(f,v){var y=this.val,x=v.x,S=v.y,E=v.z,b=Math.sqrt(x*x+S*S+E*E);if(Math.abs(b)<c)return this;b=1/b,x*=b,S*=b,E*=b;var T=Math.sin(f),P=Math.cos(f),C=1-P,w=y[0],A=y[1],R=y[2],I=y[3],L=y[4],O=y[5],D=y[6],V=y[7],B=y[8],U=y[9],W=y[10],F=y[11],G=y[12],M=y[13],N=y[14],k=y[15],z=x*x*C+P,H=S*x*C+E*T,$=E*x*C-S*T,X=x*S*C-E*T,Y=S*S*C+P,j=E*S*C+x*T,J=x*E*C+S*T,Q=S*E*C-x*T,Z=E*E*C+P;return this.setValues(w*z+L*H+B*$,A*z+O*H+U*$,R*z+D*H+W*$,I*z+V*H+F*$,w*X+L*Y+B*j,A*X+O*Y+U*j,R*X+D*Y+W*j,I*X+V*Y+F*j,w*J+L*Q+B*Z,A*J+O*Q+U*Z,R*J+D*Q+W*Z,I*J+V*Q+F*Z,G,M,N,k)},rotateX:function(f){var v=this.val,y=Math.sin(f),x=Math.cos(f),S=v[4],E=v[5],b=v[6],T=v[7],P=v[8],C=v[9],w=v[10],A=v[11];return v[4]=S*x+P*y,v[5]=E*x+C*y,v[6]=b*x+w*y,v[7]=T*x+A*y,v[8]=P*x-S*y,v[9]=C*x-E*y,v[10]=w*x-b*y,v[11]=A*x-T*y,this},rotateY:function(f){var v=this.val,y=Math.sin(f),x=Math.cos(f),S=v[0],E=v[1],b=v[2],T=v[3],P=v[8],C=v[9],w=v[10],A=v[11];return v[0]=S*x-P*y,v[1]=E*x-C*y,v[2]=b*x-w*y,v[3]=T*x-A*y,v[8]=S*y+P*x,v[9]=E*y+C*x,v[10]=b*y+w*x,v[11]=T*y+A*x,this},rotateZ:function(f){var v=this.val,y=Math.sin(f),x=Math.cos(f),S=v[0],E=v[1],b=v[2],T=v[3],P=v[4],C=v[5],w=v[6],A=v[7];return v[0]=S*x+P*y,v[1]=E*x+C*y,v[2]=b*x+w*y,v[3]=T*x+A*y,v[4]=P*x-S*y,v[5]=C*x-E*y,v[6]=w*x-b*y,v[7]=A*x-T*y,this},fromRotationTranslation:function(f,v){var y=f.x,x=f.y,S=f.z,E=f.w,b=y+y,T=x+x,P=S+S,C=y*b,w=y*T,A=y*P,R=x*T,I=x*P,L=S*P,O=E*b,D=E*T,V=E*P;return this.setValues(1-(R+L),w+V,A-D,0,w-V,1-(C+L),I+O,0,A+D,I-O,1-(C+R),0,v.x,v.y,v.z,1)},fromQuat:function(f){var v=f.x,y=f.y,x=f.z,S=f.w,E=v+v,b=y+y,T=x+x,P=v*E,C=v*b,w=v*T,A=y*b,R=y*T,I=x*T,L=S*E,O=S*b,D=S*T;return this.setValues(1-(A+I),C+D,w-O,0,C-D,1-(P+I),R+L,0,w+O,R-L,1-(P+A),0,0,0,0,1)},frustum:function(f,v,y,x,S,E){var b=1/(v-f),T=1/(x-y),P=1/(S-E);return this.setValues(S*2*b,0,0,0,0,S*2*T,0,0,(v+f)*b,(x+y)*T,(E+S)*P,-1,0,0,E*S*2*P,0)},perspective:function(f,v,y,x){var S=1/Math.tan(f/2),E=1/(y-x);return this.setValues(S/v,0,0,0,0,S,0,0,0,0,(x+y)*E,-1,0,0,2*x*y*E,0)},perspectiveLH:function(f,v,y,x){return this.setValues(2*y/f,0,0,0,0,2*y/v,0,0,0,0,-x/(y-x),1,0,0,y*x/(y-x),0)},ortho:function(f,v,y,x,S,E){var b=f-v,T=y-x,P=S-E;return b=b===0?b:1/b,T=T===0?T:1/T,P=P===0?P:1/P,this.setValues(-2*b,0,0,0,0,-2*T,0,0,0,0,2*P,0,(f+v)*b,(x+y)*T,(E+S)*P,1)},lookAtRH:function(f,v,y){var x=this.val;return h.subVectors(f,v),h.getLengthSquared()===0&&(h.z=1),h.normalize(),l.crossVectors(y,h),l.getLengthSquared()===0&&(Math.abs(y.z)===1?h.x+=1e-4:h.z+=1e-4,h.normalize(),l.crossVectors(y,h)),l.normalize(),p.crossVectors(h,l),x[0]=l.x,x[1]=l.y,x[2]=l.z,x[4]=p.x,x[5]=p.y,x[6]=p.z,x[8]=h.x,x[9]=h.y,x[10]=h.z,this},lookAt:function(f,v,y){var x=f.x,S=f.y,E=f.z,b=y.x,T=y.y,P=y.z,C=v.x,w=v.y,A=v.z;if(Math.abs(x-C)<c&&Math.abs(S-w)<c&&Math.abs(E-A)<c)return this.identity();var R=x-C,I=S-w,L=E-A,O=1/Math.sqrt(R*R+I*I+L*L);R*=O,I*=O,L*=O;var D=T*L-P*I,V=P*R-b*L,B=b*I-T*R;O=Math.sqrt(D*D+V*V+B*B),O?(O=1/O,D*=O,V*=O,B*=O):(D=0,V=0,B=0);var U=I*B-L*V,W=L*D-R*B,F=R*V-I*D;return O=Math.sqrt(U*U+W*W+F*F),O?(O=1/O,U*=O,W*=O,F*=O):(U=0,W=0,F=0),this.setValues(D,U,R,0,V,W,I,0,B,F,L,0,-(D*x+V*S+B*E),-(U*x+W*S+F*E),-(R*x+I*S+L*E),1)},yawPitchRoll:function(f,v,y){this.zero(),o.zero(),a.zero();var x=this.val,S=o.val,E=a.val,b=Math.sin(y),T=Math.cos(y);return x[10]=1,x[15]=1,x[0]=T,x[1]=b,x[4]=-b,x[5]=T,b=Math.sin(v),T=Math.cos(v),S[0]=1,S[15]=1,S[5]=T,S[10]=T,S[9]=-b,S[6]=b,b=Math.sin(f),T=Math.cos(f),E[5]=1,E[15]=1,E[0]=T,E[2]=-b,E[8]=b,E[10]=T,this.multiplyLocal(o),this.multiplyLocal(a),this},setWorldMatrix:function(f,v,y,x,S){return this.yawPitchRoll(f.y,f.x,f.z),o.scaling(y.x,y.y,y.z),a.xyz(v.x,v.y,v.z),this.multiplyLocal(o),this.multiplyLocal(a),x&&this.multiplyLocal(x),S&&this.multiplyLocal(S),this},multiplyToMat4:function(f,v){var y=this.val,x=f.val,S=y[0],E=y[1],b=y[2],T=y[3],P=y[4],C=y[5],w=y[6],A=y[7],R=y[8],I=y[9],L=y[10],O=y[11],D=y[12],V=y[13],B=y[14],U=y[15],W=x[0],F=x[1],G=x[2],M=x[3],N=x[4],k=x[5],z=x[6],H=x[7],$=x[8],X=x[9],Y=x[10],j=x[11],J=x[12],Q=x[13],Z=x[14],it=x[15];return v.setValues(W*S+F*P+G*R+M*D,F*E+F*C+G*I+M*V,G*b+F*w+G*L+M*B,M*T+F*A+G*O+M*U,N*S+k*P+z*R+H*D,N*E+k*C+z*I+H*V,N*b+k*w+z*L+H*B,N*T+k*A+z*O+H*U,$*S+X*P+Y*R+j*D,$*E+X*C+Y*I+j*V,$*b+X*w+Y*L+j*B,$*T+X*A+Y*O+j*U,J*S+Q*P+Z*R+it*D,J*E+Q*C+Z*I+it*V,J*b+Q*w+Z*L+it*B,J*T+Q*A+Z*O+it*U)},fromRotationXYTranslation:function(f,v,y){var x=v.x,S=v.y,E=v.z,b=Math.sin(f.x),T=Math.cos(f.x),P=Math.sin(f.y),C=Math.cos(f.y),w=x,A=S,R=E,I=-b,L=0-I*P,O=0-T*P,D=I*C,V=T*C;return y||(w=C*x+P*E,A=L*x+T*S+D*E,R=O*x+b*S+V*E),this.setValues(C,L,O,0,0,T,b,0,P,D,V,0,w,A,R,1)},getMaxScaleOnAxis:function(){var f=this.val,v=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],y=f[4]*f[4]+f[5]*f[5]+f[6]*f[6],x=f[8]*f[8]+f[9]*f[9]+f[10]*f[10];return Math.sqrt(Math.max(v,y,x))}}),o=new s,a=new s,l=new g,p=new g,h=new g;r.exports=s},69635:r=>{var m=function(e,u,g){return Math.min(e+u,g)};r.exports=m},37394:r=>{var m=function(e){var u=e.length;if(u===0)return 0;e.sort(function(c,s){return c-s});var g=Math.floor(u/2);return u%2===0?(e[g]+e[g-1])/2:e[g]};r.exports=m},17259:r=>{var m=function(e,u,g){return Math.max(e-u,g)};r.exports=m},61820:r=>{var m=function(e,u,g,c){g===void 0&&(g=u+1);var s=(e-u)/(g-u);return s>1?c!==void 0?(s=(c-e)/(c-g),s<0&&(s=0)):s=1:s<0&&(s=0),s};r.exports=m},75003:(r,m,e)=>{var u=e(56694),g=e(5341),c=e(72283),s=e(70015),o=1e-6,a=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),p=new s(1,0,0),h=new s(0,1,0),f=new s,v=new g,y=new u({initialize:function(S,E,b,T){this.onChangeCallback=c,this.set(S,E,b,T)},x:{get:function(){return this._x},set:function(x){this._x=x,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(x){this._y=x,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(x){this._z=x,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(x){this._w=x,this.onChangeCallback(this)}},copy:function(x){return this.set(x)},set:function(x,S,E,b,T){return T===void 0&&(T=!0),typeof x=="object"?(this._x=x.x||0,this._y=x.y||0,this._z=x.z||0,this._w=x.w||0):(this._x=x||0,this._y=S||0,this._z=E||0,this._w=b||0),T&&this.onChangeCallback(this),this},add:function(x){return this._x+=x.x,this._y+=x.y,this._z+=x.z,this._w+=x.w,this.onChangeCallback(this),this},subtract:function(x){return this._x-=x.x,this._y-=x.y,this._z-=x.z,this._w-=x.w,this.onChangeCallback(this),this},scale:function(x){return this._x*=x,this._y*=x,this._z*=x,this._w*=x,this.onChangeCallback(this),this},length:function(){var x=this.x,S=this.y,E=this.z,b=this.w;return Math.sqrt(x*x+S*S+E*E+b*b)},lengthSq:function(){var x=this.x,S=this.y,E=this.z,b=this.w;return x*x+S*S+E*E+b*b},normalize:function(){var x=this.x,S=this.y,E=this.z,b=this.w,T=x*x+S*S+E*E+b*b;return T>0&&(T=1/Math.sqrt(T),this._x=x*T,this._y=S*T,this._z=E*T,this._w=b*T),this.onChangeCallback(this),this},dot:function(x){return this.x*x.x+this.y*x.y+this.z*x.z+this.w*x.w},lerp:function(x,S){S===void 0&&(S=0);var E=this.x,b=this.y,T=this.z,P=this.w;return this.set(E+S*(x.x-E),b+S*(x.y-b),T+S*(x.z-T),P+S*(x.w-P))},rotationTo:function(x,S){var E=x.x*S.x+x.y*S.y+x.z*S.z;return E<-.999999?(f.copy(p).cross(x).length()<o&&f.copy(h).cross(x),f.normalize(),this.setAxisAngle(f,Math.PI)):E>.999999?this.set(0,0,0,1):(f.copy(x).cross(S),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+E,this.normalize())},setAxes:function(x,S,E){var b=v.val;return b[0]=S.x,b[3]=S.y,b[6]=S.z,b[1]=E.x,b[4]=E.y,b[7]=E.z,b[2]=-x.x,b[5]=-x.y,b[8]=-x.z,this.fromMat3(v).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(x,S){S=S*.5;var E=Math.sin(S);return this.set(E*x.x,E*x.y,E*x.z,Math.cos(S))},multiply:function(x){var S=this.x,E=this.y,b=this.z,T=this.w,P=x.x,C=x.y,w=x.z,A=x.w;return this.set(S*A+T*P+E*w-b*C,E*A+T*C+b*P-S*w,b*A+T*w+S*C-E*P,T*A-S*P-E*C-b*w)},slerp:function(x,S){var E=this.x,b=this.y,T=this.z,P=this.w,C=x.x,w=x.y,A=x.z,R=x.w,I=E*C+b*w+T*A+P*R;I<0&&(I=-I,C=-C,w=-w,A=-A,R=-R);var L=1-S,O=S;if(1-I>o){var D=Math.acos(I),V=Math.sin(D);L=Math.sin((1-S)*D)/V,O=Math.sin(S*D)/V}return this.set(L*E+O*C,L*b+O*w,L*T+O*A,L*P+O*R)},invert:function(){var x=this.x,S=this.y,E=this.z,b=this.w,T=x*x+S*S+E*E+b*b,P=T?1/T:0;return this.set(-x*P,-S*P,-E*P,b*P)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(x){x*=.5;var S=this.x,E=this.y,b=this.z,T=this.w,P=Math.sin(x),C=Math.cos(x);return this.set(S*C+T*P,E*C+b*P,b*C-E*P,T*C-S*P)},rotateY:function(x){x*=.5;var S=this.x,E=this.y,b=this.z,T=this.w,P=Math.sin(x),C=Math.cos(x);return this.set(S*C-b*P,E*C+T*P,b*C+S*P,T*C-E*P)},rotateZ:function(x){x*=.5;var S=this.x,E=this.y,b=this.z,T=this.w,P=Math.sin(x),C=Math.cos(x);return this.set(S*C+E*P,E*C-S*P,b*C+T*P,T*C-b*P)},calculateW:function(){var x=this.x,S=this.y,E=this.z;return this.w=-Math.sqrt(1-x*x-S*S-E*E),this},setFromEuler:function(x,S){var E=x.x/2,b=x.y/2,T=x.z/2,P=Math.cos(E),C=Math.cos(b),w=Math.cos(T),A=Math.sin(E),R=Math.sin(b),I=Math.sin(T);switch(x.order){case"XYZ":{this.set(A*C*w+P*R*I,P*R*w-A*C*I,P*C*I+A*R*w,P*C*w-A*R*I,S);break}case"YXZ":{this.set(A*C*w+P*R*I,P*R*w-A*C*I,P*C*I-A*R*w,P*C*w+A*R*I,S);break}case"ZXY":{this.set(A*C*w-P*R*I,P*R*w+A*C*I,P*C*I+A*R*w,P*C*w-A*R*I,S);break}case"ZYX":{this.set(A*C*w-P*R*I,P*R*w+A*C*I,P*C*I-A*R*w,P*C*w+A*R*I,S);break}case"YZX":{this.set(A*C*w+P*R*I,P*R*w+A*C*I,P*C*I-A*R*w,P*C*w-A*R*I,S);break}case"XZY":{this.set(A*C*w-P*R*I,P*R*w-A*C*I,P*C*I+A*R*w,P*C*w+A*R*I,S);break}}return this},setFromRotationMatrix:function(x){var S=x.val,E=S[0],b=S[4],T=S[8],P=S[1],C=S[5],w=S[9],A=S[2],R=S[6],I=S[10],L=E+C+I,O;return L>0?(O=.5/Math.sqrt(L+1),this.set((R-w)*O,(T-A)*O,(P-b)*O,.25/O)):E>C&&E>I?(O=2*Math.sqrt(1+E-C-I),this.set(.25*O,(b+P)/O,(T+A)/O,(R-w)/O)):C>I?(O=2*Math.sqrt(1+C-E-I),this.set((b+P)/O,.25*O,(w+R)/O,(T-A)/O)):(O=2*Math.sqrt(1+I-E-C),this.set((T+A)/O,(w+R)/O,.25*O,(P-b)/O)),this},fromMat3:function(x){var S=x.val,E=S[0]+S[4]+S[8],b;if(E>0)b=Math.sqrt(E+1),this.w=.5*b,b=.5/b,this._x=(S[7]-S[5])*b,this._y=(S[2]-S[6])*b,this._z=(S[3]-S[1])*b;else{var T=0;S[4]>S[0]&&(T=1),S[8]>S[T*3+T]&&(T=2);var P=a[T],C=a[P];b=Math.sqrt(S[T*3+T]-S[P*3+P]-S[C*3+C]+1),l[T]=.5*b,b=.5/b,l[P]=(S[P*3+T]+S[T*3+P])*b,l[C]=(S[C*3+T]+S[T*3+C])*b,this._x=l[0],this._y=l[1],this._z=l[2],this._w=(S[C*3+P]-S[P*3+C])*b}return this.onChangeCallback(this),this}});r.exports=y},23701:(r,m,e)=>{var u=e(83392),g=function(c){return c*u.RAD_TO_DEG};r.exports=g},16906:r=>{var m=function(e,u){u===void 0&&(u=1);var g=Math.random()*2*Math.PI;return e.x=Math.cos(g)*u,e.y=Math.sin(g)*u,e};r.exports=m},52417:r=>{var m=function(e,u){u===void 0&&(u=1);var g=Math.random()*2*Math.PI,c=Math.random()*2-1,s=Math.sqrt(1-c*c)*u;return e.x=Math.cos(g)*s,e.y=Math.sin(g)*s,e.z=c*u,e};r.exports=m},17915:r=>{var m=function(e,u){return u===void 0&&(u=1),e.x=(Math.random()*2-1)*u,e.y=(Math.random()*2-1)*u,e.z=(Math.random()*2-1)*u,e.w=(Math.random()*2-1)*u,e};r.exports=m},52257:r=>{var m=function(e,u){var g=e.x,c=e.y;return e.x=g*Math.cos(u)-c*Math.sin(u),e.y=g*Math.sin(u)+c*Math.cos(u),e};r.exports=m},2386:r=>{var m=function(e,u,g,c){var s=Math.cos(c),o=Math.sin(c),a=e.x-u,l=e.y-g;return e.x=a*s-l*o+u,e.y=a*o+l*s+g,e};r.exports=m},72395:r=>{var m=function(e,u,g,c,s){var o=c+Math.atan2(e.y-g,e.x-u);return e.x=u+s*Math.cos(o),e.y=g+s*Math.sin(o),e};r.exports=m},41061:r=>{var m=function(e,u,g,c,s){return e.x=u+s*Math.cos(c),e.y=g+s*Math.sin(c),e};r.exports=m},93709:(r,m,e)=>{var u=e(70015),g=e(16650),c=e(75003),s=new g,o=new c,a=new u,l=function(p,h,f){return o.setAxisAngle(h,f),s.fromRotationTranslation(o,a.set(0,0,0)),p.transformMat4(s)};r.exports=l},67233:r=>{var m=function(e){return e>0?Math.ceil(e):Math.floor(e)};r.exports=m},64333:r=>{var m=function(e,u,g){u===void 0&&(u=0),g===void 0&&(g=10);var c=Math.pow(g,-u);return Math.round(e*c)/c};r.exports=m},59533:r=>{var m=function(e,u,g,c){u===void 0&&(u=1),g===void 0&&(g=1),c===void 0&&(c=1),c*=Math.PI/e;for(var s=[],o=[],a=0;a<e;a++)g-=u*c,u+=g*c,s[a]=g,o[a]=u;return{sin:o,cos:s,length:e}};r.exports=m},5514:r=>{var m=function(e,u,g){return e<=u?0:e>=g?1:(e=(e-u)/(g-u),e*e*(3-2*e))};r.exports=m},87736:r=>{var m=function(e,u,g){return e=Math.max(0,Math.min(1,(e-u)/(g-u))),e*e*e*(e*(e*6-15)+10)};r.exports=m},55805:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a){a===void 0&&(a=new u);var l=0,p=0,h=s*o;return c>0&&c<=h&&(c>s-1?(p=Math.floor(c/s),l=c-p*s):l=c),a.set(l,p)};r.exports=g},64462:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l,p,h,f){f===void 0&&(f=new u);var v=Math.sin(l),y=Math.cos(l),x=y*p,S=v*p,E=-v*h,b=y*h,T=1/(x*b+E*-S);return f.x=b*T*c+-E*T*s+(a*E-o*b)*T,f.y=x*T*s+-S*T*c+(-a*x+o*S)*T,f};r.exports=g},93736:(r,m,e)=>{var u=e(56694),g=e(88456),c=new u({initialize:function(o,a){this.x=0,this.y=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0):(a===void 0&&(a=o),this.x=o||0,this.y=a||0)},clone:function(){return new c(this.x,this.y)},copy:function(s){return this.x=s.x||0,this.y=s.y||0,this},setFromObject:function(s){return this.x=s.x||0,this.y=s.y||0,this},set:function(s,o){return o===void 0&&(o=s),this.x=s,this.y=o,this},setTo:function(s,o){return this.set(s,o)},setToPolar:function(s,o){return o==null&&(o=1),this.x=Math.cos(s)*o,this.y=Math.sin(s)*o,this},equals:function(s){return this.x===s.x&&this.y===s.y},fuzzyEquals:function(s,o){return g(this.x,s.x,o)&&g(this.y,s.y,o)},angle:function(){var s=Math.atan2(this.y,this.x);return s<0&&(s+=2*Math.PI),s},setAngle:function(s){return this.setToPolar(s,this.length())},add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.x-=s.x,this.y-=s.y,this},multiply:function(s){return this.x*=s.x,this.y*=s.y,this},scale:function(s){return isFinite(s)?(this.x*=s,this.y*=s):(this.x=0,this.y=0),this},divide:function(s){return this.x/=s.x,this.y/=s.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(s){var o=s.x-this.x,a=s.y-this.y;return Math.sqrt(o*o+a*a)},distanceSq:function(s){var o=s.x-this.x,a=s.y-this.y;return o*o+a*a},length:function(){var s=this.x,o=this.y;return Math.sqrt(s*s+o*o)},setLength:function(s){return this.normalize().scale(s)},lengthSq:function(){var s=this.x,o=this.y;return s*s+o*o},normalize:function(){var s=this.x,o=this.y,a=s*s+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=s*a,this.y=o*a),this},normalizeRightHand:function(){var s=this.x;return this.x=this.y*-1,this.y=s,this},normalizeLeftHand:function(){var s=this.x;return this.x=this.y,this.y=s*-1,this},dot:function(s){return this.x*s.x+this.y*s.y},cross:function(s){return this.x*s.y-this.y*s.x},lerp:function(s,o){o===void 0&&(o=0);var a=this.x,l=this.y;return this.x=a+o*(s.x-a),this.y=l+o*(s.y-l),this},transformMat3:function(s){var o=this.x,a=this.y,l=s.val;return this.x=l[0]*o+l[3]*a+l[6],this.y=l[1]*o+l[4]*a+l[7],this},transformMat4:function(s){var o=this.x,a=this.y,l=s.val;return this.x=l[0]*o+l[4]*a+l[12],this.y=l[1]*o+l[5]*a+l[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(s){var o=this.length();return o&&o>s&&this.scale(s/o),this},reflect:function(s){return s=s.clone().normalize(),this.subtract(s.scale(2*this.dot(s)))},mirror:function(s){return this.reflect(s).negate()},rotate:function(s){var o=Math.cos(s),a=Math.sin(s);return this.set(o*this.x-a*this.y,a*this.x+o*this.y)},project:function(s){var o=this.dot(s)/s.dot(s);return this.copy(s).scale(o)}});c.ZERO=new c,c.RIGHT=new c(1,0),c.LEFT=new c(-1,0),c.UP=new c(0,-1),c.DOWN=new c(0,1),c.ONE=new c(1,1),r.exports=c},70015:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a){this.x=0,this.y=0,this.z=0,typeof s=="object"?(this.x=s.x||0,this.y=s.y||0,this.z=s.z||0):(this.x=s||0,this.y=o||0,this.z=a||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this},max:function(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(c,s){return this.x=c.x+s.x,this.y=c.y+s.y,this.z=c.z+s.z,this},crossVectors:function(c,s){var o=c.x,a=c.y,l=c.z,p=s.x,h=s.y,f=s.z;return this.x=a*f-l*h,this.y=l*p-o*f,this.z=o*h-a*p,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this},set:function(c,s,o){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):(this.x=c||0,this.y=s||0,this.z=o||0),this},setFromMatrixPosition:function(c){return this.fromArray(c.val,12)},setFromMatrixColumn:function(c,s){return this.fromArray(c.val,s*4)},fromArray:function(c,s){return s===void 0&&(s=0),this.x=c[s],this.y=c[s+1],this.z=c[s+2],this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this},addScalar:function(c){return this.x+=c,this.y+=c,this.z+=c,this},addScale:function(c,s){return this.x+=c.x*s,this.y+=c.y*s,this.z+=c.z*s||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this},scale:function(c){return isFinite(c)?(this.x*=c,this.y*=c,this.z*=c):(this.x=0,this.y=0,this.z=0),this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(c){var s=c.x-this.x,o=c.y-this.y,a=c.z-this.z||0;return Math.sqrt(s*s+o*o+a*a)},distanceSq:function(c){var s=c.x-this.x,o=c.y-this.y,a=c.z-this.z||0;return s*s+o*o+a*a},length:function(){var c=this.x,s=this.y,o=this.z;return Math.sqrt(c*c+s*s+o*o)},lengthSq:function(){var c=this.x,s=this.y,o=this.z;return c*c+s*s+o*o},normalize:function(){var c=this.x,s=this.y,o=this.z,a=c*c+s*s+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=c*a,this.y=s*a,this.z=o*a),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z},cross:function(c){var s=this.x,o=this.y,a=this.z,l=c.x,p=c.y,h=c.z;return this.x=o*h-a*p,this.y=a*l-s*h,this.z=s*p-o*l,this},lerp:function(c,s){s===void 0&&(s=0);var o=this.x,a=this.y,l=this.z;return this.x=o+s*(c.x-o),this.y=a+s*(c.y-a),this.z=l+s*(c.z-l),this},applyMatrix3:function(c){var s=this.x,o=this.y,a=this.z,l=c.val;return this.x=l[0]*s+l[3]*o+l[6]*a,this.y=l[1]*s+l[4]*o+l[7]*a,this.z=l[2]*s+l[5]*o+l[8]*a,this},applyMatrix4:function(c){var s=this.x,o=this.y,a=this.z,l=c.val,p=1/(l[3]*s+l[7]*o+l[11]*a+l[15]);return this.x=(l[0]*s+l[4]*o+l[8]*a+l[12])*p,this.y=(l[1]*s+l[5]*o+l[9]*a+l[13])*p,this.z=(l[2]*s+l[6]*o+l[10]*a+l[14])*p,this},transformMat3:function(c){var s=this.x,o=this.y,a=this.z,l=c.val;return this.x=s*l[0]+o*l[3]+a*l[6],this.y=s*l[1]+o*l[4]+a*l[7],this.z=s*l[2]+o*l[5]+a*l[8],this},transformMat4:function(c){var s=this.x,o=this.y,a=this.z,l=c.val;return this.x=l[0]*s+l[4]*o+l[8]*a+l[12],this.y=l[1]*s+l[5]*o+l[9]*a+l[13],this.z=l[2]*s+l[6]*o+l[10]*a+l[14],this},transformCoordinates:function(c){var s=this.x,o=this.y,a=this.z,l=c.val,p=s*l[0]+o*l[4]+a*l[8]+l[12],h=s*l[1]+o*l[5]+a*l[9]+l[13],f=s*l[2]+o*l[6]+a*l[10]+l[14],v=s*l[3]+o*l[7]+a*l[11]+l[15];return this.x=p/v,this.y=h/v,this.z=f/v,this},transformQuat:function(c){var s=this.x,o=this.y,a=this.z,l=c.x,p=c.y,h=c.z,f=c.w,v=f*s+p*a-h*o,y=f*o+h*s-l*a,x=f*a+l*o-p*s,S=-l*s-p*o-h*a;return this.x=v*f+S*-l+y*-h-x*-p,this.y=y*f+S*-p+x*-l-v*-h,this.z=x*f+S*-h+v*-p-y*-l,this},project:function(c){var s=this.x,o=this.y,a=this.z,l=c.val,p=l[0],h=l[1],f=l[2],v=l[3],y=l[4],x=l[5],S=l[6],E=l[7],b=l[8],T=l[9],P=l[10],C=l[11],w=l[12],A=l[13],R=l[14],I=l[15],L=1/(s*v+o*E+a*C+I);return this.x=(s*p+o*y+a*b+w)*L,this.y=(s*h+o*x+a*T+A)*L,this.z=(s*f+o*S+a*P+R)*L,this},projectViewMatrix:function(c,s){return this.applyMatrix4(c).applyMatrix4(s)},unprojectViewMatrix:function(c,s){return this.applyMatrix4(c).applyMatrix4(s)},unproject:function(c,s){var o=c.x,a=c.y,l=c.z,p=c.w,h=this.x-o,f=p-this.y-1-a,v=this.z;return this.x=2*h/l-1,this.y=2*f/p-1,this.z=2*v-1,this.project(s)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),r.exports=g},51729:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a,l){this.x=0,this.y=0,this.z=0,this.w=0,typeof s=="object"?(this.x=s.x||0,this.y=s.y||0,this.z=s.z||0,this.w=s.w||0):(this.x=s||0,this.y=o||0,this.z=a||0,this.w=l||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this.w=c.w||0,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z&&this.w===c.w},set:function(c,s,o,a){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this.w=c.w||0):(this.x=c||0,this.y=s||0,this.z=o||0,this.w=a||0),this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this.w+=c.w||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this.w-=c.w||0,this},scale:function(c){return this.x*=c,this.y*=c,this.z*=c,this.w*=c,this},length:function(){var c=this.x,s=this.y,o=this.z,a=this.w;return Math.sqrt(c*c+s*s+o*o+a*a)},lengthSq:function(){var c=this.x,s=this.y,o=this.z,a=this.w;return c*c+s*s+o*o+a*a},normalize:function(){var c=this.x,s=this.y,o=this.z,a=this.w,l=c*c+s*s+o*o+a*a;return l>0&&(l=1/Math.sqrt(l),this.x=c*l,this.y=s*l,this.z=o*l,this.w=a*l),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,s){s===void 0&&(s=0);var o=this.x,a=this.y,l=this.z,p=this.w;return this.x=o+s*(c.x-o),this.y=a+s*(c.y-a),this.z=l+s*(c.z-l),this.w=p+s*(c.w-p),this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this.w*=c.w||1,this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this.w/=c.w||1,this},distance:function(c){var s=c.x-this.x,o=c.y-this.y,a=c.z-this.z||0,l=c.w-this.w||0;return Math.sqrt(s*s+o*o+a*a+l*l)},distanceSq:function(c){var s=c.x-this.x,o=c.y-this.y,a=c.z-this.z||0,l=c.w-this.w||0;return s*s+o*o+a*a+l*l},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(c){var s=this.x,o=this.y,a=this.z,l=this.w,p=c.val;return this.x=p[0]*s+p[4]*o+p[8]*a+p[12]*l,this.y=p[1]*s+p[5]*o+p[9]*a+p[13]*l,this.z=p[2]*s+p[6]*o+p[10]*a+p[14]*l,this.w=p[3]*s+p[7]*o+p[11]*a+p[15]*l,this},transformQuat:function(c){var s=this.x,o=this.y,a=this.z,l=c.x,p=c.y,h=c.z,f=c.w,v=f*s+p*a-h*o,y=f*o+h*s-l*a,x=f*a+l*o-p*s,S=-l*s-p*o-h*a;return this.x=v*f+S*-l+y*-h-x*-p,this.y=y*f+S*-p+x*-l-v*-h,this.z=x*f+S*-h+v*-p-y*-l,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,r.exports=g},9557:r=>{var m=function(e,u,g){return Math.abs(e-u)<=g};r.exports=m},1071:r=>{var m=function(e,u,g){if(e>=u&&e<=g)return e;var c=g-u;return u+((e-u)%c+c)%c};r.exports=m},90447:r=>{var m=function(e,u,g,c){return Math.atan2(c-u,g-e)};r.exports=m},94240:r=>{var m=function(e,u){return Math.atan2(u.y-e.y,u.x-e.x)};r.exports=m},84066:r=>{var m=function(e,u){return Math.atan2(u.x-e.x,u.y-e.y)};r.exports=m},9678:r=>{var m=function(e,u,g,c){return Math.atan2(g-e,c-u)};r.exports=m},76861:(r,m,e)=>{var u=e(83392),g=function(c){return c>Math.PI&&(c-=u.PI2),Math.abs(((c+u.TAU)%u.PI2-u.PI2)%u.PI2)};r.exports=g},37570:r=>{var m=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};r.exports=m},87597:(r,m,e)=>{var u=e(61616),g=function(){return u(-Math.PI,Math.PI)};r.exports=g},74493:(r,m,e)=>{var u=e(61616),g=function(){return u(-180,180)};r.exports=g},19049:(r,m,e)=>{var u=e(37570),g=function(c){return u(c+Math.PI)};r.exports=g},90612:(r,m,e)=>{var u=e(83392),g=function(c,s,o){return o===void 0&&(o=.05),c===s||(Math.abs(s-c)<=o||Math.abs(s-c)>=u.PI2-o?c=s:(Math.abs(s-c)>Math.PI&&(s<c?s+=u.PI2:s-=u.PI2),s>c?c+=o:s<c&&(c-=o))),c};r.exports=g},93954:r=>{var m=function(e,u){var g=u-e;if(g===0)return 0;var c=Math.floor((g- -180)/360);return g-c*360};r.exports=m},35786:(r,m,e)=>{var u=e(1071),g=function(c){return u(c,-Math.PI,Math.PI)};r.exports=g},62138:(r,m,e)=>{var u=e(1071),g=function(c){return u(c,-180,180)};r.exports=g},22153:(r,m,e)=>{r.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}},83392:r=>{var m={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};r.exports=m},53996:r=>{var m=function(e,u,g,c){var s=e-g,o=u-c;return Math.sqrt(s*s+o*o)};r.exports=m},92951:r=>{var m=function(e,u){var g=e.x-u.x,c=e.y-u.y;return Math.sqrt(g*g+c*c)};r.exports=m},12161:r=>{var m=function(e,u){var g=e.x-u.x,c=e.y-u.y;return g*g+c*c};r.exports=m},38057:r=>{var m=function(e,u,g,c){return Math.max(Math.abs(e-g),Math.abs(u-c))};r.exports=m},33297:r=>{var m=function(e,u,g,c,s){return s===void 0&&(s=2),Math.sqrt(Math.pow(g-e,s)+Math.pow(c-u,s))};r.exports=m},90366:r=>{var m=function(e,u,g,c){return Math.abs(e-g)+Math.abs(u-c)};r.exports=m},35032:r=>{var m=function(e,u,g,c){var s=e-g,o=u-c;return s*s+o*o};r.exports=m},10130:(r,m,e)=>{r.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}},35060:(r,m,e)=>{var u=e(25265),g=e(57428),c=e(73214),s=e(71778),o=e(36468),a=e(88258),l=e(52910),p=e(67799),h=e(74083),f=e(92284),v=e(28035),y=e(8754);r.exports={Power0:l,Power1:p.Out,Power2:s.Out,Power3:h.Out,Power4:f.Out,Linear:l,Quad:p.Out,Cubic:s.Out,Quart:h.Out,Quint:f.Out,Sine:v.Out,Expo:a.Out,Circ:c.Out,Elastic:o.Out,Back:u.Out,Bounce:g.Out,Stepped:y,"Quad.easeIn":p.In,"Cubic.easeIn":s.In,"Quart.easeIn":h.In,"Quint.easeIn":f.In,"Sine.easeIn":v.In,"Expo.easeIn":a.In,"Circ.easeIn":c.In,"Elastic.easeIn":o.In,"Back.easeIn":u.In,"Bounce.easeIn":g.In,"Quad.easeOut":p.Out,"Cubic.easeOut":s.Out,"Quart.easeOut":h.Out,"Quint.easeOut":f.Out,"Sine.easeOut":v.Out,"Expo.easeOut":a.Out,"Circ.easeOut":c.Out,"Elastic.easeOut":o.Out,"Back.easeOut":u.Out,"Bounce.easeOut":g.Out,"Quad.easeInOut":p.InOut,"Cubic.easeInOut":s.InOut,"Quart.easeInOut":h.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":v.InOut,"Expo.easeInOut":a.InOut,"Circ.easeInOut":c.InOut,"Elastic.easeInOut":o.InOut,"Back.easeInOut":u.InOut,"Bounce.easeInOut":g.InOut}},25860:r=>{var m=function(e,u){return u===void 0&&(u=1.70158),e*e*((u+1)*e-u)};r.exports=m},45264:r=>{var m=function(e,u){u===void 0&&(u=1.70158);var g=u*1.525;return(e*=2)<1?.5*(e*e*((g+1)*e-g)):.5*((e-=2)*e*((g+1)*e+g)+2)};r.exports=m},36699:r=>{var m=function(e,u){return u===void 0&&(u=1.70158),--e*e*((u+1)*e+u)+1};r.exports=m},25265:(r,m,e)=>{r.exports={In:e(25860),Out:e(36699),InOut:e(45264)}},62191:r=>{var m=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};r.exports=m},24799:r=>{var m=function(e){var u=!1;return e<.5?(e=1-e*2,u=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,u?(1-e)*.5:e*.5+.5};r.exports=m},60819:r=>{var m=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};r.exports=m},57428:(r,m,e)=>{r.exports={In:e(62191),Out:e(60819),InOut:e(24799)}},86855:r=>{var m=function(e){return 1-Math.sqrt(1-e*e)};r.exports=m},7280:r=>{var m=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};r.exports=m},18058:r=>{var m=function(e){return Math.sqrt(1- --e*e)};r.exports=m},73214:(r,m,e)=>{r.exports={In:e(86855),Out:e(18058),InOut:e(7280)}},91532:r=>{var m=function(e){return e*e*e};r.exports=m},63180:r=>{var m=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};r.exports=m},16518:r=>{var m=function(e){return--e*e*e+1};r.exports=m},71778:(r,m,e)=>{r.exports={In:e(91532),Out:e(16518),InOut:e(63180)}},24729:r=>{var m=function(e,u,g){if(u===void 0&&(u=.1),g===void 0&&(g=.1),e===0)return 0;if(e===1)return 1;var c=g/4;return u<1?u=1:c=g*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/g))};r.exports=m},50325:r=>{var m=function(e,u,g){if(u===void 0&&(u=.1),g===void 0&&(g=.1),e===0)return 0;if(e===1)return 1;var c=g/4;return u<1?u=1:c=g*Math.asin(1/u)/(2*Math.PI),(e*=2)<1?-.5*(u*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/g)):u*Math.pow(2,-10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/g)*.5+1};r.exports=m},84074:r=>{var m=function(e,u,g){if(u===void 0&&(u=.1),g===void 0&&(g=.1),e===0)return 0;if(e===1)return 1;var c=g/4;return u<1?u=1:c=g*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*e)*Math.sin((e-c)*(2*Math.PI)/g)+1};r.exports=m},36468:(r,m,e)=>{r.exports={In:e(24729),Out:e(84074),InOut:e(50325)}},95638:r=>{var m=function(e){return Math.pow(2,10*(e-1))-.001};r.exports=m},10357:r=>{var m=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};r.exports=m},14894:r=>{var m=function(e){return 1-Math.pow(2,-10*e)};r.exports=m},88258:(r,m,e)=>{r.exports={In:e(95638),Out:e(14894),InOut:e(10357)}},33063:(r,m,e)=>{r.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}},43927:r=>{var m=function(e){return e};r.exports=m},52910:(r,m,e)=>{r.exports=e(43927)},77471:r=>{var m=function(e){return e*e};r.exports=m},83863:r=>{var m=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};r.exports=m},44383:r=>{var m=function(e){return e*(2-e)};r.exports=m},67799:(r,m,e)=>{r.exports={In:e(77471),Out:e(44383),InOut:e(83863)}},48311:r=>{var m=function(e){return e*e*e*e};r.exports=m},55248:r=>{var m=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};r.exports=m},23135:r=>{var m=function(e){return 1- --e*e*e*e};r.exports=m},74083:(r,m,e)=>{r.exports={In:e(48311),Out:e(23135),InOut:e(55248)}},7313:r=>{var m=function(e){return e*e*e*e*e};r.exports=m},98759:r=>{var m=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};r.exports=m},26670:r=>{var m=function(e){return--e*e*e*e*e+1};r.exports=m},92284:(r,m,e)=>{r.exports={In:e(7313),Out:e(26670),InOut:e(98759)}},52929:r=>{var m=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};r.exports=m},66333:r=>{var m=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};r.exports=m},37255:r=>{var m=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};r.exports=m},28035:(r,m,e)=>{r.exports={In:e(52929),Out:e(37255),InOut:e(66333)}},52770:r=>{var m=function(e,u){return u===void 0&&(u=1),e<=0?0:e>=1?1:((u*e|0)+1)*(1/u)};r.exports=m},8754:(r,m,e)=>{r.exports=e(52770)},17247:r=>{var m=function(e,u){return u===void 0&&(u=1e-4),Math.ceil(e-u)};r.exports=m},88456:r=>{var m=function(e,u,g){return g===void 0&&(g=1e-4),Math.abs(e-u)<g};r.exports=m},61824:r=>{var m=function(e,u){return u===void 0&&(u=1e-4),Math.floor(e+u)};r.exports=m},41935:r=>{var m=function(e,u,g){return g===void 0&&(g=1e-4),e>u-g};r.exports=m},54726:r=>{var m=function(e,u,g){return g===void 0&&(g=1e-4),e<u+g};r.exports=m},52778:(r,m,e)=>{r.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}},5923:(r,m,e)=>{var u=e(83392),g=e(98611),c={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};c=g(!1,c,u),r.exports=c},63210:(r,m,e)=>{var u=e(22824),g=function(c,s){for(var o=0,a=c.length-1,l=0;l<=a;l++)o+=Math.pow(1-s,a-l)*Math.pow(s,l)*c[l]*u(a,l);return o};r.exports=g},88332:(r,m,e)=>{var u=e(14976),g=function(c,s){var o=c.length-1,a=o*s,l=Math.floor(a);return c[0]===c[o]?(s<0&&(l=Math.floor(a=o*(1+s))),u(a-l,c[(l-1+o)%o],c[l],c[(l+1)%o],c[(l+2)%o])):s<0?c[0]-(u(-a,c[0],c[0],c[1],c[1])-c[0]):s>1?c[o]-(u(a-o,c[o],c[o],c[o-1],c[o-1])-c[o]):u(a-l,c[l?l-1:0],c[l],c[o<l+1?o:l+1],c[o<l+2?o:l+2])};r.exports=g},34631:r=>{function m(s,o){var a=1-s;return a*a*a*o}function e(s,o){var a=1-s;return 3*a*a*s*o}function u(s,o){return 3*(1-s)*s*s*o}function g(s,o){return s*s*s*o}var c=function(s,o,a,l,p){return m(s,o)+e(s,a)+u(s,l)+g(s,p)};r.exports=c},47614:(r,m,e)=>{var u=e(42798),g=function(c,s){var o=c.length-1,a=o*s,l=Math.floor(a);return s<0?u(c[0],c[1],a):s>1?u(c[o],c[o-1],o-a):u(c[l],c[l+1>o?o:l+1],a-l)};r.exports=g},16252:r=>{function m(c,s){var o=1-c;return o*o*s}function e(c,s){return 2*(1-c)*c*s}function u(c,s){return c*c*s}var g=function(c,s,o,a){return m(c,s)+e(c,o)+u(c,a)};r.exports=g},44521:(r,m,e)=>{var u=e(5514),g=function(c,s,o){return s+(o-s)*u(c,0,1)};r.exports=g},45507:(r,m,e)=>{var u=e(87736),g=function(c,s,o){return s+(o-s)*u(c,0,1)};r.exports=g},48528:(r,m,e)=>{r.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}},3504:r=>{var m=function(e){var u=Math.log(e)/.6931471805599453;return 1<<Math.ceil(u)};r.exports=m},28621:r=>{var m=function(e,u){return e>0&&(e&e-1)===0&&u>0&&(u&u-1)===0};r.exports=m},2018:r=>{var m=function(e){return e>0&&(e&e-1)===0};r.exports=m},73773:(r,m,e)=>{r.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}},81429:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s){s===void 0&&(s=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],s&&this.init(s)},rnd:function(){var c=2091639*this.s0+this.c*23283064365386963e-26;return this.c=c|0,this.s0=this.s1,this.s1=this.s2,this.s2=c-this.c,this.s2},hash:function(c){var s,o=this.n;c=c.toString();for(var a=0;a<c.length;a++)o+=c.charCodeAt(a),s=.02519603282416938*o,o=s>>>0,s-=o,s*=o,o=s>>>0,s-=o,o+=s*4294967296;return this.n=o,(o>>>0)*23283064365386963e-26},init:function(c){typeof c=="string"?this.state(c):this.sow(c)},sow:function(c){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!c)for(var s=0;s<c.length&&c[s]!=null;s++){var o=c[s];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(c,s){return Math.floor(this.realInRange(0,s-c+1)+c)},between:function(c,s){return Math.floor(this.realInRange(0,s-c+1)+c)},realInRange:function(c,s){return this.frac()*(s-c)+c},normal:function(){return 1-2*this.frac()},uuid:function(){var c="",s="";for(s=c="";c++<36;s+=~c%5|c*3&4?(c^15?8^this.frac()*(c^20?16:4):4).toString(16):"-");return s},pick:function(c){return c[this.integerInRange(0,c.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(c){return c[~~(Math.pow(this.frac(),2)*(c.length-1)+.5)]},timestamp:function(c,s){return this.realInRange(c||9466848e5,s||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(c){return typeof c=="string"&&c.match(/^!rnd/)&&(c=c.split(","),this.c=parseFloat(c[1]),this.s0=parseFloat(c[2]),this.s1=parseFloat(c[3]),this.s2=parseFloat(c[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(c){for(var s=c.length-1,o=s;o>0;o--){var a=Math.floor(this.frac()*(o+1)),l=c[a];c[a]=c[o],c[o]=l}return c}});r.exports=g},82127:r=>{var m=function(e,u,g,c){return g===void 0&&(g=0),u===0?e:(e-=g,e=u*Math.ceil(e/u),c?(g+e)/u:g+e)};r.exports=m},84314:r=>{var m=function(e,u,g,c){return g===void 0&&(g=0),u===0?e:(e-=g,e=u*Math.floor(e/u),c?(g+e)/u:g+e)};r.exports=m},88462:r=>{var m=function(e,u,g,c){return g===void 0&&(g=0),u===0?e:(e-=g,e=u*Math.round(e/u),c?(g+e)/u:g+e)};r.exports=m},23679:(r,m,e)=>{r.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}},92491:(r,m,e)=>{e(75205);var u=e(86459),g=e(98611),c={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};c.Sound=e(56751),c=g(!1,c,u),r.exports=c,e.g.Phaser=c},62832:(r,m,e)=>{var u=e(56694),g=e(7864),c=e(1539),s=new u({Extends:c,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(a,l,p,h,f){c.call(this,a,l,p,h,f),this.body=null}});r.exports=s},66150:(r,m,e)=>{var u=e(56694),g=e(75606),c=e(53996),s=e(35032),o=e(99523),a=e(72632),l=e(30657),p=e(2732),h=e(15147),f=e(91963),v=e(7599),y=e(93736),x=e(85233),S=new u({initialize:function(b){this.scene=b,this.systems=b.sys,this.config=this.getConfig(),this.world,this.add,b.sys.events.once(v.BOOT,this.boot,this),b.sys.events.on(v.START,this.start,this)},boot:function(){this.world=new x(this.scene,this.config),this.add=new o(this.world),this.systems.events.once(v.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new x(this.scene,this.config),this.add=new o(this.world));var E=this.systems.events;a(this.config,"customUpdate",!1)||E.on(v.UPDATE,this.world.update,this.world),E.on(v.POST_UPDATE,this.world.postUpdate,this.world),E.once(v.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(v.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(v.UPDATE,this.world.update,this.world)},getConfig:function(){var E=this.systems.game.config.physics,b=this.systems.settings.physics,T=l(a(b,"arcade",{}),a(E,"arcade",{}));return T},overlap:function(E,b,T,P,C){return T===void 0&&(T=null),P===void 0&&(P=null),C===void 0&&(C=T),this.world.collideObjects(E,b,T,P,C,!0)},collide:function(E,b,T,P,C){return T===void 0&&(T=null),P===void 0&&(P=null),C===void 0&&(C=T),this.world.collideObjects(E,b,T,P,C,!1)},collideTiles:function(E,b,T,P,C){return this.world.collideTiles(E,b,T,P,C)},overlapTiles:function(E,b,T,P,C){return this.world.overlapTiles(E,b,T,P,C)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(E,b,T,P,C,w){P===void 0&&(P=60);var A=Math.atan2(T-E.y,b-E.x);return E.body.acceleration.setToPolar(A,P),C!==void 0&&w!==void 0&&E.body.maxVelocity.set(C,w),A},accelerateToObject:function(E,b,T,P,C){return this.accelerateTo(E,b.x,b.y,T,P,C)},closest:function(E,b){b||(b=this.world.bodies.entries);for(var T=Number.MAX_VALUE,P=null,C=E.x,w=E.y,A=b.length,R=0;R<A;R++){var I=b[R],L=I.body||I;if(!(E===I||E===L||E===L.gameObject||E===L.center)){var O=s(C,w,L.center.x,L.center.y);O<T&&(P=I,T=O)}}return P},furthest:function(E,b){b||(b=this.world.bodies.entries);for(var T=-1,P=null,C=E.x,w=E.y,A=b.length,R=0;R<A;R++){var I=b[R],L=I.body||I;if(!(E===I||E===L||E===L.gameObject||E===L.center)){var O=s(C,w,L.center.x,L.center.y);O>T&&(P=I,T=O)}}return P},moveTo:function(E,b,T,P,C){P===void 0&&(P=60),C===void 0&&(C=0);var w=Math.atan2(T-E.y,b-E.x);return C>0&&(P=c(E.x,E.y,b,T)/(C/1e3)),E.body.velocity.setToPolar(w,P),w},moveToObject:function(E,b,T,P){return this.moveTo(E,b.x,b.y,T,P)},velocityFromAngle:function(E,b,T){return b===void 0&&(b=60),T===void 0&&(T=new y),T.setToPolar(g(E),b)},velocityFromRotation:function(E,b,T){return b===void 0&&(b=60),T===void 0&&(T=new y),T.setToPolar(E,b)},overlapRect:function(E,b,T,P,C,w){return h(this.world,E,b,T,P,C,w)},overlapCirc:function(E,b,T,P,C){return p(this.world,E,b,T,P,C)},shutdown:function(){if(this.world){var E=this.systems.events;E.off(v.UPDATE,this.world.update,this.world),E.off(v.POST_UPDATE,this.world.postUpdate,this.world),E.off(v.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(v.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",S,"arcadePhysics"),r.exports=S},25084:(r,m,e)=>{var u=e(56694),g=e(7864),c=e(13747),s=new u({Extends:c,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(a,l,p,h,f){c.call(this,a,l,p,h,f),this.body=null}});r.exports=s},97602:(r,m,e)=>{var u=e(56694),g=e(47401),c=e(27037),s=e(23701),o=e(74118),a=e(94287),l=e(93736),p=new u({initialize:function(f,v){var y=64,x=64,S={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=v!==void 0;E&&v.displayWidth&&(y=v.displayWidth,x=v.displayHeight),E||(v=S),this.world=f,this.gameObject=E?v:void 0,this.isBody=!0,this.transform={x:v.x,y:v.y,rotation:v.angle,scaleX:v.scaleX,scaleY:v.scaleY,displayOriginX:v.displayOriginX,displayOriginY:v.displayOriginY},this.debugShowBody=f.defaults.debugShowBody,this.debugShowVelocity=f.defaults.debugShowVelocity,this.debugBodyColor=f.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(v.x-v.scaleX*v.displayOriginX,v.y-v.scaleY*v.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=v.angle,this.preRotation=v.angle,this.width=y,this.height=x,this.sourceWidth=y,this.sourceHeight=x,v.frame&&(this.sourceWidth=v.frame.realWidth,this.sourceHeight=v.frame.realHeight),this.halfWidth=Math.abs(y/2),this.halfHeight=Math.abs(x/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=f.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=g.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=g.DYNAMIC_BODY,this._sx=v.scaleX,this._sy=v.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new o},updateBounds:function(){var h=this.gameObject,f=this.transform;if(h.parentContainer){var v=h.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);f.x=v.tx,f.y=v.ty,f.rotation=s(v.rotation),f.scaleX=v.scaleX,f.scaleY=v.scaleY,f.displayOriginX=h.displayOriginX,f.displayOriginY=h.displayOriginY}else f.x=h.x,f.y=h.y,f.rotation=h.angle,f.scaleX=h.scaleX,f.scaleY=h.scaleY,f.displayOriginX=h.displayOriginX,f.displayOriginY=h.displayOriginY;var y=!1;if(this.syncBounds){var x=h.getBounds(this._bounds);this.width=x.width,this.height=x.height,y=!0}else{var S=Math.abs(f.scaleX),E=Math.abs(f.scaleY);(this._sx!==S||this._sy!==E)&&(this.width=this.sourceWidth*S,this.height=this.sourceHeight*E,this._sx=S,this._sy=E,y=!0)}y&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var h=this.transform;this.position.x=h.x+h.scaleX*(this.offset.x-h.displayOriginX),this.position.y=h.y+h.scaleY*(this.offset.y-h.displayOriginY),this.updateCenter()},resetFlags:function(h){h===void 0&&(h=!1);var f=this.wasTouching,v=this.touching,y=this.blocked;h?(f.none=!0,f.up=!1,f.down=!1,f.left=!1,f.right=!1):(f.none=v.none,f.up=v.up,f.down=v.down,f.left=v.left,f.right=v.right),v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,y.none=!0,y.up=!1,y.down=!1,y.left=!1,y.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(h,f){h&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),h&&this.update(f)},update:function(h){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,h);var f=this.velocity.x,v=this.velocity.y;this.newVelocity.set(f*h,v*h),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(v,f),this.speed=Math.sqrt(f*f+v*v),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(c.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var h=this.position.x-this.prevFrame.x,f=this.position.y-this.prevFrame.y,v=this.gameObject;if(this.moves){var y=this.deltaMax.x,x=this.deltaMax.y;y!==0&&h!==0&&(h<0&&h<-y?h=-y:h>0&&h>y&&(h=y)),x!==0&&f!==0&&(f<0&&f<-x?f=-x:f>0&&f>x&&(f=x)),v&&(v.x+=h,v.y+=f)}h<0?this.facing=g.FACING_LEFT:h>0&&(this.facing=g.FACING_RIGHT),f<0?this.facing=g.FACING_UP:f>0&&(this.facing=g.FACING_DOWN),this.allowRotation&&v&&(v.angle+=this.deltaZ()),this._tx=h,this._ty=f},setBoundsRectangle:function(h){return this.customBoundsRectangle=h||this.world.bounds,this},checkWorldBounds:function(){var h=this.position,f=this.customBoundsRectangle,v=this.world.checkCollision,y=this.worldBounce?-this.worldBounce.x:-this.bounce.x,x=this.worldBounce?-this.worldBounce.y:-this.bounce.y,S=!1;return h.x<f.x&&v.left?(h.x=f.x,this.velocity.x*=y,this.blocked.left=!0,S=!0):this.right>f.right&&v.right&&(h.x=f.right-this.width,this.velocity.x*=y,this.blocked.right=!0,S=!0),h.y<f.y&&v.up?(h.y=f.y,this.velocity.y*=x,this.blocked.up=!0,S=!0):this.bottom>f.bottom&&v.down&&(h.y=f.bottom-this.height,this.velocity.y*=x,this.blocked.down=!0,S=!0),S&&(this.blocked.none=!1,this.updateCenter()),S},setOffset:function(h,f){return f===void 0&&(f=h),this.offset.set(h,f),this},setGameObject:function(h,f){return f===void 0&&(f=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=h,h.body&&(h.body=this),this.setSize(),this.world.add(this),this.enable=f,this},setSize:function(h,f,v){v===void 0&&(v=!0);var y=this.gameObject;if(y&&(!h&&y.frame&&(h=y.frame.realWidth),!f&&y.frame&&(f=y.frame.realHeight)),this.sourceWidth=h,this.sourceHeight=f,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),v&&y&&y.getCenter){var x=(y.width-h)/2,S=(y.height-f)/2;this.offset.set(x,S)}return this.isCircle=!1,this.radius=0,this},setCircle:function(h,f,v){return f===void 0&&(f=this.offset.x),v===void 0&&(v=this.offset.y),h>0?(this.isCircle=!0,this.radius=h,this.sourceWidth=h*2,this.sourceHeight=h*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,v),this.updateCenter()):this.isCircle=!1,this},reset:function(h,f){this.stop();var v=this.gameObject;v&&(v.setPosition(h,f),this.rotation=v.angle,this.preRotation=v.angle);var y=this.position;v&&v.getTopLeft?v.getTopLeft(y):y.set(h,f),this.prev.copy(y),this.prevFrame.copy(y),v&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(h){return h.x=this.x,h.y=this.y,h.right=this.right,h.bottom=this.bottom,h},hitTest:function(h,f){if(!this.isCircle)return a(this,h,f);if(this.radius>0&&h>=this.left&&h<=this.right&&f>=this.top&&f<=this.bottom){var v=(this.center.x-h)*(this.center.x-h),y=(this.center.y-f)*(this.center.y-f);return v+y<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(h){var f=this.position,v=f.x+this.halfWidth,y=f.y+this.halfHeight;this.debugShowBody&&(h.lineStyle(h.defaultStrokeWidth,this.debugBodyColor),this.isCircle?h.strokeCircle(v,y,this.width/2):(this.checkCollision.up&&h.lineBetween(f.x,f.y,f.x+this.width,f.y),this.checkCollision.right&&h.lineBetween(f.x+this.width,f.y,f.x+this.width,f.y+this.height),this.checkCollision.down&&h.lineBetween(f.x,f.y+this.height,f.x+this.width,f.y+this.height),this.checkCollision.left&&h.lineBetween(f.x,f.y,f.x,f.y+this.height))),this.debugShowVelocity&&(h.lineStyle(h.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),h.lineBetween(v,y,v+this.velocity.x/2,y+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(h,f,v,y){h===void 0&&(h=!0),this.collideWorldBounds=h;var x=f!==void 0,S=v!==void 0;return(x||S)&&(this.worldBounce||(this.worldBounce=new l),x&&(this.worldBounce.x=f),S&&(this.worldBounce.y=v)),y!==void 0&&(this.onWorldBounds=y),this},setVelocity:function(h,f){return this.velocity.set(h,f),h=this.velocity.x,f=this.velocity.y,this.speed=Math.sqrt(h*h+f*f),this},setVelocityX:function(h){return this.setVelocity(h,this.velocity.y)},setVelocityY:function(h){return this.setVelocity(this.velocity.x,h)},setMaxVelocity:function(h,f){return this.maxVelocity.set(h,f),this},setMaxVelocityX:function(h){return this.maxVelocity.x=h,this},setMaxVelocityY:function(h){return this.maxVelocity.y=h,this},setMaxSpeed:function(h){return this.maxSpeed=h,this},setBounce:function(h,f){return this.bounce.set(h,f),this},setBounceX:function(h){return this.bounce.x=h,this},setBounceY:function(h){return this.bounce.y=h,this},setAcceleration:function(h,f){return this.acceleration.set(h,f),this},setAccelerationX:function(h){return this.acceleration.x=h,this},setAccelerationY:function(h){return this.acceleration.y=h,this},setAllowDrag:function(h){return h===void 0&&(h=!0),this.allowDrag=h,this},setAllowGravity:function(h){return h===void 0&&(h=!0),this.allowGravity=h,this},setAllowRotation:function(h){return h===void 0&&(h=!0),this.allowRotation=h,this},setDrag:function(h,f){return this.drag.set(h,f),this},setDamping:function(h){return this.useDamping=h,this},setDragX:function(h){return this.drag.x=h,this},setDragY:function(h){return this.drag.y=h,this},setGravity:function(h,f){return this.gravity.set(h,f),this},setGravityX:function(h){return this.gravity.x=h,this},setGravityY:function(h){return this.gravity.y=h,this},setFriction:function(h,f){return this.friction.set(h,f),this},setFrictionX:function(h){return this.friction.x=h,this},setFrictionY:function(h){return this.friction.y=h,this},setAngularVelocity:function(h){return this.angularVelocity=h,this},setAngularAcceleration:function(h){return this.angularAcceleration=h,this},setAngularDrag:function(h){return this.angularDrag=h,this},setMass:function(h){return this.mass=h,this},setImmovable:function(h){return h===void 0&&(h=!0),this.immovable=h,this},setEnable:function(h){return h===void 0&&(h=!0),this.enable=h,this},processX:function(h,f,v,y){this.x+=h,this.updateCenter(),f!==null&&(this.velocity.x=f);var x=this.blocked;v&&(x.left=!0,x.none=!1),y&&(x.right=!0,x.none=!1)},processY:function(h,f,v,y){this.y+=h,this.updateCenter(),f!==null&&(this.velocity.y=f);var x=this.blocked;v&&(x.up=!0,x.none=!1),y&&(x.down=!0,x.none=!1)},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=p},3909:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a,l,p,h,f){this.world=s,this.name="",this.active=!0,this.overlapOnly=o,this.object1=a,this.object2=l,this.collideCallback=p,this.processCallback=h,this.callbackContext=f},setName:function(c){return this.name=c,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});r.exports=g},99523:(r,m,e)=>{var u=e(62832),g=e(25084),c=e(97602),s=e(56694),o=e(47401),a=e(10481),l=e(66634),p=e(46346),h=new s({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},collider:function(f,v,y,x,S){return this.world.addCollider(f,v,y,x,S)},overlap:function(f,v,y,x,S){return this.world.addOverlap(f,v,y,x,S)},existing:function(f,v){var y=v?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(f,y),f},staticImage:function(f,v,y,x){var S=new u(this.scene,f,v,y,x);return this.sys.displayList.add(S),this.world.enableBody(S,o.STATIC_BODY),S},image:function(f,v,y,x){var S=new u(this.scene,f,v,y,x);return this.sys.displayList.add(S),this.world.enableBody(S,o.DYNAMIC_BODY),S},staticSprite:function(f,v,y,x){var S=new g(this.scene,f,v,y,x);return this.sys.displayList.add(S),this.sys.updateList.add(S),this.world.enableBody(S,o.STATIC_BODY),S},sprite:function(f,v,y,x){var S=new g(this.scene,f,v,y,x);return this.sys.displayList.add(S),this.sys.updateList.add(S),this.world.enableBody(S,o.DYNAMIC_BODY),S},staticGroup:function(f,v){return this.sys.updateList.add(new p(this.world,this.world.scene,f,v))},group:function(f,v){return this.sys.updateList.add(new a(this.world,this.world.scene,f,v))},body:function(f,v,y,x){var S=new c(this.world);return S.position.set(f,v),y&&x&&S.setSize(y,x),this.world.add(S,o.DYNAMIC_BODY),S},staticBody:function(f,v,y,x){var S=new l(this.world);return S.position.set(f,v),y&&x&&S.setSize(y,x),this.world.add(S,o.STATIC_BODY),S},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=h},75671:(r,m,e)=>{var u=e(47401),g=function(c,s,o,a){var l=0,p=c.deltaAbsX()+s.deltaAbsX()+a;return c._dx===0&&s._dx===0?(c.embedded=!0,s.embedded=!0):c._dx>s._dx?(l=c.right-s.x,l>p&&!o||c.checkCollision.right===!1||s.checkCollision.left===!1?l=0:(c.touching.none=!1,c.touching.right=!0,s.touching.none=!1,s.touching.left=!0,s.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.right=!0),c.physicsType===u.STATIC_BODY&&!o&&(s.blocked.none=!1,s.blocked.left=!0))):c._dx<s._dx&&(l=c.x-s.width-s.x,-l>p&&!o||c.checkCollision.left===!1||s.checkCollision.right===!1?l=0:(c.touching.none=!1,c.touching.left=!0,s.touching.none=!1,s.touching.right=!0,s.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.left=!0),c.physicsType===u.STATIC_BODY&&!o&&(s.blocked.none=!1,s.blocked.right=!0))),c.overlapX=l,s.overlapX=l,l};r.exports=g},66185:(r,m,e)=>{var u=e(47401),g=function(c,s,o,a){var l=0,p=c.deltaAbsY()+s.deltaAbsY()+a;return c._dy===0&&s._dy===0?(c.embedded=!0,s.embedded=!0):c._dy>s._dy?(l=c.bottom-s.y,l>p&&!o||c.checkCollision.down===!1||s.checkCollision.up===!1?l=0:(c.touching.none=!1,c.touching.down=!0,s.touching.none=!1,s.touching.up=!0,s.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.down=!0),c.physicsType===u.STATIC_BODY&&!o&&(s.blocked.none=!1,s.blocked.up=!0))):c._dy<s._dy&&(l=c.y-s.bottom,-l>p&&!o||c.checkCollision.up===!1||s.checkCollision.down===!1?l=0:(c.touching.none=!1,c.touching.up=!0,s.touching.none=!1,s.touching.down=!0,s.physicsType===u.STATIC_BODY&&!o&&(c.blocked.none=!1,c.blocked.up=!0),c.physicsType===u.STATIC_BODY&&!o&&(s.blocked.none=!1,s.blocked.down=!0))),c.overlapY=l,s.overlapY=l,l};r.exports=g},10481:(r,m,e)=>{var u=e(25084),g=e(56694),c=e(47401),s=e(72632),o=e(59192),a=e(42911),l=new g({Extends:o,initialize:function(h,f,v,y){if(!v&&!y)y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(a(v))y=v,v=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(v)&&a(v[0])){y=v[0];var x=this;v.forEach(function(S){S.internalCreateCallback=x.createCallbackHandler,S.internalRemoveCallback=x.removeCallbackHandler}),v=null}else y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=h,y.classType=s(y,"classType",u),this.physicsType=c.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:s(y,"collideWorldBounds",!1),setBoundsRectangle:s(y,"customBoundsRectangle",null),setAccelerationX:s(y,"accelerationX",0),setAccelerationY:s(y,"accelerationY",0),setAllowDrag:s(y,"allowDrag",!0),setAllowGravity:s(y,"allowGravity",!0),setAllowRotation:s(y,"allowRotation",!0),setDamping:s(y,"useDamping",!1),setBounceX:s(y,"bounceX",0),setBounceY:s(y,"bounceY",0),setDragX:s(y,"dragX",0),setDragY:s(y,"dragY",0),setEnable:s(y,"enable",!0),setGravityX:s(y,"gravityX",0),setGravityY:s(y,"gravityY",0),setFrictionX:s(y,"frictionX",0),setFrictionY:s(y,"frictionY",0),setMaxSpeed:s(y,"maxSpeed",-1),setMaxVelocityX:s(y,"maxVelocityX",1e4),setMaxVelocityY:s(y,"maxVelocityY",1e4),setVelocityX:s(y,"velocityX",0),setVelocityY:s(y,"velocityY",0),setAngularVelocity:s(y,"angularVelocity",0),setAngularAcceleration:s(y,"angularAcceleration",0),setAngularDrag:s(y,"angularDrag",0),setMass:s(y,"mass",1),setImmovable:s(y,"immovable",!1)},o.call(this,f,v,y),this.type="PhysicsGroup"},createCallbackHandler:function(p){p.body||this.world.enableBody(p,c.DYNAMIC_BODY);var h=p.body;for(var f in this.defaults)h[f](this.defaults[f])},removeCallbackHandler:function(p){p.body&&this.world.disableBody(p)},setVelocity:function(p,h,f){f===void 0&&(f=0);for(var v=this.getChildren(),y=0;y<v.length;y++)v[y].body.velocity.set(p+y*f,h+y*f);return this},setVelocityX:function(p,h){h===void 0&&(h=0);for(var f=this.getChildren(),v=0;v<f.length;v++)f[v].body.velocity.x=p+v*h;return this},setVelocityY:function(p,h){h===void 0&&(h=0);for(var f=this.getChildren(),v=0;v<f.length;v++)f[v].body.velocity.y=p+v*h;return this}});r.exports=l},22916:r=>{var m,e,u,g,c,s,o,a,l,p,h,f,v,y,x,S,E,b=function(R,I,L){m=R,e=I;var O=m.velocity.x,D=e.velocity.x;return u=m.pushable,l=m._dx<0,p=m._dx>0,h=m._dx===0,x=Math.abs(m.right-e.x)<=Math.abs(e.right-m.x),o=D-O*m.bounce.x,g=e.pushable,f=e._dx<0,v=e._dx>0,y=e._dx===0,S=!x,a=O-D*e.bounce.x,E=Math.abs(L),T()},T=function(){return p&&x&&e.blocked.right?(m.processX(-E,o,!1,!0),1):l&&S&&e.blocked.left?(m.processX(E,o,!0),1):v&&S&&m.blocked.right?(e.processX(-E,a,!1,!0),2):f&&x&&m.blocked.left?(e.processX(E,a,!0),2):0},P=function(){var R=m.velocity.x,I=e.velocity.x,L=Math.sqrt(I*I*e.mass/m.mass)*(I>0?1:-1),O=Math.sqrt(R*R*m.mass/e.mass)*(R>0?1:-1),D=(L+O)*.5;return L-=D,O-=D,c=D+L*m.bounce.x,s=D+O*e.bounce.x,l&&S?C(0):f&&x?C(1):p&&x?C(2):v&&S?C(3):!1},C=function(R){if(u&&g)E*=.5,R===0||R===3?(m.processX(E,c),e.processX(-E,s)):(m.processX(-E,c),e.processX(E,s));else if(u&&!g)R===0||R===3?m.processX(E,o,!0):m.processX(-E,o,!1,!0);else if(!u&&g)R===0||R===3?e.processX(-E,a,!1,!0):e.processX(E,a,!0);else{var I=E*.5;R===0?y?(m.processX(E,0,!0),e.processX(0,null,!1,!0)):v?(m.processX(I,0,!0),e.processX(-I,0,!1,!0)):(m.processX(I,e.velocity.x,!0),e.processX(-I,null,!1,!0)):R===1?h?(m.processX(0,null,!1,!0),e.processX(E,0,!0)):p?(m.processX(-I,0,!1,!0),e.processX(I,0,!0)):(m.processX(-I,null,!1,!0),e.processX(I,m.velocity.x,!0)):R===2?y?(m.processX(-E,0,!1,!0),e.processX(0,null,!0)):f?(m.processX(-I,0,!1,!0),e.processX(I,0,!0)):(m.processX(-I,e.velocity.x,!1,!0),e.processX(I,null,!0)):R===3&&(h?(m.processX(0,null,!0),e.processX(-E,0,!1,!0)):l?(m.processX(I,0,!0),e.processX(-I,0,!1,!0)):(m.processX(I,e.velocity.y,!0),e.processX(-I,null,!1,!0)))}return!0},w=function(R){R===1?e.velocity.x=0:x?e.processX(E,a,!0):e.processX(-E,a,!1,!0),m.moves&&(e.y+=(m.y-m.prev.y)*m.friction.y,e._dy=e.y-e.prev.y)},A=function(R){R===2?m.velocity.x=0:S?m.processX(E,o,!0):m.processX(-E,o,!1,!0),e.moves&&(m.y+=(e.y-e.prev.y)*e.friction.y,m._dy=m.y-m.prev.y)};r.exports={BlockCheck:T,Check:P,Set:b,Run:C,RunImmovableBody1:w,RunImmovableBody2:A}},67050:r=>{var m,e,u,g,c,s,o,a,l,p,h,f,v,y,x,S,E,b=function(R,I,L){m=R,e=I;var O=m.velocity.y,D=e.velocity.y;return u=m.pushable,l=m._dy<0,p=m._dy>0,h=m._dy===0,x=Math.abs(m.bottom-e.y)<=Math.abs(e.bottom-m.y),o=D-O*m.bounce.y,g=e.pushable,f=e._dy<0,v=e._dy>0,y=e._dy===0,S=!x,a=O-D*e.bounce.y,E=Math.abs(L),T()},T=function(){return p&&x&&e.blocked.down?(m.processY(-E,o,!1,!0),1):l&&S&&e.blocked.up?(m.processY(E,o,!0),1):v&&S&&m.blocked.down?(e.processY(-E,a,!1,!0),2):f&&x&&m.blocked.up?(e.processY(E,a,!0),2):0},P=function(){var R=m.velocity.y,I=e.velocity.y,L=Math.sqrt(I*I*e.mass/m.mass)*(I>0?1:-1),O=Math.sqrt(R*R*m.mass/e.mass)*(R>0?1:-1),D=(L+O)*.5;return L-=D,O-=D,c=D+L*m.bounce.y,s=D+O*e.bounce.y,l&&S?C(0):f&&x?C(1):p&&x?C(2):v&&S?C(3):!1},C=function(R){if(u&&g)E*=.5,R===0||R===3?(m.processY(E,c),e.processY(-E,s)):(m.processY(-E,c),e.processY(E,s));else if(u&&!g)R===0||R===3?m.processY(E,o,!0):m.processY(-E,o,!1,!0);else if(!u&&g)R===0||R===3?e.processY(-E,a,!1,!0):e.processY(E,a,!0);else{var I=E*.5;R===0?y?(m.processY(E,0,!0),e.processY(0,null,!1,!0)):v?(m.processY(I,0,!0),e.processY(-I,0,!1,!0)):(m.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)):R===1?h?(m.processY(0,null,!1,!0),e.processY(E,0,!0)):p?(m.processY(-I,0,!1,!0),e.processY(I,0,!0)):(m.processY(-I,null,!1,!0),e.processY(I,m.velocity.y,!0)):R===2?y?(m.processY(-E,0,!1,!0),e.processY(0,null,!0)):f?(m.processY(-I,0,!1,!0),e.processY(I,0,!0)):(m.processY(-I,e.velocity.y,!1,!0),e.processY(I,null,!0)):R===3&&(h?(m.processY(0,null,!0),e.processY(-E,0,!1,!0)):l?(m.processY(I,0,!0),e.processY(-I,0,!1,!0)):(m.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)))}return!0},w=function(R){R===1?e.velocity.y=0:x?e.processY(E,a,!0):e.processY(-E,a,!1,!0),m.moves&&(e.x+=(m.x-m.prev.x)*m.friction.x,e._dx=e.x-e.prev.x)},A=function(R){R===2?m.velocity.y=0:S?m.processY(E,o,!0):m.processY(-E,o,!1,!0),e.moves&&(m.x+=(e.x-e.prev.x)*e.friction.x,m._dx=m.x-m.prev.x)};r.exports={BlockCheck:T,Check:P,Set:b,Run:C,RunImmovableBody1:w,RunImmovableBody2:A}},61777:(r,m,e)=>{var u=e(75671),g=e(22916),c=function(s,o,a,l,p){p===void 0&&(p=u(s,o,a,l));var h=s.immovable,f=o.immovable;if(a||p===0||h&&f||s.customSeparateX||o.customSeparateX)return p!==0||s.embedded&&o.embedded;var v=g.Set(s,o,p);return!h&&!f?v>0?!0:g.Check():(h?g.RunImmovableBody1(v):f&&g.RunImmovableBody2(v),!0)};r.exports=c},25299:(r,m,e)=>{var u=e(66185),g=e(67050),c=function(s,o,a,l,p){p===void 0&&(p=u(s,o,a,l));var h=s.immovable,f=o.immovable;if(a||p===0||h&&f||s.customSeparateY||o.customSeparateY)return p!==0||s.embedded&&o.embedded;var v=g.Set(s,o,p);return!h&&!f?v>0?!0:g.Check():(h?g.RunImmovableBody1(v):f&&g.RunImmovableBody2(v),!0)};r.exports=c},66634:(r,m,e)=>{var u=e(65650),g=e(56694),c=e(47401),s=e(94287),o=e(93736),a=new g({initialize:function(p,h){var f=64,v=64,y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},x=h!==void 0;x&&h.displayWidth&&(f=h.displayWidth,v=h.displayHeight),x||(h=y),this.world=p,this.gameObject=x?h:void 0,this.isBody=!0,this.debugShowBody=p.defaults.debugShowStaticBody,this.debugBodyColor=p.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(h.x-f*h.originX,h.y-v*h.originY),this.width=f,this.height=v,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=c.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(l,p){return l&&l!==this.gameObject&&(this.gameObject.body=null,l.body=this,this.gameObject=l),p&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var l=this.gameObject;return l.getTopLeft(this.position),this.width=l.displayWidth,this.height=l.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(l,p){return p===void 0&&(p=l),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(l,p),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(l,p,h){h===void 0&&(h=!0);var f=this.gameObject;if(!l&&f.frame&&(l=f.frame.realWidth),!p&&f.frame&&(p=f.frame.realHeight),this.world.staticTree.remove(this),this.width=l,this.height=p,this.halfWidth=Math.floor(l/2),this.halfHeight=Math.floor(p/2),h&&f.getCenter){var v=f.displayWidth/2,y=f.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(v-this.halfWidth,y-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(l,p,h){return p===void 0&&(p=this.offset.x),h===void 0&&(h=this.offset.y),l>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=l,this.width=l*2,this.height=l*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,h),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(l,p){var h=this.gameObject;l===void 0&&(l=h.x),p===void 0&&(p=h.y),this.world.staticTree.remove(this),h.setPosition(l,p),h.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(l){return l.x=this.x,l.y=this.y,l.right=this.right,l.bottom=this.bottom,l},hitTest:function(l,p){return this.isCircle?u(this,l,p):s(this,l,p)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(l){var p=this.position,h=p.x+this.halfWidth,f=p.y+this.halfHeight;this.debugShowBody&&(l.lineStyle(l.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?l.strokeCircle(h,f,this.width/2):l.strokeRect(p.x,p.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(l){return l<=0&&(l=.1),this.mass=l,this},x:{get:function(){return this.position.x},set:function(l){this.world.staticTree.remove(this),this.position.x=l,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(l){this.world.staticTree.remove(this),this.position.y=l,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=a},46346:(r,m,e)=>{var u=e(25084),g=e(56694),c=e(47401),s=e(72632),o=e(59192),a=e(42911),l=new g({Extends:o,initialize:function(h,f,v,y){!v&&!y?y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:u}:a(v)?(y=v,v=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler,y.createMultipleCallback=this.createMultipleCallbackHandler,y.classType=s(y,"classType",u)):Array.isArray(v)&&a(v[0])?(y=v,v=null,y.forEach(function(x){x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler,x.createMultipleCallback=this.createMultipleCallbackHandler,x.classType=s(x,"classType",u)})):y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=h,this.physicsType=c.STATIC_BODY,o.call(this,f,v,y),this.type="StaticPhysicsGroup"},createCallbackHandler:function(p){p.body||this.world.enableBody(p,c.STATIC_BODY)},removeCallbackHandler:function(p){p.body&&this.world.disableBody(p)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var p=this.children.entries,h=0;h<p.length;h++)p[h].body.reset();return this}});r.exports=l},85233:(r,m,e)=>{var u=e(94240),g=e(97602),c=e(82897),s=e(56694),o=e(3909),a=e(47401),l=e(53996),p=e(92951),h=e(6659),f=e(27037),v=e(88456),y=e(41935),x=e(54726),S=e(75671),E=e(66185),b=e(44662),T=e(10850),P=e(83392),C=e(74623),w=e(25163),A=e(74118),R=e(68687),I=e(27354),L=e(61777),O=e(25299),D=e(58403),V=e(66634),B=e(28808),U=e(69360),W=e(93736),F=e(1071),G=new s({Extends:h,initialize:function(N,k){h.call(this),this.scene=N,this.bodies=new D,this.staticBodies=new D,this.pendingDestroy=new D,this.colliders=new C,this.gravity=new W(T(k,"gravity.x",0),T(k,"gravity.y",0)),this.bounds=new A(T(k,"x",0),T(k,"y",0),T(k,"width",N.sys.scale.width),T(k,"height",N.sys.scale.height)),this.checkCollision={up:T(k,"checkCollision.up",!0),down:T(k,"checkCollision.down",!0),left:T(k,"checkCollision.left",!0),right:T(k,"checkCollision.right",!0)},this.fps=T(k,"fps",60),this.fixedStep=T(k,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(k,"timeScale",1),this.OVERLAP_BIAS=T(k,"overlapBias",4),this.TILE_BIAS=T(k,"tileBias",16),this.forceX=T(k,"forceX",!1),this.isPaused=T(k,"isPaused",!1),this._total=0,this.drawDebug=T(k,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(k,"debugShowBody",!0),debugShowStaticBody:T(k,"debugShowStaticBody",!0),debugShowVelocity:T(k,"debugShowVelocity",!0),bodyDebugColor:T(k,"debugBodyColor",16711935),staticBodyDebugColor:T(k,"debugStaticBodyColor",255),velocityDebugColor:T(k,"debugVelocityColor",65280)},this.maxEntries=T(k,"maxEntries",16),this.useTree=T(k,"useTree",!0),this.tree=new R(this.maxEntries),this.staticTree=new R(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(M,N){N===void 0&&(N=a.DYNAMIC_BODY),Array.isArray(M)||(M=[M]);for(var k=0;k<M.length;k++){var z=M[k];if(z.isParent)for(var H=z.getChildren(),$=0;$<H.length;$++){var X=H[$];X.isParent?this.enable(X,N):this.enableBody(X,N)}else this.enableBody(z,N)}},enableBody:function(M,N){return N===void 0&&(N=a.DYNAMIC_BODY),M.hasTransformComponent&&(M.body||(N===a.DYNAMIC_BODY?M.body=new g(this,M):N===a.STATIC_BODY&&(M.body=new V(this,M))),this.add(M.body)),M},add:function(M){return M.physicsType===a.DYNAMIC_BODY?this.bodies.set(M):M.physicsType===a.STATIC_BODY&&(this.staticBodies.set(M),this.staticTree.insert(M)),M.enable=!0,M},disable:function(M){Array.isArray(M)||(M=[M]);for(var N=0;N<M.length;N++){var k=M[N];if(k.isParent)for(var z=k.getChildren(),H=0;H<z.length;H++){var $=z[H];$.isParent?this.disable($):this.disableBody($.body)}else this.disableBody(k.body)}},disableBody:function(M){this.remove(M),M.enable=!1},remove:function(M){M.physicsType===a.DYNAMIC_BODY?(this.tree.remove(M),this.bodies.delete(M)):M.physicsType===a.STATIC_BODY&&(this.staticBodies.delete(M),this.staticTree.remove(M))},createDebugGraphic:function(){var M=this.scene.sys.add.graphics({x:0,y:0});return M.setDepth(Number.MAX_VALUE),this.debugGraphic=M,this.drawDebug=!0,M},setBounds:function(M,N,k,z,H,$,X,Y){return this.bounds.setTo(M,N,k,z),H!==void 0&&this.setBoundsCollision(H,$,X,Y),this},setBoundsCollision:function(M,N,k,z){return M===void 0&&(M=!0),N===void 0&&(N=!0),k===void 0&&(k=!0),z===void 0&&(z=!0),this.checkCollision.left=M,this.checkCollision.right=N,this.checkCollision.up=k,this.checkCollision.down=z,this},pause:function(){return this.isPaused=!0,this.emit(f.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(f.RESUME),this},addCollider:function(M,N,k,z,H){k===void 0&&(k=null),z===void 0&&(z=null),H===void 0&&(H=k);var $=new o(this,!1,M,N,k,z,H);return this.colliders.add($),$},addOverlap:function(M,N,k,z,H){k===void 0&&(k=null),z===void 0&&(z=null),H===void 0&&(H=k);var $=new o(this,!0,M,N,k,z,H);return this.colliders.add($),$},removeCollider:function(M){return this.colliders.remove(M),this},setFPS:function(M){return this.fps=M,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(M,N){if(!(this.isPaused||this.bodies.size===0)){var k,z=this._frameTime,H=this._frameTimeMS*this.timeScale;this._elapsed+=N;var $,X=this.bodies.entries,Y=this._elapsed>=H;for(this.fixedStep||(z=N*.001,Y=!0,this._elapsed=0),k=0;k<X.length;k++)$=X[k],$.enable&&$.preUpdate(Y,z);if(Y){this._elapsed-=H,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(X));var j=this.colliders.update();for(k=0;k<j.length;k++){var J=j[k];J.active&&J.update()}this.emit(f.WORLD_STEP,z)}for(;this._elapsed>=H;)this._elapsed-=H,this.step(z)}},step:function(M){var N,k,z=this.bodies.entries,H=z.length;for(N=0;N<H;N++)k=z[N],k.enable&&k.update(M);this.useTree&&(this.tree.clear(),this.tree.load(z));var $=this.colliders.update();for(N=0;N<$.length;N++){var X=$[N];X.active&&X.update()}this.emit(f.WORLD_STEP,M),this.stepsLastFrame++},postUpdate:function(){var M,N,k=this.bodies.entries,z=k.length,H=this.bodies,$=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,M=0;M<z;M++)N=k[M],N.enable&&N.postUpdate();if(this.drawDebug){var X=this.debugGraphic;for(X.clear(),M=0;M<z;M++)N=k[M],N.willDrawDebug()&&N.drawDebug(X);for(k=$.entries,z=k.length,M=0;M<z;M++)N=k[M],N.willDrawDebug()&&N.drawDebug(X)}var Y=this.pendingDestroy;if(Y.size>0){var j=this.tree,J=this.staticTree;for(k=Y.entries,z=k.length,M=0;M<z;M++)N=k[M],N.physicsType===a.DYNAMIC_BODY?(j.remove(N),H.delete(N)):N.physicsType===a.STATIC_BODY&&(J.remove(N),$.delete(N)),N.world=void 0,N.gameObject=void 0;Y.clear()}},updateMotion:function(M,N){M.allowRotation&&this.computeAngularVelocity(M,N),this.computeVelocity(M,N)},computeAngularVelocity:function(M,N){var k=M.angularVelocity,z=M.angularAcceleration,H=M.angularDrag,$=M.maxAngular;z?k+=z*N:M.allowDrag&&H&&(H*=N,y(k-H,0,.1)?k-=H:x(k+H,0,.1)?k+=H:k=0),k=c(k,-$,$);var X=k-M.angularVelocity;M.angularVelocity+=X,M.rotation+=M.angularVelocity*N},computeVelocity:function(M,N){var k=M.velocity.x,z=M.acceleration.x,H=M.drag.x,$=M.maxVelocity.x,X=M.velocity.y,Y=M.acceleration.y,j=M.drag.y,J=M.maxVelocity.y,Q=M.speed,Z=M.maxSpeed,it=M.allowDrag,rt=M.useDamping;M.allowGravity&&(k+=(this.gravity.x+M.gravity.x)*N,X+=(this.gravity.y+M.gravity.y)*N),z?k+=z*N:it&&H&&(rt?(H=Math.pow(H,N),k*=H,Q=Math.sqrt(k*k+X*X),v(Q,0,.001)&&(k=0)):(H*=N,y(k-H,0,.01)?k-=H:x(k+H,0,.01)?k+=H:k=0)),Y?X+=Y*N:it&&j&&(rt?(j=Math.pow(j,N),X*=j,Q=Math.sqrt(k*k+X*X),v(Q,0,.001)&&(X=0)):(j*=N,y(X-j,0,.01)?X-=j:x(X+j,0,.01)?X+=j:X=0)),k=c(k,-$,$),X=c(X,-J,J),M.velocity.set(k,X),Z>-1&&M.velocity.length()>Z&&(M.velocity.normalize().scale(Z),Q=Z),M.speed=Q},separate:function(M,N,k,z,H){var $,X,Y=!1,j=!0;if(!M.enable||!N.enable||M.checkCollision.none||N.checkCollision.none||!this.intersects(M,N)||k&&k.call(z,M.gameObject,N.gameObject)===!1)return Y;if(M.isCircle||N.isCircle){var J=this.separateCircle(M,N,H);J.result?(Y=!0,j=!1):($=J.x,X=J.y,j=!0)}if(j){var Q=!1,Z=!1,it=this.OVERLAP_BIAS;H?(Q=L(M,N,H,it,$),Z=O(M,N,H,it,X)):this.forceX||Math.abs(this.gravity.y+M.gravity.y)<Math.abs(this.gravity.x+M.gravity.x)?(Q=L(M,N,H,it,$),this.intersects(M,N)&&(Z=O(M,N,H,it,X))):(Z=O(M,N,H,it,X),this.intersects(M,N)&&(Q=L(M,N,H,it,$))),Y=Q||Z}return Y&&(H?(M.onOverlap||N.onOverlap)&&this.emit(f.OVERLAP,M.gameObject,N.gameObject,M,N):(M.onCollide||N.onCollide)&&this.emit(f.COLLIDE,M.gameObject,N.gameObject,M,N)),Y},separateCircle:function(M,N,k){S(M,N,!1,0),E(M,N,!1,0);var z=M.isCircle,H=N.isCircle,$=M.center,X=N.center,Y=M.immovable,j=N.immovable,J=M.velocity,Q=N.velocity,Z=0,it=!0;if(z!==H){it=!1;var rt=$.x,ut=$.y,dt=M.halfWidth,ct=N.position.x,nt=N.position.y,ht=N.right,ot=N.bottom;H&&(rt=X.x,ut=X.y,dt=N.halfWidth,ct=M.position.x,nt=M.position.y,ht=M.right,ot=M.bottom),ut<nt?rt<ct?Z=l(rt,ut,ct,nt)-dt:rt>ht&&(Z=l(rt,ut,ht,nt)-dt):ut>ot&&(rt<ct?Z=l(rt,ut,ct,ot)-dt:rt>ht&&(Z=l(rt,ut,ht,ot)-dt)),Z*=-1}else Z=M.halfWidth+N.halfWidth-p($,X);M.overlapR=Z,N.overlapR=Z;var mt=u($,X),gt=(Z+P.EPSILON)*Math.cos(mt),Ft=(Z+P.EPSILON)*Math.sin(mt),kt={overlap:Z,result:!1,x:gt,y:Ft};if(k&&(!it||it&&Z!==0))return kt.result=!0,kt;if(!it&&Z===0||Y&&j||M.customSeparateX||N.customSeparateX)return kt.x=void 0,kt.y=void 0,kt;var Lt=!M.pushable&&!N.pushable;if(it){var St=$.x-X.x,Yt=$.y-X.y,ae=Math.sqrt(Math.pow(St,2)+Math.pow(Yt,2)),Me=(X.x-$.x)/ae||0,Ge=(X.y-$.y)/ae||0,yi=2*(J.x*Me+J.y*Ge-Q.x*Me-Q.y*Ge)/(M.mass+N.mass);(Y||j)&&(yi*=2),Y||(J.x=J.x-yi/M.mass*Me,J.y=J.y-yi/M.mass*Ge,J.multiply(M.bounce)),j||(Q.x=Q.x+yi/N.mass*Me,Q.y=Q.y+yi/N.mass*Ge,Q.multiply(N.bounce)),!Y&&!j&&(gt*=.5,Ft*=.5),Y||(M.x-=gt,M.y-=Ft,M.updateCenter()),j||(N.x+=gt,N.y+=Ft,N.updateCenter()),kt.result=!0}else!Y||M.pushable||Lt?(M.x-=gt,M.y-=Ft,M.updateCenter()):(!j||N.pushable||Lt)&&(N.x+=gt,N.y+=Ft,N.updateCenter()),kt.x=void 0,kt.y=void 0;return kt},intersects:function(M,N){return M===N?!1:!M.isCircle&&!N.isCircle?!(M.right<=N.left||M.bottom<=N.top||M.left>=N.right||M.top>=N.bottom):M.isCircle?N.isCircle?p(M.center,N.center)<=M.halfWidth+N.halfWidth:this.circleBodyIntersects(M,N):this.circleBodyIntersects(N,M)},circleBodyIntersects:function(M,N){var k=c(M.center.x,N.left,N.right),z=c(M.center.y,N.top,N.bottom),H=(M.center.x-k)*(M.center.x-k),$=(M.center.y-z)*(M.center.y-z);return H+$<=M.halfWidth*M.halfWidth},overlap:function(M,N,k,z,H){return k===void 0&&(k=null),z===void 0&&(z=null),H===void 0&&(H=k),this.collideObjects(M,N,k,z,H,!0)},collide:function(M,N,k,z,H){return k===void 0&&(k=null),z===void 0&&(z=null),H===void 0&&(H=k),this.collideObjects(M,N,k,z,H,!1)},collideObjects:function(M,N,k,z,H,$){var X,Y;M.isParent&&(M.physicsType===void 0||N===void 0||M===N)&&(M=M.children.entries),N&&N.isParent&&N.physicsType===void 0&&(N=N.children.entries);var j=Array.isArray(M),J=Array.isArray(N);if(this._total=0,!j&&!J)this.collideHandler(M,N,k,z,H,$);else if(!j&&J)for(X=0;X<N.length;X++)this.collideHandler(M,N[X],k,z,H,$);else if(j&&!J)if(N)for(X=0;X<M.length;X++)this.collideHandler(M[X],N,k,z,H,$);else for(X=0;X<M.length;X++){var Q=M[X];for(Y=X+1;Y<M.length;Y++)X!==Y&&this.collideHandler(Q,M[Y],k,z,H,$)}else for(X=0;X<M.length;X++)for(Y=0;Y<N.length;Y++)this.collideHandler(M[X],N[Y],k,z,H,$);return this._total>0},collideHandler:function(M,N,k,z,H,$){if(N===void 0&&M.isParent)return this.collideGroupVsGroup(M,M,k,z,H,$);if(!M||!N)return!1;if(M.body||M.isBody){if(N.body||N.isBody)return this.collideSpriteVsSprite(M,N,k,z,H,$);if(N.isParent)return this.collideSpriteVsGroup(M,N,k,z,H,$);if(N.isTilemap)return this.collideSpriteVsTilemapLayer(M,N,k,z,H,$)}else if(M.isParent){if(N.body||N.isBody)return this.collideSpriteVsGroup(N,M,k,z,H,$);if(N.isParent)return this.collideGroupVsGroup(M,N,k,z,H,$);if(N.isTilemap)return this.collideGroupVsTilemapLayer(M,N,k,z,H,$)}else if(M.isTilemap){if(N.body||N.isBody)return this.collideSpriteVsTilemapLayer(N,M,k,z,H,$);if(N.isParent)return this.collideGroupVsTilemapLayer(N,M,k,z,H,$)}},collideSpriteVsSprite:function(M,N,k,z,H,$){var X=M.isBody?M:M.body,Y=N.isBody?N:N.body;return!X||!Y?!1:(this.separate(X,Y,z,H,$)&&(k&&k.call(H,M,N),this._total++),!0)},collideSpriteVsGroup:function(M,N,k,z,H,$){var X=M.isBody?M:M.body;if(!(N.length===0||!X||!X.enable||X.checkCollision.none)){var Y,j,J;if(this.useTree||N.physicsType===a.STATIC_BODY){var Q=this.treeMinMax;Q.minX=X.left,Q.minY=X.top,Q.maxX=X.right,Q.maxY=X.bottom;var Z=N.physicsType===a.DYNAMIC_BODY?this.tree.search(Q):this.staticTree.search(Q);for(j=Z.length,Y=0;Y<j;Y++)J=Z[Y],!(X===J||!J.enable||J.checkCollision.none||!N.contains(J.gameObject))&&this.separate(X,J,z,H,$)&&(k&&k.call(H,X.gameObject,J.gameObject),this._total++)}else{var it=N.getChildren(),rt=N.children.entries.indexOf(M);for(j=it.length,Y=0;Y<j;Y++)J=it[Y].body,!(!J||Y===rt||!J.enable)&&this.separate(X,J,z,H,$)&&(k&&k.call(H,X.gameObject,J.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(M,N,k,z,H,$){var X=M.getChildren();if(X.length===0)return!1;for(var Y=!1,j=0;j<X.length;j++)(X[j].body||X[j].isBody)&&this.collideSpriteVsTilemapLayer(X[j],N,k,z,H,$)&&(Y=!0);return Y},collideTiles:function(M,N,k,z,H){return N.length===0||M.body&&!M.body.enable||M.isBody&&!M.enable?!1:this.collideSpriteVsTilesHandler(M,N,k,z,H,!1,!1)},overlapTiles:function(M,N,k,z,H){return N.length===0||M.body&&!M.body.enable||M.isBody&&!M.enable?!1:this.collideSpriteVsTilesHandler(M,N,k,z,H,!0,!1)},collideSpriteVsTilemapLayer:function(M,N,k,z,H,$){var X=M.isBody?M:M.body;if(!X.enable||X.checkCollision.none)return!1;var Y=X.x,j=X.y,J=X.width,Q=X.height,Z=N.layer;if(Z.tileWidth>Z.baseTileWidth){var it=(Z.tileWidth-Z.baseTileWidth)*N.scaleX;Y-=it,J+=it}if(Z.tileHeight>Z.baseTileHeight){var rt=(Z.tileHeight-Z.baseTileHeight)*N.scaleY;Q+=rt}var ut=$?null:this.tileFilterOptions,dt=b(Y,j,J,Q,ut,N.scene.cameras.main,N.layer);return dt.length===0?!1:this.collideSpriteVsTilesHandler(M,dt,k,z,H,$,!0)},collideSpriteVsTilesHandler:function(M,N,k,z,H,$,X){for(var Y=M.isBody?M:M.body,j,J={left:0,right:0,top:0,bottom:0},Q,Z=!1,it=0;it<N.length;it++){j=N[it],Q=j.tilemapLayer;var rt=Q.tileToWorldXY(j.x,j.y);J.left=rt.x,J.top=rt.y,j.baseHeight!==j.height&&(J.top-=(j.height-j.baseHeight)*Q.scaleY),J.right=J.left+j.width*Q.scaleX,J.bottom=J.top+j.height*Q.scaleY,B(J,Y)&&(!z||z.call(H,M,j))&&w(j,M)&&($||I(it,Y,j,J,Q,this.TILE_BIAS,X))&&(this._total++,Z=!0,k&&k.call(H,M,j),$&&Y.onOverlap?this.emit(f.TILE_OVERLAP,M,j,Y):Y.onCollide&&this.emit(f.TILE_COLLIDE,M,j,Y))}return Z},collideGroupVsGroup:function(M,N,k,z,H,$){if(!(M.length===0||N.length===0))for(var X=M.getChildren(),Y=0;Y<X.length;Y++)this.collideSpriteVsGroup(X[Y],N,k,z,H,$)},wrap:function(M,N){M.body?this.wrapObject(M,N):M.getChildren?this.wrapArray(M.getChildren(),N):Array.isArray(M)?this.wrapArray(M,N):this.wrapObject(M,N)},wrapArray:function(M,N){for(var k=0;k<M.length;k++)this.wrapObject(M[k],N)},wrapObject:function(M,N){N===void 0&&(N=0),M.x=F(M.x,this.bounds.left-N,this.bounds.right+N),M.y=F(M.y,this.bounds.top-N,this.bounds.bottom+N)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});r.exports=G},5321:r=>{var m={setAcceleration:function(e,u){return this.body.acceleration.set(e,u),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};r.exports=m},29257:r=>{var m={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};r.exports=m},62122:r=>{var m={setBounce:function(e,u){return this.body.bounce.set(e,u),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,u,g,c){return this.body.setCollideWorldBounds(e,u,g,c),this}};r.exports=m},99803:r=>{var m={setDebug:function(e,u,g){return this.debugShowBody=e,this.debugShowVelocity=u,this.debugBodyColor=g,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};r.exports=m},87145:r=>{var m={setDrag:function(e,u){return this.body.drag.set(e,u),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};r.exports=m},96174:r=>{var m={enableBody:function(e,u,g,c,s){return e&&this.body.reset(u,g),c&&(this.body.gameObject.active=!0),s&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,u){return e===void 0&&(e=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};r.exports=m},51702:r=>{var m={setFriction:function(e,u){return this.body.friction.set(e,u),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};r.exports=m},25578:r=>{var m={setGravity:function(e,u){return this.body.gravity.set(e,u),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};r.exports=m},72029:r=>{var m={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};r.exports=m},34566:r=>{var m={setMass:function(e){return this.body.mass=e,this}};r.exports=m},2732:(r,m,e)=>{var u=e(15147),g=e(26673),c=e(22184),s=e(26535),o=function(a,l,p,h,f,v){var y=u(a,l-h,p-h,2*h,2*h,f,v);if(y.length===0)return y;for(var x=new g(l,p,h),S=new g,E=[],b=0;b<y.length;b++){var T=y[b];T.isCircle?(S.setTo(T.center.x,T.center.y,T.halfWidth),c(x,S)&&E.push(T)):s(x,T)&&E.push(T)}return E};r.exports=o},15147:r=>{var m=function(e,u,g,c,s,o,a){o===void 0&&(o=!0),a===void 0&&(a=!1);var l=[],p=[],h=e.treeMinMax;if(h.minX=u,h.minY=g,h.maxX=u+c,h.maxY=g+s,a&&(p=e.staticTree.search(h)),o&&e.useTree)l=e.tree.search(h);else if(o){var f=e.bodies,v={position:{x:u,y:g},left:u,top:g,right:u+c,bottom:g+s,isCircle:!1},y=e.intersects;f.iterate(function(x){y(x,v)&&l.push(x)})}return p.concat(l)};r.exports=m},57527:r=>{var m={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};r.exports=m},77687:r=>{var m={setOffset:function(e,u){return this.body.setOffset(e,u),this},setSize:function(e,u,g){return this.body.setSize(e,u,g),this},setBodySize:function(e,u,g){return this.body.setSize(e,u,g),this},setCircle:function(e,u,g){return this.body.setCircle(e,u,g),this}};r.exports=m},66536:r=>{var m={setVelocity:function(e,u){return this.body.setVelocity(e,u),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,u){return this.body.maxVelocity.set(e,u),this}};r.exports=m},7864:(r,m,e)=>{r.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}},47401:r=>{var m={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};r.exports=m},22346:r=>{r.exports="collide"},95092:r=>{r.exports="overlap"},15775:r=>{r.exports="pause"},74142:r=>{r.exports="resume"},22825:r=>{r.exports="tilecollide"},10851:r=>{r.exports="tileoverlap"},7543:r=>{r.exports="worldbounds"},1487:r=>{r.exports="worldstep"},27037:(r,m,e)=>{r.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}},39977:(r,m,e)=>{var u=e(47401),g=e(98611),c={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};c=g(!1,c,u),r.exports=c},25163:r=>{var m=function(e,u){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,u,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,u,e):!0};r.exports=m},98209:r=>{var m=function(e,u){u<0?(e.blocked.none=!1,e.blocked.left=!0):u>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=u,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};r.exports=m},72792:r=>{var m=function(e,u){u<0?(e.blocked.none=!1,e.blocked.up=!0):u>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=u,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};r.exports=m},27354:(r,m,e)=>{var u=e(14405),g=e(52926),c=e(28808),s=function(o,a,l,p,h,f,v){var y=p.left,x=p.top,S=p.right,E=p.bottom,b=l.faceLeft||l.faceRight,T=l.faceTop||l.faceBottom;if(v||(b=!0,T=!0),!b&&!T)return!1;var P=0,C=0,w=0,A=1;if(a.deltaAbsX()>a.deltaAbsY()?w=-1:a.deltaAbsX()<a.deltaAbsY()&&(A=-1),a.deltaX()!==0&&a.deltaY()!==0&&b&&T&&(w=Math.min(Math.abs(a.position.x-S),Math.abs(a.right-y)),A=Math.min(Math.abs(a.position.y-E),Math.abs(a.bottom-x))),w<A){if(b&&(P=u(a,l,y,S,f,v),P!==0&&!c(p,a)))return!0;T&&(C=g(a,l,x,E,f,v))}else{if(T&&(C=g(a,l,x,E,f,v),C!==0&&!c(p,a)))return!0;b&&(P=u(a,l,y,S,f,v))}return P!==0||C!==0};r.exports=s},14405:(r,m,e)=>{var u=e(98209),g=function(c,s,o,a,l,p){var h=0,f=s.faceLeft,v=s.faceRight,y=s.collideLeft,x=s.collideRight;return p||(f=!0,v=!0,y=!0,x=!0),c.deltaX()<0&&x&&c.checkCollision.left?v&&c.x<a&&(h=c.x-a,h<-l&&(h=0)):c.deltaX()>0&&y&&c.checkCollision.right&&f&&c.right>o&&(h=c.right-o,h>l&&(h=0)),h!==0&&(c.customSeparateX?c.overlapX=h:u(c,h)),h};r.exports=g},52926:(r,m,e)=>{var u=e(72792),g=function(c,s,o,a,l,p){var h=0,f=s.faceTop,v=s.faceBottom,y=s.collideUp,x=s.collideDown;return p||(f=!0,v=!0,y=!0,x=!0),c.deltaY()<0&&x&&c.checkCollision.up?v&&c.y<a&&(h=c.y-a,h<-l&&(h=0)):c.deltaY()>0&&y&&c.checkCollision.down&&f&&c.bottom>o&&(h=c.bottom-o,h>l&&(h=0)),h!==0&&(c.customSeparateY?c.overlapY=h:u(c,h)),h};r.exports=g},28808:r=>{var m=function(e,u){return!(u.right<=e.left||u.bottom<=e.top||u.position.x>=e.right||u.position.y>=e.bottom)};r.exports=m},8413:(r,m,e)=>{var u={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};r.exports=u},53954:(r,m,e)=>{r.exports={Arcade:e(39977),Matter:e(45949)}},63568:(r,m,e)=>{var u=e(56694),g=e(93736),c=new u({initialize:function(){this.boundsCenter=new g,this.centerDiff=new g},parseBody:function(s){if(s=s.hasOwnProperty("body")?s.body:s,!s.hasOwnProperty("bounds")||!s.hasOwnProperty("centerOfMass"))return!1;var o=this.boundsCenter,a=this.centerDiff,l=s.bounds.max.x-s.bounds.min.x,p=s.bounds.max.y-s.bounds.min.y,h=l*s.centerOfMass.x,f=p*s.centerOfMass.y;return o.set(l/2,p/2),a.set(h-o.x,f-o.y),!0},getTopLeft:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o+l.x+p.x,a+l.y+p.y)}return!1},getTopCenter:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o+p.x,a+l.y+p.y)}return!1},getTopRight:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o-(l.x-p.x),a+l.y+p.y)}return!1},getLeftCenter:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o+l.x+p.x,a+p.y)}return!1},getCenter:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.centerDiff;return new g(o+l.x,a+l.y)}return!1},getRightCenter:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o-(l.x-p.x),a+p.y)}return!1},getBottomLeft:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o+l.x+p.x,a-(l.y-p.y))}return!1},getBottomCenter:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o+p.x,a-(l.y-p.y))}return!1},getBottomRight:function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),this.parseBody(s)){var l=this.boundsCenter,p=this.centerDiff;return new g(o-(l.x-p.x),a-(l.y-p.y))}return!1}});r.exports=c},18171:(r,m,e)=>{var u=e(16929);u.Body=e(84125),u.Composite=e(11299),u.World=e(72005),u.Collision=e(63454),u.Detector=e(13657),u.Pairs=e(91327),u.Pair=e(70584),u.Query=e(13390),u.Resolver=e(44272),u.Constraint=e(52838),u.Common=e(68758),u.Engine=e(45775),u.Events=e(39073),u.Sleeping=e(22806),u.Plugin=e(84474),u.Bodies=e(68516),u.Composites=e(56643),u.Axes=e(50658),u.Bounds=e(84091),u.Svg=e(92765),u.Vector=e(10438),u.Vertices=e(39745),u.World.add=u.Composite.add,u.World.remove=u.Composite.remove,u.World.addComposite=u.Composite.addComposite,u.World.addBody=u.Composite.addBody,u.World.addConstraint=u.Composite.addConstraint,u.World.clear=u.Composite.clear,r.exports=u},72653:(r,m,e)=>{var u=e(68516),g=e(56694),c=e(56643),s=e(52838),o=e(92765),a=e(3860),l=e(7030),p=e(73658),h=e(84720),f=e(10998),v=e(72829),y=e(88596),x=e(39745),S=new g({initialize:function(b){this.world=b,this.scene=b.scene,this.sys=b.scene.sys},rectangle:function(E,b,T,P,C){var w=u.rectangle(E,b,T,P,C);return this.world.add(w),w},trapezoid:function(E,b,T,P,C,w){var A=u.trapezoid(E,b,T,P,C,w);return this.world.add(A),A},circle:function(E,b,T,P,C){var w=u.circle(E,b,T,P,C);return this.world.add(w),w},polygon:function(E,b,T,P,C){var w=u.polygon(E,b,T,P,C);return this.world.add(w),w},fromVertices:function(E,b,T,P,C,w,A){typeof T=="string"&&(T=x.fromPath(T));var R=u.fromVertices(E,b,T,P,C,w,A);return this.world.add(R),R},fromPhysicsEditor:function(E,b,T,P,C){C===void 0&&(C=!0);var w=f.parseBody(E,b,T,P);return C&&!this.world.has(w)&&this.world.add(w),w},fromSVG:function(E,b,T,P,C,w){P===void 0&&(P=1),C===void 0&&(C={}),w===void 0&&(w=!0);for(var A=T.getElementsByTagName("path"),R=[],I=0;I<A.length;I++){var L=o.pathToVertices(A[I],30);P!==1&&x.scale(L,P,P),R.push(L)}var O=u.fromVertices(E,b,R,C);return w&&this.world.add(O),O},fromJSON:function(E,b,T,P,C){P===void 0&&(P={}),C===void 0&&(C=!0);var w=v.parseBody(E,b,T,P);return w&&C&&this.world.add(w),w},imageStack:function(E,b,T,P,C,w,A,R,I){A===void 0&&(A=0),R===void 0&&(R=0),I===void 0&&(I={});var L=this.world,O=this.sys.displayList;I.addToWorld=!1;var D=c.stack(T,P,C,w,A,R,function(V,B){var U=new l(L,V,B,E,b,I);return O.add(U),U.body});return L.add(D),D},stack:function(E,b,T,P,C,w,A){var R=c.stack(E,b,T,P,C,w,A);return this.world.add(R),R},pyramid:function(E,b,T,P,C,w,A){var R=c.pyramid(E,b,T,P,C,w,A);return this.world.add(R),R},chain:function(E,b,T,P,C,w){return c.chain(E,b,T,P,C,w)},mesh:function(E,b,T,P,C){return c.mesh(E,b,T,P,C)},newtonsCradle:function(E,b,T,P,C){var w=c.newtonsCradle(E,b,T,P,C);return this.world.add(w),w},car:function(E,b,T,P,C){var w=c.car(E,b,T,P,C);return this.world.add(w),w},softBody:function(E,b,T,P,C,w,A,R,I,L){var O=c.softBody(E,b,T,P,C,w,A,R,I,L);return this.world.add(O),O},joint:function(E,b,T,P,C){return this.constraint(E,b,T,P,C)},spring:function(E,b,T,P,C){return this.constraint(E,b,T,P,C)},constraint:function(E,b,T,P,C){P===void 0&&(P=1),C===void 0&&(C={}),C.bodyA=E.type==="body"?E:E.body,C.bodyB=b.type==="body"?b:b.body,isNaN(T)||(C.length=T),C.stiffness=P;var w=s.create(C);return this.world.add(w),w},worldConstraint:function(E,b,T,P){T===void 0&&(T=1),P===void 0&&(P={}),P.bodyB=E.type==="body"?E:E.body,isNaN(b)||(P.length=b),P.stiffness=T;var C=s.create(P);return this.world.add(C),C},mouseSpring:function(E){return this.pointerConstraint(E)},pointerConstraint:function(E){E===void 0&&(E={}),E.hasOwnProperty("render")||(E.render={visible:!1});var b=new y(this.scene,this.world,E);return this.world.add(b.constraint),b},image:function(E,b,T,P,C){var w=new l(this.world,E,b,T,P,C);return this.sys.displayList.add(w),w},tileBody:function(E,b){return new h(this.world,E,b)},sprite:function(E,b,T,P,C){var w=new p(this.world,E,b,T,P,C);return this.sys.displayList.add(w),this.sys.updateList.add(w),w},gameObject:function(E,b,T){return a(this.world,E,b,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=S},3860:(r,m,e)=>{var u=e(74527),g=e(72632),c=e(93736);function s(a){return!!a.get&&typeof a.get=="function"||!!a.set&&typeof a.set=="function"}var o=function(a,l,p,h){p===void 0&&(p={}),h===void 0&&(h=!0);var f=l.x,v=l.y;l.body={temp:!0,position:{x:f,y:v}};var y=[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity];if(y.forEach(function(S){for(var E in S)s(S[E])?Object.defineProperty(l,E,{get:S[E].get,set:S[E].set}):Object.defineProperty(l,E,{value:S[E]})}),l.world=a,l._tempVec2=new c(f,v),p.hasOwnProperty("type")&&p.type==="body")l.setExistingBody(p,h);else{var x=g(p,"shape",null);x||(x="rectangle"),p.addToWorld=h,l.setBody(x,p)}return l};r.exports=o},7030:(r,m,e)=>{var u=e(56694),g=e(74527),c=e(89980),s=e(72632),o=e(1539),a=e(58210),l=e(93736),p=new u({Extends:o,Mixins:[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity,a],initialize:function(f,v,y,x,S,E){c.call(this,f.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(x,S),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new l(v,y);var b=s(E,"shape",null);b?this.setBody(b,E):this.setRectangle(this.width,this.height,E),this.setPosition(v,y),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=p},50583:(r,m,e)=>{var u=e(84093),g=e(50658),c=e(68516),s=e(84125),o=e(63568),a=e(84091),l=e(56694),p=e(63454),h=e(68758),f=e(11299),v=e(56643),y=e(52838),x=e(13657),S=e(53996),E=e(72653),b=e(72632),T=e(10850),P=e(1675),C=e(80391),w=e(16929),A=e(44097),R=e(30657),I=e(70584),L=e(91327),O=e(84474),D=e(91963),V=e(13390),B=e(44272),U=e(7599),W=e(92765),F=e(10438),G=e(39745),M=e(31468);h.setDecomp(e(81084));var N=new l({initialize:function(z){this.scene=z,this.systems=z.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=s,this.composite=f,this.collision=p,this.detector=x,this.pair=I,this.pairs=L,this.query=V,this.resolver=B,this.constraint=y,this.bodies=c,this.composites=v,this.axes=g,this.bounds=a,this.svg=W,this.vector=F,this.vertices=G,this.verts=G,this._tempVec2=F.create(),T(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),T(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),T(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),B._restingThresh=T(this.config,"restingThresh",4),B._restingThreshTangent=T(this.config,"restingThreshTangent",6),B._positionDampen=T(this.config,"positionDampen",.9),B._positionWarming=T(this.config,"positionWarming",.8),B._frictionNormalMultiplier=T(this.config,"frictionNormalMultiplier",5),z.sys.events.once(U.BOOT,this.boot,this),z.sys.events.on(U.START,this.start,this)},boot:function(){this.world=new M(this.scene,this.config),this.add=new E(this.world),this.bodyBounds=new o,this.systems.events.once(U.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new M(this.scene,this.config),this.add=new E(this.world));var k=this.systems.events;k.on(U.UPDATE,this.world.update,this.world),k.on(U.POST_UPDATE,this.world.postUpdate,this.world),k.once(U.SHUTDOWN,this.shutdown,this)},getConfig:function(){var k=this.systems.game.config.physics,z=this.systems.settings.physics,H=R(b(z,"matter",{}),b(k,"matter",{}));return H},enableAttractorPlugin:function(){return O.register(P),O.use(w,P),this},enableWrapPlugin:function(){return O.register(A),O.use(w,A),this},enableCollisionEventsPlugin:function(){return O.register(C),O.use(w,C),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(k,z){this.world.step(k,z)},containsPoint:function(k,z,H){k=this.getMatterBodies(k);var $=F.create(z,H),X=V.point(k,$);return X.length>0},intersectPoint:function(k,z,H){H=this.getMatterBodies(H);var $=F.create(k,z),X=[],Y=V.point(H,$);return Y.forEach(function(j){X.indexOf(j)===-1&&X.push(j)}),X},intersectRect:function(k,z,H,$,X,Y){X===void 0&&(X=!1),Y=this.getMatterBodies(Y);var j={min:{x:k,y:z},max:{x:k+H,y:z+$}},J=[],Q=V.region(Y,j,X);return Q.forEach(function(Z){J.indexOf(Z)===-1&&J.push(Z)}),J},intersectRay:function(k,z,H,$,X,Y){X===void 0&&(X=1),Y=this.getMatterBodies(Y);for(var j=[],J=V.ray(Y,F.create(k,z),F.create(H,$),X),Q=0;Q<J.length;Q++)j.push(J[Q].body);return j},intersectBody:function(k,z){z=this.getMatterBodies(z);for(var H=[],$=V.collides(k,z),X=0;X<$.length;X++){var Y=$[X];Y.bodyA===k?H.push(Y.bodyB):H.push(Y.bodyA)}return H},overlap:function(k,z,H,$,X){H===void 0&&(H=null),$===void 0&&($=null),X===void 0&&(X=H),Array.isArray(k)||(k=[k]),k=this.getMatterBodies(k),z=this.getMatterBodies(z);for(var Y=!1,j=0;j<k.length;j++)for(var J=k[j],Q=V.collides(J,z),Z=0;Z<Q.length;Z++){var it=Q[Z],rt=it.bodyA.id===J.id?it.bodyB:it.bodyA;if(!$||$.call(X,J,rt,it)){if(Y=!0,H)H.call(X,J,rt,it);else if(!$)return!0}}return Y},setCollisionCategory:function(k,z){return k=this.getMatterBodies(k),k.forEach(function(H){H.collisionFilter.category=z}),this},setCollisionGroup:function(k,z){return k=this.getMatterBodies(k),k.forEach(function(H){H.collisionFilter.group=z}),this},setCollidesWith:function(k,z){k=this.getMatterBodies(k);var H=0;if(!Array.isArray(z))H=z;else for(var $=0;$<z.length;$++)H|=z[$];return k.forEach(function(X){X.collisionFilter.mask=H}),this},getMatterBodies:function(k){if(!k)return this.world.getAllBodies();Array.isArray(k)||(k=[k]);for(var z=[],H=0;H<k.length;H++){var $=k[H].hasOwnProperty("body")?k[H].body:k[H];z.push($)}return z},setVelocity:function(k,z,H){k=this.getMatterBodies(k);var $=this._tempVec2;return $.x=z,$.y=H,k.forEach(function(X){s.setVelocity(X,$)}),this},setVelocityX:function(k,z){k=this.getMatterBodies(k);var H=this._tempVec2;return H.x=z,k.forEach(function($){H.y=$.velocity.y,s.setVelocity($,H)}),this},setVelocityY:function(k,z){k=this.getMatterBodies(k);var H=this._tempVec2;return H.y=z,k.forEach(function($){H.x=$.velocity.x,s.setVelocity($,H)}),this},setAngularVelocity:function(k,z){return k=this.getMatterBodies(k),k.forEach(function(H){s.setAngularVelocity(H,z)}),this},applyForce:function(k,z){k=this.getMatterBodies(k);var H=this._tempVec2;return k.forEach(function($){H.x=$.position.x,H.y=$.position.y,s.applyForce($,H,z)}),this},applyForceFromPosition:function(k,z,H,$){k=this.getMatterBodies(k);var X=this._tempVec2;return k.forEach(function(Y){$===void 0&&($=Y.angle),X.x=H*Math.cos($),X.y=H*Math.sin($),s.applyForce(Y,z,X)}),this},applyForceFromAngle:function(k,z,H){k=this.getMatterBodies(k);var $=this._tempVec2;return k.forEach(function(X){H===void 0&&(H=X.angle),$.x=z*Math.cos(H),$.y=z*Math.sin(H),s.applyForce(X,{x:X.position.x,y:X.position.y},$)}),this},getConstraintLength:function(k){var z=k.pointA.x,H=k.pointA.y,$=k.pointB.x,X=k.pointB.y;return k.bodyA&&(z+=k.bodyA.position.x,H+=k.bodyA.position.y),k.bodyB&&($+=k.bodyB.position.x,X+=k.bodyB.position.y),S(z,H,$,X)},alignBody:function(k,z,H,$){k=k.hasOwnProperty("body")?k.body:k;var X;switch($){case u.TOP_LEFT:case u.LEFT_TOP:X=this.bodyBounds.getTopLeft(k,z,H);break;case u.TOP_CENTER:X=this.bodyBounds.getTopCenter(k,z,H);break;case u.TOP_RIGHT:case u.RIGHT_TOP:X=this.bodyBounds.getTopRight(k,z,H);break;case u.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(k,z,H);break;case u.CENTER:X=this.bodyBounds.getCenter(k,z,H);break;case u.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(k,z,H);break;case u.LEFT_BOTTOM:case u.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(k,z,H);break;case u.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(k,z,H);break;case u.BOTTOM_RIGHT:case u.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(k,z,H);break}return X&&s.setPosition(k,X),this},shutdown:function(){var k=this.systems.events;this.world&&(k.off(U.UPDATE,this.world.update,this.world),k.off(U.POST_UPDATE,this.world.postUpdate,this.world)),k.off(U.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(U.START,this.start,this),this.scene=null,this.systems=null}});D.register("MatterPhysics",N,"matterPhysics"),r.exports=N},73658:(r,m,e)=>{var u=e(16569),g=e(56694),c=e(74527),s=e(89980),o=e(72632),a=e(58210),l=e(13747),p=e(93736),h=new g({Extends:l,Mixins:[c.Bounce,c.Collision,c.Force,c.Friction,c.Gravity,c.Mass,c.Sensor,c.SetBody,c.Sleep,c.Static,c.Transform,c.Velocity,a],initialize:function(v,y,x,S,E,b){s.call(this,v.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(S,E),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new p(y,x);var T=o(b,"shape",null);T?this.setBody(T,b):this.setRectangle(this.width,this.height,b),this.setPosition(y,x),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=h},84720:(r,m,e)=>{var u=e(68516),g=e(84125),c=e(56694),s=e(74527),o=e(28699),a=e(6659),l=e(72632),p=e(19256),h=e(39745),f=new c({Extends:a,Mixins:[s.Bounce,s.Collision,s.Friction,s.Gravity,s.Mass,s.Sensor,s.Sleep,s.Static],initialize:function(y,x,S){a.call(this),this.tile=x,this.world=y,x.physics.matterBody&&x.physics.matterBody.destroy(),x.physics.matterBody=this;var E=l(S,"body",null),b=l(S,"addToWorld",!0);if(E)this.setBody(E,b);else{var T=x.getCollisionGroup(),P=l(T,"objects",[]);P.length>0?this.setFromTileCollision(S):this.setFromTileRectangle(S)}if(x.flipX||x.flipY){var C={x:x.getCenterX(),y:x.getCenterY()},w=x.flipX?-1:1,A=x.flipY?-1:1;g.scale(E,w,A,C)}},setFromTileRectangle:function(v){v===void 0&&(v={}),p(v,"isStatic")||(v.isStatic=!0),p(v,"addToWorld")||(v.addToWorld=!0);var y=this.tile.getBounds(),x=y.x+y.width/2,S=y.y+y.height/2,E=u.rectangle(x,S,y.width,y.height,v);return this.setBody(E,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),p(v,"isStatic")||(v.isStatic=!0),p(v,"addToWorld")||(v.addToWorld=!0);for(var y=this.tile.tilemapLayer.scaleX,x=this.tile.tilemapLayer.scaleY,S=this.tile.getLeft(),E=this.tile.getTop(),b=this.tile.getCollisionGroup(),T=l(b,"objects",[]),P=[],C=0;C<T.length;C++){var w=T[C],A=S+w.x*y,R=E+w.y*x,I=w.width*y,L=w.height*x,O=null;if(w.rectangle)O=u.rectangle(A+I/2,R+L/2,I,L,v);else if(w.ellipse)O=u.circle(A+I/2,R+L/2,I/2,v);else if(w.polygon||w.polyline){var D=w.polygon?w.polygon:w.polyline,V=D.map(function(F){return{x:F.x*y,y:F.y*x}}),B=h.create(V),U=h.centre(B);A+=U.x,R+=U.y,O=u.fromVertices(A,R,B,v)}O&&P.push(O)}if(P.length===1)this.setBody(P[0],v.addToWorld);else if(P.length>1){var W=o(v);W.parts=P,this.setBody(g.create(W),W.addToWorld)}return this},setBody:function(v,y){return y===void 0&&(y=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,y&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});r.exports=f},10998:(r,m,e)=>{var u=e(68516),g=e(84125),c=e(68758),s=e(72632),o=e(39745),a={parseBody:function(l,p,h,f){f===void 0&&(f={});for(var v=s(h,"fixtures",[]),y=[],x=0;x<v.length;x++)for(var S=this.parseFixture(v[x]),E=0;E<S.length;E++)y.push(S[E]);var b=c.clone(h,!0);c.extend(b,f,!0),delete b.fixtures,delete b.type;var T=g.create(b);return g.setParts(T,y),g.setPosition(T,{x:l,y:p}),T},parseFixture:function(l){var p=c.extend({},!1,l);delete p.circle,delete p.vertices;var h;if(l.circle){var f=s(l.circle,"x"),v=s(l.circle,"y"),y=s(l.circle,"radius");h=[u.circle(f,v,y,p)]}else l.vertices&&(h=this.parseVertices(l.vertices,p));return h},parseVertices:function(l,p){p===void 0&&(p={});for(var h=[],f=0;f<l.length;f++)o.clockwiseSort(l[f]),h.push(g.create(c.extend({position:o.centre(l[f]),vertices:l[f]},p)));return u.flagCoincidentParts(h)}};r.exports=a},72829:(r,m,e)=>{var u=e(68516),g=e(84125),c={parseBody:function(s,o,a,l){l===void 0&&(l={});var p,h=a.vertices;if(h.length===1)l.vertices=h[0],p=g.create(l),u.flagCoincidentParts(p.parts);else{for(var f=[],v=0;v<h.length;v++){var y=g.create({vertices:h[v]});f.push(y)}u.flagCoincidentParts(f),l.parts=f,p=g.create(l)}return p.label=a.label,g.setPosition(p,{x:s,y:o}),p}};r.exports=c},88596:(r,m,e)=>{var u=e(84091),g=e(56694),c=e(11299),s=e(52838),o=e(13657),a=e(35416),l=e(33963),p=e(30657),h=e(22806),f=e(93736),v=e(39745),y=new g({initialize:function(S,E,b){b===void 0&&(b={});var T={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=S,this.world=E,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=s.create(p(b,T)),this.world.on(a.BEFORE_UPDATE,this.update,this),S.sys.input.on(l.POINTER_DOWN,this.onDown,this),S.sys.input.on(l.POINTER_UP,this.onUp,this)},onDown:function(x){this.pointer||(this.pointer=x,this.camera=x.camera)},onUp:function(x){x===this.pointer&&(this.pointer=null)},getBody:function(x){var S=this.position,E=this.constraint;this.camera.getWorldPoint(x.x,x.y,S);for(var b=c.allBodies(this.world.localWorld),T=0;T<b.length;T++){var P=b[T];if(!P.ignorePointer&&u.contains(P.bounds,S)&&o.canCollide(P.collisionFilter,E.collisionFilter)&&this.hitTestBody(P,S))return this.world.emit(a.DRAG_START,P,this.part,this),!0}return!1},hitTestBody:function(x,S){for(var E=this.constraint,b=x.parts.length,T=b>1?1:0,P=T;P<b;P++){var C=x.parts[P];if(v.contains(C.vertices,S))return E.pointA=S,E.pointB={x:S.x-x.position.x,y:S.y-x.position.y},E.bodyB=x,E.angleB=x.angle,h.set(x,!1),this.part=C,this.body=x,!0}return!1},update:function(){var x=this.pointer,S=this.body;if(!this.active||!x){S&&this.stopDrag();return}if(!x.isDown&&S){this.stopDrag();return}else if(x.isDown){if(!S&&!this.getBody(x))return;S=this.body;var E=this.position,b=this.constraint;this.camera.getWorldPoint(x.x,x.y,E),b.pointA.x=E.x,b.pointA.y=E.y,h.set(S,!1),this.world.emit(a.DRAG,S,this)}},stopDrag:function(){var x=this.body,S=this.constraint;S.bodyB=null,S.pointB=null,this.pointer=null,this.body=null,this.part=null,x&&this.world.emit(a.DRAG_END,x,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(a.BEFORE_UPDATE,this.update),this.scene.sys.input.off(l.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(l.POINTER_UP,this.onUp,this)}});r.exports=y},31468:(r,m,e)=>{var u=e(68516),g=e(84125),c=e(56694),s=e(68758),o=e(11299),a=e(45775),l=e(6659),p=e(35416),h=e(72632),f=e(10850),v=e(84125),y=e(39073),x=e(84720),S=e(72005),E=e(10438),b=new c({Extends:l,initialize:function(P,C){l.call(this),this.scene=P,this.engine=a.create(C),this.localWorld=this.engine.world;var w=f(C,"gravity",null);w?this.setGravity(w.x,w.y,w.scale):w===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(C,"enabled",!0),this.getDelta=f(C,"getDelta",this.update60Hz);var A=h(C,"runner",{}),R=h(A,"fps",!1),I=h(A,"fps",60),L=h(A,"delta",1e3/I),O=h(A,"deltaMin",1e3/I),D=h(A,"deltaMax",1e3/(I*.5));R||(I=1e3/L),this.runner={fps:I,deltaSampleSize:h(A,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:h(A,"isFixed",!1),delta:L,deltaMin:O,deltaMax:D},this.autoUpdate=f(C,"autoUpdate",!0);var V=f(C,"debug",!1);if(this.drawDebug=typeof V=="object"?!0:V,this.debugGraphic,this.debugConfig={showAxes:h(V,"showAxes",!1),showAngleIndicator:h(V,"showAngleIndicator",!1),angleColor:h(V,"angleColor",15208787),showBroadphase:h(V,"showBroadphase",!1),broadphaseColor:h(V,"broadphaseColor",16757760),showBounds:h(V,"showBounds",!1),boundsColor:h(V,"boundsColor",16777215),showVelocity:h(V,"showVelocity",!1),velocityColor:h(V,"velocityColor",44783),showCollisions:h(V,"showCollisions",!1),collisionColor:h(V,"collisionColor",16094476),showSeparations:h(V,"showSeparations",!1),separationColor:h(V,"separationColor",16753920),showBody:h(V,"showBody",!0),showStaticBody:h(V,"showStaticBody",!0),showInternalEdges:h(V,"showInternalEdges",!1),renderFill:h(V,"renderFill",!1),renderLine:h(V,"renderLine",!0),fillColor:h(V,"fillColor",1075465),fillOpacity:h(V,"fillOpacity",1),lineColor:h(V,"lineColor",2678297),lineOpacity:h(V,"lineOpacity",1),lineThickness:h(V,"lineThickness",1),staticFillColor:h(V,"staticFillColor",857979),staticLineColor:h(V,"staticLineColor",1255396),showSleeping:h(V,"showSleeping",!1),staticBodySleepOpacity:h(V,"staticBodySleepOpacity",.7),sleepFillColor:h(V,"sleepFillColor",4605510),sleepLineColor:h(V,"sleepLineColor",10066585),showSensors:h(V,"showSensors",!0),sensorFillColor:h(V,"sensorFillColor",857979),sensorLineColor:h(V,"sensorLineColor",1255396),showPositions:h(V,"showPositions",!0),positionSize:h(V,"positionSize",4),positionColor:h(V,"positionColor",14697178),showJoint:h(V,"showJoint",!0),jointColor:h(V,"jointColor",14737474),jointLineOpacity:h(V,"jointLineOpacity",1),jointLineThickness:h(V,"jointLineThickness",2),pinSize:h(V,"pinSize",4),pinColor:h(V,"pinColor",4382944),springColor:h(V,"springColor",14697184),anchorColor:h(V,"anchorColor",15724527),anchorSize:h(V,"anchorSize",4),showConvexHulls:h(V,"showConvexHulls",!1),hullColor:h(V,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),h(C,"setBounds",!1)){var B=C.setBounds;if(typeof B=="boolean")this.setBounds();else{var U=h(B,"x",0),W=h(B,"y",0),F=h(B,"width",P.sys.scale.width),G=h(B,"height",P.sys.scale.height),M=h(B,"thickness",64),N=h(B,"left",!0),k=h(B,"right",!0),z=h(B,"top",!0),H=h(B,"bottom",!0);this.setBounds(U,W,F,G,M,N,k,z,H)}}},setCompositeRenderStyle:function(T){var P=T.bodies,C=T.constraints,w=T.composites,A,R,I;for(A=0;A<P.length;A++)R=P[A],I=R.render,this.setBodyRenderStyle(R,I.lineColor,I.lineOpacity,I.lineThickness,I.fillColor,I.fillOpacity);for(A=0;A<C.length;A++)R=C[A],I=R.render,this.setConstraintRenderStyle(R,I.lineColor,I.lineOpacity,I.lineThickness,I.pinSize,I.anchorColor,I.anchorSize);for(A=0;A<w.length;A++)R=w[A],this.setCompositeRenderStyle(R);return this},setBodyRenderStyle:function(T,P,C,w,A,R){var I=T.render,L=this.debugConfig;return I?(P==null&&(P=T.isStatic?L.staticLineColor:L.lineColor),C==null&&(C=L.lineOpacity),w==null&&(w=L.lineThickness),A==null&&(A=T.isStatic?L.staticFillColor:L.fillColor),R==null&&(R=L.fillOpacity),P!==!1&&(I.lineColor=P),C!==!1&&(I.lineOpacity=C),w!==!1&&(I.lineThickness=w),A!==!1&&(I.fillColor=A),R!==!1&&(I.fillOpacity=R),this):this},setConstraintRenderStyle:function(T,P,C,w,A,R,I){var L=T.render,O=this.debugConfig;if(!L)return this;if(P==null){var D=L.type;D==="line"?P=O.jointColor:D==="pin"?P=O.pinColor:D==="spring"&&(P=O.springColor)}return C==null&&(C=O.jointLineOpacity),w==null&&(w=O.jointLineThickness),A==null&&(A=O.pinSize),R==null&&(R=O.anchorColor),I==null&&(I=O.anchorSize),P!==!1&&(L.lineColor=P),C!==!1&&(L.lineOpacity=C),w!==!1&&(L.lineThickness=w),A!==!1&&(L.pinSize=A),R!==!1&&(L.anchorColor=R),I!==!1&&(L.anchorSize=I),this},setEventsProxy:function(){var T=this,P=this.engine,C=this.localWorld;this.drawDebug&&(y.on(C,"compositeModified",function(w){T.setCompositeRenderStyle(w)}),y.on(C,"beforeAdd",function(w){for(var A=[].concat(w.object),R=0;R<A.length;R++){var I=A[R],L=I.render;I.type==="body"?T.setBodyRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity):I.type==="composite"?T.setCompositeRenderStyle(I):I.type==="constraint"&&T.setConstraintRenderStyle(I,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize)}})),y.on(C,"beforeAdd",function(w){T.emit(p.BEFORE_ADD,w)}),y.on(C,"afterAdd",function(w){T.emit(p.AFTER_ADD,w)}),y.on(C,"beforeRemove",function(w){T.emit(p.BEFORE_REMOVE,w)}),y.on(C,"afterRemove",function(w){T.emit(p.AFTER_REMOVE,w)}),y.on(P,"beforeUpdate",function(w){T.emit(p.BEFORE_UPDATE,w)}),y.on(P,"afterUpdate",function(w){T.emit(p.AFTER_UPDATE,w)}),y.on(P,"collisionStart",function(w){var A=w.pairs,R,I;A.length>0&&(R=A[0].bodyA,I=A[0].bodyB),T.emit(p.COLLISION_START,w,R,I)}),y.on(P,"collisionActive",function(w){var A=w.pairs,R,I;A.length>0&&(R=A[0].bodyA,I=A[0].bodyB),T.emit(p.COLLISION_ACTIVE,w,R,I)}),y.on(P,"collisionEnd",function(w){var A=w.pairs,R,I;A.length>0&&(R=A[0].bodyA,I=A[0].bodyB),T.emit(p.COLLISION_END,w,R,I)})},setBounds:function(T,P,C,w,A,R,I,L,O){return T===void 0&&(T=0),P===void 0&&(P=0),C===void 0&&(C=this.scene.sys.scale.width),w===void 0&&(w=this.scene.sys.scale.height),A===void 0&&(A=64),R===void 0&&(R=!0),I===void 0&&(I=!0),L===void 0&&(L=!0),O===void 0&&(O=!0),this.updateWall(R,"left",T-A,P-A,A,w+A*2),this.updateWall(I,"right",T+C,P-A,A,w+A*2),this.updateWall(L,"top",T,P-A,C,A),this.updateWall(O,"bottom",T,P+w,C,A),this},updateWall:function(T,P,C,w,A,R){var I=this.walls[P];T?(I&&S.remove(this.localWorld,I),C+=A/2,w+=R/2,this.walls[P]=this.create(C,w,A,R,{isStatic:!0,friction:0,frictionStatic:0})):(I&&S.remove(this.localWorld,I),this.walls[P]=null)},createDebugGraphic:function(){var T=this.scene.sys.add.graphics({x:0,y:0});return T.setDepth(Number.MAX_VALUE),this.debugGraphic=T,this.drawDebug=!0,T},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(T,P,C){return T===void 0&&(T=0),P===void 0&&(P=1),C===void 0&&(C=.001),this.localWorld.gravity.x=T,this.localWorld.gravity.y=P,this.localWorld.gravity.scale=C,this},create:function(T,P,C,w,A){var R=u.rectangle(T,P,C,w,A);return S.add(this.localWorld,R),R},add:function(T){return S.add(this.localWorld,T),this},remove:function(T,P){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++){var w=T[C],A=w.body?w.body:w;o.remove(this.localWorld,A,P)}return this},removeConstraint:function(T,P){return o.remove(this.localWorld,T,P),this},convertTilemapLayer:function(T,P){var C=T.layer,w=T.getTilesWithin(0,0,C.width,C.height,{isColliding:!0});return this.convertTiles(w,P),this},convertTiles:function(T,P){if(T.length===0)return this;for(var C=0;C<T.length;C++)new x(this,T[C],P);return this},nextGroup:function(T){return v.nextGroup(T)},nextCategory:function(){return v.nextCategory()},pause:function(){return this.enabled=!1,this.emit(p.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(p.RESUME),this},update:function(T,P){if(!(!this.enabled||!this.autoUpdate)){var C=this.engine,w=this.runner,A=C.timing;w.isFixed?P=this.getDelta(T,P):(P=T-w.timePrev||w.delta,w.timePrev=T,w.deltaHistory.push(P),w.deltaHistory=w.deltaHistory.slice(-w.deltaSampleSize),P=Math.min.apply(null,w.deltaHistory),P=P<w.deltaMin?w.deltaMin:P,P=P>w.deltaMax?w.deltaMax:P,w.delta=P),w.timeScalePrev=A.timeScale,w.frameCounter+=1,T-w.counterTimestamp>=1e3&&(w.fps=w.frameCounter*((T-w.counterTimestamp)/1e3),w.counterTimestamp=T,w.frameCounter=0),a.update(C,P)}},step:function(T){a.update(this.engine,T)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(T){var P=T.hasOwnProperty("body")?T.body:T;return o.get(this.localWorld,P.id,P.type)!==null},getAllBodies:function(){return o.allBodies(this.localWorld)},getAllConstraints:function(){return o.allConstraints(this.localWorld)},getAllComposites:function(){return o.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var T=this.debugConfig,P=this.engine,C=this.debugGraphic,w=o.allBodies(this.localWorld);this.debugGraphic.clear(),T.showBroadphase&&P.broadphase.controller&&this.renderGrid(P.broadphase,C,T.broadphaseColor,.5),T.showBounds&&this.renderBodyBounds(w,C,T.boundsColor,.5),(T.showBody||T.showStaticBody)&&this.renderBodies(w),T.showJoint&&this.renderJoints(),(T.showAxes||T.showAngleIndicator)&&this.renderBodyAxes(w,C,T.showAxes,T.angleColor,.5),T.showVelocity&&this.renderBodyVelocity(w,C,T.velocityColor,1,2),T.showSeparations&&this.renderSeparations(P.pairs.list,C,T.separationColor),T.showCollisions&&this.renderCollisions(P.pairs.list,C,T.collisionColor)}},renderGrid:function(T,P,C,w){P.lineStyle(1,C,w);for(var A=s.keys(T.buckets),R=0;R<A.length;R++){var I=A[R];if(!(T.buckets[I].length<2)){var L=I.split(/C|R/);P.strokeRect(parseInt(L[1],10)*T.bucketWidth,parseInt(L[2],10)*T.bucketHeight,T.bucketWidth,T.bucketHeight)}}return this},renderSeparations:function(T,P,C){P.lineStyle(1,C,1);for(var w=0;w<T.length;w++){var A=T[w];if(A.isActive){var R=A.collision,I=R.bodyA,L=R.bodyB,O=I.position,D=L.position,V=R.penetration,B=!I.isStatic&&!L.isStatic?4:1;L.isStatic&&(B=0),P.lineBetween(D.x,D.y,D.x-V.x*B,D.y-V.y*B),B=!I.isStatic&&!L.isStatic?4:1,I.isStatic&&(B=0),P.lineBetween(O.x,O.y,O.x-V.x*B,O.y-V.y*B)}}return this},renderCollisions:function(T,P,C){P.lineStyle(1,C,.5),P.fillStyle(C,1);var w,A;for(w=0;w<T.length;w++)if(A=T[w],!!A.isActive)for(var R=0;R<A.activeContacts.length;R++){var I=A.activeContacts[R],L=I.vertex;P.fillRect(L.x-2,L.y-2,5,5)}for(w=0;w<T.length;w++)if(A=T[w],!!A.isActive){var O=A.collision,D=A.activeContacts;if(D.length>0){var V=D[0].vertex.x,B=D[0].vertex.y;D.length===2&&(V=(D[0].vertex.x+D[1].vertex.x)/2,B=(D[0].vertex.y+D[1].vertex.y)/2),O.bodyB===O.supports[0].body||O.bodyA.isStatic?P.lineBetween(V-O.normal.x*8,B-O.normal.y*8,V,B):P.lineBetween(V+O.normal.x*8,B+O.normal.y*8,V,B)}}return this},renderBodyBounds:function(T,P,C,w){P.lineStyle(1,C,w);for(var A=0;A<T.length;A++){var R=T[A];if(R.render.visible){var I=R.bounds;if(I)P.strokeRect(I.min.x,I.min.y,I.max.x-I.min.x,I.max.y-I.min.y);else for(var L=R.parts,O=L.length>1?1:0;O<L.length;O++){var D=L[O];P.strokeRect(D.bounds.min.x,D.bounds.min.y,D.bounds.max.x-D.bounds.min.x,D.bounds.max.y-D.bounds.min.y)}}}return this},renderBodyAxes:function(T,P,C,w,A){P.lineStyle(1,w,A);for(var R=0;R<T.length;R++){var I=T[R],L=I.parts;if(I.render.visible){var O,D,V;if(C)for(D=L.length>1?1:0;D<L.length;D++)for(O=L[D],V=0;V<O.axes.length;V++){var B=O.axes[V];P.lineBetween(O.position.x,O.position.y,O.position.x+B.x*20,O.position.y+B.y*20)}else for(D=L.length>1?1:0;D<L.length;D++)for(O=L[D],V=0;V<O.axes.length;V++)P.lineBetween(O.position.x,O.position.y,(O.vertices[0].x+O.vertices[O.vertices.length-1].x)/2,(O.vertices[0].y+O.vertices[O.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(T,P,C,w,A){P.lineStyle(A,C,w);for(var R=0;R<T.length;R++){var I=T[R];I.render.visible&&P.lineBetween(I.position.x,I.position.y,I.position.x+(I.position.x-I.positionPrev.x)*2,I.position.y+(I.position.y-I.positionPrev.y)*2)}return this},renderBodies:function(T){for(var P=this.debugGraphic,C=this.debugConfig,w=C.showBody,A=C.showStaticBody,R=C.showSleeping,I=C.showInternalEdges,L=C.showConvexHulls,O=C.renderFill,D=C.renderLine,V=C.staticBodySleepOpacity,B=C.sleepFillColor,U=C.sleepLineColor,W=C.hullColor,F=0;F<T.length;F++){var G=T[F];if(G.render.visible&&!(!A&&G.isStatic||!w&&!G.isStatic)){var M=G.render.lineColor,N=G.render.lineOpacity,k=G.render.lineThickness,z=G.render.fillColor,H=G.render.fillOpacity;R&&G.isSleeping&&(G.isStatic?(N*=V,H*=V):(M=U,z=B)),O||(z=null),D||(M=null),this.renderBody(G,P,I,M,N,k,z,H);var $=G.parts.length;L&&$>1&&this.renderConvexHull(G,P,W,k)}}},renderBody:function(T,P,C,w,A,R,I,L){w===void 0&&(w=null),A===void 0&&(A=null),R===void 0&&(R=1),I===void 0&&(I=null),L===void 0&&(L=null);for(var O=this.debugConfig,D=O.sensorFillColor,V=O.sensorLineColor,B=T.parts,U=B.length,W=U>1?1:0;W<U;W++){var F=B[W],G=F.render,M=G.opacity;if(!(!G.visible||M===0||F.isSensor&&!O.showSensors)){var N=F.circleRadius;if(P.beginPath(),F.isSensor?(I!==null&&P.fillStyle(D,L*M),w!==null&&P.lineStyle(R,V,A*M)):(I!==null&&P.fillStyle(I,L*M),w!==null&&P.lineStyle(R,w,A*M)),N)P.arc(F.position.x,F.position.y,N,0,2*Math.PI);else{var k=F.vertices,z=k.length;P.moveTo(k[0].x,k[0].y);for(var H=1;H<z;H++){var $=k[H];if(!k[H-1].isInternal||C?P.lineTo($.x,$.y):P.moveTo($.x,$.y),H<z&&$.isInternal&&!C){var X=(H+1)%z;P.moveTo(k[X].x,k[X].y)}}P.closePath()}I!==null&&P.fillPath(),w!==null&&P.strokePath()}}if(O.showPositions&&!T.isStatic){var Y=T.position.x,j=T.position.y,J=Math.ceil(O.positionSize/2);P.fillStyle(O.positionColor,1),P.fillRect(Y-J,j-J,O.positionSize,O.positionSize)}return this},renderConvexHull:function(T,P,C,w){w===void 0&&(w=1);var A=T.parts,R=A.length;if(R>1){var I=T.vertices;P.lineStyle(w,C),P.beginPath(),P.moveTo(I[0].x,I[0].y);for(var L=1;L<I.length;L++)P.lineTo(I[L].x,I[L].y);P.lineTo(I[0].x,I[0].y),P.strokePath()}return this},renderJoints:function(){for(var T=this.debugGraphic,P=o.allConstraints(this.localWorld),C=0;C<P.length;C++){var w=P[C].render,A=w.lineColor,R=w.lineOpacity,I=w.lineThickness,L=w.pinSize,O=w.anchorColor,D=w.anchorSize;this.renderConstraint(P[C],T,A,R,I,L,O,D)}},renderConstraint:function(T,P,C,w,A,R,I,L){var O=T.render;if(!O.visible||!T.pointA||!T.pointB)return this;P.lineStyle(A,C,w);var D=T.bodyA,V=T.bodyB,B,U;if(D?B=E.add(D.position,T.pointA):B=T.pointA,O.type==="pin")P.strokeCircle(B.x,B.y,R);else{if(V?U=E.add(V.position,T.pointB):U=T.pointB,P.beginPath(),P.moveTo(B.x,B.y),O.type==="spring")for(var W=E.sub(U,B),F=E.perp(E.normalise(W)),G=Math.ceil(s.clamp(T.length/5,12,20)),M,N=1;N<G;N+=1)M=N%2===0?1:-1,P.lineTo(B.x+W.x*(N/G)+F.x*M*4,B.y+W.y*(N/G)+F.y*M*4);P.lineTo(U.x,U.y)}return P.strokePath(),O.anchors&&L>0&&(P.fillStyle(I),P.fillCircle(B.x,B.y,L),P.fillCircle(U.x,U.y,L)),this},resetCollisionIDs:function(){return g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,this},shutdown:function(){y.off(this.engine),this.removeAllListeners(),S.clear(this.localWorld,!1),a.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});r.exports=b},95349:r=>{var m={setBounce:function(e){return this.body.restitution=e,this}};r.exports=m},70679:r=>{var m={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var u=0;if(!Array.isArray(e))u=e;else for(var g=0;g<e.length;g++)u|=e[g];return this.body.collisionFilter.mask=u,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,u){Array.isArray(e)||(e=[e]);for(var g=0;g<e.length;g++){var c=e[g].hasOwnProperty("body")?e[g].body:e[g];this.body.setOnCollideWith(c,u)}return this}};r.exports=m},77178:(r,m,e)=>{var u=e(84125),g={applyForce:function(c){return this._tempVec2.set(this.body.position.x,this.body.position.y),u.applyForce(this.body,this._tempVec2,c),this},applyForceFrom:function(c,s){return u.applyForce(this.body,c,s),this},thrust:function(c){var s=this.body.angle;return this._tempVec2.set(c*Math.cos(s),c*Math.sin(s)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(c){var s=this.body.angle-Math.PI/2;return this._tempVec2.set(c*Math.cos(s),c*Math.sin(s)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(c){var s=this.body.angle+Math.PI/2;return this._tempVec2.set(c*Math.cos(s),c*Math.sin(s)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(c){var s=this.body.angle-Math.PI;return this._tempVec2.set(c*Math.cos(s),c*Math.sin(s)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};r.exports=g},74015:r=>{var m={setFriction:function(e,u,g){return this.body.friction=e,u!==void 0&&(this.body.frictionAir=u),g!==void 0&&(this.body.frictionStatic=g),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};r.exports=m},11535:r=>{var m={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};r.exports=m},74497:(r,m,e)=>{var u=e(84125),g=e(93736),c={setMass:function(s){return u.setMass(this.body,s),this},setDensity:function(s){return u.setDensity(this.body,s),this},centerOfMass:{get:function(){return new g(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};r.exports=c},75529:r=>{var m={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};r.exports=m},64024:(r,m,e)=>{var u=e(68516),g=e(84125),c=e(88456),s=e(72632),o=e(10998),a=e(72829),l=e(39745),p={setRectangle:function(h,f,v){return this.setBody({type:"rectangle",width:h,height:f},v)},setCircle:function(h,f){return this.setBody({type:"circle",radius:h},f)},setPolygon:function(h,f,v){return this.setBody({type:"polygon",sides:f,radius:h},v)},setTrapezoid:function(h,f,v,y){return this.setBody({type:"trapezoid",width:h,height:f,slope:v},y)},setExistingBody:function(h,f){f===void 0&&(f=!0),this.body&&this.world.remove(this.body,!0),this.body=h;for(var v=0;v<h.parts.length;v++)h.parts[v].gameObject=this;var y=this;if(h.destroy=function(){y.world.remove(y.body,!0),y.body.gameObject=null},f&&(this.world.has(h)&&this.world.remove(h,!0),this.world.add(h)),this._originComponent){var x=h.render.sprite.xOffset,S=h.render.sprite.yOffset,E=h.centerOfMass.x,b=h.centerOfMass.y;if(c(E,.5)&&c(b,.5))this.setOrigin(x+.5,S+.5);else{var T=h.centerOffset.x,P=h.centerOffset.y;this.setOrigin(x+T/this.displayWidth,S+P/this.displayHeight)}}return this},setBody:function(h,f){if(!h)return this;var v;typeof h=="string"&&(h={type:h});var y=s(h,"type","rectangle"),x=s(h,"x",this._tempVec2.x),S=s(h,"y",this._tempVec2.y),E=s(h,"width",this.width),b=s(h,"height",this.height);switch(y){case"rectangle":v=u.rectangle(x,S,E,b,f);break;case"circle":var T=s(h,"radius",Math.max(E,b)/2),P=s(h,"maxSides",25);v=u.circle(x,S,T,f,P);break;case"trapezoid":var C=s(h,"slope",.5);v=u.trapezoid(x,S,E,b,C,f);break;case"polygon":var w=s(h,"sides",5),A=s(h,"radius",Math.max(E,b)/2);v=u.polygon(x,S,w,A,f);break;case"fromVertices":case"fromVerts":var R=s(h,"verts",null);if(R)if(typeof R=="string"&&(R=l.fromPath(R)),this.body&&!this.body.hasOwnProperty("temp"))g.setVertices(this.body,R),v=this.body;else{var I=s(h,"flagInternal",!1),L=s(h,"removeCollinear",.01),O=s(h,"minimumArea",10);v=u.fromVertices(x,S,R,f,I,L,O)}break;case"fromPhysicsEditor":v=o.parseBody(x,S,h,f);break;case"fromPhysicsTracer":v=a.parseBody(x,S,h,f);break}return v&&this.setExistingBody(v,h.addToWorld),this}};r.exports=p},25106:(r,m,e)=>{var u=e(35416),g=e(22806),c=e(39073),s={setToSleep:function(){return g.set(this.body,!0),this},setAwake:function(){return g.set(this.body,!1),this},setSleepThreshold:function(o){return o===void 0&&(o=60),this.body.sleepThreshold=o,this},setSleepEvents:function(o,a){return this.setSleepStartEvent(o),this.setSleepEndEvent(a),this},setSleepStartEvent:function(o){if(o){var a=this.world;c.on(this.body,"sleepStart",function(l){a.emit(u.SLEEP_START,l,this)})}else c.off(this.body,"sleepStart");return this},setSleepEndEvent:function(o){if(o){var a=this.world;c.on(this.body,"sleepEnd",function(l){a.emit(u.SLEEP_END,l,this)})}else c.off(this.body,"sleepEnd");return this}};r.exports=s},82884:(r,m,e)=>{var u=e(84125),g={setStatic:function(c){return u.setStatic(this.body,c),this},isStatic:function(){return this.body.isStatic}};r.exports=g},4753:(r,m,e)=>{var u=e(84125),g=e(83392),c=e(35786),s=e(62138),o=4,a={x:{get:function(){return this.body.position.x},set:function(l){this._tempVec2.set(l,this.y),u.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(l){this._tempVec2.set(this.x,l),u.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(l){var p=1/this._scaleX,h=1/this._scaleY;this._scaleX=l,this._scaleX===0?this.renderFlags&=~o:this.renderFlags|=o,u.scale(this.body,p,h),u.scale(this.body,l,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(l){var p=1/this._scaleX,h=1/this._scaleY;this._scaleY=l,this._scaleY===0?this.renderFlags&=~o:this.renderFlags|=o,u.scale(this.body,p,h),u.scale(this.body,this._scaleX,l)}},angle:{get:function(){return s(this.body.angle*g.RAD_TO_DEG)},set:function(l){this.rotation=s(l)*g.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(l){this._rotation=c(l),u.setAngle(this.body,this._rotation)}},setPosition:function(l,p){return l===void 0&&(l=0),p===void 0&&(p=l),this._tempVec2.set(l,p),u.setPosition(this.body,this._tempVec2),this},setRotation:function(l){return l===void 0&&(l=0),this._rotation=c(l),u.setAngle(this.body,l),this},setFixedRotation:function(){return u.setInertia(this.body,1/0),this},setAngle:function(l){return l===void 0&&(l=0),this.angle=l,u.setAngle(this.body,this.rotation),this},setScale:function(l,p,h){l===void 0&&(l=1),p===void 0&&(p=l);var f=1/this._scaleX,v=1/this._scaleY;return this._scaleX=l,this._scaleY=p,u.scale(this.body,f,v,h),u.scale(this.body,l,p,h),this}};r.exports=a},37268:(r,m,e)=>{var u=e(84125),g={setVelocityX:function(c){return this._tempVec2.set(c,this.body.velocity.y),u.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(c){return this._tempVec2.set(this.body.velocity.x,c),u.setVelocity(this.body,this._tempVec2),this},setVelocity:function(c,s){return this._tempVec2.set(c,s),u.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return u.getVelocity(this.body)},setAngularVelocity:function(c){return u.setAngularVelocity(this.body,c),this},getAngularVelocity:function(){return u.getAngularVelocity(this.body)},setAngularSpeed:function(c){return u.setAngularSpeed(this.body,c),this},getAngularSpeed:function(){return u.getAngularSpeed(this.body)}};r.exports=g},74527:(r,m,e)=>{r.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}},63201:r=>{r.exports="afteradd"},30474:r=>{r.exports="afterremove"},44822:r=>{r.exports="afterupdate"},88820:r=>{r.exports="beforeadd"},94849:r=>{r.exports="beforeremove"},6391:r=>{r.exports="beforeupdate"},96738:r=>{r.exports="collisionactive"},7916:r=>{r.exports="collisionend"},59529:r=>{r.exports="collisionstart"},10219:r=>{r.exports="dragend"},183:r=>{r.exports="drag"},39143:r=>{r.exports="dragstart"},16483:r=>{r.exports="pause"},35806:r=>{r.exports="resume"},22106:r=>{r.exports="sleepend"},5803:r=>{r.exports="sleepstart"},35416:(r,m,e)=>{r.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}},45949:(r,m,e)=>{r.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}},84125:(r,m,e)=>{var u={};r.exports=u;var g=e(39745),c=e(10438),s=e(22806),o=e(68758),a=e(84091),l=e(50658);(function(){u._timeCorrection=!0,u._inertiaScale=4,u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,u._baseDelta=16.666666666666668,u.create=function(h){var f={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!h.hasOwnProperty("position")&&h.hasOwnProperty("vertices")?h.position=g.centre(h.vertices):h.hasOwnProperty("vertices")||(f.vertices=g.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var v=o.extend(f,h);return p(v,h),v.setOnCollideWith=function(y,x){return x?this.onCollideWith[y.id]=x:delete this.onCollideWith[y.id],this},v},u.nextGroup=function(h){return h?u._nextNonCollidingGroupId--:u._nextCollidingGroupId++},u.nextCategory=function(){return u._nextCategory=u._nextCategory<<1,u._nextCategory};var p=function(h,f){if(f=f||{},u.set(h,{bounds:h.bounds||a.create(h.vertices),positionPrev:h.positionPrev||c.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h}),g.rotate(h.vertices,h.angle,h.position),l.rotate(h.axes,h.angle),a.update(h.bounds,h.vertices,h.velocity),u.set(h,{axes:f.axes||h.axes,area:f.area||h.area,mass:f.mass||h.mass,inertia:f.inertia||h.inertia}),h.parts.length===1){var v=h.bounds,y=h.centerOfMass,x=h.centerOffset,S=v.max.x-v.min.x,E=v.max.y-v.min.y;y.x=-(v.min.x-h.position.x)/S,y.y=-(v.min.y-h.position.y)/E,x.x=S*y.x,x.y=E*y.y}};u.set=function(h,f,v){var y;typeof f=="string"&&(y=f,f={},f[y]=v);for(y in f)if(Object.prototype.hasOwnProperty.call(f,y))switch(v=f[y],y){case"isStatic":u.setStatic(h,v);break;case"isSleeping":s.set(h,v);break;case"mass":u.setMass(h,v);break;case"density":u.setDensity(h,v);break;case"inertia":u.setInertia(h,v);break;case"vertices":u.setVertices(h,v);break;case"position":u.setPosition(h,v);break;case"angle":u.setAngle(h,v);break;case"velocity":u.setVelocity(h,v);break;case"angularVelocity":u.setAngularVelocity(h,v);break;case"speed":u.setSpeed(h,v);break;case"angularSpeed":u.setAngularSpeed(h,v);break;case"parts":u.setParts(h,v);break;case"centre":u.setCentre(h,v);break;default:h[y]=v}},u.setStatic=function(h,f){for(var v=0;v<h.parts.length;v++){var y=h.parts[v];f?(y.isStatic||(y._original={restitution:y.restitution,friction:y.friction,mass:y.mass,inertia:y.inertia,density:y.density,inverseMass:y.inverseMass,inverseInertia:y.inverseInertia}),y.restitution=0,y.friction=1,y.mass=y.inertia=y.density=1/0,y.inverseMass=y.inverseInertia=0,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.anglePrev=y.angle,y.angularVelocity=0,y.speed=0,y.angularSpeed=0,y.motion=0):y._original&&(y.restitution=y._original.restitution,y.friction=y._original.friction,y.mass=y._original.mass,y.inertia=y._original.inertia,y.density=y._original.density,y.inverseMass=y._original.inverseMass,y.inverseInertia=y._original.inverseInertia,y._original=null),y.isStatic=f}},u.setMass=function(h,f){var v=h.inertia/(h.mass/6);h.inertia=v*(f/6),h.inverseInertia=1/h.inertia,h.mass=f,h.inverseMass=1/h.mass,h.density=h.mass/h.area},u.setDensity=function(h,f){u.setMass(h,f*h.area),h.density=f},u.setInertia=function(h,f){h.inertia=f,h.inverseInertia=1/h.inertia},u.setVertices=function(h,f){f[0].body===h?h.vertices=f:h.vertices=g.create(f,h),h.axes=l.fromVertices(h.vertices),h.area=g.area(h.vertices),u.setMass(h,h.density*h.area);var v=g.centre(h.vertices);g.translate(h.vertices,v,-1),u.setInertia(h,u._inertiaScale*g.inertia(h.vertices,h.mass)),g.translate(h.vertices,h.position),a.update(h.bounds,h.vertices,h.velocity)},u.setParts=function(h,f,v){var y;for(f=f.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,y=0;y<f.length;y++){var x=f[y];x!==h&&(x.parent=h,h.parts.push(x))}if(h.parts.length!==1){if(v=typeof v<"u"?v:!0,v){var S=[];for(y=0;y<f.length;y++)S=S.concat(f[y].vertices);g.clockwiseSort(S);var E=g.hull(S),b=g.centre(E);u.setVertices(h,E),g.translate(h.vertices,b)}var T=u._totalProperties(h),P=T.centre.x,C=T.centre.y,w=h.bounds,A=h.centerOfMass,R=h.centerOffset;a.update(w,h.vertices,h.velocity),A.x=-(w.min.x-P)/(w.max.x-w.min.x),A.y=-(w.min.y-C)/(w.max.y-w.min.y),R.x=P,R.y=C,h.area=T.area,h.parent=h,h.position.x=P,h.position.y=C,h.positionPrev.x=P,h.positionPrev.y=C,u.setMass(h,T.mass),u.setInertia(h,T.inertia),u.setPosition(h,T.centre)}},u.setCentre=function(h,f,v){v?(h.positionPrev.x+=f.x,h.positionPrev.y+=f.y,h.position.x+=f.x,h.position.y+=f.y):(h.positionPrev.x=f.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=f.y-(h.position.y-h.positionPrev.y),h.position.x=f.x,h.position.y=f.y)},u.setPosition=function(h,f,v){var y=c.sub(f,h.position);v?(h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.velocity.x=y.x,h.velocity.y=y.y,h.speed=c.magnitude(y)):(h.positionPrev.x+=y.x,h.positionPrev.y+=y.y);for(var x=0;x<h.parts.length;x++){var S=h.parts[x];S.position.x+=y.x,S.position.y+=y.y,g.translate(S.vertices,y),a.update(S.bounds,S.vertices,h.velocity)}},u.setAngle=function(h,f,v){var y=f-h.angle;v?(h.anglePrev=h.angle,h.angularVelocity=y,h.angularSpeed=Math.abs(y)):h.anglePrev+=y;for(var x=0;x<h.parts.length;x++){var S=h.parts[x];S.angle+=y,g.rotate(S.vertices,y,h.position),l.rotate(S.axes,y),a.update(S.bounds,S.vertices,h.velocity),x>0&&c.rotateAbout(S.position,y,h.position,S.position)}},u.setVelocity=function(h,f){var v=h.deltaTime/u._baseDelta;h.positionPrev.x=h.position.x-f.x*v,h.positionPrev.y=h.position.y-f.y*v,h.velocity.x=(h.position.x-h.positionPrev.x)/v,h.velocity.y=(h.position.y-h.positionPrev.y)/v,h.speed=c.magnitude(h.velocity)},u.getVelocity=function(h){var f=u._baseDelta/h.deltaTime;return{x:(h.position.x-h.positionPrev.x)*f,y:(h.position.y-h.positionPrev.y)*f}},u.getSpeed=function(h){return c.magnitude(u.getVelocity(h))},u.setSpeed=function(h,f){u.setVelocity(h,c.mult(c.normalise(u.getVelocity(h)),f))},u.setAngularVelocity=function(h,f){var v=h.deltaTime/u._baseDelta;h.anglePrev=h.angle-f*v,h.angularVelocity=(h.angle-h.anglePrev)/v,h.angularSpeed=Math.abs(h.angularVelocity)},u.getAngularVelocity=function(h){return(h.angle-h.anglePrev)*u._baseDelta/h.deltaTime},u.getAngularSpeed=function(h){return Math.abs(u.getAngularVelocity(h))},u.setAngularSpeed=function(h,f){u.setAngularVelocity(h,o.sign(u.getAngularVelocity(h))*f)},u.translate=function(h,f,v){u.setPosition(h,c.add(h.position,f),v)},u.rotate=function(h,f,v,y){if(!v)u.setAngle(h,h.angle+f,y);else{var x=Math.cos(f),S=Math.sin(f),E=h.position.x-v.x,b=h.position.y-v.y;u.setPosition(h,{x:v.x+(E*x-b*S),y:v.y+(E*S+b*x)},y),u.setAngle(h,h.angle+f,y)}},u.scale=function(h,f,v,y){var x=0,S=0;y=y||h.position;for(var E=0;E<h.parts.length;E++){var b=h.parts[E];b.scale.x=f,b.scale.y=v,g.scale(b.vertices,f,v,y),b.axes=l.fromVertices(b.vertices),b.area=g.area(b.vertices),u.setMass(b,h.density*b.area),g.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),u.setInertia(b,u._inertiaScale*g.inertia(b.vertices,b.mass)),g.translate(b.vertices,{x:b.position.x,y:b.position.y}),E>0&&(x+=b.area,S+=b.inertia),b.position.x=y.x+(b.position.x-y.x)*f,b.position.y=y.y+(b.position.y-y.y)*v,a.update(b.bounds,b.vertices,h.velocity)}h.parts.length>1&&(h.area=x,h.isStatic||(u.setMass(h,h.density*x),u.setInertia(h,S))),h.circleRadius&&(f===v?h.circleRadius*=f:h.circleRadius=null)},u.update=function(h,f){f=(typeof f<"u"?f:16.666666666666668)*h.timeScale;var v=f*f,y=u._timeCorrection?f/(h.deltaTime||f):1,x=1-h.frictionAir*(f/o._baseDelta),S=(h.position.x-h.positionPrev.x)*y,E=(h.position.y-h.positionPrev.y)*y;h.velocity.x=S*x+h.force.x/h.mass*v,h.velocity.y=E*x+h.force.y/h.mass*v,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.deltaTime=f,h.angularVelocity=(h.angle-h.anglePrev)*x*y+h.torque/h.inertia*v,h.anglePrev=h.angle,h.angle+=h.angularVelocity,h.speed=c.magnitude(h.velocity),h.angularSpeed=Math.abs(h.angularVelocity);for(var b=0;b<h.parts.length;b++){var T=h.parts[b];g.translate(T.vertices,h.velocity),b>0&&(T.position.x+=h.velocity.x,T.position.y+=h.velocity.y),h.angularVelocity!==0&&(g.rotate(T.vertices,h.angularVelocity,h.position),l.rotate(T.axes,h.angularVelocity),b>0&&c.rotateAbout(T.position,h.angularVelocity,h.position,T.position)),a.update(T.bounds,T.vertices,h.velocity)}},u.updateVelocities=function(h){var f=u._baseDelta/h.deltaTime,v=h.velocity;v.x=(h.position.x-h.positionPrev.x)*f,v.y=(h.position.y-h.positionPrev.y)*f,h.speed=Math.sqrt(v.x*v.x+v.y*v.y),h.angularVelocity=(h.angle-h.anglePrev)*f,h.angularSpeed=Math.abs(h.angularVelocity)},u.applyForce=function(h,f,v){var y={x:f.x-h.position.x,y:f.y-h.position.y};h.force.x+=v.x,h.force.y+=v.y,h.torque+=y.x*v.y-y.y*v.x},u._totalProperties=function(h){for(var f={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=h.parts.length===1?0:1;v<h.parts.length;v++){var y=h.parts[v],x=y.mass!==1/0?y.mass:1;f.mass+=x,f.area+=y.area,f.inertia+=y.inertia,f.centre=c.add(f.centre,c.mult(y.position,x))}return f.centre=c.div(f.centre,f.mass),f}})()},11299:(r,m,e)=>{var u={};r.exports=u;var g=e(39073),c=e(68758),s=e(84091),o=e(84125);(function(){u.create=function(a){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},u.setModified=function(a,l,p,h){if(g.trigger(a,"compositeModified",a),a.isModified=l,l&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),p&&a.parent&&u.setModified(a.parent,l,p,h),h)for(var f=0;f<a.composites.length;f++){var v=a.composites[f];u.setModified(v,l,p,h)}},u.add=function(a,l){var p=[].concat(l);g.trigger(a,"beforeAdd",{object:l});for(var h=0;h<p.length;h++){var f=p[h];switch(f.type){case"body":if(f.parent!==f){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}u.addBody(a,f);break;case"constraint":u.addConstraint(a,f);break;case"composite":u.addComposite(a,f);break;case"mouseConstraint":u.addConstraint(a,f.constraint);break}}return g.trigger(a,"afterAdd",{object:l}),a},u.remove=function(a,l,p){var h=[].concat(l);g.trigger(a,"beforeRemove",{object:l});for(var f=0;f<h.length;f++){var v=h[f];switch(v.type){case"body":u.removeBody(a,v,p);break;case"constraint":u.removeConstraint(a,v,p);break;case"composite":u.removeComposite(a,v,p);break;case"mouseConstraint":u.removeConstraint(a,v.constraint);break}}return g.trigger(a,"afterRemove",{object:l}),a},u.addComposite=function(a,l){return a.composites.push(l),l.parent=a,u.setModified(a,!0,!0,!1),a},u.removeComposite=function(a,l,p){var h=c.indexOf(a.composites,l);if(h!==-1&&u.removeCompositeAt(a,h),p)for(var f=0;f<a.composites.length;f++)u.removeComposite(a.composites[f],l,!0);return a},u.removeCompositeAt=function(a,l){return a.composites.splice(l,1),u.setModified(a,!0,!0,!1),a},u.addBody=function(a,l){return a.bodies.push(l),u.setModified(a,!0,!0,!1),a},u.removeBody=function(a,l,p){var h=c.indexOf(a.bodies,l);if(h!==-1&&u.removeBodyAt(a,h),p)for(var f=0;f<a.composites.length;f++)u.removeBody(a.composites[f],l,!0);return a},u.removeBodyAt=function(a,l){return a.bodies.splice(l,1),u.setModified(a,!0,!0,!1),a},u.addConstraint=function(a,l){return a.constraints.push(l),u.setModified(a,!0,!0,!1),a},u.removeConstraint=function(a,l,p){var h=c.indexOf(a.constraints,l);if(h!==-1&&u.removeConstraintAt(a,h),p)for(var f=0;f<a.composites.length;f++)u.removeConstraint(a.composites[f],l,!0);return a},u.removeConstraintAt=function(a,l){return a.constraints.splice(l,1),u.setModified(a,!0,!0,!1),a},u.clear=function(a,l,p){if(p)for(var h=0;h<a.composites.length;h++)u.clear(a.composites[h],l,!0);return l?a.bodies=a.bodies.filter(function(f){return f.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,u.setModified(a,!0,!0,!1),a},u.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var l=[].concat(a.bodies),p=0;p<a.composites.length;p++)l=l.concat(u.allBodies(a.composites[p]));return a.cache&&(a.cache.allBodies=l),l},u.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var l=[].concat(a.constraints),p=0;p<a.composites.length;p++)l=l.concat(u.allConstraints(a.composites[p]));return a.cache&&(a.cache.allConstraints=l),l},u.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var l=[].concat(a.composites),p=0;p<a.composites.length;p++)l=l.concat(u.allComposites(a.composites[p]));return a.cache&&(a.cache.allComposites=l),l},u.get=function(a,l,p){var h,f;switch(p){case"body":h=u.allBodies(a);break;case"constraint":h=u.allConstraints(a);break;case"composite":h=u.allComposites(a).concat(a);break}return h?(f=h.filter(function(v){return v.id.toString()===l.toString()}),f.length===0?null:f[0]):null},u.move=function(a,l,p){return u.remove(a,l),u.add(p,l),a},u.rebase=function(a){for(var l=u.allBodies(a).concat(u.allConstraints(a)).concat(u.allComposites(a)),p=0;p<l.length;p++)l[p].id=c.nextId();return a},u.translate=function(a,l,p){for(var h=p?u.allBodies(a):a.bodies,f=0;f<h.length;f++)o.translate(h[f],l);return a},u.rotate=function(a,l,p,h){for(var f=Math.cos(l),v=Math.sin(l),y=h?u.allBodies(a):a.bodies,x=0;x<y.length;x++){var S=y[x],E=S.position.x-p.x,b=S.position.y-p.y;o.setPosition(S,{x:p.x+(E*f-b*v),y:p.y+(E*v+b*f)}),o.rotate(S,l)}return a},u.scale=function(a,l,p,h,f){for(var v=f?u.allBodies(a):a.bodies,y=0;y<v.length;y++){var x=v[y],S=x.position.x-h.x,E=x.position.y-h.y;o.setPosition(x,{x:h.x+S*l,y:h.y+E*p}),o.scale(x,l,p)}return a},u.bounds=function(a){for(var l=u.allBodies(a),p=[],h=0;h<l.length;h+=1){var f=l[h];p.push(f.bounds.min,f.bounds.max)}return s.create(p)}})()},72005:(r,m,e)=>{var u={};r.exports=u;var g=e(11299);(function(){u.create=g.create,u.add=g.add,u.remove=g.remove,u.clear=g.clear,u.addComposite=g.addComposite,u.addBody=g.addBody,u.addConstraint=g.addConstraint})()},63454:(r,m,e)=>{var u={};r.exports=u;var g=e(39745),c=e(70584);(function(){var s=[],o={overlap:0,axis:null},a={overlap:0,axis:null};u.create=function(l,p){return{pair:null,collided:!1,bodyA:l,bodyB:p,parentA:l.parent,parentB:p.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},u.collides=function(l,p,h){if(u._overlapAxes(o,l.vertices,p.vertices,l.axes),o.overlap<=0||(u._overlapAxes(a,p.vertices,l.vertices,p.axes),a.overlap<=0))return null;var f=h&&h.table[c.id(l,p)],v;f?v=f.collision:(v=u.create(l,p),v.collided=!0,v.bodyA=l.id<p.id?l:p,v.bodyB=l.id<p.id?p:l,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),l=v.bodyA,p=v.bodyB;var y;o.overlap<a.overlap?y=o:y=a;var x=v.normal,S=v.supports,E=y.axis,b=E.x,T=E.y;b*(p.position.x-l.position.x)+T*(p.position.y-l.position.y)<0?(x.x=b,x.y=T):(x.x=-b,x.y=-T),v.tangent.x=-x.y,v.tangent.y=x.x,v.depth=y.overlap,v.penetration.x=x.x*v.depth,v.penetration.y=x.y*v.depth;var P=u._findSupports(l,p,x,1),C=0;if(g.contains(l.vertices,P[0])&&(S[C++]=P[0]),g.contains(l.vertices,P[1])&&(S[C++]=P[1]),C<2){var w=u._findSupports(p,l,x,-1);g.contains(p.vertices,w[0])&&(S[C++]=w[0]),C<2&&g.contains(p.vertices,w[1])&&(S[C++]=w[1])}return C===0&&(S[C++]=P[0]),S.length=C,v},u._overlapAxes=function(l,p,h,f){var v=p.length,y=h.length,x=p[0].x,S=p[0].y,E=h[0].x,b=h[0].y,T=f.length,P=Number.MAX_VALUE,C=0,w,A,R,I,L,O;for(L=0;L<T;L++){var D=f[L],V=D.x,B=D.y,U=x*V+S*B,W=E*V+b*B,F=U,G=W;for(O=1;O<v;O+=1)I=p[O].x*V+p[O].y*B,I>F?F=I:I<U&&(U=I);for(O=1;O<y;O+=1)I=h[O].x*V+h[O].y*B,I>G?G=I:I<W&&(W=I);if(A=F-W,R=G-U,w=A<R?A:R,w<P&&(P=w,C=L,w<=0))break}l.axis=f[C],l.overlap=P},u._projectToAxis=function(l,p,h){for(var f=p[0].x*h.x+p[0].y*h.y,v=f,y=1;y<p.length;y+=1){var x=p[y].x*h.x+p[y].y*h.y;x>v?v=x:x<f&&(f=x)}l.min=f,l.max=v},u._findSupports=function(l,p,h,f){var v=p.vertices,y=v.length,x=l.position.x,S=l.position.y,E=h.x*f,b=h.y*f,T=Number.MAX_VALUE,P,C,w,A,R;for(R=0;R<y;R+=1)C=v[R],A=E*(x-C.x)+b*(S-C.y),A<T&&(T=A,P=C);return w=v[(y+P.index-1)%y],T=E*(x-w.x)+b*(S-w.y),C=v[(P.index+1)%y],E*(x-C.x)+b*(S-C.y)<T?(s[0]=P,s[1]=C,s):(s[0]=P,s[1]=w,s)}})()},17319:r=>{var m={};r.exports=m,function(){m.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},13657:(r,m,e)=>{var u={};r.exports=u;var g=e(68758),c=e(63454);(function(){u.create=function(s){var o={bodies:[],pairs:null};return g.extend(o,s)},u.setBodies=function(s,o){s.bodies=o.slice(0)},u.clear=function(s){s.bodies=[]},u.collisions=function(s){var o=[],a=s.pairs,l=s.bodies,p=l.length,h=u.canCollide,f=c.collides,v,y;for(l.sort(u._compareBoundsX),v=0;v<p;v++){var x=l[v],S=x.bounds,E=x.bounds.max.x,b=x.bounds.max.y,T=x.bounds.min.y,P=x.isStatic||x.isSleeping,C=x.parts.length,w=C===1;for(y=v+1;y<p;y++){var A=l[y],R=A.bounds;if(R.min.x>E)break;if(!(b<R.min.y||T>R.max.y)&&!(P&&(A.isStatic||A.isSleeping))&&h(x.collisionFilter,A.collisionFilter)){var I=A.parts.length;if(w&&I===1){var L=f(x,A,a);L&&o.push(L)}else for(var O=C>1?1:0,D=I>1?1:0,V=O;V<C;V++)for(var B=x.parts[V],S=B.bounds,U=D;U<I;U++){var W=A.parts[U],R=W.bounds;if(!(S.min.x>R.max.x||S.max.x<R.min.x||S.max.y<R.min.y||S.min.y>R.max.y)){var L=f(B,W,a);L&&o.push(L)}}}}}return o},u.canCollide=function(s,o){return s.group===o.group&&s.group!==0?s.group>0:(s.mask&o.category)!==0&&(o.mask&s.category)!==0},u._compareBoundsX=function(s,o){return s.bounds.min.x-o.bounds.min.x}})()},70584:(r,m,e)=>{var u={};r.exports=u;var g=e(17319);(function(){u.create=function(c,s){var o=c.bodyA,a=c.bodyB,l={id:u.id(o,a),bodyA:o,bodyB:a,collision:c,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:o.isSensor||a.isSensor,timeCreated:s,timeUpdated:s,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return u.update(l,c,s),l},u.update=function(c,s,o){var a=c.contacts,l=s.supports,p=c.activeContacts,h=s.parentA,f=s.parentB,v=h.vertices.length;c.isActive=!0,c.timeUpdated=o,c.collision=s,c.separation=s.depth,c.inverseMass=h.inverseMass+f.inverseMass,c.friction=h.friction<f.friction?h.friction:f.friction,c.frictionStatic=h.frictionStatic>f.frictionStatic?h.frictionStatic:f.frictionStatic,c.restitution=h.restitution>f.restitution?h.restitution:f.restitution,c.slop=h.slop>f.slop?h.slop:f.slop,s.pair=c,p.length=0;for(var y=0;y<l.length;y++){var x=l[y],S=x.body===h?x.index:v+x.index,E=a[S];E?p.push(E):p.push(a[S]=g.create(x))}},u.setActive=function(c,s,o){s?(c.isActive=!0,c.timeUpdated=o):(c.isActive=!1,c.activeContacts.length=0)},u.id=function(c,s){return c.id<s.id?"A"+c.id+"B"+s.id:"A"+s.id+"B"+c.id}})()},91327:(r,m,e)=>{var u={};r.exports=u;var g=e(70584),c=e(68758);(function(){u.create=function(s){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},s)},u.update=function(s,o,a){var l=s.list,p=l.length,h=s.table,f=o.length,v=s.collisionStart,y=s.collisionEnd,x=s.collisionActive,S,E,b,T;for(v.length=0,y.length=0,x.length=0,T=0;T<p;T++)l[T].confirmedActive=!1;for(T=0;T<f;T++)S=o[T],b=S.pair,b?(b.isActive?x.push(b):v.push(b),g.update(b,S,a),b.confirmedActive=!0):(b=g.create(S,a),h[b.id]=b,v.push(b),l.push(b));var P=[];for(p=l.length,T=0;T<p;T++)b=l[T],b.confirmedActive||(g.setActive(b,!1,a),y.push(b),!b.collision.bodyA.isSleeping&&!b.collision.bodyB.isSleeping&&P.push(T));for(T=0;T<P.length;T++)E=P[T]-T,b=l[E],l.splice(E,1),delete h[b.id]},u.clear=function(s){return s.table={},s.list.length=0,s.collisionStart.length=0,s.collisionActive.length=0,s.collisionEnd.length=0,s}})()},13390:(r,m,e)=>{var u={};r.exports=u;var g=e(10438),c=e(63454),s=e(84091),o=e(68516),a=e(39745);(function(){u.collides=function(l,p){for(var h=[],f=p.length,v=l.bounds,y=c.collides,x=s.overlaps,S=0;S<f;S++){var E=p[S],b=E.parts.length,T=b===1?0:1;if(l!==E&&x(E.bounds,v))for(var P=T;P<b;P++){var C=E.parts[P];if(x(C.bounds,v)){var w=y(C,l);if(w){h.push(w);break}}}}return h},u.ray=function(l,p,h,f){f=f||1e-100;for(var v=g.angle(p,h),y=g.magnitude(g.sub(p,h)),x=(h.x+p.x)*.5,S=(h.y+p.y)*.5,E=o.rectangle(x,S,y,f,{angle:v}),b=u.collides(E,l),T=0;T<b.length;T+=1){var P=b[T];P.body=P.bodyB=P.bodyA}return b},u.region=function(l,p,h){for(var f=[],v=0;v<l.length;v++){var y=l[v],x=s.overlaps(y.bounds,p);(x&&!h||!x&&h)&&f.push(y)}return f},u.point=function(l,p){for(var h=[],f=0;f<l.length;f++){var v=l[f];if(s.contains(v.bounds,p))for(var y=v.parts.length===1?0:1;y<v.parts.length;y++){var x=v.parts[y];if(s.contains(x.bounds,p)&&a.contains(x.vertices,p)){h.push(v);break}}}return h}})()},44272:(r,m,e)=>{var u={};r.exports=u;var g=e(39745),c=e(68758),s=e(84091);(function(){u._restingThresh=2,u._restingThreshTangent=Math.sqrt(6),u._positionDampen=.9,u._positionWarming=.8,u._frictionNormalMultiplier=5,u._frictionMaxStatic=Number.MAX_VALUE,u.preSolvePosition=function(o){var a,l,p,h=o.length;for(a=0;a<h;a++)l=o[a],l.isActive&&(p=l.activeContacts.length,l.collision.parentA.totalContacts+=p,l.collision.parentB.totalContacts+=p)},u.solvePosition=function(o,a,l){var p,h,f,v,y,x,S,E,b=u._positionDampen*(l||1),T=c.clamp(a/c._baseDelta,0,1),P=o.length;for(p=0;p<P;p++)h=o[p],!(!h.isActive||h.isSensor)&&(f=h.collision,v=f.parentA,y=f.parentB,x=f.normal,h.separation=x.x*(y.positionImpulse.x+f.penetration.x-v.positionImpulse.x)+x.y*(y.positionImpulse.y+f.penetration.y-v.positionImpulse.y));for(p=0;p<P;p++)h=o[p],!(!h.isActive||h.isSensor)&&(f=h.collision,v=f.parentA,y=f.parentB,x=f.normal,E=h.separation-h.slop*T,(v.isStatic||y.isStatic)&&(E*=2),v.isStatic||v.isSleeping||(S=b/v.totalContacts,v.positionImpulse.x+=x.x*E*S,v.positionImpulse.y+=x.y*E*S),y.isStatic||y.isSleeping||(S=b/y.totalContacts,y.positionImpulse.x-=x.x*E*S,y.positionImpulse.y-=x.y*E*S))},u.postSolvePosition=function(o){for(var a=u._positionWarming,l=o.length,p=g.translate,h=s.update,f=0;f<l;f++){var v=o[f],y=v.positionImpulse,x=y.x,S=y.y,E=v.velocity;if(v.totalContacts=0,x!==0||S!==0){for(var b=0;b<v.parts.length;b++){var T=v.parts[b];p(T.vertices,y),h(T.bounds,T.vertices,E),T.position.x+=x,T.position.y+=S}v.positionPrev.x+=x,v.positionPrev.y+=S,x*E.x+S*E.y<0?(y.x=0,y.y=0):(y.x*=a,y.y*=a)}}},u.preSolveVelocity=function(o){var a=o.length,l,p;for(l=0;l<a;l++){var h=o[l];if(!(!h.isActive||h.isSensor)){var f=h.activeContacts,v=f.length,y=h.collision,x=y.parentA,S=y.parentB,E=y.normal,b=y.tangent;for(p=0;p<v;p++){var T=f[p],P=T.vertex,C=T.normalImpulse,w=T.tangentImpulse;if(C!==0||w!==0){var A=E.x*C+b.x*w,R=E.y*C+b.y*w;x.isStatic||x.isSleeping||(x.positionPrev.x+=A*x.inverseMass,x.positionPrev.y+=R*x.inverseMass,x.anglePrev+=x.inverseInertia*((P.x-x.position.x)*R-(P.y-x.position.y)*A)),S.isStatic||S.isSleeping||(S.positionPrev.x-=A*S.inverseMass,S.positionPrev.y-=R*S.inverseMass,S.anglePrev-=S.inverseInertia*((P.x-S.position.x)*R-(P.y-S.position.y)*A))}}}}},u.solveVelocity=function(o,a){var l=a/c._baseDelta,p=l*l,h=p*l,f=-u._restingThresh*l,v=u._restingThreshTangent,y=u._frictionNormalMultiplier*l,x=u._frictionMaxStatic,S=o.length,E,b,T,P;for(T=0;T<S;T++){var C=o[T];if(!(!C.isActive||C.isSensor)){var w=C.collision,A=w.parentA,R=w.parentB,I=A.velocity,L=R.velocity,O=w.normal.x,D=w.normal.y,V=w.tangent.x,B=w.tangent.y,U=C.activeContacts,W=U.length,F=1/W,G=A.inverseMass+R.inverseMass,M=C.friction*C.frictionStatic*y;for(I.x=A.position.x-A.positionPrev.x,I.y=A.position.y-A.positionPrev.y,L.x=R.position.x-R.positionPrev.x,L.y=R.position.y-R.positionPrev.y,A.angularVelocity=A.angle-A.anglePrev,R.angularVelocity=R.angle-R.anglePrev,P=0;P<W;P++){var N=U[P],k=N.vertex,z=k.x-A.position.x,H=k.y-A.position.y,$=k.x-R.position.x,X=k.y-R.position.y,Y=I.x-H*A.angularVelocity,j=I.y+z*A.angularVelocity,J=L.x-X*R.angularVelocity,Q=L.y+$*R.angularVelocity,Z=Y-J,it=j-Q,rt=O*Z+D*it,ut=V*Z+B*it,dt=C.separation+rt,ct=Math.min(dt,1);ct=dt<0?0:ct;var nt=ct*M;ut<-nt||ut>nt?(b=ut>0?ut:-ut,E=C.friction*(ut>0?1:-1)*h,E<-b?E=-b:E>b&&(E=b)):(E=ut,b=x);var ht=z*D-H*O,ot=$*D-X*O,mt=F/(G+A.inverseInertia*ht*ht+R.inverseInertia*ot*ot),gt=(1+C.restitution)*rt*mt;if(E*=mt,rt<f)N.normalImpulse=0;else{var Ft=N.normalImpulse;N.normalImpulse+=gt,N.normalImpulse>0&&(N.normalImpulse=0),gt=N.normalImpulse-Ft}if(ut<-v||ut>v)N.tangentImpulse=0;else{var kt=N.tangentImpulse;N.tangentImpulse+=E,N.tangentImpulse<-b&&(N.tangentImpulse=-b),N.tangentImpulse>b&&(N.tangentImpulse=b),E=N.tangentImpulse-kt}var Lt=O*gt+V*E,St=D*gt+B*E;A.isStatic||A.isSleeping||(A.positionPrev.x+=Lt*A.inverseMass,A.positionPrev.y+=St*A.inverseMass,A.anglePrev+=(z*St-H*Lt)*A.inverseInertia),R.isStatic||R.isSleeping||(R.positionPrev.x-=Lt*R.inverseMass,R.positionPrev.y-=St*R.inverseMass,R.anglePrev-=($*St-X*Lt)*R.inverseInertia)}}}}})()},52838:(r,m,e)=>{var u={};r.exports=u;var g=e(39745),c=e(10438),s=e(22806),o=e(84091),a=e(50658),l=e(68758);(function(){u._warming=.4,u._torqueDampen=1,u._minLength=1e-6,u.create=function(p){var h=p;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var f=h.bodyA?c.add(h.bodyA.position,h.pointA):h.pointA,v=h.bodyB?c.add(h.bodyB.position,h.pointB):h.pointB,y=c.magnitude(c.sub(f,v));h.length=typeof h.length<"u"?h.length:y,h.id=h.id||l.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var x={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return h.length===0&&h.stiffness>.1?(x.type="pin",x.anchors=!1):h.stiffness<.9&&(x.type="spring"),h.render=l.extend(x,h.render),h},u.preSolveAll=function(p){for(var h=0;h<p.length;h+=1){var f=p[h],v=f.constraintImpulse;f.isStatic||v.x===0&&v.y===0&&v.angle===0||(f.position.x+=v.x,f.position.y+=v.y,f.angle+=v.angle)}},u.solveAll=function(p,h){for(var f=l.clamp(h/l._baseDelta,0,1),v=0;v<p.length;v+=1){var y=p[v],x=!y.bodyA||y.bodyA&&y.bodyA.isStatic,S=!y.bodyB||y.bodyB&&y.bodyB.isStatic;(x||S)&&u.solve(p[v],f)}for(v=0;v<p.length;v+=1)y=p[v],x=!y.bodyA||y.bodyA&&y.bodyA.isStatic,S=!y.bodyB||y.bodyB&&y.bodyB.isStatic,!x&&!S&&u.solve(p[v],f)},u.solve=function(p,h){var f=p.bodyA,v=p.bodyB,y=p.pointA,x=p.pointB;if(!(!f&&!v)){f&&!f.isStatic&&(c.rotate(y,f.angle-p.angleA,y),p.angleA=f.angle),v&&!v.isStatic&&(c.rotate(x,v.angle-p.angleB,x),p.angleB=v.angle);var S=y,E=x;if(f&&(S=c.add(f.position,y)),v&&(E=c.add(v.position,x)),!(!S||!E)){var b=c.sub(S,E),T=c.magnitude(b);T<u._minLength&&(T=u._minLength);var P=(T-p.length)/T,C=p.stiffness>=1||p.length===0,w=C?p.stiffness*h:p.stiffness*h*h,A=p.damping*h,R=c.mult(b,P*w),I=(f?f.inverseMass:0)+(v?v.inverseMass:0),L=(f?f.inverseInertia:0)+(v?v.inverseInertia:0),O=I+L,D,V,B,U,W;if(A>0){var F=c.create();B=c.div(b,T),W=c.sub(v&&c.sub(v.position,v.positionPrev)||F,f&&c.sub(f.position,f.positionPrev)||F),U=c.dot(B,W)}f&&!f.isStatic&&(V=f.inverseMass/I,f.constraintImpulse.x-=R.x*V,f.constraintImpulse.y-=R.y*V,f.position.x-=R.x*V,f.position.y-=R.y*V,A>0&&(f.positionPrev.x-=A*B.x*U*V,f.positionPrev.y-=A*B.y*U*V),D=c.cross(y,R)/O*u._torqueDampen*f.inverseInertia*(1-p.angularStiffness),f.constraintImpulse.angle-=D,f.angle-=D),v&&!v.isStatic&&(V=v.inverseMass/I,v.constraintImpulse.x+=R.x*V,v.constraintImpulse.y+=R.y*V,v.position.x+=R.x*V,v.position.y+=R.y*V,A>0&&(v.positionPrev.x+=A*B.x*U*V,v.positionPrev.y+=A*B.y*U*V),D=c.cross(x,R)/O*u._torqueDampen*v.inverseInertia*(1-p.angularStiffness),v.constraintImpulse.angle+=D,v.angle+=D)}}},u.postSolveAll=function(p){for(var h=0;h<p.length;h++){var f=p[h],v=f.constraintImpulse;if(!(f.isStatic||v.x===0&&v.y===0&&v.angle===0)){s.set(f,!1);for(var y=0;y<f.parts.length;y++){var x=f.parts[y];g.translate(x.vertices,v),y>0&&(x.position.x+=v.x,x.position.y+=v.y),v.angle!==0&&(g.rotate(x.vertices,v.angle,f.position),a.rotate(x.axes,v.angle),y>0&&c.rotateAbout(x.position,v.angle,f.position,x.position)),o.update(x.bounds,x.vertices,f.velocity)}v.angle*=u._warming,v.x*=u._warming,v.y*=u._warming}}},u.pointAWorld=function(p){return{x:(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),y:(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0)}},u.pointBWorld=function(p){return{x:(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y:(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0)}},u.currentLength=function(p){var h=(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),f=(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0),v=(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y=(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0),x=h-v,S=f-y;return Math.sqrt(x*x+S*S)}})()},68758:(r,m,e)=>{var u={};r.exports=u,function(){u._baseDelta=16.666666666666668,u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(c,s){var o,a,l;typeof s=="boolean"?(o=2,l=s):(o=1,l=!0);for(var p=o;p<arguments.length;p++){var h=arguments[p];if(h)for(var f in h)l&&h[f]&&h[f].constructor===Object&&(!c[f]||c[f].constructor===Object)?(c[f]=c[f]||{},u.extend(c[f],l,h[f])):c[f]=h[f]}return c},u.clone=function(c,s){return u.extend({},s,c)},u.keys=function(c){if(Object.keys)return Object.keys(c);var s=[];for(var o in c)s.push(o);return s},u.values=function(c){var s=[];if(Object.keys){for(var o=Object.keys(c),a=0;a<o.length;a++)s.push(c[o[a]]);return s}for(var l in c)s.push(c[l]);return s},u.get=function(c,s,o,a){s=s.split(".").slice(o,a);for(var l=0;l<s.length;l+=1)c=c[s[l]];return c},u.set=function(c,s,o,a,l){var p=s.split(".").slice(a,l);return u.get(c,s,0,-1)[p[p.length-1]]=o,o},u.shuffle=function(c){for(var s=c.length-1;s>0;s--){var o=Math.floor(u.random()*(s+1)),a=c[s];c[s]=c[o],c[o]=a}return c},u.choose=function(c){return c[Math.floor(u.random()*c.length)]},u.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},u.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},u.isFunction=function(c){return typeof c=="function"},u.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},u.isString=function(c){return toString.call(c)==="[object String]"},u.clamp=function(c,s,o){return c<s?s:c>o?o:c},u.sign=function(c){return c<0?-1:1},u.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(c,s){return c=typeof c<"u"?c:0,s=typeof s<"u"?s:1,c+g()*(s-c)};var g=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[c]||(u.warn(c),u._warnedOnce[c]=!0)},u.deprecated=function(c,s,o){c[s]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",o)},c[s])},u.nextId=function(){return u._nextId++},u.indexOf=function(c,s){if(c.indexOf)return c.indexOf(s);for(var o=0;o<c.length;o++)if(c[o]===s)return o;return-1},u.map=function(c,s){if(c.map)return c.map(s);for(var o=[],a=0;a<c.length;a+=1)o.push(s(c[a]));return o},u.topologicalSort=function(c){var s=[],o=[],a=[];for(var l in c)!o[l]&&!a[l]&&u._topologicalSort(l,o,a,c,s);return s},u._topologicalSort=function(c,s,o,a,l){var p=a[c]||[];o[c]=!0;for(var h=0;h<p.length;h+=1){var f=p[h];o[f]||s[f]||u._topologicalSort(f,s,o,a,l)}o[c]=!1,s[c]=!0,l.push(c)},u.chain=function(){for(var c=[],s=0;s<arguments.length;s+=1){var o=arguments[s];o._chained?c.push.apply(c,o._chained):c.push(o)}var a=function(){for(var l,p=new Array(arguments.length),h=0,f=arguments.length;h<f;h++)p[h]=arguments[h];for(h=0;h<c.length;h+=1){var v=c[h].apply(l,p);typeof v<"u"&&(l=v)}return l};return a._chained=c,a},u.chainPathBefore=function(c,s,o){return u.set(c,s,u.chain(o,u.get(c,s)))},u.chainPathAfter=function(c,s,o){return u.set(c,s,u.chain(u.get(c,s),o))},u.setDecomp=function(c){u._decomp=c},u.getDecomp=function(){var c=u._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof e.g<"u"&&(c=e.g.decomp)}catch{c=null}return c}}()},45775:(r,m,e)=>{var u={};r.exports=u;var g=e(22806),c=e(44272),s=e(13657),o=e(91327),a=e(39073),l=e(11299),p=e(52838),h=e(68758),f=e(84125);(function(){u.create=function(v){v=v||{};var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},x=h.extend(y,v);return x.world=v.world||l.create({label:"World"}),x.pairs=v.pairs||o.create(),x.detector=v.detector||s.create(),x.grid={buckets:[]},x.world.gravity=x.gravity,x.broadphase=x.grid,x.metrics={},x},u.update=function(v,y){var x=h.now(),S=v.world,E=v.detector,b=v.pairs,T=v.timing,P=T.timestamp,C;y=typeof y<"u"?y:h._baseDelta,y*=T.timeScale,T.timestamp+=y,T.lastDelta=y;var w={timestamp:T.timestamp,delta:y};a.trigger(v,"beforeUpdate",w);var A=l.allBodies(S),R=l.allConstraints(S);for(S.isModified&&(s.setBodies(E,A),l.setModified(S,!1,!1,!0)),v.enableSleeping&&g.update(A,y),u._bodiesApplyGravity(A,v.gravity),y>0&&u._bodiesUpdate(A,y),a.trigger(v,"beforeSolve",w),p.preSolveAll(A),C=0;C<v.constraintIterations;C++)p.solveAll(R,y);p.postSolveAll(A),E.pairs=v.pairs;var I=s.collisions(E);o.update(b,I,P),v.enableSleeping&&g.afterCollisions(b.list),b.collisionStart.length>0&&a.trigger(v,"collisionStart",{pairs:b.collisionStart,timestamp:T.timestamp,delta:y});var L=h.clamp(20/v.positionIterations,0,1);for(c.preSolvePosition(b.list),C=0;C<v.positionIterations;C++)c.solvePosition(b.list,y,L);for(c.postSolvePosition(A),p.preSolveAll(A),C=0;C<v.constraintIterations;C++)p.solveAll(R,y);for(p.postSolveAll(A),c.preSolveVelocity(b.list),C=0;C<v.velocityIterations;C++)c.solveVelocity(b.list,y);return u._bodiesUpdateVelocities(A),b.collisionActive.length>0&&a.trigger(v,"collisionActive",{pairs:b.collisionActive,timestamp:T.timestamp,delta:y}),b.collisionEnd.length>0&&a.trigger(v,"collisionEnd",{pairs:b.collisionEnd,timestamp:T.timestamp,delta:y}),u._bodiesClearForces(A),a.trigger(v,"afterUpdate",w),v.timing.lastElapsed=h.now()-x,v},u.merge=function(v,y){if(h.extend(v,y),y.world){v.world=y.world,u.clear(v);for(var x=l.allBodies(v.world),S=0;S<x.length;S++){var E=x[S];g.set(E,!1),E.id=h.nextId()}}},u.clear=function(v){o.clear(v.pairs),s.clear(v.detector)},u._bodiesClearForces=function(v){for(var y=v.length,x=0;x<y;x++){var S=v[x];S.force.x=0,S.force.y=0,S.torque=0}},u._bodiesApplyGravity=function(v,y){var x=typeof y.scale<"u"?y.scale:.001,S=v.length;if(!(y.x===0&&y.y===0||x===0))for(var E=0;E<S;E++){var b=v[E];b.isStatic||b.isSleeping||(b.force.y+=b.mass*y.y*x,b.force.x+=b.mass*y.x*x)}},u._bodiesUpdate=function(v,y){for(var x=v.length,S=0;S<x;S++){var E=v[S];E.isStatic||E.isSleeping||f.update(E,y)}},u._bodiesUpdateVelocities=function(v){for(var y=v.length,x=0;x<y;x++)f.updateVelocities(v[x])}})()},39073:(r,m,e)=>{var u={};r.exports=u;var g=e(68758);(function(){u.on=function(c,s,o){for(var a=s.split(" "),l,p=0;p<a.length;p++)l=a[p],c.events=c.events||{},c.events[l]=c.events[l]||[],c.events[l].push(o);return o},u.off=function(c,s,o){if(!s){c.events={};return}typeof s=="function"&&(o=s,s=g.keys(c.events).join(" "));for(var a=s.split(" "),l=0;l<a.length;l++){var p=c.events[a[l]],h=[];if(o&&p)for(var f=0;f<p.length;f++)p[f]!==o&&h.push(p[f]);c.events[a[l]]=h}},u.trigger=function(c,s,o){var a,l,p,h,f=c.events;if(f&&g.keys(f).length>0){o||(o={}),a=s.split(" ");for(var v=0;v<a.length;v++)if(l=a[v],p=f[l],p){h=g.clone(o,!1),h.name=l,h.source=c;for(var y=0;y<p.length;y++)p[y].apply(c,[h])}}}})()},16929:(r,m,e)=>{var u={};r.exports=u;var g=e(84474),c=e(68758);(function(){u.name="matter-js",u.version="0.19.0",u.uses=[],u.used=[],u.use=function(){g.use(u,Array.prototype.slice.call(arguments))},u.before=function(s,o){return s=s.replace(/^Matter./,""),c.chainPathBefore(u,s,o)},u.after=function(s,o){return s=s.replace(/^Matter./,""),c.chainPathAfter(u,s,o)}})()},84474:(r,m,e)=>{var u={};r.exports=u;var g=e(68758);(function(){u._registry={},u.register=function(c){if(u.isPlugin(c)||g.warn("Plugin.register:",u.toString(c),"does not implement all required fields."),c.name in u._registry){var s=u._registry[c.name],o=u.versionParse(c.version).number,a=u.versionParse(s.version).number;o>a?(g.warn("Plugin.register:",u.toString(s),"was upgraded to",u.toString(c)),u._registry[c.name]=c):o<a?g.warn("Plugin.register:",u.toString(s),"can not be downgraded to",u.toString(c)):c!==s&&g.warn("Plugin.register:",u.toString(c),"is already registered to different plugin object")}else u._registry[c.name]=c;return c},u.resolve=function(c){return u._registry[u.dependencyParse(c).name]},u.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},u.isPlugin=function(c){return c&&c.name&&c.version&&c.install},u.isUsed=function(c,s){return c.used.indexOf(s)>-1},u.isFor=function(c,s){var o=c.for&&u.dependencyParse(c.for);return!c.for||s.name===o.name&&u.versionSatisfies(s.version,o.range)},u.use=function(c,s){if(c.uses=(c.uses||[]).concat(s||[]),c.uses.length===0){g.warn("Plugin.use:",u.toString(c),"does not specify any dependencies to install.");return}for(var o=u.dependencies(c),a=g.topologicalSort(o),l=[],p=0;p<a.length;p+=1)if(a[p]!==c.name){var h=u.resolve(a[p]);if(!h){l.push("\u274C "+a[p]);continue}u.isUsed(c,h.name)||(u.isFor(h,c)||(g.warn("Plugin.use:",u.toString(h),"is for",h.for,"but installed on",u.toString(c)+"."),h._warned=!0),h.install?h.install(c):(g.warn("Plugin.use:",u.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(l.push("\u{1F536} "+u.toString(h)),delete h._warned):l.push("\u2705 "+u.toString(h)),c.used.push(h.name))}l.length>0&&!h.silent&&g.info(l.join("  "))},u.dependencies=function(c,s){var o=u.dependencyParse(c),a=o.name;if(s=s||{},!(a in s)){c=u.resolve(c)||c,s[a]=g.map(c.uses||[],function(p){u.isPlugin(p)&&u.register(p);var h=u.dependencyParse(p),f=u.resolve(p);return f&&!u.versionSatisfies(f.version,h.range)?(g.warn("Plugin.dependencies:",u.toString(f),"does not satisfy",u.toString(h),"used by",u.toString(o)+"."),f._warned=!0,c._warned=!0):f||(g.warn("Plugin.dependencies:",u.toString(p),"used by",u.toString(o),"could not be resolved."),c._warned=!0),h.name});for(var l=0;l<s[a].length;l+=1)u.dependencies(s[a][l],s);return s}},u.dependencyParse=function(c){if(g.isString(c)){var s=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return s.test(c)||g.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},u.versionParse=function(c){var s=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;s.test(c)||g.warn("Plugin.versionParse:",c,"is not a valid version or range.");var o=s.exec(c),a=Number(o[4]),l=Number(o[5]),p=Number(o[6]);return{isRange:!!(o[1]||o[2]),version:o[3],range:c,operator:o[1]||o[2]||"",major:a,minor:l,patch:p,parts:[a,l,p],prerelease:o[7],number:a*1e8+l*1e4+p}},u.versionSatisfies=function(c,s){s=s||"*";var o=u.versionParse(s),a=u.versionParse(c);if(o.isRange){if(o.operator==="*"||c==="*")return!0;if(o.operator===">")return a.number>o.number;if(o.operator===">=")return a.number>=o.number;if(o.operator==="~")return a.major===o.major&&a.minor===o.minor&&a.patch>=o.patch;if(o.operator==="^")return o.major>0?a.major===o.major&&a.number>=o.number:o.minor>0?a.minor===o.minor&&a.patch>=o.patch:a.patch===o.patch}return c===s||c==="*"}})()},22806:(r,m,e)=>{var u={};r.exports=u;var g=e(84125),c=e(39073),s=e(68758);(function(){u._motionWakeThreshold=.18,u._motionSleepThreshold=.08,u._minBias=.9,u.update=function(o,a){for(var l=a/s._baseDelta,p=u._motionSleepThreshold,h=0;h<o.length;h++){var f=o[h],v=g.getSpeed(f),y=g.getAngularSpeed(f),x=v*v+y*y;if(f.force.x!==0||f.force.y!==0){u.set(f,!1);continue}var S=Math.min(f.motion,x),E=Math.max(f.motion,x);f.motion=u._minBias*S+(1-u._minBias)*E,f.sleepThreshold>0&&f.motion<p?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold/l&&u.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},u.afterCollisions=function(o){for(var a=u._motionSleepThreshold,l=0;l<o.length;l++){var p=o[l];if(p.isActive){var h=p.collision,f=h.bodyA.parent,v=h.bodyB.parent;if(!(f.isSleeping&&v.isSleeping||f.isStatic||v.isStatic)&&(f.isSleeping||v.isSleeping)){var y=f.isSleeping&&!f.isStatic?f:v,x=y===f?v:f;!y.isStatic&&x.motion>a&&u.set(y,!1)}}}},u.set=function(o,a){var l=o.isSleeping;a?(o.isSleeping=!0,o.sleepCounter=o.sleepThreshold,o.positionImpulse.x=0,o.positionImpulse.y=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.speed=0,o.angularSpeed=0,o.motion=0,l||c.trigger(o,"sleepStart")):(o.isSleeping=!1,o.sleepCounter=0,l&&c.trigger(o,"sleepEnd"))}})()},68516:(r,m,e)=>{var u={};r.exports=u;var g=e(39745),c=e(68758),s=e(84125),o=e(84091),a=e(10438);(function(){u.rectangle=function(l,p,h,f,v){v=v||{};var y={label:"Rectangle Body",position:{x:l,y:p},vertices:g.fromPath("L 0 0 L "+h+" 0 L "+h+" "+f+" L 0 "+f)};if(v.chamfer){var x=v.chamfer;y.vertices=g.chamfer(y.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete v.chamfer}return s.create(c.extend({},y,v))},u.trapezoid=function(l,p,h,f,v,y){y=y||{},v*=.5;var x=(1-v*2)*h,S=h*v,E=S+x,b=E+S,T;v<.5?T="L 0 0 L "+S+" "+-f+" L "+E+" "+-f+" L "+b+" 0":T="L 0 0 L "+E+" "+-f+" L "+b+" 0";var P={label:"Trapezoid Body",position:{x:l,y:p},vertices:g.fromPath(T)};if(y.chamfer){var C=y.chamfer;P.vertices=g.chamfer(P.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete y.chamfer}return s.create(c.extend({},P,y))},u.circle=function(l,p,h,f,v){f=f||{};var y={label:"Circle Body",circleRadius:h};v=v||25;var x=Math.ceil(Math.max(10,Math.min(v,h)));return x%2===1&&(x+=1),u.polygon(l,p,x,h,c.extend({},y,f))},u.polygon=function(l,p,h,f,v){if(v=v||{},h<3)return u.circle(l,p,f,v);for(var y=2*Math.PI/h,x="",S=y*.5,E=0;E<h;E+=1){var b=S+E*y,T=Math.cos(b)*f,P=Math.sin(b)*f;x+="L "+T.toFixed(3)+" "+P.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:l,y:p},vertices:g.fromPath(x)};if(v.chamfer){var w=v.chamfer;C.vertices=g.chamfer(C.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete v.chamfer}return s.create(c.extend({},C,v))},u.fromVertices=function(l,p,h,f,v,y,x,S){var E=c.getDecomp(),b,T,P,C,w,A,R,I,L,O,D;for(b=!!(E&&E.quickDecomp),f=f||{},P=[],v=typeof v<"u"?v:!1,y=typeof y<"u"?y:.01,x=typeof x<"u"?x:10,S=typeof S<"u"?S:.01,c.isArray(h[0])||(h=[h]),O=0;O<h.length;O+=1)if(A=h[O],C=g.isConvex(A),w=!C,w&&!b&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),C||!b)C?A=g.clockwiseSort(A):A=g.hull(A),P.push({position:{x:l,y:p},vertices:A});else{var V=A.map(function($){return[$.x,$.y]});E.makeCCW(V),y!==!1&&E.removeCollinearPoints(V,y),S!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(V,S);var B=E.quickDecomp(V);for(R=0;R<B.length;R++){var U=B[R],W=U.map(function($){return{x:$[0],y:$[1]}});x>0&&g.area(W)<x||P.push({position:g.centre(W),vertices:W})}}for(R=0;R<P.length;R++)P[R]=s.create(c.extend(P[R],f));if(v){var F=5;for(R=0;R<P.length;R++){var G=P[R];for(I=R+1;I<P.length;I++){var M=P[I];if(o.overlaps(G.bounds,M.bounds)){var N=G.vertices,k=M.vertices;for(L=0;L<G.vertices.length;L++)for(D=0;D<M.vertices.length;D++){var z=a.magnitudeSquared(a.sub(N[(L+1)%N.length],k[D])),H=a.magnitudeSquared(a.sub(N[L],k[(D+1)%k.length]));z<F&&H<F&&(N[L].isInternal=!0,k[D].isInternal=!0)}}}}}return P.length>1?(T=s.create(c.extend({parts:P.slice(0)},f)),s.setPosition(T,{x:l,y:p}),T):P[0]},u.flagCoincidentParts=function(l,p){p===void 0&&(p=5);for(var h=0;h<l.length;h++)for(var f=l[h],v=h+1;v<l.length;v++){var y=l[v];if(o.overlaps(f.bounds,y.bounds))for(var x=f.vertices,S=y.vertices,E=0;E<f.vertices.length;E++)for(var b=0;b<y.vertices.length;b++){var T=a.magnitudeSquared(a.sub(x[(E+1)%x.length],S[b])),P=a.magnitudeSquared(a.sub(x[E],S[(b+1)%S.length]));T<p&&P<p&&(x[E].isInternal=!0,S[b].isInternal=!0)}}return l}})()},56643:(r,m,e)=>{var u={};r.exports=u;var g=e(11299),c=e(52838),s=e(68758),o=e(84125),a=e(68516);(function(){u.stack=function(l,p,h,f,v,y,x){for(var S=g.create({label:"Stack"}),E=l,b=p,T,P=0,C=0;C<f;C++){for(var w=0,A=0;A<h;A++){var R=x(E,b,A,C,T,P);if(R){var I=R.bounds.max.y-R.bounds.min.y,L=R.bounds.max.x-R.bounds.min.x;I>w&&(w=I),o.translate(R,{x:L*.5,y:I*.5}),E=R.bounds.max.x+v,g.addBody(S,R),T=R,P+=1}else E+=v}b+=w+y,E=l}return S},u.chain=function(l,p,h,f,v,y){for(var x=l.bodies,S=1;S<x.length;S++){var E=x[S-1],b=x[S],T=E.bounds.max.y-E.bounds.min.y,P=E.bounds.max.x-E.bounds.min.x,C=b.bounds.max.y-b.bounds.min.y,w=b.bounds.max.x-b.bounds.min.x,A={bodyA:E,pointA:{x:P*p,y:T*h},bodyB:b,pointB:{x:w*f,y:C*v}},R=s.extend(A,y);g.addConstraint(l,c.create(R))}return l.label+=" Chain",l},u.mesh=function(l,p,h,f,v){var y=l.bodies,x,S,E,b,T;for(x=0;x<h;x++){for(S=1;S<p;S++)E=y[S-1+x*p],b=y[S+x*p],g.addConstraint(l,c.create(s.extend({bodyA:E,bodyB:b},v)));if(x>0)for(S=0;S<p;S++)E=y[S+(x-1)*p],b=y[S+x*p],g.addConstraint(l,c.create(s.extend({bodyA:E,bodyB:b},v))),f&&S>0&&(T=y[S-1+(x-1)*p],g.addConstraint(l,c.create(s.extend({bodyA:T,bodyB:b},v)))),f&&S<p-1&&(T=y[S+1+(x-1)*p],g.addConstraint(l,c.create(s.extend({bodyA:T,bodyB:b},v))))}return l.label+=" Mesh",l},u.pyramid=function(l,p,h,f,v,y,x){return u.stack(l,p,h,f,v,y,function(S,E,b,T,P,C){var w=Math.min(f,Math.ceil(h/2)),A=P?P.bounds.max.x-P.bounds.min.x:0;if(!(T>w)){T=w-T;var R=T,I=h-1-T;if(!(b<R||b>I)){C===1&&o.translate(P,{x:(b+(h%2===1?1:-1))*A,y:0});var L=P?b*A:0;return x(l+L+b*v,E,b,T,P,C)}}})},u.newtonsCradle=function(l,p,h,f,v){for(var y=g.create({label:"Newtons Cradle"}),x=0;x<h;x++){var S=1.9,E=a.circle(l+x*(f*S),p+v,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),b=c.create({pointA:{x:l+x*(f*S),y:p},bodyB:E});g.addBody(y,E),g.addConstraint(y,b)}return y},u.car=function(l,p,h,f,v){var y=o.nextGroup(!0),x=20,S=-h*.5+x,E=h*.5-x,b=0,T=g.create({label:"Car"}),P=a.rectangle(l,p,h,f,{collisionFilter:{group:y},chamfer:{radius:f*.5},density:2e-4}),C=a.circle(l+S,p+b,v,{collisionFilter:{group:y},friction:.8}),w=a.circle(l+E,p+b,v,{collisionFilter:{group:y},friction:.8}),A=c.create({bodyB:P,pointB:{x:S,y:b},bodyA:C,stiffness:1,length:0}),R=c.create({bodyB:P,pointB:{x:E,y:b},bodyA:w,stiffness:1,length:0});return g.addBody(T,P),g.addBody(T,C),g.addBody(T,w),g.addConstraint(T,A),g.addConstraint(T,R),T},u.softBody=function(l,p,h,f,v,y,x,S,E,b){E=s.extend({inertia:1/0},E),b=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var T=u.stack(l,p,h,f,v,y,function(P,C){return a.circle(P,C,S,E)});return u.mesh(T,h,f,x,b),T.label="Soft Body",T}})()},50658:(r,m,e)=>{var u={};r.exports=u;var g=e(10438),c=e(68758);(function(){u.fromVertices=function(s){for(var o={},a=0;a<s.length;a++){var l=(a+1)%s.length,p=g.normalise({x:s[l].y-s[a].y,y:s[a].x-s[l].x}),h=p.y===0?1/0:p.x/p.y;h=h.toFixed(3).toString(),o[h]=p}return c.values(o)},u.rotate=function(s,o){if(o!==0)for(var a=Math.cos(o),l=Math.sin(o),p=0;p<s.length;p++){var h=s[p],f;f=h.x*a-h.y*l,h.y=h.x*l+h.y*a,h.x=f}}})()},84091:r=>{var m={};r.exports=m,function(){m.create=function(e){var u={min:{x:0,y:0},max:{x:0,y:0}};return e&&m.update(u,e),u},m.update=function(e,u,g){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var c=0;c<u.length;c++){var s=u[c];s.x>e.max.x&&(e.max.x=s.x),s.x<e.min.x&&(e.min.x=s.x),s.y>e.max.y&&(e.max.y=s.y),s.y<e.min.y&&(e.min.y=s.y)}g&&(g.x>0?e.max.x+=g.x:e.min.x+=g.x,g.y>0?e.max.y+=g.y:e.min.y+=g.y)},m.contains=function(e,u){return u.x>=e.min.x&&u.x<=e.max.x&&u.y>=e.min.y&&u.y<=e.max.y},m.overlaps=function(e,u){return e.min.x<=u.max.x&&e.max.x>=u.min.x&&e.max.y>=u.min.y&&e.min.y<=u.max.y},m.translate=function(e,u){e.min.x+=u.x,e.max.x+=u.x,e.min.y+=u.y,e.max.y+=u.y},m.shift=function(e,u){var g=e.max.x-e.min.x,c=e.max.y-e.min.y;e.min.x=u.x,e.max.x=u.x+g,e.min.y=u.y,e.max.y=u.y+c}}()},92765:(r,m,e)=>{var u={};r.exports=u;var g=e(84091),c=e(68758);(function(){u.pathToVertices=function(s,o){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,l,p,h,f,v,y,x,S,E,b=[],T,P,C=0,w=0,A=0;o=o||15;var R=function(L,O,D){var V=D%2===1&&D>1;if(!S||L!=S.x||O!=S.y){S&&V?(T=S.x,P=S.y):(T=0,P=0);var B={x:T+L,y:P+O};(V||!S)&&(S=B),b.push(B),w=T+L,A=P+O}},I=function(L){var O=L.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":w=L.x,A=L.y;break;case"H":w=L.x;break;case"V":A=L.y;break}R(w,A,L.pathSegType)}};for(u._svgPathToAbsolute(s),p=s.getTotalLength(),v=[],a=0;a<s.pathSegList.numberOfItems;a+=1)v.push(s.pathSegList.getItem(a));for(y=v.concat();C<p;){if(E=s.getPathSegAtLength(C),f=v[E],f!=x){for(;y.length&&y[0]!=f;)I(y.shift());x=f}switch(f.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":h=s.getPointAtLength(C),R(h.x,h.y,0);break}C+=o}for(a=0,l=y.length;a<l;++a)I(y[a]);return b},u._svgPathToAbsolute=function(s){for(var o,a,l,p,h,f,v=s.pathSegList,y=0,x=0,S=v.numberOfItems,E=0;E<S;++E){var b=v.getItem(E),T=b.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in b&&(y=b.x),"y"in b&&(x=b.y);else switch("x1"in b&&(l=y+b.x1),"x2"in b&&(h=y+b.x2),"y1"in b&&(p=x+b.y1),"y2"in b&&(f=x+b.y2),"x"in b&&(y+=b.x),"y"in b&&(x+=b.y),T){case"m":v.replaceItem(s.createSVGPathSegMovetoAbs(y,x),E);break;case"l":v.replaceItem(s.createSVGPathSegLinetoAbs(y,x),E);break;case"h":v.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(y),E);break;case"v":v.replaceItem(s.createSVGPathSegLinetoVerticalAbs(x),E);break;case"c":v.replaceItem(s.createSVGPathSegCurvetoCubicAbs(y,x,l,p,h,f),E);break;case"s":v.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(y,x,h,f),E);break;case"q":v.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(y,x,l,p),E);break;case"t":v.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(y,x),E);break;case"a":v.replaceItem(s.createSVGPathSegArcAbs(y,x,b.r1,b.r2,b.angle,b.largeArcFlag,b.sweepFlag),E);break;case"z":case"Z":y=o,x=a;break}(T=="M"||T=="m")&&(o=y,a=x)}}})()},10438:r=>{var m={};r.exports=m,function(){m.create=function(e,u){return{x:e||0,y:u||0}},m.clone=function(e){return{x:e.x,y:e.y}},m.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},m.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},m.rotate=function(e,u,g){var c=Math.cos(u),s=Math.sin(u);g||(g={});var o=e.x*c-e.y*s;return g.y=e.x*s+e.y*c,g.x=o,g},m.rotateAbout=function(e,u,g,c){var s=Math.cos(u),o=Math.sin(u);c||(c={});var a=g.x+((e.x-g.x)*s-(e.y-g.y)*o);return c.y=g.y+((e.x-g.x)*o+(e.y-g.y)*s),c.x=a,c},m.normalise=function(e){var u=m.magnitude(e);return u===0?{x:0,y:0}:{x:e.x/u,y:e.y/u}},m.dot=function(e,u){return e.x*u.x+e.y*u.y},m.cross=function(e,u){return e.x*u.y-e.y*u.x},m.cross3=function(e,u,g){return(u.x-e.x)*(g.y-e.y)-(u.y-e.y)*(g.x-e.x)},m.add=function(e,u,g){return g||(g={}),g.x=e.x+u.x,g.y=e.y+u.y,g},m.sub=function(e,u,g){return g||(g={}),g.x=e.x-u.x,g.y=e.y-u.y,g},m.mult=function(e,u){return{x:e.x*u,y:e.y*u}},m.div=function(e,u){return{x:e.x/u,y:e.y/u}},m.perp=function(e,u){return u=u===!0?-1:1,{x:u*-e.y,y:u*e.x}},m.neg=function(e){return{x:-e.x,y:-e.y}},m.angle=function(e,u){return Math.atan2(u.y-e.y,u.x-e.x)},m._temp=[m.create(),m.create(),m.create(),m.create(),m.create(),m.create()]}()},39745:(r,m,e)=>{var u={};r.exports=u;var g=e(10438),c=e(68758);(function(){u.create=function(s,o){for(var a=[],l=0;l<s.length;l++){var p=s[l],h={x:p.x,y:p.y,index:l,body:o,isInternal:!1};a.push(h)}return a},u.fromPath=function(s,o){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,l=[];return s.replace(a,function(p,h,f){l.push({x:parseFloat(h),y:parseFloat(f)})}),u.create(l,o)},u.centre=function(s){for(var o=u.area(s,!0),a={x:0,y:0},l,p,h,f=0;f<s.length;f++)h=(f+1)%s.length,l=g.cross(s[f],s[h]),p=g.mult(g.add(s[f],s[h]),l),a=g.add(a,p);return g.div(a,6*o)},u.mean=function(s){for(var o={x:0,y:0},a=0;a<s.length;a++)o.x+=s[a].x,o.y+=s[a].y;return g.div(o,s.length)},u.area=function(s,o){for(var a=0,l=s.length-1,p=0;p<s.length;p++)a+=(s[l].x-s[p].x)*(s[l].y+s[p].y),l=p;return o?a/2:Math.abs(a)/2},u.inertia=function(s,o){for(var a=0,l=0,p=s,h,f,v=0;v<p.length;v++)f=(v+1)%p.length,h=Math.abs(g.cross(p[f],p[v])),a+=h*(g.dot(p[f],p[f])+g.dot(p[f],p[v])+g.dot(p[v],p[v])),l+=h;return o/6*(a/l)},u.translate=function(s,o,a){a=typeof a<"u"?a:1;var l=s.length,p=o.x*a,h=o.y*a,f;for(f=0;f<l;f++)s[f].x+=p,s[f].y+=h;return s},u.rotate=function(s,o,a){if(o!==0){var l=Math.cos(o),p=Math.sin(o),h=a.x,f=a.y,v=s.length,y,x,S,E;for(E=0;E<v;E++)y=s[E],x=y.x-h,S=y.y-f,y.x=h+(x*l-S*p),y.y=f+(x*p+S*l);return s}},u.contains=function(s,o){for(var a=o.x,l=o.y,p=s.length,h=s[p-1],f,v=0;v<p;v++){if(f=s[v],(a-h.x)*(f.y-h.y)+(l-h.y)*(h.x-f.x)>0)return!1;h=f}return!0},u.scale=function(s,o,a,l){if(o===1&&a===1)return s;l=l||u.centre(s);for(var p,h,f=0;f<s.length;f++)p=s[f],h=g.sub(p,l),s[f].x=l.x+h.x*o,s[f].y=l.y+h.y*a;return s},u.chamfer=function(s,o,a,l,p){typeof o=="number"?o=[o]:o=o||[8],a=typeof a<"u"?a:-1,l=l||2,p=p||14;for(var h=[],f=0;f<s.length;f++){var v=s[f-1>=0?f-1:s.length-1],y=s[f],x=s[(f+1)%s.length],S=o[f<o.length?f:o.length-1];if(S===0){h.push(y);continue}var E=g.normalise({x:y.y-v.y,y:v.x-y.x}),b=g.normalise({x:x.y-y.y,y:y.x-x.x}),T=Math.sqrt(2*Math.pow(S,2)),P=g.mult(c.clone(E),S),C=g.normalise(g.mult(g.add(E,b),.5)),w=g.sub(y,g.mult(C,T)),A=a;a===-1&&(A=Math.pow(S,.32)*1.75),A=c.clamp(A,l,p),A%2===1&&(A+=1);for(var R=Math.acos(g.dot(E,b)),I=R/A,L=0;L<A;L++)h.push(g.add(g.rotate(P,I*L),w))}return h},u.clockwiseSort=function(s){var o=u.mean(s);return s.sort(function(a,l){return g.angle(o,a)-g.angle(o,l)}),s},u.isConvex=function(s){var o=0,a=s.length,l,p,h,f;if(a<3)return null;for(l=0;l<a;l++)if(p=(l+1)%a,h=(l+2)%a,f=(s[p].x-s[l].x)*(s[h].y-s[p].y),f-=(s[p].y-s[l].y)*(s[h].x-s[p].x),f<0?o|=1:f>0&&(o|=2),o===3)return!1;return o!==0?!0:null},u.hull=function(s){var o=[],a=[],l,p;for(s=s.slice(0),s.sort(function(h,f){var v=h.x-f.x;return v!==0?v:h.y-f.y}),p=0;p<s.length;p+=1){for(l=s[p];a.length>=2&&g.cross3(a[a.length-2],a[a.length-1],l)<=0;)a.pop();a.push(l)}for(p=s.length-1;p>=0;p-=1){for(l=s[p];o.length>=2&&g.cross3(o[o.length-2],o[o.length-1],l)<=0;)o.pop();o.push(l)}return o.pop(),a.pop(),o.concat(a)}})()},1675:(r,m,e)=>{var u=e(18171),g={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(c){c.after("Body.create",function(){g.Body.init(this)}),c.before("Engine.update",function(s){g.Engine.update(s)})},Body:{init:function(c){c.plugin.attractors=c.plugin.attractors||[]}},Engine:{update:function(c){for(var s=u.Composite.allBodies(c.world),o=0;o<s.length;o++){var a=s[o],l=a.plugin.attractors;if(l&&l.length>0)for(var p=0;p<s.length;p++){var h=s[p];if(o!==p)for(var f=0;f<l.length;f++){var v=l[f],y=v;u.Common.isFunction(v)&&(y=v(a,h)),y&&u.Body.applyForce(h,h.position,y)}}}}},Attractors:{gravityConstant:.001,gravity:function(c,s){var o=u.Vector.sub(s.position,c.position),a=u.Vector.magnitudeSquared(o)||1e-4,l=u.Vector.normalise(o),p=-g.Attractors.gravityConstant*(c.mass*s.mass/a),h=u.Vector.mult(l,p);u.Body.applyForce(c,c.position,u.Vector.neg(h)),u.Body.applyForce(s,s.position,h)}}};r.exports=g},80391:r=>{var m={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(u){u.pairs.map(function(g){var c=g.bodyA,s=g.bodyB;c.gameObject&&c.gameObject.emit("collide",c,s,g),s.gameObject&&s.gameObject.emit("collide",s,c,g),e.Events.trigger(c,"onCollide",{pair:g}),e.Events.trigger(s,"onCollide",{pair:g}),c.onCollideCallback&&c.onCollideCallback(g),s.onCollideCallback&&s.onCollideCallback(g),c.onCollideWith[s.id]&&c.onCollideWith[s.id](s,g),s.onCollideWith[c.id]&&s.onCollideWith[c.id](c,g)})}),e.Events.on(this,"collisionActive",function(u){u.pairs.map(function(g){var c=g.bodyA,s=g.bodyB;c.gameObject&&c.gameObject.emit("collideActive",c,s,g),s.gameObject&&s.gameObject.emit("collideActive",s,c,g),e.Events.trigger(c,"onCollideActive",{pair:g}),e.Events.trigger(s,"onCollideActive",{pair:g}),c.onCollideActiveCallback&&c.onCollideActiveCallback(g),s.onCollideActiveCallback&&s.onCollideActiveCallback(g)})}),e.Events.on(this,"collisionEnd",function(u){u.pairs.map(function(g){var c=g.bodyA,s=g.bodyB;c.gameObject&&c.gameObject.emit("collideEnd",c,s,g),s.gameObject&&s.gameObject.emit("collideEnd",s,c,g),e.Events.trigger(c,"onCollideEnd",{pair:g}),e.Events.trigger(s,"onCollideEnd",{pair:g}),c.onCollideEndCallback&&c.onCollideEndCallback(g),s.onCollideEndCallback&&s.onCollideEndCallback(g)})})})}};r.exports=m},44097:(r,m,e)=>{var u=e(18171),g={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(c){c.after("Engine.update",function(){g.Engine.update(this)})},Engine:{update:function(c){for(var s=c.world,o=u.Composite.allBodies(s),a=u.Composite.allComposites(s),l=0;l<o.length;l+=1){var p=o[l];p.plugin.wrap&&g.Body.wrap(p,p.plugin.wrap)}for(l=0;l<a.length;l+=1){var h=a[l];h.plugin.wrap&&g.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(c,s){var o=null,a=null;if(typeof s.min.x<"u"&&typeof s.max.x<"u"&&(c.min.x>s.max.x?o=s.min.x-c.max.x:c.max.x<s.min.x&&(o=s.max.x-c.min.x)),typeof s.min.y<"u"&&typeof s.max.y<"u"&&(c.min.y>s.max.y?a=s.min.y-c.max.y:c.max.y<s.min.y&&(a=s.max.y-c.min.y)),o!==null||a!==null)return{x:o||0,y:a||0}}},Body:{wrap:function(c,s){var o=g.Bounds.wrap(c.bounds,s);return o&&u.Body.translate(c,o),o}},Composite:{bounds:function(c){for(var s=u.Composite.allBodies(c),o=[],a=0;a<s.length;a+=1){var l=s[a];o.push(l.bounds.min,l.bounds.max)}return u.Bounds.create(o)},wrap:function(c,s){var o=g.Bounds.wrap(g.Composite.bounds(c),s);return o&&u.Composite.translate(c,o),o}}};r.exports=g},81084:r=>{r.exports={decomp:R,quickDecomp:D,isSimple:L,removeCollinearPoints:V,removeDuplicatePoints:B,makeCCW:x};function m(F,G,M){M=M||0;var N=[0,0],k,z,H,$,X,Y,j;return k=F[1][1]-F[0][1],z=F[0][0]-F[1][0],H=k*F[0][0]+z*F[0][1],$=G[1][1]-G[0][1],X=G[0][0]-G[1][0],Y=$*G[0][0]+X*G[0][1],j=k*X-$*z,U(j,0,M)||(N[0]=(X*H-z*Y)/j,N[1]=(k*Y-$*H)/j),N}function e(F,G,M,N){var k=G[0]-F[0],z=G[1]-F[1],H=N[0]-M[0],$=N[1]-M[1];if(H*z-$*k===0)return!1;var X=(k*(M[1]-F[1])+z*(F[0]-M[0]))/(H*z-$*k),Y=(H*(F[1]-M[1])+$*(M[0]-F[0]))/($*k-H*z);return X>=0&&X<=1&&Y>=0&&Y<=1}function u(F,G,M){return(G[0]-F[0])*(M[1]-F[1])-(M[0]-F[0])*(G[1]-F[1])}function g(F,G,M){return u(F,G,M)>0}function c(F,G,M){return u(F,G,M)>=0}function s(F,G,M){return u(F,G,M)<0}function o(F,G,M){return u(F,G,M)<=0}var a=[],l=[];function p(F,G,M,N){if(N){var k=a,z=l;k[0]=G[0]-F[0],k[1]=G[1]-F[1],z[0]=M[0]-G[0],z[1]=M[1]-G[1];var H=k[0]*z[0]+k[1]*z[1],$=Math.sqrt(k[0]*k[0]+k[1]*k[1]),X=Math.sqrt(z[0]*z[0]+z[1]*z[1]),Y=Math.acos(H/($*X));return Y<N}else return u(F,G,M)===0}function h(F,G){var M=G[0]-F[0],N=G[1]-F[1];return M*M+N*N}function f(F,G){var M=F.length;return F[G<0?G%M+M:G%M]}function v(F){F.length=0}function y(F,G,M,N){for(var k=M;k<N;k++)F.push(G[k])}function x(F){for(var G=0,M=F,N=1;N<F.length;++N)(M[N][1]<M[G][1]||M[N][1]===M[G][1]&&M[N][0]>M[G][0])&&(G=N);return g(f(F,G-1),f(F,G),f(F,G+1))?!1:(S(F),!0)}function S(F){for(var G=[],M=F.length,N=0;N!==M;N++)G.push(F.pop());for(var N=0;N!==M;N++)F[N]=G[N]}function E(F,G){return s(f(F,G-1),f(F,G),f(F,G+1))}var b=[],T=[];function P(F,G,M){var N,k,z=b,H=T;if(c(f(F,G+1),f(F,G),f(F,M))&&o(f(F,G-1),f(F,G),f(F,M)))return!1;k=h(f(F,G),f(F,M));for(var $=0;$!==F.length;++$)if(!(($+1)%F.length===G||$===G)&&c(f(F,G),f(F,M),f(F,$+1))&&o(f(F,G),f(F,M),f(F,$))&&(z[0]=f(F,G),z[1]=f(F,M),H[0]=f(F,$),H[1]=f(F,$+1),N=m(z,H),h(f(F,G),N)<k))return!1;return!0}function C(F,G,M){for(var N=0;N!==F.length;++N)if(!(N===G||N===M||(N+1)%F.length===G||(N+1)%F.length===M)&&e(f(F,G),f(F,M),f(F,N),f(F,N+1)))return!1;return!0}function w(F,G,M,N){var k=N||[];if(v(k),G<M)for(var z=G;z<=M;z++)k.push(F[z]);else{for(var z=0;z<=M;z++)k.push(F[z]);for(var z=G;z<F.length;z++)k.push(F[z])}return k}function A(F){for(var G=[],M=[],N=[],k=[],z=Number.MAX_VALUE,H=0;H<F.length;++H)if(E(F,H)){for(var $=0;$<F.length;++$)if(P(F,H,$)){M=A(w(F,H,$,k)),N=A(w(F,$,H,k));for(var X=0;X<N.length;X++)M.push(N[X]);M.length<z&&(G=M,z=M.length,G.push([f(F,H),f(F,$)]))}}return G}function R(F){var G=A(F);return G.length>0?I(F,G):[F]}function I(F,G){if(G.length===0)return[F];if(G instanceof Array&&G.length&&G[0]instanceof Array&&G[0].length===2&&G[0][0]instanceof Array){for(var M=[F],N=0;N<G.length;N++)for(var k=G[N],z=0;z<M.length;z++){var H=M[z],$=I(H,k);if($){M.splice(z,1),M.push($[0],$[1]);break}}return M}else{var k=G,N=F.indexOf(k[0]),z=F.indexOf(k[1]);return N!==-1&&z!==-1?[w(F,N,z),w(F,z,N)]:!1}}function L(F){var G=F,M;for(M=0;M<G.length-1;M++)for(var N=0;N<M-1;N++)if(e(G[M],G[M+1],G[N],G[N+1]))return!1;for(M=1;M<G.length-2;M++)if(e(G[0],G[G.length-1],G[M],G[M+1]))return!1;return!0}function O(F,G,M,N,k){k=k||0;var z=G[1]-F[1],H=F[0]-G[0],$=z*F[0]+H*F[1],X=N[1]-M[1],Y=M[0]-N[0],j=X*M[0]+Y*M[1],J=z*Y-X*H;return U(J,0,k)?[0,0]:[(Y*$-H*j)/J,(z*j-X*$)/J]}function D(F,G,M,N,k,z,H){z=z||100,H=H||0,k=k||25,G=typeof G<"u"?G:[],M=M||[],N=N||[];var $=[0,0],X=[0,0],Y=[0,0],j=0,J=0,Q=0,Z=0,it=0,rt=0,ut=0,dt=[],ct=[],nt=F,ht=F;if(ht.length<3)return G;if(H++,H>z)return console.warn("quickDecomp: max level ("+z+") reached."),G;for(var ot=0;ot<F.length;++ot)if(E(nt,ot)){M.push(nt[ot]),j=J=Number.MAX_VALUE;for(var mt=0;mt<F.length;++mt)g(f(nt,ot-1),f(nt,ot),f(nt,mt))&&o(f(nt,ot-1),f(nt,ot),f(nt,mt-1))&&(Y=O(f(nt,ot-1),f(nt,ot),f(nt,mt),f(nt,mt-1)),s(f(nt,ot+1),f(nt,ot),Y)&&(Q=h(nt[ot],Y),Q<J&&(J=Q,X=Y,rt=mt))),g(f(nt,ot+1),f(nt,ot),f(nt,mt+1))&&o(f(nt,ot+1),f(nt,ot),f(nt,mt))&&(Y=O(f(nt,ot+1),f(nt,ot),f(nt,mt),f(nt,mt+1)),g(f(nt,ot-1),f(nt,ot),Y)&&(Q=h(nt[ot],Y),Q<j&&(j=Q,$=Y,it=mt)));if(rt===(it+1)%F.length)Y[0]=(X[0]+$[0])/2,Y[1]=(X[1]+$[1])/2,N.push(Y),ot<it?(y(dt,nt,ot,it+1),dt.push(Y),ct.push(Y),rt!==0&&y(ct,nt,rt,nt.length),y(ct,nt,0,ot+1)):(ot!==0&&y(dt,nt,ot,nt.length),y(dt,nt,0,it+1),dt.push(Y),ct.push(Y),y(ct,nt,rt,ot+1));else{if(rt>it&&(it+=F.length),Z=Number.MAX_VALUE,it<rt)return G;for(var mt=rt;mt<=it;++mt)c(f(nt,ot-1),f(nt,ot),f(nt,mt))&&o(f(nt,ot+1),f(nt,ot),f(nt,mt))&&(Q=h(f(nt,ot),f(nt,mt)),Q<Z&&C(nt,ot,mt)&&(Z=Q,ut=mt%F.length));ot<ut?(y(dt,nt,ot,ut+1),ut!==0&&y(ct,nt,ut,ht.length),y(ct,nt,0,ot+1)):(ot!==0&&y(dt,nt,ot,ht.length),y(dt,nt,0,ut+1),y(ct,nt,ut,ot+1))}return dt.length<ct.length?(D(dt,G,M,N,k,z,H),D(ct,G,M,N,k,z,H)):(D(ct,G,M,N,k,z,H),D(dt,G,M,N,k,z,H)),G}return G.push(F),G}function V(F,G){for(var M=0,N=F.length-1;F.length>3&&N>=0;--N)p(f(F,N-1),f(F,N),f(F,N+1),G)&&(F.splice(N%F.length,1),M++);return M}function B(F,G){for(var M=F.length-1;M>=1;--M)for(var N=F[M],k=M-1;k>=0;--k)if(W(N,F[k],G)){F.splice(M,1);continue}}function U(F,G,M){return M=M||0,Math.abs(F-G)<=M}function W(F,G,M){return U(F[0],G[0],M)&&U(F[1],G[1],M)}},88257:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s){this.pluginManager=s,this.game=s.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=g},18360:r=>{var m={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};r.exports=m},91963:r=>{var m={},e={},u={};u.register=function(g,c,s,o){o===void 0&&(o=!1),m[g]={plugin:c,mapping:s,custom:o}},u.registerCustom=function(g,c,s,o){e[g]={plugin:c,mapping:s,data:o}},u.hasCore=function(g){return m.hasOwnProperty(g)},u.hasCustom=function(g){return e.hasOwnProperty(g)},u.getCore=function(g){return m[g]},u.getCustom=function(g){return e[g]},u.getCustomClass=function(g){return e.hasOwnProperty(g)?e[g].plugin:null},u.remove=function(g){m.hasOwnProperty(g)&&delete m[g]},u.removeCustom=function(g){e.hasOwnProperty(g)&&delete e[g]},u.destroyCorePlugins=function(){for(var g in m)m.hasOwnProperty(g)&&delete m[g]},u.destroyCustomPlugins=function(){for(var g in e)e.hasOwnProperty(g)&&delete e[g]},r.exports=u},49274:(r,m,e)=>{var u=e(56694),g=e(97081),c=e(6659),s=e(76846),o=e(99325),a=e(61286),l=e(72632),p=e(91963),h=e(66458),f=new u({Extends:c,initialize:function(y){c.call(this),this.game=y,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],y.isBooted?this.boot():y.events.once(g.BOOT,this.boot,this)},boot:function(){var v,y,x,S,E,b,T,P=this.game.config,C=P.installGlobalPlugins;for(C=C.concat(this._pendingGlobal),v=0;v<C.length;v++)y=C[v],x=l(y,"key",null),S=l(y,"plugin",null),E=l(y,"start",!1),b=l(y,"mapping",null),T=l(y,"data",null),x&&(S?this.install(x,S,E,b,T):console.warn("Missing `plugin` for key: "+x));for(C=P.installScenePlugins,C=C.concat(this._pendingScene),v=0;v<C.length;v++)y=C[v],x=l(y,"key",null),S=l(y,"plugin",null),b=l(y,"mapping",null),x&&(S?this.installScenePlugin(x,S,b):console.warn("Missing `plugin` for key: "+x));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(g.DESTROY,this.destroy,this)},addToScene:function(v,y,x){var S,E,b,T=this.game,P=v.scene,C=v.settings.map,w=v.settings.isBooted;for(S=0;S<y.length;S++)E=y[S],T[E]?(v[E]=T[E],C.hasOwnProperty(E)&&(P[C[E]]=v[E])):E==="game"&&C.hasOwnProperty(E)&&(P[C[E]]=T);for(var A=0;A<x.length;A++)for(b=x[A],S=0;S<b.length;S++)if(E=b[S],!!p.hasCore(E)){var R=p.getCore(E),I=R.mapping,L=new R.plugin(P,this,I);v[I]=L,R.custom?P[I]=L:C.hasOwnProperty(I)&&(P[C[I]]=L),w&&L.boot()}for(b=this.plugins,S=0;S<b.length;S++){var O=b[S];O.mapping&&(P[O.mapping]=O.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,y,x,S,E){if(E===void 0&&(E=!1),typeof y!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(p.hasCore(v)||p.register(v,y,x,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!E&&p.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(S){var b=new y(S,this,v);S.sys[v]=b,x&&x!==""&&(S[x]=b),b.boot()}},install:function(v,y,x,S,E){if(x===void 0&&(x=!1),S===void 0&&(S=null),E===void 0&&(E=null),typeof y!="function")return console.warn("Invalid Plugin: "+v),null;if(p.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(S!==null&&(x=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:y,start:x,mapping:S,data:E});else if(p.registerCustom(v,y,S,E),x)return this.start(v);return null},getIndex:function(v){for(var y=this.plugins,x=0;x<y.length;x++){var S=y[x];if(S.key===v)return x}return-1},getEntry:function(v){var y=this.getIndex(v);if(y!==-1)return this.plugins[y]},isActive:function(v){var y=this.getEntry(v);return y&&y.active},start:function(v,y){y===void 0&&(y=v);var x=this.getEntry(y);return x&&!x.active?(x.active=!0,x.plugin.start()):x||(x=this.createEntry(v,y)),x?x.plugin:null},createEntry:function(v,y){var x=p.getCustom(v);if(x){var S=new x.plugin(this);x={key:y,plugin:S,active:!0,mapping:x.mapping,data:x.data},this.plugins.push(x),S.init(x.data),S.start()}return x},stop:function(v){var y=this.getEntry(v);return y&&y.active&&(y.active=!1,y.plugin.stop()),this},get:function(v,y){y===void 0&&(y=!0);var x=this.getEntry(v);if(x)return x.plugin;var S=this.getClass(v);return S&&y?(x=this.createEntry(v,v),x?x.plugin:null):S||null},getClass:function(v){return p.getCustomClass(v)},removeGlobalPlugin:function(v){var y=this.getEntry(v);y&&h(this.plugins,y),p.removeCustom(v)},removeScenePlugin:function(v){h(this.scenePlugins,v),p.remove(v)},registerGameObject:function(v,y,x){return y&&a.register(v,y),x&&o.register(v,x),this},removeGameObject:function(v,y,x){return y===void 0&&(y=!0),x===void 0&&(x=!0),y&&a.remove(v),x&&o.remove(v),this},registerFileType:function(v,y,x){s.register(v,y),x&&x.sys.load&&(x.sys.load[v]=y)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();p.destroyCustomPlugins(),this.game.noReturn&&p.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});r.exports=f},39283:(r,m,e)=>{var u=e(88257),g=e(56694),c=e(7599),s=new g({Extends:u,initialize:function(a,l,p){u.call(this,l),this.scene=a,this.systems=a.sys,this.pluginKey=p,a.sys.events.once(c.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=s},45615:(r,m,e)=>{r.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(r){let m=performance.now(),e=this.getVideoPlaybackQuality(),u=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,g=(c,s)=>{let o=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||o.totalVideoFrames-o.droppedVideoFrames;if(a>u){let l=this.mozFrameDelay||o.totalFrameDelay-e.totalFrameDelay||0,p=s-c;r(s,{presentationTime:s+l*1e3,expectedDisplayTime:s+p,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+p/1e3,presentedFrames:a,processingDuration:l}),delete this._rvfcpolyfillmap[m]}else this._rvfcpolyfillmap[m]=requestAnimationFrame(l=>g(s,l))};return this._rvfcpolyfillmap[m]=requestAnimationFrame(c=>g(m,c)),m},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(r){cancelAnimationFrame(this._rvfcpolyfillmap[r]),delete this._rvfcpolyfillmap[r]})},95723:r=>{r.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:r=>{var m={DEFAULT:0,LINEAR:0,NEAREST:1};r.exports=m},91135:(r,m,e)=>{var u=e(89787),g=e(61840),c=e(56694),s=e(86459),o=e(6659),a=e(81044),l=e(32834),p=e(40444),h=e(38203),f=e(69360),v=new c({Extends:o,initialize:function(x){o.call(this);var S=x.config;this.config={clearBeforeRender:S.clearBeforeRender,backgroundColor:S.backgroundColor,antialias:S.antialias,roundPixels:S.roundPixels},this.game=x,this.type=s.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=x.canvas;var E={alpha:x.config.transparent,desynchronized:x.config.desynchronized,willReadFrequently:!1};this.gameContext=S.context?S.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=x.config.antialias,this.blendModes=l(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(h.READY,this.boot,this)},boot:function(){var y=this.game,x=y.scale.baseSize;this.width=x.width,this.height=x.height,this.isBooted=!0,y.scale.on(p.RESIZE,this.onResize,this),this.resize(x.width,x.height)},onResize:function(y,x){(x.width!==this.width||x.height!==this.height)&&this.resize(x.width,x.height)},resize:function(y,x){this.width=y,this.height=x,this.emit(a.RESIZE,y,x)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(y){return this.currentContext.globalCompositeOperation=y,this},setContext:function(y){return this.currentContext=y||this.gameContext,this},setAlpha:function(y){return this.currentContext.globalAlpha=y,this},preRender:function(){var y=this.gameContext,x=this.config,S=this.width,E=this.height;y.globalAlpha=1,y.globalCompositeOperation="source-over",y.setTransform(1,0,0,1,0,0),x.clearBeforeRender&&(y.clearRect(0,0,S,E),x.transparent||(y.fillStyle=x.backgroundColor.rgba,y.fillRect(0,0,S,E))),y.save(),this.drawCount=0,this.emit(a.PRE_RENDER)},render:function(y,x,S){var E=x.length;this.emit(a.RENDER,y,S);var b=S.x,T=S.y,P=S.width,C=S.height,w=S.renderToTexture?S.context:y.sys.context;w.save(),this.game.scene.customViewports&&(w.beginPath(),w.rect(b,T,P,C),w.clip()),S.emit(u.PRE_RENDER,S),this.currentContext=w;var A=S.mask;A&&A.preRenderCanvas(this,null,S._maskCamera),S.transparent||(w.fillStyle=S.backgroundColor.rgba,w.fillRect(b,T,P,C)),w.globalAlpha=S.alpha,w.globalCompositeOperation="source-over",this.drawCount+=E,S.renderToTexture&&S.emit(u.PRE_RENDER,S),S.matrix.copyToContext(w);for(var R=0;R<E;R++){var I=x[R];I.mask&&I.mask.preRenderCanvas(this,I,S),I.renderCanvas(this,I,S),I.mask&&I.mask.postRenderCanvas(this,I,S)}w.setTransform(1,0,0,1,0,0),w.globalCompositeOperation="source-over",w.globalAlpha=1,S.flashEffect.postRenderCanvas(w),S.fadeEffect.postRenderCanvas(w),S.dirty=!1,A&&A.postRenderCanvas(this),w.restore(),S.renderToTexture&&(S.emit(u.POST_RENDER,S),S.renderToGame&&y.sys.context.drawImage(S.canvas,b,T)),S.emit(u.POST_RENDER,S)},postRender:function(){var y=this.gameContext;y.restore(),this.emit(a.POST_RENDER);var x=this.snapshotState;x.callback&&(g(this.gameCanvas,x),x.callback=null)},snapshotCanvas:function(y,x,S,E,b,T,P,C,w){S===void 0&&(S=!1),this.snapshotArea(E,b,T,P,x,C,w);var A=this.snapshotState;return A.getPixel=S,g(y,A),A.callback=null,this},snapshot:function(y,x,S){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,y,x,S)},snapshotArea:function(y,x,S,E,b,T,P){var C=this.snapshotState;return C.callback=b,C.type=T,C.encoder=P,C.getPixel=!1,C.x=y,C.y=x,C.width=Math.min(S,this.gameCanvas.width),C.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(y,x,S){return this.snapshotArea(y,x,1,1,S),this.snapshotState.getPixel=!0,this},batchSprite:function(y,x,S,E){var b=S.alpha*y.alpha;if(b!==0){var T=this.currentContext,P=this._tempMatrix1,C=this._tempMatrix2,w=x.canvasData,A=w.x,R=w.y,I=x.cutWidth,L=x.cutHeight,O=x.customPivot,D=x.source.resolution,V=y.displayOriginX,B=y.displayOriginY,U=-V+x.x,W=-B+x.y;if(y.isCropped){var F=y._crop;(F.flipX!==y.flipX||F.flipY!==y.flipY)&&x.updateCropUVs(F,y.flipX,y.flipY),I=F.cw,L=F.ch,A=F.cx,R=F.cy,U=-V+F.x,W=-B+F.y,y.flipX&&(U>=0?U=-(U+I):U<0&&(U=Math.abs(U)-I)),y.flipY&&(W>=0?W=-(W+L):W<0&&(W=Math.abs(W)-L))}var G=1,M=1;y.flipX&&(O||(U+=-x.realWidth+V*2),G=-1),y.flipY&&(O||(W+=-x.realHeight+B*2),M=-1);var N=y.x,k=y.y;S.roundPixels&&(N=Math.floor(N),k=Math.floor(k)),C.applyITRS(N,k,y.rotation,y.scaleX*G,y.scaleY*M),P.copyFrom(S.matrix),E?(P.multiplyWithOffset(E,-S.scrollX*y.scrollFactorX,-S.scrollY*y.scrollFactorY),C.e=N,C.f=k):(C.e-=S.scrollX*y.scrollFactorX,C.f-=S.scrollY*y.scrollFactorY),P.multiply(C),S.roundPixels&&(P.e=Math.round(P.e),P.f=Math.round(P.f)),T.save(),P.setToContext(T),T.globalCompositeOperation=this.blendModes[y.blendMode],T.globalAlpha=b,T.imageSmoothingEnabled=!x.source.scaleMode,y.mask&&y.mask.preRenderCanvas(this,y,S),I>0&&L>0&&T.drawImage(x.source.image,A,R,I,L,U,W,I/D,L/D),y.mask&&y.mask.postRenderCanvas(this,y,S),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});r.exports=v},6046:(r,m,e)=>{r.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}},32834:(r,m,e)=>{var u=e(95723),g=e(98581),c=function(){var s=[],o=g.supportNewBlendModes,a="source-over";return s[u.NORMAL]=a,s[u.ADD]="lighter",s[u.MULTIPLY]=o?"multiply":a,s[u.SCREEN]=o?"screen":a,s[u.OVERLAY]=o?"overlay":a,s[u.DARKEN]=o?"darken":a,s[u.LIGHTEN]=o?"lighten":a,s[u.COLOR_DODGE]=o?"color-dodge":a,s[u.COLOR_BURN]=o?"color-burn":a,s[u.HARD_LIGHT]=o?"hard-light":a,s[u.SOFT_LIGHT]=o?"soft-light":a,s[u.DIFFERENCE]=o?"difference":a,s[u.EXCLUSION]=o?"exclusion":a,s[u.HUE]=o?"hue":a,s[u.SATURATION]=o?"saturation":a,s[u.COLOR]=o?"color":a,s[u.LUMINOSITY]=o?"luminosity":a,s[u.ERASE]="destination-out",s[u.SOURCE_IN]="source-in",s[u.SOURCE_OUT]="source-out",s[u.SOURCE_ATOP]="source-atop",s[u.DESTINATION_OVER]="destination-over",s[u.DESTINATION_IN]="destination-in",s[u.DESTINATION_OUT]="destination-out",s[u.DESTINATION_ATOP]="destination-atop",s[u.LIGHTER]="lighter",s[u.COPY]="copy",s[u.XOR]="xor",s};r.exports=c},49584:(r,m,e)=>{var u=e(73329),g=function(c,s,o,a,l){var p=a.alpha*o.alpha;if(p<=0)return!1;var h=u(o,a,l).calc;return s.globalCompositeOperation=c.blendModes[o.blendMode],s.globalAlpha=p,s.save(),h.setToContext(s),s.imageSmoothingEnabled=o.frame?!o.frame.source.scaleMode:c.antialias,!0};r.exports=g},70936:r=>{r.exports="postrender"},99298:r=>{r.exports="prerender"},7743:r=>{r.exports="render"},99519:r=>{r.exports="resize"},81044:(r,m,e)=>{r.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}},42069:(r,m,e)=>{r.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}},61840:(r,m,e)=>{var u=e(61068),g=e(27119),c=e(72632),s=function(o,a){var l=c(a,"callback"),p=c(a,"type","image/png"),h=c(a,"encoder",.92),f=Math.abs(Math.round(c(a,"x",0))),v=Math.abs(Math.round(c(a,"y",0))),y=Math.floor(c(a,"width",o.width)),x=Math.floor(c(a,"height",o.height)),S=c(a,"getPixel",!1);if(S){var E=o.getContext("2d",{willReadFrequently:!1}),b=E.getImageData(f,v,1,1),T=b.data;l.call(null,new g(T[0],T[1],T[2],T[3]))}else if(f!==0||v!==0||y!==o.width||x!==o.height){var P=u.createWebGL(this,y,x),C=P.getContext("2d",{willReadFrequently:!0});y>0&&x>0&&C.drawImage(o,f,v,y,x,0,0,y,x);var w=new Image;w.onerror=function(){l.call(null),u.remove(P)},w.onload=function(){l.call(null,w),u.remove(P)},w.src=P.toDataURL(p,h)}else{var A=new Image;A.onerror=function(){l.call(null)},A.onload=function(){l.call(null,A)},A.src=o.toDataURL(p,h)}};r.exports=s},1217:(r,m,e)=>{var u=e(61068),g=e(27119),c=e(72632),s=function(o,a){var l=o,p=c(a,"callback"),h=c(a,"type","image/png"),f=c(a,"encoder",.92),v=Math.abs(Math.round(c(a,"x",0))),y=Math.abs(Math.round(c(a,"y",0))),x=c(a,"getPixel",!1),S=c(a,"isFramebuffer",!1),E=S?c(a,"bufferWidth",1):l.drawingBufferWidth,b=S?c(a,"bufferHeight",1):l.drawingBufferHeight;if(x){var T=new Uint8Array(4),P=S?y:b-y;l.readPixels(v,P,1,1,l.RGBA,l.UNSIGNED_BYTE,T),p.call(null,new g(T[0],T[1],T[2],T[3]))}else{var C=Math.floor(c(a,"width",E)),w=Math.floor(c(a,"height",b)),A=C*w*4,R=new Uint8Array(A);l.readPixels(v,b-y-w,C,w,l.RGBA,l.UNSIGNED_BYTE,R);for(var I=u.createWebGL(this,C,w),L=I.getContext("2d",{willReadFrequently:!0}),O=L.getImageData(0,0,C,w),D=O.data,V=0;V<w;V++)for(var B=0;B<C;B++){var U=((w-V-1)*C+B)*4,W=S?A-(V*C+(C-B))*4:(V*C+B)*4;D[W+0]=R[U+0],D[W+1]=R[U+1],D[W+2]=R[U+2],D[W+3]=R[U+3]}L.putImageData(O,0,0);var F=new Image;F.onerror=function(){p.call(null),u.remove(I)},F.onload=function(){p.call(null,F),u.remove(I)},F.src=I.toDataURL(h,f)}};r.exports=s},95528:(r,m,e)=>{r.exports={Canvas:e(61840),WebGL:e(1217)}},35217:(r,m,e)=>{var u=e(56694),g=e(65641),c=e(33885),s=e(77290),o=e(72632),a=e(37410),l=e(82127),p=e(5583),h=e(58136),f=e(47406),v=e(81828),y=e(66901),x=e(71264),S=e(77310),E=e(10919),b=e(21213),T=e(51212),P=e(60848),C=new u({initialize:function(A){this.game=A.game,this.renderer=A,this.classes=new c([[g.UTILITY_PIPELINE,P],[g.MULTI_PIPELINE,S],[g.BITMAPMASK_PIPELINE,p],[g.SINGLE_PIPELINE,T],[g.ROPE_PIPELINE,b],[g.LIGHT_PIPELINE,y],[g.POINTLIGHT_PIPELINE,E],[g.MOBILE_PIPELINE,x],[g.FX_PIPELINE,v]]),this.postPipelineClasses=new c([[String(f.BARREL),h.Barrel],[String(f.BLOOM),h.Bloom],[String(f.BLUR),h.Blur],[String(f.BOKEH),h.Bokeh],[String(f.CIRCLE),h.Circle],[String(f.COLOR_MATRIX),h.ColorMatrix],[String(f.DISPLACEMENT),h.Displacement],[String(f.GLOW),h.Glow],[String(f.GRADIENT),h.Gradient],[String(f.PIXELATE),h.Pixelate],[String(f.SHADOW),h.Shadow],[String(f.SHINE),h.Shine],[String(f.VIGNETTE),h.Vignette],[String(f.WIPE),h.Wipe]]),this.pipelines=new c,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(w,A,R){var I=this.renderer,L=this.renderTargets;this.frameInc=Math.floor(o(w,"frameInc",32));for(var O=I.width,D=I.height,V=Math.min(O,D),B=Math.ceil(V/this.frameInc),U=1;U<B;U++){var W=U*this.frameInc;L.push(new a(I,W,W)),L.push(new a(I,W,W)),L.push(new a(I,W,W)),this.maxDimension=W}L.push(new a(I,O,D,1,0,!0,!0)),L.push(new a(I,O,D,1,0,!0,!0)),L.push(new a(I,O,D,1,0,!0,!0));var F,G,M=this,N=this.game;if(this.classes.each(function(z,H){F=M.add(z,new H({game:N})),z===g.UTILITY_PIPELINE&&(M.UTILITY_PIPELINE=F,M.fullFrame1=F.fullFrame1,M.fullFrame2=F.fullFrame2,M.halfFrame1=F.halfFrame1,M.halfFrame2=F.halfFrame2)}),this.MULTI_PIPELINE=this.get(g.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(g.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(g.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(g.FX_PIPELINE),w)for(G in w){var k=w[G];F=new k(N),F.name=G,F.isPostFX?this.postPipelineClasses.set(G,k):this.has(G)||(this.classes.set(G,k),this.add(G,F))}this.default=this.get(A),R&&!s.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(w){var A=this.get(w);return A&&(this.default=A),A},add:function(w,A){if(A.isPostFX){console.warn(w+" is a Post Pipeline. Use `addPostPipeline` instead");return}var R=this.pipelines,I=this.renderer;return R.has(w)?console.warn("Pipeline exists: "+w):(A.name=w,A.manager=this,R.set(w,A)),A.hasBooted||A.boot(),I.width!==0&&I.height!==0&&!A.isPreFX&&A.resize(I.width,I.height),A},addPostPipeline:function(w,A){this.postPipelineClasses.has(w)||this.postPipelineClasses.set(w,A)},flush:function(){this.current&&this.current.flush()},has:function(w){var A=this.pipelines;return typeof w=="string"?A.has(w):!!A.contains(w)},get:function(w){var A=this.pipelines;if(typeof w=="string")return A.get(w);if(A.contains(w))return w},getPostPipeline:function(w,A,R){var I=this.postPipelineClasses,L,O="",D=typeof w;if(D==="string"||D==="number"?(L=I.get(w),O=w):D==="function"?(I.contains(w)&&(L=w),O=w.name):D==="object"&&(L=I.get(w.name),O=w.name),L){var V=new L(this.game,R);return V.name=O,A&&(V.gameObject=A),V}},remove:function(w,A,R){A===void 0&&(A=!0),R===void 0&&(R=!0),this.pipelines.delete(w),A&&this.classes.delete(w),R&&this.postPipelineClasses.delete(w)},set:function(w,A,R){if(!w.isPostFX)return this.isCurrent(w,R)||(this.flush(),this.current&&this.current.unbind(),this.current=w,w.bind(R)),w.updateProjectionMatrix(),w.onBind(A),w},preBatch:function(w){if(w.hasPostPipeline){this.flush();for(var A=w.postPipelines,R=A.length-1;R>=0;R--){var I=A[R];I.active&&I.preBatch(w)}}},postBatch:function(w){if(w.hasPostPipeline){this.flush();for(var A=w.postPipelines,R=0;R<A.length;R++){var I=A[R];I.active&&I.postBatch(w)}}},preBatchCamera:function(w){if(w.hasPostPipeline){this.flush();for(var A=w.postPipelines,R=A.length-1;R>=0;R--){var I=A[R];I.active&&I.preBatch(w)}}},postBatchCamera:function(w){if(w.hasPostPipeline){this.flush();for(var A=w.postPipelines,R=0;R<A.length;R++){var I=A[R];I.active&&I.postBatch(w)}}},isCurrent:function(w,A){var R=this.renderer,I=this.current;return I&&!A&&(A=I.currentShader),!(I!==w||A.program!==R.currentProgram)},copyFrame:function(w,A,R,I,L){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(w,A,R,I,L),this},copyToGame:function(w){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(w),this},drawFrame:function(w,A,R,I){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(w,A,R,I),this},blendFrames:function(w,A,R,I,L){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(w,A,R,I,L),this},blendFramesAdditive:function(w,A,R,I,L){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(w,A,R,I,L),this},clearFrame:function(w,A){return this.UTILITY_PIPELINE.clearFrame(w,A),this},blitFrame:function(w,A,R,I,L,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(w,A,R,I,L,O),this},copyFrameRect:function(w,A,R,I,L,O,D,V){return this.UTILITY_PIPELINE.copyFrameRect(w,A,R,I,L,O,D,V),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(w){return this.UTILITY_PIPELINE.bind(w)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(w){w===void 0&&this.previous&&(w=this.previous);var A=this.renderer,R=A.gl;R.disable(R.DEPTH_TEST),R.disable(R.CULL_FACE),A.hasActiveStencilMask()?R.clear(R.DEPTH_BUFFER_BIT):(R.disable(R.STENCIL_TEST),R.clear(R.DEPTH_BUFFER_BIT|R.STENCIL_BUFFER_BIT)),R.viewport(0,0,A.width,A.height),A.currentProgram=null,A.setBlendMode(0,!0);var I=A.vaoExtension;I&&I.bindVertexArrayOES(null);var L=this.pipelines.entries;for(var O in L)L[O].glReset=!0;w&&(this.current=w,w.rebind())},clear:function(){var w=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,w.currentProgram=null,w.setBlendMode(0,!0);var A=w.vaoExtension;A&&A.bindVertexArrayOES(null)},getRenderTarget:function(w){var A=this.renderTargets,R=3;if(w>this.maxDimension)return this.targetIndex=A.length-R,A[this.targetIndex];var I=(l(w,this.frameInc,0,!0)-1)*R;return this.targetIndex=I,A[I]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});r.exports=C},37410:(r,m,e)=>{var u=e(56694),g=e(81044),c=new u({initialize:function(o,a,l,p,h,f,v,y,x){p===void 0&&(p=1),h===void 0&&(h=0),f===void 0&&(f=!0),v===void 0&&(v=!1),y===void 0&&(y=!0),x===void 0&&(x=!0),this.renderer=o,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=p,this.minFilter=h,this.autoClear=f,this.autoResize=!0,this.hasDepthBuffer=y,this.forceClamp=x,this.resize(a,l),v?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(s){return s&&!this.autoResize?(this.renderer.on(g.RESIZE,this.resize,this),this.autoResize=!0):!s&&this.autoResize&&(this.renderer.off(g.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(s,o){var a=s*this.scale,l=o*this.scale;if(this.autoResize&&(a!==this.width||l!==this.height)){var p=this.renderer;p.deleteFramebuffer(this.framebuffer),p.deleteTexture(this.texture),s*=this.scale,o*=this.scale,s=Math.round(s),o=Math.round(o),s<=0&&(s=1),o<=0&&(o=1),this.texture=p.createTextureFromSource(null,s,o,this.minFilter,this.forceClamp),this.framebuffer=p.createFramebuffer(s,o,this.texture,this.hasDepthBuffer),this.width=s,this.height=o}return this},bind:function(s,o,a){s===void 0&&(s=!1);var l=this.renderer;if(s&&l.flush(),o&&a&&this.resize(o,a),l.pushFramebuffer(this.framebuffer,!1,!1),s&&this.adjustViewport(),this.autoClear){var p=this.renderer.gl;p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT)}l.clearStencilMask()},adjustViewport:function(){var s=this.renderer.gl;s.viewport(0,0,this.width,this.height),s.disable(s.SCISSOR_TEST)},clear:function(){var s=this.renderer,o=s.gl;s.pushFramebuffer(this.framebuffer),o.disable(o.SCISSOR_TEST),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),s.popFramebuffer(),s.resetScissor()},unbind:function(s){s===void 0&&(s=!1);var o=this.renderer;return s&&o.flush(),o.popFramebuffer()},destroy:function(){var s=this.renderer;s.deleteFramebuffer(this.framebuffer),s.deleteTexture(this.texture),s.off(g.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});r.exports=c},75512:r=>{r.exports={getTintFromFloats:function(m,e,u,g){var c=(m*255|0)&255,s=(e*255|0)&255,o=(u*255|0)&255,a=(g*255|0)&255;return(a<<24|c<<16|s<<8|o)>>>0},getTintAppendFloatAlpha:function(m,e){var u=(e*255|0)&255;return(u<<24|m)>>>0},getTintAppendFloatAlphaAndSwap:function(m,e){var u=(m>>16|0)&255,g=(m>>8|0)&255,c=(m|0)&255,s=(e*255|0)&255;return(s<<24|c<<16|g<<8|u)>>>0},getFloatsFromUintRGB:function(m){var e=(m>>16|0)&255,u=(m>>8|0)&255,g=(m|0)&255;return[e/255,u/255,g/255]},checkShaderMax:function(m,e){var u=Math.min(16,m.getParameter(m.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?u:Math.min(u,e)},parseFragmentShaderMaxTextures:function(m,e){if(!m)return"";for(var u="",g=0;g<e;g++)g>0&&(u+=`
	else `),g<e-1&&(u+="if (outTexId < "+g+".5)"),u+=`
	{`,u+=`
		texture = texture2D(uMainSampler[`+g+"], outTexCoord);",u+=`
	}`;return m=m.replace(/%count%/gi,e.toString()),m.replace(/%forloop%/gi,u)},setGlowQuality:function(m,e,u,g){return u===void 0&&(u=e.config.glowFXQuality),g===void 0&&(g=e.config.glowFXDistance),m=m.replace(/__SIZE__/gi,(1/u/g).toFixed(7)),m=m.replace(/__DIST__/gi,g.toFixed(0)+".0"),m}}},44775:(r,m,e)=>{var u=e(56694),g=e(28699),c=e(6659),s=e(18970),o=e(72632),a=e(16650),l=e(81044),p=e(37410),h=e(75512),f=e(71305),v=new u({Extends:c,initialize:function(x){c.call(this);var S=x.game,E=S.renderer,b=E.gl;this.name=o(x,"name","WebGLPipeline"),this.game=S,this.renderer=E,this.manager,this.gl=b,this.view=S.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=o(x,"topology",b.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=o(x,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=x,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var y,x=this.gl,S=this.config,E=this.renderer;this.isPostFX||(this.projectionMatrix=new a().identity());var b=this.renderTargets,T=o(S,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var P=E.width,C=E.height;if(typeof T=="number")for(y=0;y<T;y++)b.push(new p(E,P,C,1,0,!0));else if(Array.isArray(T))for(y=0;y<T.length;y++){var w=o(T[y],"scale",1),A=o(T[y],"minFilter",0),R=o(T[y],"autoClear",1),I=o(T[y],"width",null),L=o(T[y],"height",I);I?b.push(new p(E,I,L,1,A,R)):b.push(new p(E,P,C,w,A,R))}b.length&&(this.currentRenderTarget=b[0]),this.setShadersFromConfig(S);var O=this.shaders,D=0;for(y=0;y<O.length;y++)O[y].vertexSize>D&&(D=O[y].vertexSize);var V=o(S,"batchSize",E.config.batchSize);this.vertexCapacity=V*6;var B=new ArrayBuffer(this.vertexCapacity*D);this.vertexData=B,this.bytes=new Uint8Array(B),this.vertexViewF32=new Float32Array(B),this.vertexViewU32=new Uint32Array(B);var U=o(S,"vertices",null);for(U?(this.vertexViewF32.set(U),this.vertexBuffer=E.createVertexBuffer(B,x.STATIC_DRAW)):this.vertexBuffer=E.createVertexBuffer(B.byteLength,x.DYNAMIC_DRAW),this.setVertexBuffer(),y=O.length-1;y>=0;y--)O[y].rebind();this.hasBooted=!0,E.on(l.RESIZE,this.resize,this),E.on(l.PRE_RENDER,this.onPreRender,this),E.on(l.RENDER,this.onRender,this),E.on(l.POST_RENDER,this.onPostRender,this),this.emit(s.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(y,x,S){var E=this.renderer;if(y!==this.currentShader||E.currentProgram!==this.currentShader.program){this.flush();var b=this.setVertexBuffer(S);b&&!x&&(x=!0),y.bind(x,!1),this.currentShader=y}return this},getShaderByName:function(y){for(var x=this.shaders,S=0;S<x.length;S++)if(x[S].name===y)return x[S]},setShadersFromConfig:function(y){var x,S=this.shaders,E=this.renderer;for(x=0;x<S.length;x++)S[x].destroy();var b="vertShader",T="fragShader",P="attributes",C=o(y,b,null),w=h.parseFragmentShaderMaxTextures(o(y,T,null),E.maxTextures),A=o(y,P,null),R=o(y,"shaders",[]),I=R.length;if(I===0)C&&w&&(this.shaders=[new f(this,"default",C,w,g(A))]);else{var L=[];for(x=0;x<I;x++){var O=R[x],D,V,B,U;if(typeof O=="string"?(D="default",V=C,B=h.parseFragmentShaderMaxTextures(O,E.maxTextures),U=A):(D=o(O,"name","default"),V=o(O,b,C),B=h.parseFragmentShaderMaxTextures(o(O,T,w),E.maxTextures),U=o(O,P,A)),D==="default"){var W=B.split(`
`),F=W[0].trim();F.indexOf("#define SHADER_NAME")>-1&&(D=F.substring(20))}V&&B&&L.push(new f(this,D,V,B,g(U)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(y){return this.currentBatch={start:this.vertexCount,count:0,texture:[y],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=y,this.batch.push(this.currentBatch),0},addTextureToBatch:function(y){var x=this.currentBatch;x&&(x.texture.push(y),x.unit++,x.maxUnit++)},pushBatch:function(y){if(!this.currentBatch||this.forceZero&&y!==this.currentTexture)return this.createBatch(y);if(y===this.currentTexture)return this.currentUnit;var x=this.currentBatch,S=x.texture.indexOf(y);return S===-1?x.texture.length===this.renderer.maxTextures?this.createBatch(y):(x.unit++,x.maxUnit++,x.texture.push(y),this.currentUnit=x.unit,this.currentTexture=y,x.unit):(this.currentUnit=S,this.currentTexture=y,S)},setGameObject:function(y,x){return x===void 0&&(x=y.frame),this.pushBatch(x.source.glTexture)},shouldFlush:function(y){return y===void 0&&(y=0),this.vertexCount+y>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(y,x){(y!==this.width||x!==this.height)&&this.flush(),this.width=y,this.height=x;for(var S=this.renderTargets,E=0;E<S.length;E++)S[E].resize(y,x);return this.setProjectionMatrix(y,x),this.emit(s.RESIZE,y,x,this),this.onResize(y,x),this},setProjectionMatrix:function(y,x){var S=this.projectionMatrix;if(!S)return this;this.projectionWidth=y,this.projectionHeight=x,S.ortho(0,y,x,0,-1e3,1e3);for(var E=this.shaders,b="uProjectionMatrix",T=0;T<E.length;T++){var P=E[T];P.hasUniform(b)&&(P.resetUniform(b),P.setMatrix4fv(b,!1,S.val,P))}return this},flipProjectionMatrix:function(y){y===void 0&&(y=!0);var x=this.projectionMatrix;if(!x)return this;var S=this.projectionWidth,E=this.projectionHeight;y?x.ortho(0,S,0,E,-1e3,1e3):x.ortho(0,S,E,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,x.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var y=this.renderer.projectionWidth,x=this.renderer.projectionHeight;(this.projectionWidth!==y||this.projectionHeight!==x)&&this.setProjectionMatrix(y,x)}},bind:function(y){if(y===void 0&&(y=this.currentShader),this.glReset)return this.rebind(y);var x=!1,S=this.gl;return S.getParameter(S.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(S.bindBuffer(S.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,x=!0),y.bind(x),this.currentShader=y,this.activeTextures.length=0,this.emit(s.BIND,this,y),this.onActive(y),this},rebind:function(y){this.activeBuffer=null,this.setVertexBuffer();for(var x=this.shaders,S=x.length-1;S>=0;S--){var E=x[S].rebind();(!y||E===y)&&(this.currentShader=E)}return this.activeTextures.length=0,this.emit(s.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(y){if(y===void 0&&(y=this.vertexBuffer),y!==this.activeBuffer){var x=this.gl;return this.gl.bindBuffer(x.ARRAY_BUFFER,y),this.activeBuffer=y,!0}return!1},preBatch:function(y){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(y),this},postBatch:function(y){return this.onDraw(this.currentRenderTarget),this.onPostBatch(y),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(y){if(y===void 0&&(y=!1),this.vertexCount>0){this.emit(s.BEFORE_FLUSH,this,y),this.onBeforeFlush(y);var x=this.gl,S=this.vertexCount,E=this.currentShader.vertexSize,b=this.topology;if(this.active){this.setVertexBuffer(),S===this.vertexCapacity?x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.DYNAMIC_DRAW):x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,S*E));var T,P,C,w=this.batch,A=this.activeTextures;if(this.forceZero)for(A[0]||x.activeTexture(x.TEXTURE0),T=0;T<w.length;T++)P=w[T],C=P.texture[0],A[0]!==C&&(x.bindTexture(x.TEXTURE_2D,C),A[0]=C),x.drawArrays(b,P.start,P.count);else for(T=0;T<w.length;T++){P=w[T];for(var R=0;R<=P.maxUnit;R++)C=P.texture[R],A[R]!==C&&(x.activeTexture(x.TEXTURE0+R),x.bindTexture(x.TEXTURE_2D,C),A[R]=C);x.drawArrays(b,P.start,P.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(s.AFTER_FLUSH,this,y),this.onAfterFlush(y)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(y,x,S,E,b,T,P){var C=this.vertexViewF32,w=this.vertexViewU32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++A]=y,C[++A]=x,C[++A]=S,C[++A]=E,C[++A]=b,C[++A]=T,w[++A]=P,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(y,x,S,E,b,T,P,C,w,A,R,I,L,O,D,V,B,U,W,F){F===void 0&&(F=this.currentUnit);var G=!1;this.shouldFlush(6)&&(this.flush(),G=!0),this.currentBatch||(F=this.setTexture2D(W));var M=this.vertexViewF32,N=this.vertexViewU32,k=this.vertexCount*this.currentShader.vertexComponentCount-1;return M[++k]=x,M[++k]=S,M[++k]=A,M[++k]=R,M[++k]=F,M[++k]=U,N[++k]=O,M[++k]=E,M[++k]=b,M[++k]=A,M[++k]=L,M[++k]=F,M[++k]=U,N[++k]=V,M[++k]=T,M[++k]=P,M[++k]=I,M[++k]=L,M[++k]=F,M[++k]=U,N[++k]=B,M[++k]=x,M[++k]=S,M[++k]=A,M[++k]=R,M[++k]=F,M[++k]=U,N[++k]=O,M[++k]=T,M[++k]=P,M[++k]=I,M[++k]=L,M[++k]=F,M[++k]=U,N[++k]=B,M[++k]=C,M[++k]=w,M[++k]=I,M[++k]=R,M[++k]=F,M[++k]=U,N[++k]=D,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(y),G},batchTri:function(y,x,S,E,b,T,P,C,w,A,R,I,L,O,D,V,B){B===void 0&&(B=this.currentUnit);var U=!1;this.shouldFlush(3)&&(this.flush(),U=!0),this.currentBatch||(B=this.setTexture2D(V));var W=this.vertexViewF32,F=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;return W[++G]=x,W[++G]=S,W[++G]=C,W[++G]=w,W[++G]=B,W[++G]=D,F[++G]=I,W[++G]=E,W[++G]=b,W[++G]=C,W[++G]=R,W[++G]=B,W[++G]=D,F[++G]=L,W[++G]=T,W[++G]=P,W[++G]=A,W[++G]=R,W[++G]=B,W[++G]=D,F[++G]=O,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(y),U},drawFillRect:function(y,x,S,E,b,T,P,C){P===void 0&&(P=this.renderer.whiteTexture),C===void 0&&(C=!0),y=Math.floor(y),x=Math.floor(x);var w=Math.floor(y+S),A=Math.floor(x+E),R=this.setTexture2D(P),I=h.getTintAppendFloatAlphaAndSwap(b,T),L=0,O=0,D=1,V=1;C&&(O=1,V=0),this.batchQuad(null,y,x,y,A,w,A,w,x,L,O,D,V,I,I,I,I,0,P,R)},setTexture2D:function(y){return y===void 0&&(y=this.renderer.whiteTexture),this.pushBatch(y)},bindTexture:function(y,x){x===void 0&&(x=0);var S=this.gl;return S.activeTexture(S.TEXTURE0+x),S.bindTexture(S.TEXTURE_2D,y),this},bindRenderTarget:function(y,x){return this.bindTexture(y.texture,x)},setTime:function(y,x){return this.set1f(y,this.game.loop.getDuration(),x),this},setBoolean:function(y,x,S){return S===void 0&&(S=this.currentShader),S.setBoolean(y,x),this},set1f:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set1f(y,x),this},set2f:function(y,x,S,E){return E===void 0&&(E=this.currentShader),E.set2f(y,x,S),this},set3f:function(y,x,S,E,b){return b===void 0&&(b=this.currentShader),b.set3f(y,x,S,E),this},set4f:function(y,x,S,E,b,T){return T===void 0&&(T=this.currentShader),T.set4f(y,x,S,E,b),this},set1fv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set1fv(y,x),this},set2fv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set2fv(y,x),this},set3fv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set3fv(y,x),this},set4fv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set4fv(y,x),this},set1iv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set1iv(y,x),this},set2iv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set2iv(y,x),this},set3iv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set3iv(y,x),this},set4iv:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set4iv(y,x),this},set1i:function(y,x,S){return S===void 0&&(S=this.currentShader),S.set1i(y,x),this},set2i:function(y,x,S,E){return E===void 0&&(E=this.currentShader),E.set2i(y,x,S),this},set3i:function(y,x,S,E,b){return b===void 0&&(b=this.currentShader),b.set3i(y,x,S,E),this},set4i:function(y,x,S,E,b,T){return T===void 0&&(T=this.currentShader),T.set4i(y,x,S,E,b),this},setMatrix2fv:function(y,x,S,E){return E===void 0&&(E=this.currentShader),E.setMatrix2fv(y,x,S),this},setMatrix3fv:function(y,x,S,E){return E===void 0&&(E=this.currentShader),E.setMatrix3fv(y,x,S),this},setMatrix4fv:function(y,x,S,E){return E===void 0&&(E=this.currentShader),E.setMatrix4fv(y,x,S),this},destroy:function(){this.emit(s.DESTROY,this);var y,x=this.shaders;for(y=0;y<x.length;y++)x[y].destroy();var S=this.renderTargets;for(y=0;y<S.length;y++)S[y].destroy();this.gl.deleteBuffer(this.vertexBuffer);var E=this.renderer;return E.off(l.RESIZE,this.resize,this),E.off(l.PRE_RENDER,this.onPreRender,this),E.off(l.RENDER,this.onRender,this),E.off(l.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});r.exports=v},11857:(r,m,e)=>{var u=e(66458),g=e(89787),c=e(56694),s=e(86459),o=e(6659),a=e(81044),l=e(28621),p=e(16650),h=e(72283),f=e(35217),v=e(37410),y=e(40444),x=e(38203),S=e(75512),E=e(1217),b=!1;if(!1)var T;var P=new c({Extends:o,initialize:function(w){o.call(this);var A=w.config,R={alpha:A.transparent,desynchronized:A.desynchronized,depth:!0,antialias:A.antialiasGL,premultipliedAlpha:A.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:A.failIfMajorPerformanceCaveat,powerPreference:A.powerPreference,preserveDrawingBuffer:A.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:A.clearBeforeRender,antialias:A.antialias,backgroundColor:A.backgroundColor,contextCreation:R,roundPixels:A.roundPixels,maxTextures:A.maxTextures,maxTextureSize:A.maxTextureSize,batchSize:A.batchSize,maxLights:A.maxLights,mipmapFilter:A.mipmapFilter},this.game=w,this.type=s.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=w.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=h,this.contextRestoredHandler=h,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(C){var w,A=this.game,R=this.canvas,I=C.backgroundColor;if(b&&(this.spector=new T.Spector,this.spector.onCapture.add(this.onCapture.bind(this))),A.config.context?w=A.config.context:w=R.getContext("webgl",C.contextCreation)||R.getContext("experimental-webgl",C.contextCreation),!w||w.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=w;var L=this;this.contextLostHandler=function(F){L.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),F.preventDefault()},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),A.context=w;for(var O=0;O<=27;O++)this.blendModes.push({func:[w.ONE,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_ADD});this.blendModes[1].func=[w.ONE,w.DST_ALPHA],this.blendModes[2].func=[w.DST_COLOR,w.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[w.ONE,w.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[w.ZERO,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_REVERSE_SUBTRACT},this.glFormats=[w.BYTE,w.SHORT,w.UNSIGNED_BYTE,w.UNSIGNED_SHORT,w.FLOAT],this.glFuncMap={mat2:{func:w.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:w.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:w.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:w.uniform1f,length:1},"1fv":{func:w.uniform1fv,length:1},"1i":{func:w.uniform1i,length:1},"1iv":{func:w.uniform1iv,length:1},"2f":{func:w.uniform2f,length:2},"2fv":{func:w.uniform2fv,length:1},"2i":{func:w.uniform2i,length:2},"2iv":{func:w.uniform2iv,length:1},"3f":{func:w.uniform3f,length:3},"3fv":{func:w.uniform3fv,length:1},"3i":{func:w.uniform3i,length:3},"3iv":{func:w.uniform3iv,length:1},"4f":{func:w.uniform4f,length:4},"4fv":{func:w.uniform4fv,length:1},"4i":{func:w.uniform4i,length:4},"4iv":{func:w.uniform4iv,length:1}};var D=w.getSupportedExtensions();(!C.maxTextures||C.maxTextures===-1)&&(C.maxTextures=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS)),C.maxTextureSize||(C.maxTextureSize=w.getParameter(w.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=D;var V="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(V)>-1?w.getExtension(V):null;var B="OES_vertex_array_object";this.vaoExtension=D.indexOf(B)>-1?w.getExtension(B):null,w.disable(w.DEPTH_TEST),w.disable(w.CULL_FACE),w.enable(w.BLEND),w.clearColor(I.redGL,I.greenGL,I.blueGL,I.alphaGL),C.mipmapFilter!==""&&(this.mipmapFilter=w[C.mipmapFilter]),this.maxTextures=S.checkShaderMax(w,C.maxTextures),this.textureIndexes=[];for(var U=0;U<this.maxTextures;U++){var W=w.createTexture();w.activeTexture(w.TEXTURE0+U),w.bindTexture(w.TEXTURE_2D,W),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(U)}return this.pipelines=new f(this),this.setBlendMode(s.BlendModes.NORMAL),this.projectionMatrix=new p().identity(),A.textures.once(x.READY,this.boot,this),this},boot:function(){var C=this.game,w=this.pipelines,A=C.scale.baseSize,R=A.width,I=A.height;this.width=R,this.height=I,this.isBooted=!0,this.renderTarget=new v(this,R,I,1,0,!0,!0),this.maskTarget=new v(this,R,I,1,0,!0,!0),this.maskSource=new v(this,R,I,1,0,!0,!0);var L=C.config;w.boot(L.pipeline,L.defaultPipeline,L.autoMobilePipeline),this.blankTexture=C.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=C.textures.getFrame("__WHITE").glTexture;var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,null),O.enable(O.SCISSOR_TEST),C.scale.on(y.RESIZE,this.onResize,this),this.resize(R,I)},captureFrame:function(C,w){C===void 0&&(C=!1),w===void 0&&(w=!1),b&&this.spector&&!this._debugCapture&&(this.spector.captureCanvas(this.canvas,0,C,w),this._debugCapture=!0)},captureNextFrame:function(){b&&this.spector&&!this._debugCapture&&(this._debugCapture=!0,this.spector.captureNextFrame(this.canvas))},getFps:function(){if(b&&this.spector)return this.spector.getFps()},log:function(){if(b&&this.spector){var C=Array.prototype.slice.call(arguments).join(" ");return this.spector.log(C)}},startCapture:function(C,w,A){C===void 0&&(C=0),w===void 0&&(w=!1),A===void 0&&(A=!1),b&&this.spector&&!this._debugCapture&&(this.spector.startCapture(this.canvas,C,w,A),this._debugCapture=!0)},stopCapture:function(){if(b&&this.spector&&this._debugCapture)return this.spector.stopCapture()},onCapture:function(C){if(b){var w=this.spector.getResultUI();w.display(C),this._debugCapture=!1}},onResize:function(C,w){(w.width!==this.width||w.height!==this.height)&&this.resize(w.width,w.height)},beginCapture:function(C,w){C===void 0&&(C=this.width),w===void 0&&(w=this.height),this.renderTarget.bind(!0,C,w),this.setProjectionMatrix(C,w)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(C,w){var A=this.gl;return this.width=C,this.height=w,this.setProjectionMatrix(C,w),A.viewport(0,0,C,w),this.drawingBufferHeight=A.drawingBufferHeight,A.scissor(0,A.drawingBufferHeight-w,C,w),this.defaultScissor[2]=C,this.defaultScissor[3]=w,this.emit(a.RESIZE,C,w),this},getCompressedTextures:function(){var C="WEBGL_compressed_texture_",w="WEBKIT_"+C,A=function(I,L){var O=I.getExtension(C+L)||I.getExtension(w+L);if(O){var D={};for(var V in O)D[O[V]]=V;return D}},R=this.gl;return{ETC:A(R,"etc"),ETC1:A(R,"etc1"),ATC:A(R,"atc"),ASTC:A(R,"astc"),BPTC:A(R,"bptc"),RGTC:A(R,"rgtc"),PVRTC:A(R,"pvrtc"),S3TC:A(R,"s3tc"),S3TCSRGB:A(R,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(C,w){var A=this.compression[C.toUpperCase()];if(w in A)return A[w]},supportsCompressedTexture:function(C,w){var A=this.compression[C.toUpperCase()];return A?w?w in A:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(C,w){return(C!==this.projectionWidth||w!==this.projectionHeight)&&(this.projectionWidth=C,this.projectionHeight=w,this.projectionMatrix.ortho(0,C,w,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(C){return this.supportedExtensions?this.supportedExtensions.indexOf(C):!1},getExtension:function(C){return this.hasExtension(C)?(C in this.extensions||(this.extensions[C]=this.gl.getExtension(C)),this.extensions[C]):null},flush:function(){this.pipelines.flush()},pushScissor:function(C,w,A,R,I){I===void 0&&(I=this.drawingBufferHeight);var L=this.scissorStack,O=[C,w,A,R];return L.push(O),this.setScissor(C,w,A,R,I),this.currentScissor=O,O},setScissor:function(C,w,A,R,I){I===void 0&&(I=this.drawingBufferHeight);var L=this.gl,O=this.currentScissor,D=A>0&&R>0;if(O&&D){var V=O[0],B=O[1],U=O[2],W=O[3];D=V!==C||B!==w||U!==A||W!==R}D&&(this.flush(),L.scissor(C,I-w-R,A,R))},resetScissor:function(){var C=this.gl;C.enable(C.SCISSOR_TEST);var w=this.currentScissor;if(w){var A=w[0],R=w[1],I=w[2],L=w[3];I>0&&L>0&&C.scissor(A,this.drawingBufferHeight-R-L,I,L)}},popScissor:function(){var C=this.scissorStack;C.pop();var w=C[C.length-1];w&&this.setScissor(w[0],w[1],w[2],w[3]),this.currentScissor=w},hasActiveStencilMask:function(){var C=this.currentMask.mask,w=this.currentCameraMask.mask;return C&&C.isStencil||w&&w.isStencil},resetViewport:function(){var C=this.gl;C.viewport(0,0,this.width,this.height),this.drawingBufferHeight=C.drawingBufferHeight},setBlendMode:function(C,w){w===void 0&&(w=!1);var A=this.gl,R=this.blendModes[C];return w||C!==s.BlendModes.SKIP_CHECK&&this.currentBlendMode!==C?(this.flush(),A.enable(A.BLEND),A.blendEquation(R.equation),R.func.length>2?A.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):A.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=C,!0):!1},addBlendMode:function(C,w){var A=this.blendModes.push({func:C,equation:w});return A-1},updateBlendMode:function(C,w,A){return this.blendModes[C]&&(this.blendModes[C].func=w,A&&(this.blendModes[C].equation=A)),this},removeBlendMode:function(C){return C>17&&this.blendModes[C]&&this.blendModes.splice(C,1),this},pushFramebuffer:function(C,w,A,R,I){return C===this.currentFramebuffer?this:(this.fboStack.push(C),this.setFramebuffer(C,w,A,R,I))},setFramebuffer:function(C,w,A,R,I){if(w===void 0&&(w=!1),A===void 0&&(A=!0),R===void 0&&(R=null),I===void 0&&(I=!1),C===this.currentFramebuffer)return this;var L=this.gl,O=this.width,D=this.height;return C&&C.renderTexture&&A?(O=C.renderTexture.width,D=C.renderTexture.height):this.flush(),L.bindFramebuffer(L.FRAMEBUFFER,C),A&&L.viewport(0,0,O,D),R&&L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,R,0),I&&(L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT)),w&&(C?(this.drawingBufferHeight=D,this.pushScissor(0,0,O,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=C,this},popFramebuffer:function(C,w){C===void 0&&(C=!1),w===void 0&&(w=!0);var A=this.fboStack;A.pop();var R=A[A.length-1];return R||(R=null),this.setFramebuffer(R,C,w),R},restoreFramebuffer:function(C,w){C===void 0&&(C=!1),w===void 0&&(w=!0);var A=this.fboStack,R=A[A.length-1];R||(R=null),this.currentFramebuffer=null,this.setFramebuffer(R,C,w)},setProgram:function(C){return C!==this.currentProgram?(this.flush(),this.gl.useProgram(C),this.currentProgram=C,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(C,w,A,R,I){I===void 0&&(I=!1);var L=this.gl,O=L.NEAREST,D=L.NEAREST,V=L.CLAMP_TO_EDGE,B=null;w=C?C.width:w,A=C?C.height:A;var U=l(w,A);return U&&!I&&(V=L.REPEAT),R===s.ScaleModes.LINEAR&&this.config.antialias&&(O=U&&this.mipmapFilter?this.mipmapFilter:L.LINEAR,D=L.LINEAR),C&&C.compressed&&(O=L.LINEAR,D=L.LINEAR),!C&&typeof w=="number"&&typeof A=="number"?B=this.createTexture2D(0,O,D,V,V,L.RGBA,null,w,A):B=this.createTexture2D(0,O,D,V,V,L.RGBA,C),B},createTexture2D:function(C,w,A,R,I,L,O,D,V,B,U,W){B=B??!0,U===void 0&&(U=!1),W===void 0&&(W=!1);var F=this.gl,G=F.createTexture();F.activeTexture(F.TEXTURE0);var M=F.getParameter(F.TEXTURE_BINDING_2D);F.bindTexture(F.TEXTURE_2D,G),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,w),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,A),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,I),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,R),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),W&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);var N=!1;if(O==null)F.texImage2D(F.TEXTURE_2D,C,L,D,V,0,L,F.UNSIGNED_BYTE,null),N=l(D,V);else if(O.compressed){D=O.width,V=O.height,N=O.generateMipmap;for(var k=0;k<O.mipmaps.length;k++)F.compressedTexImage2D(F.TEXTURE_2D,k,O.internalFormat,O.mipmaps[k].width,O.mipmaps[k].height,0,O.mipmaps[k].data)}else U||(D=O.width,V=O.height),F.texImage2D(F.TEXTURE_2D,C,L,L,F.UNSIGNED_BYTE,O),N=l(D,V);return N&&F.generateMipmap(F.TEXTURE_2D),M&&F.bindTexture(F.TEXTURE_2D,M),G.isAlphaPremultiplied=B,G.isRenderTexture=!1,G.width=D,G.height=V,G},createFramebuffer:function(C,w,A,R){R===void 0&&(R=!0);var I=this.gl,L=I.createFramebuffer(),O=0;if(this.setFramebuffer(L),A.isRenderTexture=!0,A.isAlphaPremultiplied=!1,I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,A,0),O=I.checkFramebufferStatus(I.FRAMEBUFFER),O!==I.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(D[O]||O))}if(L.renderTexture=A,R){var V=I.createRenderbuffer();I.bindRenderbuffer(I.RENDERBUFFER,V),I.renderbufferStorage(I.RENDERBUFFER,I.DEPTH_STENCIL,C,w),I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_STENCIL_ATTACHMENT,I.RENDERBUFFER,V)}return this.setFramebuffer(null),L},beginBitmapMask:function(C,w){var A=this.gl;A&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==C&&(this.currentMask.mask=C,this.currentMask.camera=w))},drawBitmapMask:function(C,w,A){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),C.renderWebGL(this,C,w),this.maskSource.unbind(!0),this.maskTarget.unbind();var R=this.gl,I=this.getCurrentStencilMask();I?(R.enable(R.STENCIL_TEST),I.mask.applyStencil(this,I.camera,!0)):this.currentMask.mask=null,this.pipelines.set(A),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,this.maskTarget.texture),R.activeTexture(R.TEXTURE1),R.bindTexture(R.TEXTURE_2D,this.maskSource.texture)},createProgram:function(C,w){var A=this.gl,R=A.createProgram(),I=A.createShader(A.VERTEX_SHADER),L=A.createShader(A.FRAGMENT_SHADER);A.shaderSource(I,C),A.shaderSource(L,w),A.compileShader(I),A.compileShader(L);var O=`Shader failed:
`;if(!A.getShaderParameter(I,A.COMPILE_STATUS))throw new Error("Vertex "+O+A.getShaderInfoLog(I));if(!A.getShaderParameter(L,A.COMPILE_STATUS))throw new Error("Fragment "+O+A.getShaderInfoLog(L));if(A.attachShader(R,I),A.attachShader(R,L),A.linkProgram(R),!A.getProgramParameter(R,A.LINK_STATUS))throw new Error("Link "+O+A.getProgramInfoLog(R));return A.useProgram(R),R},createVertexBuffer:function(C,w){var A=this.gl,R=A.createBuffer();return A.bindBuffer(A.ARRAY_BUFFER,R),A.bufferData(A.ARRAY_BUFFER,C,w),A.bindBuffer(A.ARRAY_BUFFER,null),R},createIndexBuffer:function(C,w){var A=this.gl,R=A.createBuffer();return A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,R),A.bufferData(A.ELEMENT_ARRAY_BUFFER,C,w),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(C){return C&&this.gl.deleteTexture(C),this},deleteFramebuffer:function(C){if(C){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,C);var A=w.getParameter(w.RENDERBUFFER_BINDING);A&&w.deleteRenderbuffer(A),w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(C),u(this.fboStack,C),this.currentFramebuffer===C&&(this.currentFramebuffer=null)}return this},deleteProgram:function(C){return C&&this.gl.deleteProgram(C),this},deleteBuffer:function(C){return this.gl.deleteBuffer(C),this},preRenderCamera:function(C){var w=C.x,A=C.y,R=C.width,I=C.height,L=C.backgroundColor;if(C.emit(g.PRE_RENDER,C),this.pipelines.preBatchCamera(C),this.pushScissor(w,A,R,I),C.mask&&(this.currentCameraMask.mask=C.mask,this.currentCameraMask.camera=C._maskCamera,C.mask.preRenderWebGL(this,C,C._maskCamera)),L.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(w,A,R,I,S.getTintFromFloats(L.blueGL,L.greenGL,L.redGL,1),L.alphaGL)}},getCurrentStencilMask:function(){var C=null,w=this.maskStack,A=this.currentCameraMask;return w.length>0?C=w[w.length-1]:A.mask&&A.mask.isStencil&&(C=A),C},postRenderCamera:function(C){var w=C.flashEffect,A=C.fadeEffect;if(w.isRunning||A.isRunning||A.isComplete){var R=this.pipelines.setMulti();w.postRenderWebGL(R,S.getTintFromFloats),A.postRenderWebGL(R,S.getTintFromFloats)}C.dirty=!1,this.popScissor(),C.mask&&(this.currentCameraMask.mask=null,C.mask.postRenderWebGL(this,C._maskCamera)),this.pipelines.postBatchCamera(C),C.emit(g.POST_RENDER,C)},preRender:function(){if(!this.contextLost){var C=this.gl;if(C.bindFramebuffer(C.FRAMEBUFFER,null),this.config.clearBeforeRender){var w=this.config.backgroundColor;C.clearColor(w.redGL,w.greenGL,w.blueGL,w.alphaGL),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT|C.STENCIL_BUFFER_BIT)}C.enable(C.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&C.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(a.PRE_RENDER)}},render:function(C,w,A){if(!this.contextLost){var R=w.length;if(this.emit(a.RENDER,C,A),this.preRenderCamera(A),R===0){this.setBlendMode(s.BlendModes.NORMAL),this.postRenderCamera(A);return}this.currentType="";for(var I=this.currentMask,L=0;L<R;L++){this.finalType=L===R-1;var O=w[L],D=O.mask;I=this.currentMask,I.mask&&I.mask!==D&&I.mask.postRenderWebGL(this,I.camera),D&&I.mask!==D&&D.preRenderWebGL(this,O,A),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var V=O.type;V!==this.currentType&&(this.newType=!0,this.currentType=V),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=w[L+1].type===this.currentType,O.renderWebGL(this,O,A),this.newType=!1}I=this.currentMask,I.mask&&I.mask.postRenderWebGL(this,I.camera),this.setBlendMode(s.BlendModes.NORMAL),this.postRenderCamera(A)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(a.POST_RENDER);var C=this.snapshotState;C.callback&&(E(this.gl,C),C.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var C=this.gl,w=this.getCurrentStencilMask();if(w){var A=w.mask;C.enable(C.STENCIL_TEST),A.invertAlpha?C.stencilFunc(C.NOTEQUAL,A.level,255):C.stencilFunc(C.EQUAL,A.level,255)}},snapshot:function(C,w,A){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,C,w,A)},snapshotArea:function(C,w,A,R,I,L,O){var D=this.snapshotState;return D.callback=I,D.type=L,D.encoder=O,D.getPixel=!1,D.x=C,D.y=w,D.width=A,D.height=R,this},snapshotPixel:function(C,w,A){return this.snapshotArea(C,w,1,1,A),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(C,w,A,R,I,L,O,D,V,B,U){I===void 0&&(I=!1),L===void 0&&(L=0),O===void 0&&(O=0),D===void 0&&(D=w),V===void 0&&(V=A),B==="pixel"&&(I=!0,B="image/png");var W=this.currentFramebuffer;this.snapshotArea(L,O,D,V,R,B,U);var F=this.snapshotState;return F.getPixel=I,F.isFramebuffer=!0,F.bufferWidth=w,F.bufferHeight=A,F.width=Math.min(F.width,w),F.height=Math.min(F.height,A),this.setFramebuffer(C),E(this.gl,F),this.setFramebuffer(W),F.callback=null,F.isFramebuffer=!1,this},canvasToTexture:function(C,w,A,R){return A===void 0&&(A=!1),R===void 0&&(R=!1),w?this.updateCanvasTexture(C,w,R):this.createCanvasTexture(C,A,R)},createCanvasTexture:function(C,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var R=this.gl,I=R.NEAREST,L=R.NEAREST,O=C.width,D=C.height,V=R.CLAMP_TO_EDGE,B=l(O,D);return!w&&B&&(V=R.REPEAT),this.config.antialias&&(I=B&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,L=R.LINEAR),this.createTexture2D(0,I,L,V,V,R.RGBA,C,O,D,!0,!1,A)},updateCanvasTexture:function(C,w,A){A===void 0&&(A=!1);var R=this.gl,I=C.width,L=C.height;if(I>0&&L>0){R.activeTexture(R.TEXTURE0);var O=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,w),A&&R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,!0),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,C),w.width=I,w.height=L,O&&R.bindTexture(R.TEXTURE_2D,O)}return w},createVideoTexture:function(C,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var R=this.gl,I=R.NEAREST,L=R.NEAREST,O=C.videoWidth,D=C.videoHeight,V=R.CLAMP_TO_EDGE,B=l(O,D);return!w&&B&&(V=R.REPEAT),this.config.antialias&&(I=B&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,L=R.LINEAR),this.createTexture2D(0,I,L,V,V,R.RGBA,C,O,D,!0,!0,A)},updateVideoTexture:function(C,w,A){A===void 0&&(A=!1);var R=this.gl,I=C.videoWidth,L=C.videoHeight;if(I>0&&L>0){R.activeTexture(R.TEXTURE0);var O=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,w),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,A),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,C),w.width=I,w.height=L,O&&R.bindTexture(R.TEXTURE_2D,O)}return w},setTextureFilter:function(C,w){var A=this.gl,R=[A.LINEAR,A.NEAREST][w];A.activeTexture(A.TEXTURE0);var I=A.getParameter(A.TEXTURE_BINDING_2D);return A.bindTexture(A.TEXTURE_2D,C),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,R),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,R),I&&A.bindTexture(A.TEXTURE_2D,I),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null,b&&(this.spector=null)}});r.exports=P},71305:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(71402),s=new u({initialize:function(a,l,p,h,f){this.pipeline=a,this.name=l,this.renderer=a.renderer,this.gl=this.renderer.gl,this.fragSrc=h,this.vertSrc=p,this.program=this.renderer.createProgram(p,h),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(f),this.createUniforms()},createAttributes:function(o){var a=0,l=0,p=[];this.vertexComponentCount=0;for(var h=0;h<o.length;h++){var f=o[h],v=f.name,y=g(f,"size",1),x=g(f,"type",c.FLOAT),S=x.enum,E=x.size,b=!!f.normalized;p.push({name:v,size:y,type:S,normalized:b,offset:l,enabled:!1,location:-1}),E===4?a+=y:a++,l+=y*E}this.vertexSize=l,this.vertexComponentCount=a,this.attributes=p},bind:function(o,a){return o===void 0&&(o=!1),a===void 0&&(a=!1),a&&this.pipeline.flush(),this.renderer.setProgram(this.program),o&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(o){o===void 0&&(o=!1);for(var a=this.gl,l=this.vertexSize,p=this.attributes,h=this.program,f=0;f<p.length;f++){var v=p[f],y=v.size,x=v.type,S=v.offset,E=v.enabled,b=v.location,T=!!v.normalized;if(o){var P=a.getAttribLocation(h,v.name);P>=0?(a.enableVertexAttribArray(P),a.vertexAttribPointer(P,y,x,T,l,S),v.enabled=!0,v.location=P):P!==-1&&a.disableVertexAttribArray(P)}else E?a.vertexAttribPointer(b,y,x,T,l,S):!E&&b>-1&&(a.disableVertexAttribArray(b),v.location=-1)}return this},createUniforms:function(){var o=this.gl,a=this.program,l=this.uniforms,p,h,f,v=o.getProgramParameter(a,o.ACTIVE_UNIFORMS);for(p=0;p<v;p++){var y=o.getActiveUniform(a,p);if(y){h=y.name,f=o.getUniformLocation(a,h),f!==null&&(l[h]={name:h,location:f,value1:null,value2:null,value3:null,value4:null});var x=h.indexOf("[");x>0&&(h=h.substr(0,x),l.hasOwnProperty(h)||(f=o.getUniformLocation(a,h),f!==null&&(l[h]={name:h,location:f,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(o){return this.uniforms.hasOwnProperty(o)},resetUniform:function(o){var a=this.uniforms[o];return a&&(a.value1=null,a.value2=null,a.value3=null,a.value4=null),this},setUniform1:function(o,a,l,p){var h=this.uniforms[a];return h?((p||h.value1!==l)&&(h.value1=l,this.renderer.setProgram(this.program),o.call(this.gl,h.location,l),this.pipeline.currentShader=this),this):this},setUniform2:function(o,a,l,p,h){var f=this.uniforms[a];return f?((h||f.value1!==l||f.value2!==p)&&(f.value1=l,f.value2=p,this.renderer.setProgram(this.program),o.call(this.gl,f.location,l,p),this.pipeline.currentShader=this),this):this},setUniform3:function(o,a,l,p,h,f){var v=this.uniforms[a];return v?((f||v.value1!==l||v.value2!==p||v.value3!==h)&&(v.value1=l,v.value2=p,v.value3=h,this.renderer.setProgram(this.program),o.call(this.gl,v.location,l,p,h),this.pipeline.currentShader=this),this):this},setUniform4:function(o,a,l,p,h,f,v){var y=this.uniforms[a];return y?((v||y.value1!==l||y.value2!==p||y.value3!==h||y.value4!==f)&&(y.value1=l,y.value2=p,y.value3=h,y.value4=f,this.renderer.setProgram(this.program),o.call(this.gl,y.location,l,p,h,f),this.pipeline.currentShader=this),this):this},setBoolean:function(o,a){return this.setUniform1(this.gl.uniform1i,o,Number(a))},set1f:function(o,a){return this.setUniform1(this.gl.uniform1f,o,a)},set2f:function(o,a,l){return this.setUniform2(this.gl.uniform2f,o,a,l)},set3f:function(o,a,l,p){return this.setUniform3(this.gl.uniform3f,o,a,l,p)},set4f:function(o,a,l,p,h){return this.setUniform4(this.gl.uniform4f,o,a,l,p,h)},set1fv:function(o,a){return this.setUniform1(this.gl.uniform1fv,o,a,!0)},set2fv:function(o,a){return this.setUniform1(this.gl.uniform2fv,o,a,!0)},set3fv:function(o,a){return this.setUniform1(this.gl.uniform3fv,o,a,!0)},set4fv:function(o,a){return this.setUniform1(this.gl.uniform4fv,o,a,!0)},set1iv:function(o,a){return this.setUniform1(this.gl.uniform1iv,o,a,!0)},set2iv:function(o,a){return this.setUniform1(this.gl.uniform2iv,o,a,!0)},set3iv:function(o,a){return this.setUniform1(this.gl.uniform3iv,o,a,!0)},set4iv:function(o,a){return this.setUniform1(this.gl.uniform4iv,o,a,!0)},set1i:function(o,a){return this.setUniform1(this.gl.uniform1i,o,a)},set2i:function(o,a,l){return this.setUniform2(this.gl.uniform2i,o,a,l)},set3i:function(o,a,l,p){return this.setUniform3(this.gl.uniform3i,o,a,l,p)},set4i:function(o,a,l,p,h){return this.setUniform4(this.gl.uniform4i,o,a,l,p,h)},setMatrix2fv:function(o,a,l){return this.setUniform2(this.gl.uniformMatrix2fv,o,a,l,!0)},setMatrix3fv:function(o,a,l){return this.setUniform2(this.gl.uniformMatrix3fv,o,a,l,!0)},setMatrix4fv:function(o,a,l){return this.setUniform2(this.gl.uniformMatrix4fv,o,a,l,!0)},createProgram:function(o,a){o===void 0&&(o=this.vertSrc),a===void 0&&(a=this.fragSrc);var l=this.gl;return this.program&&l.deleteProgram(this.program),this.vertSrc=o,this.fragSrc=a,this.program=this.renderer.createProgram(o,a),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});r.exports=s},71402:r=>{var m={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};r.exports=m},55478:(r,m,e)=>{var u=e(71402),g=e(98611),c={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};c=g(!1,c,u),r.exports=c},5583:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(91679),s=e(89053),o=e(71402),a=e(44775),l=new u({Extends:a,initialize:function(h){h.fragShader=g(h,"fragShader",c),h.vertShader=g(h,"vertShader",s),h.batchSize=g(h,"batchSize",1),h.vertices=g(h,"vertices",[-1,1,-1,-7,7,1]),h.attributes=g(h,"attributes",[{name:"inPosition",size:2,type:o.FLOAT}]),a.call(this,h)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(p,h){a.prototype.resize.call(this,p,h),this.set2f("uResolution",p,h)},beginMask:function(p,h,f){this.renderer.beginBitmapMask(p,f)},endMask:function(p,h,f){var v=this.gl,y=this.renderer,x=p.bitmapMask;x&&v&&(y.drawBitmapMask(x,h,this),f&&this.set2f("uResolution",f.width,f.height),this.set1i("uInvertMaskAlpha",p.invertAlpha),v.drawArrays(this.topology,0,3),f&&this.set2f("uResolution",this.width,this.height),v.bindTexture(v.TEXTURE_2D,null))}});r.exports=l},81828:(r,m,e)=>{var u=e(56694),g=e(58136),c=e(47406),s=e(72632),o=e(87228),a=e(92462),l=e(75512),p=new u({Extends:o,initialize:function(f){f.shaders=[l.setGlowQuality(a.FXGlowFrag,f.game),a.FXShadowFrag,a.FXPixelateFrag,a.FXVignetteFrag,a.FXShineFrag,a.FXBlurLowFrag,a.FXBlurMedFrag,a.FXBlurHighFrag,a.FXGradientFrag,a.FXBloomFrag,a.ColorMatrixFrag,a.FXCircleFrag,a.FXBarrelFrag,a.FXDisplacementFrag,a.FXWipeFrag,a.FXBokehFrag],o.call(this,f);var v=this.game;this.glow=new g.Glow(v),this.shadow=new g.Shadow(v),this.pixelate=new g.Pixelate(v),this.vignette=new g.Vignette(v),this.shine=new g.Shine(v),this.gradient=new g.Gradient(v),this.circle=new g.Circle(v),this.barrel=new g.Barrel(v),this.wipe=new g.Wipe(v),this.bokeh=new g.Bokeh(v);var y=[];y[c.GLOW]=this.onGlow,y[c.SHADOW]=this.onShadow,y[c.PIXELATE]=this.onPixelate,y[c.VIGNETTE]=this.onVignette,y[c.SHINE]=this.onShine,y[c.BLUR]=this.onBlur,y[c.GRADIENT]=this.onGradient,y[c.BLOOM]=this.onBloom,y[c.COLOR_MATRIX]=this.onColorMatrix,y[c.CIRCLE]=this.onCircle,y[c.BARREL]=this.onBarrel,y[c.DISPLACEMENT]=this.onDisplacement,y[c.WIPE]=this.onWipe,y[c.BOKEH]=this.onBokeh,this.fxHandlers=y,this.source,this.target,this.swap},onDraw:function(h,f,v){this.source=h,this.target=f,this.swap=v;var y=h.width,x=h.height,S=this.tempSprite,E=this.fxHandlers;if(S&&S.preFX)for(var b=S.preFX.list,T=0;T<b.length;T++){var P=b[T];P.active&&E[P.type].call(this,P,y,x)}this.drawToGame(this.source)},runDraw:function(){var h=this.source,f=this.target;this.copy(h,f),this.source=f,this.target=h},onGlow:function(h,f,v){var y=this.shaders[c.GLOW];this.setShader(y),this.glow.onPreRender(h,y,f,v),this.runDraw()},onShadow:function(h){var f=this.shaders[c.SHADOW];this.setShader(f),this.shadow.onPreRender(h,f),this.runDraw()},onPixelate:function(h,f,v){var y=this.shaders[c.PIXELATE];this.setShader(y),this.pixelate.onPreRender(h,y,f,v),this.runDraw()},onVignette:function(h){var f=this.shaders[c.VIGNETTE];this.setShader(f),this.vignette.onPreRender(h,f),this.runDraw()},onShine:function(h,f,v){var y=this.shaders[c.SHINE];this.setShader(y),this.shine.onPreRender(h,y,f,v),this.runDraw()},onBlur:function(h,f,v){var y=s(h,"quality"),x=this.shaders[c.BLUR+y];this.setShader(x),this.set1i("uMainSampler",0),this.set2f("resolution",f,v),this.set1f("strength",s(h,"strength")),this.set3fv("color",s(h,"glcolor"));for(var S=s(h,"x"),E=s(h,"y"),b=s(h,"steps"),T=0;T<b;T++)this.set2f("offset",S,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw()},onGradient:function(h){var f=this.shaders[c.GRADIENT];this.setShader(f),this.gradient.onPreRender(h,f),this.runDraw()},onBloom:function(h,f,v){var y=this.shaders[c.BLOOM];this.copySprite(this.source,this.swap),this.setShader(y),this.set1i("uMainSampler",0),this.set1f("strength",s(h,"blurStrength")),this.set3fv("color",s(h,"glcolor"));for(var x=2/f*s(h,"offsetX"),S=2/v*s(h,"offsetY"),E=s(h,"steps"),b=0;b<E;b++)this.set2f("offset",x,0),this.runDraw(),this.set2f("offset",0,S),this.runDraw();this.blendFrames(this.swap,this.source,this.target,s(h,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(h){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",h.getData()),this.set1f("uAlpha",h.alpha),this.runDraw()},onCircle:function(h,f,v){var y=this.shaders[c.CIRCLE];this.setShader(y),this.circle.onPreRender(h,y,f,v),this.runDraw()},onBarrel:function(h){var f=this.shaders[c.BARREL];this.setShader(f),this.barrel.onPreRender(h,f),this.runDraw()},onDisplacement:function(h){this.setShader(this.shaders[c.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",h.x,h.y),this.bindTexture(h.glTexture,1),this.runDraw()},onWipe:function(h){var f=this.shaders[c.WIPE];this.setShader(f),this.wipe.onPreRender(h,f),this.runDraw()},onBokeh:function(h,f,v){var y=this.shaders[c.BOKEH];this.setShader(y),this.bokeh.onPreRender(h,y,f,v),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,o.prototype.destroy.call(this),this}});r.exports=p},66901:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(65045),s=e(77310),o=e(69360),a=e(93736),l=e(44775),p=new u({Extends:s,initialize:function(f){var v=g(f,"fragShader",c);f.fragShader=v.replace("%LIGHT_COUNT%",f.game.renderer.config.maxLights),s.call(this,f),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new a,this._tempMatrix=new o,this._tempMatrix2=new o},boot:function(){l.prototype.boot.call(this);var h=this.gl,f=h.createTexture();h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,f),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:f}},onRender:function(h,f){var v=h.sys.lights;if(this.lightsActive=!1,!(!v||!v.active)){var y=v.getLights(f),x=y.length;this.lightsActive=!0;var S,E=this.renderer,b=E.height,T=f.matrix,P=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",f.x,f.y,f.rotation,f.zoom),this.set3f("uAmbientLightColor",v.ambientColor.r,v.ambientColor.g,v.ambientColor.b),this.set1i("uLightCount",x),S=0;S<x;S++){var C=y[S].light,w=C.color,A="uLights["+S+"].";T.transformPoint(C.x,C.y,P),this.set2f(A+"position",P.x-f.scrollX*C.scrollFactorX*f.zoom,b-(P.y-f.scrollY*C.scrollFactorY*f.zoom)),this.set3f(A+"color",w.r,w.g,w.b),this.set1f(A+"intensity",C.intensity),this.set1f(A+"radius",C.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(h){if(h!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var f=this.inverseRotationMatrix;if(h){var v=-h,y=Math.cos(v),x=Math.sin(v);f[1]=x,f[3]=-x,f[0]=f[4]=y}else f[0]=f[4]=1,f[1]=f[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,f),this.currentNormalMapRotation=h}},setTexture2D:function(h,f){var v=this.renderer;h===void 0&&(h=v.whiteTexture);var y=this.getNormalMap(f);this.isNewNormalMap(h,y)&&(this.flush(),this.createBatch(h),this.addTextureToBatch(y),this.currentNormalMap=y);var x=0;if(f&&f.parentContainer){var S=f.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);x=S.rotationNormalized}else f&&(x=f.rotation);return this.setNormalMapRotation(x),0},setGameObject:function(h,f){f===void 0&&(f=h.frame);var v=f.glTexture,y=this.getNormalMap(h);if(this.isNewNormalMap(v,y)&&(this.flush(),this.createBatch(v),this.addTextureToBatch(y),this.currentNormalMap=y),h.parentContainer){var x=h.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(x.rotationNormalized)}else this.setNormalMapRotation(h.rotation);return 0},isNewNormalMap:function(h,f){return this.currentTexture!==h||this.currentNormalMap!==f},getNormalMap:function(h){var f;return h?h.displayTexture?f=h.displayTexture.dataSource[h.displayFrame.sourceIndex]:h.texture?f=h.texture.dataSource[h.frame.sourceIndex]:h.tileset&&(Array.isArray(h.tileset)?f=h.tileset[0].image.dataSource[0]:f=h.tileset.image.dataSource[0]):f=this.defaultNormalMap,f||(f=this.defaultNormalMap),f.glTexture},batchSprite:function(h,f,v){this.lightsActive&&s.prototype.batchSprite.call(this,h,f,v)},batchTexture:function(h,f,v,y,x,S,E,b,T,P,C,w,A,R,I,L,O,D,V,B,U,W,F,G,M,N,k,z,H,$,X,Y){this.lightsActive&&s.prototype.batchTexture.call(this,h,f,v,y,x,S,E,b,T,P,C,w,A,R,I,L,O,D,V,B,U,W,F,G,M,N,k,z,H,$,X,Y)},batchTextureFrame:function(h,f,v,y,x,S,E){this.lightsActive&&s.prototype.batchTextureFrame.call(this,h,f,v,y,x,S,E)}});r.exports=p},71264:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(77310),s=e(85060),o=e(18166),a=e(71402),l=e(44775),p=new u({Extends:c,initialize:function(f){f.fragShader=g(f,"fragShader",s),f.vertShader=g(f,"vertShader",o),f.attributes=g(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:a.UNSIGNED_BYTE,normalized:!0}]),f.forceZero=!0,c.call(this,f)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0)}});r.exports=p},77310:(r,m,e)=>{var u=e(56694),g=e(11117),c=e(72632),s=e(53787),o=e(15968),a=e(69360),l=e(75512),p=e(71402),h=e(44775),f=new u({Extends:h,initialize:function(y){var x=y.game.renderer,S=c(y,"fragShader",s);y.fragShader=l.parseFragmentShaderMaxTextures(S,x.maxTextures),y.vertShader=c(y,"vertShader",o),y.attributes=c(y,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:p.UNSIGNED_BYTE,normalized:!0}]),h.call(this,y),this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){h.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(v,y,x){this.manager.set(this,v);var S=this._tempMatrix1,E=this._tempMatrix2,b=this._tempMatrix3,T=v.frame,P=T.glTexture,C=T.u0,w=T.v0,A=T.u1,R=T.v1,I=T.x,L=T.y,O=T.cutWidth,D=T.cutHeight,V=T.customPivot,B=v.displayOriginX,U=v.displayOriginY,W=-B+I,F=-U+L;if(v.isCropped){var G=v._crop;(G.flipX!==v.flipX||G.flipY!==v.flipY)&&T.updateCropUVs(G,v.flipX,v.flipY),C=G.u0,w=G.v0,A=G.u1,R=G.v1,O=G.width,D=G.height,I=G.x,L=G.y,W=-B+I,F=-U+L}var M=1,N=1;v.flipX&&(V||(W+=-T.realWidth+B*2),M=-1),(v.flipY||T.source.isGLTexture&&!P.flipY)&&(V||(F+=-T.realHeight+U*2),N=-1);var k=v.x,z=v.y;E.applyITRS(k,z,v.rotation,v.scaleX*M,v.scaleY*N),S.copyFrom(y.matrix),x?(S.multiplyWithOffset(x,-y.scrollX*v.scrollFactorX,-y.scrollY*v.scrollFactorY),E.e=k,E.f=z):(E.e-=y.scrollX*v.scrollFactorX,E.f-=y.scrollY*v.scrollFactorY),S.multiply(E,b);var H=b.setQuad(W,F,W+O,F+D,y.roundPixels),$=l.getTintAppendFloatAlpha,X=y.alpha,Y=$(v.tintTopLeft,X*v._alphaTL),j=$(v.tintTopRight,X*v._alphaTR),J=$(v.tintBottomLeft,X*v._alphaBL),Q=$(v.tintBottomRight,X*v._alphaBR);this.shouldFlush(6)&&this.flush();var Z=this.setGameObject(v,T);this.manager.preBatch(v),this.batchQuad(v,H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],C,w,A,R,Y,j,J,Q,v.tintFill,P,Z),this.manager.postBatch(v)},batchTexture:function(v,y,x,S,E,b,T,P,C,w,A,R,I,L,O,D,V,B,U,W,F,G,M,N,k,z,H,$,X,Y,j,J){this.manager.set(this,v);var Q=this._tempMatrix1,Z=this._tempMatrix2,it=this._tempMatrix3,rt=B/x+H,ut=U/S+$,dt=(B+W)/x+H,ct=(U+F)/S+$,nt=T,ht=P,ot=-D,mt=-V;if(v.isCropped){var gt=v._crop,Ft=gt.width,kt=gt.height;nt=Ft,ht=kt,T=Ft,P=kt,B=gt.x,U=gt.y;var Lt=B,St=U;R&&(Lt=W-gt.x-Ft),I&&(St=F-gt.y-kt),rt=Lt/x+H,ut=St/S+$,dt=(Lt+Ft)/x+H,ct=(St+kt)/S+$,ot=-D+B,mt=-V+U}I=I^(!j&&y.isRenderTexture?1:0),R&&(nt*=-1,ot+=T),I&&(ht*=-1,mt+=P),Z.applyITRS(E,b,A,C,w),Q.copyFrom(X.matrix),Y?(Q.multiplyWithOffset(Y,-X.scrollX*L,-X.scrollY*O),Z.e=E,Z.f=b):(Z.e-=X.scrollX*L,Z.f-=X.scrollY*O),Q.multiply(Z,it);var Yt=it.setQuad(ot,mt,ot+nt,mt+ht,X.roundPixels);J===void 0&&(J=this.setTexture2D(y)),v&&this.manager.preBatch(v),this.batchQuad(v,Yt[0],Yt[1],Yt[2],Yt[3],Yt[4],Yt[5],Yt[6],Yt[7],rt,ut,dt,ct,G,M,N,k,z,y,J),v&&this.manager.postBatch(v)},batchTextureFrame:function(v,y,x,S,E,b,T){this.manager.set(this);var P=this._tempMatrix1.copyFrom(b),C=this._tempMatrix2;T?P.multiply(T,C):C=P;var w=C.setQuad(y,x,y+v.width,x+v.height,!1),A=this.setTexture2D(v.source.glTexture);S=l.getTintAppendFloatAlpha(S,E),this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],v.u0,v.v0,v.u1,v.v1,S,S,S,S,0,v.glTexture,A)},batchFillRect:function(v,y,x,S,E,b){this.renderer.pipelines.set(this);var T=this.calcMatrix;b&&b.multiply(E,T);var P=T.setQuad(v,y,v+x,y+S,!1),C=this.fillTint;this.batchQuad(null,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],0,0,1,1,C.TL,C.TR,C.BL,C.BR,2)},batchFillTriangle:function(v,y,x,S,E,b,T,P){this.renderer.pipelines.set(this);var C=this.calcMatrix;P&&P.multiply(T,C);var w=C.getX(v,y),A=C.getY(v,y),R=C.getX(x,S),I=C.getY(x,S),L=C.getX(E,b),O=C.getY(E,b),D=this.fillTint;this.batchTri(null,w,A,R,I,L,O,0,0,1,1,D.TL,D.TR,D.BL,2)},batchStrokeTriangle:function(v,y,x,S,E,b,T,P,C){var w=this.tempTriangle;w[0].x=v,w[0].y=y,w[0].width=T,w[1].x=x,w[1].y=S,w[1].width=T,w[2].x=E,w[2].y=b,w[2].width=T,w[3].x=v,w[3].y=y,w[3].width=T,this.batchStrokePath(w,T,!1,P,C)},batchFillPath:function(v,y,x){this.renderer.pipelines.set(this);var S=this.calcMatrix;x&&x.multiply(y,S);for(var E=v.length,b=this.polygonCache,T,P,C=this.fillTint.TL,w=this.fillTint.TR,A=this.fillTint.BL,R=0;R<E;++R)P=v[R],b.push(P.x,P.y);T=g(b),E=T.length;for(var I=0;I<E;I+=3){var L=T[I+0]*2,O=T[I+1]*2,D=T[I+2]*2,V=b[L+0],B=b[L+1],U=b[O+0],W=b[O+1],F=b[D+0],G=b[D+1],M=S.getX(V,B),N=S.getY(V,B),k=S.getX(U,W),z=S.getY(U,W),H=S.getX(F,G),$=S.getY(F,G);this.batchTri(null,M,N,k,z,H,$,0,0,1,1,C,w,A,2)}b.length=0},batchStrokePath:function(v,y,x,S,E){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var b=v.length-1,T=0;T<b;T++){var P=v[T],C=v[T+1];this.batchLine(P.x,P.y,C.x,C.y,P.width/2,C.width/2,y,T,!x&&T===b-1,S,E)}},batchLine:function(v,y,x,S,E,b,T,P,C,w,A){this.renderer.pipelines.set(this);var R=this.calcMatrix;A&&A.multiply(w,R);var I=x-v,L=S-y,O=Math.sqrt(I*I+L*L);if(O!==0){var D=E*(S-y)/O,V=E*(v-x)/O,B=b*(S-y)/O,U=b*(v-x)/O,W=x-B,F=S-U,G=v-D,M=y-V,N=x+B,k=S+U,z=v+D,H=y+V,$=R.getX(W,F),X=R.getY(W,F),Y=R.getX(G,M),j=R.getY(G,M),J=R.getX(N,k),Q=R.getY(N,k),Z=R.getX(z,H),it=R.getY(z,H),rt=this.strokeTint,ut=rt.TL,dt=rt.TR,ct=rt.BL,nt=rt.BR;if(this.batchQuad(null,Z,it,Y,j,$,X,J,Q,0,0,1,1,ut,dt,ct,nt,2),!(T<=2)){var ht=this.prevQuad,ot=this.firstQuad;P>0&&ht[4]?this.batchQuad(null,Z,it,Y,j,ht[0],ht[1],ht[2],ht[3],0,0,1,1,ut,dt,ct,nt,2):(ot[0]=Z,ot[1]=it,ot[2]=Y,ot[3]=j,ot[4]=1),C&&ot[4]?this.batchQuad(null,$,X,J,Q,ot[0],ot[1],ot[2],ot[3],0,0,1,1,ut,dt,ct,nt,2):(ht[0]=$,ht[1]=X,ht[2]=J,ht[3]=Q,ht[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,h.prototype.destroy.call(this),this}});r.exports=f},10919:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(83327),s=e(54677),o=e(44775),a=new u({Extends:o,initialize:function(p){p.vertShader=g(p,"vertShader",s),p.fragShader=g(p,"fragShader",c),p.attributes=g(p,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),o.call(this,p)},onRender:function(l,p){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",p.zoom)},batchPointLight:function(l,p,h,f,v,y,x,S,E,b,T,P){var C=l.color,w=l.intensity,A=l.radius,R=l.attenuation,I=C.r*w,L=C.g*w,O=C.b*w,D=p.alpha*l.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(h,f,T,P,A,R,I,L,O,D),this.batchLightVert(v,y,T,P,A,R,I,L,O,D),this.batchLightVert(x,S,T,P,A,R,I,L,O,D),this.batchLightVert(h,f,T,P,A,R,I,L,O,D),this.batchLightVert(x,S,T,P,A,R,I,L,O,D),this.batchLightVert(E,b,T,P,A,R,I,L,O,D),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(l,p,h,f,v,y,x,S,E,b){var T=this.vertexViewF32,P=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++P]=l,T[++P]=p,T[++P]=h,T[++P]=f,T[++P]=v,T[++P]=y,T[++P]=x,T[++P]=S,T[++P]=E,T[++P]=b,this.vertexCount++}});r.exports=a},80486:(r,m,e)=>{var u=e(56694),g=e(65246),c=e(72632),s=e(12569),o=e(99365),a=e(44775),l=new u({Extends:a,initialize:function(h){h.renderTarget=c(h,"renderTarget",1),h.fragShader=c(h,"fragShader",s),h.vertShader=c(h,"vertShader",o),h.attributes=c(h,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),h.batchSize=1,h.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],a.call(this,h),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new g,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){a.prototype.boot.call(this);var p=this.manager.UTILITY_PIPELINE;this.fullFrame1=p.fullFrame1,this.fullFrame2=p.fullFrame2,this.halfFrame1=p.halfFrame1,this.halfFrame2=p.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(p){this.bindAndDraw(p)},getController:function(p){return p!==void 0?p:this.controller?this.controller:this},copySprite:function(p,h,f){f===void 0&&(f=!1);var v=this.gl;v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,p.texture);var y=v.getParameter(v.FRAMEBUFFER_BINDING);v.bindFramebuffer(v.FRAMEBUFFER,h.framebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,h.texture,0),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),f&&(v.bindTexture(v.TEXTURE_2D,null),v.bindFramebuffer(v.FRAMEBUFFER,y))},copyFrame:function(p,h,f,v,y){this.manager.copyFrame(p,h,f,v,y)},copyToGame:function(p){this.manager.copyToGame(p)},drawFrame:function(p,h,f){this.manager.drawFrame(p,h,f,this.colorMatrix)},blendFrames:function(p,h,f,v,y){this.manager.blendFrames(p,h,f,v,y)},blendFramesAdditive:function(p,h,f,v,y){this.manager.blendFramesAdditive(p,h,f,v,y)},clearFrame:function(p,h){this.manager.clearFrame(p,h)},blitFrame:function(p,h,f,v,y,x){this.manager.blitFrame(p,h,f,v,y,x)},copyFrameRect:function(p,h,f,v,y,x,S,E){this.manager.copyFrameRect(p,h,f,v,y,x,S,E)},bindAndDraw:function(p,h,f,v,y){f===void 0&&(f=!0),v===void 0&&(v=!0);var x=this.gl,S=this.renderer;this.bind(y),this.set1i("uMainSampler",0),h?(x.viewport(0,0,h.width,h.height),x.bindFramebuffer(x.FRAMEBUFFER,h.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,h.texture,0),f&&(v?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT))):(S.popFramebuffer(!1,!1),S.currentFramebuffer||x.viewport(0,0,S.width,S.height)),S.restoreStencilMask(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,p.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),h&&(x.bindTexture(x.TEXTURE_2D,null),x.bindFramebuffer(x.FRAMEBUFFER,S.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,a.prototype.destroy.call(this),this}});r.exports=l},87228:(r,m,e)=>{var u=e(95723),g=e(79993),c=e(56694),s=e(37486),o=e(72632),a=e(77310),l=e(12569),p=e(74118),h=e(37410),f=e(85060),v=e(18166),y=e(44775),x=new c({Extends:a,initialize:function(E){var b=o(E,"fragShader",l),T=o(E,"vertShader",v),P=o(E,"drawShader",l),C=[{name:"DrawSprite",fragShader:f,vertShader:v},{name:"CopySprite",fragShader:b,vertShader:T},{name:"DrawGame",fragShader:P,vertShader:v},{name:"ColorMatrix",fragShader:s}],w=o(E,"shaders",[]);E.shaders=C.concat(w),E.vertShader||(E.vertShader=T),E.batchSize=1,a.call(this,E),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new p,this.targetBounds=new p,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){y.prototype.boot.call(this);var S=this.shaders,E=this.renderer;this.drawSpriteShader=S[0],this.copyShader=S[1],this.gameShader=S[2],this.colorMatrixShader=S[3],this.fsTarget=new h(E,E.width,E.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var b=new ArrayBuffer(168);this.quadVertexData=b,this.quadVertexViewF32=new Float32Array(b),this.quadVertexBuffer=E.createVertexBuffer(b,this.gl.STATIC_DRAW),this.onResize(E.width,E.height),this.currentShader=this.copyShader},onResize:function(S,E){var b=this.quadVertexViewF32;b[1]=E,b[22]=E,b[14]=S,b[28]=S,b[35]=S,b[36]=E},batchQuad:function(S,E,b,T,P,C,w,A,R,I,L,O,D,V,B,U,W,F,G){var M=Math.min(E,T,C,A),N=Math.min(b,P,w,R),k=Math.max(E,T,C,A),z=Math.max(b,P,w,R),H=k-M,$=z-N,X=this.spriteBounds.setTo(M,N,H,$),Y=S?S.preFX.padding:0,j=H+Y*2,J=$+Y*2,Q=Math.abs(Math.max(j,J)),Z=this.manager.getRenderTarget(Q),it=this.targetBounds.setTo(0,0,Z.width,Z.height);g(it,X.centerX,X.centerY),this.tempSprite=S;var rt=this.gl,ut=this.renderer;ut.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),S&&(this.onDrawSprite(S,Z),S.preFX.onFX(this));var dt=this.fsTarget;return this.flush(),rt.viewport(0,0,ut.width,ut.height),rt.bindFramebuffer(rt.FRAMEBUFFER,dt.framebuffer),rt.framebufferTexture2D(rt.FRAMEBUFFER,rt.COLOR_ATTACHMENT0,rt.TEXTURE_2D,dt.texture,0),rt.clearColor(0,0,0,0),rt.clear(rt.COLOR_BUFFER_BIT),this.setTexture2D(G),this.batchVert(E,b,I,L,0,F,V),this.batchVert(T,P,I,D,0,F,U),this.batchVert(C,w,O,D,0,F,W),this.batchVert(E,b,I,L,0,F,V),this.batchVert(C,w,O,D,0,F,W),this.batchVert(A,R,O,L,0,F,B),this.flush(),this.flipProjectionMatrix(!1),rt.activeTexture(rt.TEXTURE0),rt.bindTexture(rt.TEXTURE_2D,Z.texture),rt.copyTexSubImage2D(rt.TEXTURE_2D,0,0,0,it.x,it.y,it.width,it.height),rt.bindFramebuffer(rt.FRAMEBUFFER,null),rt.bindTexture(rt.TEXTURE_2D,null),this.onBatch(S),this.currentShader=this.copyShader,this.onDraw(Z,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(S,E,b,T,P,C,w){b===void 0&&(b=!0),T===void 0&&(T=!0),P===void 0&&(P=!1),w===void 0&&(w=this.copyShader);var A=this.gl,R=this.tempSprite;C&&(w=this.colorMatrixShader),this.currentShader=w;var I=this.setVertexBuffer(this.quadVertexBuffer);if(w.bind(I,!1),this.set1i("uMainSampler",0),R.preFX.onFXCopy(this),this.onCopySprite(S,E,R),C&&(this.set1fv("uColorMatrix",C.getData()),this.set1f("uAlpha",C.alpha)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,S.texture),S.height>E.height)A.viewport(0,0,S.width,S.height),this.setTargetUVs(S,E);else{var L=E.height-S.height;A.viewport(0,L,S.width,S.height),this.resetUVs()}if(A.bindFramebuffer(A.FRAMEBUFFER,E.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,E.texture,0),b&&(A.clearColor(0,0,0,+!T),A.clear(A.COLOR_BUFFER_BIT)),P){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}A.bufferData(A.ARRAY_BUFFER,this.quadVertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),P&&this.renderer.setBlendMode(O),A.bindFramebuffer(A.FRAMEBUFFER,null)},copy:function(S,E){var b=this.gl;this.set1i("uMainSampler",0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,S.texture),b.viewport(0,0,S.width,S.height),this.setUVs(0,0,0,1,1,1,1,0),b.bindFramebuffer(b.FRAMEBUFFER,E.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,E.texture,0),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null)},blendFrames:function(S,E,b,T,P){this.manager.blendFrames(S,E,b,T,P)},blendFramesAdditive:function(S,E,b,T,P){this.manager.blendFramesAdditive(S,E,b,T,P)},drawToGame:function(S){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(S)},copyToGame:function(S){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(S)},bindAndDraw:function(S){var E=this.gl,b=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(S.texture);var T=this._tempMatrix1.loadIdentity(),P=this.targetBounds.x,C=this.targetBounds.y,w=P+S.width,A=C+S.height,R=T.getX(P,C),I=T.getX(P,A),L=T.getX(w,A),O=T.getX(w,C),D=T.getY(P,C),V=T.getY(P,A),B=T.getY(w,A),U=T.getY(w,C),W=16777215;this.batchVert(R,D,0,0,0,0,W),this.batchVert(I,V,0,1,0,0,W),this.batchVert(L,B,1,1,0,0,W),this.batchVert(R,D,0,0,0,0,W),this.batchVert(L,B,1,1,0,0,W),this.batchVert(O,U,1,0,0,0,W),b.restoreFramebuffer(!1,!0),b.currentFramebuffer||E.viewport(0,0,b.width,b.height),b.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(S){this.drawToGame(S)},setUVs:function(S,E,b,T,P,C,w,A){var R=this.quadVertexViewF32;R[2]=S,R[3]=E,R[9]=b,R[10]=T,R[16]=P,R[17]=C,R[23]=S,R[24]=E,R[30]=P,R[31]=C,R[37]=w,R[38]=A},setTargetUVs:function(S,E){var b=E.height/S.height;b>.5?b=.5-(b-.5):b=.5+(.5-b),this.setUVs(0,b,0,1+b,1,1+b,1,b)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,a.prototype.destroy.call(this),this}});r.exports=x},21213:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(77310),s=new u({Extends:c,initialize:function(a){a.topology=5,a.batchSize=g(a,"batchSize",256),c.call(this,a)}});r.exports=s},51212:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(77310),s=e(85060),o=e(18166),a=e(44775),l=new u({Extends:c,initialize:function(h){h.fragShader=g(h,"fragShader",s),h.vertShader=g(h,"vertShader",o),h.forceZero=!0,c.call(this,h)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0)}});r.exports=l},60848:(r,m,e)=>{var u=e(2529),g=e(95723),c=e(56694),s=e(65246),o=e(37486),a=e(79060),l=e(72632),p=e(98921),h=e(99365),f=e(44775),v=new c({Extends:f,initialize:function(x){x.renderTarget=l(x,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),x.vertShader=l(x,"vertShader",h),x.shaders=l(x,"shaders",[{name:"Copy",fragShader:a},{name:"AddBlend",fragShader:u},{name:"LinearBlend",fragShader:p},{name:"ColorMatrix",fragShader:o}]),x.attributes=l(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),x.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],x.batchSize=1,f.call(this,x),this.colorMatrix=new s,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var y=this.shaders,x=this.renderTargets;this.copyShader=y[0],this.addShader=y[1],this.linearShader=y[2],this.colorMatrixShader=y[3],this.fullFrame1=x[0],this.fullFrame2=x[1],this.halfFrame1=x[2],this.halfFrame2=x[3]},copyFrame:function(y,x,S,E,b){S===void 0&&(S=1),E===void 0&&(E=!0),b===void 0&&(b=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",S),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,y.texture),x?(T.viewport(0,0,x.width,x.height),T.bindFramebuffer(T.FRAMEBUFFER,x.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,x.texture,0)):T.viewport(0,0,y.width,y.height),E&&(b?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(y,x,S,E,b,T,P){S===void 0&&(S=1),E===void 0&&(E=!0),b===void 0&&(b=!0),T===void 0&&(T=!1),P===void 0&&(P=!1);var C=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",S),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,y.texture),y.height>x.height)C.viewport(0,0,y.width,y.height),this.setTargetUVs(y,x);else{var w=x.height-y.height;C.viewport(0,w,y.width,y.height)}if(C.bindFramebuffer(C.FRAMEBUFFER,x.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,x.texture,0),E&&(b?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),T){var A=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}P&&this.flipY(),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),T&&this.renderer.setBlendMode(A),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(y,x,S,E,b,T,P,C){P===void 0&&(P=!0),C===void 0&&(C=!0);var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,y.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,y.texture,0),P&&(C?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT)),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,x.texture),w.copyTexSubImage2D(w.TEXTURE_2D,0,0,0,S,E,b,T),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},copyToGame:function(y){var x=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,y.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6)},drawFrame:function(y,x,S,E){S===void 0&&(S=!0),E===void 0&&(E=this.colorMatrix);var b=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,y.texture),x?(b.viewport(0,0,x.width,x.height),b.bindFramebuffer(b.FRAMEBUFFER,x.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,x.texture,0)):b.viewport(0,0,y.width,y.height),S?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blendFrames:function(y,x,S,E,b,T){E===void 0&&(E=1),b===void 0&&(b=!0),T===void 0&&(T=this.linearShader);var P=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",E),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,y.texture),P.activeTexture(P.TEXTURE1),P.bindTexture(P.TEXTURE_2D,x.texture),S?(P.bindFramebuffer(P.FRAMEBUFFER,S.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,S.texture,0),P.viewport(0,0,S.width,S.height)):P.viewport(0,0,y.width,y.height),b?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blendFramesAdditive:function(y,x,S,E,b){this.blendFrames(y,x,S,E,b,this.addShader)},clearFrame:function(y,x){x===void 0&&(x=!0);var S=this.gl;S.viewport(0,0,y.width,y.height),S.bindFramebuffer(S.FRAMEBUFFER,y.framebuffer),x?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT);var E=this.renderer.currentFramebuffer;S.bindFramebuffer(S.FRAMEBUFFER,E)},setUVs:function(y,x,S,E,b,T,P,C){var w=this.vertexViewF32;w[2]=y,w[3]=x,w[6]=S,w[7]=E,w[10]=b,w[11]=T,w[14]=y,w[15]=x,w[18]=b,w[19]=T,w[22]=P,w[23]=C},setTargetUVs:function(y,x){var S=x.height/y.height;S>.5?S=.5-(S-.5):S=.5+(.5-S),this.setUVs(0,S,0,1+S,1,1+S,1,S)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});r.exports=v},65641:r=>{var m={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};r.exports=m},68726:r=>{r.exports="pipelineafterflush"},67186:r=>{r.exports="pipelinebeforeflush"},22709:r=>{r.exports="pipelinebind"},74469:r=>{r.exports="pipelineboot"},93953:r=>{r.exports="pipelinedestroy"},51687:r=>{r.exports="pipelinerebind"},25034:r=>{r.exports="pipelineresize"},18970:(r,m,e)=>{r.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}},32469:(r,m,e)=>{var u=e(56694),g=e(87751),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.amount=1},onPreRender:function(o,a){o=this.getController(o),this.set1f("amount",o.amount,a)}});r.exports=s},2134:(r,m,e)=>{var u=e(56694),g=e(88222),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(o){o=this.getController(o),this.set1f("strength",o.blurStrength),this.set3fv("color",o.glcolor)},onDraw:function(o){var a=this.getController(),l=this.fullFrame1,p=this.fullFrame2;this.copyFrame(o,p);for(var h=2/o.width*a.offsetX,f=2/o.height*a.offsetY,v=0;v<a.steps;v++)this.set2f("offset",h,0),this.copySprite(o,l),this.set2f("offset",0,f),this.copySprite(l,o);this.blendFrames(p,o,l,a.strength),this.copyToGame(l)}});r.exports=s},63377:(r,m,e)=>{var u=e(56694),g=e(35491),c=e(75568),s=e(44481),o=e(80486),a=new u({Extends:o,initialize:function(p){o.call(this,{game:p,shaders:[{name:"Gaussian5",fragShader:g},{name:"Gaussian9",fragShader:c},{name:"Gaussian13",fragShader:s}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(l){var p=this.getController(),h=this.gl,f=this.fullFrame1,v=h.getParameter(h.FRAMEBUFFER_BINDING);this.bind(this.activeShader),h.activeTexture(h.TEXTURE0),h.viewport(0,0,l.width,l.height),this.set1i("uMainSampler",0),this.set2f("resolution",l.width,l.height),this.set1f("strength",p.strength),this.set3fv("color",p.glcolor);for(var y=0;y<p.steps;y++)this.set2f("offset",p.x,0),this.copySprite(l,f),this.set2f("offset",0,p.y),this.copySprite(f,l);h.bindFramebuffer(h.FRAMEBUFFER,v),h.bindTexture(h.TEXTURE_2D,null),this.copyToGame(l)}});r.exports=a},49745:(r,m,e)=>{var u=e(56694),g=e(69960),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(o,a,l,p){o=this.getController(o),this.set1f("radius",o.radius,a),this.set1f("amount",o.amount,a),this.set1f("contrast",o.contrast,a),this.set1f("strength",o.strength,a),this.set2f("blur",o.blurX,o.blurY,a),this.setBoolean("isTiltShift",o.isTiltShift,a),l&&p&&this.set2f("resolution",l,p,a)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});r.exports=s},4323:(r,m,e)=>{var u=e(56694),g=e(33754),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(o,a,l,p){o=this.getController(o),this.set1f("scale",o.scale,a),this.set1f("feather",o.feather,a),this.set1f("thickness",o.thickness,a),this.set3fv("color",o.glcolor,a),this.set4fv("backgroundColor",o.glcolor2,a),l&&p&&this.set2f("resolution",l,p,a)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});r.exports=s},92066:(r,m,e)=>{var u=e(56694),g=e(80486),c=new u({Extends:g,initialize:function(o){g.call(this,{game:o})},onDraw:function(s){var o=this.fullFrame1;this.controller?this.manager.drawFrame(s,o,!0,this.controller):this.drawFrame(s,o),this.copyToGame(o)}});r.exports=c},89581:(r,m,e)=>{var u=e(56694),g=e(35668),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(o){var a=this.game.textures.getFrame(o);a&&(this.glTexture=a.glTexture)},onDraw:function(o){var a=this.getController(),l=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",a.x,a.y),this.bindTexture(a.glTexture,1),this.copySprite(o,l),this.copyToGame(l)}});r.exports=s},55084:(r,m,e)=>{var u=e(56694),g=e(72632),c=e(69675),s=e(80486),o=e(75512),a=new u({Extends:s,initialize:function(p,h){var f=g(h,"quality",.1),v=g(h,"distance",10);s.call(this,{game:p,fragShader:o.setGlowQuality(c,p,f,v)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(l,p,h,f){l=this.getController(l),this.set1f("outerStrength",l.outerStrength,p),this.set1f("innerStrength",l.innerStrength,p),this.set4fv("glowColor",l.glcolor,p),this.setBoolean("knockout",l.knockout,p),h&&f&&this.set2f("resolution",h,f,p)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});r.exports=a},41653:(r,m,e)=>{var u=e(56694),g=e(90993),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(o,a){o=this.getController(o),this.set1f("alpha",o.alpha,a),this.set1i("size",o.size,a),this.set3fv("color1",o.glcolor1,a),this.set3fv("color2",o.glcolor2,a),this.set2f("positionFrom",o.fromX,o.fromY,a),this.set2f("positionTo",o.toX,o.toY,a)}});r.exports=s},73416:(r,m,e)=>{var u=e(56694),g=e(37945),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.amount=1},onPreRender:function(o,a,l,p){o=this.getController(o),this.set1f("amount",o.amount,a),l&&p&&this.set2f("resolution",l,p,a)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});r.exports=s},58049:(r,m,e)=>{var u=e(56694),g=e(85718),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(o,a){o=this.getController(o);var l=o.samples;this.set1i("samples",l,a),this.set1f("intensity",o.intensity,a),this.set1f("decay",o.decay,a),this.set1f("power",o.power/l,a),this.set2f("lightPosition",o.x,o.y,a),this.set4fv("color",o.glcolor,a)}});r.exports=s},18026:(r,m,e)=>{var u=e(56694),g=e(13740),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(o,a,l,p){o=this.getController(o),this.setTime("time",a),this.set1f("speed",o.speed,a),this.set1f("lineWidth",o.lineWidth,a),this.set1f("gradient",o.gradient,a),this.setBoolean("reveal",o.reveal,a),l&&p&&this.set2f("resolution",l,p,a)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});r.exports=s},72381:(r,m,e)=>{var u=e(56694),g=e(80617),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(o,a){o=this.getController(o),this.set1f("radius",o.radius,a),this.set1f("strength",o.strength,a),this.set2f("position",o.x,o.y,a)}});r.exports=s},80542:(r,m,e)=>{var u=e(56694),g=e(62879),c=e(80486),s=new u({Extends:c,initialize:function(a){c.call(this,{game:a,fragShader:g}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(o,a){o=this.getController(o);var l=o.progress,p=o.wipeWidth,h=o.direction,f=o.axis;this.set4f("config",l,p,h,f,a),this.setBoolean("reveal",o.reveal,a)}});r.exports=s},58136:(r,m,e)=>{var u={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};r.exports=u},62253:(r,m,e)=>{var u=e(65641),g=e(98611),c={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};c=g(!1,c,u),r.exports=c},2529:r=>{r.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:r=>{r.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:r=>{r.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:r=>{r.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:r=>{r.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:r=>{r.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:r=>{r.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:r=>{r.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:r=>{r.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:r=>{r.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:r=>{r.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:r=>{r.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:r=>{r.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:r=>{r.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:r=>{r.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:r=>{r.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:r=>{r.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:r=>{r.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:r=>{r.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:r=>{r.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:r=>{r.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:r=>{r.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:r=>{r.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:r=>{r.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(r,m,e)=>{r.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}},756:(r,m,e)=>{var u=e(55301),g=e(56694),c=e(6659),s=e(40444),o=e(97081),a=e(74181),l=e(2893),p=e(9229),h=e(72283),f=e(74118),v=e(90881),y=e(84314),x=e(93736),S=e(47751),E=new g({Extends:c,initialize:function(T){c.call(this),this.game=T,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=u.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new x(1,1),this.autoRound=!1,this.autoCenter=u.CENTER.NO_CENTER,this.orientation=u.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:h,windowResize:h,fullScreenChange:h,fullScreenError:h}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(o.BOOT,this.boot,this)},boot:function(){var b=this.game;this.canvas=b.canvas,this.fullscreen=b.device.fullscreen,this.scaleMode!==u.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===u.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),b.events.on(o.PRE_STEP,this.step,this),b.events.once(o.READY,this.refresh,this),b.events.once(o.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(b){this.getParent(b),this.getParentBounds();var T=b.width,P=b.height,C=b.scaleMode,w=b.zoom,A=b.autoRound;if(typeof T=="string"){var R=this.parentSize.width;R===0&&(R=window.innerWidth);var I=parseInt(T,10)/100;T=Math.floor(R*I)}if(typeof P=="string"){var L=this.parentSize.height;L===0&&(L=window.innerHeight);var O=parseInt(P,10)/100;P=Math.floor(L*O)}this.scaleMode=C,this.autoRound=A,this.autoCenter=b.autoCenter,this.resizeInterval=b.resizeInterval,A&&(T=Math.floor(T),P=Math.floor(P)),this.gameSize.setSize(T,P),w===u.ZOOM.MAX_ZOOM&&(w=this.getMaxZoom()),this.zoom=w,w!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,P),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),b.minWidth>0&&this.displaySize.setMin(b.minWidth*w,b.minHeight*w),b.maxWidth>0&&this.displaySize.setMax(b.maxWidth*w,b.maxHeight*w),this.displaySize.setSize(T,P),this.orientation=p(T,P)},getParent:function(b){var T=b.parent;if(T!==null){if(this.parent=l(T),this.parentIsWindow=this.parent===document.body,b.expandParent&&b.scaleMode!==u.SCALE_MODE.NONE){var P=this.parent.getBoundingClientRect();(this.parentIsWindow||P.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",P=this.parent.getBoundingClientRect(),!this.parentIsWindow&&P.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}b.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=l(b.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var b=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=a(!0));var P=T.width,C=T.height;if(b.width!==P||b.height!==C)return b.setSize(P,C),!0;if(this.canvas){var w=this.canvasBounds,A=this.canvas.getBoundingClientRect();if(A.x!==w.x||A.y!==w.y)return!0}return!1},lockOrientation:function(b){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,b):!1},setParentSize:function(b,T){return this.parentSize.setSize(b,T),this.refresh()},setGameSize:function(b,T){var P=this.autoRound;P&&(b=Math.floor(b),T=Math.floor(T));var C=this.width,w=this.height;return this.gameSize.resize(b,T),this.baseSize.resize(b,T),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(b/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(C,w)},resize:function(b,T){var P=this.zoom,C=this.autoRound;C&&(b=Math.floor(b),T=Math.floor(T));var w=this.width,A=this.height;this.gameSize.resize(b,T),this.baseSize.resize(b,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(b*P,T*P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,I=b*P,L=T*P;return C&&(I=Math.floor(I),L=Math.floor(L)),(I!==b||L!==T)&&(R.width=I+"px",R.height=L+"px"),this.refresh(w,A)},setZoom:function(b){return this.zoom=b,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(b,T){b===void 0&&(b=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var P=this.game.domContainer;if(P){this.baseSize.setCSS(P);var C=this.canvas.style,w=P.style;w.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",w.marginLeft=C.marginLeft,w.marginTop=C.marginTop}return this.emit(s.RESIZE,this.gameSize,this.baseSize,this.displaySize,b,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var b=p(this.width,this.height);b!==this.orientation&&(this.orientation=b,this.emit(s.ORIENTATION_CHANGE,b))}},updateScale:function(){var b=this.canvas.style,T=this.gameSize.width,P=this.gameSize.height,C,w,A=this.zoom,R=this.autoRound;this.scaleMode===u.SCALE_MODE.NONE?(this.displaySize.setSize(T*A,P*A),C=this.displaySize.width,w=this.displaySize.height,R&&(C=Math.floor(C),w=Math.floor(w)),this._resetZoom&&(b.width=C+"px",b.height=w+"px",this._resetZoom=!1)):this.scaleMode===u.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),C=this.displaySize.width,w=this.displaySize.height,R&&(C=Math.floor(C),w=Math.floor(w)),this.canvas.width=C,this.canvas.height=w):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),C=this.displaySize.width,w=this.displaySize.height,R&&(C=Math.floor(C),w=Math.floor(w)),b.width=C+"px",b.height=w+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var b=y(this.parentSize.width,this.gameSize.width,0,!0),T=y(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(b,T),1)},updateCenter:function(){var b=this.autoCenter;if(b!==u.CENTER.NO_CENTER){var T=this.canvas,P=T.style,C=T.getBoundingClientRect(),w=C.width,A=C.height,R=Math.floor((this.parentSize.width-w)/2),I=Math.floor((this.parentSize.height-A)/2);b===u.CENTER.CENTER_HORIZONTALLY?I=0:b===u.CENTER.CENTER_VERTICALLY&&(R=0),P.marginLeft=R+"px",P.marginTop=I+"px"}},updateBounds:function(){var b=this.canvasBounds,T=this.canvas.getBoundingClientRect();b.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),b.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),b.width=T.width,b.height=T.height},transformX:function(b){return(b-this.canvasBounds.left)*this.displayScale.x},transformY:function(b){return(b-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(b){b===void 0&&(b={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(s.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var P=this.getFullscreenTarget();T.keyboard?P[T.request](Element.ALLOW_KEYBOARD_INPUT):P[T.request](b)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(s.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(b){this.removeFullscreenTarget(),this.emit(s.FULLSCREEN_FAILED,b)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var b=document.createElement("div");b.style.margin="0",b.style.padding="0",b.style.width="100%",b.style.height="100%",this.fullscreenTarget=b,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var b=this.fullscreenTarget;if(b&&b.parentNode){var T=b.parentNode;T.insertBefore(this.canvas,b),T.removeChild(b)}}},stopFullscreen:function(){var b=this.fullscreen;if(!b.available)return this.emit(s.FULLSCREEN_UNSUPPORTED),!1;b.active&&document[b.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(s.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(b){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(b)},startListeners:function(){var b=this,T=this.domlisteners;if(T.orientationChange=function(){b.updateBounds(),b._checkOrientation=!0,b.dirty=!0},T.windowResize=function(){b.updateBounds(),b.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(C){return b.onFullScreenChange(C)},T.fullScreenError=function(C){return b.onFullScreenError(C)};var P=["webkit","moz",""];P.forEach(function(C){document.addEventListener(C+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(C+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(b,T){b instanceof S||(T=b,b=void 0),T===void 0&&(T=new f);var P=this.baseSize,C=this.parentSize,w=this.canvasBounds,A=this.displayScale,R=w.x>=0?0:-(w.x*A.x),I=w.y>=0?0:-(w.y*A.y),L;C.width>=w.width?L=P.width:L=P.width-(w.width-C.width)*A.x;var O;return C.height>=w.height?O=P.height:O=P.height-(w.height-C.height)*A.y,T.setTo(R,I,L,O),b&&(T.width/=b.zoomX,T.height/=b.zoomY,T.centerX=b.centerX+b.scrollX,T.centerY=b.centerY+b.scrollY),T},step:function(b,T){this.parent&&(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var b=this.domlisteners;window.removeEventListener("orientationchange",b.orientationChange,!1),window.removeEventListener("resize",b.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(P){document.removeEventListener(P+"fullscreenchange",b.fullScreenChange,!1),document.removeEventListener(P+"fullscreenerror",b.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",b.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",b.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===u.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===u.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});r.exports=E},35098:r=>{r.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:r=>{r.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:r=>{r.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:r=>{r.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(r,m,e)=>{var u={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};r.exports=u},82085:r=>{r.exports="enterfullscreen"},11826:r=>{r.exports="fullscreenfailed"},56691:r=>{r.exports="fullscreenunsupported"},34739:r=>{r.exports="leavefullscreen"},26681:r=>{r.exports="orientationchange"},11428:r=>{r.exports="resize"},40444:(r,m,e)=>{r.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}},86754:(r,m,e)=>{var u=e(98611),g=e(55301),c={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};c=u(!1,c,g.CENTER),c=u(!1,c,g.ORIENTATION),c=u(!1,c,g.SCALE_MODE),c=u(!1,c,g.ZOOM),r.exports=c},47736:(r,m,e)=>{var u=e(72632),g=e(40587),c=function(s){var o=s.game.config.defaultPhysicsSystem,a=u(s.settings,"physics",!1);if(!(!o&&!a)){var l=[];if(o&&l.push(g(o+"Physics")),a)for(var p in a)p=g(p.concat("Physics")),l.indexOf(p)===-1&&l.push(p);return l}};r.exports=c},91088:(r,m,e)=>{var u=e(72632),g=function(c){var s=c.plugins.getDefaultScenePlugins(),o=u(c.settings,"plugins",!1);return Array.isArray(o)?o:s||[]};r.exports=g},90415:r=>{var m={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};r.exports=m},87157:(r,m,e)=>{var u=e(56694),g=e(63946),c=new u({initialize:function(o){this.sys=new g(this,o),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});r.exports=c},13553:(r,m,e)=>{var u=e(56694),g=e(92980),c=e(7599),s=e(97081),o=e(10850),a=e(683),l=e(72283),p=e(87157),h=e(63946),f=new u({initialize:function(y,x){if(this.game=y,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,x){Array.isArray(x)||(x=[x]);for(var S=0;S<x.length;S++)this._pending.push({key:"default",scene:x[S],autoStart:S===0,data:{}})}y.events.once(s.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new p);var v,y,x,S;for(v=0;v<this._pending.length;v++){y=this._pending[v],x=y.key,S=y.scene;var E;S instanceof p?E=this.createSceneFromInstance(x,S):typeof S=="object"?E=this.createSceneFromObject(x,S):typeof S=="function"&&(E=this.createSceneFromFunction(x,S)),x=E.sys.settings.key,this.keys[x]=E,this.scenes.push(E),this._data[x]&&(E.sys.settings.data=this._data[x].data,this._data[x].autoStart&&(y.autoStart=!0)),(y.autoStart||E.sys.settings.active)&&this._start.push(x)}for(this._pending.length=0,this._data={},this.isBooted=!0,v=0;v<this._start.length;v++)y=this._start[v],this.start(y);this._start.length=0}},processQueue:function(){var v=this._pending.length,y=this._queue.length;if(!(v===0&&y===0)){var x,S;if(v){for(x=0;x<v;x++)S=this._pending[x],this.add(S.key,S.scene,S.autoStart,S.data);for(x=0;x<this._start.length;x++)S=this._start[x],this.start(S);this._start.length=0,this._pending.length=0}for(x=0;x<this._queue.length;x++)S=this._queue[x],this[S.op](S.keyA,S.keyB);this._queue.length=0}},add:function(v,y,x,S){if(x===void 0&&(x=!1),S===void 0&&(S={}),this.isProcessing||!this.isBooted)return this._pending.push({key:v,scene:y,autoStart:x,data:S}),this.isBooted||(this._data[v]={data:S}),null;v=this.getKey(v,y);var E;return y instanceof p?E=this.createSceneFromInstance(v,y):typeof y=="object"?(y.key=v,E=this.createSceneFromObject(v,y)):typeof y=="function"&&(E=this.createSceneFromFunction(v,y)),E.sys.settings.data=S,v=E.sys.settings.key,this.keys[v]=E,this.scenes.push(E),(x||E.sys.settings.active)&&(this._pending.length?this._start.push(v):this.start(v)),E},remove:function(v){if(this.isProcessing)this._queue.push({op:"remove",keyA:v,keyB:null});else{var y=this.getScene(v);if(!y||y.sys.isTransitioning())return this;var x=this.scenes.indexOf(y),S=y.sys.settings.key;x>-1&&(delete this.keys[S],this.scenes.splice(x,1),this._start.indexOf(S)>-1&&(x=this._start.indexOf(S),this._start.splice(x,1)),y.sys.destroy())}return this},bootScene:function(v){var y=v.sys,x=y.settings;y.sceneUpdate=l,v.init&&(v.init.call(v,x.data),x.status=g.INIT,x.isTransition&&y.events.emit(c.TRANSITION_INIT,x.transitionFrom,x.transitionDuration));var S;y.load&&(S=y.load,S.reset()),S&&v.preload?(v.preload.call(v),x.status=g.LOADING,S.once(a.COMPLETE,this.loadComplete,this),S.start()):this.create(v)},loadComplete:function(v){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(v.scene)},payloadComplete:function(v){this.bootScene(v.scene)},update:function(v,y){this.processQueue(),this.isProcessing=!0;for(var x=this.scenes.length-1;x>=0;x--){var S=this.scenes[x].sys;S.settings.status>g.START&&S.settings.status<=g.RUNNING&&S.step(v,y),S.scenePlugin._target&&S.scenePlugin.step(v,y)}},render:function(v){for(var y=0;y<this.scenes.length;y++){var x=this.scenes[y].sys;x.settings.visible&&x.settings.status>=g.LOADING&&x.settings.status<g.SLEEPING&&x.render(v)}this.isProcessing=!1},create:function(v){var y=v.sys,x=y.settings;v.create&&(x.status=g.CREATING,v.create.call(v,x.data),x.status===g.DESTROYED)||(x.isTransition&&y.events.emit(c.TRANSITION_START,x.transitionFrom,x.transitionDuration),v.update&&(y.sceneUpdate=v.update),x.status=g.RUNNING,y.events.emit(c.CREATE,v))},createSceneFromFunction:function(v,y){var x=new y;if(x instanceof p){var S=x.sys.settings.key;if(S!==""&&(v=S),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return this.createSceneFromInstance(v,x)}else return x.sys=new h(x),x.sys.settings.key=v,x.sys.init(this.game),x},createSceneFromInstance:function(v,y){var x=y.sys.settings.key;return x===""&&(y.sys.settings.key=v),y.sys.init(this.game),y},createSceneFromObject:function(v,y){var x=new p(y),S=x.sys.settings.key;S!==""?v=S:x.sys.settings.key=v,x.sys.init(this.game);for(var E=["init","preload","create","update","render"],b=0;b<E.length;b++){var T=o(y,E[b],null);T&&(x[E[b]]=T)}if(y.hasOwnProperty("extend")){for(var P in y.extend)if(y.extend.hasOwnProperty(P)){var C=y.extend[P];P==="data"&&x.hasOwnProperty("data")&&typeof C=="object"?x.data.merge(C):P!=="sys"&&(x[P]=C)}}return x},getKey:function(v,y){if(v||(v="default"),typeof y=="function")return v;if(y instanceof p?v=y.sys.settings.key:typeof y=="object"&&y.hasOwnProperty("key")&&(v=y.key),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return v},getScenes:function(v,y){v===void 0&&(v=!0),y===void 0&&(y=!1);for(var x=[],S=this.scenes,E=0;E<S.length;E++){var b=S[E];b&&(!v||v&&b.sys.isActive())&&x.push(b)}return y?x.reverse():x},getScene:function(v){if(typeof v=="string"){if(this.keys[v])return this.keys[v]}else for(var y=0;y<this.scenes.length;y++)if(v===this.scenes[y])return v;return null},isActive:function(v){var y=this.getScene(v);return y?y.sys.isActive():null},isPaused:function(v){var y=this.getScene(v);return y?y.sys.isPaused():null},isVisible:function(v){var y=this.getScene(v);return y?y.sys.isVisible():null},isSleeping:function(v){var y=this.getScene(v);return y?y.sys.isSleeping():null},pause:function(v,y){var x=this.getScene(v);return x&&x.sys.pause(y),this},resume:function(v,y){var x=this.getScene(v);return x&&x.sys.resume(y),this},sleep:function(v,y){var x=this.getScene(v);return x&&!x.sys.isTransitioning()&&x.sys.sleep(y),this},wake:function(v,y){var x=this.getScene(v);return x&&x.sys.wake(y),this},run:function(v,y){var x=this.getScene(v);if(!x){for(var S=0;S<this._pending.length;S++)if(this._pending[S].key===v){this.queueOp("start",v,y);break}return this}x.sys.isSleeping()?x.sys.wake(y):x.sys.isPaused()?x.sys.resume(y):this.start(v,y)},start:function(v,y){if(!this.isBooted)return this._data[v]={autoStart:!0,data:y},this;var x=this.getScene(v);if(!x)return console.warn("Scene not found for key: "+v),this;var S=x.sys,E=S.settings.status;if(E>=g.START&&E<=g.CREATING)return this;if(E>=g.RUNNING&&E<=g.SLEEPING)S.shutdown(),S.sceneUpdate=l,S.start(y);else{S.sceneUpdate=l,S.start(y);var b;if(S.load&&(b=S.load),b&&S.settings.hasOwnProperty("pack")&&(b.reset(),b.addPack({payload:S.settings.pack})))return S.settings.status=g.LOADING,b.once(a.COMPLETE,this.payloadComplete,this),b.start(),this}return this.bootScene(x),this},stop:function(v,y){var x=this.getScene(v);if(x&&!x.sys.isTransitioning()&&x.sys.settings.status!==g.SHUTDOWN){var S=x.sys.load;S&&(S.off(a.COMPLETE,this.loadComplete,this),S.off(a.COMPLETE,this.payloadComplete,this)),x.sys.shutdown(y)}return this},switch:function(v,y){var x=this.getScene(v),S=this.getScene(y);return x&&S&&x!==S&&(this.sleep(v),this.isSleeping(y)?this.wake(y):this.start(y)),this},getAt:function(v){return this.scenes[v]},getIndex:function(v){var y=this.getScene(v);return this.scenes.indexOf(y)},bringToTop:function(v){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:v,keyB:null});else{var y=this.getIndex(v);if(y!==-1&&y<this.scenes.length){var x=this.getScene(v);this.scenes.splice(y,1),this.scenes.push(x)}}return this},sendToBack:function(v){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:v,keyB:null});else{var y=this.getIndex(v);if(y!==-1&&y>0){var x=this.getScene(v);this.scenes.splice(y,1),this.scenes.unshift(x)}}return this},moveDown:function(v){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:v,keyB:null});else{var y=this.getIndex(v);if(y>0){var x=y-1,S=this.getScene(v),E=this.getAt(x);this.scenes[y]=E,this.scenes[x]=S}}return this},moveUp:function(v){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:v,keyB:null});else{var y=this.getIndex(v);if(y<this.scenes.length-1){var x=y+1,S=this.getScene(v),E=this.getAt(x);this.scenes[y]=E,this.scenes[x]=S}}return this},moveAbove:function(v,y){if(v===y)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:v,keyB:y});else{var x=this.getIndex(v),S=this.getIndex(y);if(x!==-1&&S!==-1&&S<x){var E=this.getAt(S);this.scenes.splice(S,1),this.scenes.splice(x+(S>x),0,E)}}return this},moveBelow:function(v,y){if(v===y)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:v,keyB:y});else{var x=this.getIndex(v),S=this.getIndex(y);if(x!==-1&&S!==-1&&S>x){var E=this.getAt(S);this.scenes.splice(S,1),x===0?this.scenes.unshift(E):this.scenes.splice(x-(S<x),0,E)}}return this},queueOp:function(v,y,x){return this._queue.push({op:v,keyA:y,keyB:x}),this},swapPosition:function(v,y){if(v===y)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:v,keyB:y});else{var x=this.getIndex(v),S=this.getIndex(y);if(x!==S&&x!==-1&&S!==-1){var E=this.getAt(x);this.scenes[x]=this.scenes[S],this.scenes[S]=E}}return this},dump:function(){for(var v=[],y=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],x=0;x<this.scenes.length;x++){var S=this.scenes[x].sys,E=S.settings.visible&&(S.settings.status===g.RUNNING||S.settings.status===g.PAUSED)?"[*] ":"[-] ";E+=S.settings.key+" ("+y[S.settings.status]+")",v.push(E)}console.log(v.join(`
`))},destroy:function(){for(var v=0;v<this.scenes.length;v++){var y=this.scenes[v].sys;y.destroy()}this.systemScene.sys.destroy(),this.update=l,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});r.exports=f},64051:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(7599),s=e(72632),o=e(91963),a=new g({initialize:function(p){this.scene=p,this.systems=p.sys,this.settings=p.sys.settings,this.key=p.sys.settings.key,this.manager=p.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,p.sys.events.once(c.BOOT,this.boot,this),p.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},start:function(l,p){return l===void 0&&(l=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",l,p),this},restart:function(l){var p=this.key;return this.manager.queueOp("stop",p),this.manager.queueOp("start",p,l),this},transition:function(l){l===void 0&&(l={});var p=s(l,"target",!1),h=this.manager.getScene(p);if(!p||!this.checkValidTransition(h))return!1;var f=s(l,"duration",1e3);this._elapsed=0,this._target=h,this._duration=f,this._willSleep=s(l,"sleep",!1),this._willRemove=s(l,"remove",!1);var v=s(l,"onUpdate",null);v&&(this._onUpdate=v,this._onUpdateScope=s(l,"onUpdateScope",this.scene));var y=s(l,"allowInput",!1);this.settings.transitionAllowInput=y;var x=h.sys.settings;x.isTransition=!0,x.transitionFrom=this.scene,x.transitionDuration=f,x.transitionAllowInput=y,s(l,"moveAbove",!1)?this.manager.moveAbove(this.key,p):s(l,"moveBelow",!1)&&this.manager.moveBelow(this.key,p),h.sys.isSleeping()?h.sys.wake(s(l,"data")):this.manager.start(p,s(l,"data"));var S=s(l,"onStart",null),E=s(l,"onStartScope",this.scene);return S&&S.call(E,this.scene,h,f),this.systems.events.emit(c.TRANSITION_OUT,h,f),!0},checkValidTransition:function(l){return!(!l||l.sys.isActive()||l.sys.isTransitioning()||l===this.scene||this.systems.isTransitioning())},step:function(l,p){this._elapsed+=p,this.transitionProgress=u(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var l=this._target.sys,p=this._target.sys.settings;l.events.emit(c.TRANSITION_COMPLETE,this.scene),p.isTransition=!1,p.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(l,p,h,f){return this.manager.add(l,p,h,f)},launch:function(l,p){return l&&l!==this.key&&this.manager.queueOp("start",l,p),this},run:function(l,p){return l&&l!==this.key&&this.manager.queueOp("run",l,p),this},pause:function(l,p){return l===void 0&&(l=this.key),this.manager.queueOp("pause",l,p),this},resume:function(l,p){return l===void 0&&(l=this.key),this.manager.queueOp("resume",l,p),this},sleep:function(l,p){return l===void 0&&(l=this.key),this.manager.queueOp("sleep",l,p),this},wake:function(l,p){return l===void 0&&(l=this.key),this.manager.queueOp("wake",l,p),this},switch:function(l){return l!==this.key&&this.manager.queueOp("switch",this.key,l),this},stop:function(l,p){return l===void 0&&(l=this.key),this.manager.queueOp("stop",l,p),this},setActive:function(l,p,h){p===void 0&&(p=this.key);var f=this.manager.getScene(p);return f&&f.sys.setActive(l,h),this},setVisible:function(l,p){p===void 0&&(p=this.key);var h=this.manager.getScene(p);return h&&h.sys.setVisible(l),this},isSleeping:function(l){return l===void 0&&(l=this.key),this.manager.isSleeping(l)},isActive:function(l){return l===void 0&&(l=this.key),this.manager.isActive(l)},isPaused:function(l){return l===void 0&&(l=this.key),this.manager.isPaused(l)},isVisible:function(l){return l===void 0&&(l=this.key),this.manager.isVisible(l)},swapPosition:function(l,p){return p===void 0&&(p=this.key),l!==p&&this.manager.swapPosition(l,p),this},moveAbove:function(l,p){return p===void 0&&(p=this.key),l!==p&&this.manager.moveAbove(l,p),this},moveBelow:function(l,p){return p===void 0&&(p=this.key),l!==p&&this.manager.moveBelow(l,p),this},remove:function(l){return l===void 0&&(l=this.key),this.manager.remove(l),this},moveUp:function(l){return l===void 0&&(l=this.key),this.manager.moveUp(l),this},moveDown:function(l){return l===void 0&&(l=this.key),this.manager.moveDown(l),this},bringToTop:function(l){return l===void 0&&(l=this.key),this.manager.bringToTop(l),this},sendToBack:function(l){return l===void 0&&(l=this.key),this.manager.sendToBack(l),this},get:function(l){return this.manager.getScene(l)},getStatus:function(l){var p=this.manager.getScene(l);if(p)return p.sys.getStatus()},getIndex:function(l){return l===void 0&&(l=this.key),this.manager.getIndex(l)},shutdown:function(){var l=this.systems.events;l.off(c.SHUTDOWN,this.shutdown,this),l.off(c.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});o.register("ScenePlugin",a,"scenePlugin"),r.exports=a},36765:(r,m,e)=>{var u=e(92980),g=e(10850),c=e(30657),s=e(90415),o={create:function(a){return typeof a=="string"?a={key:a}:a===void 0&&(a={}),{status:u.PENDING,key:g(a,"key",""),active:g(a,"active",!1),visible:g(a,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:g(a,"pack",!1),cameras:g(a,"cameras",null),map:g(a,"map",c(s,g(a,"mapAdd",{}))),physics:g(a,"physics",{}),loader:g(a,"loader",{}),plugins:g(a,"plugins",!1),input:g(a,"input",{})}}};r.exports=o},63946:(r,m,e)=>{var u=e(56694),g=e(92980),c=e(18360),s=e(7599),o=e(47736),a=e(91088),l=e(72283),p=e(36765),h=new u({initialize:function(v,y){this.scene=v,this.game,this.renderer,this.config=y,this.settings=p.create(y),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=l},init:function(f){this.settings.status=g.INIT,this.sceneUpdate=l,this.game=f,this.renderer=f.renderer,this.canvas=f.canvas,this.context=f.context;var v=f.plugins;this.plugins=v,v.addToScene(this,c.Global,[c.CoreScene,a(this),o(this)]),this.events.emit(s.BOOT,this),this.settings.isBooted=!0},step:function(f,v){var y=this.events;y.emit(s.PRE_UPDATE,f,v),y.emit(s.UPDATE,f,v),this.sceneUpdate.call(this.scene,f,v),y.emit(s.POST_UPDATE,f,v)},render:function(f){var v=this.displayList;v.depthSort(),this.events.emit(s.PRE_RENDER,f),this.cameras.render(f,v),this.events.emit(s.RENDER,f)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(f){var v=this.settings,y=this.getStatus();return y!==g.CREATING&&y!==g.RUNNING?console.warn("Cannot pause non-running Scene",v.key):this.settings.active&&(v.status=g.PAUSED,v.active=!1,this.events.emit(s.PAUSE,this,f)),this},resume:function(f){var v=this.events,y=this.settings;return this.settings.active||(y.status=g.RUNNING,y.active=!0,v.emit(s.RESUME,this,f)),this},sleep:function(f){var v=this.settings,y=this.getStatus();return y!==g.CREATING&&y!==g.RUNNING?console.warn("Cannot sleep non-running Scene",v.key):(v.status=g.SLEEPING,v.active=!1,v.visible=!1,this.events.emit(s.SLEEP,this,f)),this},wake:function(f){var v=this.events,y=this.settings;return y.status=g.RUNNING,y.active=!0,y.visible=!0,v.emit(s.WAKE,this,f),y.isTransition&&v.emit(s.TRANSITION_WAKE,y.transitionFrom,y.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var f=this.settings.status;return f>g.PENDING&&f<=g.RUNNING},isSleeping:function(){return this.settings.status===g.SLEEPING},isActive:function(){return this.settings.status===g.RUNNING},isPaused:function(){return this.settings.status===g.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(f){return this.settings.visible=f,this},setActive:function(f,v){return f?this.resume(v):this.pause(v)},start:function(f){var v=this.events,y=this.settings;f&&(y.data=f),y.status=g.START,y.active=!0,y.visible=!0,v.emit(s.START,this),v.emit(s.READY,this,f)},shutdown:function(f){var v=this.events,y=this.settings;v.off(s.TRANSITION_INIT),v.off(s.TRANSITION_START),v.off(s.TRANSITION_COMPLETE),v.off(s.TRANSITION_OUT),y.status=g.SHUTDOWN,y.active=!1,y.visible=!1,v.emit(s.SHUTDOWN,this,f)},destroy:function(){var f=this.events,v=this.settings;v.status=g.DESTROYED,v.active=!1,v.visible=!1,f.emit(s.DESTROY,this),f.removeAllListeners();for(var y=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<y.length;x++)this[y[x]]=null}});r.exports=h},92980:r=>{var m={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};r.exports=m},31803:r=>{r.exports="addedtoscene"},94817:r=>{r.exports="boot"},28977:r=>{r.exports="create"},91959:r=>{r.exports="destroy"},363:r=>{r.exports="pause"},15643:r=>{r.exports="postupdate"},17058:r=>{r.exports="prerender"},77125:r=>{r.exports="preupdate"},76018:r=>{r.exports="ready"},28620:r=>{r.exports="removedfromscene"},41538:r=>{r.exports="render"},34268:r=>{r.exports="resume"},2342:r=>{r.exports="shutdown"},96541:r=>{r.exports="sleep"},74244:r=>{r.exports="start"},17046:r=>{r.exports="transitioncomplete"},13637:r=>{r.exports="transitioninit"},14733:r=>{r.exports="transitionout"},33899:r=>{r.exports="transitionstart"},52418:r=>{r.exports="transitionwake"},31735:r=>{r.exports="update"},8470:r=>{r.exports="wake"},7599:(r,m,e)=>{r.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}},20436:(r,m,e)=>{var u=e(92980),g=e(98611),c={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};c=g(!1,c,u),r.exports=c},25798:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(76038),s=e(98611),o=e(72283),a=new u({Extends:g,initialize:function(p,h,f){g.call(this),this.manager=p,this.key=h,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=s(this.config,f),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(console.error("addMarker "+l.name+" already exists in Sound"),!1):(l=s(!0,{name:"",start:0,duration:this.totalDuration-(l.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},l),this.markers[l.name]=l,!0)},updateMarker:function(l){return!l||!l.name||typeof l.name!="string"?!1:this.markers[l.name]?(this.markers[l.name]=s(!0,this.markers[l.name],l),!0):(console.warn("Audio Marker: "+l.name+" missing in Sound: "+this.key),!1)},removeMarker:function(l){var p=this.markers[l];return p?(this.markers[l]=null,p):null},play:function(l,p){if(l===void 0&&(l=""),typeof l=="object"&&(p=l,l=""),typeof l!="string")return!1;if(!l)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[l])return console.warn("Marker: "+l+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[l],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=s(this.currentConfig,p),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:o,calculateRate:function(){var l=1.0005777895065548,p=this.currentConfig.detune+this.manager.detune,h=Math.pow(l,p);this.totalRate=this.currentConfig.rate*this.manager.rate*h},destroy:function(){this.pendingRemove||(this.emit(c.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});r.exports=a},12486:(r,m,e)=>{var u=e(56694),g=e(32742),c=e(6659),s=e(76038),o=e(97081),a=e(71608),l=e(51463),p=e(72283),h=e(93736),f=new u({Extends:c,initialize:function(y){c.call(this),this.game=y,this.jsonCache=y.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new h,y.events.on(o.BLUR,this.onGameBlur,this),y.events.on(o.FOCUS,this.onGameFocus,this),y.events.on(o.PRE_STEP,this.update,this),y.events.once(o.DESTROY,this.destroy,this)},add:p,addAudioSprite:function(v,y){y===void 0&&(y={});var x=this.add(v,y);x.spritemap=this.jsonCache.get(v).spritemap;for(var S in x.spritemap)if(x.spritemap.hasOwnProperty(S)){var E=g(y),b=x.spritemap[S];E.loop=b.hasOwnProperty("loop")?b.loop:!1,x.addMarker({name:S,start:b.start,duration:b.end-b.start,config:E})}return x},get:function(v){return l(this.sounds,"key",v)},getAll:function(v){return v?a(this.sounds,"key",v):a(this.sounds)},getAllPlaying:function(){return a(this.sounds,"isPlaying",!0)},play:function(v,y){var x=this.add(v);return x.once(s.COMPLETE,x.destroy,x),y?y.name?(x.addMarker(y),x.play(y.name)):x.play(y):x.play()},playAudioSprite:function(v,y,x){var S=this.addAudioSprite(v);return S.once(s.COMPLETE,S.destroy,S),S.play(y,x)},remove:function(v){var y=this.sounds.indexOf(v);return y!==-1?(v.destroy(),this.sounds.splice(y,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var y=0,x=this.sounds.length-1;x>=0;x--){var S=this.sounds[x];S.key===v&&(S.destroy(),this.sounds.splice(x,1),y++)}return y},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(s.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(s.RESUME_ALL,this)},setListenerPosition:p,stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(s.STOP_ALL,this)},stopByKey:function(v){var y=0;return this.getAll(v).forEach(function(x){x.stop()&&y++}),y},unlock:p,onBlur:p,onFocus:p,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(v,y){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(s.UNLOCKED,this));for(var x=this.sounds.length-1;x>=0;x--)this.sounds[x].pendingRemove&&this.sounds.splice(x,1);this.sounds.forEach(function(S){S.update(v,y)})},destroy:function(){this.game.events.off(o.BLUR,this.onGameBlur,this),this.game.events.off(o.FOCUS,this.onGameFocus,this),this.game.events.off(o.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(v,y){var x=this;this.sounds.forEach(function(S,E){S&&!S.pendingRemove&&v.call(y||x,S,E,x.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(y){y.calculateRate()}),this.emit(s.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(y){y.calculateRate()}),this.emit(s.GLOBAL_DETUNE,this,v)}}});r.exports=f},84191:(r,m,e)=>{var u=e(27622),g=e(17546),c=e(55491),s={create:function(o){var a=o.config.audio,l=o.device.audio;return a.noAudio||!l.webAudio&&!l.audioData?new g(o):l.webAudio&&!a.disableWebAudio?new c(o):new u(o)}};r.exports=s},77578:r=>{r.exports="complete"},19679:r=>{r.exports="decodedall"},56951:r=>{r.exports="decoded"},16436:r=>{r.exports="destroy"},55154:r=>{r.exports="detune"},57818:r=>{r.exports="detune"},57890:r=>{r.exports="mute"},83022:r=>{r.exports="rate"},99170:r=>{r.exports="volume"},64289:r=>{r.exports="looped"},67214:r=>{r.exports="loop"},53128:r=>{r.exports="mute"},73078:r=>{r.exports="pan"},76763:r=>{r.exports="pauseall"},88426:r=>{r.exports="pause"},13765:r=>{r.exports="play"},80291:r=>{r.exports="rate"},11124:r=>{r.exports="resumeall"},55382:r=>{r.exports="resume"},71157:r=>{r.exports="seek"},31776:r=>{r.exports="stopall"},39450:r=>{r.exports="stop"},21939:r=>{r.exports="unlocked"},33019:r=>{r.exports="volume"},76038:(r,m,e)=>{r.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}},34350:(r,m,e)=>{var u=e(25798),g=e(56694),c=e(76038),s=e(82897),o=new g({Extends:u,initialize:function(l,p,h){if(h===void 0&&(h={}),this.tags=l.game.cache.audio.get(p),!this.tags)throw new Error('No cached audio asset with key "'+p);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,u.call(this,l,p,h)},play:function(a,l){return this.manager.isLocked(this,"play",[a,l])||!u.prototype.play.call(this,a,l)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!u.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!u.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(c.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var a=this.currentConfig.seek,l=this.currentConfig.delay,p=(this.currentMarker?this.currentMarker.start:0)+a;return this.previousTime=p,this.audio.currentTime=p,this.applyConfig(),l===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+l*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var a=0;a<this.tags.length;a++){var l=this.tags[a];if(l.dataset.used==="false")return l.dataset.used="true",this.audio=l,!0}if(!this.manager.override)return!1;var p=[];this.manager.forEachActiveSound(function(f){f.key===this.key&&f.audio&&p.push(f)},this),p.sort(function(f,v){return f.loop===v.loop?v.seek/v.duration-f.seek/f.duration:f.loop?1:-1});var h=p[0];return this.audio=h.audio,h.reset(),h.audio=null,h.startTime=0,h.previousTime=0,!0},playCatchPromise:function(){var a=this.audio.play();a&&a.catch(function(l){console.warn(l)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){u.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(a){if(this.isPlaying){if(this.startTime>0){this.startTime<a-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,a-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var l=this.currentMarker?this.currentMarker.start:0,p=l+this.duration,h=this.audio.currentTime;if(this.currentConfig.loop)h>=p-this.manager.loopEndOffset?(this.audio.currentTime=l+Math.max(0,h-p),h=this.audio.currentTime):h<l&&(this.audio.currentTime+=l,h=this.audio.currentTime),h<this.previousTime&&this.emit(c.LOOPED,this);else if(h>=p){this.reset(),this.stopAndReleaseAudioTag(),this.emit(c.COMPLETE,this);return}this.previousTime=h}},destroy:function(){u.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=s(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){u.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(a){this.currentConfig.mute=a,!this.manager.isLocked(this,"mute",a)&&(this.updateMute(),this.emit(c.MUTE,this,a))}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.currentConfig.volume},set:function(a){this.currentConfig.volume=a,!this.manager.isLocked(this,"volume",a)&&(this.updateVolume(),this.emit(c.VOLUME,this,a))}},setVolume:function(a){return this.volume=a,this},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,!this.manager.isLocked(this,c.RATE,a)&&(this.calculateRate(),this.emit(c.RATE,this,a))}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,!this.manager.isLocked(this,c.DETUNE,a)&&(this.calculateRate(),this.emit(c.DETUNE,this,a))}},setDetune:function(a){return this.detune=a,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.isLocked(this,"seek",a)||this.startTime>0||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.isPlaying?(this.previousTime=a,this.audio.currentTime=a):this.isPaused&&(this.currentConfig.seek=a),this.emit(c.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,!this.manager.isLocked(this,"loop",a)&&(this.audio&&(this.audio.loop=a),this.emit(c.LOOP,this,a))}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.currentConfig.pan},set:function(a){this.currentConfig.pan=a,this.emit(c.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});r.exports=o},27622:(r,m,e)=>{var u=e(12486),g=e(56694),c=e(76038),s=e(34350),o=new g({Extends:u,initialize:function(l){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,u.call(this,l)},add:function(a,l){var p=new s(this,a,l);return this.sounds.push(p),p},unlock:function(){this.locked=!1;var a=this;if(this.game.cache.audio.entries.each(function(f,v){for(var y=0;y<v.length;y++)if(v[y].dataset.locked==="true")return a.locked=!0,!1;return!0}),!!this.locked){var l=!1,p=function(){l=!0},h=function(){if(l){l=!1;return}document.body.removeEventListener("touchmove",p),document.body.removeEventListener("touchend",h);var f=[];if(a.game.cache.audio.entries.each(function(y,x){for(var S=0;S<x.length;S++){var E=x[S];E.dataset.locked==="true"&&f.push(E)}return!0}),f.length!==0){var v=f[f.length-1];v.oncanplaythrough=function(){v.oncanplaythrough=null,f.forEach(function(y){y.dataset.locked="false"}),a.unlocked=!0},f.forEach(function(y){y.load()})}};this.once(c.UNLOCKED,function(){for(this.forEachActiveSound(function(v){v.currentMarker===null&&v.duration===0&&(v.duration=v.tags[0].duration),v.totalDuration=v.tags[0].duration});this.lockedActionsQueue.length;){var f=this.lockedActionsQueue.shift();f.sound[f.prop].apply?f.sound[f.prop].apply(f.sound,f.value||[]):f.sound[f.prop]=f.value}},this),document.body.addEventListener("touchmove",p,!1),document.body.addEventListener("touchend",h,!1)}},onBlur:function(){this.forEachActiveSound(function(a){a.isPlaying&&(this.onBlurPausedSounds.push(a),a.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(a){a.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){u.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(a,l,p){return a.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:a,prop:l,value:p}),!0):!1},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this._mute},set:function(a){this._mute=a,this.forEachActiveSound(function(l){l.updateMute()}),this.emit(c.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this._volume},set:function(a){this._volume=a,this.forEachActiveSound(function(l){l.updateVolume()}),this.emit(c.GLOBAL_VOLUME,this,a)}}});r.exports=o},56751:(r,m,e)=>{r.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}},38662:(r,m,e)=>{var u=e(25798),g=e(56694),c=e(6659),s=e(98611),o=e(72283),a=function(){return!1},l=function(){return null},p=function(){return this},h=new g({Extends:c,initialize:function(v,y,x){x===void 0&&(x={}),c.call(this),this.manager=v,this.key=y,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=s({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},x),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:a,updateMarker:a,removeMarker:l,play:a,pause:a,resume:a,stop:a,setMute:p,setVolume:p,setRate:p,setDetune:p,setSeek:p,setLoop:p,setPan:p,applyConfig:l,resetConfig:l,update:o,calculateRate:l,destroy:function(){u.prototype.destroy.call(this)}});r.exports=h},17546:(r,m,e)=>{var u=e(12486),g=e(56694),c=e(6659),s=e(38662),o=e(72283),a=new g({Extends:c,initialize:function(p){c.call(this),this.game=p,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(l,p){var h=new s(this,l,p);return this.sounds.push(h),h},addAudioSprite:function(l,p){var h=this.add(l,p);return h.spritemap={},h},get:function(l){return u.prototype.get.call(this,l)},getAll:function(l){return u.prototype.getAll.call(this,l)},play:function(l,p){return!1},playAudioSprite:function(l,p,h){return!1},remove:function(l){return u.prototype.remove.call(this,l)},removeAll:function(){return u.prototype.removeAll.call(this)},removeByKey:function(l){return u.prototype.removeByKey.call(this,l)},stopByKey:function(l){return u.prototype.stopByKey.call(this,l)},onBlur:o,onFocus:o,onGameBlur:o,onGameFocus:o,pauseAll:o,resumeAll:o,stopAll:o,update:o,setRate:o,setDetune:o,setMute:o,setVolume:o,unlock:o,forEachActiveSound:function(l,p){u.prototype.forEachActiveSound.call(this,l,p)},destroy:function(){u.prototype.destroy.call(this)}});r.exports=a},96008:(r,m,e)=>{var u=e(25798),g=e(56694),c=e(76038),s=e(72632),o=new g({Extends:u,initialize:function(l,p,h){if(h===void 0&&(h={}),this.audioBuffer=l.game.cache.audio.get(p),!this.audioBuffer)throw new Error('Audio key "'+p+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=l.context.createGain(),this.volumeNode=l.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),l.context.createPanner&&(this.spatialNode=l.context.createPanner(),this.volumeNode.connect(this.spatialNode)),l.context.createStereoPanner?(this.pannerNode=l.context.createStereoPanner(),l.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(l.destination)):l.context.createPanner?this.spatialNode.connect(l.destination):this.volumeNode.connect(l.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,u.call(this,l,p,h)},play:function(a,l){return u.prototype.play.call(this,a,l)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(c.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(c.RESUME,this),!0)},stop:function(){return u.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(c.STOP,this),!0):!1},createAndStartBufferSource:function(){var a=this.currentConfig.seek,l=this.currentConfig.delay,p=this.manager.context.currentTime+l,h=(this.currentMarker?this.currentMarker.start:0)+a,f=this.duration-a;this.playTime=p-a,this.startTime=p,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,p),Math.max(0,h),Math.max(0,f)),this.resetConfig()},createAndStartLoopBufferSource:function(){var a=this.getLoopTime(),l=this.currentMarker?this.currentMarker.start:0,p=this.duration;this.loopTime=a,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,a),Math.max(0,l),Math.max(0,p))},createBufferSource:function(){var a=this,l=this.manager.context.createBufferSource();return l.buffer=this.audioBuffer,l.connect(this.muteNode),l.onended=function(p){p.target===a.source&&(a.currentConfig.loop?a.hasLooped=!0:a.hasEnded=!0)},l},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var a=this.currentConfig.source;if(a&&this.manager.context.createPanner){var l=this.spatialNode;l.panningModel=s(a,"panningModel","equalpower"),l.distanceModel=s(a,"distanceModel","inverse"),l.orientationX.value=s(a,"orientationX",0),l.orientationY.value=s(a,"orientationY",0),l.orientationZ.value=s(a,"orientationZ",-1),l.refDistance=s(a,"refDistance",1),l.maxDistance=s(a,"maxDistance",1e4),l.rolloffFactor=s(a,"rolloffFactor",1),l.coneInnerAngle=s(a,"coneInnerAngle",360),l.coneOuterAngle=s(a,"coneOuterAngle",0),l.coneOuterGain=s(a,"coneOuterGain",0),this.spatialSource=s(a,"follow",null),this.spatialSource||(l.positionX.value=s(a,"x",0),l.positionY.value=s(a,"y",0),l.positionZ.value=s(a,"z",0))}u.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(a){this.spatialNode&&(this.spatialNode.positionX.value=a)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(a){this.spatialNode&&(this.spatialNode.positionY.value=a)}},update:function(){if(this.isPlaying&&this.spatialSource){var a=s(this.spatialSource,"x",null),l=s(this.spatialSource,"y",null);a&&a!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=a),l&&l!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=l)}this.hasEnded?(this.hasEnded=!1,u.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(c.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(c.LOOPED,this))},destroy:function(){this.pendingRemove||(u.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){u.prototype.calculateRate.call(this);var a=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,a),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,a)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var a=0,l=0;l<this.rateUpdates.length;l++){var p=0;l<this.rateUpdates.length-1?p=this.rateUpdates[l+1].time:p=this.manager.context.currentTime-this.playTime,a+=(p-this.rateUpdates[l].time)*this.rateUpdates[l].rate}return a},getLoopTime:function(){for(var a=0,l=0;l<this.rateUpdates.length-1;l++)a+=(this.rateUpdates[l+1].time-this.rateUpdates[l].time)*this.rateUpdates[l].rate;var p=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+p.time+(this.duration-a)/p.rate},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,this.calculateRate(),this.emit(c.RATE,this,a)}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,this.calculateRate(),this.emit(c.DETUNE,this,a)}},setDetune:function(a){return this.detune=a,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(a){this.currentConfig.mute=a,this.muteNode.gain.setValueAtTime(a?0:1,0),this.emit(c.MUTE,this,a)}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(a){this.currentConfig.volume=a,this.volumeNode.gain.setValueAtTime(a,0),this.emit(c.VOLUME,this,a)}},setVolume:function(a){return this.volume=a,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.currentConfig.seek=a,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(c.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),a&&this.createAndStartLoopBufferSource()),this.emit(c.LOOP,this,a)}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(a){this.currentConfig.pan=a,this.pannerNode&&this.pannerNode.pan.setValueAtTime(a,this.manager.context.currentTime),this.emit(c.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});r.exports=o},55491:(r,m,e)=>{var u=e(82329),g=e(12486),c=e(56694),s=e(76038),o=e(97081),a=e(96008),l=e(72632),p=new c({Extends:g,initialize:function(f){this.context=this.createAudioContext(f),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),g.call(this,f),this.locked&&f.isBooted?this.unlock():f.events.once(o.BOOT,this.unlock,this)},createAudioContext:function(h){var f=h.config.audio;if(f.context)return f.context.resume(),f.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(h){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=h,this.masterMuteNode=h.createGain(),this.masterVolumeNode=h.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(h.destination),this.destination=this.masterMuteNode,this},add:function(h,f){var v=new a(this,h,f);return this.sounds.push(v),v},decodeAudio:function(h,f){var v;Array.isArray(h)?v=h:v=[{key:h,data:f}];for(var y=this.game.cache.audio,x=v.length,S=0;S<v.length;S++){var E=v[S],b=E.key,T=E.data;typeof T=="string"&&(T=u(T));var P=function(w,A){y.add(w,A),this.emit(s.DECODED,w),x--,x===0&&this.emit(s.DECODED_ALL)}.bind(this,b),C=function(w,A){console.error("Error decoding audio: "+w+" - ",A?A.message:""),x--,x===0&&this.emit(s.DECODED_ALL)}.bind(this,b);this.context.decodeAudioData(T,P,C)}},setListenerPosition:function(h,f){return h===void 0&&(h=this.game.scale.width/2),f===void 0&&(f=this.game.scale.height/2),this.listenerPosition.set(h,f),this},unlock:function(){var h=this,f=document.body,v=function y(){if(h.context&&f){var x=f.removeEventListener;h.context.resume().then(function(){x("touchstart",y),x("touchend",y),x("click",y),x("keydown",y),h.unlocked=!0},function(){x("touchstart",y),x("touchend",y),x("click",y),x("keydown",y)})}};f&&(f.addEventListener("touchstart",v,!1),f.addEventListener("touchend",v,!1),f.addEventListener("click",v,!1),f.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var h=this.context;h&&!this.locked&&(h.state==="suspended"||h.state==="interrupted")&&h.resume()},update:function(h,f){var v=this.context.listener;if(v&&v.positionX!==void 0){var y=l(this.listenerPosition,"x",null),x=l(this.listenerPosition,"y",null);y&&y!==this._spatialx&&(this._spatialx=v.positionX.value=y),x&&x!==this._spatialy&&(this._spatialy=v.positionY.value=x)}g.prototype.update.call(this,h,f),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var h=this;this.context.close().then(function(){h.context=null})}g.prototype.destroy.call(this)},setMute:function(h){return this.mute=h,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(h){this.masterMuteNode.gain.setValueAtTime(h?0:1,0),this.emit(s.GLOBAL_MUTE,this,h)}},setVolume:function(h){return this.volume=h,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(h){this.masterVolumeNode.gain.setValueAtTime(h,0),this.emit(s.GLOBAL_VOLUME,this,h)}}});r.exports=p},71207:(r,m,e)=>{var u=e(59959),g=e(56694),c=e(72283),s=e(17922),o=new g({initialize:function(l){this.parent=l,this.list=[],this.position=0,this.addCallback=c,this.removeCallback=c,this._sortKey=""},add:function(a,l){return l?u.Add(this.list,a):u.Add(this.list,a,0,this.addCallback,this)},addAt:function(a,l,p){return p?u.AddAt(this.list,a,l):u.AddAt(this.list,a,l,0,this.addCallback,this)},getAt:function(a){return this.list[a]},getIndex:function(a){return this.list.indexOf(a)},sort:function(a,l){return a?(l===void 0&&(l=function(p,h){return p[a]-h[a]}),s(this.list,l),this):this},getByName:function(a){return u.GetFirst(this.list,"name",a)},getRandom:function(a,l){return u.GetRandom(this.list,a,l)},getFirst:function(a,l,p,h){return u.GetFirst(this.list,a,l,p,h)},getAll:function(a,l,p,h){return u.GetAll(this.list,a,l,p,h)},count:function(a,l){return u.CountAllMatching(this.list,a,l)},swap:function(a,l){u.Swap(this.list,a,l)},moveTo:function(a,l){return u.MoveTo(this.list,a,l)},moveAbove:function(a,l){return u.MoveAbove(this.list,a,l)},moveBelow:function(a,l){return u.MoveBelow(this.list,a,l)},remove:function(a,l){return l?u.Remove(this.list,a):u.Remove(this.list,a,this.removeCallback,this)},removeAt:function(a,l){return l?u.RemoveAt(this.list,a):u.RemoveAt(this.list,a,this.removeCallback,this)},removeBetween:function(a,l,p){return p?u.RemoveBetween(this.list,a,l):u.RemoveBetween(this.list,a,l,this.removeCallback,this)},removeAll:function(a){for(var l=this.list.length;l--;)this.remove(this.list[l],a);return this},bringToTop:function(a){return u.BringToTop(this.list,a)},sendToBack:function(a){return u.SendToBack(this.list,a)},moveUp:function(a){return u.MoveUp(this.list,a),a},moveDown:function(a){return u.MoveDown(this.list,a),a},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(a,l){return u.Replace(this.list,a,l)},exists:function(a){return this.list.indexOf(a)>-1},setAll:function(a,l,p,h){return u.SetAll(this.list,a,l,p,h),this},each:function(a,l){for(var p=[null],h=2;h<arguments.length;h++)p.push(arguments[h]);for(h=0;h<this.list.length;h++)p[0]=this.list[h],a.apply(l,p)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});r.exports=o},33885:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s){if(this.entries={},this.size=0,Array.isArray(s))for(var o=0;o<s.length;o++)this.set(s[o][0],s[o][1])},set:function(c,s){return this.has(c)||this.size++,this.entries[c]=s,this},get:function(c){if(this.has(c))return this.entries[c]},getArray:function(){var c=[],s=this.entries;for(var o in s)c.push(s[o]);return c},has:function(c){return this.entries.hasOwnProperty(c)},delete:function(c){return this.has(c)&&(delete this.entries[c],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(c){delete this.entries[c]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var c=[],s=this.entries;for(var o in s)c.push(s[o]);return c},dump:function(){var c=this.entries;console.group("Map");for(var s in c)console.log(s,c[s]);console.groupEnd()},each:function(c){var s=this.entries;for(var o in s)if(c(o,s[o])===!1)break;return this},contains:function(c){var s=this.entries;for(var o in s)if(s[o]===c)return!0;return!1},merge:function(c,s){s===void 0&&(s=!1);var o=this.entries,a=c.entries;for(var l in a)o.hasOwnProperty(l)&&s?o[l]=a[l]:this.set(l,a[l]);return this}});r.exports=g},74623:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(36716),s=new u({Extends:g,initialize:function(){g.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(o){return this._active.indexOf(o)>-1},isPending:function(o){return this._toProcess>0&&this._pending.indexOf(o)>-1},isDestroying:function(o){return this._destroy.indexOf(o)>-1},add:function(o){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(o),this._toProcess++),o},remove:function(o){if(this.isPending(o)){var a=this._pending,l=a.indexOf(o);l!==-1&&a.splice(l,1)}else this.isActive(o)&&(this._destroy.push(o),this._toProcess++);return o},removeAll:function(){for(var o=this._active,a=this._destroy,l=o.length;l--;)a.push(o[l]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var o=this._destroy,a=this._active,l,p;for(l=0;l<o.length;l++){p=o[l];var h=a.indexOf(p);h!==-1&&(a.splice(h,1),this.emit(c.PROCESS_QUEUE_REMOVE,p))}for(o.length=0,o=this._pending,l=0;l<o.length;l++)p=o[l],(!this.checkQueue||this.checkQueue&&a.indexOf(p)===-1)&&(a.push(p),this.emit(c.PROCESS_QUEUE_ADD,p));return o.length=0,this._toProcess=0,a},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});r.exports=s},68687:(r,m,e)=>{var u=e(53466);function g(T){var P=[".left",".top",".right",".bottom"];if(!(this instanceof g))return new g(T,P);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}g.prototype={all:function(){return this._all(this.data,[])},search:function(T){var P=this.data,C=[],w=this.toBBox;if(!S(T,P))return C;for(var A=[],R,I,L,O;P;){for(R=0,I=P.children.length;R<I;R++)L=P.children[R],O=P.leaf?w(L):L,S(T,O)&&(P.leaf?C.push(L):x(T,O)?this._all(L,C):A.push(L));P=A.pop()}return C},collides:function(T){var P=this.data,C=this.toBBox;if(!S(T,P))return!1;for(var w=[],A,R,I,L;P;){for(A=0,R=P.children.length;A<R;A++)if(I=P.children[A],L=P.leaf?C(I):I,S(T,L)){if(P.leaf||x(T,L))return!0;w.push(I)}P=w.pop()}return!1},load:function(T){if(!(T&&T.length))return this;if(T.length<this._minEntries){for(var P=0,C=T.length;P<C;P++)this.insert(T[P]);return this}var w=this._build(T.slice(),0,T.length-1,0);if(!this.data.children.length)this.data=w;else if(this.data.height===w.height)this._splitRoot(this.data,w);else{if(this.data.height<w.height){var A=this.data;this.data=w,w=A}this._insert(w,this.data.height-w.height-1,!0)}return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=E([]),this},remove:function(T,P){if(!T)return this;for(var C=this.data,w=this.toBBox(T),A=[],R=[],I,L,O,D;C||A.length;){if(C||(C=A.pop(),L=A[A.length-1],I=R.pop(),D=!0),C.leaf&&(O=c(T,C.children,P),O!==-1))return C.children.splice(O,1),A.push(C),this._condense(A),this;!D&&!C.leaf&&x(C,w)?(A.push(C),R.push(I),I=0,L=C,C=C.children[0]):L?(I++,C=L.children[I],D=!1):C=null}return this},toBBox:function(T){return T},compareMinX:l,compareMinY:p,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,P){for(var C=[];T;)T.leaf?P.push.apply(P,T.children):C.push.apply(C,T.children),T=C.pop();return P},_build:function(T,P,C,w){var A=C-P+1,R=this._maxEntries,I;if(A<=R)return I=E(T.slice(P,C+1)),s(I,this.toBBox),I;w||(w=Math.ceil(Math.log(A)/Math.log(R)),R=Math.ceil(A/Math.pow(R,w-1))),I=E([]),I.leaf=!1,I.height=w;var L=Math.ceil(A/R),O=L*Math.ceil(Math.sqrt(R)),D,V,B,U;for(b(T,P,C,O,this.compareMinX),D=P;D<=C;D+=O)for(B=Math.min(D+O-1,C),b(T,D,B,L,this.compareMinY),V=D;V<=B;V+=L)U=Math.min(V+L-1,B),I.children.push(this._build(T,V,U,w-1));return s(I,this.toBBox),I},_chooseSubtree:function(T,P,C,w){for(var A,R,I,L,O,D,V,B;w.push(P),!(P.leaf||w.length-1===C);){for(V=B=1/0,A=0,R=P.children.length;A<R;A++)I=P.children[A],O=h(I),D=v(T,I)-O,D<B?(B=D,V=O<V?O:V,L=I):D===B&&O<V&&(V=O,L=I);P=L||P.children[0]}return P},_insert:function(T,P,C){var w=this.toBBox,A=C?T:w(T),R=[],I=this._chooseSubtree(A,this.data,P,R);for(I.children.push(T),a(I,A);P>=0&&R[P].children.length>this._maxEntries;)this._split(R,P),P--;this._adjustParentBBoxes(A,R,P)},_split:function(T,P){var C=T[P],w=C.children.length,A=this._minEntries;this._chooseSplitAxis(C,A,w);var R=this._chooseSplitIndex(C,A,w),I=E(C.children.splice(R,C.children.length-R));I.height=C.height,I.leaf=C.leaf,s(C,this.toBBox),s(I,this.toBBox),P?T[P-1].children.push(I):this._splitRoot(C,I)},_splitRoot:function(T,P){this.data=E([T,P]),this.data.height=T.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(T,P,C){var w,A,R,I,L,O,D,V;for(O=D=1/0,w=P;w<=C-P;w++)A=o(T,0,w,this.toBBox),R=o(T,w,C,this.toBBox),I=y(A,R),L=h(A)+h(R),I<O?(O=I,V=w,D=L<D?L:D):I===O&&L<D&&(D=L,V=w);return V},_chooseSplitAxis:function(T,P,C){var w=T.leaf?this.compareMinX:l,A=T.leaf?this.compareMinY:p,R=this._allDistMargin(T,P,C,w),I=this._allDistMargin(T,P,C,A);R<I&&T.children.sort(w)},_allDistMargin:function(T,P,C,w){T.children.sort(w);var A=this.toBBox,R=o(T,0,P,A),I=o(T,C-P,C,A),L=f(R)+f(I),O,D;for(O=P;O<C-P;O++)D=T.children[O],a(R,T.leaf?A(D):D),L+=f(R);for(O=C-P-1;O>=P;O--)D=T.children[O],a(I,T.leaf?A(D):D),L+=f(I);return L},_adjustParentBBoxes:function(T,P,C){for(var w=C;w>=0;w--)a(P[w],T)},_condense:function(T){for(var P=T.length-1,C;P>=0;P--)T[P].children.length===0?P>0?(C=T[P-1].children,C.splice(C.indexOf(T[P]),1)):this.clear():s(T[P],this.toBBox)},compareMinX:function(T,P){return T.left-P.left},compareMinY:function(T,P){return T.top-P.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}};function c(T,P,C){if(!C)return P.indexOf(T);for(var w=0;w<P.length;w++)if(C(T,P[w]))return w;return-1}function s(T,P){o(T,0,T.children.length,P,T)}function o(T,P,C,w,A){A||(A=E(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var R=P,I;R<C;R++)I=T.children[R],a(A,T.leaf?w(I):I);return A}function a(T,P){return T.minX=Math.min(T.minX,P.minX),T.minY=Math.min(T.minY,P.minY),T.maxX=Math.max(T.maxX,P.maxX),T.maxY=Math.max(T.maxY,P.maxY),T}function l(T,P){return T.minX-P.minX}function p(T,P){return T.minY-P.minY}function h(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function f(T){return T.maxX-T.minX+(T.maxY-T.minY)}function v(T,P){return(Math.max(P.maxX,T.maxX)-Math.min(P.minX,T.minX))*(Math.max(P.maxY,T.maxY)-Math.min(P.minY,T.minY))}function y(T,P){var C=Math.max(T.minX,P.minX),w=Math.max(T.minY,P.minY),A=Math.min(T.maxX,P.maxX),R=Math.min(T.maxY,P.maxY);return Math.max(0,A-C)*Math.max(0,R-w)}function x(T,P){return T.minX<=P.minX&&T.minY<=P.minY&&P.maxX<=T.maxX&&P.maxY<=T.maxY}function S(T,P){return P.minX<=T.maxX&&P.minY<=T.maxY&&P.maxX>=T.minX&&P.maxY>=T.minY}function E(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(T,P,C,w,A){for(var R=[P,C],I;R.length;)C=R.pop(),P=R.pop(),!(C-P<=w)&&(I=P+Math.ceil((C-P)/w/2)*w,u(T,I,P,C,A),R.push(P,I,I,C))}r.exports=g},58403:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s){if(this.entries=[],Array.isArray(s))for(var o=0;o<s.length;o++)this.set(s[o])},set:function(c){return this.entries.indexOf(c)===-1&&this.entries.push(c),this},get:function(c,s){for(var o=0;o<this.entries.length;o++){var a=this.entries[o];if(a[c]===s)return a}},getArray:function(){return this.entries.slice(0)},delete:function(c){var s=this.entries.indexOf(c);return s>-1&&this.entries.splice(s,1),this},dump:function(){console.group("Set");for(var c=0;c<this.entries.length;c++){var s=this.entries[c];console.log(s)}console.groupEnd()},each:function(c,s){var o,a=this.entries.slice(),l=a.length;if(s)for(o=0;o<l&&c.call(s,a[o],o)!==!1;o++);else for(o=0;o<l&&c(a[o],o)!==!1;o++);return this},iterate:function(c,s){var o,a=this.entries.length;if(s)for(o=0;o<a&&c.call(s,this.entries[o],o)!==!1;o++);else for(o=0;o<a&&c(this.entries[o],o)!==!1;o++);return this},iterateLocal:function(c){var s,o=[];for(s=1;s<arguments.length;s++)o.push(arguments[s]);var a=this.entries.length;for(s=0;s<a;s++){var l=this.entries[s];l[c].apply(l,o)}return this},clear:function(){return this.entries.length=0,this},contains:function(c){return this.entries.indexOf(c)>-1},union:function(c){var s=new g;return c.entries.forEach(function(o){s.set(o)}),this.entries.forEach(function(o){s.set(o)}),s},intersect:function(c){var s=new g;return this.entries.forEach(function(o){c.contains(o)&&s.set(o)}),s},difference:function(c){var s=new g;return this.entries.forEach(function(o){c.contains(o)||s.set(o)}),s},size:{get:function(){return this.entries.length},set:function(c){return c<this.entries.length?this.entries.length=c:this.entries.length}}});r.exports=g},90881:(r,m,e)=>{var u=e(82897),g=e(56694),c=e(84314),s=e(93736),o=new g({initialize:function(l,p,h,f){l===void 0&&(l=0),p===void 0&&(p=l),h===void 0&&(h=0),f===void 0&&(f=null),this._width=l,this._height=p,this._parent=f,this.aspectMode=h,this.aspectRatio=p===0?1:l/p,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new s},setAspectMode:function(a){return a===void 0&&(a=0),this.aspectMode=a,this.setSize(this._width,this._height)},setSnap:function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.snapTo.set(a,l),this.setSize(this._width,this._height)},setParent:function(a){return this._parent=a,this.setSize(this._width,this._height)},setMin:function(a,l){return a===void 0&&(a=0),l===void 0&&(l=a),this.minWidth=u(a,0,this.maxWidth),this.minHeight=u(l,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(a,l){return a===void 0&&(a=Number.MAX_VALUE),l===void 0&&(l=a),this.maxWidth=u(a,this.minWidth,Number.MAX_VALUE),this.maxHeight=u(l,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(a,l){switch(a===void 0&&(a=0),l===void 0&&(l=a),this.aspectMode){case o.NONE:this._width=this.getNewWidth(c(a,this.snapTo.x)),this._height=this.getNewHeight(c(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case o.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(c(a,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case o.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(c(l,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case o.FIT:this.constrain(a,l,!0);break;case o.ENVELOP:this.constrain(a,l,!1);break}return this},setAspectRatio:function(a){return this.aspectRatio=a,this.setSize(this._width,this._height)},resize:function(a,l){return this._width=this.getNewWidth(c(a,this.snapTo.x)),this._height=this.getNewHeight(c(l,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(a,l){return l===void 0&&(l=!0),a=u(a,this.minWidth,this.maxWidth),l&&this._parent&&a>this._parent.width&&(a=Math.max(this.minWidth,this._parent.width)),a},getNewHeight:function(a,l){return l===void 0&&(l=!0),a=u(a,this.minHeight,this.maxHeight),l&&this._parent&&a>this._parent.height&&(a=Math.max(this.minHeight,this._parent.height)),a},constrain:function(a,l,p){a===void 0&&(a=0),l===void 0&&(l=a),p===void 0&&(p=!0),a=this.getNewWidth(a),l=this.getNewHeight(l);var h=this.snapTo,f=l===0?1:a/l;return p&&this.aspectRatio>f||!p&&this.aspectRatio<f?(a=c(a,h.x),l=a/this.aspectRatio,h.y>0&&(l=c(l,h.y),a=l*this.aspectRatio)):(p&&this.aspectRatio<f||!p&&this.aspectRatio>f)&&(l=c(l,h.y),a=l*this.aspectRatio,h.x>0&&(a=c(a,h.x),l=a*(1/this.aspectRatio))),this._width=a,this._height=l,this},fitTo:function(a,l){return this.constrain(a,l,!0)},envelop:function(a,l){return this.constrain(a,l,!1)},setWidth:function(a){return this.setSize(a,this._height)},setHeight:function(a){return this.setSize(this._width,a)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(a){a&&a.style&&(a.style.width=this._width+"px",a.style.height=this._height+"px")},copy:function(a){return a.setAspectMode(this.aspectMode),a.aspectRatio=this.aspectRatio,a.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(a){this.setSize(a,this._height)}},height:{get:function(){return this._height},set:function(a){this.setSize(this._width,a)}}});o.NONE=0,o.WIDTH_CONTROLS_HEIGHT=1,o.HEIGHT_CONTROLS_WIDTH=2,o.FIT=3,o.ENVELOP=4,r.exports=o},94160:r=>{r.exports="add"},95393:r=>{r.exports="remove"},36716:(r,m,e)=>{r.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}},20010:(r,m,e)=>{r.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}},17487:(r,m,e)=>{var u=e(56694),g=e(82897),c=e(27119),s=e(86459),o=e(28621),a=e(31673),l=new u({Extends:a,initialize:function(h,f,v,y,x){a.call(this,h,f,v,y,x),this.add("__BASE",0,0,0,y,x),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=y,this.height=x,this.imageData=this.context.getImageData(0,0,y,x),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===s.WEBGL&&this.refresh(),this},draw:function(p,h,f,v){return v===void 0&&(v=!0),this.context.drawImage(f,p,h),v&&this.update(),this},drawFrame:function(p,h,f,v,y){f===void 0&&(f=0),v===void 0&&(v=0),y===void 0&&(y=!0);var x=this.manager.getFrame(p,h);if(x){var S=x.canvasData,E=x.cutWidth,b=x.cutHeight,T=x.source.resolution;this.context.drawImage(x.source.image,S.x,S.y,E,b,f,v,E/T,b/T),y&&this.update()}return this},setPixel:function(p,h,f,v,y,x){x===void 0&&(x=255),p=Math.abs(Math.floor(p)),h=Math.abs(Math.floor(h));var S=this.getIndex(p,h);if(S>-1){var E=this.context.getImageData(p,h,1,1);E.data[0]=f,E.data[1]=v,E.data[2]=y,E.data[3]=x,this.context.putImageData(E,p,h)}return this},putData:function(p,h,f,v,y,x,S){return v===void 0&&(v=0),y===void 0&&(y=0),x===void 0&&(x=p.width),S===void 0&&(S=p.height),this.context.putImageData(p,h,f,v,y,x,S),this},getData:function(p,h,f,v){p=g(Math.floor(p),0,this.width-1),h=g(Math.floor(h),0,this.height-1),f=g(f,1,this.width-p),v=g(v,1,this.height-h);var y=this.context.getImageData(p,h,f,v);return y},getPixel:function(p,h,f){f||(f=new c);var v=this.getIndex(p,h);if(v>-1){var y=this.data,x=y[v+0],S=y[v+1],E=y[v+2],b=y[v+3];f.setTo(x,S,E,b)}return f},getPixels:function(p,h,f,v){p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=this.width),v===void 0&&(v=f),p=Math.abs(Math.round(p)),h=Math.abs(Math.round(h));for(var y=g(p,0,this.width),x=g(p+f,0,this.width),S=g(h,0,this.height),E=g(h+v,0,this.height),b=new c,T=[],P=S;P<E;P++){for(var C=[],w=y;w<x;w++)b=this.getPixel(w,P,b),C.push({x:w,y:P,color:b.color,alpha:b.alphaGL});T.push(C)}return T},getIndex:function(p,h){return p=Math.abs(Math.round(p)),h=Math.abs(Math.round(h)),p<this.width&&h<this.height?(p+h*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(p,h,f,v,y){return p===void 0&&(p=0),h===void 0&&(h=0),f===void 0&&(f=this.width),v===void 0&&(v=this.height),y===void 0&&(y=!0),this.context.clearRect(p,h,f,v),y&&this.update(),this},setSize:function(p,h){return h===void 0&&(h=p),(p!==this.width||h!==this.height)&&(this.canvas.width=p,this.canvas.height=h,this._source.width=p,this._source.height=h,this._source.isPowerOf2=o(p,h),this.frames.__BASE.setSize(p,h,0,0),this.width=p,this.height=h,this.refresh()),this},destroy:function(){a.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});r.exports=l},845:(r,m,e)=>{var u=e(95723),g=e(51052),c=e(61068),s=e(56694),o=e(86459),a=e(82047),l=e(72632),p=e(65641),h=e(37410),f=e(31673),v=e(75512),y=new s({Extends:f,initialize:function(S,E,b,T){b===void 0&&(b=256),T===void 0&&(T=256),this.type="DynamicTexture";var P=S.game.renderer,C=P&&P.type===o.CANVAS,w=C?c.create2D(this,b,T):[this];f.call(this,S,E,w,b,T),this.add("__BASE",0,0,0,b,T),this.renderer=P,this.isDrawing=!1,this.canvas=C?w:null,this.context=C?w.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new g(0,0,b,T).setScene(S.game.scene.systemScene,!1),this.renderTarget=C?null:new h(P,b,T,1,0,!1,!0,!0,!1),this.pipeline=C?null:P.pipelines.get(p.SINGLE_PIPELINE),this.setSize(b,T)},setSize:function(x,S){S===void 0&&(S=x);var E=this.get(),b=E.source;if(x!==this.width||S!==this.height){this.canvas&&(this.canvas.width=x,this.canvas.height=S);var T=this.renderTarget;T&&(T.resize(x,S),E.glTexture=T.texture,b.isRenderTexture=!0,b.isGLTexture=!0,b.glTexture=T.texture,b.glTexture.flipY=!0),this.camera.setSize(x,S),b.width=x,b.height=S,E.setSize(x,S),this.width=x,this.height=S}else{var P=this.getSourceImage();E.cutX+x>P.width&&(x=P.width-E.cutX),E.cutY+S>P.height&&(S=P.height-E.cutY),E.setSize(x,S,E.cutX,E.cutY)}return this},setIsSpriteTexture:function(x){return this.isSpriteTexture=x,this},fill:function(x,S,E,b,T,P){var C=this.camera,w=this.renderer;S===void 0&&(S=1),E===void 0&&(E=0),b===void 0&&(b=0),T===void 0&&(T=this.width),P===void 0&&(P=this.height);var A=x>>16&255,R=x>>8&255,I=x&255,L=this.renderTarget;if(C.preRender(),L){L.bind(!0);var O=this.pipeline.manager.set(this.pipeline),D=w.width/L.width,V=w.height/L.height;O.drawFillRect(E*D,b*V,T*D,P*V,v.getTintFromFloats(I/255,R/255,A/255,1),S),L.unbind(!0)}else{var B=this.context;w.setContext(B),B.globalCompositeOperation="source-over",B.fillStyle="rgba("+A+","+R+","+I+","+S+")",B.fillRect(E,b,T,P),w.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var x=this.context,S=this.renderTarget;S?S.clear():x&&(x.save(),x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,this.width,this.height),x.restore()),this.dirty=!1}return this},stamp:function(x,S,E,b,T){E===void 0&&(E=0),b===void 0&&(b=0);var P=l(T,"alpha",1),C=l(T,"tint",16777215),w=l(T,"angle",0),A=l(T,"rotation",0),R=l(T,"scale",1),I=l(T,"scaleX",R),L=l(T,"scaleY",R),O=l(T,"originX",.5),D=l(T,"originY",.5),V=l(T,"blendMode",0),B=l(T,"erase",!1),U=l(T,"skipBatch",!1),W=this.manager.resetStamp(P,C);return W.setAngle(0),w!==0?W.setAngle(w):A!==0&&W.setRotation(A),W.setScale(I,L),W.setTexture(x,S),W.setOrigin(O,D),W.setBlendMode(V),B&&(this._eraseMode=!0),U?this.batchGameObject(W,E,b):this.draw(W,E,b),B&&(this._eraseMode=!1),this},erase:function(x,S,E){return this._eraseMode=!0,this.draw(x,S,E),this._eraseMode=!1,this},draw:function(x,S,E,b,T){return this.beginDraw(),this.batchDraw(x,S,E,b,T),this.endDraw(),this},drawFrame:function(x,S,E,b,T,P){return this.beginDraw(),this.batchDrawFrame(x,S,E,b,T,P),this.endDraw(),this},repeat:function(x,S,E,b,T,P,C,w,A){if(E===void 0&&(E=0),b===void 0&&(b=0),T===void 0&&(T=this.width),P===void 0&&(P=this.height),C===void 0&&(C=1),w===void 0&&(w=16777215),A===void 0&&(A=!1),x instanceof a?S=x:S=this.manager.getFrame(x,S),!S)return this;var R=this.manager.resetStamp(C,w);R.setFrame(S),R.setOrigin(0);var I=S.width,L=S.height;T=Math.floor(T),P=Math.floor(P);var O=Math.ceil(T/I),D=Math.ceil(P/L),V=O*I-T,B=D*L-P;V>0&&(V=I-V),B>0&&(B=L-B),E<0&&(O+=Math.ceil(Math.abs(E)/I)),b<0&&(D+=Math.ceil(Math.abs(b)/L));var U=E,W=b,F=!1,G=this.manager.stampCrop.setTo(0,0,I,L);A||this.beginDraw();for(var M=0;M<D;M++){if(W+L<0){W+=L;continue}for(var N=0;N<O;N++){if(F=!1,U+I<0){U+=I;continue}else U<0&&(F=!0,G.width=I+U,G.x=I-G.width);W<0&&(F=!0,G.height=L+W,G.y=L-G.height),V>0&&N===O-1&&(F=!0,G.width=V),B>0&&M===D-1&&(F=!0,G.height=B),F&&R.setCrop(G),this.batchGameObject(R,U,W),R.isCropped=!1,G.setTo(0,0,I,L),U+=I}U=E,W+=L}return A||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var x=this.camera,S=this.renderer,E=this.renderTarget;x.preRender(),E?S.beginCapture(E.width,E.height):S.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(x,S,E,b,T){return Array.isArray(x)||(x=[x]),this.batchList(x,S,E,b,T),this},batchDrawFrame:function(x,S,E,b,T,P){E===void 0&&(E=0),b===void 0&&(b=0),T===void 0&&(T=1),P===void 0&&(P=16777215);var C=this.manager.getFrame(x,S);return C&&(this.renderTarget?this.pipeline.batchTextureFrame(C,E,b,P,T,this.camera.matrix,null):this.batchTextureFrame(C,E,b,T,P)),this},endDraw:function(x){if(x===void 0&&(x=this._eraseMode),this.isDrawing){var S=this.renderer,E=this.renderTarget;if(E){var b=S.endCapture(),T=S.pipelines.setUtility();T.blitFrame(b,E,1,!1,!1,x,this.isSpriteTexture),S.resetScissor(),S.resetViewport()}else S.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(x,S,E,b,T){var P=x.length;if(P!==0)for(var C=0;C<P;C++){var w=x[C];!w||w===this||(w.renderWebGL||w.renderCanvas?this.batchGameObject(w,S,E):w.isParent||w.list?this.batchGroup(w.getChildren(),S,E):typeof w=="string"?this.batchTextureFrameKey(w,null,S,E,b,T):w instanceof a?this.batchTextureFrame(w,S,E,b,T):Array.isArray(w)&&this.batchList(w,S,E,b,T))}},batchGroup:function(x,S,E){S===void 0&&(S=0),E===void 0&&(E=0);for(var b=0;b<x.length;b++){var T=x[b];T.willRender(this.camera)&&this.batchGameObject(T,T.x+S,T.y+E)}},batchGameObject:function(x,S,E){S===void 0&&(S=x.x),E===void 0&&(E=x.y);var b=x.x,T=x.y,P=this.camera,C=this.renderer,w=this._eraseMode,A=x.mask;if(x.setPosition(S,E),this.canvas){if(w){var R=x.blendMode;x.blendMode=u.ERASE}A&&A.preRenderCanvas(C,x,P),x.renderCanvas(C,x,P,null),A&&A.postRenderCanvas(C,x,P),w&&(x.blendMode=R)}else C&&(A&&A.preRenderWebGL(C,x,P),w||C.setBlendMode(x.blendMode),x.renderWebGL(C,x,P),A&&A.postRenderWebGL(C,P,this.renderTarget));x.setPosition(b,T)},batchTextureFrameKey:function(x,S,E,b,T,P){var C=this.manager.getFrame(x,S);C&&this.batchTextureFrame(C,E,b,T,P)},batchTextureFrame:function(x,S,E,b,T){S===void 0&&(S=0),E===void 0&&(E=0),b===void 0&&(b=1),T===void 0&&(T=16777215);var P=this.camera.matrix,C=this.renderTarget;if(C)this.pipeline.batchTextureFrame(x,S,E,T,b,P,null);else{var w=this.context,A=x.canvasData,R=x.source.image;w.save(),w.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",w.globalAlpha=b,P.setToContext(w),A.width>0&&A.height>0&&w.drawImage(R,A.x,A.y,A.width,A.height,S,E,A.width,A.height),w.restore()}},snapshotArea:function(x,S,E,b,T,P,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,x,S,E,b,P,C):this.renderer.snapshotCanvas(this.canvas,T,!1,x,S,E,b,P,C),this},snapshot:function(x,S,E){return this.snapshotArea(0,0,this.width,this.height,x,S,E)},snapshotPixel:function(x,S,E){return this.snapshotArea(x,S,1,1,E,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(x,S,E,b){var T=this.manager.resetStamp();T.setTexture(this),T.setOrigin(0),T.renderWebGL(x,T,E,b)},renderCanvas:function(){},preDestroy:function(){c.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});r.exports=y},82047:(r,m,e)=>{var u=e(56694),g=e(82897),c=e(98611),s=new u({initialize:function(a,l,p,h,f,v,y){this.texture=a,this.name=l,this.source=a.source[p],this.sourceIndex=p,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(v,y,h,f)},setSize:function(o,a,l,p){l===void 0&&(l=0),p===void 0&&(p=0),this.cutX=l,this.cutY=p,this.cutWidth=o,this.cutHeight=a,this.width=o,this.height=a,this.halfWidth=Math.floor(o*.5),this.halfHeight=Math.floor(a*.5),this.centerX=Math.floor(o/2),this.centerY=Math.floor(a/2);var h=this.data,f=h.cut;f.x=l,f.y=p,f.w=o,f.h=a,f.r=l+o,f.b=p+a,h.sourceSize.w=o,h.sourceSize.h=a,h.spriteSourceSize.w=o,h.spriteSourceSize.h=a,h.radius=.5*Math.sqrt(o*o+a*a);var v=h.drawImage;return v.x=l,v.y=p,v.width=o,v.height=a,this.updateUVs()},setTrim:function(o,a,l,p,h,f){var v=this.data,y=v.spriteSourceSize;return v.trim=!0,v.sourceSize.w=o,v.sourceSize.h=a,y.x=l,y.y=p,y.w=h,y.h=f,y.r=l+h,y.b=p+f,this.x=l,this.y=p,this.width=h,this.height=f,this.halfWidth=h*.5,this.halfHeight=f*.5,this.centerX=Math.floor(h/2),this.centerY=Math.floor(f/2),this.updateUVs()},setCropUVs:function(o,a,l,p,h,f,v){var y=this.cutX,x=this.cutY,S=this.cutWidth,E=this.cutHeight,b=this.realWidth,T=this.realHeight;a=g(a,0,b),l=g(l,0,T),p=g(p,0,b-a),h=g(h,0,T-l);var P=y+a,C=x+l,w=p,A=h,R=this.data;if(R.trim){var I=R.spriteSourceSize;p=g(p,0,S-a),h=g(h,0,E-l);var L=a+p,O=l+h,D=!(I.r<a||I.b<l||I.x>L||I.y>O);if(D){var V=Math.max(I.x,a),B=Math.max(I.y,l),U=Math.min(I.r,L)-V,W=Math.min(I.b,O)-B;w=U,A=W,f?P=y+(S-(V-I.x)-U):P=y+(V-I.x),v?C=x+(E-(B-I.y)-W):C=x+(B-I.y),a=V,l=B,p=U,h=W}else P=0,C=0,w=0,A=0}else f&&(P=y+(S-a-p)),v&&(C=x+(E-l-h));var F=this.source.width,G=this.source.height;return o.u0=Math.max(0,P/F),o.v0=Math.max(0,C/G),o.u1=Math.min(1,(P+w)/F),o.v1=Math.min(1,(C+A)/G),o.x=a,o.y=l,o.cx=P,o.cy=C,o.cw=w,o.ch=A,o.width=p,o.height=h,o.flipX=f,o.flipY=v,o},updateCropUVs:function(o,a,l){return this.setCropUVs(o,o.x,o.y,o.width,o.height,a,l)},setUVs:function(o,a,l,p,h,f){var v=this.data.drawImage;return v.width=o,v.height=a,this.u0=l,this.v0=p,this.u1=h,this.v1=f,this},updateUVs:function(){var o=this.cutX,a=this.cutY,l=this.cutWidth,p=this.cutHeight,h=this.data.drawImage;h.width=l,h.height=p;var f=this.source.width,v=this.source.height;return this.u0=o/f,this.v0=a/v,this.u1=(o+l)/f,this.v1=(a+p)/v,this},updateUVsInverted:function(){var o=this.source.width,a=this.source.height;return this.u0=(this.cutX+this.cutHeight)/o,this.v0=this.cutY/a,this.u1=this.cutX/o,this.v1=(this.cutY+this.cutWidth)/a,this},clone:function(){var o=new s(this.texture,this.name,this.sourceIndex);return o.cutX=this.cutX,o.cutY=this.cutY,o.cutWidth=this.cutWidth,o.cutHeight=this.cutHeight,o.x=this.x,o.y=this.y,o.width=this.width,o.height=this.height,o.halfWidth=this.halfWidth,o.halfHeight=this.halfHeight,o.centerX=this.centerX,o.centerY=this.centerY,o.rotated=this.rotated,o.data=c(!0,o.data,this.data),o.updateUVs(),o},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});r.exports=s},31673:(r,m,e)=>{var u=e(56694),g=e(82047),c=e(32547),s='Texture "%s" has no frame "%s"',o=new u({initialize:function(l,p,h,f,v){Array.isArray(h)||(h=[h]),this.manager=l,this.key=p,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var y=0;y<h.length;y++)this.source.push(new c(this,h[y],f,v))},add:function(a,l,p,h,f,v){if(this.has(a))return null;var y=new g(this,a,l,p,h,f,v);return this.frames[a]=y,this.firstFrame==="__BASE"&&(this.firstFrame=a),this.frameTotal++,y},remove:function(a){if(this.has(a)){var l=this.get(a);return l.destroy(),delete this.frames[a],!0}return!1},has:function(a){return this.frames.hasOwnProperty(a)},get:function(a){a||(a=this.firstFrame);var l=this.frames[a];return l||(console.warn(s,this.key,a),l=this.frames[this.firstFrame]),l},getTextureSourceIndex:function(a){for(var l=0;l<this.source.length;l++)if(this.source[l]===a)return l;return-1},getFramesFromTextureSource:function(a,l){l===void 0&&(l=!1);var p=[];for(var h in this.frames)if(!(h==="__BASE"&&!l)){var f=this.frames[h];f.sourceIndex===a&&p.push(f)}return p},getFrameNames:function(a){a===void 0&&(a=!1);var l=Object.keys(this.frames);if(!a){var p=l.indexOf("__BASE");p!==-1&&l.splice(p,1)}return l},getSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var l=this.frames[a];return l?l.source.image:(console.warn(s,this.key,a),this.frames.__BASE.source.image)},getDataSourceImage:function(a){(a==null||this.frameTotal===1)&&(a="__BASE");var l=this.frames[a],p;return l?p=l.sourceIndex:(console.warn(s,this.key,a),p=this.frames.__BASE.sourceIndex),this.dataSource[p].image},setDataSource:function(a){Array.isArray(a)||(a=[a]);for(var l=0;l<a.length;l++){var p=this.source[l];this.dataSource.push(new c(this,a[l],p.width,p.height))}},setFilter:function(a){var l;for(l=0;l<this.source.length;l++)this.source[l].setFilter(a);for(l=0;l<this.dataSource.length;l++)this.dataSource[l].setFilter(a)},destroy:function(){var a,l=this.source,p=this.dataSource;for(a=0;a<l.length;a++)l[a]&&l[a].destroy();for(a=0;a<p.length;a++)p[a]&&p[a].destroy();for(var h in this.frames){var f=this.frames[h];f&&f.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});r.exports=o},6237:(r,m,e)=>{var u=e(61068),g=e(17487),c=e(56694),s=e(27119),o=e(86459),a=e(845),l=e(6659),p=e(38203),h=e(82047),f=e(97081),v=e(52780),y=e(10850),x=e(1539),S=e(42911),E=e(69150),b=e(74118),T=e(31673),P=new c({Extends:l,initialize:function(w){l.call(this),this.game=w,this.name="TextureManager",this.list={},this._tempCanvas=u.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new b,this.silentWarnings=!1,w.events.once(f.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(p.LOAD,this.updatePending,this),this.on(p.ERROR,this.updatePending,this);var C=this.game.config;this.addBase64("__DEFAULT",C.defaultImage),this.addBase64("__MISSING",C.missingImage),this.addBase64("__WHITE",C.whiteImage),this.game.events.once(f.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(p.LOAD),this.off(p.ERROR),this.emit(p.READY),this.stamp=new x(this.game.scene.systemScene).setOrigin(0))},checkKey:function(C){return this.exists(C)?(this.silentWarnings||console.error("Texture key already in use: "+C),!1):!0},remove:function(C){if(typeof C=="string")if(this.exists(C))C=this.get(C);else return this.silentWarnings||console.warn("No texture found matching key: "+C),this;return this.list.hasOwnProperty(C.key)&&(C.destroy(),this.emit(p.REMOVE,C.key),this.emit(p.REMOVE_KEY+C.key)),this},removeKey:function(C){return this.list.hasOwnProperty(C)&&delete this.list[C],this},addBase64:function(C,w){if(this.checkKey(C)){var A=this,R=new Image;R.onerror=function(){A.emit(p.ERROR,C)},R.onload=function(){var I=A.create(C,R);E.Image(I,0),A.emit(p.ADD,C,I),A.emit(p.ADD_KEY+C,I),A.emit(p.LOAD,C,I)},R.src=w}return this},getBase64:function(C,w,A,R){A===void 0&&(A="image/png"),R===void 0&&(R=.92);var I="",L=this.getFrame(C,w);if(L&&(L.source.isRenderTexture||L.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(L){var O=L.canvasData,D=u.create2D(this,O.width,O.height),V=D.getContext("2d",{willReadFrequently:!0});O.width>0&&O.height>0&&V.drawImage(L.source.image,O.x,O.y,O.width,O.height,0,0,O.width,O.height),I=D.toDataURL(A,R),u.remove(D)}return I},addImage:function(C,w,A){var R=null;return this.checkKey(C)&&(R=this.create(C,w),E.Image(R,0),A&&R.setDataSource(A),this.emit(p.ADD,C,R),this.emit(p.ADD_KEY+C,R)),R},addGLTexture:function(C,w,A,R){var I=null;return this.checkKey(C)&&(A===void 0&&(A=w.width),R===void 0&&(R=w.height),I=this.create(C,w,A,R),I.add("__BASE",0,0,0,A,R),this.emit(p.ADD,C,I),this.emit(p.ADD_KEY+C,I)),I},addCompressedTexture:function(C,w,A){var R=null;if(this.checkKey(C)){if(R=this.create(C,w),R.add("__BASE",0,0,0,w.width,w.height),A)if(Array.isArray(A))for(var I=0;I<A.length;I++)E.JSONHash(R,I,A[I]);else E.JSONHash(R,0,A);this.emit(p.ADD,C,R),this.emit(p.ADD_KEY+C,R)}return R},addRenderTexture:function(C,w){var A=null;return this.checkKey(C)&&(A=this.create(C,w),A.add("__BASE",0,0,0,w.width,w.height),this.emit(p.ADD,C,A),this.emit(p.ADD_KEY+C,A)),A},generate:function(C,w){if(this.checkKey(C)){var A=u.create(this,1,1);return w.canvas=A,v(w),this.addCanvas(C,A)}else return null},createCanvas:function(C,w,A){if(w===void 0&&(w=256),A===void 0&&(A=256),this.checkKey(C)){var R=u.create(this,w,A,o.CANVAS,!0);return this.addCanvas(C,R)}return null},addCanvas:function(C,w,A){A===void 0&&(A=!1);var R=null;return A?R=new g(this,C,w,w.width,w.height):this.checkKey(C)&&(R=new g(this,C,w,w.width,w.height),this.list[C]=R,this.emit(p.ADD,C,R),this.emit(p.ADD_KEY+C,R)),R},addDynamicTexture:function(C,w,A){var R=null;return typeof C=="string"&&!this.exists(C)?R=new a(this,C,w,A):(R=C,C=R.key),this.checkKey(C)?(this.list[C]=R,this.emit(p.ADD,C,R),this.emit(p.ADD_KEY+C,R)):R=null,R},addAtlas:function(C,w,A,R){return Array.isArray(A.textures)||Array.isArray(A.frames)?this.addAtlasJSONArray(C,w,A,R):this.addAtlasJSONHash(C,w,A,R)},addAtlasJSONArray:function(C,w,A,R){var I=null;if(w instanceof T?(C=I.key,I=w):this.checkKey(C)&&(I=this.create(C,w)),I){if(Array.isArray(A))for(var L=A.length===1,O=0;O<I.source.length;O++){var D=L?A[0]:A[O];E.JSONArray(I,O,D)}else E.JSONArray(I,0,A);R&&I.setDataSource(R),this.emit(p.ADD,C,I),this.emit(p.ADD_KEY+C,I)}return I},addAtlasJSONHash:function(C,w,A,R){var I=null;if(w instanceof T?(C=I.key,I=w):this.checkKey(C)&&(I=this.create(C,w)),I){if(Array.isArray(A))for(var L=0;L<A.length;L++)E.JSONHash(I,L,A[L]);else E.JSONHash(I,0,A);R&&I.setDataSource(R),this.emit(p.ADD,C,I),this.emit(p.ADD_KEY+C,I)}return I},addAtlasXML:function(C,w,A,R){var I=null;return w instanceof T?(C=I.key,I=w):this.checkKey(C)&&(I=this.create(C,w)),I&&(E.AtlasXML(I,0,A),R&&I.setDataSource(R),this.emit(p.ADD,C,I),this.emit(p.ADD_KEY+C,I)),I},addUnityAtlas:function(C,w,A,R){var I=null;return w instanceof T?(C=I.key,I=w):this.checkKey(C)&&(I=this.create(C,w)),I&&(E.UnityYAML(I,0,A),R&&I.setDataSource(R),this.emit(p.ADD,C,I),this.emit(p.ADD_KEY+C,I)),I},addSpriteSheet:function(C,w,A,R){var I=null;if(w instanceof T?(C=I.key,I=w):this.checkKey(C)&&(I=this.create(C,w)),I){var L=I.source[0].width,O=I.source[0].height;E.SpriteSheet(I,0,0,0,L,O,A),R&&I.setDataSource(R),this.emit(p.ADD,C,I),this.emit(p.ADD_KEY+C,I)}return I},addSpriteSheetFromAtlas:function(C,w){if(!this.checkKey(C))return null;var A=y(w,"atlas",null),R=y(w,"frame",null);if(!(!A||!R)){var I=this.get(A),L=I.get(R);if(L){var O=this.create(C,L.source.image);return L.trimmed?E.SpriteSheetFromAtlas(O,L,w):E.SpriteSheet(O,0,L.cutX,L.cutY,L.cutWidth,L.cutHeight,w),this.emit(p.ADD,C,O),this.emit(p.ADD_KEY+C,O),O}}},create:function(C,w,A,R){var I=null;return this.checkKey(C)&&(I=new T(this,C,w,A,R),this.list[C]=I),I},exists:function(C){return this.list.hasOwnProperty(C)},get:function(C){return C===void 0&&(C="__DEFAULT"),this.list[C]?this.list[C]:C instanceof T?C:C instanceof h?C.texture:this.list.__MISSING},cloneFrame:function(C,w){if(this.list[C])return this.list[C].get(w).clone()},getFrame:function(C,w){if(this.list[C])return this.list[C].get(w)},parseFrame:function(C){if(C){if(typeof C=="string")return this.getFrame(C);if(Array.isArray(C)&&C.length===2)return this.getFrame(C[0],C[1]);if(S(C))return this.getFrame(C.key,C.frame);if(C instanceof T)return C.get();if(C instanceof h)return C}else return},getTextureKeys:function(){var C=[];for(var w in this.list)w!=="__DEFAULT"&&w!=="__MISSING"&&w!=="__WHITE"&&C.push(w);return C},getPixel:function(C,w,A,R){var I=this.getFrame(A,R);if(I){C-=I.x,w-=I.y;var L=I.data.cut;if(C+=L.x,w+=L.y,C>=L.x&&C<L.r&&w>=L.y&&w<L.b){var O=this._tempContext;O.clearRect(0,0,1,1),O.drawImage(I.source.image,C,w,1,1,0,0,1,1);var D=O.getImageData(0,0,1,1);return new s(D.data[0],D.data[1],D.data[2],D.data[3])}}return null},getPixelAlpha:function(C,w,A,R){var I=this.getFrame(A,R);if(I){C-=I.x,w-=I.y;var L=I.data.cut;if(C+=L.x,w+=L.y,C>=L.x&&C<L.r&&w>=L.y&&w<L.b){var O=this._tempContext;O.clearRect(0,0,1,1),O.drawImage(I.source.image,C,w,1,1,0,0,1,1);var D=O.getImageData(0,0,1,1);return D.data[3]}}return null},setTexture:function(C,w,A){return this.list[w]&&(C.texture=this.list[w],C.frame=C.texture.get(A)),C},renameTexture:function(C,w){var A=this.get(C);return A&&C!==w?(A.key=w,this.list[w]=A,delete this.list[C],!0):!1},each:function(C,w){for(var A=[null],R=1;R<arguments.length;R++)A.push(arguments[R]);for(var I in this.list)A[0]=this.list[I],C.apply(w,A)},resetStamp:function(C,w){C===void 0&&(C=1),w===void 0&&(w=16777215);var A=this.stamp;return A.setCrop(),A.setPosition(0),A.setAngle(0),A.setScale(1),A.setAlpha(C),A.setTint(w),A},destroy:function(){for(var C in this.list)this.list[C].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,u.remove(this._tempCanvas)}});r.exports=P},32547:(r,m,e)=>{var u=e(61068),g=e(56694),c=e(28621),s=e(27394),o=new g({initialize:function(l,p,h,f,v){v===void 0&&(v=!1);var y=l.manager.game;this.renderer=y.renderer,this.texture=l,this.source=p,this.image=p.compressed?null:p,this.compressionAlgorithm=p.compressed?p.format:null,this.resolution=1,this.width=h||p.naturalWidth||p.videoWidth||p.width||0,this.height=f||p.naturalHeight||p.videoHeight||p.height||0,this.scaleMode=s.DEFAULT,this.isCanvas=p instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&p instanceof HTMLVideoElement,this.isRenderTexture=p.type==="RenderTexture"||p.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&p instanceof WebGLTexture,this.isPowerOf2=c(this.width,this.height),this.glTexture=null,this.flipY=v,this.init(y)},init:function(a){var l=this.renderer;if(l){var p=this.source;if(l.gl){var h=this.image,f=this.flipY,v=this.width,y=this.height,x=this.scaleMode;this.isCanvas?this.glTexture=l.createCanvasTexture(h,!1,f):this.isVideo?this.glTexture=l.createVideoTexture(h,!1,f):this.isRenderTexture?this.glTexture=l.createTextureFromSource(null,v,y,x):this.isGLTexture?this.glTexture=p:this.compressionAlgorithm?this.glTexture=l.createTextureFromSource(p):this.glTexture=l.createTextureFromSource(h,v,y,x)}else this.isRenderTexture&&(this.image=p.canvas)}a.config.antialias||this.setFilter(1)},setFilter:function(a){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,a),this.scaleMode=a},setFlipY:function(a){return a===void 0&&(a=!0),this.flipY=a,this},update:function(){var a=this.renderer,l=this.image,p=this.flipY,h=a.gl;h&&this.isCanvas?this.glTexture=a.updateCanvasTexture(l,this.glTexture,p):h&&this.isVideo&&(this.glTexture=a.updateVideoTexture(l,this.glTexture,p))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&u.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});r.exports=o},65154:r=>{var m={LINEAR:0,NEAREST:1};r.exports=m},49644:r=>{r.exports="addtexture"},29569:r=>{r.exports="addtexture-"},60079:r=>{r.exports="onerror"},72665:r=>{r.exports="onload"},93006:r=>{r.exports="ready"},69018:r=>{r.exports="removetexture"},85549:r=>{r.exports="removetexture-"},38203:(r,m,e)=>{r.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}},87499:(r,m,e)=>{var u=e(98611),g=e(65154),c={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:g,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};c=u(!1,c,g),r.exports=c},35082:r=>{var m=function(e,u,g){if(!g.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var c=e.source[u];e.add("__BASE",u,0,0,c.width,c.height);for(var s=g.getElementsByTagName("SubTexture"),o,a=0;a<s.length;a++){var l=s[a].attributes,p=l.name.value,h=parseInt(l.x.value,10),f=parseInt(l.y.value,10),v=parseInt(l.width.value,10),y=parseInt(l.height.value,10);if(o=e.add(p,u,h,f,v,y),l.frameX){var x=Math.abs(parseInt(l.frameX.value,10)),S=Math.abs(parseInt(l.frameY.value,10)),E=parseInt(l.frameWidth.value,10),b=parseInt(l.frameHeight.value,10);o.setTrim(v,y,x,S,E,b)}}return e};r.exports=m},83332:r=>{var m=function(e,u){var g=e.source[u];return e.add("__BASE",u,0,0,g.width,g.height),e};r.exports=m},21560:r=>{var m=function(e,u){var g=e.source[u];return e.add("__BASE",u,0,0,g.width,g.height),e};r.exports=m},64423:(r,m,e)=>{var u=e(32742),g=function(c,s,o){if(!o.frames&&!o.textures){console.warn("Invalid Texture Atlas JSON Array");return}var a=c.source[s];c.add("__BASE",s,0,0,a.width,a.height);for(var l=Array.isArray(o.textures)?o.textures[s].frames:o.frames,p,h=0;h<l.length;h++){var f=l[h];if(p=c.add(f.filename,s,f.frame.x,f.frame.y,f.frame.w,f.frame.h),!p){console.warn("Invalid atlas json, frame already exists: "+f.filename);continue}f.trimmed&&p.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(p.rotated=!0,p.updateUVsInverted());var v=f.anchor||f.pivot;v&&(p.customPivot=!0,p.pivotX=v.x,p.pivotY=v.y),p.customData=u(f)}for(var y in o)y!=="frames"&&(Array.isArray(o[y])?c.customData[y]=o[y].slice(0):c.customData[y]=o[y]);return c};r.exports=g},17264:(r,m,e)=>{var u=e(32742),g=function(c,s,o){if(!o.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var a=c.source[s];c.add("__BASE",s,0,0,a.width,a.height);var l=o.frames,p;for(var h in l)if(l.hasOwnProperty(h)){var f=l[h];if(p=c.add(h,s,f.frame.x,f.frame.y,f.frame.w,f.frame.h),!p){console.warn("Invalid atlas json, frame already exists: "+h);continue}f.trimmed&&p.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(p.rotated=!0,p.updateUVsInverted());var v=f.anchor||f.pivot;v&&(p.customPivot=!0,p.pivotX=v.x,p.pivotY=v.y),p.customData=u(f)}for(var y in o)y!=="frames"&&(Array.isArray(o[y])?c.customData[y]=o[y].slice(0):c.customData[y]=o[y]);return c};r.exports=g},67409:r=>{var m=function(e){var u=[171,75,84,88,32,49,49,187,13,10,26,10],g,c=new Uint8Array(e,0,12);for(g=0;g<c.length;g++)if(c[g]!==u[g]){console.warn("KTXParser - Invalid file format");return}var s=Uint32Array.BYTES_PER_ELEMENT,o=new DataView(e,12,13*s),a=o.getUint32(0,!0)===67305985,l=o.getUint32(1*s,a);if(l!==0){console.warn("KTXParser - Only compressed formats supported");return}var p=o.getUint32(4*s,a),h=o.getUint32(6*s,a),f=o.getUint32(7*s,a),v=Math.max(1,o.getUint32(11*s,a)),y=o.getUint32(12*s,a),x=new Array(v),S=12+13*4+y,E=h,b=f;for(g=0;g<v;g++){var T=new Int32Array(e,S,1)[0];S+=4,x[g]={data:new Uint8Array(e,S,T),width:E,height:b},E=Math.max(1,E>>1),b=Math.max(1,b>>1),S+=T}return{mipmaps:x,width:h,height:f,internalFormat:p,compressed:!0,generateMipmap:!1}};r.exports=m},24904:r=>{function m(C,w,A,R,I,L,O){return O===void 0&&(O=16),Math.floor((C+A)/I)*Math.floor((w+R)/L)*O}function e(C,w){return C=Math.max(C,16),w=Math.max(w,8),C*w/4}function u(C,w){return C=Math.max(C,8),w=Math.max(w,8),C*w/2}function g(C,w){return m(C,w,3,3,4,4,8)}function c(C,w){return m(C,w,3,3,4,4)}function s(C,w){return m(C,w,4,3,5,4)}function o(C,w){return m(C,w,4,4,5,5)}function a(C,w){return m(C,w,5,4,6,5)}function l(C,w){return m(C,w,5,5,6,6)}function p(C,w){return m(C,w,7,4,8,5)}function h(C,w){return m(C,w,7,5,8,6)}function f(C,w){return m(C,w,7,7,8,8)}function v(C,w){return m(C,w,9,4,10,5)}function y(C,w){return m(C,w,9,5,10,6)}function x(C,w){return m(C,w,9,7,10,8)}function S(C,w){return m(C,w,9,9,10,10)}function E(C,w){return m(C,w,11,9,12,10)}function b(C,w){return m(C,w,11,11,12,12)}var T={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:u,glFormat:35840},3:{sizeFunc:u,glFormat:35842},6:{sizeFunc:g,glFormat:36196},7:{sizeFunc:g,glFormat:33776},8:{sizeFunc:c,glFormat:33777},9:{sizeFunc:c,glFormat:33778},11:{sizeFunc:c,glFormat:33779},22:{sizeFunc:g,glFormat:37492},23:{sizeFunc:c,glFormat:37496},24:{sizeFunc:g,glFormat:37494},25:{sizeFunc:g,glFormat:37488},26:{sizeFunc:c,glFormat:37490},27:{sizeFunc:c,glFormat:37808},28:{sizeFunc:s,glFormat:37809},29:{sizeFunc:o,glFormat:37810},30:{sizeFunc:a,glFormat:37811},31:{sizeFunc:l,glFormat:37812},32:{sizeFunc:p,glFormat:37813},33:{sizeFunc:h,glFormat:37814},34:{sizeFunc:f,glFormat:37815},35:{sizeFunc:v,glFormat:37816},36:{sizeFunc:y,glFormat:37817},37:{sizeFunc:x,glFormat:37818},38:{sizeFunc:S,glFormat:37819},39:{sizeFunc:E,glFormat:37820},40:{sizeFunc:b,glFormat:37821}},P=function(C){for(var w=new Uint32Array(C,0,13),A=w[2],R=T[A].glFormat,I=T[A].sizeFunc,L=w[11],O=w[7],D=w[6],V=52+w[12],B=new Uint8Array(C,V),U=new Array(L),W=0,F=O,G=D,M=0;M<L;M++){var N=I(F,G);U[M]={data:new Uint8Array(B.buffer,B.byteOffset+W,N),width:F,height:G},F=Math.max(1,F>>1),G=Math.max(1,G>>1),W+=N}return{mipmaps:U,width:O,height:D,internalFormat:R,compressed:!0,generateMipmap:!1}};r.exports=P},6143:(r,m,e)=>{var u=e(72632),g=function(c,s,o,a,l,p,h){var f=u(h,"frameWidth",null),v=u(h,"frameHeight",f);if(f===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var y=c.source[s];c.add("__BASE",s,0,0,y.width,y.height);var x=u(h,"startFrame",0),S=u(h,"endFrame",-1),E=u(h,"margin",0),b=u(h,"spacing",0),T=Math.floor((l-E+b)/(f+b)),P=Math.floor((p-E+b)/(v+b)),C=T*P;C===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",c.key),(x>C||x<-C)&&(x=0),x<0&&(x=C+x),(S===-1||S>C||S<x)&&(S=C);for(var w=E,A=E,R=0,I=0,L=0,O=0;O<C;O++){R=0,I=0;var D=w+f,V=A+v;D>l&&(R=D-l),V>p&&(I=V-p),O>=x&&O<=S&&(c.add(L,s,o+w,a+A,f-R,v-I),L++),w+=f+b,w+f>l&&(w=E,A+=v+b)}return c};r.exports=g},20030:(r,m,e)=>{var u=e(72632),g=function(c,s,o){var a=u(o,"frameWidth",null),l=u(o,"frameHeight",a);if(!a)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var p=c.source[0];c.add("__BASE",0,0,0,p.width,p.height);var h=u(o,"startFrame",0),f=u(o,"endFrame",-1),v=u(o,"margin",0),y=u(o,"spacing",0),x=s.cutX,S=s.cutY,E=s.cutWidth,b=s.cutHeight,T=s.realWidth,P=s.realHeight,C=Math.floor((T-v+y)/(a+y)),w=Math.floor((P-v+y)/(l+y)),A=C*w,R=s.x,I=a-R,L=a-(T-E-R),O=s.y,D=l-O,V=l-(P-b-O);(h>A||h<-A)&&(h=0),h<0&&(h=A+h),f!==-1&&(A=h+(f+1));for(var B,U=v,W=v,F=0,G=0,M=0;M<w;M++){for(var N=M===0,k=M===w-1,z=0;z<C;z++){var H=z===0,$=z===C-1;if(B=c.add(F,G,x+U,S+W,a,l),H||N||$||k){var X=H?R:0,Y=N?O:0,j=0,J=0;H&&(j+=a-I),$&&(j+=a-L),N&&(J+=l-D),k&&(J+=l-V);var Q=a-j,Z=l-J;B.cutWidth=Q,B.cutHeight=Z,B.setTrim(a,l,X,Y,Q,Z)}U+=y,H?U+=I:$?U+=L:U+=a,F++}U=v,W+=y,N?W+=D:k?W+=V:W+=l}return c};r.exports=g},89187:r=>{var m=0,e=function(g,c,s,o){var a=m-o.y-o.height;g.add(s,c,o.x,a,o.width,o.height)},u=function(g,c,s){var o=g.source[c];g.add("__BASE",c,0,0,o.width,o.height),m=o.height;for(var a=s.split(`
`),l=/^[ ]*(- )*(\w+)+[: ]+(.*)/,p="",h="",f={x:0,y:0,width:0,height:0},v=0;v<a.length;v++){var y=a[v].match(l);if(y){var x=y[1]==="- ",S=y[2],E=y[3];if(x&&(h!==p&&(e(g,c,h,f),p=h),f={x:0,y:0,width:0,height:0}),S==="name"){h=E;continue}switch(S){case"x":case"y":case"width":case"height":f[S]=parseInt(E,10);break}}}return h!==p&&e(g,c,h,f),g};r.exports=u},69150:(r,m,e)=>{r.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}},93560:r=>{r.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s,o,a,l,p,h,f){(a===void 0||a<=0)&&(a=32),(l===void 0||l<=0)&&(l=32),p===void 0&&(p=0),h===void 0&&(h=0),this.name=s,this.firstgid=o|0,this.imageWidth=a|0,this.imageHeight=l|0,this.imageMargin=p|0,this.imageSpacing=h|0,this.properties=f||{},this.images=[],this.total=0},containsImageIndex:function(c){return c>=this.firstgid&&c<this.firstgid+this.total},addImage:function(c,s){return this.images.push({gid:c,image:s}),this.total++,this}});r.exports=g},46422:(r,m,e)=>{var u=e(56694),g=new u({initialize:function(s){if(this.gids=[],s!==void 0)for(var o=0;o<s.length;++o)for(var a=s[o],l=0;l<a.total;++l)this.gids[a.firstgid+l]=a;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(c){this.gids=c?this._gids:void 0}},getTypeIncludingTile:function(c){if(c.type!==void 0&&c.type!=="")return c.type;if(!(!this.gids||c.gid===void 0)){var s=this.gids[c.gid];if(s){var o=s.getTileData(c.gid);if(o)return o.type}}},setTextureAndFrame:function(c,s,o,a){if(s===null&&this.gids&&a.gid!==void 0){var l=this.gids[a.gid];l&&(s===null&&l.image!==void 0&&(s=l.image.key),o===null&&(o=a.gid-l.firstgid),c.scene.textures.getFrame(s,o)||(s=null,o=null))}c.setTexture(s,o)},setPropertiesFromTiledObject:function(c,s){if(this.gids!==void 0&&s.gid!==void 0){var o=this.gids[s.gid];o!==void 0&&this.setFromJSON(c,o.getTileProperties(s.gid))}this.setFromJSON(c,s.properties)},setFromJSON:function(c,s){if(s){if(Array.isArray(s)){s.forEach(function(a){c.setData(a.name,a.value)});return}for(var o in s)c[o]!==void 0?c[o]=s[o]:c.setData(o,s[o])}}});r.exports=g},15043:(r,m,e)=>{var u=e(93560),g=e(16586),c=e(90715),s=e(89797),o=function(a,l,p,h,f,v,y,x){p===void 0&&(p=32),h===void 0&&(h=32),f===void 0&&(f=10),v===void 0&&(v=10),x===void 0&&(x=!1);var S=null;if(Array.isArray(y)){var E=l!==void 0?l:"map";S=c(E,u.ARRAY_2D,y,p,h,x)}else if(l!==void 0){var b=a.cache.tilemap.get(l);b?S=c(l,b.format,b.data,p,h,x):console.warn("No map data found for key "+l)}return S===null&&(S=new g({tileWidth:p,tileHeight:h,width:f,height:v})),new s(a,S)};r.exports=o},29633:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(12920),s=e(28699),o=e(66658),a=new u({Mixins:[g.Alpha,g.Flip,g.Visible],initialize:function(p,h,f,v,y,x,S,E){this.layer=p,this.index=h,this.x=f,this.y=v,this.width=y,this.height=x,this.right,this.bottom,this.baseWidth=S!==void 0?S:y,this.baseHeight=E!==void 0?E:x,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(l,p){return!(l<this.pixelX||p<this.pixelY||l>this.right||p>this.bottom)},copy:function(l){return this.index=l.index,this.alpha=l.alpha,this.properties=s(l.properties),this.visible=l.visible,this.setFlip(l.flipX,l.flipY),this.tint=l.tint,this.rotation=l.rotation,this.collideUp=l.collideUp,this.collideDown=l.collideDown,this.collideLeft=l.collideLeft,this.collideRight=l.collideRight,this.collisionCallback=l.collisionCallback,this.collisionCallbackContext=l.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(l){var p=this.tilemapLayer;if(p){var h=p.tileToWorldXY(this.x,this.y,void 0,l);return h.x}return this.x*this.baseWidth},getRight:function(l){var p=this.tilemapLayer;return p?this.getLeft(l)+this.width*p.scaleX:this.getLeft(l)+this.width},getTop:function(l){var p=this.tilemapLayer;if(p){var h=p.tileToWorldXY(this.x,this.y,void 0,l);return h.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(l){var p=this.tilemapLayer;return p?this.getTop(l)+this.height*p.scaleY:this.getTop(l)+this.height},getBounds:function(l,p){return p===void 0&&(p=new o),p.x=this.getLeft(l),p.y=this.getTop(l),p.width=this.getRight(l)-p.x,p.height=this.getBottom(l)-p.y,p},getCenterX:function(l){return(this.getLeft(l)+this.getRight(l))/2},getCenterY:function(l){return(this.getTop(l)+this.getBottom(l))/2},intersects:function(l,p,h,f){return!(h<=this.pixelX||f<=this.pixelY||l>=this.right||p>=this.bottom)},isInteresting:function(l,p){return l&&p?this.canCollide||this.hasInterestingFace:l?this.collides:p?this.hasInterestingFace:!1},resetCollision:function(l){if(l===void 0&&(l=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,l){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(l,p,h,f,v){if(p===void 0&&(p=l),h===void 0&&(h=l),f===void 0&&(f=l),v===void 0&&(v=!0),this.collideLeft=l,this.collideRight=p,this.collideUp=h,this.collideDown=f,this.faceLeft=l,this.faceRight=p,this.faceTop=h,this.faceBottom=f,v){var y=this.tilemapLayer;y&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(l,p){return l===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=l,this.collisionCallbackContext=p),this},setSize:function(l,p,h,f){return l!==void 0&&(this.width=l),p!==void 0&&(this.height=p),h!==void 0&&(this.baseWidth=h),f!==void 0&&(this.baseHeight=f),this.updatePixelXY(),this},updatePixelXY:function(){var l=this.layer.orientation;if(l===c.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(l===c.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(l===c.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(l===c.HEXAGONAL){var p=this.layer.staggerAxis,h=this.layer.staggerIndex,f=this.layer.hexSideLength,v,y;p==="y"?(y=(this.baseHeight-f)/2+f,h==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*y):p==="x"&&(v=(this.baseWidth-f)/2+f,this.pixelX=this.x*v,h==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var l=this.layer.tilemapLayer;if(l){var p=l.gidMap[this.index];if(p)return p}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var l=this.tilemapLayer;return l?l.tilemap:null}}});r.exports=a},89797:(r,m,e)=>{var u=e(14556),g=e(56694),c=e(75606),s=e(93560),o=e(72632),a=e(94990),l=e(46422),p=e(12920),h=e(52257),f=e(72677),v=e(13747),y=e(29633),x=e(5047),S=e(87177),E=e(47975),b=new g({initialize:function(P,C){this.scene=P,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tiles=C.tiles,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var w=this.orientation;this._convert={WorldToTileXY:x.GetWorldToTileXYFunction(w),WorldToTileX:x.GetWorldToTileXFunction(w),WorldToTileY:x.GetWorldToTileYFunction(w),TileToWorldXY:x.GetTileToWorldXYFunction(w),TileToWorldX:x.GetTileToWorldXFunction(w),TileToWorldY:x.GetTileToWorldYFunction(w),GetTileCorners:x.GetTileCornersFunction(w)}},setRenderOrder:function(T){var P=["right-down","left-down","right-up","left-up"];return typeof T=="number"&&(T=P[T]),P.indexOf(T)>-1&&(this.renderOrder=T),this},addTilesetImage:function(T,P,C,w,A,R,I,L){if(T===void 0)return null;if(P==null&&(P=T),!this.scene.sys.textures.exists(P))return console.warn("Invalid Tileset Image: "+P),null;var O=this.scene.sys.textures.get(P),D=this.getTilesetIndex(T);if(D===null&&this.format===s.TILED_JSON)return console.warn("No data found for Tileset: "+T),null;var V=this.tilesets[D];return V?(V.setTileSize(C,w),V.setSpacing(A,R),V.setImage(O),V):(C===void 0&&(C=this.tileWidth),w===void 0&&(w=this.tileHeight),A===void 0&&(A=0),R===void 0&&(R=0),I===void 0&&(I=0),L===void 0&&(L={x:0,y:0}),V=new E(T,I,C,w,A,R,void 0,void 0,L),V.setImage(O),this.tilesets.push(V),this.tiles=u(this),V)},copy:function(T,P,C,w,A,R,I,L){return L=this.getLayer(L),L!==null?(x.Copy(T,P,C,w,A,R,I,L),this):null},createBlankLayer:function(T,P,C,w,A,R,I,L){C===void 0&&(C=0),w===void 0&&(w=0),A===void 0&&(A=this.width),R===void 0&&(R=this.height),I===void 0&&(I=this.tileWidth),L===void 0&&(L=this.tileHeight);var O=this.getLayerIndex(T);if(O!==null)return console.warn("Invalid Tilemap Layer ID: "+T),null;for(var D=new a({name:T,tileWidth:I,tileHeight:L,width:A,height:R,orientation:this.orientation}),V,B=0;B<R;B++){V=[];for(var U=0;U<A;U++)V.push(new y(D,-1,U,B,I,L,this.tileWidth,this.tileHeight));D.data.push(V)}this.layers.push(D),this.currentLayerIndex=this.layers.length-1;var W=new S(this.scene,this,this.currentLayerIndex,P,C,w);return W.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(W),W},createLayer:function(T,P,C,w){var A=this.getLayerIndex(T);if(A===null)return console.warn("Invalid Tilemap Layer ID: "+T),typeof T=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var R=this.layers[A];if(R.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+T),null;this.currentLayerIndex=A,C===void 0&&(C=R.x),w===void 0&&(w=R.y);var I=new S(this.scene,this,A,P,C,w);return I.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(I),I},createFromObjects:function(T,P,C){C===void 0&&(C=!0);var w=[],A=this.getObjectLayer(T);if(!A)return console.warn("createFromObjects: Invalid objectLayerName given: "+T),w;var R=new l(C?this.tilesets:void 0);Array.isArray(P)||(P=[P]);for(var I=A.objects,L=0;L<P.length;L++){var O=P[L],D=o(O,"id",null),V=o(O,"gid",null),B=o(O,"name",null),U=o(O,"type",null);R.enabled=!o(O,"ignoreTileset",null);for(var W,F=[],G=0;G<I.length;G++)W=I[G],(D===null&&V===null&&B===null&&U===null||D!==null&&W.id===D||V!==null&&W.gid===V||B!==null&&W.name===B||U!==null&&R.getTypeIncludingTile(W)===U)&&F.push(W);for(var M=o(O,"classType",v),N=o(O,"scene",this.scene),k=o(O,"container",null),z=o(O,"key",null),H=o(O,"frame",null),$=0;$<F.length;$++){W=F[$];var X=new M(N);if(X.setName(W.name),X.setPosition(W.x,W.y),R.setTextureAndFrame(X,z,H,W),W.width&&(X.displayWidth=W.width),W.height&&(X.displayHeight=W.height),this.orientation===p.ISOMETRIC){var Y=this.tileWidth/this.tileHeight,j={x:X.x-X.y,y:(X.x+X.y)/Y};X.x=j.x,X.y=j.y}var J={x:X.originX*W.width,y:(X.originY-(W.gid?1:0))*W.height};if(W.rotation){var Q=c(W.rotation);h(J,Q),X.rotation=Q}X.x+=J.x,X.y+=J.y,(W.flippedHorizontal!==void 0||W.flippedVertical!==void 0)&&X.setFlip(W.flippedHorizontal,W.flippedVertical),W.visible||(X.visible=!1),R.setPropertiesFromTiledObject(X,W),k?k.add(X):N.add.existing(X),w.push(X)}}return w},createFromTiles:function(T,P,C,w,A,R){return R=this.getLayer(R),R===null?null:x.CreateFromTiles(T,P,C,w,A,R)},fill:function(T,P,C,w,A,R,I){return R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:(x.Fill(T,P,C,w,A,R,I),this)},filterObjects:function(T,P,C){if(typeof T=="string"){var w=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+w),null}return T.objects.filter(P,C)},filterTiles:function(T,P,C,w,A,R,I,L){return L=this.getLayer(L),L===null?null:x.FilterTiles(T,P,C,w,A,R,I,L)},findByIndex:function(T,P,C,w){return w=this.getLayer(w),w===null?null:x.FindByIndex(T,P,C,w)},findObject:function(T,P,C){if(typeof T=="string"){var w=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+w),null}return T.objects.find(P,C)||null},findTile:function(T,P,C,w,A,R,I,L){return L=this.getLayer(L),L===null?null:x.FindTile(T,P,C,w,A,R,I,L)},forEachTile:function(T,P,C,w,A,R,I,L){return L=this.getLayer(L),L===null?null:(x.ForEachTile(T,P,C,w,A,R,I,L),this)},getImageIndex:function(T){return this.getIndex(this.images,T)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(T){return T.name})},getIndex:function(T,P){for(var C=0;C<T.length;C++)if(T[C].name===P)return C;return null},getLayer:function(T){var P=this.getLayerIndex(T);return P!==null?this.layers[P]:null},getObjectLayer:function(T){var P=this.getIndex(this.objects,T);return P!==null?this.objects[P]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(T){return T.name})},getLayerIndex:function(T){return T===void 0?this.currentLayerIndex:typeof T=="string"?this.getLayerIndexByName(T):typeof T=="number"&&T<this.layers.length?T:T instanceof S&&T.tilemap===this?T.layerIndex:null},getLayerIndexByName:function(T){return this.getIndex(this.layers,T)},getTileAt:function(T,P,C,w){return w=this.getLayer(w),w===null?null:x.GetTileAt(T,P,C,w)},getTileAtWorldXY:function(T,P,C,w,A){return A=this.getLayer(A),A===null?null:x.GetTileAtWorldXY(T,P,C,w,A)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(T){return T.name})},getTilesWithin:function(T,P,C,w,A,R){return R=this.getLayer(R),R===null?null:x.GetTilesWithin(T,P,C,w,A,R)},getTilesWithinShape:function(T,P,C,w){return w=this.getLayer(w),w===null?null:x.GetTilesWithinShape(T,P,C,w)},getTilesWithinWorldXY:function(T,P,C,w,A,R,I){return I=this.getLayer(I),I===null?null:x.GetTilesWithinWorldXY(T,P,C,w,A,R,I)},getTileset:function(T){var P=this.getIndex(this.tilesets,T);return P!==null?this.tilesets[P]:null},getTilesetIndex:function(T){return this.getIndex(this.tilesets,T)},hasTileAt:function(T,P,C){return C=this.getLayer(C),C===null?null:x.HasTileAt(T,P,C)},hasTileAtWorldXY:function(T,P,C,w){return w=this.getLayer(w),w===null?null:x.HasTileAtWorldXY(T,P,C,w)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(T){this.setLayer(T)}},putTileAt:function(T,P,C,w,A){return w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:x.PutTileAt(T,P,C,w,A)},putTileAtWorldXY:function(T,P,C,w,A,R){return w===void 0&&(w=!0),R=this.getLayer(R),R===null?null:x.PutTileAtWorldXY(T,P,C,w,A,R)},putTilesAt:function(T,P,C,w,A){return w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:(x.PutTilesAt(T,P,C,w,A),this)},randomize:function(T,P,C,w,A,R){return R=this.getLayer(R),R===null?null:(x.Randomize(T,P,C,w,A,R),this)},calculateFacesAt:function(T,P,C){return C=this.getLayer(C),C===null?null:(x.CalculateFacesAt(T,P,C),this)},calculateFacesWithin:function(T,P,C,w,A){return A=this.getLayer(A),A===null?null:(x.CalculateFacesWithin(T,P,C,w,A),this)},removeLayer:function(T){var P=this.getLayerIndex(T);if(P!==null){f(this.layers,P);for(var C=P;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===P&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(T){var P=this.getLayerIndex(T);return P!==null?(T=this.layers[P],T.tilemapLayer.destroy(),f(this.layers,P),this.currentLayerIndex===P&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var T=this.layers,P=0;P<T.length;P++)T[P].tilemapLayer&&T[P].tilemapLayer.destroy(!1);return T.length=0,this.currentLayerIndex=0,this},removeTile:function(T,P,C){P===void 0&&(P=-1),C===void 0&&(C=!0);var w=[];Array.isArray(T)||(T=[T]);for(var A=0;A<T.length;A++){var R=T[A];w.push(this.removeTileAt(R.x,R.y,!0,C,R.tilemapLayer)),P>-1&&this.putTileAt(P,R.x,R.y,C,R.tilemapLayer)}return w},removeTileAt:function(T,P,C,w,A){return C===void 0&&(C=!0),w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:x.RemoveTileAt(T,P,C,w,A)},removeTileAtWorldXY:function(T,P,C,w,A,R){return C===void 0&&(C=!0),w===void 0&&(w=!0),R=this.getLayer(R),R===null?null:x.RemoveTileAtWorldXY(T,P,C,w,A,R)},renderDebug:function(T,P,C){return C=this.getLayer(C),C===null?null:(this.orientation===p.ORTHOGONAL&&x.RenderDebug(T,P,C),this)},renderDebugFull:function(T,P){for(var C=this.layers,w=0;w<C.length;w++)x.RenderDebug(T,P,C[w]);return this},replaceByIndex:function(T,P,C,w,A,R,I){return I=this.getLayer(I),I===null?null:(x.ReplaceByIndex(T,P,C,w,A,R,I),this)},setCollision:function(T,P,C,w,A){return P===void 0&&(P=!0),C===void 0&&(C=!0),A===void 0&&(A=!0),w=this.getLayer(w),w===null?null:(x.SetCollision(T,P,C,w,A),this)},setCollisionBetween:function(T,P,C,w,A){return C===void 0&&(C=!0),w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:(x.SetCollisionBetween(T,P,C,w,A),this)},setCollisionByProperty:function(T,P,C,w){return P===void 0&&(P=!0),C===void 0&&(C=!0),w=this.getLayer(w),w===null?null:(x.SetCollisionByProperty(T,P,C,w),this)},setCollisionByExclusion:function(T,P,C,w){return P===void 0&&(P=!0),C===void 0&&(C=!0),w=this.getLayer(w),w===null?null:(x.SetCollisionByExclusion(T,P,C,w),this)},setCollisionFromCollisionGroup:function(T,P,C){return T===void 0&&(T=!0),P===void 0&&(P=!0),C=this.getLayer(C),C===null?null:(x.SetCollisionFromCollisionGroup(T,P,C),this)},setTileIndexCallback:function(T,P,C,w){return w=this.getLayer(w),w===null?null:(x.SetTileIndexCallback(T,P,C,w),this)},setTileLocationCallback:function(T,P,C,w,A,R,I){return I=this.getLayer(I),I===null?null:(x.SetTileLocationCallback(T,P,C,w,A,R,I),this)},setLayer:function(T){var P=this.getLayerIndex(T);return P!==null&&(this.currentLayerIndex=P),this},setBaseTileSize:function(T,P){this.tileWidth=T,this.tileHeight=P,this.widthInPixels=this.width*T,this.heightInPixels=this.height*P;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=T,this.layers[C].baseTileHeight=P;for(var w=this.layers[C].data,A=this.layers[C].width,R=this.layers[C].height,I=0;I<R;I++)for(var L=0;L<A;L++){var O=w[I][L];O!==null&&O.setSize(void 0,void 0,T,P)}}return this},setLayerTileSize:function(T,P,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=T,C.tileHeight=P;for(var w=C.data,A=C.width,R=C.height,I=0;I<R;I++)for(var L=0;L<A;L++){var O=w[I][L];O!==null&&O.setSize(T,P)}return this},shuffle:function(T,P,C,w,A){return A=this.getLayer(A),A===null?null:(x.Shuffle(T,P,C,w,A),this)},swapByIndex:function(T,P,C,w,A,R,I){return I=this.getLayer(I),I===null?null:(x.SwapByIndex(T,P,C,w,A,R,I),this)},tileToWorldX:function(T,P,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(T,P,C)},tileToWorldY:function(T,P,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(T,P,C)},tileToWorldXY:function(T,P,C,w,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldXY(T,P,C,w,A)},getTileCorners:function(T,P,C,w){return w=this.getLayer(w),w===null?null:this._convert.GetTileCorners(T,P,C,w)},weightedRandomize:function(T,P,C,w,A,R){return R=this.getLayer(R),R===null?null:(x.WeightedRandomize(P,C,w,A,T,R),this)},worldToTileX:function(T,P,C,w){return w=this.getLayer(w),w===null?null:this._convert.WorldToTileX(T,P,C,w)},worldToTileY:function(T,P,C,w){return w=this.getLayer(w),w===null?null:this._convert.WorldToTileY(T,P,C,w)},worldToTileXY:function(T,P,C,w,A,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileXY(T,P,C,w,A,R)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});r.exports=b},4843:(r,m,e)=>{var u=e(99325),g=e(15043);u.register("tilemap",function(c){var s=c!==void 0?c:{};return g(this.scene,s.key,s.tileWidth,s.tileHeight,s.width,s.height,s.data,s.insertNull)})},37940:(r,m,e)=>{var u=e(61286),g=e(15043);u.register("tilemap",function(c,s,o,a,l,p,h){return c===null&&(c=void 0),s===null&&(s=void 0),o===null&&(o=void 0),a===null&&(a=void 0),l===null&&(l=void 0),g(this.scene,c,s,o,a,l,p,h)})},87177:(r,m,e)=>{var u=e(56694),g=e(64937),c=e(89980),s=e(5047),o=e(96193),a=e(93736),l=new u({Extends:c,Mixins:[g.Alpha,g.BlendMode,g.ComputedSize,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.Transform,g.Visible,g.ScrollFactor,o],initialize:function(h,f,v,y,x,S){c.call(this,h,"TilemapLayer"),this.isTilemap=!0,this.tilemap=f,this.layerIndex=v,this.layer=f.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=s.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new a,this.setTilesets(y),this.setAlpha(this.layer.alpha),this.setPosition(x,S),this.setOrigin(0,0),this.setSize(f.tileWidth*this.layer.width,f.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(p){var h=[],f=[],v=this.tilemap;Array.isArray(p)||(p=[p]);for(var y=0;y<p.length;y++){var x=p[y];if(typeof x=="string"&&(x=v.getTileset(x)),x){f.push(x);for(var S=x.firstgid,E=0;E<x.total;E++)h[S+E]=x}}this.gidMap=h,this.tileset=f},setRenderOrder:function(p){var h=["right-down","left-down","right-up","left-up"];return typeof p=="string"&&(p=h.indexOf(p)),p>=0&&p<4&&(this._renderOrder=p),this},calculateFacesAt:function(p,h){return s.CalculateFacesAt(p,h,this.layer),this},calculateFacesWithin:function(p,h,f,v){return s.CalculateFacesWithin(p,h,f,v,this.layer),this},createFromTiles:function(p,h,f,v,y){return s.CreateFromTiles(p,h,f,v,y,this.layer)},cull:function(p){return this.cullCallback(this.layer,p,this.culledTiles,this._renderOrder)},copy:function(p,h,f,v,y,x,S){return s.Copy(p,h,f,v,y,x,S,this.layer),this},fill:function(p,h,f,v,y,x){return s.Fill(p,h,f,v,y,x,this.layer),this},filterTiles:function(p,h,f,v,y,x,S){return s.FilterTiles(p,h,f,v,y,x,S,this.layer)},findByIndex:function(p,h,f){return s.FindByIndex(p,h,f,this.layer)},findTile:function(p,h,f,v,y,x,S){return s.FindTile(p,h,f,v,y,x,S,this.layer)},forEachTile:function(p,h,f,v,y,x,S){return s.ForEachTile(p,h,f,v,y,x,S,this.layer),this},setTint:function(p,h,f,v,y,x){p===void 0&&(p=16777215);var S=function(E){E.tint=p};return this.forEachTile(S,this,h,f,v,y,x)},getTileAt:function(p,h,f){return s.GetTileAt(p,h,f,this.layer)},getTileAtWorldXY:function(p,h,f,v){return s.GetTileAtWorldXY(p,h,f,v,this.layer)},getIsoTileAtWorldXY:function(p,h,f,v,y){f===void 0&&(f=!0);var x=this.tempVec;return s.IsometricWorldToTileXY(p,h,!0,x,y,this.layer,f),this.getTileAt(x.x,x.y,v)},getTilesWithin:function(p,h,f,v,y){return s.GetTilesWithin(p,h,f,v,y,this.layer)},getTilesWithinShape:function(p,h,f){return s.GetTilesWithinShape(p,h,f,this.layer)},getTilesWithinWorldXY:function(p,h,f,v,y,x){return s.GetTilesWithinWorldXY(p,h,f,v,y,x,this.layer)},hasTileAt:function(p,h){return s.HasTileAt(p,h,this.layer)},hasTileAtWorldXY:function(p,h,f){return s.HasTileAtWorldXY(p,h,f,this.layer)},putTileAt:function(p,h,f,v){return s.PutTileAt(p,h,f,v,this.layer)},putTileAtWorldXY:function(p,h,f,v,y){return s.PutTileAtWorldXY(p,h,f,v,y,this.layer)},putTilesAt:function(p,h,f,v){return s.PutTilesAt(p,h,f,v,this.layer),this},randomize:function(p,h,f,v,y){return s.Randomize(p,h,f,v,y,this.layer),this},removeTileAt:function(p,h,f,v){return s.RemoveTileAt(p,h,f,v,this.layer)},removeTileAtWorldXY:function(p,h,f,v,y){return s.RemoveTileAtWorldXY(p,h,f,v,y,this.layer)},renderDebug:function(p,h){return s.RenderDebug(p,h,this.layer),this},replaceByIndex:function(p,h,f,v,y,x){return s.ReplaceByIndex(p,h,f,v,y,x,this.layer),this},setSkipCull:function(p){return p===void 0&&(p=!0),this.skipCull=p,this},setCullPadding:function(p,h){return p===void 0&&(p=1),h===void 0&&(h=1),this.cullPaddingX=p,this.cullPaddingY=h,this},setCollision:function(p,h,f,v){return s.SetCollision(p,h,f,this.layer,v),this},setCollisionBetween:function(p,h,f,v){return s.SetCollisionBetween(p,h,f,v,this.layer),this},setCollisionByProperty:function(p,h,f){return s.SetCollisionByProperty(p,h,f,this.layer),this},setCollisionByExclusion:function(p,h,f){return s.SetCollisionByExclusion(p,h,f,this.layer),this},setCollisionFromCollisionGroup:function(p,h){return s.SetCollisionFromCollisionGroup(p,h,this.layer),this},setTileIndexCallback:function(p,h,f){return s.SetTileIndexCallback(p,h,f,this.layer),this},setTileLocationCallback:function(p,h,f,v,y,x){return s.SetTileLocationCallback(p,h,f,v,y,x,this.layer),this},shuffle:function(p,h,f,v){return s.Shuffle(p,h,f,v,this.layer),this},swapByIndex:function(p,h,f,v,y,x){return s.SwapByIndex(p,h,f,v,y,x,this.layer),this},tileToWorldX:function(p,h){return this.tilemap.tileToWorldX(p,h,this)},tileToWorldY:function(p,h){return this.tilemap.tileToWorldY(p,h,this)},tileToWorldXY:function(p,h,f,v){return this.tilemap.tileToWorldXY(p,h,f,v,this)},getTileCorners:function(p,h,f){return this.tilemap.getTileCorners(p,h,f,this)},weightedRandomize:function(p,h,f,v,y){return s.WeightedRandomize(h,f,v,y,p,this.layer),this},worldToTileX:function(p,h,f){return this.tilemap.worldToTileX(p,h,f,this)},worldToTileY:function(p,h,f){return this.tilemap.worldToTileY(p,h,f,this)},worldToTileXY:function(p,h,f,v,y){return this.tilemap.worldToTileXY(p,h,f,v,y,this)},destroy:function(p){p===void 0&&(p=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),p&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],c.prototype.destroy.call(this))}});r.exports=l},17394:(r,m,e)=>{var u=e(69360),g=new u,c=new u,s=new u,o=function(a,l,p,h){var f=l.cull(p),v=f.length,y=p.alpha*l.alpha;if(!(v===0||y<=0)){var x=g,S=c,E=s;S.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY),x.copyFrom(p.matrix);var b=a.currentContext,T=l.gidMap;b.save(),h?(x.multiplyWithOffset(h,-p.scrollX*l.scrollFactorX,-p.scrollY*l.scrollFactorY),S.e=l.x,S.f=l.y,x.multiply(S,E),E.copyToContext(b)):(S.e-=p.scrollX*l.scrollFactorX,S.f-=p.scrollY*l.scrollFactorY,S.copyToContext(b)),(!a.antialias||l.scaleX>1||l.scaleY>1)&&(b.imageSmoothingEnabled=!1);for(var P=0;P<v;P++){var C=f[P],w=T[C.index];if(w){var A=w.image.getSourceImage(),R=w.getTileTextureCoordinates(C.index),I=w.tileWidth,L=w.tileHeight;if(!(R===null||I===0||L===0)){var O=I*.5,D=L*.5;R.x+=w.tileOffset.x,R.y+=w.tileOffset.y,b.save(),b.translate(C.pixelX+O,C.pixelY+D),C.rotation!==0&&b.rotate(C.rotation),(C.flipX||C.flipY)&&b.scale(C.flipX?-1:1,C.flipY?-1:1),b.globalAlpha=y*C.alpha,b.drawImage(A,R.x,R.y,I,L,-O,-D,I,L),b.restore()}}}b.restore()}};r.exports=o},96193:(r,m,e)=>{var u=e(72283),g=u,c=u;g=e(51395),c=e(17394),r.exports={renderWebGL:g,renderCanvas:c}},51395:(r,m,e)=>{var u=e(75512),g=function(c,s,o){var a=s.cull(o),l=a.length,p=o.alpha*s.alpha;if(!(l===0||p<=0)){var h=s.gidMap,f=c.pipelines.set(s.pipeline,s),v=u.getTintAppendFloatAlpha,y=s.scrollFactorX,x=s.scrollFactorY,S=s.x,E=s.y,b=s.scaleX,T=s.scaleY;c.pipelines.preBatch(s);for(var P=0;P<l;P++){var C=a[P],w=h[C.index];if(w){var A=w.getTileTextureCoordinates(C.index);if(A!==null){var R=w.glTexture,I=f.setTexture2D(R,s),L=w.tileWidth,O=w.tileHeight,D=A.x,V=A.y,B=w.tileWidth*.5,U=w.tileHeight*.5,W=w.tileOffset.x,F=w.tileOffset.y,G=v(C.tint,p*C.alpha);f.batchTexture(s,R,R.width,R.height,S+C.pixelX*b+(B*b-W),E+C.pixelY*T+(U*T-F),C.width,C.height,b,T,C.rotation,C.flipX,C.flipY,y,x,B,U,D,V,L,O,G,G,G,G,!1,0,0,o,null,!0,I)}}}c.pipelines.postBatch(s)}};r.exports=g},47975:(r,m,e)=>{var u=e(56694),g=e(93736),c=new u({initialize:function(o,a,l,p,h,f,v,y,x){(l===void 0||l<=0)&&(l=32),(p===void 0||p<=0)&&(p=32),h===void 0&&(h=0),f===void 0&&(f=0),v===void 0&&(v={}),y===void 0&&(y={}),this.name=o,this.firstgid=a,this.tileWidth=l,this.tileHeight=p,this.tileMargin=h,this.tileSpacing=f,this.tileProperties=v,this.tileData=y,this.tileOffset=new g,x!==void 0&&this.tileOffset.set(x.x,x.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(s){return this.containsTileIndex(s)?this.tileProperties[s-this.firstgid]:null},getTileData:function(s){return this.containsTileIndex(s)?this.tileData[s-this.firstgid]:null},getTileCollisionGroup:function(s){var o=this.getTileData(s);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(s){return s>=this.firstgid&&s<this.firstgid+this.total},getTileTextureCoordinates:function(s){return this.containsTileIndex(s)?this.texCoordinates[s-this.firstgid]:null},setImage:function(s){return this.image=s,this.glTexture=s.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(s,o){return s!==void 0&&(this.tileWidth=s),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(s,o){return s!==void 0&&(this.tileMargin=s),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(s,o){var a=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(s-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(a%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),a=Math.floor(a),l=Math.floor(l),this.rows=a,this.columns=l,this.total=a*l,this.texCoordinates.length=0;for(var p=this.tileMargin,h=this.tileMargin,f=0;f<this.rows;f++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:p,y:h}),p+=this.tileWidth+this.tileSpacing;p=this.tileMargin,h+=this.tileHeight+this.tileSpacing}return this}});r.exports=c},92839:(r,m,e)=>{var u=e(15494),g=function(c,s,o){var a=u(c,s,!0,o),l=u(c,s-1,!0,o),p=u(c,s+1,!0,o),h=u(c-1,s,!0,o),f=u(c+1,s,!0,o),v=a&&a.collides;return v&&(a.faceTop=!0,a.faceBottom=!0,a.faceLeft=!0,a.faceRight=!0),l&&l.collides&&(v&&(a.faceTop=!1),l.faceBottom=!v),p&&p.collides&&(v&&(a.faceBottom=!1),p.faceTop=!v),h&&h.collides&&(v&&(a.faceLeft=!1),h.faceRight=!v),f&&f.collides&&(v&&(a.faceRight=!1),f.faceLeft=!v),a&&!a.collides&&a.resetFaces(),a};r.exports=g},60386:(r,m,e)=>{var u=e(15494),g=e(50811),c=function(s,o,a,l,p){for(var h=null,f=null,v=null,y=null,x=g(s,o,a,l,null,p),S=0;S<x.length;S++){var E=x[S];E&&(E.collides?(h=u(E.x,E.y-1,!0,p),f=u(E.x,E.y+1,!0,p),v=u(E.x-1,E.y,!0,p),y=u(E.x+1,E.y,!0,p),E.faceTop=!(h&&h.collides),E.faceBottom=!(f&&f.collides),E.faceLeft=!(v&&v.collides),E.faceRight=!(y&&y.collides)):E.resetFaces())}};r.exports=c},13125:(r,m,e)=>{var u=e(93736),g=new u,c=function(s,o,a,l){var p=a.tilemapLayer,h=p.cullPaddingX,f=p.cullPaddingY,v=p.tilemap.tileToWorldXY(s,o,g,l,p);return v.x>l.worldView.x+p.scaleX*a.tileWidth*(-h-.5)&&v.x<l.worldView.right+p.scaleX*a.tileWidth*(h-.5)&&v.y>l.worldView.y+p.scaleY*a.tileHeight*(-f-1)&&v.y<l.worldView.bottom+p.scaleY*a.tileHeight*(f-.5)};r.exports=c},17347:(r,m,e)=>{var u=e(60386),g=e(50811),c=e(62839),s=e(29633),o=function(a,l,p,h,f,v,y,x){y===void 0&&(y=!0);var S=g(a,l,p,h,null,x),E=[];S.forEach(function(R){var I=new s(R.layer,R.index,R.x,R.y,R.width,R.height,R.baseWidth,R.baseHeight);I.copy(R),E.push(I)});for(var b=f-a,T=v-l,P=0;P<E.length;P++){var C=E[P],w=C.x+b,A=C.y+T;c(w,A,x)&&x.data[A][w]&&(C.x=w,C.y=A,C.updatePixelXY(),x.data[A][w]=C)}y&&u(f-1,v-1,p+2,h+2,x),S.length=0,E.length=0};r.exports=o},93604:(r,m,e)=>{var u=e(50811),g=e(51202),c=function(s,o,a,l,p,h){a||(a={}),Array.isArray(s)||(s=[s]);var f=h.tilemapLayer;l||(l=f.scene),p||(p=l.cameras.main);var v=u(0,0,h.width,h.height,null,h),y=[],x;for(x=0;x<v.length;x++){var S=v[x];if(s.indexOf(S.index)!==-1){var E=f.tileToWorldXY(S.x,S.y,void 0,p,h);a.x=E.x,a.y=E.y,y.push(l.make.sprite(a))}}if(typeof o=="number")for(x=0;x<s.length;x++)g(s[x],o,0,0,h.width,h.height,h);else if(Array.isArray(o))for(x=0;x<s.length;x++)g(s[x],o[x],0,0,h.width,h.height,h);return y};r.exports=c},71586:(r,m,e)=>{var u=e(74118),g=e(82127),c=e(84314),s=new u,o=function(a,l){var p=a.tilemapLayer.tilemap,h=a.tilemapLayer,f=Math.floor(p.tileWidth*h.scaleX),v=Math.floor(p.tileHeight*h.scaleY),y=c(l.worldView.x-h.x,f,0,!0)-h.cullPaddingX,x=g(l.worldView.right-h.x,f,0,!0)+h.cullPaddingX,S=c(l.worldView.y-h.y,v,0,!0)-h.cullPaddingY,E=g(l.worldView.bottom-h.y,v,0,!0)+h.cullPaddingY;return s.setTo(y,S,x-y,E-S)};r.exports=o},381:(r,m,e)=>{var u=e(71586),g=e(6987),c=function(s,o,a,l){a===void 0&&(a=[]),l===void 0&&(l=0),a.length=0;var p=s.tilemapLayer,h=u(s,o);return(p.skipCull||p.scrollFactorX!==1||p.scrollFactorY!==1)&&(h.left=0,h.right=s.width,h.top=0,h.bottom=s.height),g(s,h,l,a),a};r.exports=c},97734:(r,m,e)=>{var u=e(50811),g=e(60386),c=e(68234),s=function(o,a,l,p,h,f,v){for(var y=v.collideIndexes.indexOf(o)!==-1,x=u(a,l,p,h,null,v),S=0;S<x.length;S++)x[S].index=o,c(x[S],y);f&&g(a-1,l-1,p+2,h+2,v)};r.exports=s},63555:(r,m,e)=>{var u=e(50811),g=function(c,s,o,a,l,p,h,f){var v=u(o,a,l,p,h,f);return v.filter(c,s)};r.exports=g},37982:r=>{var m=function(e,u,g,c){u===void 0&&(u=0),g===void 0&&(g=!1);var s=0,o,a,l;if(g){for(a=c.height-1;a>=0;a--)for(o=c.width-1;o>=0;o--)if(l=c.data[a][o],l&&l.index===e){if(s===u)return l;s+=1}}else for(a=0;a<c.height;a++)for(o=0;o<c.width;o++)if(l=c.data[a][o],l&&l.index===e){if(s===u)return l;s+=1}return null};r.exports=m},48297:(r,m,e)=>{var u=e(50811),g=function(c,s,o,a,l,p,h,f){var v=u(o,a,l,p,h,f);return v.find(c,s)||null};r.exports=g},80916:(r,m,e)=>{var u=e(50811),g=function(c,s,o,a,l,p,h,f){var v=u(o,a,l,p,h,f);v.forEach(c,s)};r.exports=g},31493:(r,m,e)=>{var u=e(12920),g=e(381),c=e(37524),s=e(20887),o=e(72283),a=e(19242),l=function(p){return p===u.ORTHOGONAL?g:p===u.HEXAGONAL?c:p===u.STAGGERED?a:p===u.ISOMETRIC?s:o};r.exports=l},15494:(r,m,e)=>{var u=e(62839),g=function(c,s,o,a){if(o===void 0&&(o=!1),u(c,s,a)){var l=a.data[s][c]||null;return l?l.index===-1?o?l:null:l:null}else return null};r.exports=g},24640:(r,m,e)=>{var u=e(15494),g=e(93736),c=new g,s=function(o,a,l,p,h){return h.tilemapLayer.worldToTileXY(o,a,!0,c,p),u(c.x,c.y,l,h)};r.exports=s},48495:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a){var l=a.baseTileWidth,p=a.baseTileHeight,h=a.tilemapLayer,f=0,v=0;h&&(o||(o=h.scene.cameras.main),f=h.x+o.scrollX*(1-h.scrollFactorX),v=h.y+o.scrollY*(1-h.scrollFactorY),l*=h.scaleX,p*=h.scaleY);var y=f+c*l,x=v+s*p;return[new u(y,x),new u(y+l,x),new u(y+l,x+p),new u(y,x+p)]};r.exports=g},7160:(r,m,e)=>{var u=e(12920),g=e(63634),c=e(72283),s=e(48495),o=function(a){return a===u.ORTHOGONAL?s:a===u.ISOMETRIC?c:a===u.HEXAGONAL?g:(a===u.STAGGERED,c)};r.exports=o},16884:(r,m,e)=>{var u=e(12920),g=e(72283),c=e(44150),s=function(o){return o===u.ORTHOGONAL?c:g};r.exports=s},68182:(r,m,e)=>{var u=e(12920),g=e(21715),c=e(21808),s=e(72283),o=e(33388),a=e(46836),l=function(p){return p===u.ORTHOGONAL?a:p===u.ISOMETRIC?c:p===u.HEXAGONAL?g:p===u.STAGGERED?o:s};r.exports=l},3752:(r,m,e)=>{var u=e(12920),g=e(72283),c=e(84132),s=e(42477),o=function(a){return a===u.ORTHOGONAL?s:a===u.STAGGERED?c:g};r.exports=o},50811:(r,m,e)=>{var u=e(72632),g=function(c,s,o,a,l,p){c===void 0&&(c=0),s===void 0&&(s=0),o===void 0&&(o=p.width),a===void 0&&(a=p.height),l||(l={});var h=u(l,"isNotEmpty",!1),f=u(l,"isColliding",!1),v=u(l,"hasInterestingFace",!1);c<0&&(o+=c,c=0),s<0&&(a+=s,s=0),c+o>p.width&&(o=Math.max(p.width-c,0)),s+a>p.height&&(a=Math.max(p.height-s,0));for(var y=[],x=s;x<s+a;x++)for(var S=c;S<c+o;S++){var E=p.data[x][S];if(E!==null){if(h&&E.index===-1||f&&!E.collides||v&&!E.hasInterestingFace)continue;y.push(E)}}return y};r.exports=g},31674:(r,m,e)=>{var u=e(84068),g=e(50811),c=e(7563),s=e(72283),o=e(93736),a=function(v,y){return c.RectangleToTriangle(y,v)},l=new o,p=new o,h=new o,f=function(v,y,x,S){if(v===void 0)return[];var E=s;v instanceof u.Circle?E=c.CircleToRectangle:v instanceof u.Rectangle?E=c.RectangleToRectangle:v instanceof u.Triangle?E=a:v instanceof u.Line&&(E=c.LineToRectangle),S.tilemapLayer.worldToTileXY(v.left,v.top,!0,p,x);var b=p.x,T=p.y;S.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,h,x);var P=Math.ceil(h.x),C=Math.ceil(h.y),w=Math.max(P-b,1),A=Math.max(C-T,1),R=g(b,T,w,A,y,S),I=S.tileWidth,L=S.tileHeight;S.tilemapLayer&&(I*=S.tilemapLayer.scaleX,L*=S.tilemapLayer.scaleY);for(var O=[],D=new u.Rectangle(0,0,I,L),V=0;V<R.length;V++){var B=R[V];S.tilemapLayer.tileToWorldXY(B.x,B.y,l,x),D.x=l.x,D.y=l.y,E(v,D)&&O.push(B)}return O};r.exports=f},44662:(r,m,e)=>{var u=e(50811),g=e(93736),c=new g,s=new g,o=function(a,l,p,h,f,v,y){var x=y.tilemapLayer.tilemap._convert.WorldToTileXY;x(a,l,!0,c,v,y);var S=c.x,E=c.y;x(a+p,l+h,!1,s,v,y);var b=Math.ceil(s.x),T=Math.ceil(s.y);return u(S,E,b-S,T-E,f,y)};r.exports=o},29296:(r,m,e)=>{var u=e(12920),g=e(10618),c=e(806),s=function(o){return o===u.ORTHOGONAL?c:g};r.exports=s},32688:(r,m,e)=>{var u=e(12920),g=e(11516),c=e(18750),s=e(72283),o=e(90562),a=e(45676),l=function(p){return p===u.ORTHOGONAL?a:p===u.ISOMETRIC?c:p===u.HEXAGONAL?g:p===u.STAGGERED?o:s};r.exports=l},74326:(r,m,e)=>{var u=e(12920),g=e(10618),c=e(3689),s=e(70520),o=function(a){return a===u.ORTHOGONAL?s:a===u.STAGGERED?c:g};r.exports=o},46598:(r,m,e)=>{var u=e(62839),g=function(c,s,o){if(u(c,s,o)){var a=o.data[s][c];return a!==null&&a.index>-1}else return!1};r.exports=g},28654:(r,m,e)=>{var u=e(46598),g=e(93736),c=new g,s=function(o,a,l,p){p.tilemapLayer.worldToTileXY(o,a,!0,c,l);var h=c.x,f=c.y;return u(h,f,p)};r.exports=s},6358:(r,m,e)=>{var u=e(82127),g=e(84314),c=function(s,o){var a=s.tilemapLayer.tilemap,l=s.tilemapLayer,p=Math.floor(a.tileWidth*l.scaleX),h=Math.floor(a.tileHeight*l.scaleY),f=s.hexSideLength,v,y,x,S;if(this.staggerAxis==="y"){var E=(h-f)/2+f;v=g(o.worldView.x-l.x,p,0,!0)-l.cullPaddingX,y=u(o.worldView.right-l.x,p,0,!0)+l.cullPaddingX,x=g(o.worldView.y-l.y,E,0,!0)-l.cullPaddingY,S=u(o.worldView.bottom-l.y,E,0,!0)+l.cullPaddingY}else{var b=(p-f)/2+f;v=g(o.worldView.x-l.x,b,0,!0)-l.cullPaddingX,y=u(o.worldView.right-l.x,b,0,!0)+l.cullPaddingX,x=g(o.worldView.y-l.y,h,0,!0)-l.cullPaddingY,S=u(o.worldView.bottom-l.y,h,0,!0)+l.cullPaddingY}return{left:v,right:y,top:x,bottom:S}};r.exports=c},37524:(r,m,e)=>{var u=e(6358),g=e(6987),c=function(s,o,a,l){a===void 0&&(a=[]),l===void 0&&(l=0),a.length=0;var p=s.tilemapLayer,h=u(s,o);return p.skipCull&&p.scrollFactorX===1&&p.scrollFactorY===1&&(h.left=0,h.right=s.width,h.top=0,h.bottom=s.height),g(s,h,l,a),a};r.exports=c},63634:(r,m,e)=>{var u=e(21715),g=e(93736),c=new g,s=function(o,a,l,p){var h=p.baseTileWidth,f=p.baseTileHeight,v=p.tilemapLayer;v&&(h*=v.scaleX,f*=v.scaleY);var y=u(o,a,c,l,p),x=[],S=.5773502691896257,E,b;this.staggerAxis==="y"?(E=S*h,b=f/2):(E=h/2,b=S*f);for(var T=0;T<6;T++){var P=2*Math.PI*(.5-T)/6;x.push(new g(y.x+E*Math.cos(P),y.y+b*Math.sin(P)))}return x};r.exports=s},21715:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l){o||(o=new u);var p=l.baseTileWidth,h=l.baseTileHeight,f=l.tilemapLayer,v=0,y=0;f&&(a||(a=f.scene.cameras.main),v=f.x+a.scrollX*(1-f.scrollFactorX),y=f.y+a.scrollY*(1-f.scrollFactorY),p*=f.scaleX,h*=f.scaleY);var x=p/2,S=h/2,E,b;return this.staggerAxis==="y"?(E=v+p*c+p,b=y+1.5*s*S+S,s%2===0&&(this.staggerIndex==="odd"?E-=x:E+=x)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(E=v+1.5*c*x+x,b=y+h*c+h,c%2===0&&(this.staggerIndex==="odd"?b-=S:b+=S)),o.set(E,b)};r.exports=g},11516:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l,p){a||(a=new u);var h=p.baseTileWidth,f=p.baseTileHeight,v=p.tilemapLayer;v&&(l||(l=v.scene.cameras.main),c=c-(v.x+l.scrollX*(1-v.scrollFactorX)),s=s-(v.y+l.scrollY*(1-v.scrollFactorY)),h*=v.scaleX,f*=v.scaleY);var y=.5773502691896257,x=-.3333333333333333,S=0,E=.6666666666666666,b=h/2,T=f/2,P,C,w,A,R;p.staggerAxis==="y"?(P=(c-b)/(y*h),C=(s-T)/T,w=y*P+x*C,A=S*P+E*C):(P=(c-b)/b,C=(s-T)/(y*f),w=x*P+y*C,A=E*P+S*C),R=-w-A;var I=Math.round(w),L=Math.round(A),O=Math.round(R),D=Math.abs(I-w),V=Math.abs(L-A),B=Math.abs(O-R);D>V&&D>B?I=-L-O:V>B&&(L=-I-O);var U,W=L;return p.staggerIndex==="odd"?U=W%2===0?L/2+I:L/2+I-.5:U=W%2===0?L/2+I:L/2+I+.5,a.set(U,W)};r.exports=g},62839:r=>{var m=function(e,u,g){return e>=0&&e<g.width&&u>=0&&u<g.height};r.exports=m},20887:(r,m,e)=>{var u=e(13125),g=function(c,s,o,a){o===void 0&&(o=[]),a===void 0&&(a=0),o.length=0;var l=c.tilemapLayer,p=c.data,h=c.width,f=c.height,v=l.skipCull,y=0,x=h,S=0,E=f,b,T,P;if(a===0){for(T=S;T<E;T++)for(b=y;b<x;b++)if(v||u(b,T,c,s)){if(P=p[T][b],!P||P.index===-1||!P.visible||P.alpha===0)continue;o.push(P)}}else if(a===1){for(T=S;T<E;T++)for(b=x;b>=y;b--)if(v||u(b,T,c,s)){if(P=p[T][b],!P||P.index===-1||!P.visible||P.alpha===0)continue;o.push(P)}}else if(a===2){for(T=E;T>=S;T--)for(b=y;b<x;b++)if(v||u(b,T,c,s)){if(P=p[T][b],!P||P.index===-1||!P.visible||P.alpha===0)continue;o.push(P)}}else if(a===3){for(T=E;T>=S;T--)for(b=x;b>=y;b--)if(v||u(b,T,c,s)){if(P=p[T][b],!P||P.index===-1||!P.visible||P.alpha===0)continue;o.push(P)}}return l.tilesDrawn=o.length,l.tilesTotal=h*f,o};r.exports=g},21808:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l){o||(o=new u);var p=l.baseTileWidth,h=l.baseTileHeight,f=l.tilemapLayer,v=0,y=0;f&&(a||(a=f.scene.cameras.main),v=f.x+a.scrollX*(1-f.scrollFactorX),p*=f.scaleX,y=f.y+a.scrollY*(1-f.scrollFactorY),h*=f.scaleY);var x=v+(c-s)*(p/2),S=y+(c+s)*(h/2);return o.set(x,S)};r.exports=g},18750:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l,p,h){a||(a=new u);var f=p.baseTileWidth,v=p.baseTileHeight,y=p.tilemapLayer;y&&(l||(l=y.scene.cameras.main),s=s-(y.y+l.scrollY*(1-y.scrollFactorY)),v*=y.scaleY,c=c-(y.x+l.scrollX*(1-y.scrollFactorX)),f*=y.scaleX);var x=f/2,S=v/2;c=c-x,h||(s=s-v);var E=.5*(c/x+s/S),b=.5*(-c/x+s/S);return o&&(E=Math.floor(E),b=Math.floor(b)),a.set(E,b)};r.exports=g},29003:(r,m,e)=>{var u=e(29633),g=e(62839),c=e(92839),s=e(68234),o=function(a,l,p,h,f){if(h===void 0&&(h=!0),!g(l,p,f))return null;var v,y=f.data[p][l],x=y&&y.collides;a instanceof u?(f.data[p][l]===null&&(f.data[p][l]=new u(f,a.index,l,p,f.tileWidth,f.tileHeight)),f.data[p][l].copy(a)):(v=a,f.data[p][l]===null?f.data[p][l]=new u(f,v,l,p,f.tileWidth,f.tileHeight):f.data[p][l].index=v);var S=f.data[p][l],E=f.collideIndexes.indexOf(S.index)!==-1;if(v=a instanceof u?a.index:a,v===-1)S.width=f.tileWidth,S.height=f.tileHeight;else{var b=f.tilemapLayer.tilemap.tiles,T=b[v][2],P=f.tilemapLayer.tileset[T];S.width=P.tileWidth,S.height=P.tileHeight}return s(S,E),h&&x!==S.collides&&c(l,p,f),S};r.exports=o},48565:(r,m,e)=>{var u=e(29003),g=e(93736),c=new g,s=function(o,a,l,p,h,f){return f.tilemapLayer.worldToTileXY(a,l,!0,c,h,f),u(o,c.x,c.y,p,f)};r.exports=s},56547:(r,m,e)=>{var u=e(60386),g=e(29003),c=function(s,o,a,l,p){if(l===void 0&&(l=!0),!Array.isArray(s))return null;Array.isArray(s[0])||(s=[s]);for(var h=s.length,f=s[0].length,v=0;v<h;v++)for(var y=0;y<f;y++){var x=s[v][y];g(x,o+y,a+v,!1,p)}l&&u(o-1,a-1,f+2,h+2,p)};r.exports=c},91180:(r,m,e)=>{var u=e(50811),g=e(72861),c=function(s,o,a,l,p,h){var f,v=u(s,o,a,l,{},h);if(!p)for(p=[],f=0;f<v.length;f++)p.indexOf(v[f].index)===-1&&p.push(v[f].index);for(f=0;f<v.length;f++)v[f].index=g(p)};r.exports=c},929:(r,m,e)=>{var u=e(29633),g=e(62839),c=e(92839),s=function(o,a,l,p,h){if(l===void 0&&(l=!0),p===void 0&&(p=!0),!g(o,a,h))return null;var f=h.data[a][o];if(f)h.data[a][o]=l?null:new u(h,-1,o,a,h.tileWidth,h.tileHeight);else return null;return p&&f&&f.collides&&c(o,a,h),f};r.exports=s},17384:(r,m,e)=>{var u=e(929),g=e(93736),c=new g,s=function(o,a,l,p,h,f){return f.tilemapLayer.worldToTileXY(o,a,!0,c,h,f),u(c.x,c.y,l,p,f)};r.exports=s},93763:(r,m,e)=>{var u=e(50811),g=e(95509),c=new g(105,210,231,150),s=new g(243,134,48,200),o=new g(40,39,37,150),a=function(l,p,h){p===void 0&&(p={});var f=p.tileColor!==void 0?p.tileColor:c,v=p.collidingTileColor!==void 0?p.collidingTileColor:s,y=p.faceColor!==void 0?p.faceColor:o,x=u(0,0,h.width,h.height,null,h);l.translateCanvas(h.tilemapLayer.x,h.tilemapLayer.y),l.scaleCanvas(h.tilemapLayer.scaleX,h.tilemapLayer.scaleY);for(var S=0;S<x.length;S++){var E=x[S],b=E.width,T=E.height,P=E.pixelX,C=E.pixelY,w=E.collides?v:f;w!==null&&(l.fillStyle(w.color,w.alpha/255),l.fillRect(P,C,b,T)),P+=1,C+=1,b-=2,T-=2,y!==null&&(l.lineStyle(1,y.color,y.alpha/255),E.faceTop&&l.lineBetween(P,C,P+b,C),E.faceRight&&l.lineBetween(P+b,C,P+b,C+T),E.faceBottom&&l.lineBetween(P,C+T,P+b,C+T),E.faceLeft&&l.lineBetween(P,C,P,C+T))}};r.exports=a},51202:(r,m,e)=>{var u=e(50811),g=function(c,s,o,a,l,p,h){for(var f=u(o,a,l,p,null,h),v=0;v<f.length;v++)f[v]&&f[v].index===c&&(f[v].index=s)};r.exports=g},6987:r=>{var m=function(e,u,g,c){var s=e.data,o=e.width,a=e.height,l=e.tilemapLayer,p=Math.max(0,u.left),h=Math.min(o,u.right),f=Math.max(0,u.top),v=Math.min(a,u.bottom),y,x,S;if(g===0)for(x=f;x<v;x++)for(y=p;s[x]&&y<h;y++)S=s[x][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&c.push(S);else if(g===1)for(x=f;x<v;x++)for(y=h;s[x]&&y>=p;y--)S=s[x][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&c.push(S);else if(g===2)for(x=v;x>=f;x--)for(y=p;s[x]&&y<h;y++)S=s[x][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&c.push(S);else if(g===3)for(x=v;x>=f;x--)for(y=h;s[x]&&y>=p;y--)S=s[x][y],!(!S||S.index===-1||!S.visible||S.alpha===0)&&c.push(S);return l.tilesDrawn=c.length,l.tilesTotal=o*a,c};r.exports=m},51710:(r,m,e)=>{var u=e(68234),g=e(60386),c=e(91181),s=function(o,a,l,p,h){a===void 0&&(a=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),Array.isArray(o)||(o=[o]);for(var f=0;f<o.length;f++)c(o[f],a,p);if(h)for(var v=0;v<p.height;v++)for(var y=0;y<p.width;y++){var x=p.data[v][y];x&&o.indexOf(x.index)!==-1&&u(x,a)}l&&g(0,0,p.width,p.height,p)};r.exports=s},15216:(r,m,e)=>{var u=e(68234),g=e(60386),c=e(91181),s=function(o,a,l,p,h,f){if(l===void 0&&(l=!0),p===void 0&&(p=!0),f===void 0&&(f=!0),!(o>a)){for(var v=o;v<=a;v++)c(v,l,h);if(f)for(var y=0;y<h.height;y++)for(var x=0;x<h.width;x++){var S=h.data[y][x];S&&S.index>=o&&S.index<=a&&u(S,l)}p&&g(0,0,h.width,h.height,h)}};r.exports=s},33158:(r,m,e)=>{var u=e(68234),g=e(60386),c=e(91181),s=function(o,a,l,p){a===void 0&&(a=!0),l===void 0&&(l=!0),Array.isArray(o)||(o=[o]);for(var h=0;h<p.height;h++)for(var f=0;f<p.width;f++){var v=p.data[h][f];v&&o.indexOf(v.index)===-1&&(u(v,a),c(v.index,a,p))}l&&g(0,0,p.width,p.height,p)};r.exports=s},4180:(r,m,e)=>{var u=e(68234),g=e(60386),c=e(19256),s=function(o,a,l,p){a===void 0&&(a=!0),l===void 0&&(l=!0);for(var h=0;h<p.height;h++)for(var f=0;f<p.width;f++){var v=p.data[h][f];if(v){for(var y in o)if(c(v.properties,y)){var x=o[y];Array.isArray(x)||(x=[x]);for(var S=0;S<x.length;S++)v.properties[y]===x[S]&&u(v,a)}}}l&&g(0,0,p.width,p.height,p)};r.exports=s},18625:(r,m,e)=>{var u=e(68234),g=e(60386),c=function(s,o,a){s===void 0&&(s=!0),o===void 0&&(o=!0);for(var l=0;l<a.height;l++)for(var p=0;p<a.width;p++){var h=a.data[l][p];if(h){var f=h.getCollisionGroup();f&&f.objects&&f.objects.length>0&&u(h,s)}}o&&g(0,0,a.width,a.height,a)};r.exports=c},91181:r=>{var m=function(e,u,g){var c=g.collideIndexes.indexOf(e);u&&c===-1?g.collideIndexes.push(e):!u&&c!==-1&&g.collideIndexes.splice(c,1)};r.exports=m},68234:r=>{var m=function(e,u){u?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};r.exports=m},11628:r=>{var m=function(e,u,g,c){if(typeof e=="number")c.callbacks[e]=u!==null?{callback:u,callbackContext:g}:void 0;else for(var s=0,o=e.length;s<o;s++)c.callbacks[e[s]]=u!==null?{callback:u,callbackContext:g}:void 0};r.exports=m},72732:(r,m,e)=>{var u=e(50811),g=function(c,s,o,a,l,p,h){for(var f=u(c,s,o,a,null,h),v=0;v<f.length;v++)f[v].setCollisionCallback(l,p)};r.exports=g},34397:(r,m,e)=>{var u=e(50811),g=e(18592),c=function(s,o,a,l,p){var h=u(s,o,a,l,null,p),f=h.map(function(y){return y.index});g(f);for(var v=0;v<h.length;v++)h[v].index=f[v]};r.exports=c},53945:(r,m,e)=>{var u=e(82127),g=e(84314),c=function(s,o){var a=s.tilemapLayer.tilemap,l=s.tilemapLayer,p=Math.floor(a.tileWidth*l.scaleX),h=Math.floor(a.tileHeight*l.scaleY),f=g(o.worldView.x-l.x,p,0,!0)-l.cullPaddingX,v=u(o.worldView.right-l.x,p,0,!0)+l.cullPaddingX,y=g(o.worldView.y-l.y,h/2,0,!0)-l.cullPaddingY,x=u(o.worldView.bottom-l.y,h/2,0,!0)+l.cullPaddingY;return{left:f,right:v,top:y,bottom:x}};r.exports=c},19242:(r,m,e)=>{var u=e(53945),g=e(6987),c=function(s,o,a,l){a===void 0&&(a=[]),l===void 0&&(l=0),a.length=0;var p=s.tilemapLayer,h=u(s,o);return p.skipCull&&p.scrollFactorX===1&&p.scrollFactorY===1&&(h.left=0,h.right=s.width,h.top=0,h.bottom=s.height),g(s,h,l,a),a};r.exports=c},33388:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l){o||(o=new u);var p=l.baseTileWidth,h=l.baseTileHeight,f=l.tilemapLayer,v=0,y=0;f&&(a||(a=f.scene.cameras.main),v=f.x+a.scrollX*(1-f.scrollFactorX),p*=f.scaleX,y=f.y+a.scrollY*(1-f.scrollFactorY),h*=f.scaleY);var x=v+c*p+s%2*(p/2),S=y+s*(h/2);return o.set(x,S)};r.exports=g},84132:r=>{var m=function(e,u,g){var c=g.baseTileHeight,s=g.tilemapLayer,o=0;return s&&(u===void 0&&(u=s.scene.cameras.main),o=s.y+u.scrollY*(1-s.scrollFactorY),c*=s.scaleY),o+e*(c/2)+c};r.exports=m},90562:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l,p){a||(a=new u);var h=p.baseTileWidth,f=p.baseTileHeight,v=p.tilemapLayer;v&&(l||(l=v.scene.cameras.main),s=s-(v.y+l.scrollY*(1-v.scrollFactorY)),f*=v.scaleY,c=c-(v.x+l.scrollX*(1-v.scrollFactorX)),h*=v.scaleX);var y=o?Math.floor(s/(f/2)):s/(f/2),x=o?Math.floor((c+y%2*.5*h)/h):(c+y%2*.5*h)/h;return a.set(x,y)};r.exports=g},3689:r=>{var m=function(e,u,g,c){var s=c.baseTileHeight,o=c.tilemapLayer;return o&&(g||(g=o.scene.cameras.main),e=e-(o.y+g.scrollY*(1-o.scrollFactorY)),s*=o.scaleY),u?Math.floor(e/(s/2)):e/(s/2)};r.exports=m},55217:(r,m,e)=>{var u=e(50811),g=function(c,s,o,a,l,p,h){for(var f=u(o,a,l,p,null,h),v=0;v<f.length;v++)f[v]&&(f[v].index===c?f[v].index=s:f[v].index===s&&(f[v].index=c))};r.exports=g},44150:r=>{var m=function(e,u,g){var c=g.baseTileWidth,s=g.tilemapLayer,o=0;return s&&(u||(u=s.scene.cameras.main),o=s.x+u.scrollX*(1-s.scrollFactorX),c*=s.scaleX),o+e*c};r.exports=m},46836:(r,m,e)=>{var u=e(44150),g=e(42477),c=e(93736),s=function(o,a,l,p,h){return l||(l=new c(0,0)),l.x=u(o,p,h),l.y=g(a,p,h),l};r.exports=s},42477:r=>{var m=function(e,u,g){var c=g.baseTileHeight,s=g.tilemapLayer,o=0;return s&&(u||(u=s.scene.cameras.main),o=s.y+u.scrollY*(1-s.scrollFactorY),c*=s.scaleY),o+e*c};r.exports=m},39677:(r,m,e)=>{var u=e(50811),g=function(c,s,o,a,l,p){if(l){var h,f=u(c,s,o,a,null,p),v=0;for(h=0;h<l.length;h++)v+=l[h].weight;if(!(v<=0))for(h=0;h<f.length;h++){for(var y=Math.random()*v,x=0,S=-1,E=0;E<l.length;E++)if(x+=l[E].weight,y<=x){var b=l[E].index;S=Array.isArray(b)?b[Math.floor(Math.random()*b.length)]:b;break}f[h].index=S}}};r.exports=g},806:(r,m,e)=>{var u=e(45676),g=e(93736),c=new g,s=function(o,a,l,p){return u(o,0,a,c,l,p),c.x};r.exports=s},45676:(r,m,e)=>{var u=e(93736),g=function(c,s,o,a,l,p){o===void 0&&(o=!0),a||(a=new u);var h=p.baseTileWidth,f=p.baseTileHeight,v=p.tilemapLayer;v&&(l||(l=v.scene.cameras.main),c=c-(v.x+l.scrollX*(1-v.scrollFactorX)),s=s-(v.y+l.scrollY*(1-v.scrollFactorY)),h*=v.scaleX,f*=v.scaleY);var y=c/h,x=s/f;return o&&(y=Math.floor(y),x=Math.floor(x)),a.set(y,x)};r.exports=g},70520:(r,m,e)=>{var u=e(45676),g=e(93736),c=new g,s=function(o,a,l,p){return u(0,o,a,c,l,p),c.y};r.exports=s},5047:(r,m,e)=>{r.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}},12920:r=>{r.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(r,m,e)=>{var u={ORIENTATION:e(12920)};r.exports=u},52678:(r,m,e)=>{var u=e(98611),g=e(84758),c={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};c=u(!1,c,g.ORIENTATION),r.exports=c},94990:(r,m,e)=>{var u=e(56694),g=e(12920),c=e(72632),s=new u({initialize:function(a){a===void 0&&(a={}),this.name=c(a,"name","layer"),this.x=c(a,"x",0),this.y=c(a,"y",0),this.width=c(a,"width",0),this.height=c(a,"height",0),this.tileWidth=c(a,"tileWidth",0),this.tileHeight=c(a,"tileHeight",0),this.baseTileWidth=c(a,"baseTileWidth",this.tileWidth),this.baseTileHeight=c(a,"baseTileHeight",this.tileHeight),this.orientation=c(a,"orientation",g.ORTHOGONAL),this.widthInPixels=c(a,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=c(a,"heightInPixels",this.height*this.baseTileHeight),this.alpha=c(a,"alpha",1),this.visible=c(a,"visible",!0),this.properties=c(a,"properties",[]),this.indexes=c(a,"indexes",[]),this.collideIndexes=c(a,"collideIndexes",[]),this.callbacks=c(a,"callbacks",[]),this.bodies=c(a,"bodies",[]),this.data=c(a,"data",[]),this.tilemapLayer=c(a,"tilemapLayer",null),this.hexSideLength=c(a,"hexSideLength",0),this.staggerAxis=c(a,"staggerAxis","y"),this.staggerIndex=c(a,"staggerIndex","odd")}});r.exports=s},16586:(r,m,e)=>{var u=e(56694),g=e(12920),c=e(72632),s=new u({initialize:function(a){a===void 0&&(a={}),this.name=c(a,"name","map"),this.width=c(a,"width",0),this.height=c(a,"height",0),this.infinite=c(a,"infinite",!1),this.tileWidth=c(a,"tileWidth",0),this.tileHeight=c(a,"tileHeight",0),this.widthInPixels=c(a,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=c(a,"heightInPixels",this.height*this.tileHeight),this.format=c(a,"format",null),this.orientation=c(a,"orientation",g.ORTHOGONAL),this.renderOrder=c(a,"renderOrder","right-down"),this.version=c(a,"version","1"),this.properties=c(a,"properties",{}),this.layers=c(a,"layers",[]),this.images=c(a,"images",[]),this.objects=c(a,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=c(a,"collision",{}),this.tilesets=c(a,"tilesets",[]),this.imageCollections=c(a,"imageCollections",[]),this.tiles=c(a,"tiles",[]),this.hexSideLength=c(a,"hexSideLength",0),this.staggerAxis=c(a,"staggerAxis","y"),this.staggerIndex=c(a,"staggerIndex","odd")}});r.exports=s},15256:(r,m,e)=>{var u=e(56694),g=e(72632),c=new u({initialize:function(o){o===void 0&&(o={}),this.name=g(o,"name","object layer"),this.opacity=g(o,"opacity",1),this.properties=g(o,"properties",{}),this.propertyTypes=g(o,"propertytypes",{}),this.type=g(o,"type","objectgroup"),this.visible=g(o,"visible",!0),this.objects=g(o,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});r.exports=c},21394:(r,m,e)=>{var u=e(12920),g=function(c){return c=c.toLowerCase(),c==="isometric"?u.ISOMETRIC:c==="staggered"?u.STAGGERED:c==="hexagonal"?u.HEXAGONAL:u.ORTHOGONAL};r.exports=g},90715:(r,m,e)=>{var u=e(93560),g=e(84346),c=e(96097),s=e(2378),o=e(44909),a=function(l,p,h,f,v,y){var x;switch(p){case u.ARRAY_2D:x=g(l,h,f,v,y);break;case u.CSV:x=c(l,h,f,v,y);break;case u.TILED_JSON:x=s(l,h,y);break;case u.WELTMEISTER:x=o(l,h,y);break;default:console.warn("Unrecognized tilemap data format: "+p),x=null}return x};r.exports=a},84346:(r,m,e)=>{var u=e(93560),g=e(94990),c=e(16586),s=e(29633),o=function(a,l,p,h,f){for(var v=new g({tileWidth:p,tileHeight:h}),y=new c({name:a,tileWidth:p,tileHeight:h,format:u.ARRAY_2D,layers:[v]}),x=[],S=l.length,E=0,b=0;b<l.length;b++){x[b]=[];for(var T=l[b],P=0;P<T.length;P++){var C=parseInt(T[P],10);isNaN(C)||C===-1?x[b][P]=f?null:new s(v,-1,P,b,p,h):x[b][P]=new s(v,C,P,b,p,h)}E===0&&(E=T.length)}return y.width=v.width=E,y.height=v.height=S,y.widthInPixels=v.widthInPixels=E*p,y.heightInPixels=v.heightInPixels=S*h,v.data=x,y};r.exports=o},96097:(r,m,e)=>{var u=e(93560),g=e(84346),c=function(s,o,a,l,p){var h=o.trim().split(`
`).map(function(v){return v.split(",")}),f=g(s,h,a,l,p);return f.format=u.CSV,f};r.exports=c},30951:(r,m,e)=>{var u=e(94990),g=e(29633),c=function(s,o){for(var a=[],l=0;l<s.layer.length;l++){for(var p=s.layer[l],h=new u({name:p.name,width:p.width,height:p.height,tileWidth:p.tilesize,tileHeight:p.tilesize,visible:p.visible===1}),f=[],v=[],y=0;y<p.data.length;y++){for(var x=0;x<p.data[y].length;x++){var S=p.data[y][x]-1,E;S>-1?E=new g(h,S,x,y,p.tilesize,p.tilesize):E=o?null:new g(h,-1,x,y,p.tilesize,p.tilesize),f.push(E)}v.push(f),f=[]}h.data=v,a.push(h)}return a};r.exports=c},47488:(r,m,e)=>{var u=e(47975),g=function(c){for(var s=[],o=[],a=0;a<c.layer.length;a++){var l=c.layer[a],p=l.tilesetName;p!==""&&o.indexOf(p)===-1&&(o.push(p),s.push(new u(p,0,l.tilesize,l.tilesize,0,0)))}return s};r.exports=g},44909:(r,m,e)=>{var u=e(93560),g=e(16586),c=e(30951),s=e(47488),o=function(a,l,p){if(l.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+a),null;for(var h=0,f=0,v=0;v<l.layer.length;v++)l.layer[v].width>h&&(h=l.layer[v].width),l.layer[v].height>f&&(f=l.layer[v].height);var y=new g({width:h,height:f,name:a,tileWidth:l.layer[0].tilesize,tileHeight:l.layer[0].tilesize,format:u.WELTMEISTER});return y.layers=c(l,p),y.tilesets=s(l),y};r.exports=o},24507:(r,m,e)=>{r.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}},34124:(r,m,e)=>{r.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}},48646:(r,m,e)=>{var u=e(98611),g=function(c){for(var s,o,a,l,p,h=0;h<c.layers.length;h++){s=c.layers[h],l=null;for(var f=0;f<s.data.length;f++){p=s.data[f];for(var v=0;v<p.length;v++)o=p[v],!(o===null||o.index<0)&&(a=c.tiles[o.index][2],l=c.tilesets[a],o.width=l.tileWidth,o.height=l.tileHeight,l.tileProperties&&l.tileProperties[o.index-l.firstgid]&&(o.properties=u(o.properties,l.tileProperties[o.index-l.firstgid])))}}};r.exports=g},43908:r=>{var m=function(e){for(var u=window.atob(e),g=u.length,c=new Array(g/4),s=0;s<g;s+=4)c[s/4]=(u.charCodeAt(s)|u.charCodeAt(s+1)<<8|u.charCodeAt(s+2)<<16|u.charCodeAt(s+3)<<24)>>>0;return c};r.exports=m},14556:(r,m,e)=>{var u=e(47975),g=function(c){var s,o,a=[];for(s=0;s<c.imageCollections.length;s++)for(var l=c.imageCollections[s],p=l.images,h=0;h<p.length;h++){var f=p[h];o=new u(f.image,f.gid,l.imageWidth,l.imageHeight,0,0),o.updateTileData(l.imageWidth,l.imageHeight),c.tilesets.push(o)}for(s=0;s<c.tilesets.length;s++){o=c.tilesets[s];for(var v=o.tileMargin,y=o.tileMargin,x=0,S=0,E=0,b=o.firstgid;b<o.firstgid+o.total&&(a[b]=[v,y,s],v+=o.tileWidth+o.tileSpacing,x++,!(x===o.total||(S++,S===o.columns&&(v=o.tileMargin,y+=o.tileHeight+o.tileSpacing,S=0,E++,E===o.rows))));b++);}return a};r.exports=g},92044:(r,m,e)=>{var u=e(72632),g=function(c,s,o){if(!s)return{i:0,layers:c.layers,name:"",opacity:1,visible:!0,x:0,y:0};var a=s.x+u(s,"startx",0)*c.tilewidth+u(s,"offsetx",0),l=s.y+u(s,"starty",0)*c.tileheight+u(s,"offsety",0);return{i:0,layers:s.layers,name:o.name+s.name+"/",opacity:o.opacity*s.opacity,visible:o.visible&&s.visible,x:o.x+a,y:o.y+l}};r.exports=g},8847:r=>{var m=2147483648,e=1073741824,u=536870912,g=function(c){var s=!!(c&m),o=!!(c&e),a=!!(c&u);c=c&~(m|e|u);var l=0,p=!1;return s&&o&&a?(l=Math.PI/2,p=!0):s&&o&&!a?(l=Math.PI,p=!1):s&&!o&&a?(l=Math.PI/2,p=!1):s&&!o&&!a?(l=0,p=!0):!s&&o&&a?(l=3*Math.PI/2,p=!1):!s&&o&&!a?(l=Math.PI,p=!0):!s&&!o&&a?(l=3*Math.PI/2,p=!0):!s&&!o&&!a&&(l=0,p=!1),{gid:c,flippedHorizontal:s,flippedVertical:o,flippedAntiDiagonal:a,rotation:l,flipped:p}};r.exports=g},78339:(r,m,e)=>{var u=e(72632),g=e(92044),c=function(s){for(var o=[],a=[],l=g(s);l.i<l.layers.length||a.length>0;){if(l.i>=l.layers.length){if(a.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=a.pop();continue}var p=l.layers[l.i];if(l.i++,p.type!=="imagelayer"){if(p.type==="group"){var h=g(s,p,l);a.push(l),l=h}continue}var f=u(p,"offsetx",0)+u(p,"startx",0),v=u(p,"offsety",0)+u(p,"starty",0);o.push({name:l.name+p.name,image:p.image,x:l.x+f+p.x,y:l.y+v+p.y,alpha:l.opacity*p.opacity,visible:l.visible&&p.visible,properties:u(p,"properties",{})})}return o};r.exports=c},2378:(r,m,e)=>{var u=e(48646),g=e(14556),c=e(12920),s=e(28699),o=e(93560),a=e(21394),l=e(16586),p=e(78339),h=e(61136),f=e(95925),v=e(93392),y=function(x,S,E){var b=s(S),T=new l({width:b.width,height:b.height,name:x,tileWidth:b.tilewidth,tileHeight:b.tileheight,orientation:a(b.orientation),format:o.TILED_JSON,version:b.version,properties:b.properties,renderOrder:b.renderorder,infinite:b.infinite});T.orientation===c.HEXAGONAL&&(T.hexSideLength=b.hexsidelength,T.staggerAxis=b.staggeraxis,T.staggerIndex=b.staggerindex),T.layers=f(b,E),T.images=p(b);var P=v(b);return T.tilesets=P.tilesets,T.imageCollections=P.imageCollections,T.objects=h(b),T.tiles=g(T),u(T),T};r.exports=y},4281:(r,m,e)=>{var u=e(28820),g=e(8847),c=function(a){return{x:a.x,y:a.y}},s=["id","name","type","rotation","properties","visible","x","y","width","height"],o=function(a,l,p){l===void 0&&(l=0),p===void 0&&(p=0);var h=u(a,s);if(h.x+=l,h.y+=p,a.gid){var f=g(a.gid);h.gid=f.gid,h.flippedHorizontal=f.flippedHorizontal,h.flippedVertical=f.flippedVertical,h.flippedAntiDiagonal=f.flippedAntiDiagonal}else a.polyline?h.polyline=a.polyline.map(c):a.polygon?h.polygon=a.polygon.map(c):a.ellipse?h.ellipse=a.ellipse:a.text?h.text=a.text:a.point?h.point=!0:h.rectangle=!0;return h};r.exports=o},61136:(r,m,e)=>{var u=e(72632),g=e(4281),c=e(15256),s=e(92044),o=function(a){for(var l=[],p=[],h=s(a);h.i<h.layers.length||p.length>0;){if(h.i>=h.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=p.pop();continue}var f=h.layers[h.i];if(h.i++,f.opacity*=h.opacity,f.visible=h.visible&&f.visible,f.type!=="objectgroup"){if(f.type==="group"){var v=s(a,f,h);p.push(h),h=v}continue}f.name=h.name+f.name;for(var y=h.x+u(f,"startx",0)+u(f,"offsetx",0),x=h.y+u(f,"starty",0)+u(f,"offsety",0),S=[],E=0;E<f.objects.length;E++){var b=g(f.objects[E],y,x);S.push(b)}var T=new c(f);T.objects=S,l.push(T)}return l};r.exports=o},95925:(r,m,e)=>{var u=e(43908),g=e(12920),c=e(92044),s=e(21394),o=e(72632),a=e(94990),l=e(8847),p=e(29633),h=function(f,v){for(var y=o(f,"infinite",!1),x=[],S=[],E=c(f);E.i<E.layers.length||S.length>0;){if(E.i>=E.layers.length){if(S.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}E=S.pop();continue}var b=E.layers[E.i];if(E.i++,b.type!=="tilelayer"){if(b.type==="group"){var T=c(f,b,E);S.push(E),E=T}continue}if(b.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+b.name+"'");continue}else if(b.encoding&&b.encoding==="base64"){if(b.chunks)for(var P=0;P<b.chunks.length;P++)b.chunks[P].data=u(b.chunks[P].data);b.data&&(b.data=u(b.data)),delete b.encoding}var C,w,A,R,I=[],L=0;if(y){var O=o(b,"startx",0)+b.x,D=o(b,"starty",0)+b.y;C=new a({name:E.name+b.name,x:E.x+o(b,"offsetx",0)+O*f.tilewidth,y:E.y+o(b,"offsety",0)+D*f.tileheight,width:b.width,height:b.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:E.opacity*b.opacity,visible:E.visible&&b.visible,properties:o(b,"properties",[]),orientation:s(f.orientation)}),C.orientation===g.HEXAGONAL&&(C.hexSideLength=f.hexsidelength,C.staggerAxis=f.staggeraxis,C.staggerIndex=f.staggerindex);for(var V=0;V<b.height;V++){I[V]=[null];for(var B=0;B<b.width;B++)I[V][B]=null}for(V=0,X=b.chunks.length;V<X;V++)for(var U=b.chunks[V],W=U.x-O,F=U.y-D,G=0,M=0,N=U.data.length;M<N;M++){var k=L+W,z=G+F;w=l(U.data[M]),w.gid>0?(A=new p(C,w.gid,k,z,f.tilewidth,f.tileheight),A.rotation=w.rotation,A.flipX=w.flipped,I[z][k]=A):(R=v?null:new p(C,-1,k,z,f.tilewidth,f.tileheight),I[z][k]=R),L++,L===U.width&&(G++,L=0)}}else{C=new a({name:E.name+b.name,x:E.x+o(b,"offsetx",0)+b.x,y:E.y+o(b,"offsety",0)+b.y,width:b.width,height:b.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:E.opacity*b.opacity,visible:E.visible&&b.visible,properties:o(b,"properties",[]),orientation:s(f.orientation)}),C.orientation===g.HEXAGONAL&&(C.hexSideLength=f.hexsidelength,C.staggerAxis=f.staggeraxis,C.staggerIndex=f.staggerindex);for(var H=[],$=0,X=b.data.length;$<X;$++)w=l(b.data[$]),w.gid>0?(A=new p(C,w.gid,L,I.length,f.tilewidth,f.tileheight),A.rotation=w.rotation,A.flipX=w.flipped,H.push(A)):(R=v?null:new p(C,-1,L,I.length,f.tilewidth,f.tileheight),H.push(R)),L++,L===b.width&&(I.push(H),L=0,H=[])}C.data=I,x.push(C)}return x};r.exports=h},93392:(r,m,e)=>{var u=e(47975),g=e(97042),c=e(4281),s=e(39642),o=function(a){for(var l=[],p=[],h=null,f,v=0;v<a.tilesets.length;v++){var y=a.tilesets[v];if(y.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(y.image){var x=new u(y.name,y.firstgid,y.tilewidth,y.tileheight,y.margin,y.spacing,void 0,void 0,y.tileoffset);if(a.version>1){var S=void 0,E=void 0;if(Array.isArray(y.tiles)){S=S||{},E=E||{};for(var b=0;b<y.tiles.length;b++){var T=y.tiles[b];if(T.properties){var P={};T.properties.forEach(function(V){P[V.name]=V.value}),E[T.id]=P}if(T.objectgroup&&((S[T.id]||(S[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var C=T.objectgroup.objects.map(function(V){return c(V)});S[T.id].objectgroup.objects=C}T.animation&&((S[T.id]||(S[T.id]={})).animation=T.animation),T.type&&((S[T.id]||(S[T.id]={})).type=T.type)}}Array.isArray(y.wangsets)&&(S=S||{},E=E||{},s(y.wangsets,S)),S&&(x.tileData=S,x.tileProperties=E)}else if(y.tileproperties&&(x.tileProperties=y.tileproperties),y.tiles){x.tileData=y.tiles;for(f in x.tileData){var w=x.tileData[f].objectgroup;if(w&&w.objects){var A=w.objects.map(function(V){return c(V)});x.tileData[f].objectgroup.objects=A}}}x.updateTileData(y.imagewidth,y.imageheight),l.push(x)}else{var R=new g(y.name,y.firstgid,y.tilewidth,y.tileheight,y.margin,y.spacing,y.properties),I=0;for(b=0;b<y.tiles.length;b++){T=y.tiles[b];var L=T.image,O=parseInt(T.id,10),D=y.firstgid+O;R.addImage(D,L),I=Math.max(O,I)}R.maxId=I,p.push(R)}h&&(h.lastgid=y.firstgid-1),h=y}return{tilesets:l,imageCollections:p}};r.exports=o},39642:r=>{var m=function(e,u){for(var g=0;g<e.length;g++){var c=e[g],s=g;if(c.name&&c.name!==""&&(s=c.name),Array.isArray(c.wangtiles)&&c.wangtiles.length>0){var o={},a={},l,p,h;if(Array.isArray(c.edgecolors))for(l=0;l<c.edgecolors.length;l++)h=1+l,p=c.edgecolors[l],p.name!==""&&(o[h]=p.name);if(Array.isArray(c.cornercolors))for(l=0;l<c.cornercolors.length;l++)h=1+l,p=c.cornercolors[l],p.name!==""&&(a[h]=p.name);if(Array.isArray(c.colors))for(l=0;l<c.colors.length;l++)p=c.colors[l],h=1+l,p.name!==""&&(o[h]=a[h]=p.name);for(var f=[o,a,o,a,o,a,o,a],v=0;v<c.wangtiles.length;v++){var y=c.wangtiles[v],x=u[y.tileid]||(u[y.tileid]={});x=x.wangid||(x.wangid={});for(var S=[],E=0;E<Math.min(f.length,y.wangid.length);E++){if(p=y.wangid[E],p===0){S.push(void 0);continue}var b=f[E][p];if(b!==void 0){S.push(b);continue}S.push(p)}x[s]=S}}}};r.exports=m},50044:(r,m,e)=>{r.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}},73779:(r,m,e)=>{var u=e(56694),g=e(91963),c=e(7599),s=e(57911),o=e(66458),a=new u({initialize:function(p){this.scene=p,this.systems=p.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],p.sys.events.once(c.BOOT,this.boot,this),p.sys.events.on(c.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var l=this.systems.events;l.on(c.PRE_UPDATE,this.preUpdate,this),l.on(c.UPDATE,this.update,this),l.once(c.SHUTDOWN,this.shutdown,this)},addEvent:function(l){var p;return l instanceof s?(p=l,this.removeEvent(p),p.elapsed=p.startAt,p.hasDispatched=!1,p.repeatCount=p.repeat===-1||p.loop?999999999999:p.repeat):p=new s(l),this._pendingInsertion.push(p),p},delayedCall:function(l,p,h,f){return this.addEvent({delay:l,callback:p,args:h,callbackScope:f})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(l){Array.isArray(l)||(l=[l]);for(var p=0;p<l.length;p++){var h=l[p];o(this._pendingRemoval,h),o(this._pendingInsertion,h),o(this._active,h)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var l=this._pendingRemoval.length,p=this._pendingInsertion.length;if(!(l===0&&p===0)){var h,f;for(h=0;h<l;h++){f=this._pendingRemoval[h];var v=this._active.indexOf(f);v>-1&&this._active.splice(v,1),f.destroy()}for(h=0;h<p;h++)f=this._pendingInsertion[h],this._active.push(f);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(l,p){if(this.now=l,!this.paused){p*=this.timeScale;for(var h=0;h<this._active.length;h++){var f=this._active[h];if(!f.paused&&(f.elapsed+=p*f.timeScale,f.elapsed>=f.delay)){var v=f.elapsed-f.delay;if(f.elapsed=f.delay,!f.hasDispatched&&f.callback&&(f.hasDispatched=!0,f.callback.apply(f.callbackScope,f.args)),f.repeatCount>0){if(f.repeatCount--,v>=f.delay)for(;v>=f.delay&&f.repeatCount>0;)f.callback&&f.callback.apply(f.callbackScope,f.args),v-=f.delay,f.repeatCount--;f.elapsed=v,f.hasDispatched=!1}else f.hasDispatched&&this._pendingRemoval.push(f)}}}},shutdown:function(){var l;for(l=0;l<this._pendingInsertion.length;l++)this._pendingInsertion[l].destroy();for(l=0;l<this._active.length;l++)this._active[l].destroy();for(l=0;l<this._pendingRemoval.length;l++)this._pendingRemoval[l].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var p=this.systems.events;p.off(c.PRE_UPDATE,this.preUpdate,this),p.off(c.UPDATE,this.update,this),p.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});g.register("Clock",a,"time"),r.exports=a},20517:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(61286),s=e(72632),o=e(7599),a=new u({Extends:g,initialize:function(p,h){g.call(this),this.scene=p,this.systems=p.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var f=this.systems.events;f.on(o.PRE_UPDATE,this.preUpdate,this),f.on(o.UPDATE,this.update,this),f.once(o.SHUTDOWN,this.destroy,this),h&&this.add(h)},preUpdate:function(l,p){this.paused||(this.elapsed+=p)},update:function(){if(!this.paused){var l,p=this.events,h=!1,f=this.systems,v;for(l=0;l<p.length;l++){var y=p[l];if(!y.complete&&y.time<=this.elapsed){if(y.complete=!0,this.totalComplete++,y.once&&(h=!0),y.set&&y.target)for(var x in y.set)y.target[x]=y.set[x];y.tween&&f.tweens.add(y.tween),y.sound&&(typeof y.sound=="string"?f.sound.play(y.sound):f.sound.play(y.sound.key,y.sound.config)),v=y.target?y.target:this,y.event&&this.emit(y.event,v),y.run&&y.run.call(v),y.stop&&this.stop()}}if(h)for(l=0;l<p.length;l++)p[l].complete&&p[l].once&&(p.splice(l,1),l--);this.totalComplete>=p.length&&(this.complete=!0)}},play:function(l){return l===void 0&&(l=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,l&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var l=0;l<this.events.length;l++)this.events[l].complete=!1;return this.play(!1)},add:function(l){Array.isArray(l)||(l=[l]);var p=this.events,h=0;p.length>0&&(h=p[p.length-1].time);for(var f=0;f<l.length;f++){var v=l[f],y=s(v,"at",0),x=s(v,"in",null);x!==null&&(y=this.elapsed+x);var S=s(v,"from",null);S!==null&&(y=h+S),p.push({complete:!1,time:y,run:s(v,"run",null),event:s(v,"event",null),target:s(v,"target",null),set:s(v,"set",null),tween:s(v,"tween",null),sound:s(v,"sound",null),once:s(v,"once",!1),stop:s(v,"stop",!1)}),h=y}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var l=Math.min(this.totalComplete,this.events.length);return l/this.events.length},destroy:function(){var l=this.systems.events;l.off(o.PRE_UPDATE,this.preUpdate,this),l.off(o.UPDATE,this.update,this),l.off(o.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});c.register("timeline",function(l){return new a(this.scene,l)}),r.exports=a},57911:(r,m,e)=>{var u=e(56694),g=e(72632),c=new u({initialize:function(o){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(o)},reset:function(s){if(this.delay=g(s,"delay",0),this.repeat=g(s,"repeat",0),this.loop=g(s,"loop",!1),this.callback=g(s,"callback",void 0),this.callbackScope=g(s,"callbackScope",this),this.args=g(s,"args",[]),this.timeScale=g(s,"timeScale",1),this.startAt=g(s,"startAt",0),this.paused=g(s,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var s=this.delay+this.delay*this.repeat,o=this.elapsed+this.delay*(this.repeat-this.repeatCount);return o/s}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(s){s===void 0&&(s=!1),this.elapsed=this.delay,this.hasDispatched=!s,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});r.exports=c},97121:(r,m,e)=>{r.exports={Clock:e(73779),Timeline:e(20517),TimerEvent:e(57911)}},64532:(r,m,e)=>{var u=e(66458),g=e(56694),c=e(5454),s=e(68710),o=e(91963),a=e(7599),l=e(91944),p=e(39366),h=e(68061),f=e(45641),v=e(56034),y=new g({initialize:function(S){this.scene=S,this.events=S.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(a.UPDATE,this.update,this),this.events.once(a.SHUTDOWN,this.shutdown,this)},create:function(x){Array.isArray(x)||(x=[x]);for(var S=[],E=0;E<x.length;E++){var b=x[E];b instanceof p||b instanceof f?S.push(b):Array.isArray(b.tweens)?S.push(v(this,b)):S.push(h(this,b))}return S.length===1?S[0]:S},add:function(x){var S=x,E=this.tweens;return S instanceof p||S instanceof f||(Array.isArray(S.tweens)?S=v(this,S):S=h(this,S)),E.push(S.reset()),S},addMultiple:function(x){for(var S,E=[],b=this.tweens,T=0;T<x.length;T++)S=x[T],S instanceof p||S instanceof f||(Array.isArray(S.tweens)?S=v(this,S):S=h(this,S)),b.push(S.reset()),E.push(S);return E},chain:function(x){var S=v(this,x);return this.tweens.push(S.init()),S},getChainedTweens:function(x){return x.getChainedTweens()},has:function(x){return this.tweens.indexOf(x)>-1},existing:function(x){return this.has(x)||this.tweens.push(x.reset()),this},addCounter:function(x){var S=s(this,x);return this.tweens.push(S.reset()),S},stagger:function(x,S){return l(x,S)},setLagSmooth:function(x,S){return x===void 0&&(x=1/1e-8),S===void 0&&(S=0),this.maxLag=x,this.lagSkip=Math.min(S,this.maxLag),this},setFps:function(x){return x===void 0&&(x=240),this.gap=1e3/x,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(x){var S=Date.now()-this.prevTime;S>this.maxLag&&(this.startTime+=S-this.lagSkip),this.prevTime+=S;var E=this.prevTime-this.startTime,b=E-this.nextTime,T=E-this.time*1e3;return b>0||x?(E/=1e3,this.time=E,this.nextTime+=b+(b>=this.gap?4:this.gap-b)):T=0,T},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(x){x===void 0&&(x=!1);var S=this.getDelta(x);if(!(S<=0)){this.processing=!0;var E,b,T=[],P=this.tweens;for(E=0;E<P.length;E++)b=P[E],b.update(S)&&T.push(b);var C=T.length;if(C&&P.length>0){for(E=0;E<C;E++){b=T[E];var w=P.indexOf(b);w>-1&&(b.isPendingRemove()||b.isDestroyed())&&(P.splice(w,1),b.destroy())}T.length=0}this.processing=!1}},remove:function(x){return this.processing?x.setPendingRemoveState():(u(this.tweens,x),x.setRemovedState()),this},reset:function(x){return this.existing(x),x.seek(),x.setActiveState(),this},makeActive:function(x){return this.existing(x),x.setActiveState(),this},each:function(x,S){var E,b=[null];for(E=1;E<arguments.length;E++)b.push(arguments[E]);return this.tweens.forEach(function(T){b[0]=T,x.apply(S,b)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(x){var S=[],E=this.tweens;Array.isArray(x)?x=c(x):x=[x];for(var b=x.length,T=0;T<E.length;T++)for(var P=E[T],C=0;C<b;C++)!P.isDestroyed()&&P.hasTarget(x[C])&&S.push(P);return S},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(x){return this.timeScale=x,this},isTweening:function(x){for(var S=this.tweens,E,b=0;b<S.length;b++)if(E=S[b],E.isPlaying()&&E.hasTarget(x))return!0;return!1},killAll:function(){for(var x=this.processing?this.getTweens():this.tweens,S=0;S<x.length;S++)x[S].destroy();return this.processing||(x.length=0),this},killTweensOf:function(x){for(var S=this.getTweensOf(x),E=0;E<S.length;E++)S[E].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(a.UPDATE,this.update,this),this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.events=null}});o.register("TweenManager",y,"tweens"),r.exports=y},63130:r=>{var m=function(e,u,g){return e&&e.hasOwnProperty(u)?e[u]:g};r.exports=m},21902:(r,m,e)=>{var u=e(35060),g=e(40587),c=function(s,o){var a=u.Power0;if(typeof s=="string")if(u.hasOwnProperty(s))a=u[s];else{var l="";if(s.indexOf(".")){l=s.substring(s.indexOf(".")+1);var p=l.toLowerCase();p==="in"?l="easeIn":p==="out"?l="easeOut":p==="inout"&&(l="easeInOut")}s=g(s.substring(0,s.indexOf(".")+1)+l),u.hasOwnProperty(s)&&(a=u[s])}else typeof s=="function"&&(a=s);if(!o)return a;var h=o.slice(0);return h.unshift(0),function(f){return h[0]=f,a.apply(this,h)}};r.exports=c},4840:(r,m,e)=>{var u=e(63210),g=e(88332),c=e(47614),s={bezier:u,catmull:g,catmullrom:g,linear:c},o=function(a){if(a===null)return null;var l=s.linear;return typeof a=="string"?s.hasOwnProperty(a)&&(l=s[a]):typeof a=="function"&&(l=a),l};r.exports=o},28348:r=>{var m=function(e,u,g){var c;if(e.hasOwnProperty(u)){var s=typeof e[u];s==="function"?c=function(o,a,l,p,h,f){return e[u](o,a,l,p,h,f)}:c=function(){return e[u]}}else typeof g=="function"?c=g:c=function(){return g};return c};r.exports=m},92407:(r,m,e)=>{var u=e(53709),g=function(c){var s,o=[];if(c.hasOwnProperty("props"))for(s in c.props)s.substring(0,1)!=="_"&&o.push({key:s,value:c.props[s]});else for(s in c)u.indexOf(s)===-1&&s.substring(0,1)!=="_"&&o.push({key:s,value:c[s]});return o};r.exports=g},65868:(r,m,e)=>{var u=e(10850),g=function(c){var s=u(c,"targets",null);return s===null||(typeof s=="function"&&(s=s.call()),Array.isArray(s)||(s=[s])),s};r.exports=g},9744:(r,m,e)=>{var u=e(17489),g=e(61616);function c(p){return!!p.getActive&&typeof p.getActive=="function"}function s(p){return!!p.getStart&&typeof p.getStart=="function"}function o(p){return!!p.getEnd&&typeof p.getEnd=="function"}function a(p){return s(p)||o(p)||c(p)}var l=function(p,h){var f,v=function(U,W,F){return F},y=function(U,W,F){return F},x=null,S=typeof h;if(S==="number")v=function(){return h};else if(Array.isArray(h))y=function(){return h[0]},v=function(){return h[h.length-1]};else if(S==="string"){var E=h.toLowerCase(),b=E.substring(0,6)==="random",T=E.substring(0,3)==="int";if(b||T){var P=E.indexOf("("),C=E.indexOf(")"),w=E.indexOf(",");if(P&&C&&w){var A=parseFloat(E.substring(P+1,w)),R=parseFloat(E.substring(w+1,C));b?v=function(){return g(A,R)}:v=function(){return u(A,R)}}else throw new Error("invalid random() format")}else{E=E[0];var I=parseFloat(h.substr(2));switch(E){case"+":v=function(U,W,F){return F+I};break;case"-":v=function(U,W,F){return F-I};break;case"*":v=function(U,W,F){return F*I};break;case"/":v=function(U,W,F){return F/I};break;default:v=function(){return parseFloat(h)}}}}else if(S==="function")v=h;else if(S==="object")if(a(h))c(h)&&(x=h.getActive),o(h)&&(v=h.getEnd),s(h)&&(y=h.getStart);else if(h.hasOwnProperty("value"))f=l(p,h.value);else{var L=h.hasOwnProperty("to"),O=h.hasOwnProperty("from"),D=h.hasOwnProperty("start");if(L&&(O||D)){if(f=l(p,h.to),D){var V=l(p,h.start);f.getActive=V.getEnd}if(O){var B=l(p,h.from);f.getStart=B.getEnd}}}return f||(f={getActive:x,getEnd:v,getStart:y}),f};r.exports=l},68710:(r,m,e)=>{var u=e(502),g=e(99730),c=e(20494),s=e(63130),o=e(21902),a=e(28348),l=e(10850),p=e(9744),h=e(72066),f=e(39366),v=function(y,x,S){if(x instanceof f)return x.parent=y,x;S===void 0?S=g:S=h(g,S);var E=l(x,"from",0),b=l(x,"to",1),T=[{value:E}],P=l(x,"delay",S.delay),C=l(x,"easeParams",S.easeParams),w=l(x,"ease",S.ease),A=p("value",b),R=new f(y,T),I=R.add(0,"value",A.getEnd,A.getStart,A.getActive,o(l(x,"ease",w),l(x,"easeParams",C)),a(x,"delay",P),l(x,"duration",S.duration),s(x,"yoyo",S.yoyo),l(x,"hold",S.hold),l(x,"repeat",S.repeat),l(x,"repeatDelay",S.repeatDelay),!1,!1);I.start=E,I.current=E,R.completeDelay=c(x,"completeDelay",0),R.loop=Math.round(c(x,"loop",0)),R.loopDelay=Math.round(c(x,"loopDelay",0)),R.paused=s(x,"paused",!1),R.persist=s(x,"persist",!1),R.callbackScope=l(x,"callbackScope",R);for(var L=u.TYPES,O=0;O<L.length;O++){var D=L[O],V=l(x,D,!1);if(V){var B=l(x,D+"Params",[]);R.setCallback(D,V,B)}}return R};r.exports=v},91944:(r,m,e)=>{var u=e(21902),g=e(10850),c=e(83392),s=function(o,a){a===void 0&&(a={});var l,p=g(a,"start",0),h=g(a,"ease",null),f=g(a,"grid",null),v=g(a,"from",0),y=v==="first",x=v==="center",S=v==="last",E=typeof v=="number",b=Array.isArray(o),T=parseFloat(b?o[0]:o),P=b?parseFloat(o[1]):0,C=Math.max(T,P);if(b&&(p+=T),f){var w=f[0],A=f[1],R=0,I=0,L=0,O=0,D=[];S?(R=w-1,I=A-1):E?(R=v%w,I=Math.floor(v/w)):x&&(R=(w-1)/2,I=(A-1)/2);for(var V=c.MIN_SAFE_INTEGER,B=0;B<A;B++){D[B]=[];for(var U=0;U<w;U++){L=R-U,O=I-B;var W=Math.sqrt(L*L+O*O);W>V&&(V=W),D[B][U]=W}}}var F=h?u(h):null;return f?l=function(G,M,N,k){var z=0,H=k%w,$=Math.floor(k/w);H>=0&&H<w&&$>=0&&$<A&&(z=D[$][H]);var X;if(b){var Y=P-T;F?X=z/V*Y*F(z/V):X=z/V*Y}else F?X=z*T*F(z/V):X=z*T;return X+p}:l=function(G,M,N,k,z){z--;var H;y?H=k:x?H=Math.abs(z/2-k):S?H=z-k:E&&(H=Math.abs(v-k));var $;if(b){var X;x?X=(P-T)/z*(H*2):X=(P-T)/z*H,F?$=X*F(H/z):$=X}else F?$=z*C*F(H/z):$=H*T;return $+p},l};r.exports=s},68061:(r,m,e)=>{var u=e(502),g=e(99730),c=e(20494),s=e(63130),o=e(21902),a=e(4840),l=e(28348),p=e(92407),h=e(65868),f=e(10850),v=e(9744),y=e(72066),x=e(39366),S=function(E,b,T){if(b instanceof x)return b.parent=E,b;T===void 0?T=g:T=y(g,T);var P=h(b);!P&&T.targets&&(P=T.targets);for(var C=p(b),w=f(b,"delay",T.delay),A=f(b,"duration",T.duration),R=f(b,"easeParams",T.easeParams),I=f(b,"ease",T.ease),L=f(b,"hold",T.hold),O=f(b,"repeat",T.repeat),D=f(b,"repeatDelay",T.repeatDelay),V=s(b,"yoyo",T.yoyo),B=s(b,"flipX",T.flipX),U=s(b,"flipY",T.flipY),W=f(b,"interpolation",T.interpolation),F=function(J,Q,Z,it){if(Z==="texture"){var rt=it,ut=void 0;Array.isArray(it)?(rt=it[0],ut=it[1]):it.hasOwnProperty("value")?(rt=it.value,Array.isArray(it.value)?(rt=it.value[0],ut=it.value[1]):typeof it.value=="string"&&(rt=it.value)):typeof it=="string"&&(rt=it),J.addFrame(Q,rt,ut,l(it,"delay",w),f(it,"duration",A),f(it,"hold",L),f(it,"repeat",O),f(it,"repeatDelay",D),s(it,"flipX",B),s(it,"flipY",U))}else{var dt=v(Z,it),ct=a(f(it,"interpolation",W));J.add(Q,Z,dt.getEnd,dt.getStart,dt.getActive,o(f(it,"ease",I),f(it,"easeParams",R)),l(it,"delay",w),f(it,"duration",A),s(it,"yoyo",V),f(it,"hold",L),f(it,"repeat",O),f(it,"repeatDelay",D),s(it,"flipX",B),s(it,"flipY",U),ct,ct?it:null)}},G=new x(E,P),M=0;M<C.length;M++)for(var N=C[M].key,k=C[M].value,z=0;z<P.length;z++)N==="scale"&&!P[z].hasOwnProperty("scale")?(F(G,z,"scaleX",k),F(G,z,"scaleY",k)):F(G,z,N,k);G.completeDelay=c(b,"completeDelay",0),G.loop=Math.round(c(b,"loop",0)),G.loopDelay=Math.round(c(b,"loopDelay",0)),G.paused=s(b,"paused",!1),G.persist=s(b,"persist",!1),G.callbackScope=f(b,"callbackScope",G);for(var H=u.TYPES,$=0;$<H.length;$++){var X=H[$],Y=f(b,X,!1);if(Y){var j=f(b,X+"Params",[]);G.setCallback(X,Y,j)}}return G};r.exports=S},56034:(r,m,e)=>{var u=e(502),g=e(20494),c=e(63130),s=e(65868),o=e(10850),a=e(68061),l=e(45641),p=function(h,f){if(f instanceof l)return f.parent=h,f;var v=new l(h);v.startDelay=o(f,"delay",0),v.completeDelay=g(f,"completeDelay",0),v.loop=Math.round(g(f,"loop",o(f,"repeat",0))),v.loopDelay=Math.round(g(f,"loopDelay",o(f,"repeatDelay",0))),v.paused=c(f,"paused",!1),v.persist=c(f,"persist",!0),v.callbackScope=o(f,"callbackScope",v);var y,x=u.TYPES;for(y=0;y<x.length;y++){var S=x[y],E=o(f,S,!1);if(E){var b=o(f,S+"Params",[]);v.setCallback(S,E,b)}}var T=o(f,"tweens",null);if(Array.isArray(T)){var P=[],C=s(f),w=void 0;for(C&&(w={targets:C}),y=0;y<T.length;y++)P.push(a(v,T[y],w));v.add(P)}return v};r.exports=p},79619:(r,m,e)=>{r.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}},5570:r=>{r.exports="active"},6383:r=>{r.exports="complete"},72582:r=>{r.exports="loop"},90281:r=>{r.exports="pause"},80803:r=>{r.exports="repeat"},13640:r=>{r.exports="resume"},10472:r=>{r.exports="start"},5379:r=>{r.exports="stop"},43449:r=>{r.exports="update"},61541:r=>{r.exports="yoyo"},54272:(r,m,e)=>{r.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}},75193:(r,m,e)=>{var u={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};r.exports=u},502:(r,m,e)=>{var u=e(56694),g=e(6659),c=e(54272),s=e(55303),o=new u({Extends:g,initialize:function(l){g.call(this),this.parent=l,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=s.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(a){return this.timeScale=a,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(c.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(c.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(c.TWEEN_COMPLETE,"onComplete")},complete:function(a){return a===void 0&&(a=0),a?(this.setCompleteDelayState(),this.countdown=a):this.onCompleteHandler(),this},completeAfterLoop:function(a){return a===void 0&&(a=0),this.loopCounter>a&&(this.loopCounter=a),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(c.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(a){this.countdown-=a,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(a){return this.countdown-=a,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(c.TWEEN_START,"onStart"),a=0),a},updateCompleteDelay:function(a){this.countdown-=a,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(a,l,p){return p===void 0&&(p=[]),this.callbacks.hasOwnProperty(a)&&(this.callbacks[a]={func:l,params:p}),this},setPendingState:function(){this.state=s.PENDING},setActiveState:function(){this.state=s.ACTIVE},setLoopDelayState:function(){this.state=s.LOOP_DELAY},setCompleteDelayState:function(){this.state=s.COMPLETE_DELAY},setStartDelayState:function(){this.state=s.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=s.PENDING_REMOVE},setRemovedState:function(){this.state=s.REMOVED},setFinishedState:function(){this.state=s.FINISHED},setDestroyedState:function(){this.state=s.DESTROYED},isPending:function(){return this.state===s.PENDING},isActive:function(){return this.state===s.ACTIVE},isLoopDelayed:function(){return this.state===s.LOOP_DELAY},isCompleteDelayed:function(){return this.state===s.COMPLETE_DELAY},isStartDelayed:function(){return this.state===s.START_DELAY},isPendingRemove:function(){return this.state===s.PENDING_REMOVE},isRemoved:function(){return this.state===s.REMOVED},isFinished:function(){return this.state===s.FINISHED},isDestroyed:function(){return this.state===s.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(a){a.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});o.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],r.exports=o},65521:(r,m,e)=>{var u=e(56694),g=e(54272),c=e(55303),s=new u({initialize:function(a,l,p,h,f,v,y,x,S,E){this.tween=a,this.targetIndex=l,this.duration=h,this.totalDuration=0,this.delay=0,this.getDelay=p,this.yoyo=f,this.hold=v,this.repeat=y,this.repeatDelay=x,this.repeatCounter=0,this.flipX=S,this.flipY=E,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(o){o===void 0&&(o=this.current),this.tween.targets[this.targetIndex][this.key]=o},setCreatedState:function(){this.state=c.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=c.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=c.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=c.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=c.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=c.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=c.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=c.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===c.CREATED},isDelayed:function(){return this.state===c.DELAY},isPendingRender:function(){return this.state===c.PENDING_RENDER},isPlayingForward:function(){return this.state===c.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===c.PLAYING_BACKWARD},isHolding:function(){return this.state===c.HOLD_DELAY},isRepeating:function(){return this.state===c.REPEAT_DELAY},isComplete:function(){return this.state===c.COMPLETE},setStateFromEnd:function(o){this.yoyo?this.onRepeat(o,!0,!0):this.repeatCounter>0?this.onRepeat(o,!0,!1):this.setCompleteState()},setStateFromStart:function(o){this.repeatCounter>0?this.onRepeat(o,!1):this.setCompleteState()},reset:function(){var o=this.tween,a=o.totalTargets,l=this.targetIndex,p=o.targets[l],h=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(p,h,0,l,a,o),this.repeatCounter=this.repeat===-1?c.MAX:this.repeat,this.setPendingRenderState();var f=this.duration+this.hold;this.yoyo&&(f+=this.duration);var v=f+this.repeatDelay;this.totalDuration=this.delay+f,this.repeat===-1?(this.totalDuration+=v*c.MAX,o.isInfinite=!0):this.repeat>0&&(this.totalDuration+=v*this.repeat),this.totalDuration>o.duration&&(o.duration=this.totalDuration),this.delay<o.startDelay&&(o.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(o,a,l){var p=this.tween,h=p.totalTargets,f=this.targetIndex,v=p.targets[f],y=this.key,x=y!=="texture";if(this.elapsed=o,this.progress=o/this.duration,this.flipX&&v.toggleFlipX(),this.flipY&&v.toggleFlipY(),x&&(a||l)&&(this.start=this.getStartValue(v,y,this.start,f,h,p)),l){this.setPlayingBackwardState(),this.dispatchEvent(g.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,x&&(this.end=this.getEndValue(v,y,this.start,f,h,p)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-o,x&&(this.current=this.start,v[y]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(g.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});r.exports=s},99730:r=>{var m={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};r.exports=m},53709:r=>{r.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(r,m,e)=>{var u=e(502),g=e(56694),c=e(54272),s=e(99325),o=e(61286),a=e(83392),l=e(55303),p=e(15718),h=e(96490),f=new g({Extends:u,initialize:function(y,x){u.call(this,y),this.targets=x,this.totalTargets=x.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(v,y,x,S,E,b,T,P,C,w,A,R,I,L,O,D){var V=new p(this,v,y,x,S,E,b,T,P,C,w,A,R,I,L,O,D);return this.totalData=this.data.push(V),V},addFrame:function(v,y,x,S,E,b,T,P,C,w){var A=new h(this,v,y,x,S,E,b,T,P,C,w);return this.totalData=this.data.push(A),A},getValue:function(v){v===void 0&&(v=0);var y=null;return this.data&&(y=this.data[v].current),y},hasTarget:function(v){return this.targets&&this.targets.indexOf(v)!==-1},updateTo:function(v,y,x){if(x===void 0&&(x=!1),v!=="texture")for(var S=0;S<this.totalData;S++){var E=this.data[S];E.key===v&&(E.isPlayingForward()||E.isPlayingBackward())&&(E.end=y,x&&(E.start=E.current))}return this},restart:function(){switch(this.state){case l.REMOVED:case l.FINISHED:this.seek(),this.parent.makeActive(this);break;case l.PENDING:case l.PENDING_REMOVE:this.parent.reset(this);break;case l.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,u.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(v,y,x){if(v===void 0&&(v=0),y===void 0&&(y=16.6),x===void 0&&(x=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;x||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive");var S=this.paused;if(this.paused=!1,v>0){for(var E=Math.floor(v/y),b=v-E*y,T=0;T<E;T++)this.update(y);b>0&&this.update(b)}return this.paused=S,this.isSeeking=!1,this},initTweenData:function(v){v===void 0&&(v=!1),this.duration=0,this.startDelay=a.MAX_SAFE_INTEGER;for(var y=this.data,x=0;x<this.totalData;x++)y[x].reset(v);this.duration=Math.max(this.duration,.01);var S=this.duration,E=this.completeDelay,b=this.loopCounter,T=this.loopDelay;b>0?this.totalDuration=S+E+(S+T)*b:this.totalDuration=S+E},reset:function(v){return v===void 0&&(v=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=l.MAX),v||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")),this},update:function(v){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(v*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(v),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(v),!1;this.hasStarted||(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(c.TWEEN_START,"onStart"),v=0));var y=!1;if(this.isActive())for(var x=this.data,S=0;S<this.totalData;S++)x[S].update(v)&&(y=!0);this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),y||this.nextState();var E=this.isPendingRemove();return E&&this.persist&&(this.setFinishedState(),E=!1),E},forward:function(v){return this.update(v),this},rewind:function(v){return this.update(-v),this},dispatchEvent:function(v,y){if(!this.isSeeking){this.emit(v,this,this.targets);var x=this.callbacks[y];x&&x.func.apply(this.callbackScope,[this,this.targets].concat(x.params))}},destroy:function(){u.prototype.destroy.call(this),this.targets=null}});o.register("tween",function(v){return this.scene.sys.tweens.add(v)}),s.register("tween",function(v){return this.scene.sys.tweens.create(v)}),r.exports=f},45641:(r,m,e)=>{var u=e(66458),g=e(502),c=e(56694),s=e(54272),o=e(99325),a=e(61286),l=e(55303),p=new c({Extends:g,initialize:function(f){g.call(this,f),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?l.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(s.TWEEN_ACTIVE,"onActive"),this},add:function(h){var f=this.parent.create(h);Array.isArray(f)||(f=[f]);for(var v=this.data,y=0;y<f.length;y++){var x=f[y];x.parent=this,v.push(x.reset())}return this.totalData=v.length,this},remove:function(h){return u(this.data,h),h.setRemovedState(),h===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(h){for(var f=this.data,v=0;v<this.totalData;v++)if(f[v].hasTarget(h))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(h){return h.seek(),h.setActiveState(),this},makeActive:function(h){return h.reset(),h.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(s.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var h=this.data,f=this.totalData,v=0;v<f;v++)h[v].reset(!1);this.currentIndex=0,this.currentTween=h[0]},update:function(h){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;h*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(h):this.isCompleteDelayed()?this.updateCompleteDelay(h):this.isStartDelayed()&&(h=this.updateStartCountdown(h));var f=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(h)&&this.nextTween()&&this.nextState(),f=this.isPendingRemove(),f&&this.persist&&(this.setFinishedState(),f=!1)),f},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(h){this.currentIndex=h,this.currentTween=this.data[h],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(s.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(h,f){this.emit(h,this);var v=this.callbacks[f];v&&v.func.apply(this.callbackScope,[this].concat(v.params))},destroy:function(){g.prototype.destroy.call(this),this.currentTween=null}});a.register("tweenchain",function(h){return this.scene.sys.tweens.chain(h)}),o.register("tweenchain",function(h){return this.scene.sys.tweens.create(h)}),r.exports=p},15718:(r,m,e)=>{var u=e(65521),g=e(82897),c=e(56694),s=e(54272),o=new c({Extends:u,initialize:function(l,p,h,f,v,y,x,S,E,b,T,P,C,w,A,R,I){u.call(this,l,p,S,E,b,T,P,C,w,A),this.key=h,this.getActiveValue=y,this.getEndValue=f,this.getStartValue=v,this.ease=x,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=R,this.interpolationData=I},reset:function(a){u.prototype.reset.call(this);var l=this.tween.targets[this.targetIndex],p=this.key;a&&(l[p]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(l[p]=this.getActiveValue(l,p,0))},update:function(a){var l=this.tween,p=l.totalTargets,h=this.targetIndex,f=l.targets[h],v=this.key;if(!f)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=a,this.elapsed<=0&&(this.elapsed=0,a=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(s.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(f,v,f[v],h,p,l),this.end=this.getEndValue(f,v,this.start,h,p,l),this.current=this.start,f[v]=this.start,this.setPlayingForwardState(),!0;var y=this.isPlayingForward(),x=this.isPlayingBackward();if(y||x){var S=this.elapsed,E=this.duration,b=0,T=!1;S+=a,S>=E?(b=S-E,S=E,T=!0):S<0&&(S=0);var P=g(S/E,0,1);if(this.elapsed=S,this.progress=P,this.previous=this.current,T)y?(this.current=this.end,f[v]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(b)):(this.current=this.start,f[v]=this.start,this.setStateFromStart(b));else{y||(P=1-P);var C=this.ease(P);this.interpolation?this.current=this.interpolation(this.interpolationData,C):this.current=this.start+(this.end-this.start)*C,f[v]=this.current}this.dispatchEvent(s.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(a,l){var p=this.tween;if(!p.isSeeking){var h=p.targets[this.targetIndex],f=this.key,v=this.current,y=this.previous;p.emit(a,p,f,h,v,y);var x=p.callbacks[l];x&&x.func.apply(p.callbackScope,[p,h,f,v,y].concat(x.params))}},destroy:function(){u.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});r.exports=o},96490:(r,m,e)=>{var u=e(65521),g=e(82897),c=e(56694),s=e(54272),o=new c({Extends:u,initialize:function(l,p,h,f,v,y,x,S,E,b,T){u.call(this,l,p,v,y,!1,x,S,E,b,T),this.key="texture",this.startTexture=null,this.endTexture=h,this.startFrame=null,this.endFrame=f,this.yoyo=S!==0},reset:function(a){u.prototype.reset.call(this);var l=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=l.texture.key,this.startFrame=l.frame.name),a&&l.setTexture(this.startTexture,this.startFrame)},update:function(a){var l=this.tween,p=this.targetIndex,h=l.targets[p];if(!h)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=a,this.elapsed<=0&&(this.elapsed=0,a=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(s.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&h.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var f=this.isPlayingForward(),v=this.isPlayingBackward();if(f||v){var y=this.elapsed,x=this.duration,S=0,E=!1;y+=a,y>=x?(S=y-x,y=x,E=!0):y<0&&(y=0);var b=g(y/x,0,1);this.elapsed=y,this.progress=b,E&&(f?(h.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(S)):(h.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(S))),this.dispatchEvent(s.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(a,l){var p=this.tween;if(!p.isSeeking){var h=p.targets[this.targetIndex],f=this.key;p.emit(a,p,f,h);var v=p.callbacks[l];v&&v.func.apply(p.callbackScope,[p,h,f].concat(v.params))}},destroy:function(){u.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});r.exports=o},55303:r=>{var m={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};r.exports=m},56694:r=>{function m(o){return!!o.get&&typeof o.get=="function"||!!o.set&&typeof o.set=="function"}function e(o,a,l){var p=l?o[a]:Object.getOwnPropertyDescriptor(o,a);return!l&&p.value&&typeof p.value=="object"&&(p=p.value),p&&m(p)?(typeof p.enumerable>"u"&&(p.enumerable=!0),typeof p.configurable>"u"&&(p.configurable=!0),p):!1}function u(o,a){var l=Object.getOwnPropertyDescriptor(o,a);return l?(l.value&&typeof l.value=="object"&&(l=l.value),l.configurable===!1):!1}function g(o,a,l,p){for(var h in a)if(a.hasOwnProperty(h)){var f=e(a,h,l);if(f!==!1){var v=p||o;if(u(v.prototype,h)){if(s.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(o.prototype,h,f)}else o.prototype[h]=a[h]}}function c(o,a){if(a){Array.isArray(a)||(a=[a]);for(var l=0;l<a.length;l++)g(o,a[l].prototype||a[l])}}function s(o){o||(o={});var a,l;if(o.initialize){if(typeof o.initialize!="function")throw new Error("initialize must be a function");a=o.initialize,delete o.initialize}else if(o.Extends){var p=o.Extends;a=function(){p.apply(this,arguments)}}else a=function(){};o.Extends?(a.prototype=Object.create(o.Extends.prototype),a.prototype.constructor=a,l=o.Extends,delete o.Extends):a.prototype.constructor=a;var h=null;return o.Mixins&&(h=o.Mixins,delete o.Mixins),c(a,h),g(a,o,!0,l),a}s.extend=g,s.mixin=c,s.ignoreFinals=!1,r.exports=s},72283:r=>{var m=function(){};r.exports=m},10618:r=>{var m=function(){return null};r.exports=m},78991:r=>{var m=function(e,u,g,c,s){if(s===void 0&&(s=e),g>0){var o=g-e.length;if(o<=0)return null}if(!Array.isArray(u))return e.indexOf(u)===-1?(e.push(u),c&&c.call(s,u),u):null;for(var a=u.length-1;a>=0;)e.indexOf(u[a])!==-1&&u.splice(a,1),a--;if(a=u.length,a===0)return null;g>0&&a>o&&(u.splice(o),a=o);for(var l=0;l<a;l++){var p=u[l];e.push(p),c&&c.call(s,p)}return u};r.exports=m},48522:r=>{var m=function(e,u,g,c,s,o){if(g===void 0&&(g=0),o===void 0&&(o=e),c>0){var a=c-e.length;if(a<=0)return null}if(!Array.isArray(u))return e.indexOf(u)===-1?(e.splice(g,0,u),s&&s.call(o,u),u):null;for(var l=u.length-1;l>=0;)e.indexOf(u[l])!==-1&&u.pop(),l--;if(l=u.length,l===0)return null;c>0&&l>a&&(u.splice(a),l=a);for(var p=l-1;p>=0;p--){var h=u[p];e.splice(g,0,h),s&&s.call(o,h)}return u};r.exports=m},58742:r=>{var m=function(e,u){var g=e.indexOf(u);return g!==-1&&g<e.length&&(e.splice(g,1),e.push(u)),u};r.exports=m},30164:(r,m,e)=>{var u=e(45838),g=function(c,s,o,a,l){a===void 0&&(a=0),l===void 0&&(l=c.length);var p=0;if(u(c,a,l))for(var h=a;h<l;h++){var f=c[h];f[s]===o&&p++}return p};r.exports=g},36337:r=>{var m=function(e,u,g){var c,s=[null];for(c=3;c<arguments.length;c++)s.push(arguments[c]);for(c=0;c<e.length;c++)s[0]=e[c],u.apply(g,s);return e};r.exports=m},46208:(r,m,e)=>{var u=e(45838),g=function(c,s,o,a,l){if(a===void 0&&(a=0),l===void 0&&(l=c.length),u(c,a,l)){var p,h=[null];for(p=5;p<arguments.length;p++)h.push(arguments[p]);for(p=a;p<l;p++)h[0]=c[p],s.apply(o,h)}return c};r.exports=g},2406:r=>{var m=function(e,u,g){if(u.length){if(u.length===1)return u[0]}else return NaN;var c=1,s,o;if(g){if(e<u[0][g])return u[0];for(;u[c][g]<e;)c++}else for(;u[c]<e;)c++;return c>u.length&&(c=u.length),g?(s=u[c-1][g],o=u[c][g],o-e<=e-s?u[c]:u[c-1]):(s=u[c-1],o=u[c],o-e<=e-s?o:s)};r.exports=m},5454:r=>{var m=function(e,u){u===void 0&&(u=[]);for(var g=0;g<e.length;g++)Array.isArray(e[g])?m(e[g],u):u.push(e[g]);return u};r.exports=m},71608:(r,m,e)=>{var u=e(45838),g=function(c,s,o,a,l){a===void 0&&(a=0),l===void 0&&(l=c.length);var p=[];if(u(c,a,l))for(var h=a;h<l;h++){var f=c[h];(!s||s&&o===void 0&&f.hasOwnProperty(s)||s&&o!==void 0&&f[s]===o)&&p.push(f)}return p};r.exports=g},51463:(r,m,e)=>{var u=e(45838),g=function(c,s,o,a,l){if(a===void 0&&(a=0),l===void 0&&(l=c.length),u(c,a,l))for(var p=a;p<l;p++){var h=c[p];if(!s||s&&o===void 0&&h.hasOwnProperty(s)||s&&o!==void 0&&h[s]===o)return h}return null};r.exports=g},72861:r=>{var m=function(e,u,g){u===void 0&&(u=0),g===void 0&&(g=e.length);var c=u+Math.floor(Math.random()*g);return e[c]===void 0?null:e[c]};r.exports=m},24218:r=>{var m=function(e,u,g){if(u===g)return e;var c=e.indexOf(u),s=e.indexOf(g);if(c<0||s<0)throw new Error("Supplied items must be elements of the same array");return c>s||(e.splice(c,1),s===e.length-1?e.push(u):e.splice(s,0,u)),e};r.exports=m},58258:r=>{var m=function(e,u,g){if(u===g)return e;var c=e.indexOf(u),s=e.indexOf(g);if(c<0||s<0)throw new Error("Supplied items must be elements of the same array");return c<s||(e.splice(c,1),s===0?e.unshift(u):e.splice(s,0,u)),e};r.exports=m},51172:r=>{var m=function(e,u){var g=e.indexOf(u);if(g>0){var c=e[g-1],s=e.indexOf(c);e[g]=c,e[s]=u}return e};r.exports=m},68396:r=>{var m=function(e,u,g){var c=e.indexOf(u);if(c===-1||g<0||g>=e.length)throw new Error("Supplied index out of bounds");return c!==g&&(e.splice(c,1),e.splice(g,0,u)),u};r.exports=m},27555:r=>{var m=function(e,u){var g=e.indexOf(u);if(g!==-1&&g<e.length-1){var c=e[g+1],s=e.indexOf(c);e[g]=c,e[s]=u}return e};r.exports=m},13401:r=>{var m=function(e,u,g,c){var s=[],o,a=!1;if((g||c)&&(a=!0,g||(g=""),c||(c="")),u<e)for(o=e;o>=u;o--)a?s.push(g+o.toString()+c):s.push(o);else for(o=e;o<=u;o++)a?s.push(g+o.toString()+c):s.push(o);return s};r.exports=m},89955:(r,m,e)=>{var u=e(67233),g=function(c,s,o){c===void 0&&(c=0),s===void 0&&(s=null),o===void 0&&(o=1),s===null&&(s=c,c=0);for(var a=[],l=Math.max(u((s-c)/(o||1)),0),p=0;p<l;p++)a.push(c),c+=o;return a};r.exports=g},53466:r=>{function m(g,c,s){var o=g[c];g[c]=g[s],g[s]=o}function e(g,c){return g<c?-1:g>c?1:0}var u=function(g,c,s,o,a){for(s===void 0&&(s=0),o===void 0&&(o=g.length-1),a===void 0&&(a=e);o>s;){if(o-s>600){var l=o-s+1,p=c-s+1,h=Math.log(l),f=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*f*(l-f)/l)*(p-l/2<0?-1:1),y=Math.max(s,Math.floor(c-p*f/l+v)),x=Math.min(o,Math.floor(c+(l-p)*f/l+v));u(g,c,y,x,a)}var S=g[c],E=s,b=o;for(m(g,s,c),a(g[o],S)>0&&m(g,s,o);E<b;){for(m(g,E,b),E++,b--;a(g[E],S)<0;)E++;for(;a(g[b],S)>0;)b--}a(g[s],S)===0?m(g,s,b):(b++,m(g,b,o)),b<=c&&(s=b+1),c<=b&&(o=b-1)}};r.exports=u},75757:(r,m,e)=>{var u=e(10850),g=e(18592),c=function(o,a,l){for(var p=[],h=0;h<o.length;h++)for(var f=0;f<a.length;f++)for(var v=0;v<l;v++)p.push({a:o[h],b:a[f]});return p},s=function(o,a,l){var p=u(l,"max",0),h=u(l,"qty",1),f=u(l,"random",!1),v=u(l,"randomB",!1),y=u(l,"repeat",0),x=u(l,"yoyo",!1),S=[];if(v&&g(a),y===-1)if(p===0)y=0;else{var E=o.length*a.length*h;x&&(E*=2),y=Math.ceil(p/E)}for(var b=0;b<=y;b++){var T=c(o,a,h);f&&g(T),S=S.concat(T),x&&(T.reverse(),S=S.concat(T))}return p&&S.splice(p),S};r.exports=s},66458:(r,m,e)=>{var u=e(72677),g=function(c,s,o,a){a===void 0&&(a=c);var l;if(!Array.isArray(s))return l=c.indexOf(s),l!==-1?(u(c,l),o&&o.call(a,s),s):null;for(var p=s.length-1,h=[];p>=0;){var f=s[p];l=c.indexOf(f),l!==-1&&(u(c,l),h.push(f),o&&o.call(a,f)),p--}return h};r.exports=g},8324:(r,m,e)=>{var u=e(72677),g=function(c,s,o,a){if(a===void 0&&(a=c),s<0||s>c.length-1)throw new Error("Index out of bounds");var l=u(c,s);return o&&o.call(a,l),l};r.exports=g},47427:(r,m,e)=>{var u=e(45838),g=function(c,s,o,a,l){if(s===void 0&&(s=0),o===void 0&&(o=c.length),l===void 0&&(l=c),u(c,s,o)){var p=o-s,h=c.splice(s,p);if(a)for(var f=0;f<h.length;f++){var v=h[f];a.call(l,v)}return h}else return[]};r.exports=g},50147:(r,m,e)=>{var u=e(72677),g=function(c,s,o){s===void 0&&(s=0),o===void 0&&(o=c.length);var a=s+Math.floor(Math.random()*o);return u(c,a)};r.exports=g},80402:r=>{var m=function(e,u,g){var c=e.indexOf(u),s=e.indexOf(g);return c!==-1&&s===-1?(e[c]=g,!0):!1};r.exports=m},77640:r=>{var m=function(e,u){u===void 0&&(u=1);for(var g=null,c=0;c<u;c++)g=e.shift(),e.push(g);return g};r.exports=m},38487:r=>{var m=function(e,u){u===void 0&&(u=1);for(var g=null,c=0;c<u;c++)g=e.pop(),e.unshift(g);return g};r.exports=m},45838:r=>{var m=function(e,u,g,c){var s=e.length;if(u<0||u>s||u>=g||g>s){if(c)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};r.exports=m},27847:r=>{var m=function(e,u){var g=e.indexOf(u);return g!==-1&&g>0&&(e.splice(g,1),e.unshift(u)),u};r.exports=m},6034:(r,m,e)=>{var u=e(45838),g=function(c,s,o,a,l){if(a===void 0&&(a=0),l===void 0&&(l=c.length),u(c,a,l))for(var p=a;p<l;p++){var h=c[p];h.hasOwnProperty(s)&&(h[s]=o)}return c};r.exports=g},18592:r=>{var m=function(e){for(var u=e.length-1;u>0;u--){var g=Math.floor(Math.random()*(u+1)),c=e[u];e[u]=e[g],e[g]=c}return e};r.exports=m},28834:r=>{var m=function(e){var u=/\D/g;return e.sort(function(g,c){return parseInt(g.replace(u,""),10)-parseInt(c.replace(u,""),10)}),e};r.exports=m},72677:r=>{var m=function(e,u){if(!(u>=e.length)){for(var g=e.length-1,c=e[u],s=u;s<g;s++)e[s]=e[s+1];return e.length=g,c}};r.exports=m},17922:(r,m,e)=>{var u=e(77290);function g(a,l){return String(a).localeCompare(l)}function c(a,l){var p=a.length;if(p<=1)return a;for(var h=new Array(p),f=1;f<p;f*=2){s(a,l,f,h);var v=a;a=h,h=v}return a}function s(a,l,p,h){var f=a.length,v=0,y=p*2,x,S,E,b,T;for(x=0;x<f;x+=y)for(S=x+p,E=S+p,S>f&&(S=f),E>f&&(E=f),b=x,T=S;;)if(b<S&&T<E)l(a[b],a[T])<=0?h[v++]=a[b++]:h[v++]=a[T++];else if(b<S)h[v++]=a[b++];else if(T<E)h[v++]=a[T++];else break}var o=function(a,l){if(l===void 0&&(l=g),!a||a.length<2)return a;if(u.features.stableSort)return a.sort(l);var p=c(a,l);return p!==a&&s(p,null,a.length,a),a};r.exports=o},96928:r=>{var m=function(e,u,g){if(u===g)return e;var c=e.indexOf(u),s=e.indexOf(g);if(c<0||s<0)throw new Error("Supplied items must be elements of the same array");return e[c]=g,e[s]=u,e};r.exports=m},59959:(r,m,e)=>{r.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}},97494:r=>{var m=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var u=e[0].length,g=1;g<e.length;g++)if(e[g].length!==u)return!1;return!0};r.exports=m},68428:(r,m,e)=>{var u=e(76400),g=e(97494),c=function(s){var o="";if(!g(s))return o;for(var a=0;a<s.length;a++){for(var l=0;l<s[a].length;l++){var p=s[a][l].toString();p!=="undefined"?o+=u(p,2):o+="?",l<s[a].length-1&&(o+=" |")}if(a<s.length-1){o+=`
`;for(var h=0;h<s[a].length;h++)o+="---",h<s[a].length-1&&(o+="+");o+=`
`}}return o};r.exports=c},59521:r=>{var m=function(e){return e.reverse()};r.exports=m},51995:r=>{var m=function(e){for(var u=0;u<e.length;u++)e[u].reverse();return e};r.exports=m},89011:(r,m,e)=>{var u=e(63515),g=function(c){return u(c,180)};r.exports=g},42549:(r,m,e)=>{var u=e(63515),g=function(c){return u(c,90)};r.exports=g},63515:(r,m,e)=>{var u=e(97494),g=e(78581),c=function(s,o){if(o===void 0&&(o=90),!u(s))return null;if(typeof o!="string"&&(o=(o%360+360)%360),o===90||o===-270||o==="rotateLeft")s=g(s),s.reverse();else if(o===-90||o===270||o==="rotateRight")s.reverse(),s=g(s);else if(Math.abs(o)===180||o==="rotate180"){for(var a=0;a<s.length;a++)s[a].reverse();s.reverse()}return s};r.exports=c},14305:(r,m,e)=>{var u=e(63515),g=function(c){return u(c,-90)};r.exports=g},27365:(r,m,e)=>{var u=e(77640),g=e(38487),c=function(s,o,a){if(o===void 0&&(o=0),a===void 0&&(a=0),a!==0&&(a<0?u(s,Math.abs(a)):g(s,a)),o!==0)for(var l=0;l<s.length;l++){var p=s[l];o<0?u(p,Math.abs(o)):g(p,o)}return s};r.exports=c},78581:r=>{var m=function(e){for(var u=e.length,g=e[0].length,c=new Array(g),s=0;s<g;s++){c[s]=new Array(u);for(var o=u-1;o>-1;o--)c[s][o]=e[o][s]}return c};r.exports=m},13515:(r,m,e)=>{r.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}},40581:r=>{var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(u,g){for(var c=new Uint8Array(u),s=c.length,o=g?"data:"+g+";base64,":"",a=0;a<s;a+=3)o+=m[c[a]>>2],o+=m[(c[a]&3)<<4|c[a+1]>>4],o+=m[(c[a+1]&15)<<2|c[a+2]>>6],o+=m[c[a+2]&63];return s%3===2?o=o.substring(0,o.length-1)+"=":s%3===1&&(o=o.substring(0,o.length-2)+"=="),o};r.exports=e},82329:r=>{for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),u=0;u<m.length;u++)e[m.charCodeAt(u)]=u;var g=function(c){c=c.substr(c.indexOf(",")+1);var s=c.length,o=s*.75,a=0,l,p,h,f;c[s-1]==="="&&(o--,c[s-2]==="="&&o--);for(var v=new ArrayBuffer(o),y=new Uint8Array(v),x=0;x<s;x+=4)l=e[c.charCodeAt(x)],p=e[c.charCodeAt(x+1)],h=e[c.charCodeAt(x+2)],f=e[c.charCodeAt(x+3)],y[a++]=l<<2|p>>4,y[a++]=(p&15)<<4|h>>2,y[a++]=(h&3)<<6|f&63;return v};r.exports=g},78417:(r,m,e)=>{r.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}},22178:(r,m,e)=>{r.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}},32742:r=>{var m=function(e){var u={};for(var g in e)Array.isArray(e[g])?u[g]=e[g].slice(0):u[g]=e[g];return u};r.exports=m},28699:r=>{var m=function(e){var u,g,c;if(typeof e!="object"||e===null)return e;u=Array.isArray(e)?[]:{};for(c in e)g=e[c],u[c]=m(g);return u};r.exports=m},98611:(r,m,e)=>{var u=e(42911),g=function(){var c,s,o,a,l,p,h=arguments[0]||{},f=1,v=arguments.length,y=!1;for(typeof h=="boolean"&&(y=h,h=arguments[1]||{},f=2),v===f&&(h=this,--f);f<v;f++)if((c=arguments[f])!=null)for(s in c)o=h[s],a=c[s],h!==a&&(y&&a&&(u(a)||(l=Array.isArray(a)))?(l?(l=!1,p=o&&Array.isArray(o)?o:[]):p=o&&u(o)?o:{},h[s]=g(y,p,a)):a!==void 0&&(h[s]=a));return h};r.exports=g},20494:(r,m,e)=>{var u=e(5923),g=e(10850),c=function(s,o,a){var l=g(s,o,null);if(l===null)return a;if(Array.isArray(l))return u.RND.pick(l);if(typeof l=="object"){if(l.hasOwnProperty("randInt"))return u.RND.integerInRange(l.randInt[0],l.randInt[1]);if(l.hasOwnProperty("randFloat"))return u.RND.realInRange(l.randFloat[0],l.randFloat[1])}else if(typeof l=="function")return l(o);return l};r.exports=c},72632:r=>{var m=function(e,u,g){var c=typeof e;return!e||c==="number"||c==="string"?g:e.hasOwnProperty(u)&&e[u]!==void 0?e[u]:g};r.exports=m},94324:(r,m,e)=>{var u=e(10850),g=e(82897),c=function(s,o,a,l,p){p===void 0&&(p=a);var h=u(s,o,p);return g(h,a,l)};r.exports=c},10850:r=>{var m=function(e,u,g,c){if(!e&&!c||typeof e=="number")return g;if(e&&e.hasOwnProperty(u))return e[u];if(c&&c.hasOwnProperty(u))return c[u];if(u.indexOf(".")!==-1){for(var s=u.split("."),o=e,a=c,l=g,p=g,h=!0,f=!0,v=0;v<s.length;v++)o&&o.hasOwnProperty(s[v])?(l=o[s[v]],o=o[s[v]]):h=!1,a&&a.hasOwnProperty(s[v])?(p=a[s[v]],a=a[s[v]]):f=!1;return h?l:f?p:g}else return g};r.exports=m},87701:r=>{var m=function(e,u){for(var g=0;g<u.length;g++)if(!e.hasOwnProperty(u[g]))return!1;return!0};r.exports=m},53523:r=>{var m=function(e,u){for(var g=0;g<u.length;g++)if(e.hasOwnProperty(u[g]))return!0;return!1};r.exports=m},19256:r=>{var m=function(e,u){return e.hasOwnProperty(u)};r.exports=m},42911:r=>{var m=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};r.exports=m},30657:(r,m,e)=>{var u=e(32742),g=function(c,s){var o=u(c);for(var a in s)o.hasOwnProperty(a)||(o[a]=s[a]);return o};r.exports=g},72066:(r,m,e)=>{var u=e(32742),g=function(c,s){var o=u(c);for(var a in s)o.hasOwnProperty(a)&&(o[a]=s[a]);return o};r.exports=g},28820:(r,m,e)=>{var u=e(19256),g=function(c,s){for(var o={},a=0;a<s.length;a++){var l=s[a];u(c,l)&&(o[l]=c[l])}return o};r.exports=g},22440:r=>{var m=function(e,u,g){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(u))return e[u]=g,!0;if(u.indexOf(".")!==-1){for(var c=u.split("."),s=e,o=e,a=0;a<c.length;a++)if(s.hasOwnProperty(c[a]))o=s,s=s[c[a]];else return!1;return o[c[c.length-1]]=g,!0}return!1};r.exports=m},64615:(r,m,e)=>{r.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}},69429:r=>{var m=function(e,u){return e.replace(/%([0-9]+)/g,function(g,c){return u[Number(c)-1]})};r.exports=m},76400:r=>{var m=function(e,u,g,c){u===void 0&&(u=0),g===void 0&&(g=" "),c===void 0&&(c=3),e=e.toString();var s=0;if(u+1>=e.length)switch(c){case 1:e=new Array(u+1-e.length).join(g)+e;break;case 3:var o=Math.ceil((s=u-e.length)/2),a=s-o;e=new Array(a+1).join(g)+e+new Array(o+1).join(g);break;default:e=e+new Array(u+1-e.length).join(g);break}return e};r.exports=m},76872:r=>{var m=function(e,u){return u===0?e.slice(1):e.slice(0,u-1)+e.slice(u)};r.exports=m},8051:r=>{var m=function(e){return e.split("").reverse().join("")};r.exports=m},76583:r=>{var m=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var u=Math.random()*16|0,g=e==="x"?u:u&3|8;return g.toString(16)})};r.exports=m},40587:r=>{var m=function(e){return e&&e[0].toUpperCase()+e.slice(1)};r.exports=m},50379:(r,m,e)=>{r.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}}},t={};function n(r){var m=t[r];if(m!==void 0)return m.exports;var e=t[r]={exports:{}};return i[r](e,e.exports,n),e.exports}n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var d=n(92491);return d})())});try{self["workbox:window:7.0.0"]&&_()}catch{}function ex(i,t){return new Promise(function(n){var d=new MessageChannel;d.port1.onmessage=function(r){n(r.data)},i.postMessage(t,[d.port2])})}function ix(i,t){for(var n=0;n<t.length;n++){var d=t[n];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function nx(i,t){(t==null||t>i.length)&&(t=i.length);for(var n=0,d=new Array(t);n<t;n++)d[n]=i[n];return d}function jw(i,t){var n;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(n=function(r,m){if(r){if(typeof r=="string")return nx(r,m);var e=Object.prototype.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?nx(r,m):void 0}}(i))||t&&i&&typeof i.length=="number"){n&&(i=n);var d=0;return function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=i[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:7.0.0"]&&_()}catch{}var Lf=function(){var i=this;this.promise=new Promise(function(t,n){i.resolve=t,i.reject=n})};function Of(i,t){var n=location.href;return new URL(i,n).href===new URL(t,n).href}var Ko=function(i,t){this.type=i,Object.assign(this,t)};function lu(i,t,n){return n?t?t(i):i:(i&&i.then||(i=Promise.resolve(i)),t?i.then(t):i)}function Kw(){}var Jw={type:"SKIP_WAITING"};function rx(i,t){if(!t)return i&&i.then?i.then(Kw):Promise.resolve()}var sx=function(i){var t,n;function d(g,c){var s,o;return c===void 0&&(c={}),(s=i.call(this)||this).nn={},s.tn=0,s.rn=new Lf,s.en=new Lf,s.on=new Lf,s.un=0,s.an=new Set,s.cn=function(){var a=s.fn,l=a.installing;s.tn>0||!Of(l.scriptURL,s.sn.toString())||performance.now()>s.un+6e4?(s.vn=l,a.removeEventListener("updatefound",s.cn)):(s.hn=l,s.an.add(l),s.rn.resolve(l)),++s.tn,l.addEventListener("statechange",s.ln)},s.ln=function(a){var l=s.fn,p=a.target,h=p.state,f=p===s.vn,v={sw:p,isExternal:f,originalEvent:a};!f&&s.mn&&(v.isUpdate=!0),s.dispatchEvent(new Ko(h,v)),h==="installed"?s.wn=self.setTimeout(function(){h==="installed"&&l.waiting===p&&s.dispatchEvent(new Ko("waiting",v))},200):h==="activating"&&(clearTimeout(s.wn),f||s.en.resolve(p))},s.dn=function(a){var l=s.hn,p=l!==navigator.serviceWorker.controller;s.dispatchEvent(new Ko("controlling",{isExternal:p,originalEvent:a,sw:l,isUpdate:s.mn})),p||s.on.resolve(l)},s.gn=(o=function(a){var l=a.data,p=a.ports,h=a.source;return lu(s.getSW(),function(){s.an.has(h)&&s.dispatchEvent(new Ko("message",{data:l,originalEvent:a,ports:p,sw:h}))})},function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];try{return Promise.resolve(o.apply(this,a))}catch(p){return Promise.reject(p)}}),s.sn=g,s.nn=c,navigator.serviceWorker.addEventListener("message",s.gn),s}n=i,(t=d).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,m,e,u=d.prototype;return u.register=function(g){var c=(g===void 0?{}:g).immediate,s=c!==void 0&&c;try{var o=this;return function(a,l){var p=a();return p&&p.then?p.then(l):l(p)}(function(){if(!s&&document.readyState!=="complete")return rx(new Promise(function(a){return window.addEventListener("load",a)}))},function(){return o.mn=!!navigator.serviceWorker.controller,o.yn=o.pn(),lu(o.bn(),function(a){o.fn=a,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var l=o.fn.waiting;return l&&Of(l.scriptURL,o.sn.toString())&&(o.hn=l,Promise.resolve().then(function(){o.dispatchEvent(new Ko("waiting",{sw:l,wasWaitingBeforeRegister:!0}))}).then(function(){})),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn),o.fn})})}catch(a){return Promise.reject(a)}},u.update=function(){try{return this.fn?rx(this.fn.update()):void 0}catch(g){return Promise.reject(g)}},u.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},u.messageSW=function(g){try{return lu(this.getSW(),function(c){return ex(c,g)})}catch(c){return Promise.reject(c)}},u.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&ex(this.fn.waiting,Jw)},u.pn=function(){var g=navigator.serviceWorker.controller;return g&&Of(g.scriptURL,this.sn.toString())?g:void 0},u.bn=function(){try{var g=this;return function(c,s){try{var o=c()}catch(a){return s(a)}return o&&o.then?o.then(void 0,s):o}(function(){return lu(navigator.serviceWorker.register(g.sn,g.nn),function(c){return g.un=performance.now(),c})},function(c){throw c})}catch(c){return Promise.reject(c)}},r=d,(m=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&ix(r.prototype,m),e&&ix(r,e),d}(function(){function i(){this.Pn=new Map}var t=i.prototype;return t.addEventListener=function(n,d){this.Sn(n).add(d)},t.removeEventListener=function(n,d){this.Sn(n).delete(d)},t.dispatchEvent=function(n){n.target=this;for(var d,r=jw(this.Sn(n.type));!(d=r()).done;)(0,d.value)(n)},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},i}());"serviceWorker"in navigator&&window.addEventListener("load",()=>{let i=new sx("sw.js");i.addEventListener("installed",t=>{!1&&t.isUpdate&&confirm("Refresh for new build")&&window.location.reload()}),i.register().then(()=>{console.log("Service worker registered!")}).catch(t=>{console.warn("Error registering service worker:"),console.warn(t)})});var hu=globalThis,uu=hu.ShadowRoot&&(hu.ShadyCSS===void 0||hu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Df=Symbol(),ax=new WeakMap,Jo=class{constructor(t,n,d){if(this._$cssResult$=!0,d!==Df)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}get styleSheet(){let t=this.o,n=this.t;if(uu&&t===void 0){let d=n!==void 0&&n.length===1;d&&(t=ax.get(n)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),d&&ax.set(n,t))}return t}toString(){return this.cssText}},ox=i=>new Jo(typeof i=="string"?i:i+"",void 0,Df),at=(i,...t)=>{let n=i.length===1?i[0]:t.reduce((d,r,m)=>d+(e=>{if(e._$cssResult$===!0)return e.cssText;if(typeof e=="number")return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+i[m+1],i[0]);return new Jo(n,i,Df)},Ff=(i,t)=>{if(uu)i.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(let n of t){let d=document.createElement("style"),r=hu.litNonce;r!==void 0&&d.setAttribute("nonce",r),d.textContent=n.cssText,i.appendChild(d)}},du=uu?i=>i:i=>i instanceof CSSStyleSheet?(t=>{let n="";for(let d of t.cssRules)n+=d.cssText;return ox(n)})(i):i;var{is:Zw,defineProperty:Qw,getOwnPropertyDescriptor:_w,getOwnPropertyNames:qw,getOwnPropertySymbols:t2,getPrototypeOf:e2}=Object,hr=globalThis,lx=hr.trustedTypes,i2=lx?lx.emptyScript:"",Bf=hr.reactiveElementPolyfillSupport,Zo=(i,t)=>i,Qo={toAttribute(i,t){switch(t){case Boolean:i=i?i2:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,t){let n=i;switch(t){case Boolean:n=i!==null;break;case Number:n=i===null?null:Number(i);break;case Object:case Array:try{n=JSON.parse(i)}catch{n=null}}return n}},cu=(i,t)=>!Zw(i,t),hx={attribute:!0,type:String,converter:Qo,reflect:!1,hasChanged:cu};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),hr.litPropertyMetadata??(hr.litPropertyMetadata=new WeakMap);var Rn=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,n=hx){if(n.state&&(n.attribute=!1),this._$Ei(),this.elementProperties.set(t,n),!n.noAccessor){let d=Symbol(),r=this.getPropertyDescriptor(t,d,n);r!==void 0&&Qw(this.prototype,t,r)}}static getPropertyDescriptor(t,n,d){let{get:r,set:m}=_w(this.prototype,t)??{get(){return this[n]},set(e){this[n]=e}};return{get(){return r==null?void 0:r.call(this)},set(e){let u=r==null?void 0:r.call(this);m.call(this,e),this.requestUpdate(t,u,d)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??hx}static _$Ei(){if(this.hasOwnProperty(Zo("elementProperties")))return;let t=e2(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(Zo("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Zo("properties"))){let n=this.properties,d=[...qw(n),...t2(n)];for(let r of d)this.createProperty(r,n[r])}let t=this[Symbol.metadata];if(t!==null){let n=litPropertyMetadata.get(t);if(n!==void 0)for(let[d,r]of n)this.elementProperties.set(d,r)}this._$Eh=new Map;for(let[n,d]of this.elementProperties){let r=this._$Eu(n,d);r!==void 0&&this._$Eh.set(r,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let n=[];if(Array.isArray(t)){let d=new Set(t.flat(1/0).reverse());for(let r of d)n.unshift(du(r))}else t!==void 0&&n.push(du(t));return n}static _$Eu(t,n){let d=n.attribute;return d===!1?void 0:typeof d=="string"?d:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$Eg=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$ES(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(n=>n(this))}addController(t){var n;(this._$E_??(this._$E_=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((n=t.hostConnected)==null||n.call(t))}removeController(t){var n;(n=this._$E_)==null||n.delete(t)}_$ES(){let t=new Map,n=this.constructor.elementProperties;for(let d of n.keys())this.hasOwnProperty(d)&&(t.set(d,this[d]),delete this[d]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Ff(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$E_)==null||t.forEach(n=>{var d;return(d=n.hostConnected)==null?void 0:d.call(n)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$E_)==null||t.forEach(n=>{var d;return(d=n.hostDisconnected)==null?void 0:d.call(n)})}attributeChangedCallback(t,n,d){this._$AK(t,d)}_$EO(t,n){var m;let d=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,d);if(r!==void 0&&d.reflect===!0){let e=(((m=d.converter)==null?void 0:m.toAttribute)!==void 0?d.converter:Qo).toAttribute(n,d.type);this._$Em=t,e==null?this.removeAttribute(r):this.setAttribute(r,e),this._$Em=null}}_$AK(t,n){var m;let d=this.constructor,r=d._$Eh.get(t);if(r!==void 0&&this._$Em!==r){let e=d.getPropertyOptions(r),u=typeof e.converter=="function"?{fromAttribute:e.converter}:((m=e.converter)==null?void 0:m.fromAttribute)!==void 0?e.converter:Qo;this._$Em=r,this[r]=u.fromAttribute(n,e.type),this._$Em=null}}requestUpdate(t,n,d,r=!1,m){if(t!==void 0){if(d??(d=this.constructor.getPropertyOptions(t)),!(d.hasChanged??cu)(r?m:this[t],n))return;this.C(t,n,d)}this.isUpdatePending===!1&&(this._$Eg=this._$EP())}C(t,n,d){this._$AL.has(t)||this._$AL.set(t,n),d.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(n){Promise.reject(n)}let t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var d;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[m,e]of this._$Ep)this[m]=e;this._$Ep=void 0}let r=this.constructor.elementProperties;if(r.size>0)for(let[m,e]of r)e.wrapped!==!0||this._$AL.has(m)||this[m]===void 0||this.C(m,this[m],e)}let t=!1,n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(d=this._$E_)==null||d.forEach(r=>{var m;return(m=r.hostUpdate)==null?void 0:m.call(r)}),this.update(n)):this._$ET()}catch(r){throw t=!1,this._$ET(),r}t&&this._$AE(n)}willUpdate(t){}_$AE(t){var n;(n=this._$E_)==null||n.forEach(d=>{var r;return(r=d.hostUpdated)==null?void 0:r.call(d)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(n=>this._$EO(n,this[n]))),this._$ET()}updated(t){}firstUpdated(t){}};Rn.elementStyles=[],Rn.shadowRootOptions={mode:"open"},Rn[Zo("elementProperties")]=new Map,Rn[Zo("finalized")]=new Map,Bf==null||Bf({ReactiveElement:Rn}),(hr.reactiveElementVersions??(hr.reactiveElementVersions=[])).push("2.0.2");var qo=globalThis,fu=qo.trustedTypes,ux=fu?fu.createPolicy("lit-html",{createHTML:i=>i}):void 0,Vf="$lit$",Mn=`lit$${(Math.random()+"").slice(9)}$`,Gf="?"+Mn,n2=`<${Gf}>`,ns=document,tl=()=>ns.createComment(""),el=i=>i===null||typeof i!="object"&&typeof i!="function",vx=Array.isArray,gx=i=>vx(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",Nf=`[ 	
\f\r]`,_o=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,dx=/-->/g,cx=/>/g,es=RegExp(`>|${Nf}(?:([^\\s"'>=/]+)(${Nf}*=${Nf}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),fx=/'/g,px=/"/g,yx=/^(?:script|style|textarea|title)$/i,xx=i=>(t,...n)=>({_$litType$:i,strings:t,values:n}),q=xx(1),Sx=xx(2),Ln=Symbol.for("lit-noChange"),At=Symbol.for("lit-nothing"),mx=new WeakMap,is=ns.createTreeWalker(ns,129);function Ex(i,t){if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return ux!==void 0?ux.createHTML(t):t}var Tx=(i,t)=>{let n=i.length-1,d=[],r,m=t===2?"<svg>":"",e=_o;for(let u=0;u<n;u++){let g=i[u],c,s,o=-1,a=0;for(;a<g.length&&(e.lastIndex=a,s=e.exec(g),s!==null);)a=e.lastIndex,e===_o?s[1]==="!--"?e=dx:s[1]!==void 0?e=cx:s[2]!==void 0?(yx.test(s[2])&&(r=RegExp("</"+s[2],"g")),e=es):s[3]!==void 0&&(e=es):e===es?s[0]===">"?(e=r??_o,o=-1):s[1]===void 0?o=-2:(o=e.lastIndex-s[2].length,c=s[1],e=s[3]===void 0?es:s[3]==='"'?px:fx):e===px||e===fx?e=es:e===dx||e===cx?e=_o:(e=es,r=void 0);let l=e===es&&i[u+1].startsWith("/>")?" ":"";m+=e===_o?g+n2:o>=0?(d.push(c),g.slice(0,o)+Vf+g.slice(o)+Mn+l):g+Mn+(o===-2?u:l)}return[Ex(i,m+(i[n]||"<?>")+(t===2?"</svg>":"")),d]},rs=class{constructor({strings:t,_$litType$:n},d){let r;this.parts=[];let m=0,e=0,u=t.length-1,g=this.parts,[c,s]=Tx(t,n);if(this.el=rs.createElement(c,d),is.currentNode=this.el.content,n===2){let o=this.el.content.firstChild;o.replaceWith(...o.childNodes)}for(;(r=is.nextNode())!==null&&g.length<u;){if(r.nodeType===1){if(r.hasAttributes())for(let o of r.getAttributeNames())if(o.endsWith(Vf)){let a=s[e++],l=r.getAttribute(o).split(Mn),p=/([.?@])?(.*)/.exec(a);g.push({type:1,index:m,name:p[2],strings:l,ctor:p[1]==="."?mu:p[1]==="?"?vu:p[1]==="@"?gu:as}),r.removeAttribute(o)}else o.startsWith(Mn)&&(g.push({type:6,index:m}),r.removeAttribute(o));if(yx.test(r.tagName)){let o=r.textContent.split(Mn),a=o.length-1;if(a>0){r.textContent=fu?fu.emptyScript:"";for(let l=0;l<a;l++)r.append(o[l],tl()),is.nextNode(),g.push({type:2,index:++m});r.append(o[a],tl())}}}else if(r.nodeType===8)if(r.data===Gf)g.push({type:2,index:m});else{let o=-1;for(;(o=r.data.indexOf(Mn,o+1))!==-1;)g.push({type:7,index:m}),o+=Mn.length-1}m++}}static createElement(t,n){let d=ns.createElement("template");return d.innerHTML=t,d}};function ss(i,t,n=i,d){var e,u;if(t===Ln)return t;let r=d!==void 0?(e=n._$Co)==null?void 0:e[d]:n._$Cl,m=el(t)?void 0:t._$litDirective$;return(r==null?void 0:r.constructor)!==m&&((u=r==null?void 0:r._$AO)==null||u.call(r,!1),m===void 0?r=void 0:(r=new m(i),r._$AT(i,n,d)),d!==void 0?(n._$Co??(n._$Co=[]))[d]=r:n._$Cl=r),r!==void 0&&(t=ss(i,r._$AS(i,t.values),r,d)),t}var pu=class{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:n},parts:d}=this._$AD,r=((t==null?void 0:t.creationScope)??ns).importNode(n,!0);is.currentNode=r;let m=is.nextNode(),e=0,u=0,g=d[0];for(;g!==void 0;){if(e===g.index){let c;g.type===2?c=new ur(m,m.nextSibling,this,t):g.type===1?c=new g.ctor(m,g.name,g.strings,this,t):g.type===6&&(c=new yu(m,this,t)),this._$AV.push(c),g=d[++u]}e!==(g==null?void 0:g.index)&&(m=is.nextNode(),e++)}return is.currentNode=ns,r}p(t){let n=0;for(let d of this._$AV)d!==void 0&&(d.strings!==void 0?(d._$AI(t,d,n),n+=d.strings.length-2):d._$AI(t[n])),n++}},ur=class{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,n,d,r){this.type=2,this._$AH=At,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=d,this.options=r,this._$Cv=(r==null?void 0:r.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode,n=this._$AM;return n!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=ss(this,t,n),el(t)?t===At||t==null||t===""?(this._$AH!==At&&this._$AR(),this._$AH=At):t!==this._$AH&&t!==Ln&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):gx(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==At&&el(this._$AH)?this._$AA.nextSibling.data=t:this.$(ns.createTextNode(t)),this._$AH=t}g(t){var m;let{values:n,_$litType$:d}=t,r=typeof d=="number"?this._$AC(t):(d.el===void 0&&(d.el=rs.createElement(Ex(d.h,d.h[0]),this.options)),d);if(((m=this._$AH)==null?void 0:m._$AD)===r)this._$AH.p(n);else{let e=new pu(r,this),u=e.u(this.options);e.p(n),this.$(u),this._$AH=e}}_$AC(t){let n=mx.get(t.strings);return n===void 0&&mx.set(t.strings,n=new rs(t)),n}T(t){vx(this._$AH)||(this._$AH=[],this._$AR());let n=this._$AH,d,r=0;for(let m of t)r===n.length?n.push(d=new ur(this.k(tl()),this.k(tl()),this,this.options)):d=n[r],d._$AI(m),r++;r<n.length&&(this._$AR(d&&d._$AB.nextSibling,r),n.length=r)}_$AR(t=this._$AA.nextSibling,n){var d;for((d=this._$AP)==null?void 0:d.call(this,!1,!0,n);t&&t!==this._$AB;){let r=t.nextSibling;t.remove(),t=r}}setConnected(t){var n;this._$AM===void 0&&(this._$Cv=t,(n=this._$AP)==null||n.call(this,t))}},as=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,n,d,r,m){this.type=1,this._$AH=At,this._$AN=void 0,this.element=t,this.name=n,this._$AM=r,this.options=m,d.length>2||d[0]!==""||d[1]!==""?(this._$AH=Array(d.length-1).fill(new String),this.strings=d):this._$AH=At}_$AI(t,n=this,d,r){let m=this.strings,e=!1;if(m===void 0)t=ss(this,t,n,0),e=!el(t)||t!==this._$AH&&t!==Ln,e&&(this._$AH=t);else{let u=t,g,c;for(t=m[0],g=0;g<m.length-1;g++)c=ss(this,u[d+g],n,g),c===Ln&&(c=this._$AH[g]),e||(e=!el(c)||c!==this._$AH[g]),c===At?t=At:t!==At&&(t+=(c??"")+m[g+1]),this._$AH[g]=c}e&&!r&&this.O(t)}O(t){t===At?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},mu=class extends as{constructor(){super(...arguments),this.type=3}O(t){this.element[this.name]=t===At?void 0:t}},vu=class extends as{constructor(){super(...arguments),this.type=4}O(t){this.element.toggleAttribute(this.name,!!t&&t!==At)}},gu=class extends as{constructor(t,n,d,r,m){super(t,n,d,r,m),this.type=5}_$AI(t,n=this){if((t=ss(this,t,n,0)??At)===Ln)return;let d=this._$AH,r=t===At&&d!==At||t.capture!==d.capture||t.once!==d.once||t.passive!==d.passive,m=t!==At&&(d===At||r);r&&this.element.removeEventListener(this.name,this,d),m&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,t):this._$AH.handleEvent(t)}},yu=class{constructor(t,n,d){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=d}get _$AU(){return this._$AM._$AU}_$AI(t){ss(this,t)}},bx={j:Vf,P:Mn,A:Gf,C:1,M:Tx,L:pu,R:gx,V:ss,D:ur,I:as,H:vu,N:gu,U:mu,B:yu},kf=qo.litHtmlPolyfillSupport;kf==null||kf(rs,ur),(qo.litHtmlVersions??(qo.litHtmlVersions=[])).push("3.1.0");var Cx=(i,t,n)=>{let d=(n==null?void 0:n.renderBefore)??t,r=d._$litPart$;if(r===void 0){let m=(n==null?void 0:n.renderBefore)??null;d._$litPart$=r=new ur(t.insertBefore(tl(),m),m,void 0,n??{})}return r._$AI(i),r};var yt=class extends Rn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;let t=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=t.firstChild),t}update(t){let n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Cx(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Ln}},Px;yt._$litElement$=!0,yt["finalized"]=!0,(Px=globalThis.litElementHydrateSupport)==null||Px.call(globalThis,{LitElement:yt});var Uf=globalThis.litElementPolyfillSupport;Uf==null||Uf({LitElement:yt});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.0.2");var lt=i=>(t,n)=>{n!==void 0?n.addInitializer(()=>{customElements.define(i,t)}):customElements.define(i,t)};var r2={attribute:!0,type:String,converter:Qo,reflect:!1,hasChanged:cu},s2=(i=r2,t,n)=>{let{kind:d,metadata:r}=n,m=globalThis.litPropertyMetadata.get(r);if(m===void 0&&globalThis.litPropertyMetadata.set(r,m=new Map),m.set(n.name,i),d==="accessor"){let{name:e}=n;return{set(u){let g=t.get.call(this);t.set.call(this,u),this.requestUpdate(e,g,i)},init(u){return u!==void 0&&this.C(e,void 0,i),u}}}if(d==="setter"){let{name:e}=n;return function(u){let g=this[e];t.call(this,u),this.requestUpdate(e,g,i)}}throw Error("Unsupported decorator location: "+d)};function It(i){return(t,n)=>typeof n=="object"?s2(i,t,n):((d,r,m)=>{let e=r.hasOwnProperty(m);return r.constructor.createProperty(m,e?{...d,wrapped:!0}:d),e?Object.getOwnPropertyDescriptor(r,m):void 0})(i,t,n)}function qt(i){return It({...i,state:!0,attribute:!1})}var os=(i,t,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&typeof t!="object"&&Object.defineProperty(i,t,n),n);function Ye(i,t){return(n,d,r)=>{let m=e=>{var u;return((u=e.renderRoot)==null?void 0:u.querySelector(i))??null};if(t){let{get:e,set:u}=typeof d=="object"?n:r??(()=>{let g=Symbol();return{get(){return this[g]},set(c){this[g]=c}}})();return os(n,d,{get(){let g=e.call(this);return g===void 0&&(g=m(this),(g!==null||this.hasUpdated)&&u.call(this,g)),g}})}return os(n,d,{get(){return m(this)}})}}async function a2(){globalThis&&"URLPattern"in globalThis||await import("/scripts/polyfills/urlpatternPolyfill.js")}var q4=a2();function Bt(i,t,n){return i?t(i):n==null?void 0:n(i)}var je=at`
  .border-normal {
    border-radius: var(--border-radius);
    border: var(--border-width) solid var(--primary-navy);
  }

  .rounded-t {
    border-radius: var(--border-radius) var(--border-radius) 0 0;
  }
  .rounded-b {
    border-radius: 0 0 var(--border-radius) var(--border-radius);
  }
`,dr=at`
  .remove-btn-style {
    padding: 0;
    outline: none;
    -webkit-tap-highlight-color: transparent;
    border: none;
    background: none;
    cursor: pointer;
  }
`,wx=at`
  .block-pointers {
    pointer-events: auto;
  }
`,Qt=at`
  button {
    font-family: inherit;
    font-size: 20px;

    border: none;
    border-radius: 3px;
    background-color: var(--normal);
    color: #000000;
    cursor: pointer;
  }
  button:hover {
    filter: brightness(1.1);
  }
  button.primary {
    background-color: var(--primary);
    color: #ffffff;
  }
  button.secondary {
    background-color: var(--secondary);
    color: #ffffff;
  }
  button:disabled {
    background-color: gray;
    color: lightgray;
  }
`,xu=at`
  .green-container {
    border-radius: 6px;
    background: var(--primary);
    padding: 4px;
    box-shadow: 0px -4px 0px 0px var(--primary-lowlight) inset;
    border: 2px solid var(--primary-navy);
  }
`,Su=at`
  .heading-1 {
    /* Heading 1 */
    font-family: Ubuntu;
    font-size: 20px;
    font-style: normal;
    font-weight: 700;
    line-height: normal;
    text-transform: capitalize;
    @media (min-width: 1000px) {
      font-size: 30px;
    }
  }
  .body-copy {
    font-family: Ubuntu;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
    @media (min-width: 1000px) {
      font-size: 21px;
    }
  }

  .skip-intro-copy {
    font-family: Ubuntu;
    font-size: 14px;
    font-style: normal;
    font-weight: 500;
    line-height: normal;
  }
`;var AS=Le(Ax(),1);var _e={ButtonSelect_1:{src:"assets/audio/ButtonSelect_01.mp3"},ButtonSelect_2:{src:"assets/audio/ButtonSelect_02.mp3"},ButtonSelect_3:{src:"assets/audio/ButtonSelect_03.mp3"},Error:{src:"assets/audio/Error.mp3"},EmailNotification:{src:"assets/audio/Email_Notification.mp3"},EmailOpen:{src:"assets/audio/Email_Open.mp3"},Swipe:{src:"assets/audio/Swipe.mp3"},Success:{src:"assets/audio/Success.mp3"},PopIn:{src:"assets/audio/Pop_In.mp3"},PopOut:{src:"assets/audio/Pop_Out.mp3"},Purchase:{src:"assets/audio/Purchase.mp3"},Sale:{src:"assets/audio/Sale.mp3"},OrderTaken:{src:"assets/audio/Order_Taken.mp3"},Report:{src:"assets/audio/Report.mp3"}},zf={MenuMusic:{src:"assets/audio/Music_Menu_Loop.mp3",loop:!0},GameMusic:{src:"assets/audio/Music_Game_Loop.mp3",loop:!0}};function bu(){throw new Error("Cycle detected")}var o2=Symbol.for("preact-signals");function Wf(){if(ha>1)ha--;else{for(var i,t=!1;il!==void 0;){var n=il;for(il=void 0,Hf++;n!==void 0;){var d=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Rx(n))try{n.c()}catch(r){t||(i=r,t=!0)}n=d}}if(Hf=0,ha--,t)throw i}}var fe=void 0;var il=void 0,ha=0,Hf=0,Tu=0;function Ix(i){if(fe!==void 0){var t=i.n;if(t===void 0||t.t!==fe)return t={i:0,S:i,p:fe.s,n:void 0,t:fe,e:void 0,x:void 0,r:t},fe.s!==void 0&&(fe.s.n=t),fe.s=t,i.n=t,32&fe.f&&i.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=fe.s,t.n=void 0,fe.s.n=t,fe.s=t),t}}function Ue(i){this.v=i,this.i=0,this.n=void 0,this.t=void 0}Ue.prototype.brand=o2;Ue.prototype.h=function(){return!0};Ue.prototype.S=function(i){this.t!==i&&i.e===void 0&&(i.x=this.t,this.t!==void 0&&(this.t.e=i),this.t=i)};Ue.prototype.U=function(i){if(this.t!==void 0){var t=i.e,n=i.x;t!==void 0&&(t.x=n,i.e=void 0),n!==void 0&&(n.e=t,i.x=void 0),i===this.t&&(this.t=n)}};Ue.prototype.subscribe=function(i){var t=this;return pe(function(){var n=t.value,d=32&this.f;this.f&=-33;try{i(n)}finally{this.f|=d}})};Ue.prototype.valueOf=function(){return this.value};Ue.prototype.toString=function(){return this.value+""};Ue.prototype.toJSON=function(){return this.value};Ue.prototype.peek=function(){return this.v};Object.defineProperty(Ue.prototype,"value",{get:function(){var i=Ix(this);return i!==void 0&&(i.i=this.i),this.v},set:function(i){if(fe instanceof cr&&function(){throw new Error("Computed cannot have side-effects")}(),i!==this.v){Hf>100&&bu(),this.v=i,this.i++,Tu++,ha++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{Wf()}}}});function Et(i){return new Ue(i)}function Rx(i){for(var t=i.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Mx(i){for(var t=i.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){i.s=t;break}}}function Lx(i){for(var t=i.s,n=void 0;t!==void 0;){var d=t.p;t.i===-1?(t.S.U(t),d!==void 0&&(d.n=t.n),t.n!==void 0&&(t.n.p=d)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=d}i.s=n}function cr(i){Ue.call(this,void 0),this.x=i,this.s=void 0,this.g=Tu-1,this.f=4}(cr.prototype=new Ue).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Tu))return!0;if(this.g=Tu,this.f|=1,this.i>0&&!Rx(this))return this.f&=-2,!0;var i=fe;try{Mx(this),fe=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return fe=i,Lx(this),this.f&=-2,!0};cr.prototype.S=function(i){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}Ue.prototype.S.call(this,i)};cr.prototype.U=function(i){if(this.t!==void 0&&(Ue.prototype.U.call(this,i),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};cr.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;i!==void 0;i=i.x)i.t.N()}};cr.prototype.peek=function(){if(this.h()||bu(),16&this.f)throw this.v;return this.v};Object.defineProperty(cr.prototype,"value",{get:function(){1&this.f&&bu();var i=Ix(this);if(this.h(),i!==void 0&&(i.i=this.i),16&this.f)throw this.v;return this.v}});function Cu(i){return new cr(i)}function Ox(i){var t=i.u;if(i.u=void 0,typeof t=="function"){ha++;var n=fe;fe=void 0;try{t()}catch(d){throw i.f&=-2,i.f|=8,$f(i),d}finally{fe=n,Wf()}}}function $f(i){for(var t=i.s;t!==void 0;t=t.n)t.S.U(t);i.x=void 0,i.s=void 0,Ox(i)}function l2(i){if(fe!==this)throw new Error("Out-of-order effect");Lx(this),fe=i,this.f&=-2,8&this.f&&$f(this),Wf()}function nl(i){this.x=i,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}nl.prototype.c=function(){var i=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{i()}};nl.prototype.S=function(){1&this.f&&bu(),this.f|=1,this.f&=-9,Ox(this),Mx(this),ha++;var i=fe;return fe=this,l2.bind(this,i)};nl.prototype.N=function(){2&this.f||(this.f|=2,this.o=il,il=this)};nl.prototype.d=function(){this.f|=8,1&this.f||$f(this)};function pe(i){var t=new nl(i);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}function Tt(i){return class extends i{performUpdate(){var t;if(this.isUpdatePending===!1)return;(t=this._$Oo)===null||t===void 0||t.call(this);let n=!0;this._$Oo=pe(()=>{n?(n=!1,super.performUpdate()):this.requestUpdate()})}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Oo)===null||t===void 0||t.call(this)}}}var rl={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},sl=i=>(...t)=>({_$litDirective$:i,values:t}),ls=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,d){this._$Ct=t,this._$AM=n,this._$Ci=d}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}};var{D:v9}=bx;var Dx=i=>i.strings===void 0;var al=(i,t)=>{var d;let n=i._$AN;if(n===void 0)return!1;for(let r of n)(d=r._$AO)==null||d.call(r,t,!1),al(r,t);return!0},Pu=i=>{let t,n;do{if((t=i._$AM)===void 0)break;n=t._$AN,n.delete(i),i=t}while((n==null?void 0:n.size)===0)},Fx=i=>{for(let t;t=i._$AM;i=t){let n=t._$AN;if(n===void 0)t._$AN=n=new Set;else if(n.has(i))break;n.add(i),d2(t)}};function h2(i){this._$AN!==void 0?(Pu(this),this._$AM=i,Fx(this)):this._$AM=i}function u2(i,t=!1,n=0){let d=this._$AH,r=this._$AN;if(r!==void 0&&r.size!==0)if(t)if(Array.isArray(d))for(let m=n;m<d.length;m++)al(d[m],!1),Pu(d[m]);else d!=null&&(al(d,!1),Pu(d));else al(this,i)}var d2=i=>{i.type==rl.CHILD&&(i._$AP??(i._$AP=u2),i._$AQ??(i._$AQ=h2))},wu=class extends ls{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,n,d){super._$AT(t,n,d),Fx(this),this.isConnected=t._$AU}_$AO(t,n=!0){var d,r;t!==this.isConnected&&(this.isConnected=t,t?(d=this.reconnected)==null||d.call(this):(r=this.disconnected)==null||r.call(this)),n&&(al(this,t),Pu(this))}setValue(t){if(Dx(this._$Ct))this._$Ct._$AI(t,this);else{let n=[...this._$Ct._$AH];n[this._$Ci]=t,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}};var fr=sl(class extends wu{render(i){var t;if(i!==this._$Oi){(t=this._$Oo)===null||t===void 0||t.call(this),this._$Oi=i;let n=!0;this._$Oo=i.subscribe(d=>{n===!1&&this.setValue(d)}),n=!1}return i.peek()}disconnected(){var i;(i=this._$Oo)===null||i===void 0||i.call(this)}reconnected(){var i;this._$Oo=(i=this._$Oi)===null||i===void 0?void 0:i.subscribe(t=>{this.setValue(t)})}});var Xf=i=>(t,...n)=>i(t,...n.map(d=>d instanceof Ue?fr(d):d)),c2=Xf(q),f2=Xf(Sx);var Bx=Object.prototype.toString;function ol(i){switch(Bx.call(i)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return dn(i,Error)}}function ua(i,t){return Bx.call(i)===`[object ${t}]`}function da(i){return ua(i,"ErrorEvent")}function Au(i){return ua(i,"DOMError")}function Yf(i){return ua(i,"DOMException")}function li(i){return ua(i,"String")}function ca(i){return typeof i=="object"&&i!==null&&"__sentry_template_string__"in i&&"__sentry_template_values__"in i}function hs(i){return i===null||ca(i)||typeof i!="object"&&typeof i!="function"}function Ui(i){return ua(i,"Object")}function us(i){return typeof Event<"u"&&dn(i,Event)}function jf(i){return typeof Element<"u"&&dn(i,Element)}function Kf(i){return ua(i,"RegExp")}function un(i){return!!(i&&i.then&&typeof i.then=="function")}function Jf(i){return Ui(i)&&"nativeEvent"in i&&"preventDefault"in i&&"stopPropagation"in i}function Zf(i){return typeof i=="number"&&i!==i}function dn(i,t){try{return i instanceof t}catch{return!1}}function ll(i){return!!(typeof i=="object"&&i!==null&&(i.__isVue||i._isVue))}function cn(i,t=0){return typeof i!="string"||t===0||i.length<=t?i:`${i.slice(0,t)}...`}function Iu(i,t){if(!Array.isArray(i))return"";let n=[];for(let d=0;d<i.length;d++){let r=i[d];try{ll(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Nx(i,t,n=!1){return li(i)?Kf(t)?t.test(i):li(t)?n?i===t:i.includes(t):!1:!1}function fa(i,t=[],n=!1){return t.some(d=>Nx(i,d,n))}function hl(i,t,n=250,d,r,m,e){if(!m.exception||!m.exception.values||!e||!dn(e.originalException,Error))return;let u=m.exception.values.length>0?m.exception.values[m.exception.values.length-1]:void 0;u&&(m.exception.values=p2(Qf(i,t,r,e.originalException,d,m.exception.values,u,0),n))}function Qf(i,t,n,d,r,m,e,u){if(m.length>=n+1)return m;let g=[...m];if(dn(d[r],Error)){kx(e,u);let c=i(t,d[r]),s=g.length;Vx(c,r,s,u),g=Qf(i,t,n,d[r],r,[c,...g],c,s)}return Array.isArray(d.errors)&&d.errors.forEach((c,s)=>{if(dn(c,Error)){kx(e,u);let o=i(t,c),a=g.length;Vx(o,`errors[${s}]`,a,u),g=Qf(i,t,n,c,r,[o,...g],o,a)}}),g}function kx(i,t){i.mechanism=i.mechanism||{type:"generic",handled:!0},i.mechanism={...i.mechanism,...i.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Vx(i,t,n,d){i.mechanism=i.mechanism||{type:"generic",handled:!0},i.mechanism={...i.mechanism,type:"chained",source:t,exception_id:n,parent_id:d}}function p2(i,t){return i.map(n=>(n.value&&(n.value=cn(n.value,t)),n))}function Ru(i){return i&&i.Math==Math?i:void 0}var bt=typeof globalThis=="object"&&Ru(globalThis)||typeof window=="object"&&Ru(window)||typeof self=="object"&&Ru(self)||typeof global=="object"&&Ru(global)||function(){return this}()||{};function ds(){return bt}function ul(i,t,n){let d=n||bt,r=d.__SENTRY__=d.__SENTRY__||{};return r[i]||(r[i]=t())}var _f=ds(),m2=80;function dl(i,t={}){if(!i)return"<unknown>";try{let n=i,d=5,r=[],m=0,e=0,u=" > ",g=u.length,c,s=Array.isArray(t)?t:t.keyAttrs,o=!Array.isArray(t)&&t.maxStringLength||m2;for(;n&&m++<d&&(c=v2(n,s),!(c==="html"||m>1&&e+r.length*g+c.length>=o));)r.push(c),e+=c.length,n=n.parentNode;return r.reverse().join(u)}catch{return"<unknown>"}}function v2(i,t){let n=i,d=[],r,m,e,u,g;if(!n||!n.tagName)return"";if(_f.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;d.push(n.tagName.toLowerCase());let c=t&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(c&&c.length)c.forEach(o=>{d.push(`[${o[0]}="${o[1]}"]`)});else if(n.id&&d.push(`#${n.id}`),r=n.className,r&&li(r))for(m=r.split(/\s+/),g=0;g<m.length;g++)d.push(`.${m[g]}`);let s=["aria-label","type","name","title","alt"];for(g=0;g<s.length;g++)e=s[g],u=n.getAttribute(e),u&&d.push(`[${e}="${u}"]`);return d.join("")}function qf(){try{return _f.document.location.href}catch{return""}}function tp(i){if(!_f.HTMLElement)return null;let t=i,n=5;for(let d=0;d<n;d++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}var fn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var g2="Sentry Logger ",cl=["debug","info","warn","error","log","assert","trace"],pa={};function pr(i){if(!("console"in bt))return i();let t=bt.console,n={},d=Object.keys(pa);d.forEach(r=>{let m=pa[r];n[r]=t[r],t[r]=m});try{return i()}finally{d.forEach(r=>{t[r]=n[r]})}}function y2(){let i=!1,t={enable:()=>{i=!0},disable:()=>{i=!1},isEnabled:()=>i};return fn?cl.forEach(n=>{t[n]=(...d)=>{i&&pr(()=>{bt.console[n](`${g2}[${n}]:`,...d)})}}):cl.forEach(n=>{t[n]=()=>{}}),t}var ft=y2();var x2=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function S2(i){return i==="http"||i==="https"}function Ii(i,t=!1){let{host:n,path:d,pass:r,port:m,projectId:e,protocol:u,publicKey:g}=i;return`${u}://${g}${t&&r?`:${r}`:""}@${n}${m?`:${m}`:""}/${d&&`${d}/`}${e}`}function Gx(i){let t=x2.exec(i);if(!t){pr(()=>{console.error(`Invalid Sentry Dsn: ${i}`)});return}let[n,d,r="",m,e="",u]=t.slice(1),g="",c=u,s=c.split("/");if(s.length>1&&(g=s.slice(0,-1).join("/"),c=s.pop()),c){let o=c.match(/^\d+/);o&&(c=o[0])}return Ux({host:m,pass:r,path:g,projectId:c,port:e,protocol:n,publicKey:d})}function Ux(i){return{protocol:i.protocol,publicKey:i.publicKey||"",pass:i.pass||"",host:i.host,port:i.port||"",path:i.path||"",projectId:i.projectId}}function E2(i){if(!fn)return!0;let{port:t,projectId:n,protocol:d}=i;return["protocol","publicKey","host","projectId"].find(e=>i[e]?!1:(ft.error(`Invalid Sentry Dsn: ${e} missing`),!0))?!1:n.match(/^\d+$/)?S2(d)?t&&isNaN(parseInt(t,10))?(ft.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(ft.error(`Invalid Sentry Dsn: Invalid protocol ${d}`),!1):(ft.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Mu(i){let t=typeof i=="string"?Gx(i):Ux(i);if(!(!t||!E2(t)))return t}var Ke=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};function oe(i,t,n){if(!(t in i))return;let d=i[t],r=n(d);typeof r=="function"&&Lu(r,d),i[t]=r}function On(i,t,n){try{Object.defineProperty(i,t,{value:n,writable:!0,configurable:!0})}catch{fn&&ft.log(`Failed to add non-enumerable property "${t}" to object`,i)}}function Lu(i,t){try{let n=t.prototype||{};i.prototype=t.prototype=n,On(i,"__sentry_original__",t)}catch{}}function cs(i){return i.__sentry_original__}function ip(i){return Object.keys(i).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(i[t])}`).join("&")}function Ou(i){if(ol(i))return{message:i.message,name:i.name,stack:i.stack,...Hx(i)};if(us(i)){let t={type:i.type,target:zx(i.target),currentTarget:zx(i.currentTarget),...Hx(i)};return typeof CustomEvent<"u"&&dn(i,CustomEvent)&&(t.detail=i.detail),t}else return i}function zx(i){try{return jf(i)?dl(i):Object.prototype.toString.call(i)}catch{return"<unknown>"}}function Hx(i){if(typeof i=="object"&&i!==null){let t={};for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t}else return{}}function np(i,t=40){let n=Object.keys(Ou(i));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return cn(n[0],t);for(let d=n.length;d>0;d--){let r=n.slice(0,d).join(", ");if(!(r.length>t))return d===n.length?r:cn(r,t)}return""}function qe(i){return ep(i,new Map)}function ep(i,t){if(T2(i)){let n=t.get(i);if(n!==void 0)return n;let d={};t.set(i,d);for(let r of Object.keys(i))typeof i[r]<"u"&&(d[r]=ep(i[r],t));return d}if(Array.isArray(i)){let n=t.get(i);if(n!==void 0)return n;let d=[];return t.set(i,d),i.forEach(r=>{d.push(ep(r,t))}),d}return i}function T2(i){if(!Ui(i))return!1;try{let t=Object.getPrototypeOf(i).constructor.name;return!t||t==="Object"}catch{return!0}}var Xx=50,Wx=/\(error: (.*)\)/,$x=/captureMessage|captureException/;function Du(...i){let t=i.sort((n,d)=>n[0]-d[0]).map(n=>n[1]);return(n,d=0)=>{let r=[],m=n.split(`
`);for(let e=d;e<m.length;e++){let u=m[e];if(u.length>1024)continue;let g=Wx.test(u)?u.replace(Wx,"$1"):u;if(!g.match(/\S*Error: /)){for(let c of t){let s=c(g);if(s){r.push(s);break}}if(r.length>=Xx)break}}return Yx(r)}}function sp(i){return Array.isArray(i)?Du(...i):i}function Yx(i){if(!i.length)return[];let t=Array.from(i);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),$x.test(t[t.length-1].function||"")&&(t.pop(),$x.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,Xx).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}var rp="<anonymous>";function Ri(i){try{return!i||typeof i!="function"?rp:i.name||rp}catch{return rp}}var Fu={},jx={};function hi(i,t){Fu[i]=Fu[i]||[],Fu[i].push(t)}function ui(i,t){jx[i]||(t(),jx[i]=!0)}function Oe(i,t){let n=i&&Fu[i];if(n)for(let d of n)try{d(t)}catch(r){fn&&ft.error(`Error while triggering instrumentation handler.
Type: ${i}
Name: ${Ri(d)}
Error:`,r)}}function ap(i){let t="console";hi(t,i),ui(t,b2)}function b2(){"console"in bt&&cl.forEach(function(i){i in bt.console&&oe(bt.console,i,function(t){return pa[i]=t,function(...n){Oe("console",{args:n,level:i});let r=pa[i];r&&r.apply(bt.console,n)}})})}function Pe(){let i=bt,t=i.crypto||i.msCrypto,n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{let d=new Uint8Array(1);return t.getRandomValues(d),d[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,d=>(d^(n()&15)>>d/4).toString(16))}function Kx(i){return i.exception&&i.exception.values?i.exception.values[0]:void 0}function zi(i){let{message:t,event_id:n}=i;if(t)return t;let d=Kx(i);return d?d.type&&d.value?`${d.type}: ${d.value}`:d.type||d.value||n||"<unknown>":n||"<unknown>"}function ma(i,t,n){let d=i.exception=i.exception||{},r=d.values=d.values||[],m=r[0]=r[0]||{};m.value||(m.value=t||""),m.type||(m.type=n||"Error")}function Dn(i,t){let n=Kx(i);if(!n)return;let d={type:"generic",handled:!0},r=n.mechanism;if(n.mechanism={...d,...r,...t},t&&"data"in t){let m={...r&&r.data,...t.data};n.mechanism.data=m}}function Bu(i){if(i&&i.__sentry_captured__)return!0;try{On(i,"__sentry_captured__",!0)}catch{}return!1}function fl(i){return Array.isArray(i)?i:[i]}var va=bt,C2=1e3,Jx,op,lp;function hp(i){let t="dom";hi(t,i),ui(t,P2)}function P2(){if(!va.document)return;let i=Oe.bind(null,"dom"),t=Zx(i,!0);va.document.addEventListener("click",t,!1),va.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let d=va[n]&&va[n].prototype;!d||!d.hasOwnProperty||!d.hasOwnProperty("addEventListener")||(oe(d,"addEventListener",function(r){return function(m,e,u){if(m==="click"||m=="keypress")try{let g=this,c=g.__sentry_instrumentation_handlers__=g.__sentry_instrumentation_handlers__||{},s=c[m]=c[m]||{refCount:0};if(!s.handler){let o=Zx(i);s.handler=o,r.call(this,m,o,u)}s.refCount++}catch{}return r.call(this,m,e,u)}}),oe(d,"removeEventListener",function(r){return function(m,e,u){if(m==="click"||m=="keypress")try{let g=this,c=g.__sentry_instrumentation_handlers__||{},s=c[m];s&&(s.refCount--,s.refCount<=0&&(r.call(this,m,s.handler,u),s.handler=void 0,delete c[m]),Object.keys(c).length===0&&delete g.__sentry_instrumentation_handlers__)}catch{}return r.call(this,m,e,u)}}))})}function w2(i){if(i.type!==op)return!1;try{if(!i.target||i.target._sentryId!==lp)return!1}catch{}return!0}function A2(i,t){return i!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function Zx(i,t=!1){return n=>{if(!n||n._sentryCaptured)return;let d=I2(n);if(A2(n.type,d))return;On(n,"_sentryCaptured",!0),d&&!d._sentryId&&On(d,"_sentryId",Pe());let r=n.type==="keypress"?"input":n.type;w2(n)||(i({event:n,name:r,global:t}),op=n.type,lp=d?d._sentryId:void 0),clearTimeout(Jx),Jx=va.setTimeout(()=>{lp=void 0,op=void 0},C2)}}function I2(i){try{return i.target}catch{return null}}var up=ds();function Nu(){if(!("fetch"in up))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function pl(i){return i&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(i.toString())}function dp(){if(typeof EdgeRuntime=="string")return!0;if(!Nu())return!1;if(pl(up.fetch))return!0;let i=!1,t=up.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(i=pl(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){fn&&ft.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return i}function fp(i){let t="fetch";hi(t,i),ui(t,R2)}function R2(){dp()&&oe(bt,"fetch",function(i){return function(...t){let{method:n,url:d}=M2(t),r={args:t,fetchData:{method:n,url:d},startTimestamp:Date.now()};return Oe("fetch",{...r}),i.apply(bt,t).then(m=>{let e={...r,endTimestamp:Date.now(),response:m};return Oe("fetch",e),m},m=>{let e={...r,endTimestamp:Date.now(),error:m};throw Oe("fetch",e),m})}})}function cp(i,t){return!!i&&typeof i=="object"&&!!i[t]}function Qx(i){return typeof i=="string"?i:i?cp(i,"url")?i.url:i.toString?i.toString():"":""}function M2(i){if(i.length===0)return{method:"GET",url:""};if(i.length===2){let[n,d]=i;return{url:Qx(n),method:cp(d,"method")?String(d.method).toUpperCase():"GET"}}let t=i[0];return{url:Qx(t),method:cp(t,"method")?String(t.method).toUpperCase():"GET"}}var ku=null;function pp(i){let t="error";hi(t,i),ui(t,L2)}function L2(){ku=bt.onerror,bt.onerror=function(i,t,n,d,r){return Oe("error",{column:d,error:r,line:n,msg:i,url:t}),ku&&!ku.__SENTRY_LOADER__?ku.apply(this,arguments):!1},bt.onerror.__SENTRY_INSTRUMENTED__=!0}var Vu=null;function mp(i){let t="unhandledrejection";hi(t,i),ui(t,O2)}function O2(){Vu=bt.onunhandledrejection,bt.onunhandledrejection=function(i){return Oe("unhandledrejection",i),Vu&&!Vu.__SENTRY_LOADER__?Vu.apply(this,arguments):!0},bt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var Gu=ds();function _x(){let i=Gu.chrome,t=i&&i.app&&i.app.runtime,n="history"in Gu&&!!Gu.history.pushState&&!!Gu.history.replaceState;return!t&&n}var ml=bt,Uu;function vl(i){let t="history";hi(t,i),ui(t,D2)}function D2(){if(!_x())return;let i=ml.onpopstate;ml.onpopstate=function(...n){let d=ml.location.href,r=Uu;if(Uu=d,Oe("history",{from:r,to:d}),i)try{return i.apply(this,n)}catch{}};function t(n){return function(...d){let r=d.length>2?d[2]:void 0;if(r){let m=Uu,e=String(r);Uu=e,Oe("history",{from:m,to:e})}return n.apply(this,d)}}oe(ml.history,"pushState",t),oe(ml.history,"replaceState",t)}var F2=bt,fs="__sentry_xhr_v3__";function vp(i){let t="xhr";hi(t,i),ui(t,B2)}function B2(){if(!F2.XMLHttpRequest)return;let i=XMLHttpRequest.prototype;oe(i,"open",function(t){return function(...n){let d=Date.now(),r=li(n[0])?n[0].toUpperCase():void 0,m=N2(n[1]);if(!r||!m)return t.apply(this,n);this[fs]={method:r,url:m,request_headers:{}},r==="POST"&&m.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let e=()=>{let u=this[fs];if(u&&this.readyState===4){try{u.status_code=this.status}catch{}let g={args:[r,m],endTimestamp:Date.now(),startTimestamp:d,xhr:this};Oe("xhr",g)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?oe(this,"onreadystatechange",function(u){return function(...g){return e(),u.apply(this,g)}}):this.addEventListener("readystatechange",e),oe(this,"setRequestHeader",function(u){return function(...g){let[c,s]=g,o=this[fs];return o&&li(c)&&li(s)&&(o.request_headers[c.toLowerCase()]=s),u.apply(this,g)}}),t.apply(this,n)}}),oe(i,"send",function(t){return function(...n){let d=this[fs];if(!d)return t.apply(this,n);n[0]!==void 0&&(d.body=n[0]);let r={args:[d.method,d.url],startTimestamp:Date.now(),xhr:this};return Oe("xhr",r),t.apply(this,n)}})}function N2(i){if(li(i))return i;try{return i.toString()}catch{}}function gp(){return"npm"}function qx(){let i=typeof WeakSet=="function",t=i?new WeakSet:[];function n(r){if(i)return t.has(r)?!0:(t.add(r),!1);for(let m=0;m<t.length;m++)if(t[m]===r)return!0;return t.push(r),!1}function d(r){if(i)t.delete(r);else for(let m=0;m<t.length;m++)if(t[m]===r){t.splice(m,1);break}}return[n,d]}function Hi(i,t=100,n=1/0){try{return zu("",i,t,n)}catch(d){return{ERROR:`**non-serializable** (${d})`}}}function Hu(i,t=3,n=100*1024){let d=Hi(i,t);return U2(d)>n?Hu(i,t-1,n):d}function zu(i,t,n=1/0,d=1/0,r=qx()){let[m,e]=r;if(t==null||["number","boolean","string"].includes(typeof t)&&!Zf(t))return t;let u=k2(i,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;let g=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(g===0)return u.replace("object ","");if(m(t))return"[Circular ~]";let c=t;if(c&&typeof c.toJSON=="function")try{let l=c.toJSON();return zu("",l,g-1,d,r)}catch{}let s=Array.isArray(t)?[]:{},o=0,a=Ou(t);for(let l in a){if(!Object.prototype.hasOwnProperty.call(a,l))continue;if(o>=d){s[l]="[MaxProperties ~]";break}let p=a[l];s[l]=zu(l,p,g-1,d,r),o++}return e(t),s}function k2(i,t){try{if(i==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(i==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ll(t))return"[VueViewModel]";if(Jf(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Ri(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=V2(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function V2(i){let t=Object.getPrototypeOf(i);return t?t.constructor.name:"null prototype"}function G2(i){return~-encodeURI(i).split(/%..|./).length}function U2(i){return G2(JSON.stringify(i))}var Fn;(function(i){i[i.PENDING=0]="PENDING";let n=1;i[i.RESOLVED=n]="RESOLVED";let d=2;i[i.REJECTED=d]="REJECTED"})(Fn||(Fn={}));function Wi(i){return new Te(t=>{t(i)})}function ps(i){return new Te((t,n)=>{n(i)})}var Te=class{constructor(t){Te.prototype.__init.call(this),Te.prototype.__init2.call(this),Te.prototype.__init3.call(this),Te.prototype.__init4.call(this),this._state=Fn.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Te((d,r)=>{this._handlers.push([!1,m=>{if(!t)d(m);else try{d(t(m))}catch(e){r(e)}},m=>{if(!n)r(m);else try{d(n(m))}catch(e){r(e)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Te((n,d)=>{let r,m;return this.then(e=>{m=!1,r=e,t&&t()},e=>{m=!0,r=e,t&&t()}).then(()=>{if(m){d(r);return}n(r)})})}__init(){this._resolve=t=>{this._setResult(Fn.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Fn.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Fn.PENDING){if(un(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Fn.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Fn.RESOLVED&&n[1](this._value),this._state===Fn.REJECTED&&n[2](this._value),n[0]=!0)})}}};function yp(i){let t=[];function n(){return i===void 0||t.length<i}function d(e){return t.splice(t.indexOf(e),1)[0]}function r(e){if(!n())return ps(new Ke("Not adding Promise because buffer limit was reached."));let u=e();return t.indexOf(u)===-1&&t.push(u),u.then(()=>d(u)).then(null,()=>d(u).then(null,()=>{})),u}function m(e){return new Te((u,g)=>{let c=t.length;if(!c)return u(!0);let s=setTimeout(()=>{e&&e>0&&u(!1)},e);t.forEach(o=>{Wi(o).then(()=>{--c||(clearTimeout(s),u(!0))},g)})})}return{$:t,add:r,drain:m}}function gl(i){if(!i)return{};let t=i.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",d=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:d,relative:t[5]+n+d}}var t1=["fatal","error","warning","log","info","debug"];function xp(i){return i==="warn"?"warning":t1.includes(i)?i:"log"}var e1=1e3;function pn(){return Date.now()/e1}function z2(){let{performance:i}=bt;if(!i||!i.now)return pn;let t=Date.now()-i.now(),n=i.timeOrigin==null?t:i.timeOrigin;return()=>(n+i.now())/e1}var ga=z2();var yl,H2=(()=>{let{performance:i}=bt;if(!i||!i.now){yl="none";return}let t=3600*1e3,n=i.now(),d=Date.now(),r=i.timeOrigin?Math.abs(i.timeOrigin+n-d):t,m=r<t,e=i.timing&&i.timing.navigationStart,g=typeof e=="number"?Math.abs(e+n-d):t,c=g<t;return m||c?r<=g?(yl="timeOrigin",i.timeOrigin):(yl="navigationStart",e):(yl="dateNow",d)})();function Mi(i,t=[]){return[i,t]}function Ep(i,t){let[n,d]=i;return[n,[...d,t]]}function Wu(i,t){let n=i[1];for(let d of n){let r=d[0].type;if(t(d,r))return!0}return!1}function Sp(i,t){return(t||new TextEncoder).encode(i)}function Tp(i,t){let[n,d]=i,r=JSON.stringify(n);function m(e){typeof r=="string"?r=typeof e=="string"?r+e:[Sp(r,t),e]:r.push(typeof e=="string"?Sp(e,t):e)}for(let e of d){let[u,g]=e;if(m(`
${JSON.stringify(u)}
`),typeof g=="string"||g instanceof Uint8Array)m(g);else{let c;try{c=JSON.stringify(g)}catch{c=JSON.stringify(Hi(g))}m(c)}}return typeof r=="string"?r:W2(r)}function W2(i){let t=i.reduce((r,m)=>r+m.length,0),n=new Uint8Array(t),d=0;for(let r of i)n.set(r,d),d+=r.length;return n}function bp(i,t){let n=typeof i.data=="string"?Sp(i.data,t):i.data;return[qe({type:"attachment",length:n.length,filename:i.filename,content_type:i.contentType,attachment_type:i.attachmentType}),n]}var $2={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"unknown"};function $u(i){return $2[i]}function Xu(i){if(!i||!i.sdk)return;let{name:t,version:n}=i.sdk;return{name:t,version:n}}function Cp(i,t,n,d){let r=i.sdkProcessingMetadata&&i.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:i.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&d&&{dsn:Ii(d)},...r&&{trace:qe({...r})}}}function Pp(i,t,n){let d=[{type:"client_report"},{timestamp:n||pn(),discarded_events:i}];return Mi(t?{dsn:t}:{},[d])}function i1(i,t=Date.now()){let n=parseInt(`${i}`,10);if(!isNaN(n))return n*1e3;let d=Date.parse(`${i}`);return isNaN(d)?6e4:d-t}function n1(i,t){return i[t]||i.all||0}function wp(i,t,n=Date.now()){return n1(i,t)>n}function Ap(i,{statusCode:t,headers:n},d=Date.now()){let r={...i},m=n&&n["x-sentry-rate-limits"],e=n&&n["retry-after"];if(m)for(let u of m.trim().split(",")){let[g,c]=u.split(":",2),s=parseInt(g,10),o=(isNaN(s)?60:s)*1e3;if(!c)r.all=d+o;else for(let a of c.split(";"))r[a]=d+o}else e?r.all=d+i1(e,d):t===429&&(r.all=d+60*1e3);return r}function r1(i,t){return i(t.stack||"",1)}function Ip(i,t){let n={type:t.name||t.constructor.name,value:t.message},d=r1(i,t);return d.length&&(n.stacktrace={frames:d}),n}var zt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var mr="production";function xl(){return ul("globalEventProcessors",()=>[])}function Rp(i){xl().push(i)}function ya(i,t,n,d=0){return new Te((r,m)=>{let e=i[d];if(t===null||typeof e!="function")r(t);else{let u=e({...t},n);zt&&e.id&&u===null&&ft.log(`Event processor "${e.id}" dropped event`),un(u)?u.then(g=>ya(i,g,n,d+1).then(r)).then(null,m):ya(i,u,n,d+1).then(r).then(null,m)}})}function Yu(i){let t=ga(),n={sid:Pe(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>X2(n)};return i&&$i(n,i),n}function $i(i,t={}){if(t.user&&(!i.ipAddress&&t.user.ip_address&&(i.ipAddress=t.user.ip_address),!i.did&&!t.did&&(i.did=t.user.id||t.user.email||t.user.username)),i.timestamp=t.timestamp||ga(),t.abnormal_mechanism&&(i.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(i.ignoreDuration=t.ignoreDuration),t.sid&&(i.sid=t.sid.length===32?t.sid:Pe()),t.init!==void 0&&(i.init=t.init),!i.did&&t.did&&(i.did=`${t.did}`),typeof t.started=="number"&&(i.started=t.started),i.ignoreDuration)i.duration=void 0;else if(typeof t.duration=="number")i.duration=t.duration;else{let n=i.timestamp-i.started;i.duration=n>=0?n:0}t.release&&(i.release=t.release),t.environment&&(i.environment=t.environment),!i.ipAddress&&t.ipAddress&&(i.ipAddress=t.ipAddress),!i.userAgent&&t.userAgent&&(i.userAgent=t.userAgent),typeof t.errors=="number"&&(i.errors=t.errors),t.status&&(i.status=t.status)}function ju(i,t){let n={};t?n={status:t}:i.status==="ok"&&(n={status:"exited"}),$i(i,n)}function X2(i){return qe({sid:`${i.sid}`,init:i.init,started:new Date(i.started*1e3).toISOString(),timestamp:new Date(i.timestamp*1e3).toISOString(),status:i.status,errors:i.errors,did:typeof i.did=="number"||typeof i.did=="string"?`${i.did}`:void 0,duration:i.duration,abnormal_mechanism:i.abnormal_mechanism,attrs:{release:i.release,environment:i.environment,ip_address:i.ipAddress,user_agent:i.userAgent}})}var Y2=1;function s1(i){let{spanId:t,traceId:n}=i.spanContext(),{data:d,op:r,parent_span_id:m,status:e,tags:u,origin:g}=vr(i);return qe({data:d,op:r,parent_span_id:m,span_id:t,status:e,tags:u,trace_id:n,origin:g})}function vr(i){return j2(i)?i.getSpanJSON():typeof i.toJSON=="function"?i.toJSON():{}}function j2(i){return typeof i.getSpanJSON=="function"}function a1(i){let{traceFlags:t}=i.spanContext();return!!(t&Y2)}function l1(i,t,n,d,r,m){let{normalizeDepth:e=3,normalizeMaxBreadth:u=1e3}=i,g={...t,event_id:t.event_id||n.event_id||Pe(),timestamp:t.timestamp||pn()},c=n.integrations||i.integrations.map(f=>f.name);K2(g,i),Q2(g,c),t.type===void 0&&J2(g,i.stackParser);let s=q2(d,n.captureContext);n.mechanism&&Dn(g,n.mechanism);let o=r&&r.getEventProcessors?r.getEventProcessors():[],a=u1().getScopeData();if(m){let f=m.getScopeData();Mp(a,f)}if(s){let f=s.getScopeData();Mp(a,f)}let l=[...n.attachments||[],...a.attachments];l.length&&(n.attachments=l),Ku(g,a);let p=[...o,...xl(),...a.eventProcessors];return ya(p,g,n).then(f=>(f&&Z2(f),typeof e=="number"&&e>0?_2(f,e,u):f))}function K2(i,t){let{environment:n,release:d,dist:r,maxValueLength:m=250}=t;"environment"in i||(i.environment="environment"in t?n:mr),i.release===void 0&&d!==void 0&&(i.release=d),i.dist===void 0&&r!==void 0&&(i.dist=r),i.message&&(i.message=cn(i.message,m));let e=i.exception&&i.exception.values&&i.exception.values[0];e&&e.value&&(e.value=cn(e.value,m));let u=i.request;u&&u.url&&(u.url=cn(u.url,m))}var o1=new WeakMap;function J2(i,t){let n=bt._sentryDebugIds;if(!n)return;let d,r=o1.get(t);r?d=r:(d=new Map,o1.set(t,d));let m=Object.keys(n).reduce((e,u)=>{let g,c=d.get(u);c?g=c:(g=t(u),d.set(u,g));for(let s=g.length-1;s>=0;s--){let o=g[s];if(o.filename){e[o.filename]=n[u];break}}return e},{});try{i.exception.values.forEach(e=>{e.stacktrace.frames.forEach(u=>{u.filename&&(u.debug_id=m[u.filename])})})}catch{}}function Z2(i){let t={};try{i.exception.values.forEach(d=>{d.stacktrace.frames.forEach(r=>{r.debug_id&&(r.abs_path?t[r.abs_path]=r.debug_id:r.filename&&(t[r.filename]=r.debug_id),delete r.debug_id)})})}catch{}if(Object.keys(t).length===0)return;i.debug_meta=i.debug_meta||{},i.debug_meta.images=i.debug_meta.images||[];let n=i.debug_meta.images;Object.keys(t).forEach(d=>{n.push({type:"sourcemap",code_file:d,debug_id:t[d]})})}function Q2(i,t){t.length>0&&(i.sdk=i.sdk||{},i.sdk.integrations=[...i.sdk.integrations||[],...t])}function _2(i,t,n){if(!i)return null;let d={...i,...i.breadcrumbs&&{breadcrumbs:i.breadcrumbs.map(r=>({...r,...r.data&&{data:Hi(r.data,t,n)}}))},...i.user&&{user:Hi(i.user,t,n)},...i.contexts&&{contexts:Hi(i.contexts,t,n)},...i.extra&&{extra:Hi(i.extra,t,n)}};return i.contexts&&i.contexts.trace&&d.contexts&&(d.contexts.trace=i.contexts.trace,i.contexts.trace.data&&(d.contexts.trace.data=Hi(i.contexts.trace.data,t,n))),i.spans&&(d.spans=i.spans.map(r=>{let m=vr(r).data;return m&&(r.data=Hi(m,t,n)),r})),d}function q2(i,t){if(!t)return i;let n=i?i.clone():new di;return n.update(t),n}function h1(i){if(i)return tA(i)?{captureContext:i}:iA(i)?{captureContext:i}:i}function tA(i){return i instanceof di||typeof i=="function"}var eA=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function iA(i){return Object.keys(i).some(t=>eA.includes(t))}function xa(i,t){return ti().captureException(i,h1(t))}function Sl(i,t){return ti().captureEvent(i,t)}function Li(i,t){ti().addBreadcrumb(i,t)}function Ju(i){ti().setUser(i)}function Zu(...i){let t=ti();if(i.length===2){let[n,d]=i;return n?t.withScope(()=>(t.getStackTop().scope=n,d(n))):t.withScope(d)}return t.withScope(i[0])}function me(){return ti().getClient()}function Bn(){return ti().getScope()}function El(i){let t=me(),n=Sa(),d=Bn(),{release:r,environment:m=mr}=t&&t.getOptions()||{},{userAgent:e}=bt.navigator||{},u=Yu({release:r,environment:m,user:d.getUser()||n.getUser(),...e&&{userAgent:e},...i}),g=n.getSession();return g&&g.status==="ok"&&$i(g,{status:"exited"}),Qu(),n.setSession(u),d.setSession(u),u}function Qu(){let i=Sa(),t=Bn(),n=t.getSession()||i.getSession();n&&ju(n),d1(),i.setSession(),t.setSession()}function d1(){let i=Sa(),t=Bn(),n=me(),d=t.getSession()||i.getSession();d&&n&&n.captureSession&&n.captureSession(d)}function Tl(i=!1){if(i){Qu();return}d1()}function _u(i){return i.transaction}function Lp(i,t,n){let d=t.getOptions(),{publicKey:r}=t.getDsn()||{},{segment:m}=n&&n.getUser()||{},e=qe({environment:d.environment||mr,release:d.release,user_segment:m,public_key:r,trace_id:i});return t.emit&&t.emit("createDsc",e),e}function c1(i){let t=me();if(!t)return{};let n=Lp(vr(i).trace_id||"",t,Bn()),d=_u(i);if(!d)return n;let r=d&&d._frozenDynamicSamplingContext;if(r)return r;let{sampleRate:m,source:e}=d.metadata;m!=null&&(n.sample_rate=`${m}`);let u=vr(d);return e&&e!=="url"&&(n.transaction=u.description),n.sampled=String(a1(d)),t.emit&&t.emit("createDsc",n),n}function Ku(i,t){let{fingerprint:n,span:d,breadcrumbs:r,sdkProcessingMetadata:m}=t;nA(i,t),d&&aA(i,d),oA(i,n),rA(i,r),sA(i,m)}function Mp(i,t){let{extra:n,tags:d,user:r,contexts:m,level:e,sdkProcessingMetadata:u,breadcrumbs:g,fingerprint:c,eventProcessors:s,attachments:o,propagationContext:a,transactionName:l,span:p}=t;bl(i,"extra",n),bl(i,"tags",d),bl(i,"user",r),bl(i,"contexts",m),bl(i,"sdkProcessingMetadata",u),e&&(i.level=e),l&&(i.transactionName=l),p&&(i.span=p),g.length&&(i.breadcrumbs=[...i.breadcrumbs,...g]),c.length&&(i.fingerprint=[...i.fingerprint,...c]),s.length&&(i.eventProcessors=[...i.eventProcessors,...s]),o.length&&(i.attachments=[...i.attachments,...o]),i.propagationContext={...i.propagationContext,...a}}function bl(i,t,n){if(n&&Object.keys(n).length){i[t]={...i[t]};for(let d in n)Object.prototype.hasOwnProperty.call(n,d)&&(i[t][d]=n[d])}}function nA(i,t){let{extra:n,tags:d,user:r,contexts:m,level:e,transactionName:u}=t,g=qe(n);g&&Object.keys(g).length&&(i.extra={...g,...i.extra});let c=qe(d);c&&Object.keys(c).length&&(i.tags={...c,...i.tags});let s=qe(r);s&&Object.keys(s).length&&(i.user={...s,...i.user});let o=qe(m);o&&Object.keys(o).length&&(i.contexts={...o,...i.contexts}),e&&(i.level=e),u&&(i.transaction=u)}function rA(i,t){let n=[...i.breadcrumbs||[],...t];i.breadcrumbs=n.length?n:void 0}function sA(i,t){i.sdkProcessingMetadata={...i.sdkProcessingMetadata,...t}}function aA(i,t){i.contexts={trace:s1(t),...i.contexts};let n=_u(t);if(n){i.sdkProcessingMetadata={dynamicSamplingContext:c1(t),...i.sdkProcessingMetadata};let d=vr(n).description;d&&(i.tags={transaction:d,...i.tags})}}function oA(i,t){i.fingerprint=i.fingerprint?fl(i.fingerprint):[],t&&(i.fingerprint=i.fingerprint.concat(t)),i.fingerprint&&!i.fingerprint.length&&delete i.fingerprint}var lA=100,Op,di=class{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=f1()}static clone(t){return t?t.clone():new di}clone(){let t=new di;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&$i(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t;if(n instanceof di){let d=n.getScopeData();this._tags={...this._tags,...d.tags},this._extra={...this._extra,...d.extra},this._contexts={...this._contexts,...d.contexts},d.user&&Object.keys(d.user).length&&(this._user=d.user),d.level&&(this._level=d.level),d.fingerprint.length&&(this._fingerprint=d.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),d.propagationContext&&(this._propagationContext=d.propagationContext)}else if(Ui(n)){let d=t;this._tags={...this._tags,...d.tags},this._extra={...this._extra,...d.extra},this._contexts={...this._contexts,...d.contexts},d.user&&(this._user=d.user),d.level&&(this._level=d.level),d.fingerprint&&(this._fingerprint=d.fingerprint),d.requestSession&&(this._requestSession=d.requestSession),d.propagationContext&&(this._propagationContext=d.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=f1(),this}addBreadcrumb(t,n){let d=typeof n=="number"?n:lA;if(d<=0)return this;let r={timestamp:pn(),...t},m=this._breadcrumbs;return m.push(r),this._breadcrumbs=m.length>d?m.slice(-d):m,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){let{_breadcrumbs:t,_attachments:n,_contexts:d,_tags:r,_extra:m,_user:e,_level:u,_fingerprint:g,_eventProcessors:c,_propagationContext:s,_sdkProcessingMetadata:o,_transactionName:a,_span:l}=this;return{breadcrumbs:t,attachments:n,contexts:d,tags:r,extra:m,user:e,level:u,fingerprint:g||[],eventProcessors:c,propagationContext:s,sdkProcessingMetadata:o,transactionName:a,span:l}}applyToEvent(t,n={},d=[]){Ku(t,this.getScopeData());let r=[...d,...xl(),...this._eventProcessors];return ya(r,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let d=n&&n.event_id?n.event_id:Pe();if(!this._client)return ft.warn("No client configured on scope - will not capture exception!"),d;let r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:d},this),d}captureMessage(t,n,d){let r=d&&d.event_id?d.event_id:Pe();if(!this._client)return ft.warn("No client configured on scope - will not capture message!"),r;let m=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:m,...d,event_id:r},this),r}captureEvent(t,n){let d=n&&n.event_id?n.event_id:Pe();return this._client?(this._client.captureEvent(t,{...n,event_id:d},this),d):(ft.warn("No client configured on scope - will not capture event!"),d)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function u1(){return Op||(Op=new di),Op}function f1(){return{traceId:Pe(),spanId:Pe().substring(16)}}var Ea="7.105.0";var p1=parseFloat(Ea),hA=100,Cl=class{constructor(t,n,d,r=p1){this._version=r;let m;n?m=n:(m=new di,m.setClient(t));let e;d?e=d:(e=new di,e.setClient(t)),this._stack=[{scope:m}],t&&this.bindClient(t),this._isolationScope=e}isOlderThan(t){return this._version<t}bindClient(t){let n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){let t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){let n=this.pushScope(),d;try{d=t(n)}catch(r){throw this.popScope(),r}return un(d)?d.then(r=>(this.popScope(),r),r=>{throw this.popScope(),r}):(this.popScope(),d)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){let d=this._lastEventId=n&&n.event_id?n.event_id:Pe(),r=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:r,...n,event_id:d}),d}captureMessage(t,n,d){let r=this._lastEventId=d&&d.event_id?d.event_id:Pe(),m=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:m,...d,event_id:r}),r}captureEvent(t,n){let d=n&&n.event_id?n.event_id:Pe();return t.type||(this._lastEventId=d),this.getScope().captureEvent(t,{...n,event_id:d}),d}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){let{scope:d,client:r}=this.getStackTop();if(!r)return;let{beforeBreadcrumb:m=null,maxBreadcrumbs:e=hA}=r.getOptions&&r.getOptions()||{};if(e<=0)return;let g={timestamp:pn(),...t},c=m?pr(()=>m(g,n)):g;c!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",c,n),d.addBreadcrumb(c,e))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){let{scope:n,client:d}=this.getStackTop();d&&t(n)}run(t){let n=Dp(this);try{t(this)}finally{Dp(n)}}getIntegration(t){let n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return zt&&ft.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){let d=this._callExtensionMethod("startTransaction",t,n);return zt&&!d&&(this.getClient()?ft.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):ft.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),d}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){let n=this.getStackTop().scope,d=n.getSession();d&&ju(d),this._sendSessionUpdate(),n.setSession()}startSession(t){let{scope:n,client:d}=this.getStackTop(),{release:r,environment:m=mr}=d&&d.getOptions()||{},{userAgent:e}=bt.navigator||{},u=Yu({release:r,environment:m,user:n.getUser(),...e&&{userAgent:e},...t}),g=n.getSession&&n.getSession();return g&&g.status==="ok"&&$i(g,{status:"exited"}),this.endSession(),n.setSession(u),u}shouldSendDefaultPii(){let t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){let{scope:t,client:n}=this.getStackTop(),d=t.getSession();d&&n&&n.captureSession&&n.captureSession(d)}_callExtensionMethod(t,...n){let r=td().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[t]=="function")return r.extensions[t].apply(this,n);zt&&ft.warn(`Extension method ${t} couldn't be found, doing nothing.`)}};function td(){return bt.__SENTRY__=bt.__SENTRY__||{extensions:{},hub:void 0},bt}function Dp(i){let t=td(),n=qu(t);return m1(t,i),n}function ti(){let i=td();if(i.__SENTRY__&&i.__SENTRY__.acs){let t=i.__SENTRY__.acs.getCurrentHub();if(t)return t}return uA(i)}function Sa(){return ti().getIsolationScope()}function uA(i=td()){return(!dA(i)||qu(i).isOlderThan(p1))&&m1(i,new Cl),qu(i)}function dA(i){return!!(i&&i.__SENTRY__&&i.__SENTRY__.hub)}function qu(i){return ul("hub",()=>new Cl,i)}function m1(i,t){if(!i)return!1;let n=i.__SENTRY__=i.__SENTRY__||{};return n.hub=t,!0}function cA(i,t){return t&&(i.sdk=i.sdk||{},i.sdk.name=i.sdk.name||t.name,i.sdk.version=i.sdk.version||t.version,i.sdk.integrations=[...i.sdk.integrations||[],...t.integrations||[]],i.sdk.packages=[...i.sdk.packages||[],...t.packages||[]]),i}function v1(i,t,n,d){let r=Xu(n),m={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!d&&t&&{dsn:Ii(t)}},e="aggregates"in i?[{type:"sessions"},i]:[{type:"session"},i.toJSON()];return Mi(m,[e])}function g1(i,t,n,d){let r=Xu(n),m=i.type&&i.type!=="replay_event"?i.type:"event";cA(i,n&&n.sdk);let e=Cp(i,r,d,t);return delete i.sdkProcessingMetadata,Mi(e,[[{type:m},i]])}var fA="7";function pA(i){let t=i.protocol?`${i.protocol}:`:"",n=i.port?`:${i.port}`:"";return`${t}//${i.host}${n}${i.path?`/${i.path}`:""}/api/`}function mA(i){return`${pA(i)}${i.projectId}/envelope/`}function vA(i,t){return ip({sentry_key:i.publicKey,sentry_version:fA,...t&&{sentry_client:`${t.name}/${t.version}`}})}function y1(i,t={}){let n=typeof t=="string"?t:t.tunnel,d=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${mA(i)}?${vA(i,d)}`}var x1=[];function gA(i){let t={};return i.forEach(n=>{let{name:d}=n,r=t[d];r&&!r.isDefaultInstance&&n.isDefaultInstance||(t[d]=n)}),Object.keys(t).map(n=>t[n])}function Fp(i){let t=i.defaultIntegrations||[],n=i.integrations;t.forEach(e=>{e.isDefaultInstance=!0});let d;Array.isArray(n)?d=[...t,...n]:typeof n=="function"?d=fl(n(t)):d=t;let r=gA(d),m=yA(r,e=>e.name==="Debug");if(m!==-1){let[e]=r.splice(m,1);r.push(e)}return r}function S1(i,t){let n={};return t.forEach(d=>{d&&Np(i,d,n)}),n}function Bp(i,t){for(let n of t)n&&n.afterAllSetup&&n.afterAllSetup(i)}function Np(i,t,n){if(n[t.name]){zt&&ft.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,x1.indexOf(t.name)===-1&&(t.setupOnce(Rp,ti),x1.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(i),i.on&&typeof t.preprocessEvent=="function"){let d=t.preprocessEvent.bind(t);i.on("preprocessEvent",(r,m)=>d(r,m,i))}if(i.addEventProcessor&&typeof t.processEvent=="function"){let d=t.processEvent.bind(t),r=Object.assign((m,e)=>d(m,e,i),{id:t.name});i.addEventProcessor(r)}zt&&ft.log(`Integration installed: ${t.name}`)}function yA(i,t){for(let n=0;n<i.length;n++)if(t(i[n])===!0)return n;return-1}function we(i,t){return Object.assign(function(...d){return t(...d)},{id:i})}function E1(i){let t="";for(let n of i){let d=Object.entries(n.tags),r=d.length>0?`|#${d.map(([m,e])=>`${m}:${e}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}
`}return t}function T1(i,t,n,d){let r={sent_at:new Date().toISOString()};n&&n.sdk&&(r.sdk={name:n.sdk.name,version:n.sdk.version}),d&&t&&(r.dsn=Ii(t));let m=xA(i);return Mi(r,[m])}function xA(i){let t=E1(i);return[{type:"statsd",length:t.length},t]}var b1="Not capturing exception because it's already been captured.",Pl=class{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Mu(t.dsn):zt&&ft.warn("No DSN provided, client will not send events."),this._dsn){let n=y1(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,d){if(Bu(t)){zt&&ft.log(b1);return}let r=n&&n.event_id;return this._process(this.eventFromException(t,n).then(m=>this._captureEvent(m,n,d)).then(m=>{r=m})),r}captureMessage(t,n,d,r){let m=d&&d.event_id,e=ca(t)?t:String(t),u=hs(t)?this.eventFromMessage(e,n,d):this.eventFromException(t,d);return this._process(u.then(g=>this._captureEvent(g,d,r)).then(g=>{m=g})),m}captureEvent(t,n,d){if(n&&n.originalException&&Bu(n.originalException)){zt&&ft.log(b1);return}let r=n&&n.event_id,e=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,e||d).then(u=>{r=u})),r}captureSession(t){typeof t.release!="string"?zt&&ft.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),$i(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(d=>n.flush(t).then(r=>d&&r))):Wi(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return zt&&ft.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){let n=this._integrations[t.name];Np(this,t,this._integrations),n||Bp(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let d=g1(t,this._dsn,this._options._metadata,this._options.tunnel);for(let m of n.attachments||[])d=Ep(d,bp(m,this._options.transportOptions&&this._options.transportOptions.textEncoder));let r=this._sendEnvelope(d);r&&r.then(m=>this.emit("afterSendEvent",t,m),null)}sendSession(t){let n=v1(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,d){if(this._options.sendClientReports){let r=`${t}:${n}`;zt&&ft.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}captureAggregateMetrics(t){zt&&ft.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);let n=T1(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(d=>d(...n))}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=S1(this,t),Bp(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let d=!1,r=!1,m=n.exception&&n.exception.values;if(m){r=!0;for(let g of m){let c=g.mechanism;if(c&&c.handled===!1){d=!0;break}}}let e=t.status==="ok";(e&&t.errors===0||e&&d)&&($i(t,{...d&&{status:"crashed"},errors:t.errors||Number(r||d)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Te(n=>{let d=0,r=1,m=setInterval(()=>{this._numProcessing==0?(clearInterval(m),n(!0)):(d+=r,t&&d>=t&&(clearInterval(m),n(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,d,r=Sa()){let m=this.getOptions(),e=Object.keys(this._integrations);return!n.integrations&&e.length>0&&(n.integrations=e),this.emit("preprocessEvent",t,n),l1(m,t,n,d,this,r).then(u=>{if(u===null)return u;let g={...r.getPropagationContext(),...d?d.getPropagationContext():void 0};if(!(u.contexts&&u.contexts.trace)&&g){let{traceId:s,spanId:o,parentSpanId:a,dsc:l}=g;u.contexts={trace:{trace_id:s,span_id:o,parent_span_id:a},...u.contexts};let p=l||Lp(s,this,d);u.sdkProcessingMetadata={dynamicSamplingContext:p,...u.sdkProcessingMetadata}}return u})}_captureEvent(t,n={},d){return this._processEvent(t,n,d).then(r=>r.event_id,r=>{if(zt){let m=r;m.logLevel==="log"?ft.log(m.message):ft.warn(m)}})}_processEvent(t,n,d){let r=this.getOptions(),{sampleRate:m}=r,e=P1(t),u=C1(t),g=t.type||"error",c=`before send for type \`${g}\``;if(u&&typeof m=="number"&&Math.random()>m)return this.recordDroppedEvent("sample_rate","error",t),ps(new Ke(`Discarding event because it's not included in the random sample (sampling rate = ${m})`,"log"));let s=g==="replay_event"?"replay":g,a=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,d,a).then(l=>{if(l===null)throw this.recordDroppedEvent("event_processor",s,t),new Ke("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return l;let h=EA(r,l,n);return SA(h,c)}).then(l=>{if(l===null)throw this.recordDroppedEvent("before_send",s,t),new Ke(`${c} returned \`null\`, will not send event.`,"log");let p=d&&d.getSession();!e&&p&&this._updateSessionFromEvent(p,l);let h=l.transaction_info;if(e&&h&&l.transaction!==t.transaction){let f="custom";l.transaction_info={...h,source:f}}return this.sendEvent(l,n),l}).then(null,l=>{throw l instanceof Ke?l:(this.captureException(l,{data:{__sentry__:!0},originalException:l}),new Ke(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${l}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{zt&&ft.error("Error while sending event:",n)});zt&&ft.error("Transport disabled")}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{let[d,r]=n.split(":");return{reason:d,category:r,quantity:t[n]}})}};function SA(i,t){let n=`${t} must return \`null\` or a valid event.`;if(un(i))return i.then(d=>{if(!Ui(d)&&d!==null)throw new Ke(n);return d},d=>{throw new Ke(`${t} rejected with ${d}`)});if(!Ui(i)&&i!==null)throw new Ke(n);return i}function EA(i,t,n){let{beforeSend:d,beforeSendTransaction:r}=i;return C1(t)&&d?d(t,n):P1(t)&&r?r(t,n):t}function C1(i){return i.type===void 0}function P1(i){return i.type==="transaction"}function kp(i,t){t.debug===!0&&(zt?ft.enable():pr(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Bn().update(t.initialScope);let d=new i(t);Vp(d),TA(d)}function Vp(i){let n=ti().getStackTop();n.client=i,n.scope.setClient(i)}function TA(i){i.init?i.init():i.setupIntegrations&&i.setupIntegrations()}var bA=30;function Ta(i,t,n=yp(i.bufferSize||bA)){let d={},r=e=>n.drain(e);function m(e){let u=[];if(Wu(e,(o,a)=>{let l=$u(a);if(wp(d,l)){let p=w1(o,a);i.recordDroppedEvent("ratelimit_backoff",l,p)}else u.push(o)}),u.length===0)return Wi();let g=Mi(e[0],u),c=o=>{Wu(g,(a,l)=>{let p=w1(a,l);i.recordDroppedEvent(o,$u(l),p)})},s=()=>t({body:Tp(g,i.textEncoder)}).then(o=>(o.statusCode!==void 0&&(o.statusCode<200||o.statusCode>=300)&&zt&&ft.warn(`Sentry responded with status code ${o.statusCode} to sent event.`),d=Ap(d,o),o),o=>{throw c("network_error"),o});return n.add(s).then(o=>o,o=>{if(o instanceof Ke)return zt&&ft.error("Skipped sending event because buffer is full."),c("queue_overflow"),Wi();throw o})}return m.__sentry__baseTransport__=!0,{send:m,flush:r}}function w1(i,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(i)?i[1]:void 0}function Gp(i,t,n=[t],d="npm"){let r=i._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(m=>({name:`${d}:@sentry/${m}`,version:Ea})),version:Ea}),i._metadata=r}var CA=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],PA=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],A1="InboundFilters",wA=(i={})=>({name:A1,setupOnce(){},processEvent(t,n,d){let r=d.getOptions(),m=AA(i,r);return IA(t,m)?null:t}}),wl=wA,id=we(A1,wl);function AA(i={},t={}){return{allowUrls:[...i.allowUrls||[],...t.allowUrls||[]],denyUrls:[...i.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...i.ignoreErrors||[],...t.ignoreErrors||[],...i.disableErrorDefaults?[]:CA],ignoreTransactions:[...i.ignoreTransactions||[],...t.ignoreTransactions||[],...i.disableTransactionDefaults?[]:PA],ignoreInternal:i.ignoreInternal!==void 0?i.ignoreInternal:!0}}function IA(i,t){return t.ignoreInternal&&FA(i)?(zt&&ft.warn(`Event dropped due to being internal Sentry Error.
Event: ${zi(i)}`),!0):RA(i,t.ignoreErrors)?(zt&&ft.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${zi(i)}`),!0):MA(i,t.ignoreTransactions)?(zt&&ft.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${zi(i)}`),!0):LA(i,t.denyUrls)?(zt&&ft.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${zi(i)}.
Url: ${ed(i)}`),!0):OA(i,t.allowUrls)?!1:(zt&&ft.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${zi(i)}.
Url: ${ed(i)}`),!0)}function RA(i,t){return i.type||!t||!t.length?!1:DA(i).some(n=>fa(n,t))}function MA(i,t){if(i.type!=="transaction"||!t||!t.length)return!1;let n=i.transaction;return n?fa(n,t):!1}function LA(i,t){if(!t||!t.length)return!1;let n=ed(i);return n?fa(n,t):!1}function OA(i,t){if(!t||!t.length)return!0;let n=ed(i);return n?fa(n,t):!0}function DA(i){let t=[];i.message&&t.push(i.message);let n;try{n=i.exception.values[i.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),zt&&t.length===0&&ft.error(`Could not extract message for event ${zi(i)}`),t}function FA(i){try{return i.exception.values[0].type==="SentryError"}catch{}return!1}function BA(i=[]){for(let t=i.length-1;t>=0;t--){let n=i[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ed(i){try{let t;try{t=i.exception.values[0].stacktrace.frames}catch{}return t?BA(t):null}catch{return zt&&ft.error(`Cannot extract url for event ${zi(i)}`),null}}var I1,M1="FunctionToString",R1=new WeakMap,NA=()=>({name:M1,setupOnce(){I1=Function.prototype.toString;try{Function.prototype.toString=function(...i){let t=cs(this),n=R1.has(me())&&t!==void 0?t:this;return I1.apply(n,i)}}catch{}},setup(i){R1.set(i,!0)}}),Al=NA,nd=we(M1,Al);var kA="cause",VA=5,L1="LinkedErrors",GA=(i={})=>{let t=i.limit||VA,n=i.key||kA;return{name:L1,setupOnce(){},preprocessEvent(d,r,m){let e=m.getOptions();hl(Ip,e.stackParser,e.maxValueLength,n,t,d,r)}}},UA=GA,O1=we(L1,UA);var Up={};qy(Up,{FunctionToString:()=>nd,InboundFilters:()=>id,LinkedErrors:()=>O1});var D1=Up;var Ot=bt,zp=0;function Hp(){return zp>0}function nI(){zp++,setTimeout(()=>{zp--})}function gr(i,t={},n){if(typeof i!="function")return i;try{let r=i.__sentry_wrapped__;if(r)return r;if(cs(i))return i}catch{return i}let d=function(){let r=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);let m=r.map(e=>gr(e,t));return i.apply(this,m)}catch(m){throw nI(),Zu(e=>{e.addEventProcessor(u=>(t.mechanism&&(ma(u,void 0,void 0),Dn(u,t.mechanism)),u.extra={...u.extra,arguments:r},u)),xa(m)}),m}};try{for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(d[r]=i[r])}catch{}Lu(d,i),On(i,"__sentry_wrapped__",d);try{Object.getOwnPropertyDescriptor(d,"name").configurable&&Object.defineProperty(d,"name",{get(){return i.name}})}catch{}return d}var ei=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Xp(i,t){let n=Yp(i,t),d={type:t&&t.name,value:oI(t)};return n.length&&(d.stacktrace={frames:n}),d.type===void 0&&d.value===""&&(d.value="Unrecoverable error caught"),d}function rI(i,t,n,d){let r=me(),m=r&&r.getOptions().normalizeDepth,e={exception:{values:[{type:us(t)?t.constructor.name:d?"UnhandledRejection":"Error",value:lI(t,{isUnhandledRejection:d})}]},extra:{__serialized__:Hu(t,m)}};if(n){let u=Yp(i,n);u.length&&(e.exception.values[0].stacktrace={frames:u})}return e}function Wp(i,t){return{exception:{values:[Xp(i,t)]}}}function Yp(i,t){let n=t.stacktrace||t.stack||"",d=aI(t);try{return i(n,d)}catch{}return[]}var sI=/Minified React error #\d+;/i;function aI(i){if(i){if(typeof i.framesToPop=="number")return i.framesToPop;if(sI.test(i.message))return 1}return 0}function oI(i){let t=i&&i.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function F1(i,t,n,d){let r=n&&n.syntheticException||void 0,m=rd(i,t,r,d);return Dn(m),m.level="error",n&&n.event_id&&(m.event_id=n.event_id),Wi(m)}function B1(i,t,n="info",d,r){let m=d&&d.syntheticException||void 0,e=$p(i,t,m,r);return e.level=n,d&&d.event_id&&(e.event_id=d.event_id),Wi(e)}function rd(i,t,n,d,r){let m;if(da(t)&&t.error)return Wp(i,t.error);if(Au(t)||Yf(t)){let e=t;if("stack"in t)m=Wp(i,t);else{let u=e.name||(Au(e)?"DOMError":"DOMException"),g=e.message?`${u}: ${e.message}`:u;m=$p(i,g,n,d),ma(m,g)}return"code"in e&&(m.tags={...m.tags,"DOMException.code":`${e.code}`}),m}return ol(t)?Wp(i,t):Ui(t)||us(t)?(m=rI(i,t,n,r),Dn(m,{synthetic:!0}),m):(m=$p(i,t,n,d),ma(m,`${t}`,void 0),Dn(m,{synthetic:!0}),m)}function $p(i,t,n,d){let r={};if(d&&n){let m=Yp(i,n);m.length&&(r.exception={values:[{value:t,stacktrace:{frames:m}}]})}if(ca(t)){let{__sentry_template_string__:m,__sentry_template_values__:e}=t;return r.logentry={message:m,params:e},r}return r.message=t,r}function lI(i,{isUnhandledRejection:t}){let n=np(i),d=t?"promise rejection":"exception";return da(i)?`Event \`ErrorEvent\` captured as ${d} with message \`${i.message}\``:us(i)?`Event \`${hI(i)}\` (type=${i.type}) captured as ${d}`:`Object captured as ${d} with keys: ${n}`}function hI(i){try{let t=Object.getPrototypeOf(i);return t?t.constructor.name:void 0}catch{}}function N1(i,{metadata:t,tunnel:n,dsn:d}){let r={event_id:i.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!d&&{dsn:Ii(d)}},m=uI(i);return Mi(r,[m])}function uI(i){return[{type:"user_report"},i]}var sd=class extends Pl{constructor(t){let n=Ot.SENTRY_SDK_SOURCE||gp();Gp(t,"browser",["browser"],n),super(t),t.sendClientReports&&Ot.document&&Ot.document.addEventListener("visibilitychange",()=>{Ot.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return F1(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",d){return B1(this._options.stackParser,t,n,d,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){ei&&ft.warn("SDK not enabled, will not capture user feedback.");return}let n=N1(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,d){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,d)}_flushOutcomes(){let t=this._clearOutcomes();if(t.length===0){ei&&ft.log("No outcomes to send");return}if(!this._dsn){ei&&ft.log("No dsn provided, will not send outcomes");return}ei&&ft.log("Sending outcomes:",t);let n=Pp(t,this._options.tunnel&&Ii(this._dsn));this._sendEnvelope(n)}};var Il;function k1(){if(Il)return Il;if(pl(Ot.fetch))return Il=Ot.fetch.bind(Ot);let i=Ot.document,t=Ot.fetch;if(i&&typeof i.createElement=="function")try{let n=i.createElement("iframe");n.hidden=!0,i.head.appendChild(n);let d=n.contentWindow;d&&d.fetch&&(t=d.fetch),i.head.removeChild(n)}catch(n){ei&&ft.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Il=t.bind(Ot)}function V1(){Il=void 0}function G1(i,t=k1()){let n=0,d=0;function r(m){let e=m.body.length;n+=e,d++;let u={body:m.body,method:"POST",referrerPolicy:"origin",headers:i.headers,keepalive:n<=6e4&&d<15,...i.fetchOptions};try{return t(i.url,u).then(g=>(n-=e,d--,{statusCode:g.status,headers:{"x-sentry-rate-limits":g.headers.get("X-Sentry-Rate-Limits"),"retry-after":g.headers.get("Retry-After")}}))}catch(g){return V1(),n-=e,d--,ps(g)}}return Ta(i,r)}var dI=4;function U1(i){function t(n){return new Te((d,r)=>{let m=new XMLHttpRequest;m.onerror=r,m.onreadystatechange=()=>{m.readyState===dI&&d({statusCode:m.status,headers:{"x-sentry-rate-limits":m.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":m.getResponseHeader("Retry-After")}})},m.open("POST",i.url);for(let e in i.headers)Object.prototype.hasOwnProperty.call(i.headers,e)&&m.setRequestHeader(e,i.headers[e]);m.send(n.body)})}return Ta(i,t)}var ad="?";var cI=30,fI=40,pI=50;function jp(i,t,n,d){let r={filename:i,function:t,in_app:!0};return n!==void 0&&(r.lineno=n),d!==void 0&&(r.colno=d),r}var mI=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,vI=/\((\S*)(?::(\d+))(?::(\d+))\)/,gI=i=>{let t=mI.exec(i);if(t){if(t[2]&&t[2].indexOf("eval")===0){let m=vI.exec(t[2]);m&&(t[2]=m[1],t[3]=m[2],t[4]=m[3])}let[d,r]=H1(t[1]||ad,t[2]);return jp(r,d,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},yI=[cI,gI],xI=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,SI=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,EI=i=>{let t=xI.exec(i);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let m=SI.exec(t[3]);m&&(t[1]=t[1]||"eval",t[3]=m[1],t[4]=m[2],t[5]="")}let d=t[3],r=t[1]||ad;return[r,d]=H1(r,d),jp(d,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},TI=[pI,EI],bI=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,CI=i=>{let t=bI.exec(i);return t?jp(t[2],t[1]||ad,+t[3],t[4]?+t[4]:void 0):void 0},PI=[fI,CI];var wI=[yI,TI,PI],z1=Du(...wI),H1=(i,t)=>{let n=i.indexOf("safari-extension")!==-1,d=i.indexOf("safari-web-extension")!==-1;return n||d?[i.indexOf("@")!==-1?i.split("@")[0]:ad,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[i,t]};var od=1024,W1="Breadcrumbs",AI=(i={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...i};return{name:W1,setupOnce(){},setup(n){t.console&&ap(MI(n)),t.dom&&hp(RI(n,t.dom)),t.xhr&&vp(LI(n)),t.fetch&&fp(OI(n)),t.history&&vl(DI(n)),t.sentry&&n.on&&n.on("beforeSendEvent",II(n))}}},Kp=AI,$1=we(W1,Kp);function II(i){return function(n){me()===i&&Li({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:zi(n)},{event:n})}}function RI(i,t){return function(d){if(me()!==i)return;let r,m,e=typeof t=="object"?t.serializeAttribute:void 0,u=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;u&&u>od&&(ei&&ft.warn(`\`dom.maxStringLength\` cannot exceed ${od}, but a value of ${u} was configured. Sentry will use ${od} instead.`),u=od),typeof e=="string"&&(e=[e]);try{let c=d.event,s=FI(c)?c.target:c;r=dl(s,{keyAttrs:e,maxStringLength:u}),m=tp(s)}catch{r="<unknown>"}if(r.length===0)return;let g={category:`ui.${d.name}`,message:r};m&&(g.data={"ui.component_name":m}),Li(g,{event:d.event,name:d.name,global:d.global})}}function MI(i){return function(n){if(me()!==i)return;let d={category:"console",data:{arguments:n.args,logger:"console"},level:xp(n.level),message:Iu(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)d.message=`Assertion failed: ${Iu(n.args.slice(1)," ")||"console.assert"}`,d.data.arguments=n.args.slice(1);else return;Li(d,{input:n.args,level:n.level})}}function LI(i){return function(n){if(me()!==i)return;let{startTimestamp:d,endTimestamp:r}=n,m=n.xhr[fs];if(!d||!r||!m)return;let{method:e,url:u,status_code:g,body:c}=m,s={method:e,url:u,status_code:g},o={xhr:n.xhr,input:c,startTimestamp:d,endTimestamp:r};Li({category:"xhr",data:s,type:"http"},o)}}function OI(i){return function(n){if(me()!==i)return;let{startTimestamp:d,endTimestamp:r}=n;if(r&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){let m=n.fetchData,e={data:n.error,input:n.args,startTimestamp:d,endTimestamp:r};Li({category:"fetch",data:m,level:"error",type:"http"},e)}else{let m=n.response,e={...n.fetchData,status_code:m&&m.status},u={input:n.args,response:m,startTimestamp:d,endTimestamp:r};Li({category:"fetch",data:e,type:"http"},u)}}}function DI(i){return function(n){if(me()!==i)return;let d=n.from,r=n.to,m=gl(Ot.location.href),e=d?gl(d):void 0,u=gl(r);(!e||!e.path)&&(e=m),m.protocol===u.protocol&&m.host===u.host&&(r=u.relative),m.protocol===e.protocol&&m.host===e.host&&(d=e.relative),Li({category:"navigation",data:{from:d,to:r}})}}function FI(i){return!!i&&!!i.target}var j1="Dedupe",BI=()=>{let i;return{name:j1,setupOnce(){},processEvent(t){if(t.type)return t;try{if(NI(t,i))return ei&&ft.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return i=t}}},Jp=BI,K1=we(j1,Jp);function NI(i,t){return t?!!(kI(i,t)||VI(i,t)):!1}function kI(i,t){let n=i.message,d=t.message;return!(!n&&!d||n&&!d||!n&&d||n!==d||!Z1(i,t)||!J1(i,t))}function VI(i,t){let n=X1(t),d=X1(i);return!(!n||!d||n.type!==d.type||n.value!==d.value||!Z1(i,t)||!J1(i,t))}function J1(i,t){let n=Y1(i),d=Y1(t);if(!n&&!d)return!0;if(n&&!d||!n&&d||(n=n,d=d,d.length!==n.length))return!1;for(let r=0;r<d.length;r++){let m=d[r],e=n[r];if(m.filename!==e.filename||m.lineno!==e.lineno||m.colno!==e.colno||m.function!==e.function)return!1}return!0}function Z1(i,t){let n=i.fingerprint,d=t.fingerprint;if(!n&&!d)return!0;if(n&&!d||!n&&d)return!1;n=n,d=d;try{return n.join("")===d.join("")}catch{return!1}}function X1(i){return i.exception&&i.exception.values&&i.exception.values[0]}function Y1(i){let t=i.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}var _1="GlobalHandlers",GI=(i={})=>{let t={onerror:!0,onunhandledrejection:!0,...i};return{name:_1,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(UI(n),Q1("onerror")),t.onunhandledrejection&&(zI(n),Q1("onunhandledrejection"))}}},Zp=GI,q1=we(_1,Zp);function UI(i){pp(t=>{let{stackParser:n,attachStacktrace:d}=eS();if(me()!==i||Hp())return;let{msg:r,url:m,line:e,column:u,error:g}=t,c=g===void 0&&li(r)?$I(r,m,e,u):tS(rd(n,g||r,void 0,d,!1),m,e,u);c.level="error",Sl(c,{originalException:g,mechanism:{handled:!1,type:"onerror"}})})}function zI(i){mp(t=>{let{stackParser:n,attachStacktrace:d}=eS();if(me()!==i||Hp())return;let r=HI(t),m=hs(r)?WI(r):rd(n,r,void 0,d,!0);m.level="error",Sl(m,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function HI(i){if(hs(i))return i;let t=i;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return i}function WI(i){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}}function $I(i,t,n,d){let r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,m=da(i)?i.message:i,e="Error",u=m.match(r);return u&&(e=u[1],m=u[2]),tS({exception:{values:[{type:e,value:m}]}},t,n,d)}function tS(i,t,n,d){let r=i.exception=i.exception||{},m=r.values=r.values||[],e=m[0]=m[0]||{},u=e.stacktrace=e.stacktrace||{},g=u.frames=u.frames||[],c=isNaN(parseInt(d,10))?void 0:d,s=isNaN(parseInt(n,10))?void 0:n,o=li(t)&&t.length>0?t:qf();return g.length===0&&g.push({colno:c,filename:o,function:"?",in_app:!0,lineno:s}),i}function Q1(i){ei&&ft.log(`Global Handler attached: ${i}`)}function eS(){let i=me();return i&&i.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}var iS="HttpContext",XI=()=>({name:iS,setupOnce(){},preprocessEvent(i){if(!Ot.navigator&&!Ot.location&&!Ot.document)return;let t=i.request&&i.request.url||Ot.location&&Ot.location.href,{referrer:n}=Ot.document||{},{userAgent:d}=Ot.navigator||{},r={...i.request&&i.request.headers,...n&&{Referer:n},...d&&{"User-Agent":d}},m={...i.request,...t&&{url:t},headers:r};i.request=m}}),Qp=XI,nS=we(iS,Qp);var YI="cause",jI=5,rS="LinkedErrors",KI=(i={})=>{let t=i.limit||jI,n=i.key||YI;return{name:rS,setupOnce(){},preprocessEvent(d,r,m){let e=m.getOptions();hl(Xp,e.stackParser,e.maxValueLength,n,t,d,r)}}},_p=KI,sS=we(rS,_p);var JI=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],oS="TryCatch",ZI=(i={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...i};return{name:oS,setupOnce(){t.setTimeout&&oe(Ot,"setTimeout",aS),t.setInterval&&oe(Ot,"setInterval",aS),t.requestAnimationFrame&&oe(Ot,"requestAnimationFrame",QI),t.XMLHttpRequest&&"XMLHttpRequest"in Ot&&oe(XMLHttpRequest.prototype,"send",_I);let n=t.eventTarget;n&&(Array.isArray(n)?n:JI).forEach(qI)}}},qp=ZI,lS=we(oS,qp);function aS(i){return function(...t){let n=t[0];return t[0]=gr(n,{mechanism:{data:{function:Ri(i)},handled:!1,type:"instrument"}}),i.apply(this,t)}}function QI(i){return function(t){return i.apply(this,[gr(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Ri(i)},handled:!1,type:"instrument"}})])}}function _I(i){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&oe(n,r,function(m){let e={mechanism:{data:{function:r,handler:Ri(m)},handled:!1,type:"instrument"}},u=cs(m);return u&&(e.mechanism.data.handler=Ri(u)),gr(m,e)})}),i.apply(this,t)}}function qI(i){let t=Ot,n=t[i]&&t[i].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(oe(n,"addEventListener",function(d){return function(r,m,e){try{typeof m.handleEvent=="function"&&(m.handleEvent=gr(m.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ri(m),target:i},handled:!1,type:"instrument"}}))}catch{}return d.apply(this,[r,gr(m,{mechanism:{data:{function:"addEventListener",handler:Ri(m),target:i},handled:!1,type:"instrument"}}),e])}}),oe(n,"removeEventListener",function(d){return function(r,m,e){let u=m;try{let g=u&&u.__sentry_wrapped__;g&&d.call(this,r,g,e)}catch{}return d.call(this,r,u,e)}}))}var hS=[wl(),Al(),qp(),Kp(),Zp(),_p(),Jp(),Qp()];function uS(i){return[...hS]}function tm(i={}){i.defaultIntegrations===void 0&&(i.defaultIntegrations=uS()),i.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(i.release=__SENTRY_RELEASE__),Ot.SENTRY_RELEASE&&Ot.SENTRY_RELEASE.id&&(i.release=Ot.SENTRY_RELEASE.id)),i.autoSessionTracking===void 0&&(i.autoSessionTracking=!0),i.sendClientReports===void 0&&(i.sendClientReports=!0);let t={...i,stackParser:sp(i.stackParser||z1),integrations:Fp(i),transport:i.transport||(Nu()?G1:U1)};kp(sd,t),i.autoSessionTracking&&tR()}function tR(){if(typeof Ot.document>"u"){ei&&ft.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}El({ignoreDuration:!0}),Tl(),vl(({from:i,to:t})=>{i!==void 0&&i!==t&&(El({ignoreDuration:!0}),Tl())})}var em={};qy(em,{Breadcrumbs:()=>$1,Dedupe:()=>K1,GlobalHandlers:()=>q1,HttpContext:()=>nS,LinkedErrors:()=>sS,TryCatch:()=>lS});var dS={};Ot.Sentry&&Ot.Sentry.Integrations&&(dS=Ot.Sentry.Integrations);var bG={...dS,...D1,...em};function im(i,t,n,d){!1&&(d?i(n,JSON.parse(JSON.stringify(d))):i(n)),t!=="debug"&&Li({message:n,level:t,data:d})}function eR(i,t,n,d){!1&&(d?i(n,JSON.parse(JSON.stringify(d))):i(n)),xa(n,{level:t,extra:d})}var Rl=(i,t)=>im(console.debug,"debug",i,t),Dt=(i,t)=>im(console.info,"info",i,t),te=(i,t)=>im(console.warn,"warning",i,t),ze=(i,t)=>eR(console.error,"error",i,t);var cS=Et(void 0),fS=Et(""),pS=Et("Loading"),sm=Et({type:0}),mS=Et(!1),vS=Et(null),am=Et(!1),om=Et(!1),nm=Et(!1),gS=Et(!1),yS=Et(window.innerWidth>=window.innerHeight),pt={user:cS,language:fS,screen:pS,dialog:sm,saving:mS,tip:vS,preloadedGame:am,preloadedUI:om,isMuted:nm,isPageHidden:gS,isHorizontal:yS},Ml=i=>{cS.value=i},xS=i=>fS.value=i,ie=i=>{Dt(`Setting screen to ${i}`),pS.value=i},lm=i=>mS.value=i,yr=(i,t)=>sm.value={type:i,props:t},Je=()=>{sm.value={type:0}},ld=i=>vS.value=i,SS=()=>am.value=!0,ES=()=>om.value=!0,TS=()=>am.value&&om.value,bS=()=>nm.value=!nm.value;document.addEventListener("visibilitychange",()=>{gS.value=document.hidden});var rm=()=>{yS.value=window.innerWidth>=window.innerHeight},iR=()=>{rm(),setTimeout(rm,500)};rm();window.addEventListener("resize",iR);var nR={ButtonSelect_1:ci(_e.ButtonSelect_1),ButtonSelect_2:ci(_e.ButtonSelect_2),ButtonSelect_3:ci(_e.ButtonSelect_3),Error:ci(_e.Error),EmailNotification:ci(_e.EmailNotification),EmailOpen:ci(_e.EmailOpen),Swipe:ci(_e.Swipe),Success:ci(_e.Success),PopIn:ci(_e.PopIn),PopOut:ci(_e.PopOut),Purchase:ci(_e.Purchase),Sale:ci(_e.Sale),OrderTaken:ci(_e.OrderTaken),Report:ci(_e.Report)},CS={MenuMusic:PS(zf.MenuMusic),GameMusic:PS(zf.GameMusic)};pe(()=>{Howler.mute(pt.isMuted.value||pt.isPageHidden.value)});function ci(i){return{howl:IS(i),play(){this.howl.play()}}}var xt=i=>{nR[i].play()};function IS(i){return new AS.Howl({...i})}function PS(i){return{howl:IS(i),play(){this.howl.play()},stop(){this.howl.stop()}}}var Ll,wS=i=>{CS[i]!==Ll&&(Ll&&Ll.stop(),Ll=CS[i],Ll.play())};pe(()=>{switch(pt.screen.value){case"Loading":return;case"Game":wS("GameMusic");break;default:wS("MenuMusic");return}});var Yi=sl(class extends ls{constructor(i){var t;if(super(i),i.type!==rl.ATTRIBUTE||i.name!=="class"||((t=i.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(i){return" "+Object.keys(i).filter(t=>i[t]).join(" ")+" "}update(i,[t]){var d,r;if(this.it===void 0){this.it=new Set,i.strings!==void 0&&(this.st=new Set(i.strings.join(" ").split(/\s/).filter(m=>m!=="")));for(let m in t)t[m]&&!((d=this.st)!=null&&d.has(m))&&this.it.add(m);return this.render(t)}let n=i.element.classList;for(let m of this.it)m in t||(n.remove(m),this.it.delete(m));for(let m in t){let e=!!t[m];e===this.it.has(m)||(r=this.st)!=null&&r.has(m)||(e?(n.add(m),this.it.add(m)):(n.remove(m),this.it.delete(m)))}return Ln}});var ji=class extends yt{constructor(){super(...arguments);this.hamburgerMenu=!1;this.minimalPadding=!1;this.shorterHeight=!1;this.onClick=()=>{this.hamburgerMenu?xt("ButtonSelect_1"):xt("ButtonSelect_3")}}render(){return q`
      <button
        ?disabled=${this.disabled}
        @click=${this.onClick}
        class=${Yi({"border-normal":!0,"minimal-padding":this.minimalPadding,"shorter-height":this.shorterHeight})}
      >
        ${Bt(this.imgURL,()=>q`<img
              src=${this.imgURL}
              style=${this.disabled?"opacity: 0.3":""}
              draggable="false"
            />`)}
        ${Bt(this.text,()=>q`<div id="text">${this.text}</div>`)}
        <slot></slot>
      </button>
    `}};ji.styles=[je,at`
      button {
        background: var(--primary-teal-main);
        padding: var(--app-btn-padding, 8px 10px 12px);
        display: flex;
        flex-direction: row;
        gap: 10px;
        justify-content: center;
        align-items: center;

        border-radius: 6px;
        box-sizing: border-box;
        box-shadow: 0px -4px 0px 0px var(--primary-lowlight) inset;
        outline: none;
        -webkit-tap-highlight-color: transparent;

        font-family: Ubuntu;
        font-size: 20px;
        font-weight: 700;
        line-height: normal;
        text-align: left;
        color: var(--primary-navy);
        margin: 0px;

        cursor: pointer;
      }

      button.minimal-padding {
        padding: 2px 4px 0px;
      }

      button.minimal-padding:active {
        padding: 0px 4px 0px;
        background: var(--primary-teal-main);
        box-shadow: none;
      }
      button.minimal-padding:disabled {
        padding: 0px 4px 0px;
        background: var(--button-disabled-primary);
        border: 2px solid var(--button-disabled-lowlight);
        box-shadow: 0px -4px 0px 0px var(--button-disabled-lowlight) inset;
        color: var(--button-disabled-lowlight);
      }

      button:active {
        margin-top: 4px;
        padding: var(--app-btn-padding-active, 8px 10px);
        background: var(--primary-teal-main);
        box-shadow: none;
      }

      button:disabled {
        background: var(--button-disabled-primary);
        border: 2px solid var(--button-disabled-lowlight);
        box-shadow: 0px -4px 0px 0px var(--button-disabled-lowlight) inset;
        color: var(--button-disabled-lowlight);
      }

      button > * {
        flex-shrink: 1;
      }

      button.shorter-height {
        height: 44px;
      }
    `],et([It({type:Boolean})],ji.prototype,"disabled",2),et([It({type:Boolean})],ji.prototype,"hamburgerMenu",2),et([It({type:Boolean,attribute:"minimal-padding"})],ji.prototype,"minimalPadding",2),et([It({type:Boolean,attribute:"shorter-height"})],ji.prototype,"shorterHeight",2),et([It({type:String})],ji.prototype,"text",2),et([It({type:String})],ji.prototype,"imgURL",2),ji=et([lt("app-button")],ji);var xr=class extends Event{constructor(t,n,d){super("context-request",{bubbles:!0,composed:!0}),this.context=t,this.callback=n,this.subscribe=d??!1}};var ba=class{constructor(t,n,d,r){if(this.subscribe=!1,this.provided=!1,this.value=void 0,this.t=(m,e)=>{this.unsubscribe&&(this.unsubscribe!==e&&(this.provided=!1,this.unsubscribe()),this.subscribe||this.unsubscribe()),this.value=m,this.host.requestUpdate(),this.provided&&!this.subscribe||(this.provided=!0,this.callback&&this.callback(m,e)),this.unsubscribe=e},this.host=t,n.context!==void 0){let m=n;this.context=m.context,this.callback=m.callback,this.subscribe=m.subscribe??!1}else this.context=n,this.callback=d,this.subscribe=r??!1;this.host.addController(this)}hostConnected(){this.dispatchRequest()}hostDisconnected(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}dispatchRequest(){this.host.dispatchEvent(new xr(this.context,this.t,this.subscribe))}};var hd=class{get value(){return this.o}set value(t){this.setValue(t)}setValue(t,n=!1){let d=n||!Object.is(t,this.o);this.o=t,d&&this.updateObservers()}constructor(t){this.subscriptions=new Map,this.updateObservers=()=>{for(let[n,{disposer:d}]of this.subscriptions)n(this.o,d)},t!==void 0&&(this.value=t)}addCallback(t,n,d){if(!d)return void t(this.value);this.subscriptions.has(t)||this.subscriptions.set(t,{disposer:()=>{this.subscriptions.delete(t)},consumerHost:n});let{disposer:r}=this.subscriptions.get(t);t(this.value,r)}clearCallbacks(){this.subscriptions.clear()}};var hm=class extends Event{constructor(t){super("context-provider",{bubbles:!0,composed:!0}),this.context=t}},Ca=class extends hd{constructor(t,n,d){var r,m;super(n.context!==void 0?n.initialValue:d),this.onContextRequest=e=>{let u=e.composedPath()[0];e.context===this.context&&u!==this.host&&(e.stopPropagation(),this.addCallback(e.callback,u,e.subscribe))},this.onProviderRequest=e=>{let u=e.composedPath()[0];if(e.context!==this.context||u===this.host)return;let g=new Set;for(let[c,{consumerHost:s}]of this.subscriptions)g.has(c)||(g.add(c),s.dispatchEvent(new xr(this.context,c,!0)));e.stopPropagation()},this.host=t,n.context!==void 0?this.context=n.context:this.context=n,this.attachListeners(),(m=(r=this.host).addController)==null||m.call(r,this)}attachListeners(){this.host.addEventListener("context-request",this.onContextRequest),this.host.addEventListener("context-provider",this.onProviderRequest)}hostConnected(){this.host.dispatchEvent(new hm(this.context))}};function um({context:i}){return(t,n)=>{let d=new WeakMap;if(typeof n=="object")return n.addInitializer(function(){d.set(this,new Ca(this,{context:i}))}),{get(){return t.get.call(this)},set(r){var m;return(m=d.get(this))==null||m.setValue(r),t.set.call(this,r)},init(r){var m;return(m=d.get(this))==null||m.setValue(r),r}};{t.constructor.addInitializer(e=>{d.set(e,new Ca(e,{context:i}))});let r=Object.getOwnPropertyDescriptor(t,n),m;if(r===void 0){let e=new WeakMap;m={get:function(){return e.get(this)},set:function(u){d.get(this).setValue(u),e.set(this,u)},configurable:!0,enumerable:!0}}else{let e=r.set;m={...r,set:function(u){d.get(this).setValue(u),e==null||e.call(this,u)}}}return void Object.defineProperty(t,n,m)}}}function Mt({context:i,subscribe:t}){return(n,d)=>{typeof d=="object"?d.addInitializer(function(){new ba(this,{context:i,callback:r=>{this[d.name]=r},subscribe:t})}):n.constructor.addInitializer(r=>{new ba(r,{context:i,callback:m=>{r[d]=m},subscribe:t})})}}function xi(i,t,n){Object.values(i).forEach(d=>{sR(d,t,n)})}function sR(i,t,n){if(n.exists(i.key)){te("[PreloadHelper] Image preload failed - Object has already been loaded into memory!",{imageKey:i.key});return}switch(i.type){case 0:t.image(i.key,i.src);break;case 2:t.atlas(i.key,i.src,i.json);break;case 3:t.svg(i.key,i.src);break}}var dm=[],cm=0;function RS(i){cm+=i.length-1,i.forEach(t=>{let n=new Image;n.onload=()=>{let d=dm.indexOf(n);d>=0&&(dm.splice(d,1),cm--),cm<=0&&ES()},dm.push(n),n.src=t})}var aR={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,t){console&&console[i]&&console[i].apply(console,t)}},Aa=class{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||aR,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),d=0;d<t;d++)n[d]=arguments[d];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),d=0;d<t;d++)n[d]=arguments[d];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),d=0;d<t;d++)n[d]=arguments[d];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),d=0;d<t;d++)n[d]=arguments[d];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,d,r){return r&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${d}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Aa(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Aa(this.logger,t)}},mn=new Aa,Ia=class{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(d=>{this.observers[d]=this.observers[d]||[],this.observers[d].push(n)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(d=>d!==n)}}emit(t){for(var n=arguments.length,d=new Array(n>1?n-1:0),r=1;r<n;r++)d[r-1]=arguments[r];this.observers[t]&&[].concat(this.observers[t]).forEach(e=>{e(...d)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(e=>{e.apply(e,[t,...d])})}};function Ol(){let i,t,n=new Promise((d,r)=>{i=d,t=r});return n.resolve=i,n.reject=t,n}function MS(i){return i==null?"":""+i}function oR(i,t,n){i.forEach(d=>{t[d]&&(n[d]=t[d])})}function ym(i,t,n){function d(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function r(){return!i||typeof i=="string"}let m=typeof t!="string"?[].concat(t):t.split(".");for(;m.length>1;){if(r())return{};let e=d(m.shift());!i[e]&&n&&(i[e]=new n),Object.prototype.hasOwnProperty.call(i,e)?i=i[e]:i={}}return r()?{}:{obj:i,k:d(m.shift())}}function LS(i,t,n){let{obj:d,k:r}=ym(i,t,Object);d[r]=n}function lR(i,t,n,d){let{obj:r,k:m}=ym(i,t,Object);r[m]=r[m]||[],d&&(r[m]=r[m].concat(n)),d||r[m].push(n)}function dd(i,t){let{obj:n,k:d}=ym(i,t);if(n)return n[d]}function hR(i,t,n){let d=dd(i,n);return d!==void 0?d:dd(t,n)}function kS(i,t,n){for(let d in t)d!=="__proto__"&&d!=="constructor"&&(d in i?typeof i[d]=="string"||i[d]instanceof String||typeof t[d]=="string"||t[d]instanceof String?n&&(i[d]=t[d]):kS(i[d],t[d],n):i[d]=t[d]);return i}function Pa(i){return i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var uR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function dR(i){return typeof i=="string"?i.replace(/[&<>"'\/]/g,t=>uR[t]):i}var cR=[" ",",","?","!",";"];function fR(i,t,n){t=t||"",n=n||"";let d=cR.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(d.length===0)return!0;let r=new RegExp(`(${d.map(e=>e==="?"?"\\?":e).join("|")})`),m=!r.test(i);if(!m){let e=i.indexOf(n);e>0&&!r.test(i.substring(0,e))&&(m=!0)}return m}function cd(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[t])return i[t];let d=t.split(n),r=i;for(let m=0;m<d.length;++m){if(!r||typeof r[d[m]]=="string"&&m+1<d.length)return;if(r[d[m]]===void 0){let e=2,u=d.slice(m,m+e).join(n),g=r[u];for(;g===void 0&&d.length>m+e;)e++,u=d.slice(m,m+e).join(n),g=r[u];if(g===void 0)return;if(g===null)return null;if(t.endsWith(u)){if(typeof g=="string")return g;if(u&&typeof g[u]=="string")return g[u]}let c=d.slice(m+e).join(n);return c?cd(g,c,n):void 0}r=r[d[m]]}return r}function fd(i){return i&&i.indexOf("_")>0?i.replace("_","-"):i}var pd=class extends Ia{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){let n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,d){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,e=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[t,n];d&&typeof d!="string"&&(u=u.concat(d)),d&&typeof d=="string"&&(u=u.concat(m?d.split(m):d)),t.indexOf(".")>-1&&(u=t.split("."));let g=dd(this.data,u);return g||!e||typeof d!="string"?g:cd(this.data&&this.data[t]&&this.data[t][n],d,m)}addResource(t,n,d,r){let m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},e=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,u=[t,n];d&&(u=u.concat(e?d.split(e):d)),t.indexOf(".")>-1&&(u=t.split("."),r=n,n=u[1]),this.addNamespaces(n),LS(this.data,u,r),m.silent||this.emit("added",t,n,d,r)}addResources(t,n,d){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(let m in d)(typeof d[m]=="string"||Object.prototype.toString.apply(d[m])==="[object Array]")&&this.addResource(t,n,m,d[m],{silent:!0});r.silent||this.emit("added",t,n,d)}addResourceBundle(t,n,d,r,m){let e=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[t,n];t.indexOf(".")>-1&&(u=t.split("."),r=d,d=n,n=u[1]),this.addNamespaces(n);let g=dd(this.data,u)||{};r?kS(g,d,m):g={...g,...d},LS(this.data,u,g),e.silent||this.emit("added",t,n,d)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){let n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}},VS={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,t,n,d,r){return i.forEach(m=>{this.processors[m]&&(t=this.processors[m].process(t,n,d,r))}),t}},OS={},Ra=class extends Ia{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),oR(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mn.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;let d=this.resolve(t,n);return d&&d.res!==void 0}extractFromKey(t,n){let d=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");let r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,m=n.ns||this.options.defaultNS||[],e=d&&t.indexOf(d)>-1,u=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!fR(t,d,r);if(e&&!u){let g=t.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:t,namespaces:m};let c=t.split(d);(d!==r||d===r&&this.options.ns.indexOf(c[0])>-1)&&(m=c.shift()),t=c.join(r)}return typeof m=="string"&&(m=[m]),{key:t,namespaces:m}}translate(t,n,d){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);let r=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,m=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:e,namespaces:u}=this.extractFromKey(t[t.length-1],n),g=u[u.length-1],c=n.lng||this.language,s=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(s){let S=n.nsSeparator||this.options.nsSeparator;return r?{res:`${g}${S}${e}`,usedKey:e,exactUsedKey:e,usedLng:c,usedNS:g,usedParams:this.getUsedParamsDetails(n)}:`${g}${S}${e}`}return r?{res:e,usedKey:e,exactUsedKey:e,usedLng:c,usedNS:g,usedParams:this.getUsedParamsDetails(n)}:e}let o=this.resolve(t,n),a=o&&o.res,l=o&&o.usedKey||e,p=o&&o.exactUsedKey||e,h=Object.prototype.toString.apply(a),f=["[object Number]","[object Function]","[object RegExp]"],v=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&a&&(typeof a!="string"&&typeof a!="boolean"&&typeof a!="number")&&f.indexOf(h)<0&&!(typeof v=="string"&&h==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(l,a,{...n,ns:u}):`key '${e} (${this.language})' returned an object instead of string.`;return r?(o.res=S,o.usedParams=this.getUsedParamsDetails(n),o):S}if(m){let S=h==="[object Array]",E=S?[]:{},b=S?p:l;for(let T in a)if(Object.prototype.hasOwnProperty.call(a,T)){let P=`${b}${m}${T}`;E[T]=this.translate(P,{...n,joinArrays:!1,ns:u}),E[T]===P&&(E[T]=a[T])}a=E}}else if(y&&typeof v=="string"&&h==="[object Array]")a=a.join(v),a&&(a=this.extendTranslation(a,t,n,d));else{let S=!1,E=!1,b=n.count!==void 0&&typeof n.count!="string",T=Ra.hasDefaultValue(n),P=b?this.pluralResolver.getSuffix(c,n.count,n):"",C=n.ordinal&&b?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",w=n[`defaultValue${P}`]||n[`defaultValue${C}`]||n.defaultValue;!this.isValidLookup(a)&&T&&(S=!0,a=w),this.isValidLookup(a)||(E=!0,a=e);let R=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&E?void 0:a,I=T&&w!==a&&this.options.updateMissing;if(E||S||I){if(this.logger.log(I?"updateKey":"missingKey",c,g,e,I?w:a),m){let V=this.resolve(e,{...n,keySeparator:!1});V&&V.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let L=[],O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&O&&O[0])for(let V=0;V<O.length;V++)L.push(O[V]);else this.options.saveMissingTo==="all"?L=this.languageUtils.toResolveHierarchy(n.lng||this.language):L.push(n.lng||this.language);let D=(V,B,U)=>{let W=T&&U!==a?U:R;this.options.missingKeyHandler?this.options.missingKeyHandler(V,g,B,W,I,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(V,g,B,W,I,n),this.emit("missingKey",V,g,B,a)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?L.forEach(V=>{this.pluralResolver.getSuffixes(V,n).forEach(B=>{D([V],e+B,n[`defaultValue${B}`]||w)})}):D(L,e,w))}a=this.extendTranslation(a,t,n,o,d),E&&a===e&&this.options.appendNamespaceToMissingKey&&(a=`${g}:${e}`),(E||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?a=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}:${e}`:e,S?a:void 0):a=this.options.parseMissingKeyHandler(a))}return r?(o.res=a,o.usedParams=this.getUsedParamsDetails(n),o):a}extendTranslation(t,n,d,r,m){var e=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...d},d.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!d.skipInterpolation){d.interpolation&&this.interpolator.init({...d,interpolation:{...this.options.interpolation,...d.interpolation}});let c=typeof t=="string"&&(d&&d.interpolation&&d.interpolation.skipOnVariables!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),s;if(c){let a=t.match(this.interpolator.nestingRegexp);s=a&&a.length}let o=d.replace&&typeof d.replace!="string"?d.replace:d;if(this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),t=this.interpolator.interpolate(t,o,d.lng||this.language,d),c){let a=t.match(this.interpolator.nestingRegexp),l=a&&a.length;s<l&&(d.nest=!1)}!d.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(d.lng=r.usedLng),d.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var a=arguments.length,l=new Array(a),p=0;p<a;p++)l[p]=arguments[p];return m&&m[0]===l[0]&&!d.context?(e.logger.warn(`It seems you are nesting recursively key: ${l[0]} in key: ${n[0]}`),null):e.translate(...l,n)},d)),d.interpolation&&this.interpolator.reset()}let u=d.postProcess||this.options.postProcess,g=typeof u=="string"?[u]:u;return t!=null&&g&&g.length&&d.applyPostProcessor!==!1&&(t=VS.handle(g,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(d)},...d}:d,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d,r,m,e,u;return typeof t=="string"&&(t=[t]),t.forEach(g=>{if(this.isValidLookup(d))return;let c=this.extractFromKey(g,n),s=c.key;r=s;let o=c.namespaces;this.options.fallbackNS&&(o=o.concat(this.options.fallbackNS));let a=n.count!==void 0&&typeof n.count!="string",l=a&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",h=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);o.forEach(f=>{this.isValidLookup(d)||(u=f,!OS[`${h[0]}-${f}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(u)&&(OS[`${h[0]}-${f}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(v=>{if(this.isValidLookup(d))return;e=v;let y=[s];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,s,v,f,n);else{let S;a&&(S=this.pluralResolver.getSuffix(v,n.count,n));let E=`${this.options.pluralSeparator}zero`,b=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(a&&(y.push(s+S),n.ordinal&&S.indexOf(b)===0&&y.push(s+S.replace(b,this.options.pluralSeparator)),l&&y.push(s+E)),p){let T=`${s}${this.options.contextSeparator}${n.context}`;y.push(T),a&&(y.push(T+S),n.ordinal&&S.indexOf(b)===0&&y.push(T+S.replace(b,this.options.pluralSeparator)),l&&y.push(T+E))}}let x;for(;x=y.pop();)this.isValidLookup(d)||(m=x,d=this.getResource(v,f,x,n))}))})}),{res:d,usedKey:r,exactUsedKey:m,usedLng:e,usedNS:u}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,d){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,d,r):this.resourceStore.getResource(t,n,d,r)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],d=t.replace&&typeof t.replace!="string",r=d?t.replace:t;if(d&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!d){r={...r};for(let m of n)delete r[m]}return r}static hasDefaultValue(t){let n="defaultValue";for(let d in t)if(Object.prototype.hasOwnProperty.call(t,d)&&n===d.substring(0,n.length)&&t[d]!==void 0)return!0;return!1}};function fm(i){return i.charAt(0).toUpperCase()+i.slice(1)}var md=class{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mn.create("languageUtils")}getScriptPartFromCode(t){if(t=fd(t),!t||t.indexOf("-")<0)return null;let n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=fd(t),!t||t.indexOf("-")<0)return t;let n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){let n=["hans","hant","latn","cyrl","cans","mong","arab"],d=t.split("-");return this.options.lowerCaseLng?d=d.map(r=>r.toLowerCase()):d.length===2?(d[0]=d[0].toLowerCase(),d[1]=d[1].toUpperCase(),n.indexOf(d[1].toLowerCase())>-1&&(d[1]=fm(d[1].toLowerCase()))):d.length===3&&(d[0]=d[0].toLowerCase(),d[1].length===2&&(d[1]=d[1].toUpperCase()),d[0]!=="sgn"&&d[2].length===2&&(d[2]=d[2].toUpperCase()),n.indexOf(d[1].toLowerCase())>-1&&(d[1]=fm(d[1].toLowerCase())),n.indexOf(d[2].toLowerCase())>-1&&(d[2]=fm(d[2].toLowerCase()))),d.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(d=>{if(n)return;let r=this.formatLanguageCode(d);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&t.forEach(d=>{if(n)return;let r=this.getLanguagePartFromCode(d);if(this.isSupportedCode(r))return n=r;n=this.options.supportedLngs.find(m=>{if(m===r)return m;if(!(m.indexOf("-")<0&&r.indexOf("-")<0)&&m.indexOf(r)===0)return m})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];let d=t[n];return d||(d=t[this.getScriptPartFromCode(n)]),d||(d=t[this.formatLanguageCode(n)]),d||(d=t[this.getLanguagePartFromCode(n)]),d||(d=t.default),d||[]}toResolveHierarchy(t,n){let d=this.getFallbackCodes(n||this.options.fallbackLng||[],t),r=[],m=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&m(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&m(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&m(this.getLanguagePartFromCode(t))):typeof t=="string"&&m(this.formatLanguageCode(t)),d.forEach(e=>{r.indexOf(e)<0&&m(this.formatLanguageCode(e))}),r}},pR=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],mR={1:function(i){return+(i>1)},2:function(i){return+(i!=1)},3:function(i){return 0},4:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},5:function(i){return i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5},6:function(i){return i==1?0:i>=2&&i<=4?1:2},7:function(i){return i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2},8:function(i){return i==1?0:i==2?1:i!=8&&i!=11?2:3},9:function(i){return+(i>=2)},10:function(i){return i==1?0:i==2?1:i<7?2:i<11?3:4},11:function(i){return i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3},12:function(i){return+(i%10!=1||i%100==11)},13:function(i){return+(i!==0)},14:function(i){return i==1?0:i==2?1:i==3?2:3},15:function(i){return i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2},16:function(i){return i%10==1&&i%100!=11?0:i!==0?1:2},17:function(i){return i==1||i%10==1&&i%100!=11?0:1},18:function(i){return i==0?0:i==1?1:2},19:function(i){return i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3},20:function(i){return i==1?0:i==0||i%100>0&&i%100<20?1:2},21:function(i){return i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0},22:function(i){return i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3}},vR=["v1","v2","v3"],gR=["v4"],DS={zero:0,one:1,two:2,few:3,many:4,other:5};function yR(){let i={};return pR.forEach(t=>{t.lngs.forEach(n=>{i[n]={numbers:t.nr,plurals:mR[t.fc]}})}),i}var pm=class{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=mn.create("pluralResolver"),(!this.options.compatibilityJSON||gR.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=yR()}addRule(t,n){this.rules[t]=n}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(fd(t),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=this.getRule(t,n);return this.shouldUseIntlApi()?d&&d.resolvedOptions().pluralCategories.length>1:d&&d.numbers.length>1}getPluralFormsOfKey(t,n){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,d).map(r=>`${n}${r}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=this.getRule(t,n);return d?this.shouldUseIntlApi()?d.resolvedOptions().pluralCategories.sort((r,m)=>DS[r]-DS[m]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):d.numbers.map(r=>this.getSuffix(t,r,n)):[]}getSuffix(t,n){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=this.getRule(t,d);return r?this.shouldUseIntlApi()?`${this.options.prepend}${d.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:this.getSuffixRetroCompatible(r,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){let d=t.noAbs?t.plurals(n):t.plurals(Math.abs(n)),r=t.numbers[d];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));let m=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:m():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?m():this.options.prepend&&d.toString()?this.options.prepend+d.toString():d.toString()}shouldUseIntlApi(){return!vR.includes(this.options.compatibilityJSON)}};function FS(i,t,n){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,m=hR(i,t,n);return!m&&r&&typeof n=="string"&&(m=cd(i,n,d),m===void 0&&(m=cd(t,n,d))),m}var mm=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=mn.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});let n=t.interpolation;this.escape=n.escape!==void 0?n.escape:dR,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Pa(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Pa(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Pa(n.nestingPrefix):n.nestingPrefixEscaped||Pa("$t("),this.nestingSuffix=n.nestingSuffix?Pa(n.nestingSuffix):n.nestingSuffixEscaped||Pa(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let t=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(t,"g");let n=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(n,"g");let d=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(d,"g")}interpolate(t,n,d,r){let m,e,u,g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(p){return p.replace(/\$/g,"$$$$")}let s=p=>{if(p.indexOf(this.formatSeparator)<0){let y=FS(n,g,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,d,{...r,...n,interpolationkey:p}):y}let h=p.split(this.formatSeparator),f=h.shift().trim(),v=h.join(this.formatSeparator).trim();return this.format(FS(n,g,f,this.options.keySeparator,this.options.ignoreJSONStructure),v,d,{...r,...n,interpolationkey:f})};this.resetRegExp();let o=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,a=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>c(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?c(this.escape(p)):c(p)}].forEach(p=>{for(u=0;m=p.regex.exec(t);){let h=m[1].trim();if(e=s(h),e===void 0)if(typeof o=="function"){let v=o(t,m,r);e=typeof v=="string"?v:""}else if(r&&Object.prototype.hasOwnProperty.call(r,h))e="";else if(a){e=m[0];continue}else this.logger.warn(`missed to pass in variable ${h} for interpolating ${t}`),e="";else typeof e!="string"&&!this.useRawValueToEscape&&(e=MS(e));let f=p.safeValue(e);if(t=t.replace(m[0],f),a?(p.regex.lastIndex+=e.length,p.regex.lastIndex-=m[0].length):p.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),t}nest(t,n){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,m,e;function u(g,c){let s=this.nestingOptionsSeparator;if(g.indexOf(s)<0)return g;let o=g.split(new RegExp(`${s}[ ]*{`)),a=`{${o[1]}`;g=o[0],a=this.interpolate(a,e);let l=a.match(/'/g),p=a.match(/"/g);(l&&l.length%2===0&&!p||p.length%2!==0)&&(a=a.replace(/'/g,'"'));try{e=JSON.parse(a),c&&(e={...c,...e})}catch(h){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,h),`${g}${s}${a}`}return delete e.defaultValue,g}for(;r=this.nestingRegexp.exec(t);){let g=[];e={...d},e=e.replace&&typeof e.replace!="string"?e.replace:e,e.applyPostProcessor=!1,delete e.defaultValue;let c=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){let s=r[1].split(this.formatSeparator).map(o=>o.trim());r[1]=s.shift(),g=s,c=!0}if(m=n(u.call(this,r[1].trim(),e),e),m&&r[0]===t&&typeof m!="string")return m;typeof m!="string"&&(m=MS(m)),m||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),m=""),c&&(m=g.reduce((s,o)=>this.format(s,o,d.lng,{...d,interpolationkey:r[1].trim()}),m.trim())),t=t.replace(r[0],m),this.regexp.lastIndex=0}return t}};function xR(i){let t=i.toLowerCase().trim(),n={};if(i.indexOf("(")>-1){let d=i.split("(");t=d[0].toLowerCase().trim();let r=d[1].substring(0,d[1].length-1);t==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(e=>{if(!e)return;let[u,...g]=e.split(":"),c=g.join(":").trim().replace(/^'+|'+$/g,"");n[u.trim()]||(n[u.trim()]=c),c==="false"&&(n[u.trim()]=!1),c==="true"&&(n[u.trim()]=!0),isNaN(c)||(n[u.trim()]=parseInt(c,10))})}return{formatName:t,formatOptions:n}}function wa(i){let t={};return function(d,r,m){let e=r+JSON.stringify(m),u=t[e];return u||(u=i(fd(r),m),t[e]=u),u(d)}}var vm=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=mn.create("formatter"),this.options=t,this.formats={number:wa((n,d)=>{let r=new Intl.NumberFormat(n,{...d});return m=>r.format(m)}),currency:wa((n,d)=>{let r=new Intl.NumberFormat(n,{...d,style:"currency"});return m=>r.format(m)}),datetime:wa((n,d)=>{let r=new Intl.DateTimeFormat(n,{...d});return m=>r.format(m)}),relativetime:wa((n,d)=>{let r=new Intl.RelativeTimeFormat(n,{...d});return m=>r.format(m,d.range||"day")}),list:wa((n,d)=>{let r=new Intl.ListFormat(n,{...d});return m=>r.format(m)})},this.init(t)}init(t){let d=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=d.formatSeparator?d.formatSeparator:d.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=wa(n)}format(t,n,d){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((u,g)=>{let{formatName:c,formatOptions:s}=xR(g);if(this.formats[c]){let o=u;try{let a=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},l=a.locale||a.lng||r.locale||r.lng||d;o=this.formats[c](u,l,{...s,...r,...a})}catch(a){this.logger.warn(a)}return o}else this.logger.warn(`there was no format function for ${c}`);return u},t)}};function SR(i,t){i.pending[t]!==void 0&&(delete i.pending[t],i.pendingCount--)}var gm=class extends Ia{constructor(t,n,d){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=d,this.languageUtils=d.languageUtils,this.options=r,this.logger=mn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(d,r.backend,r)}queueLoad(t,n,d,r){let m={},e={},u={},g={};return t.forEach(c=>{let s=!0;n.forEach(o=>{let a=`${c}|${o}`;!d.reload&&this.store.hasResourceBundle(c,o)?this.state[a]=2:this.state[a]<0||(this.state[a]===1?e[a]===void 0&&(e[a]=!0):(this.state[a]=1,s=!1,e[a]===void 0&&(e[a]=!0),m[a]===void 0&&(m[a]=!0),g[o]===void 0&&(g[o]=!0)))}),s||(u[c]=!0)}),(Object.keys(m).length||Object.keys(e).length)&&this.queue.push({pending:e,pendingCount:Object.keys(e).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(m),pending:Object.keys(e),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(g)}}loaded(t,n,d){let r=t.split("|"),m=r[0],e=r[1];n&&this.emit("failedLoading",m,e,n),d&&this.store.addResourceBundle(m,e,d),this.state[t]=n?-1:2;let u={};this.queue.forEach(g=>{lR(g.loaded,[m],e),SR(g,t),n&&g.errors.push(n),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(c=>{u[c]||(u[c]={});let s=g.loaded[c];s.length&&s.forEach(o=>{u[c][o]===void 0&&(u[c][o]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(g=>!g.done)}read(t,n,d){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,e=arguments.length>5?arguments[5]:void 0;if(!t.length)return e(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:d,tried:r,wait:m,callback:e});return}this.readingCalls++;let u=(c,s)=>{if(this.readingCalls--,this.waitingReads.length>0){let o=this.waitingReads.shift();this.read(o.lng,o.ns,o.fcName,o.tried,o.wait,o.callback)}if(c&&s&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,d,r+1,m*2,e)},m);return}e(c,s)},g=this.backend[d].bind(this.backend);if(g.length===2){try{let c=g(t,n);c&&typeof c.then=="function"?c.then(s=>u(null,s)).catch(u):u(null,c)}catch(c){u(c)}return}return g(t,n,u)}prepareLoading(t,n){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof n=="string"&&(n=[n]);let m=this.queueLoad(t,n,d,r);if(!m.toLoad.length)return m.pending.length||r(),null;m.toLoad.forEach(e=>{this.loadOne(e)})}load(t,n,d){this.prepareLoading(t,n,{},d)}reload(t,n,d){this.prepareLoading(t,n,{reload:!0},d)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",d=t.split("|"),r=d[0],m=d[1];this.read(r,m,"read",void 0,void 0,(e,u)=>{e&&this.logger.warn(`${n}loading namespace ${m} for language ${r} failed`,e),!e&&u&&this.logger.log(`${n}loaded namespace ${m} for language ${r}`,u),this.loaded(t,e,u)})}saveMissing(t,n,d,r,m){let e=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${d}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(d==null||d==="")){if(this.backend&&this.backend.create){let g={...e,isUpdate:m},c=this.backend.create.bind(this.backend);if(c.length<6)try{let s;c.length===5?s=c(t,n,d,r,g):s=c(t,n,d,r),s&&typeof s.then=="function"?s.then(o=>u(null,o)).catch(u):u(null,s)}catch(s){u(s)}else c(t,n,d,r,u,g)}!t||!t[0]||this.store.addResource(t[0],n,d,r)}}};function BS(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let n={};if(typeof t[1]=="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){let d=t[3]||t[2];Object.keys(d).forEach(r=>{n[r]=d[r]})}return n},interpolation:{escapeValue:!0,format:(i,t,n,d)=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function NS(i){return typeof i.ns=="string"&&(i.ns=[i.ns]),typeof i.fallbackLng=="string"&&(i.fallbackLng=[i.fallbackLng]),typeof i.fallbackNS=="string"&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i}function ud(){}function ER(i){Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(n=>{typeof i[n]=="function"&&(i[n]=i[n].bind(i))})}var ms=class extends Ia{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=NS(t),this.services={},this.logger=mn,this.modules={external:[]},ER(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(d=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));let r=BS();this.options={...r,...this.options,...NS(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function m(s){return s?typeof s=="function"?new s:s:null}if(!this.options.isClone){this.modules.logger?mn.init(m(this.modules.logger),this.options):mn.init(null,this.options);let s;this.modules.formatter?s=this.modules.formatter:typeof Intl<"u"&&(s=vm);let o=new md(this.options);this.store=new pd(this.options.resources,this.options);let a=this.services;a.logger=mn,a.resourceStore=this.store,a.languageUtils=o,a.pluralResolver=new pm(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(a.formatter=m(s),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new mm(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new gm(m(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",function(l){for(var p=arguments.length,h=new Array(p>1?p-1:0),f=1;f<p;f++)h[f-1]=arguments[f];t.emit(l,...h)}),this.modules.languageDetector&&(a.languageDetector=m(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=m(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new Ra(this.services,this.options),this.translator.on("*",function(l){for(var p=arguments.length,h=new Array(p>1?p-1:0),f=1;f<p;f++)h[f-1]=arguments[f];t.emit(l,...h)}),this.modules.external.forEach(l=>{l.init&&l.init(this)})}if(this.format=this.options.interpolation.format,d||(d=ud),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.length>0&&s[0]!=="dev"&&(this.options.lng=s[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(s=>{this[s]=function(){return t.store[s](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(s=>{this[s]=function(){return t.store[s](...arguments),t}});let g=Ol(),c=()=>{let s=(o,a)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),g.resolve(a),d(o,a)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return s(null,this.t.bind(this));this.changeLanguage(this.options.lng,s)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),g}loadResources(t){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ud,r=typeof t=="string"?t:this.language;if(typeof t=="function"&&(d=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return d();let m=[],e=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(c=>{c!=="cimode"&&m.indexOf(c)<0&&m.push(c)})};r?e(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>e(g)),this.options.preload&&this.options.preload.forEach(u=>e(u)),this.services.backendConnector.load(m,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),d(u)})}else d(null)}reloadResources(t,n,d){let r=Ol();return t||(t=this.languages),n||(n=this.options.ns),d||(d=ud),this.services.backendConnector.reload(t,n,m=>{r.resolve(),d(m)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&VS.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){let d=this.languages[n];if(!(["cimode","dev"].indexOf(d)>-1)&&this.store.hasLanguageSomeTranslations(d)){this.resolvedLanguage=d;break}}}changeLanguage(t,n){var d=this;this.isLanguageChangingTo=t;let r=Ol();this.emit("languageChanging",t);let m=g=>{this.language=g,this.languages=this.services.languageUtils.toResolveHierarchy(g),this.resolvedLanguage=void 0,this.setResolvedLanguage(g)},e=(g,c)=>{c?(m(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve(function(){return d.t(...arguments)}),n&&n(g,function(){return d.t(...arguments)})},u=g=>{!t&&!g&&this.services.languageDetector&&(g=[]);let c=typeof g=="string"?g:this.services.languageUtils.getBestMatchFromCodes(g);c&&(this.language||m(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,s=>{e(s,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(t),r}getFixedT(t,n,d){var r=this;let m=function(e,u){let g;if(typeof u!="object"){for(var c=arguments.length,s=new Array(c>2?c-2:0),o=2;o<c;o++)s[o-2]=arguments[o];g=r.options.overloadTranslationOptionHandler([e,u].concat(s))}else g={...u};g.lng=g.lng||m.lng,g.lngs=g.lngs||m.lngs,g.ns=g.ns||m.ns,g.keyPrefix=g.keyPrefix||d||m.keyPrefix;let a=r.options.keySeparator||".",l;return g.keyPrefix&&Array.isArray(e)?l=e.map(p=>`${g.keyPrefix}${a}${p}`):l=g.keyPrefix?`${g.keyPrefix}${a}${e}`:e,r.t(l,g)};return typeof t=="string"?m.lng=t:m.lngs=t,m.ns=n,m.keyPrefix=d,m}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let d=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,m=this.languages[this.languages.length-1];if(d.toLowerCase()==="cimode")return!0;let e=(u,g)=>{let c=this.services.backendConnector.state[`${u}|${g}`];return c===-1||c===2};if(n.precheck){let u=n.precheck(this,e);if(u!==void 0)return u}return!!(this.hasResourceBundle(d,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||e(d,t)&&(!r||e(m,t)))}loadNamespaces(t,n){let d=Ol();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{d.resolve(),n&&n(r)}),d):(n&&n(),Promise.resolve())}loadLanguages(t,n){let d=Ol();typeof t=="string"&&(t=[t]);let r=this.options.preload||[],m=t.filter(e=>r.indexOf(e)<0);return m.length?(this.options.preload=r.concat(m),this.loadResources(e=>{d.resolve(),n&&n(e)}),d):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";let n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],d=this.services&&this.services.languageUtils||new md(BS());return n.indexOf(d.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new ms(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ud,d=t.forkResourceStore;d&&delete t.forkResourceStore;let r={...this.options,...t,isClone:!0},m=new ms(r);return(t.debug!==void 0||t.prefix!==void 0)&&(m.logger=m.logger.clone(t)),["store","services","language"].forEach(u=>{m[u]=this[u]}),m.services={...this.services},m.services.utils={hasLoadedNamespace:m.hasLoadedNamespace.bind(m)},d&&(m.store=new pd(this.store.data,r),m.services.resourceStore=m.store),m.translator=new Ra(m.services,r),m.translator.on("*",function(u){for(var g=arguments.length,c=new Array(g>1?g-1:0),s=1;s<g;s++)c[s-1]=arguments[s];m.emit(u,...c)}),m.init(r,n),m.translator.options=r,m.translator.backendConnector.services.utils={hasLoadedNamespace:m.hasLoadedNamespace.bind(m)},m}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},Ae=ms.createInstance();Ae.createInstance=ms.createInstance;var LU=Ae.createInstance,OU=Ae.dir,DU=Ae.init,FU=Ae.loadResources,BU=Ae.reloadResources,NU=Ae.use,kU=Ae.changeLanguage,VU=Ae.getFixedT,GS=Ae.t,GU=Ae.exists,UU=Ae.setDefaultNamespace,zU=Ae.hasLoadedNamespace,HU=Ae.loadNamespaces,WU=Ae.loadLanguages;var xm="translation";function tt(i){return GS(i)}var US=async()=>{await Ae.init({lng:"en",defaultNS:xm,resources:{}}),await TR("en"),xS("en")},TR=async i=>{if(Ae.hasResourceBundle(i,xm))return;Dt(`Loading ${i} language translation`);let n=await(await fetch(`translations/${i}.json`)).json();Ae.addResourceBundle(i,xm,n)};var Oi=class{constructor(t,n){this.key=()=>`product_${this.group}_${this.index}`;this.equals=t=>this.group===t.group&&this.index===t.index;this.productName=()=>{switch(this.group){case"clothing":return tt(`ItemPopUp_Fashion_0${this.index+1}`);case"coffeeShop":return tt(`ItemPopUp_CoffeeShop_0${this.index+1}`);case"technology":return tt(`ItemPopUp_Technology_0${this.index+1}`);case"stationary":return tt(`ItemPopUp_Stationery_0${this.index+1}`);case"toiletries":return tt(`ItemPopUp_HairAndBeauty_0${this.index+1}`)}};this.group=t,this.index=n}};var bR=[{key:"shop_level1",type:0,src:"assets/backgrounds/level1.png"},{key:"shop_level2",type:0,src:"assets/backgrounds/level2.png"},{key:"shop_level3",type:0,src:"assets/backgrounds/level3.png"},{key:"shop_level4",type:0,src:"assets/backgrounds/level4.png"},{key:"shop_level5",type:0,src:"assets/backgrounds/level5.png"}],zS=i=>{xi(bR,i.load,i.textures)};var HS=i=>{xi(CR,i.load,i.textures)},CR=[{key:"main_character_sheet",type:2,src:"assets/main-character/MiniMainCharacter.png",json:"assets/main-character/MiniMainCharacter.json"}],WS=i=>{xi(PR,i.load,i.textures)},PR=[{key:"employee_sheet",type:2,src:"assets/employees/employees.png",json:"assets/employees/employees.json"}],$S=i=>{xi(wR,i.load,i.textures)},wR=[{key:"customer_sheet",type:2,src:"assets/customers/customers.png",json:"assets/customers/customers.json"}],XS=i=>{xi(AR,i.load,i.textures)},AR=[{key:"till_sheet",type:2,src:"assets/tills/countertop_assets.png",json:"assets/tills/countertop_assets.json"}];var YS=i=>{xi(IR,i.load,i.textures),xi(RR,i.load,i.textures),xi(MR,i.load,i.textures),xi(LR,i.load,i.textures),xi(OR,i.load,i.textures)},Fl=i=>{let t;switch(i.group){case"clothing":t="clothing_sheet";break;case"coffeeShop":t="coffeeShop_sheet";break;case"stationary":t="stationary_sheet";break;case"technology":t="technology_sheet";break;case"toiletries":t="toiletries_sheet";break}return{spriteKey:t,frame:`${i.group}_${i.index}.png`}},IR=[{key:"clothing_sheet",type:2,src:"assets/products/clothing.png",json:"assets/products/clothing.json"}],RR=[{key:"technology_sheet",type:2,src:"assets/products/technology.png",json:"assets/products/technology.json"}],MR=[{key:"coffeeShop_sheet",type:2,src:"assets/products/coffeeShop.png",json:"assets/products/coffeeShop.json"}],LR=[{key:"stationary_sheet",type:2,src:"assets/products/stationary.png",json:"assets/products/stationary.json"}],OR=[{key:"toiletries_sheet",type:2,src:"assets/products/toiletries.png",json:"assets/products/toiletries.json"}],jS=i=>{xi(DR,i.load,i.textures)},DR=[{key:"emoticonAndThoughtBubble_sheet",type:2,src:"assets/emoticons-and-thought-bubble/emoticons_and_thoughtBubble.png",json:"assets/emoticons-and-thought-bubble/emoticons_and_thoughtBubble.json"}],KS=i=>{xi(FR,i.load,i.textures)},FR=[{key:"coin",type:3,src:"assets/misc-game/icon_coin_colour.svg"},{key:"stock_and_pay_alert",type:3,src:"assets/misc-game/pip_stock_and_pay_alert.svg"},{key:"demand_and_upgrade_alert",type:3,src:"assets/misc-game/pip_upgrade_alert.svg"},{key:"pointer",type:0,src:"assets/misc-game/pointer.png"}],st={LoadingBackgroundTile:"assets/tiles/BG_pattern_transparent.png",MainCharacterExpression_Determined:"assets/main-character/expressions/determined.svg",MainCharacterExpression_Pondering:"assets/main-character/expressions/pondering.svg",MainCharacterExpression_Sad:"assets/main-character/expressions/sad.svg",Cheveron_Left_Active:"assets/icons/icon_chevron_left_active.svg",Cheveron_Right_Active:"assets/icons/icon_chevron_right_active.svg",Chevron_Down_Active:"assets/icons/icon_chevron_down_active.svg",Menu_Home:"assets/icons/icon_home.svg",Menu_Install:"assets/icons/icon_install.svg",Menu_Logout:"assets/icons/icon_logout.svg",Menu_Active:"assets/icons/icon_menu_active.svg",Menu_Disabled:"assets/icons/icon_menu_disabled.svg",Menu_Mute:"assets/icons/icon_mute.svg",Menu_Unmute:"assets/icons/icon_unmute.svg",Menu_Avatar:"assets/icons/icon_avatar.svg",Menu_Leaderboard:"assets/icons/icon_leaderboard.svg",Cross_Active:"assets/icons/icon_cross_active.svg",Cross_Disabled:"assets/icons/icon_cross_disabled.svg",LogoLoader:"assets/icons/Logo_AG.svg",LogoHome:"assets/icons/logo_AG_home.svg",ScoreContainer:"assets/icons/container_home_screen.svg",CoinColor:"assets/misc-game/icon_coin_colour.svg",CoinLine:"assets/icons/icon_coin_line.svg",ValueGraph:"assets/misc-game/icon_graph.svg",AlertPip:"assets/misc-game/pip_stock_and_pay_alert.svg",UpgradePip:"assets/misc-game/pip_upgrade_alert.svg",Clock:"assets/misc-game/icon_time.svg",RotateDevice:"assets/icons/icon_rotate_warning.svg",LevelUpBanner:"assets/level-up/level_up_banner.svg",LevelUpRays:"assets/level-up/level_up_rays.svg",SaveNewGame:"assets/icons/icon_save_newgame.svg",SaveInternet:"assets/icons/icon_save_internet.svg",SaveDevice:"assets/icons/icon_save_device.svg",GameOver_Bg:"assets/game-over/endgame_bg.svg",GameOver_Title:"assets/game-over/endgame_title.svg",GameOver_HighScorePill:"assets/game-over/endgame_pill_highscore.svg",GameOver_HighScoreContainer:"assets/game-over/endgame_container_highscore.svg",GameOver_MainCharacter:"assets/game-over/endgame_maincharacter.svg",Report_Info:"assets/icons/icon_monthly_report_info.svg",Report_Equal:"assets/icons/icon_monthly_report_equal.svg",Report_Minus:"assets/icons/icon_monthly_report_minus.svg",Report_Portrait_Expensive:"assets/icons/img_market_res_expensive.svg",Report_Portrait_Marketing:"assets/icons/img_market_res_marketing.svg",Report_Portrait_Staff:"assets/icons/img_market_res_staff.svg",Report_Portrait_Stock:"assets/icons/img_market_res_stock.svg"},Sr={LoadingSpinner:"assets/lottie/spinning_coin.json",GameOver:"assets/lottie/endgame_title.json",MarketingJuice:[["assets/lottie/marketing_juice/juice_marketing_L1_1.json","assets/lottie/marketing_juice/juice_marketing_L1_2.json"],["assets/lottie/marketing_juice/juice_marketing_L2_1.json","assets/lottie/marketing_juice/juice_marketing_L2_2.json"],["assets/lottie/marketing_juice/juice_marketing_L3_1.json","assets/lottie/marketing_juice/juice_marketing_L3_2.json"],["assets/lottie/marketing_juice/juice_marketing_L4_1.json","assets/lottie/marketing_juice/juice_marketing_L4_2.json"],["assets/lottie/marketing_juice/juice_marketing_L5_1.json","assets/lottie/marketing_juice/juice_marketing_L5_2.json"],["assets/lottie/marketing_juice/juice_marketing_L5_1.json"]]},Dl={Intro_Envelope:"assets/intro/img_intro_envelope.svg",Intro_Letter:"assets/intro/img_intro_letter.svg"},fi={ChooseShopCategory_Clothing:"assets/choose-shop-category/Clothing.svg",ChooseShopCategory_Coffee:"assets/choose-shop-category/Coffee.svg",ChooseShopCategory_Stationery:"assets/choose-shop-category/Stationery.svg",ChooseShopCategory_Technology:"assets/choose-shop-category/Technology.svg",ChooseShopCategory_Toiletries:"assets/choose-shop-category/Toiletries.svg",ChooseShopCatergory_MarketStall:"assets/choose-shop-category/Market_Stall.svg"},JS=["assets/hire-employees/staff_01.svg","assets/hire-employees/staff_02.svg","assets/hire-employees/staff_03.svg","assets/hire-employees/staff_04.svg","assets/hire-employees/staff_05.svg","assets/hire-employees/staff_06.svg"],ZS=["assets/products-svg/Product_CoffeeShop_0.svg","assets/products-svg/Product_CoffeeShop_1.svg","assets/products-svg/Product_CoffeeShop_2.svg","assets/products-svg/Product_CoffeeShop_3.svg","assets/products-svg/Product_CoffeeShop_4.svg","assets/products-svg/Product_CoffeeShop_5.svg","assets/products-svg/Product_CoffeeShop_6.svg","assets/products-svg/Product_CoffeeShop_7.svg","assets/products-svg/Product_CoffeeShop_8.svg"],QS=["assets/products-svg/Product_Fashion_0.svg","assets/products-svg/Product_Fashion_1.svg","assets/products-svg/Product_Fashion_2.svg","assets/products-svg/Product_Fashion_3.svg","assets/products-svg/Product_Fashion_4.svg","assets/products-svg/Product_Fashion_5.svg","assets/products-svg/Product_Fashion_6.svg","assets/products-svg/Product_Fashion_7.svg","assets/products-svg/Product_Fashion_8.svg"],_S=["assets/products-svg/Product_Stationery_0.svg","assets/products-svg/Product_Stationery_1.svg","assets/products-svg/Product_Stationery_2.svg","assets/products-svg/Product_Stationery_3.svg","assets/products-svg/Product_Stationery_4.svg","assets/products-svg/Product_Stationery_5.svg","assets/products-svg/Product_Stationery_6.svg","assets/products-svg/Product_Stationery_7.svg","assets/products-svg/Product_Stationery_8.svg"],qS=["assets/products-svg/Product_Technology_0.svg","assets/products-svg/Product_Technology_1.svg","assets/products-svg/Product_Technology_2.svg","assets/products-svg/Product_Technology_3.svg","assets/products-svg/Product_Technology_4.svg","assets/products-svg/Product_Technology_5.svg","assets/products-svg/Product_Technology_6.svg","assets/products-svg/Product_Technology_7.svg","assets/products-svg/Product_Technology_8.svg"],tE=["assets/products-svg/Product_Toiletries_0.svg","assets/products-svg/Product_Toiletries_1.svg","assets/products-svg/Product_Toiletries_2.svg","assets/products-svg/Product_Toiletries_3.svg","assets/products-svg/Product_Toiletries_4.svg","assets/products-svg/Product_Toiletries_5.svg","assets/products-svg/Product_Toiletries_6.svg","assets/products-svg/Product_Toiletries_7.svg","assets/products-svg/Product_Toiletries_8.svg"],Ki={lackOfMarketing:"assets/tips/tip_lackOfMarketing.png",noStaff:"assets/tips/tip_noStaffAvailable.png",noStock:"assets/tips/tip_noStock.png",priceTooHigh:"assets/tips/tip_priceTooHigh.png",phone:"assets/tips/tip_phone.png",stock:"assets/tips/tip_stock.png",cash:"assets/tips/tip_cash.png"},ue={business_value:"assets/events/single-frames/img_event_business_value.png",exclamation:"assets/events/single-frames/img_event_exclamation.png",first_product:"assets/events/single-frames/img_event_first_product.png",hire_staff:"assets/events/single-frames/img_event_hire_staff.png",levelUp_1:"assets/events/single-frames/img_event_level_up01.png",levelUp_2:"assets/events/single-frames/img_event_level_up02.png",levelUp_3:"assets/events/single-frames/img_event_level_up03.png",levelUp_4:"assets/events/single-frames/img_event_level_up04.png",time_expand:"assets/events/single-frames/img_event_time_to_expand.png",tip:"assets/events/single-frames/img_event_tip.png"},Zt={expensive_1:"assets/events/multi-frames/img_event_expensive01.png",expensive_2:"assets/events/multi-frames/img_event_expensive02.png",expensive_3:"assets/events/multi-frames/img_event_expensive03.png",expensive_4:"assets/events/multi-frames/img_event_expensive04.png",firstSale_1:"assets/events/multi-frames/img_event_first_sale01.png",firstSale_2:"assets/events/multi-frames/img_event_first_sale02.png",firstSale_3:"assets/events/multi-frames/img_event_first_sale03.png",marketing_1:"assets/events/multi-frames/img_event_marketing01.png",marketing_2:"assets/events/multi-frames/img_event_marketing02.png",marketing_3:"assets/events/multi-frames/img_event_marketing03.png",marketing_4:"assets/events/multi-frames/img_event_marketing04.png",salary_1:"assets/events/multi-frames/img_event_salary01.png",salary_2:"assets/events/multi-frames/img_event_salary02.png",staff_1:"assets/events/multi-frames/img_event_staff01.png",staff_2:"assets/events/multi-frames/img_event_staff02.png",staff_3:"assets/events/multi-frames/img_event_staff03.png",stock_1:"assets/events/multi-frames/img_event_stock01.png",stock_2:"assets/events/multi-frames/img_event_stock02.png",stock_3:"assets/events/multi-frames/img_event_stock03.png"},eE=[Dl.Intro_Envelope,Dl.Intro_Letter,st.MainCharacterExpression_Determined,st.MainCharacterExpression_Pondering,st.MainCharacterExpression_Sad,fi.ChooseShopCategory_Clothing,fi.ChooseShopCategory_Coffee,fi.ChooseShopCategory_Stationery,fi.ChooseShopCategory_Technology,fi.ChooseShopCategory_Toiletries,fi.ChooseShopCatergory_MarketStall,st.Cheveron_Left_Active,st.Cheveron_Right_Active,st.Menu_Home,st.Menu_Install,st.Menu_Logout,st.Menu_Active,st.Menu_Disabled,st.Menu_Mute,st.Menu_Unmute,st.Menu_Active,st.Cross_Active,st.Cross_Disabled,st.RotateDevice,st.CoinColor,st.CoinLine,st.LevelUpBanner,st.LevelUpRays,st.AlertPip];var nE=function(i){let t=[],n=0;for(let d=0;d<i.length;d++){let r=i.charCodeAt(d);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&d+1<i.length&&(i.charCodeAt(d+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++d)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},BR=function(i){let t=[],n=0,d=0;for(;n<i.length;){let r=i[n++];if(r<128)t[d++]=String.fromCharCode(r);else if(r>191&&r<224){let m=i[n++];t[d++]=String.fromCharCode((r&31)<<6|m&63)}else if(r>239&&r<365){let m=i[n++],e=i[n++],u=i[n++],g=((r&7)<<18|(m&63)<<12|(e&63)<<6|u&63)-65536;t[d++]=String.fromCharCode(55296+(g>>10)),t[d++]=String.fromCharCode(56320+(g&1023))}else{let m=i[n++],e=i[n++];t[d++]=String.fromCharCode((r&15)<<12|(m&63)<<6|e&63)}}return t.join("")},rE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,d=[];for(let r=0;r<i.length;r+=3){let m=i[r],e=r+1<i.length,u=e?i[r+1]:0,g=r+2<i.length,c=g?i[r+2]:0,s=m>>2,o=(m&3)<<4|u>>4,a=(u&15)<<2|c>>6,l=c&63;g||(l=64,e||(a=64)),d.push(n[s],n[o],n[a],n[l])}return d.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(nE(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):BR(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,d=[];for(let r=0;r<i.length;){let m=n[i.charAt(r++)],u=r<i.length?n[i.charAt(r)]:0;++r;let c=r<i.length?n[i.charAt(r)]:64;++r;let o=r<i.length?n[i.charAt(r)]:64;if(++r,m==null||u==null||c==null||o==null)throw new Em;let a=m<<2|u>>4;if(d.push(a),c!==64){let l=u<<4&240|c>>2;if(d.push(l),o!==64){let p=c<<6&192|o;d.push(p)}}}return d},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},Em=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},NR=function(i){let t=nE(i);return rE.encodeByteArray(t,!0)},Bl=function(i){return NR(i).replace(/\./g,"")},bm=function(i){try{return rE.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function kR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var VR=()=>kR().__FIREBASE_DEFAULTS__,GR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let i=process.env.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},UR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=i&&bm(i[1]);return t&&JSON.parse(t)},Cm=()=>{try{return VR()||GR()||UR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Pm=i=>{var t,n;return(n=(t=Cm())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[i]},sE=i=>{let t=Pm(i);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let d=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),d]:[t.substring(0,n),d]},wm=()=>{var i;return(i=Cm())===null||i===void 0?void 0:i.config},Am=i=>{var t;return(t=Cm())===null||t===void 0?void 0:t[`_${i}`]};var gd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,d)=>{n?this.reject(n):this.resolve(d),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,d))}}};function aE(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},d=t||"demo-project",r=i.iat||0,m=i.sub||i.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let e=Object.assign({iss:`https://securetoken.google.com/${d}`,aud:d,iat:r,exp:r+3600,auth_time:r,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}}},i),u="";return[Bl(JSON.stringify(n)),Bl(JSON.stringify(e)),u].join(".")}function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function lE(){let i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function hE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uE(){let i=He();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function dE(){try{return typeof indexedDB=="object"}catch{return!1}}function cE(){return new Promise((i,t)=>{try{let n=!0,d="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(d);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(d),i(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var m;t(((m=r.error)===null||m===void 0?void 0:m.message)||"")}}catch(n){t(n)}})}var zR="FirebaseError",ii=class extends Error{constructor(t,n,d){super(n),this.code=t,this.customData=d,this.name=zR,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kn.prototype.create)}},kn=class{constructor(t,n,d){this.service=t,this.serviceName=n,this.errors=d}create(t,...n){let d=n[0]||{},r=`${this.service}/${t}`,m=this.errors[t],e=m?HR(m,d):"Error",u=`${this.serviceName}: ${e} (${r}).`;return new ii(r,u,d)}};function HR(i,t){return i.replace(WR,(n,d)=>{let r=t[d];return r!=null?String(r):`<${d}?>`})}var WR=/\{\$([^}]+)}/g;function fE(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function vs(i,t){if(i===t)return!0;let n=Object.keys(i),d=Object.keys(t);for(let r of n){if(!d.includes(r))return!1;let m=i[r],e=t[r];if(iE(m)&&iE(e)){if(!vs(m,e))return!1}else if(m!==e)return!1}for(let r of d)if(!n.includes(r))return!1;return!0}function iE(i){return i!==null&&typeof i=="object"}function Ma(i){let t=[];for(let[n,d]of Object.entries(i))Array.isArray(d)?d.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(d));return t.length?"&"+t.join("&"):""}function La(i){let t={};return i.replace(/^\?/,"").split("&").forEach(d=>{if(d){let[r,m]=d.split("=");t[decodeURIComponent(r)]=decodeURIComponent(m)}}),t}function Oa(i){let t=i.indexOf("?");if(!t)return"";let n=i.indexOf("#",t);return i.substring(t,n>0?n:void 0)}function pE(i,t){let n=new Tm(i,t);return n.subscribe.bind(n)}var Tm=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(d=>{this.error(d)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,d){let r;if(t===void 0&&n===void 0&&d===void 0)throw new Error("Missing Observer.");$R(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:d},r.next===void 0&&(r.next=Sm),r.error===void 0&&(r.error=Sm),r.complete===void 0&&(r.complete=Sm);let m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),m}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(d){typeof console<"u"&&console.error&&console.error(d)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $R(i,t){if(typeof i!="object"||i===null)return!1;for(let n of t)if(n in i&&typeof i[n]=="function")return!0;return!1}function Sm(){}var ez=4*60*60*1e3;function be(i){return i&&i._delegate?i._delegate:i}var Di=class{constructor(t,n,d){this.name=t,this.instanceFactory=n,this.type=d,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var gs="[DEFAULT]";var Im=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let d=new gd;if(this.instancesDeferred.set(n,d),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&d.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let d=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(d)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:d})}catch(m){if(r)return null;throw m}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(YR(t))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(let[n,d]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let m=this.getOrInitializeService({instanceIdentifier:r});d.resolve(m)}catch{}}}}clearInstance(t=gs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){let t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gs){return this.instances.has(t)}getOptions(t=gs){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,d=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(d))throw Error(`${this.name}(${d}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:d,options:n});for(let[m,e]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(m);d===u&&e.resolve(r)}return r}onInit(t,n){var d;let r=this.normalizeInstanceIdentifier(n),m=(d=this.onInitCallbacks.get(r))!==null&&d!==void 0?d:new Set;m.add(t),this.onInitCallbacks.set(r,m);let e=this.instances.get(r);return e&&t(e,r),()=>{m.delete(t)}}invokeOnInitCallbacks(t,n){let d=this.onInitCallbacks.get(n);if(d)for(let r of d)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let d=this.instances.get(t);if(!d&&this.component&&(d=this.component.instanceFactory(this.container,{instanceIdentifier:XR(t),options:n}),this.instances.set(t,d),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(d,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,d)}catch{}return d||null}normalizeInstanceIdentifier(t=gs){return this.component?this.component.multipleInstances?t:gs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XR(i){return i===gs?void 0:i}function YR(i){return i.instantiationMode==="EAGER"}var yd=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Im(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var jR=[],$t;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($t||($t={}));var KR={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},JR=$t.INFO,ZR={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},QR=(i,t,...n)=>{if(t<i.logLevel)return;let d=new Date().toISOString(),r=ZR[t];if(r)console[r](`[${d}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Er=class{constructor(t){this.name=t,this._logLevel=JR,this._logHandler=QR,this._userLogHandler=null,jR.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}};var _R=(i,t)=>t.some(n=>i instanceof n),mE,vE;function qR(){return mE||(mE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tM(){return vE||(vE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var gE=new WeakMap,Mm=new WeakMap,yE=new WeakMap,Rm=new WeakMap,Om=new WeakMap;function eM(i){let t=new Promise((n,d)=>{let r=()=>{i.removeEventListener("success",m),i.removeEventListener("error",e)},m=()=>{n(vn(i.result)),r()},e=()=>{d(i.error),r()};i.addEventListener("success",m),i.addEventListener("error",e)});return t.then(n=>{n instanceof IDBCursor&&gE.set(n,i)}).catch(()=>{}),Om.set(t,i),t}function iM(i){if(Mm.has(i))return;let t=new Promise((n,d)=>{let r=()=>{i.removeEventListener("complete",m),i.removeEventListener("error",e),i.removeEventListener("abort",e)},m=()=>{n(),r()},e=()=>{d(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",m),i.addEventListener("error",e),i.addEventListener("abort",e)});Mm.set(i,t)}var Lm={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return Mm.get(i);if(t==="objectStoreNames")return i.objectStoreNames||yE.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vn(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function xE(i){Lm=i(Lm)}function nM(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let d=i.call(xd(this),t,...n);return yE.set(d,t.sort?t.sort():[t]),vn(d)}:tM().includes(i)?function(...t){return i.apply(xd(this),t),vn(gE.get(this))}:function(...t){return vn(i.apply(xd(this),t))}}function rM(i){return typeof i=="function"?nM(i):(i instanceof IDBTransaction&&iM(i),_R(i,qR())?new Proxy(i,Lm):i)}function vn(i){if(i instanceof IDBRequest)return eM(i);if(Rm.has(i))return Rm.get(i);let t=rM(i);return t!==i&&(Rm.set(i,t),Om.set(t,i)),t}var xd=i=>Om.get(i);function EE(i,t,{blocked:n,upgrade:d,blocking:r,terminated:m}={}){let e=indexedDB.open(i,t),u=vn(e);return d&&e.addEventListener("upgradeneeded",g=>{d(vn(e.result),g.oldVersion,g.newVersion,vn(e.transaction),g)}),n&&e.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),u.then(g=>{m&&g.addEventListener("close",()=>m()),r&&g.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}var sM=["get","getKey","getAll","getAllKeys","count"],aM=["put","add","delete","clear"],Dm=new Map;function SE(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Dm.get(t))return Dm.get(t);let n=t.replace(/FromIndex$/,""),d=t!==n,r=aM.includes(n);if(!(n in(d?IDBIndex:IDBObjectStore).prototype)||!(r||sM.includes(n)))return;let m=async function(e,...u){let g=this.transaction(e,r?"readwrite":"readonly"),c=g.store;return d&&(c=c.index(u.shift())),(await Promise.all([c[n](...u),r&&g.done]))[0]};return Dm.set(t,m),m}xE(i=>({...i,get:(t,n,d)=>SE(t,n)||i.get(t,n,d),has:(t,n)=>!!SE(t,n)||i.has(t,n)}));var Bm=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oM(n)){let d=n.getImmediate();return`${d.library}/${d.version}`}else return null}).filter(n=>n).join(" ")}};function oM(i){let t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}var Nm="@firebase/app",TE="0.9.25";var ys=new Er("@firebase/app"),lM="@firebase/app-compat",hM="@firebase/analytics-compat",uM="@firebase/analytics",dM="@firebase/app-check-compat",cM="@firebase/app-check",fM="@firebase/auth",pM="@firebase/auth-compat",mM="@firebase/database",vM="@firebase/database-compat",gM="@firebase/functions",yM="@firebase/functions-compat",xM="@firebase/installations",SM="@firebase/installations-compat",EM="@firebase/messaging",TM="@firebase/messaging-compat",bM="@firebase/performance",CM="@firebase/performance-compat",PM="@firebase/remote-config",wM="@firebase/remote-config-compat",AM="@firebase/storage",IM="@firebase/storage-compat",RM="@firebase/firestore",MM="@firebase/firestore-compat",LM="firebase",OM="10.7.1";var km="[DEFAULT]",DM={[Nm]:"fire-core",[lM]:"fire-core-compat",[uM]:"fire-analytics",[hM]:"fire-analytics-compat",[cM]:"fire-app-check",[dM]:"fire-app-check-compat",[fM]:"fire-auth",[pM]:"fire-auth-compat",[mM]:"fire-rtdb",[vM]:"fire-rtdb-compat",[gM]:"fire-fn",[yM]:"fire-fn-compat",[xM]:"fire-iid",[SM]:"fire-iid-compat",[EM]:"fire-fcm",[TM]:"fire-fcm-compat",[bM]:"fire-perf",[CM]:"fire-perf-compat",[PM]:"fire-rc",[wM]:"fire-rc-compat",[AM]:"fire-gcs",[IM]:"fire-gcs-compat",[RM]:"fire-fst",[MM]:"fire-fst-compat","fire-js":"fire-js",[LM]:"fire-js-all"};var Sd=new Map,Vm=new Map;function FM(i,t){try{i.container.addComponent(t)}catch(n){ys.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,n)}}function br(i){let t=i.name;if(Vm.has(t))return ys.debug(`There were multiple attempts to register component ${t}.`),!1;Vm.set(t,i);for(let n of Sd.values())FM(n,i);return!0}function kl(i,t){let n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(t)}var BM={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Tr=new kn("app","Firebase",BM);var Gm=class{constructor(t,n,d){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=d,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}};var Cr=OM;function Hm(i,t={}){let n=i;typeof t!="object"&&(t={name:t});let d=Object.assign({name:km,automaticDataCollectionEnabled:!1},t),r=d.name;if(typeof r!="string"||!r)throw Tr.create("bad-app-name",{appName:String(r)});if(n||(n=wm()),!n)throw Tr.create("no-options");let m=Sd.get(r);if(m){if(vs(n,m.options)&&vs(d,m.config))return m;throw Tr.create("duplicate-app",{appName:r})}let e=new yd(r);for(let g of Vm.values())e.addComponent(g);let u=new Gm(n,d,e);return Sd.set(r,u),u}function Ed(i=km){let t=Sd.get(i);if(!t&&i===km&&wm())return Hm();if(!t)throw Tr.create("no-app",{appName:i});return t}function Ji(i,t,n){var d;let r=(d=DM[i])!==null&&d!==void 0?d:i;n&&(r+=`-${n}`);let m=r.match(/\s|\//),e=t.match(/\s|\//);if(m||e){let u=[`Unable to register library "${r}" with version "${t}":`];m&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),m&&e&&u.push("and"),e&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ys.warn(u.join(" "));return}br(new Di(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var NM="firebase-heartbeat-database",kM=1,Nl="firebase-heartbeat-store",Fm=null;function wE(){return Fm||(Fm=EE(NM,kM,{upgrade:(i,t)=>{switch(t){case 0:i.createObjectStore(Nl)}}}).catch(i=>{throw Tr.create("idb-open",{originalErrorMessage:i.message})})),Fm}async function VM(i){try{return await(await wE()).transaction(Nl).objectStore(Nl).get(AE(i))}catch(t){if(t instanceof ii)ys.warn(t.message);else{let n=Tr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ys.warn(n.message)}}}async function bE(i,t){try{let d=(await wE()).transaction(Nl,"readwrite");await d.objectStore(Nl).put(t,AE(i)),await d.done}catch(n){if(n instanceof ii)ys.warn(n.message);else{let d=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ys.warn(d.message)}}}function AE(i){return`${i.name}!${i.options.appId}`}var GM=1024,UM=30*24*60*60*1e3,Um=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new zm(n),this._heartbeatsCachePromise=this._storage.read().then(d=>(this._heartbeatsCache=d,d))}async triggerHeartbeat(){var t,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),m=CE();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===m||this._heartbeatsCache.heartbeats.some(e=>e.date===m)))return this._heartbeatsCache.heartbeats.push({date:m,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let u=new Date(e.date).valueOf();return Date.now()-u<=UM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=CE(),{heartbeatsToSend:d,unsentEntries:r}=zM(this._heartbeatsCache.heartbeats),m=Bl(JSON.stringify({version:2,heartbeats:d}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),m}};function CE(){return new Date().toISOString().substring(0,10)}function zM(i,t=GM){let n=[],d=i.slice();for(let r of i){let m=n.find(e=>e.agent===r.agent);if(m){if(m.dates.push(r.date),PE(n)>t){m.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),PE(n)>t){n.pop();break}d=d.slice(1)}return{heartbeatsToSend:n,unsentEntries:d}}var zm=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dE()?cE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await VM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){let r=await this.read();return bE(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){let r=await this.read();return bE(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}};function PE(i){return Bl(JSON.stringify({version:2,heartbeats:i})).length}function HM(i){br(new Di("platform-logger",t=>new Bm(t),"PRIVATE")),br(new Di("heartbeat",t=>new Um(t),"PRIVATE")),Ji(Nm,TE,i),Ji(Nm,TE,"esm2017"),Ji("fire-js","")}HM("");var WM="firebase",$M="10.7.1";Ji(WM,$M,"app");var Ze=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var Ha="10.7.0";var Fa=new Er("@firebase/firestore");function bd(i,...t){if(Fa.logLevel<=$t.DEBUG){let n=t.map(bv);Fa.debug(`Firestore (${Ha}): ${i}`,...n)}}function Tv(i,...t){if(Fa.logLevel<=$t.ERROR){let n=t.map(bv);Fa.error(`Firestore (${Ha}): ${i}`,...n)}}function BE(i,...t){if(Fa.logLevel<=$t.WARN){let n=t.map(bv);Fa.warn(`Firestore (${Ha}): ${i}`,...n)}}function bv(i){if(typeof i=="string")return i;try{return function(n){return JSON.stringify(n)}(i)}catch{return i}}function Ce(i="Unexpected state"){let t=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: `+i;throw Tv(t),new Error(t)}function bi(i,t){i||Ce()}function NE(i,t){return i}var IE="ok",XM="cancelled",Vl="unknown",Xt="invalid-argument",YM="deadline-exceeded",jM="not-found";var KM="permission-denied",Xm="unauthenticated",JM="resource-exhausted",Ba="failed-precondition",ZM="aborted",QM="out-of-range",_M="unimplemented",qM="internal",tL="unavailable";var Pt=class extends ii{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cd=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Ym=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}},jm=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Km=class{constructor(t){this.auth=null,t.onInit(n=>{this.auth=n})}getToken(){return this.auth?this.auth.getToken().then(t=>t?(bi(typeof t.accessToken=="string"),new Cd(t.accessToken,new Ze(this.auth.getUid()))):null):Promise.resolve(null)}invalidateToken(){}start(t,n){}shutdown(){}},Jm=class{constructor(t,n,d){this.t=t,this.i=n,this.o=d,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.u=new Map}l(){return this.o?this.o():null}get headers(){this.u.set("X-Goog-AuthUser",this.t);let t=this.l();return t&&this.u.set("Authorization",t),this.i&&this.u.set("X-Goog-Iam-Authorization-Token",this.i),this.u}},Zm=class{constructor(t,n,d){this.t=t,this.i=n,this.o=d}getToken(){return Promise.resolve(new Jm(this.t,this.i,this.o))}start(t,n){t.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Qm=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_m=class{constructor(t){this.h=t,this.appCheck=null,t.onInit(n=>{this.appCheck=n})}getToken(){return this.appCheck?this.appCheck.getToken().then(t=>t?(bi(typeof t.token=="string"),new Qm(t.token)):null):Promise.resolve(null)}invalidateToken(){}start(t,n){}shutdown(){}};var qm=class{constructor(t,n,d,r,m,e,u,g,c){this.databaseId=t,this.appId=n,this.persistenceKey=d,this.host=r,this.ssl=m,this.forceLongPolling=e,this.autoDetectLongPolling=u,this.longPollingOptions=g,this.useFetchStreams=c}},xs=class{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new xs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof xs&&t.projectId===this.projectId&&t.database===this.database}},Ss=class{constructor(t,n,d){n===void 0?n=0:n>t.length&&Ce(),d===void 0?d=t.length-n:d>t.length-n&&Ce(),this.segments=t,this.offset=n,this.len=d}get length(){return this.len}isEqual(t){return Ss.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof Ss?t.forEach(d=>{n.push(d)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,d=this.limit();n<d;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let d=Math.min(t.length,n.length);for(let r=0;r<d;r++){let m=t.get(r),e=n.get(r);if(m<e)return-1;if(m>e)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},Fe=class extends Ss{construct(t,n,d){return new Fe(t,n,d)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){let n=[];for(let d of t){if(d.indexOf("//")>=0)throw new Pt(Xt,`Invalid segment (${d}). Paths must not contain // in them.`);n.push(...d.split("/").filter(r=>r.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}},eL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ei=class extends Ss{construct(t,n,d){return new Ei(t,n,d)}static isValidIdentifier(t){return eL.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ei.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ei(["__name__"])}static fromServerFormat(t){let n=[],d="",r=0,m=()=>{if(d.length===0)throw new Pt(Xt,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(d),d=""},e=!1;for(;r<t.length;){let u=t[r];if(u==="\\"){if(r+1===t.length)throw new Pt(Xt,"Path has trailing escape character: "+t);let g=t[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Pt(Xt,"Path has invalid escape sequence: "+t);d+=g,r+=2}else u==="`"?(e=!e,r++):u!=="."||e?(d+=u,r++):(m(),r++)}if(m(),e)throw new Pt(Xt,"Unterminated ` in path: "+t);return new Ei(n)}static emptyPath(){return new Ei([])}};var Ti=class{constructor(t){this.path=t}static fromPath(t){return new Ti(Fe.fromString(t))}static fromName(t){return new Ti(Fe.fromString(t).popFirst(5))}static empty(){return new Ti(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Fe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Fe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ti(new Fe(t.slice()))}};function iL(i,t,n){if(!n)throw new Pt(Xt,`Function ${i}() cannot be called with an empty ${t}.`)}function RE(i){if(!Ti.isDocumentKey(i))throw new Pt(Xt,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Cv(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let t=function(d){return d.constructor?d.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Ce()}function Dd(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Pt(Xt,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Cv(i);throw new Pt(Xt,`Expected type '${t.name}', but it was: ${n}`)}}return i}function kE(i){let t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}var Td=null;function nL(){return Td===null?Td=function(){return 268435456+Math.round(2147483648*Math.random())}():Td++,"0x"+Td.toString(16)}function Pd(i){return i===0&&1/i==-1/0}var rL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ME,Vt;function LE(i){if(i===void 0)return Tv("RPC_ERROR","HTTP error has no status"),Vl;switch(i){case 200:return IE;case 400:return Ba;case 401:return Xm;case 403:return KM;case 404:return jM;case 409:return ZM;case 416:return QM;case 429:return JM;case 499:return XM;case 500:return Vl;case 501:return _M;case 503:return tL;case 504:return YM;default:return i>=200&&i<300?IE:i>=400&&i<500?Ba:i>=500&&i<600?qM:Vl}}(Vt=ME||(ME={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";var tv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let d=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),m=encodeURIComponent(this.databaseId.database);this.m=d+"://"+n.host,this.A=`projects/${r}/databases/${m}`,this.T=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${m}`}get P(){return!1}R(n,d,r,m,e){let u=nL(),g=this.I(n,d);bd("RestConnection",`Sending RPC '${n}' ${u}:`,g,r);let c={"google-cloud-resource-prefix":this.A,"x-goog-request-params":this.T};return this.V(c,m,e),this.p(n,g,c,r).then(s=>(bd("RestConnection",`Received RPC '${n}' ${u}: `,s),s),s=>{throw BE("RestConnection",`RPC '${n}' ${u} failed with error: `,s,"url: ",g,"request:",r),s})}g(n,d,r,m,e,u){return this.R(n,d,r,m,e)}V(n,d,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),d&&d.headers.forEach((m,e)=>n[e]=m),r&&r.headers.forEach((m,e)=>n[e]=m)}I(n,d){let r=rL[n];return`${this.m}/v1/${d}:${r}`}}{constructor(t,n){super(t),this.F=n}v(t,n){throw new Error("Not supported by FetchConnection")}async p(t,n,d,r){var m;let e=JSON.stringify(r),u;try{u=await this.F(n,{method:"POST",headers:d,body:e})}catch(g){let c=g;throw new Pt(LE(c.status),"Request failed with error: "+c.statusText)}if(!u.ok){let g=await u.json();Array.isArray(g)&&(g=g[0]);let c=(m=g==null?void 0:g.error)===null||m===void 0?void 0:m.message;throw new Pt(LE(u.status),`Request failed with error: ${c??u.statusText}`)}return u.json()}};function sL(i){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let d=0;d<i;d++)n[d]=Math.floor(256*Math.random());return n}var ev=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,d="";for(;d.length<20;){let r=sL(40);for(let m=0;m<r.length;++m)d.length<20&&r[m]<n&&(d+=t.charAt(r[m]%t.length))}return d}};function zl(i,t){return i<t?-1:i>t?1:0}function VE(i,t,n){return i.length===t.length&&i.every((d,r)=>n(d,t[r]))}function OE(i){let t=0;for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&t++;return t}function Jl(i,t){for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&t(n,i[n])}var iv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qi=class{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(r){try{return atob(r)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new iv("Invalid base64 string: "+m):m}}(t);return new Qi(n)}static fromUint8Array(t){let n=function(r){let m="";for(let e=0;e<r.length;++e)m+=String.fromCharCode(r[e]);return m}(t);return new Qi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let d=new Uint8Array(n.length);for(let r=0;r<n.length;r++)d[r]=n.charCodeAt(r);return d}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zl(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Qi.EMPTY_BYTE_STRING=new Qi("");var aL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(i){if(bi(!!i),typeof i=="string"){let t=0,n=aL.exec(i);if(bi(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}let d=new Date(i);return{seconds:Math.floor(d.getTime()/1e3),nanos:t}}return{seconds:Si(i.seconds),nanos:Si(i.nanos)}}function Si(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function nv(i){return typeof i=="string"?Qi.fromBase64String(i):Qi.fromUint8Array(i)}var ni=class{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Pt(Xt,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pt(Xt,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Pt(Xt,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pt(Xt,"Timestamp seconds out of range: "+t)}static now(){return ni.fromMillis(Date.now())}static fromDate(t){return ni.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),d=Math.floor(1e6*(t-1e3*n));return new ni(n,d)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zl(this.nanoseconds,t.nanoseconds):zl(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};function GE(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function UE(i){let t=i.mapValue.fields.__previous_value__;return GE(t)?UE(t):t}function rv(i){let t=Hl(i.mapValue.fields.__local_write_time__.timestampValue);return new ni(t.seconds,t.nanos)}function sv(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?GE(i)?4:function(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}(i)?9007199254740991:10:Ce()}function av(i,t){if(i===t)return!0;let n=sv(i);if(n!==sv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return rv(i).isEqual(rv(t));case 3:return function(r,m){if(typeof r.timestampValue=="string"&&typeof m.timestampValue=="string"&&r.timestampValue.length===m.timestampValue.length)return r.timestampValue===m.timestampValue;let e=Hl(r.timestampValue),u=Hl(m.timestampValue);return e.seconds===u.seconds&&e.nanos===u.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,m){return nv(r.bytesValue).isEqual(nv(m.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,m){return Si(r.geoPointValue.latitude)===Si(m.geoPointValue.latitude)&&Si(r.geoPointValue.longitude)===Si(m.geoPointValue.longitude)}(i,t);case 2:return function(r,m){if("integerValue"in r&&"integerValue"in m)return Si(r.integerValue)===Si(m.integerValue);if("doubleValue"in r&&"doubleValue"in m){let e=Si(r.doubleValue),u=Si(m.doubleValue);return e===u?Pd(e)===Pd(u):isNaN(e)&&isNaN(u)}return!1}(i,t);case 9:return VE(i.arrayValue.values||[],t.arrayValue.values||[],av);case 10:return function(r,m){let e=r.mapValue.fields||{},u=m.mapValue.fields||{};if(OE(e)!==OE(u))return!1;for(let g in e)if(e.hasOwnProperty(g)&&(u[g]===void 0||!av(e[g],u[g])))return!1;return!0}(i,t);default:return Ce()}}function Wm(i){return!!i&&"mapValue"in i}function Gl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){let t={mapValue:{fields:{}}};return Jl(i.mapValue.fields,(n,d)=>t.mapValue.fields[n]=Gl(d)),t}if(i.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gl(i.arrayValue.values[n]);return t}return Object.assign({},i)}var De=class{constructor(t){this.timestamp=t}static fromTimestamp(t){return new De(t)}static min(){return new De(new ni(0,0))}static max(){return new De(new ni(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Na=class{constructor(t,n){this.comparator=t,this.root=n||Ie.EMPTY}insert(t,n){return new Na(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ie.BLACK,null,null))}remove(t){return new Na(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ie.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let d=this.comparator(t,n.key);if(d===0)return n.value;d<0?n=n.left:d>0&&(n=n.right)}return null}indexOf(t){let n=0,d=this.root;for(;!d.isEmpty();){let r=this.comparator(t,d.key);if(r===0)return n+d.left.size;r<0?d=d.left:(n+=d.left.size+1,d=d.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,d)=>(t(n,d),!1))}toString(){let t=[];return this.inorderTraversal((n,d)=>(t.push(`${n}:${d}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Da(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Da(this.root,t,this.comparator,!1)}getReverseIterator(){return new Da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Da(this.root,t,this.comparator,!0)}},Da=class{constructor(t,n,d,r){this.isReverse=r,this.nodeStack=[];let m=1;for(;!t.isEmpty();)if(m=n?d(t.key,n):1,n&&r&&(m*=-1),m<0)t=this.isReverse?t.left:t.right;else{if(m===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ie=class{constructor(t,n,d,r,m){this.key=t,this.value=n,this.color=d??Ie.RED,this.left=r??Ie.EMPTY,this.right=m??Ie.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,d,r,m){return new Ie(t??this.key,n??this.value,d??this.color,r??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,d){let r=this,m=d(t,r.key);return r=m<0?r.copy(null,null,null,r.left.insert(t,n,d),null):m===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,d)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ie.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let d,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return Ie.EMPTY;d=r.right.min(),r=r.copy(d.key,d.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,Ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,Ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();let t=this.left.check();if(t!==this.right.check())throw Ce();return t+(this.isRed()?0:1)}};Ie.EMPTY=null,Ie.RED=!0,Ie.BLACK=!1;Ie.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(t,n,d,r,m){return this}insert(t,n,d){return new Ie(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ka=class{constructor(t){this.comparator=t,this.data=new Na(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,d)=>(t(n),!1))}forEachInRange(t,n){let d=this.data.getIteratorFrom(t[0]);for(;d.hasNext();){let r=d.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let d;for(d=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();d.hasNext();)if(!t(d.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wd(this.data.getIterator())}getIteratorFrom(t){return new wd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(d=>{n=n.add(d)}),n}isEqual(t){if(!(t instanceof ka)||this.size!==t.size)return!1;let n=this.data.getIterator(),d=t.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,m=d.getNext().key;if(this.comparator(r,m)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new ka(this.comparator);return n.data=t,n}},wd=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vn=class{constructor(t){this.fields=t,t.sort(Ei.comparator)}static empty(){return new Vn([])}unionWith(t){let n=new ka(Ei.comparator);for(let d of this.fields)n=n.add(d);for(let d of t)n=n.add(d);return new Vn(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return VE(this.fields,t.fields,(n,d)=>n.isEqual(d))}};var pi=class{constructor(t){this.value=t}static empty(){return new pi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let d=0;d<t.length-1;++d)if(n=(n.mapValue.fields||{})[t.get(d)],!Wm(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gl(n)}setAll(t){let n=Ei.emptyPath(),d={},r=[];t.forEach((e,u)=>{if(!n.isImmediateParentOf(u)){let g=this.getFieldsMap(n);this.applyChanges(g,d,r),d={},r=[],n=u.popLast()}e?d[u.lastSegment()]=Gl(e):r.push(u.lastSegment())});let m=this.getFieldsMap(n);this.applyChanges(m,d,r)}delete(t){let n=this.field(t.popLast());Wm(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return av(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let d=0;d<t.length;++d){let r=n.mapValue.fields[t.get(d)];Wm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(d)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,d){Jl(n,(r,m)=>t[r]=m);for(let r of d)delete t[r]}clone(){return new pi(Gl(this.value))}};var Zi=class{constructor(t,n,d,r,m,e,u){this.key=t,this.documentType=n,this.version=d,this.readTime=r,this.createTime=m,this.data=e,this.documentState=u}static newInvalidDocument(t){return new Zi(t,0,De.min(),De.min(),De.min(),pi.empty(),0)}static newFoundDocument(t,n,d,r){return new Zi(t,1,n,De.min(),d,r,0)}static newNoDocument(t,n){return new Zi(t,2,n,De.min(),De.min(),pi.empty(),0)}static newUnknownDocument(t,n){return new Zi(t,3,n,De.min(),De.min(),pi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Zi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ov=class{constructor(t,n=null,d=[],r=[],m=null,e="F",u=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=d,this.filters=r,this.limit=m,this.limitType=e,this.startAt=u,this.endAt=g,this.S=null,this.N=null,this.O=null,this.startAt,this.endAt}};function oL(i,t){return function(d){return typeof d=="number"&&Number.isInteger(d)&&!Pd(d)&&d<=Number.MAX_SAFE_INTEGER&&d>=Number.MIN_SAFE_INTEGER}(t)?function(d){return{integerValue:""+d}}(t):function(d,r){if(d.useProto3Json){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(r)?"-0":r}}(i,t)}var Va=class{constructor(){this._=void 0}},lv=class extends Va{},hv=class extends Va{constructor(t){super(),this.elements=t}},uv=class extends Va{constructor(t){super(),this.elements=t}},dv=class extends Va{constructor(t,n){super(),this.serializer=t,this.q=n}};var Pr=class{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Pr}static exists(t){return new Pr(void 0,t)}static updateTime(t){return new Pr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}},Ga=class{},Ad=class extends Ga{constructor(t,n,d,r=[]){super(),this.key=t,this.value=n,this.precondition=d,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Wl=class extends Ga{constructor(t,n,d,r,m=[]){super(),this.key=t,this.data=n,this.fieldMask=d,this.precondition=r,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}},cv=class extends Ga{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fv=class extends Ga{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Iz=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Rz=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Mz=(()=>({and:"AND",or:"OR"}))(),pv=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function mv(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lL(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function hL(i,t){return mv(i,t.toTimestamp())}function $m(i){return bi(!!i),De.fromTimestamp(function(n){let d=Hl(n);return new ni(d.seconds,d.nanos)}(i))}function zE(i,t){return function(d){return new Fe(["projects",d.projectId,"databases",d.database])}(i).child("documents").child(t).canonicalString()}function Id(i,t){return zE(i.databaseId,t.path)}function DE(i,t){let n=function(r){let m=Fe.fromString(r);return bi(WE(m)),m}(t);if(n.get(1)!==i.databaseId.projectId)throw new Pt(Xt,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Pt(Xt,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ti(function(r){return bi(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}(n))}function HE(i){return new Fe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function FE(i,t,n){return{name:Id(i,t),fields:n.value.mapValue.fields}}function uL(i,t){return"found"in t?function(d,r){bi(!!r.found),r.found.name,r.found.updateTime;let m=DE(d,r.found.name),e=$m(r.found.updateTime),u=r.found.createTime?$m(r.found.createTime):De.min(),g=new pi({mapValue:{fields:r.found.fields}});return Zi.newFoundDocument(m,e,u,g)}(i,t):"missing"in t?function(d,r){bi(!!r.missing),bi(!!r.readTime);let m=DE(d,r.missing),e=$m(r.readTime);return Zi.newNoDocument(m,e)}(i,t):Ce()}function dL(i,t){let n;if(t instanceof Ad)n={update:FE(i,t.key,t.value)};else if(t instanceof cv)n={delete:Id(i,t.key)};else if(t instanceof Wl)n={update:FE(i,t.key,t.data),updateMask:cL(t.fieldMask)};else{if(!(t instanceof fv))return Ce();n={verify:Id(i,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(d=>function(m,e){let u=e.transform;if(u instanceof lv)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hv)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof uv)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof dv)return{fieldPath:e.field.canonicalString(),increment:u.q};throw Ce()}(0,d))),t.precondition.isNone||(n.currentDocument=function(r,m){return m.updateTime!==void 0?{updateTime:hL(r,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:Ce()}(i,t.precondition)),n}function cL(i){let t=[];return i.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function WE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function Pv(i){return new pv(i,!0)}var vv=class extends class{}{constructor(t,n,d,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=d,this.serializer=r,this.J=!1}Y(){if(this.J)throw new Pt(Ba,"The client has already been terminated.")}R(t,n,d){return this.Y(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,m])=>this.connection.R(t,n,d,r,m)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Xm&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pt(Vl,r.toString())})}g(t,n,d,r){return this.Y(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,e])=>this.connection.g(t,n,d,m,e,r)).catch(m=>{throw m.name==="FirebaseError"?(m.code===Xm&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Pt(Vl,m.toString())})}terminate(){this.J=!0}};async function $E(i,t){let n=NE(i),d=HE(n.serializer)+"/documents",r={writes:t.map(m=>dL(n.serializer,m))};await n.R("Commit",d,r)}async function fL(i,t){let n=NE(i),d=HE(n.serializer)+"/documents",r={documents:t.map(g=>Id(n.serializer,g))},m=await n.g("BatchGetDocuments",d,r,t.length),e=new Map;m.forEach(g=>{let c=uL(n.serializer,g);e.set(c.key.toString(),c)});let u=[];return t.forEach(g=>{let c=e.get(g.toString());bi(!!c),u.push(c)}),u}var Ul=new Map;function wv(i){if(i._terminated)throw new Pt(Ba,"The client has already been terminated.");if(!Ul.has(i)){bd("ComponentProvider","Initializing Datastore");let t=function(m){return new tv(m,fetch.bind(null))}(function(m,e,u,g){return new qm(m,e,u,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,kE(g.experimentalLongPollingOptions),g.useFetchStreams)}(i._databaseId,i.app.options.appId||"",i._persistenceKey,i._freezeSettings())),n=Pv(i._databaseId),d=function(m,e,u,g){return new vv(m,e,u,g)}(i._authCredentials,i._appCheckCredentials,t,n);Ul.set(i,d)}return Ul.get(i)}var Rd=class{constructor(t){var n,d;if(t.host===void 0){if(t.ssl!==void 0)throw new Pt(Xt,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Pt(Xt,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(m,e,u,g){if(e===!0&&g===!0)throw new Pt(Xt,`${m} and ${u} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kE((d=t.experimentalLongPollingOptions)!==null&&d!==void 0?d:{}),function(m){if(m.timeoutSeconds!==void 0){if(isNaN(m.timeoutSeconds))throw new Pt(Xt,`invalid long polling timeout: ${m.timeoutSeconds} (must not be NaN)`);if(m.timeoutSeconds<5)throw new Pt(Xt,`invalid long polling timeout: ${m.timeoutSeconds} (minimum allowed value is 5)`);if(m.timeoutSeconds>30)throw new Pt(Xt,`invalid long polling timeout: ${m.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(d,r){return d.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},$l=class{constructor(t,n,d,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=d,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pt(Ba,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Pt(Ba,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rd(t),t.credentials!==void 0&&(this._authCredentials=function(d){if(!d)return new Ym;switch(d.type){case"firstParty":return new Zm(d.sessionIndex||"0",d.iamToken||null,d.authTokenFactory||null);case"provider":return d.client;default:throw new Pt(Xt,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let d=Ul.get(n);d&&(bd("ComponentProvider","Removing Datastore"),Ul.delete(n),d.terminate())}(this),Promise.resolve()}};function XE(i,t){let n=typeof i=="object"?i:Ed(),d=typeof i=="string"?i:t||"(default)",r=kl(n,"firestore/lite").getImmediate({identifier:d});if(!r._initialized){let m=sE("firestore");m&&pL(r,...m)}return r}function pL(i,t,n,d={}){var r;let m=(i=Dd(i,$l))._getSettings(),e=`${t}:${n}`;if(m.host!=="firestore.googleapis.com"&&m.host!==e&&BE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},m),{host:e,ssl:!1})),d.mockUserToken){let u,g;if(typeof d.mockUserToken=="string")u=d.mockUserToken,g=Ze.MOCK_USER;else{u=aE(d.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let c=d.mockUserToken.sub||d.mockUserToken.user_id;if(!c)throw new Pt(Xt,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ze(c)}i._authCredentials=new jm(new Cd(u,g))}}var Xl=class{constructor(t,n,d){this.converter=n,this._query=d,this.type="query",this.firestore=t}withConverter(t){return new Xl(this.firestore,t,this._query)}},ri=class{constructor(t,n,d){this.converter=n,this._key=d,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ri(this.firestore,t,this._key)}},Es=class extends Xl{constructor(t,n,d){super(t,n,function(m){return new ov(m)}(d)),this._path=d,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new ri(this.firestore,null,new Ti(t))}withConverter(t){return new Es(this.firestore,t,this._path)}};function Av(i,t,...n){if(i=be(i),arguments.length===1&&(t=ev.newId()),iL("doc","path",t),i instanceof $l){let d=Fe.fromString(t,...n);return RE(d),new ri(i,null,new Ti(d))}{if(!(i instanceof ri||i instanceof Es))throw new Pt(Xt,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let d=i._path.child(Fe.fromString(t,...n));return RE(d),new ri(i.firestore,i instanceof Es?i.converter:null,new Ti(d))}}var wr=class{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wr(Qi.fromBase64String(t))}catch(n){throw new Pt(Xt,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new wr(Qi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Ua=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Pt(Xt,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ei(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Yl=class{constructor(t){this._methodName=t}};var jl=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Pt(Xt,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Pt(Xt,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zl(this._lat,t._lat)||zl(this._long,t._long)}};var mL=/^__.*__$/,gv=class{constructor(t,n,d){this.data=t,this.fieldMask=n,this.fieldTransforms=d}toMutation(t,n){return this.fieldMask!==null?new Wl(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ad(t,this.data,n,this.fieldTransforms)}},Md=class{constructor(t,n,d){this.data=t,this.fieldMask=n,this.fieldTransforms=d}toMutation(t,n){return new Wl(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function YE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}var Kl=class{constructor(t,n,d,r,m,e){this.settings=t,this.databaseId=n,this.serializer=d,this.ignoreUndefinedProperties=r,m===void 0&&this.X(),this.fieldTransforms=m||[],this.fieldMask=e||[]}get path(){return this.settings.path}get tt(){return this.settings.tt}et(t){return new Kl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}rt(t){var n;let d=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.et({path:d,nt:!1});return r.it(t),r}st(t){var n;let d=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.et({path:d,nt:!1});return r.X(),r}ot(t){return this.et({path:void 0,nt:!0})}ut(t){return Ld(t,this.settings.methodName,this.settings._t||!1,this.path,this.settings.ct)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}X(){if(this.path)for(let t=0;t<this.path.length;t++)this.it(this.path.get(t))}it(t){if(t.length===0)throw this.ut("Document fields must not be empty");if(YE(this.tt)&&mL.test(t))throw this.ut('Document fields cannot begin and end with "__"')}},yv=class{constructor(t,n,d){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=d||Pv(t)}lt(t,n,d,r=!1){return new Kl({tt:t,methodName:n,ct:d,path:Ei.emptyPath(),nt:!1,_t:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jE(i){let t=i._freezeSettings(),n=Pv(i._databaseId);return new yv(i._databaseId,!!t.ignoreUndefinedProperties,n)}function vL(i,t,n,d,r,m={}){let e=i.lt(m.merge||m.mergeFields?2:0,t,n,r);Iv("Data must be an object, but it was:",e,d);let u=KE(d,e),g,c;if(m.merge)g=new Vn(e.fieldMask),c=e.fieldTransforms;else if(m.mergeFields){let s=[];for(let o of m.mergeFields){let a=xv(t,o,n);if(!e.contains(a))throw new Pt(Xt,`Field '${a}' is specified in your field mask but missing from your input data.`);ZE(s,a)||s.push(a)}g=new Vn(s),c=e.fieldTransforms.filter(o=>g.covers(o.field))}else g=null,c=e.fieldTransforms;return new gv(new pi(u),g,c)}var za=class extends Yl{_toFieldTransform(t){if(t.tt!==2)throw t.tt===1?t.ut(`${this._methodName}() can only appear at the top level of your update data`):t.ut(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof za}};function gL(i,t,n,d){let r=i.lt(1,t,n);Iv("Data must be an object, but it was:",r,d);let m=[],e=pi.empty();Jl(d,(g,c)=>{let s=Rv(t,g,n);c=be(c);let o=r.st(s);if(c instanceof za)m.push(s);else{let a=Fd(c,o);a!=null&&(m.push(s),e.set(s,a))}});let u=new Vn(m);return new Md(e,u,r.fieldTransforms)}function yL(i,t,n,d,r,m){let e=i.lt(1,t,n),u=[xv(t,d,n)],g=[r];if(m.length%2!=0)throw new Pt(Xt,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let a=0;a<m.length;a+=2)u.push(xv(t,m[a])),g.push(m[a+1]);let c=[],s=pi.empty();for(let a=u.length-1;a>=0;--a)if(!ZE(c,u[a])){let l=u[a],p=g[a];p=be(p);let h=e.st(l);if(p instanceof za)c.push(l);else{let f=Fd(p,h);f!=null&&(c.push(l),s.set(l,f))}}let o=new Vn(c);return new Md(s,o,e.fieldTransforms)}function Fd(i,t){if(JE(i=be(i)))return Iv("Unsupported field value:",t,i),KE(i,t);if(i instanceof Yl)return function(d,r){if(!YE(r.tt))throw r.ut(`${d._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ut(`${d._methodName}() is not currently supported inside arrays`);let m=d._toFieldTransform(r);m&&r.fieldTransforms.push(m)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.nt&&t.tt!==4)throw t.ut("Nested arrays are not supported");return function(d,r){let m=[],e=0;for(let u of d){let g=Fd(u,r.ot(e));g==null&&(g={nullValue:"NULL_VALUE"}),m.push(g),e++}return{arrayValue:{values:m}}}(i,t)}return function(d,r){if((d=be(d))===null)return{nullValue:"NULL_VALUE"};if(typeof d=="number")return oL(r.serializer,d);if(typeof d=="boolean")return{booleanValue:d};if(typeof d=="string")return{stringValue:d};if(d instanceof Date){let m=ni.fromDate(d);return{timestampValue:mv(r.serializer,m)}}if(d instanceof ni){let m=new ni(d.seconds,1e3*Math.floor(d.nanoseconds/1e3));return{timestampValue:mv(r.serializer,m)}}if(d instanceof jl)return{geoPointValue:{latitude:d.latitude,longitude:d.longitude}};if(d instanceof wr)return{bytesValue:lL(r.serializer,d._byteString)};if(d instanceof ri){let m=r.databaseId,e=d.firestore._databaseId;if(!e.isEqual(m))throw r.ut(`Document reference is for database ${e.projectId}/${e.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:zE(d.firestore._databaseId||r.databaseId,d._key.path)}}throw r.ut(`Unsupported field value: ${Cv(d)}`)}(i,t)}function KE(i,t){let n={};return function(r){for(let m in r)if(Object.prototype.hasOwnProperty.call(r,m))return!1;return!0}(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jl(i,(d,r)=>{let m=Fd(r,t.rt(d));m!=null&&(n[d]=m)}),{mapValue:{fields:n}}}function JE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ni||i instanceof jl||i instanceof wr||i instanceof ri||i instanceof Yl)}function Iv(i,t,n){if(!JE(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let d=Cv(n);throw d==="an object"?t.ut(i+" a custom object"):t.ut(i+" "+d)}}function xv(i,t,n){if((t=be(t))instanceof Ua)return t._internalPath;if(typeof t=="string")return Rv(i,t);throw Ld("Field path arguments must be of type string or ",i,!1,void 0,n)}var xL=new RegExp("[~\\*/\\[\\]]");function Rv(i,t,n){if(t.search(xL)>=0)throw Ld(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Ua(...t.split("."))._internalPath}catch{throw Ld(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ld(i,t,n,d,r){let m=d&&!d.isEmpty(),e=r!==void 0,u=`Function ${t}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let g="";return(m||e)&&(g+=" (found",m&&(g+=` in field ${d}`),e&&(g+=` in document ${r}`),g+=")"),new Pt(Xt,u+i+g)}function ZE(i,t){return i.some(n=>n.isEqual(t))}var Od=class{constructor(t,n,d,r,m){this._firestore=t,this._userDataWriter=n,this._key=d,this._document=r,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Sv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(SL("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},Sv=class extends Od{data(){return super.data()}};function SL(i,t){return typeof t=="string"?Rv(i,t):t instanceof Ua?t._internalPath:t._delegate._internalPath}function EL(i,t,n){let d;return d=i?n&&(n.merge||n.mergeFields)?i.toFirestore(t,n):i.toFirestore(t):t,d}var Ev=class extends class{convertValue(n,d="none"){switch(sv(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Si(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,d);case 5:return n.stringValue;case 6:return this.convertBytes(nv(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,d);case 10:return this.convertObject(n.mapValue,d);default:throw Ce()}}convertObject(n,d){return this.convertObjectMap(n.fields,d)}convertObjectMap(n,d="none"){let r={};return Jl(n,(m,e)=>{r[m]=this.convertValue(e,d)}),r}convertGeoPoint(n){return new jl(Si(n.latitude),Si(n.longitude))}convertArray(n,d){return(n.values||[]).map(r=>this.convertValue(r,d))}convertServerTimestamp(n,d){switch(d){case"previous":let r=UE(n);return r==null?null:this.convertValue(r,d);case"estimate":return this.convertTimestamp(rv(n));default:return null}}convertTimestamp(n){let d=Hl(n);return new ni(d.seconds,d.nanos)}convertDocumentKey(n,d){let r=Fe.fromString(n);bi(WE(r));let m=new xs(r.get(1),r.get(3)),e=new Ti(r.popFirst(5));return m.isEqual(d)||Tv(`Document ${e} contains a document reference within a different database (${m.projectId}/${m.database}) which is not supported. It will be treated as a reference in the current database (${d.projectId}/${d.database}) instead.`),e}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new wr(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new ri(this.firestore,null,n)}};function Bd(i){let t=wv((i=Dd(i,ri)).firestore),n=new Ev(i.firestore);return fL(t,[i._key]).then(d=>{bi(d.length===1);let r=d[0];return new Od(i.firestore,n,i._key,r.isFoundDocument()?r:null,i.converter)})}function Mv(i,t,n){let d=EL((i=Dd(i,ri)).converter,t,n),r=vL(jE(i.firestore),"setDoc",i._key,d,i.converter!==null,n);return $E(wv(i.firestore),[r.toMutation(i._key,Pr.none())])}function QE(i,t,n,...d){let r=jE((i=Dd(i,ri)).firestore),m;return m=typeof(t=be(t))=="string"||t instanceof Ua?yL(r,"updateDoc",i._key,t,n,d):gL(r,"updateDoc",i._key,t),$E(wv(i.firestore),[m.toMutation(i._key,Pr.exists(!0))])}(function(){(function(n){Ha=n})(`${Cr}_lite`),br(new Di("firestore/lite",(t,{instanceIdentifier:n,options:d})=>{let r=t.getProvider("app").getImmediate(),m=new $l(new Km(t.getProvider("auth-internal")),new _m(t.getProvider("app-check-internal")),function(u,g){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Pt(Xt,'"projectId" not provided in firebase.initializeApp.');return new xs(u.options.projectId,g)}(r,n),r);return d&&m._setSettings(d),m},"PUBLIC").setMultipleInstances(!0)),Ji("firestore-lite","4.4.0",""),Ji("firestore-lite","4.4.0","esm2017")})();function Nd(i,t){var n={};for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&t.indexOf(d)<0&&(n[d]=i[d]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,d=Object.getOwnPropertySymbols(i);r<d.length;r++)t.indexOf(d[r])<0&&Object.prototype.propertyIsEnumerable.call(i,d[r])&&(n[d[r]]=i[d[r]]);return n}function pT(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var mT=pT,vT=new kn("auth","Firebase",pT());var Hd=new Er("@firebase/auth");function TL(i,...t){Hd.logLevel<=$t.WARN&&Hd.warn(`Auth (${Cr}): ${i}`,...t)}function Vd(i,...t){Hd.logLevel<=$t.ERROR&&Hd.error(`Auth (${Cr}): ${i}`,...t)}function nn(i,...t){throw Kv(i,...t)}function yn(i,...t){return Kv(i,...t)}function bL(i,t,n){let d=Object.assign(Object.assign({},mT()),{[t]:n});return new kn("auth","Firebase",d).create(t,{appName:i.name})}function Kv(i,...t){if(typeof i!="string"){let n=t[0],d=[...t.slice(1)];return d[0]&&(d[0].appName=i.name),i._errorFactory.create(n,...d)}return vT.create(i,...t)}function vt(i,t,...n){if(!i)throw Kv(t,...n)}function gn(i){let t="INTERNAL ASSERTION FAILED: "+i;throw Vd(t),new Error(t)}function Wn(i,t){i||gn(t)}function Dv(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function CL(){return _E()==="http:"||_E()==="https:"}function _E(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function PL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CL()||lE()||"connection"in navigator)?navigator.onLine:!0}function wL(){if(typeof navigator>"u")return null;let i=navigator;return i.languages&&i.languages[0]||i.language||null}var Ts=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,Wn(n>t,"Short delay should be less than long delay!"),this.isMobile=oE()||hE()}get(){return PL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Jv(i,t){Wn(i.emulator,"Emulator should always be set here");let{url:n}=i.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Wd=class{static initialize(t,n,d){this.fetchImpl=t,n&&(this.headersImpl=n),d&&(this.responseImpl=d)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var IL=new Ts(3e4,6e4);function Be(i,t){return i.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:i.tenantId}):t}async function Qe(i,t,n,d,r={}){return gT(i,r,async()=>{let m={},e={};d&&(t==="GET"?e=d:m={body:JSON.stringify(d)});let u=Ma(Object.assign({key:i.config.apiKey},e)).slice(1),g=await i._getAdditionalHeaders();return g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode),Wd.fetch()(yT(i,i.config.apiHost,n,u),Object.assign({method:t,headers:g,referrerPolicy:"no-referrer"},m))})}async function gT(i,t,n){i._canInitEmulator=!1;let d=Object.assign(Object.assign({},AL),t);try{let r=new Fv(i),m=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();let e=await m.json();if("needConfirmation"in e)throw Zl(i,"account-exists-with-different-credential",e);if(m.ok&&!("errorMessage"in e))return e;{let u=m.ok?e.errorMessage:e.error.message,[g,c]=u.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zl(i,"credential-already-in-use",e);if(g==="EMAIL_EXISTS")throw Zl(i,"email-already-in-use",e);if(g==="USER_DISABLED")throw Zl(i,"user-disabled",e);let s=d[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw bL(i,s,c);nn(i,s)}}catch(r){if(r instanceof ii)throw r;nn(i,"network-request-failed",{message:String(r)})}}async function Is(i,t,n,d,r={}){let m=await Qe(i,t,n,d,r);return"mfaPendingCredential"in m&&nn(i,"multi-factor-auth-required",{_serverResponse:m}),m}function yT(i,t,n,d){let r=`${t}${n}?${d}`;return i.config.emulator?Jv(i.config,r):`${i.config.apiScheme}://${r}`}function RL(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Fv=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,d)=>{this.timer=setTimeout(()=>d(yn(this.auth,"network-request-failed")),IL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Zl(i,t,n){let d={appName:i.name};n.email&&(d.email=n.email),n.phoneNumber&&(d.phoneNumber=n.phoneNumber);let r=yn(i,t,d);return r.customData._tokenResponse=n,r}function qE(i){return i!==void 0&&i.enterprise!==void 0}var Bv=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return RL(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}};async function ML(i,t){return Qe(i,"GET","/v2/recaptchaConfig",Be(i,t))}async function LL(i,t){return Qe(i,"POST","/v1/accounts:delete",t)}async function OL(i,t){return Qe(i,"POST","/v1/accounts:lookup",t)}function Ql(i){if(i)try{let t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xT(i,t=!1){let n=be(i),d=await n.getIdToken(t),r=Zv(d);vt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let m=typeof r.firebase=="object"?r.firebase:void 0,e=m==null?void 0:m.sign_in_provider;return{claims:r,token:d,authTime:Ql(Lv(r.auth_time)),issuedAtTime:Ql(Lv(r.iat)),expirationTime:Ql(Lv(r.exp)),signInProvider:e||null,signInSecondFactor:(m==null?void 0:m.sign_in_second_factor)||null}}function Lv(i){return Number(i)*1e3}function Zv(i){let[t,n,d]=i.split(".");if(t===void 0||n===void 0||d===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{let r=bm(n);return r?JSON.parse(r):(Vd("Failed to decode base64 JWT payload"),null)}catch(r){return Vd("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function DL(i){let t=Zv(i);return vt(t,"internal-error"),vt(typeof t.exp<"u","internal-error"),vt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function _l(i,t,n=!1){if(n)return t;try{return await t}catch(d){throw d instanceof ii&&FL(d)&&i.auth.currentUser===i&&await i.auth.signOut(),d}}function FL({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}var Nv=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let d=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),d}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var $d=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Xd(i){var t;let n=i.auth,d=await i.getIdToken(),r=await _l(i,OL(n,{idToken:d}));vt(r==null?void 0:r.users.length,n,"internal-error");let m=r.users[0];i._notifyReloadListener(m);let e=!((t=m.providerUserInfo)===null||t===void 0)&&t.length?NL(m.providerUserInfo):[],u=BL(i.providerData,e),g=i.isAnonymous,c=!(i.email&&m.passwordHash)&&!(u!=null&&u.length),s=g?c:!1,o={uid:m.localId,displayName:m.displayName||null,photoURL:m.photoUrl||null,email:m.email||null,emailVerified:m.emailVerified||!1,phoneNumber:m.phoneNumber||null,tenantId:m.tenantId||null,providerData:u,metadata:new $d(m.createdAt,m.lastLoginAt),isAnonymous:s};Object.assign(i,o)}async function ST(i){let t=be(i);await Xd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function BL(i,t){return[...i.filter(d=>!t.some(r=>r.providerId===d.providerId)),...t]}function NL(i){return i.map(t=>{var{providerId:n}=t,d=Nd(t,["providerId"]);return{providerId:n,uid:d.rawId||"",displayName:d.displayName||null,email:d.email||null,phoneNumber:d.phoneNumber||null,photoURL:d.photoUrl||null}})}async function kL(i,t){let n=await gT(i,{},async()=>{let d=Ma({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:m}=i.config,e=yT(i,r,"/v1/token",`key=${m}`),u=await i._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Wd.fetch()(e,{method:"POST",headers:u,body:d})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VL(i,t){return Qe(i,"POST","/v2/accounts:revokeToken",Be(i,t))}var bs=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vt(t.idToken,"internal-error"),vt(typeof t.idToken<"u","internal-error"),vt(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):DL(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return vt(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){let{accessToken:d,refreshToken:r,expiresIn:m}=await kL(t,n);this.updateTokensAndExpiration(d,r,Number(m))}updateTokensAndExpiration(t,n,d){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+d*1e3}static fromJSON(t,n){let{refreshToken:d,accessToken:r,expirationTime:m}=n,e=new bs;return d&&(vt(typeof d=="string","internal-error",{appName:t}),e.refreshToken=d),r&&(vt(typeof r=="string","internal-error",{appName:t}),e.accessToken=r),m&&(vt(typeof m=="number","internal-error",{appName:t}),e.expirationTime=m),e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new bs,this.toJSON())}_performRefresh(){return gn("not implemented")}};function Ar(i,t){vt(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}var Un=class{constructor(t){var{uid:n,auth:d,stsTokenManager:r}=t,m=Nd(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=d,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=m.displayName||null,this.email=m.email||null,this.emailVerified=m.emailVerified||!1,this.phoneNumber=m.phoneNumber||null,this.photoURL=m.photoURL||null,this.isAnonymous=m.isAnonymous||!1,this.tenantId=m.tenantId||null,this.providerData=m.providerData?[...m.providerData]:[],this.metadata=new $d(m.createdAt||void 0,m.lastLoginAt||void 0)}async getIdToken(t){let n=await _l(this,this.stsTokenManager.getToken(this.auth,t));return vt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return xT(this,t)}reload(){return ST(this)}_assign(t){this!==t&&(vt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new Un(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let d=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),d=!0),n&&await Xd(this),await this.auth._persistUserIfCurrent(this),d&&this.auth._notifyListenersIfCurrent(this)}async delete(){let t=await this.getIdToken();return await _l(this,LL(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var d,r,m,e,u,g,c,s;let o=(d=n.displayName)!==null&&d!==void 0?d:void 0,a=(r=n.email)!==null&&r!==void 0?r:void 0,l=(m=n.phoneNumber)!==null&&m!==void 0?m:void 0,p=(e=n.photoURL)!==null&&e!==void 0?e:void 0,h=(u=n.tenantId)!==null&&u!==void 0?u:void 0,f=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(s=n.lastLoginAt)!==null&&s!==void 0?s:void 0,{uid:x,emailVerified:S,isAnonymous:E,providerData:b,stsTokenManager:T}=n;vt(x&&T,t,"internal-error");let P=bs.fromJSON(this.name,T);vt(typeof x=="string",t,"internal-error"),Ar(o,t.name),Ar(a,t.name),vt(typeof S=="boolean",t,"internal-error"),vt(typeof E=="boolean",t,"internal-error"),Ar(l,t.name),Ar(p,t.name),Ar(h,t.name),Ar(f,t.name),Ar(v,t.name),Ar(y,t.name);let C=new Un({uid:x,auth:t,email:a,emailVerified:S,displayName:o,isAnonymous:E,photoURL:p,phoneNumber:l,tenantId:h,stsTokenManager:P,createdAt:v,lastLoginAt:y});return b&&Array.isArray(b)&&(C.providerData=b.map(w=>Object.assign({},w))),f&&(C._redirectEventId=f),C}static async _fromIdTokenResponse(t,n,d=!1){let r=new bs;r.updateFromServerResponse(n);let m=new Un({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:d});return await Xd(m),m}};var tT=new Map;function Gn(i){Wn(i instanceof Function,"Expected a class definition");let t=tT.get(i);return t?(Wn(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,tT.set(i,t),t)}var Yd=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){let n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}};Yd.type="NONE";var kv=Yd;function Gd(i,t,n){return`firebase:${i}:${t}:${n}`}var Rr=class{constructor(t,n,d){this.persistence=t,this.auth=n,this.userKey=d;let{config:r,name:m}=this.auth;this.fullUserKey=Gd(this.userKey,r.apiKey,m),this.fullPersistenceKey=Gd("persistence",r.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){let t=await this.persistence._get(this.fullUserKey);return t?Un._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,d="authUser"){if(!n.length)return new Rr(Gn(kv),t,d);let r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c),m=r[0]||Gn(kv),e=Gd(d,t.config.apiKey,t.name),u=null;for(let c of n)try{let s=await c._get(e);if(s){let o=Un._fromJSON(t,s);c!==m&&(u=o),m=c;break}}catch{}let g=r.filter(c=>c._shouldAllowMigration);return!m._shouldAllowMigration||!g.length?new Rr(m,t,d):(m=g[0],u&&await m._set(e,u.toJSON()),await Promise.all(n.map(async c=>{if(c!==m)try{await c._remove(e)}catch{}})),new Rr(m,t,d))}};function eT(i){let t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ET(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(PT(t))return"Blackberry";if(wT(t))return"Webos";if(Qv(t))return"Safari";if((t.includes("chrome/")||TT(t))&&!t.includes("edge/"))return"Chrome";if(CT(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,d=i.match(n);if((d==null?void 0:d.length)===2)return d[1]}return"Other"}function ET(i=He()){return/firefox\//i.test(i)}function Qv(i=He()){let t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function TT(i=He()){return/crios\//i.test(i)}function bT(i=He()){return/iemobile/i.test(i)}function CT(i=He()){return/android/i.test(i)}function PT(i=He()){return/blackberry/i.test(i)}function wT(i=He()){return/webos/i.test(i)}function ac(i=He()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function GL(i=He()){var t;return ac(i)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function UL(){return uE()&&document.documentMode===10}function AT(i=He()){return ac(i)||CT(i)||wT(i)||PT(i)||/windows phone/i.test(i)||bT(i)}function zL(){try{return!!(window&&window!==window.top)}catch{return!1}}function IT(i,t=[]){let n;switch(i){case"Browser":n=eT(He());break;case"Worker":n=`${eT(He())}-${i}`;break;default:n=i}let d=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cr}/${d}`}var Vv=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let d=m=>new Promise((e,u)=>{try{let g=t(m);e(g)}catch(g){u(g)}});d.onAbort=n,this.queue.push(d);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;let n=[];try{for(let d of this.queue)await d(t),d.onAbort&&n.push(d.onAbort)}catch(d){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:d==null?void 0:d.message})}}};async function HL(i,t={}){return Qe(i,"GET","/v2/passwordPolicy",Be(i,t))}var WL=6,Gv=class{constructor(t){var n,d,r,m;let e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=e.minPasswordLength)!==null&&n!==void 0?n:WL,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(d=t.allowedNonAlphanumericCharacters)===null||d===void 0?void 0:d.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(m=t.forceUpgradeOnSignin)!==null&&m!==void 0?m:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,d,r,m,e,u;let g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(d=g.meetsMaxPasswordLength)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(r=g.containsLowercaseLetter)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(m=g.containsUppercaseLetter)!==null&&m!==void 0?m:!0),g.isValid&&(g.isValid=(e=g.containsNumericCharacter)!==null&&e!==void 0?e:!0),g.isValid&&(g.isValid=(u=g.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),g}validatePasswordLengthOptions(t,n){let d=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;d&&(n.meetsMinPasswordLength=t.length>=d),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let d;for(let r=0;r<t.length;r++)d=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,d>="a"&&d<="z",d>="A"&&d<="Z",d>="0"&&d<="9",this.allowedNonAlphanumericCharacters.includes(d))}updatePasswordCharacterOptionsStatuses(t,n,d,r,m){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=d)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=m))}};var Uv=class{constructor(t,n,d,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=d,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jd(this),this.idTokenSubscription=new jd(this),this.beforeStateQueue=new Vv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var d,r;if(!this._deleted&&(this.persistenceManager=await Rr.create(this,t),!this._deleted)){if(!((d=this._popupRedirectResolver)===null||d===void 0)&&d._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;let d=await this.assertedPersistence.getCurrentUser(),r=d,m=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let e=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(t);(!e||e===u)&&(g!=null&&g.user)&&(r=g.user,m=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(m)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=d,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Xd(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=wL()}async _delete(){this._deleted=!0}async updateCurrentUser(t){let n=t?be(t):null;return n&&vt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&vt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let t=await HL(this),n=new Gv(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new kn("auth","Firebase",t())}onAuthStateChanged(t,n,d){return this.registerStateListener(this.authStateSubscription,t,n,d)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,d){return this.registerStateListener(this.idTokenSubscription,t,n,d)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let d=this.onAuthStateChanged(()=>{d(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){let n=await this.currentUser.getIdToken(),d={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(d.tenantId=this.tenantId),await VL(this,d)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){let d=await this.getOrInitRedirectPersistenceManager(n);return t===null?d.removeCurrentUser():d.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){let n=t&&Gn(t)||this._popupRedirectResolver;vt(n,this,"argument-error"),this.redirectPersistenceManager=await Rr.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,d;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((d=this.redirectUser)===null||d===void 0?void 0:d._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let d=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==d&&(this.lastNotifiedUid=d,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,d,r){if(this._deleted)return()=>{};let m=typeof n=="function"?n:n.next.bind(n),e=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(u,this,"internal-error"),u.then(()=>{e||m(this.currentUser)}),typeof n=="function"){let g=t.addObserver(n,d,r);return()=>{e=!0,g()}}else{let g=t.addObserver(n);return()=>{e=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;let n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let d=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());d&&(n["X-Firebase-Client"]=d);let r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var t;let n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&TL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}};function Rs(i){return be(i)}var jd=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=pE(n=>this.observer=n)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function $L(){var i,t;return(t=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:document}function RT(i){return new Promise((t,n)=>{let d=document.createElement("script");d.setAttribute("src",i),d.onload=t,d.onerror=r=>{let m=yn("internal-error");m.customData=r,n(m)},d.type="text/javascript",d.charset="UTF-8",$L().appendChild(d)})}function MT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}var XL="https://www.google.com/recaptcha/enterprise.js?render=",YL="recaptcha-enterprise",jL="NO_RECAPTCHA",zv=class{constructor(t){this.type=YL,this.auth=Rs(t)}async verify(t="verify",n=!1){async function d(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(e,u)=>{ML(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let c=new Bv(g);return m.tenantId==null?m._agentRecaptchaConfig=c:m._tenantRecaptchaConfigs[m.tenantId]=c,e(c.siteKey)}}).catch(g=>{u(g)})})}function r(m,e,u){let g=window.grecaptcha;qE(g)?g.enterprise.ready(()=>{g.enterprise.execute(m,{action:t}).then(c=>{e(c)}).catch(()=>{e(jL)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((m,e)=>{d(this.auth).then(u=>{if(!n&&qE(window.grecaptcha))r(u,m,e);else{if(typeof window>"u"){e(new Error("RecaptchaVerifier is only supported in browser"));return}RT(XL+u).then(()=>{r(u,m,e)}).catch(g=>{e(g)})}}).catch(u=>{e(u)})})}};async function iT(i,t,n,d=!1){let r=new zv(i),m;try{m=await r.verify(n)}catch{m=await r.verify(n,!0)}let e=Object.assign({},t);return d?Object.assign(e,{captchaResp:m}):Object.assign(e,{captchaResponse:m}),Object.assign(e,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(e,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e}async function nT(i,t,n,d){var r;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let m=await iT(i,t,n,n==="getOobCode");return d(i,m)}else return d(i,t).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let e=await iT(i,t,n,n==="getOobCode");return d(i,e)}else return Promise.reject(m)})}function LT(i,t){let n=kl(i,"auth");if(n.isInitialized()){let r=n.getImmediate(),m=n.getOptions();if(vs(m,t??{}))return r;nn(r,"already-initialized")}return n.initialize({options:t})}function KL(i,t){let n=(t==null?void 0:t.persistence)||[],d=(Array.isArray(n)?n:[n]).map(Gn);t!=null&&t.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(d,t==null?void 0:t.popupRedirectResolver)}function OT(i,t,n){let d=Rs(i);vt(d._canInitEmulator,d,"emulator-config-failed"),vt(/^https?:\/\//.test(t),d,"invalid-emulator-scheme");let r=!!(n!=null&&n.disableWarnings),m=DT(t),{host:e,port:u}=JL(t),g=u===null?"":`:${u}`;d.config.emulator={url:`${m}//${e}${g}/`},d.settings.appVerificationDisabledForTesting=!0,d.emulatorConfig=Object.freeze({host:e,port:u,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||ZL()}function DT(i){let t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function JL(i){let t=DT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!n)return{host:"",port:null};let d=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(d);if(r){let m=r[1];return{host:m,port:rT(d.substr(m.length+1))}}else{let[m,e]=d.split(":");return{host:m,port:rT(e)}}}function rT(i){if(!i)return null;let t=Number(i);return isNaN(t)?null:t}function ZL(){function i(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}var Cs=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return gn("not implemented")}_getIdTokenResponse(t){return gn("not implemented")}_linkToIdToken(t,n){return gn("not implemented")}_getReauthenticationResolver(t){return gn("not implemented")}};async function QL(i,t){return Qe(i,"POST","/v1/accounts:signUp",t)}async function _L(i,t){return Is(i,"POST","/v1/accounts:signInWithPassword",Be(i,t))}async function qL(i,t){return Is(i,"POST","/v1/accounts:signInWithEmailLink",Be(i,t))}async function tO(i,t){return Is(i,"POST","/v1/accounts:signInWithEmailLink",Be(i,t))}var Mr=class extends Cs{constructor(t,n,d,r=null){super("password",d),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new Mr(t,n,"password")}static _fromEmailAndCode(t,n,d=null){return new Mr(t,n,"emailLink",d)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nT(t,n,"signInWithPassword",_L);case"emailLink":return qL(t,{email:this._email,oobCode:this._password});default:nn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":let d={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nT(t,d,"signUpPassword",QL);case"emailLink":return tO(t,{idToken:n,email:this._email,oobCode:this._password});default:nn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};async function Wa(i,t){return Is(i,"POST","/v1/accounts:signInWithIdp",Be(i,t))}var eO="http://localhost",Sn=class extends Cs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new Sn(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t,{providerId:d,signInMethod:r}=n,m=Nd(n,["providerId","signInMethod"]);if(!d||!r)return null;let e=new Sn(d,r);return e.idToken=m.idToken||void 0,e.accessToken=m.accessToken||void 0,e.secret=m.secret,e.nonce=m.nonce,e.pendingToken=m.pendingToken||null,e}_getIdTokenResponse(t){let n=this.buildRequest();return Wa(t,n)}_linkToIdToken(t,n){let d=this.buildRequest();return d.idToken=n,Wa(t,d)}_getReauthenticationResolver(t){let n=this.buildRequest();return n.autoCreate=!1,Wa(t,n)}buildRequest(){let t={requestUri:eO,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ma(n)}return t}};async function iO(i,t){return Qe(i,"POST","/v1/accounts:sendVerificationCode",Be(i,t))}async function nO(i,t){return Is(i,"POST","/v1/accounts:signInWithPhoneNumber",Be(i,t))}async function rO(i,t){let n=await Is(i,"POST","/v1/accounts:signInWithPhoneNumber",Be(i,t));if(n.temporaryProof)throw Zl(i,"account-exists-with-different-credential",n);return n}var sO={USER_NOT_FOUND:"user-not-found"};async function aO(i,t){let n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return Is(i,"POST","/v1/accounts:signInWithPhoneNumber",Be(i,n),sO)}var zn=class extends Cs{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,n){return new zn({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new zn({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(t){return nO(t,this._makeVerificationRequest())}_linkToIdToken(t,n){return rO(t,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return aO(t,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:t,phoneNumber:n,verificationId:d,verificationCode:r}=this.params;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:d,code:r}}toJSON(){let t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));let{verificationId:n,verificationCode:d,phoneNumber:r,temporaryProof:m}=t;return!d&&!n&&!r&&!m?null:new zn({verificationId:n,verificationCode:d,phoneNumber:r,temporaryProof:m})}};function oO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lO(i){let t=La(Oa(i)).link,n=t?La(Oa(t)).deep_link_id:null,d=La(Oa(i)).deep_link_id;return(d?La(Oa(d)).link:null)||d||n||t||i}var $a=class{constructor(t){var n,d,r,m,e,u;let g=La(Oa(t)),c=(n=g.apiKey)!==null&&n!==void 0?n:null,s=(d=g.oobCode)!==null&&d!==void 0?d:null,o=oO((r=g.mode)!==null&&r!==void 0?r:null);vt(c&&s&&o,"argument-error"),this.apiKey=c,this.operation=o,this.code=s,this.continueUrl=(m=g.continueUrl)!==null&&m!==void 0?m:null,this.languageCode=(e=g.languageCode)!==null&&e!==void 0?e:null,this.tenantId=(u=g.tenantId)!==null&&u!==void 0?u:null}static parseLink(t){let n=lO(t);try{return new $a(n)}catch{return null}}};var $n=class{constructor(){this.providerId=$n.PROVIDER_ID}static credential(t,n){return Mr._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){let d=$a.parseLink(n);return vt(d,"argument-error"),Mr._fromEmailAndCode(t,d.code,d.tenantId)}};$n.PROVIDER_ID="password";$n.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Kd=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Ps=class extends Kd{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var _i=class extends Ps{constructor(){super("facebook.com")}static credential(t){return Sn._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _i.credentialFromTaggedObject(t)}static credentialFromError(t){return _i.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _i.credential(t.oauthAccessToken)}catch{return null}}};_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";var qi=class extends Ps{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Sn._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return qi.credentialFromTaggedObject(t)}static credentialFromError(t){return qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:d}=t;if(!n&&!d)return null;try{return qi.credential(n,d)}catch{return null}}};qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";var tn=class extends Ps{constructor(){super("github.com")}static credential(t){return Sn._fromParams({providerId:tn.PROVIDER_ID,signInMethod:tn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tn.credentialFromTaggedObject(t)}static credentialFromError(t){return tn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return tn.credential(t.oauthAccessToken)}catch{return null}}};tn.GITHUB_SIGN_IN_METHOD="github.com";tn.PROVIDER_ID="github.com";var en=class extends Ps{constructor(){super("twitter.com")}static credential(t,n){return Sn._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return en.credentialFromTaggedObject(t)}static credentialFromError(t){return en.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:d}=t;if(!n||!d)return null;try{return en.credential(n,d)}catch{return null}}};en.TWITTER_SIGN_IN_METHOD="twitter.com";en.PROVIDER_ID="twitter.com";var Lr=class{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,d,r=!1){let m=await Un._fromIdTokenResponse(t,d,r),e=sT(d);return new Lr({user:m,providerId:e,_tokenResponse:d,operationType:n})}static async _forOperation(t,n,d){await t._updateTokensIfNecessary(d,!0);let r=sT(d);return new Lr({user:t,providerId:r,_tokenResponse:d,operationType:n})}};function sT(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}var Xa=class extends ii{constructor(t,n,d,r){var m;super(n.code,n.message),this.operationType=d,this.user=r,Object.setPrototypeOf(this,Xa.prototype),this.customData={appName:t.name,tenantId:(m=t.tenantId)!==null&&m!==void 0?m:void 0,_serverResponse:n.customData._serverResponse,operationType:d}}static _fromErrorAndOperation(t,n,d,r){return new Xa(t,n,d,r)}};function FT(i,t,n,d){return(t==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?Xa._fromErrorAndOperation(i,m,t,d):m})}async function hO(i,t,n=!1){let d=await _l(i,t._linkToIdToken(i.auth,await i.getIdToken()),n);return Lr._forOperation(i,"link",d)}async function uO(i,t,n=!1){let{auth:d}=i,r="reauthenticate";try{let m=await _l(i,FT(d,r,t,i),n);vt(m.idToken,d,"internal-error");let e=Zv(m.idToken);vt(e,d,"internal-error");let{sub:u}=e;return vt(i.uid===u,d,"user-mismatch"),Lr._forOperation(i,r,m)}catch(m){throw(m==null?void 0:m.code)==="auth/user-not-found"&&nn(d,"user-mismatch"),m}}async function BT(i,t,n=!1){let d="signIn",r=await FT(i,d,t),m=await Lr._fromIdTokenResponse(i,d,r);return n||await i._updateCurrentUser(m.user),m}async function NT(i,t){return BT(Rs(i),t)}async function dO(i){let t=Rs(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function _v(i,t,n){return NT(be(i),$n.credential(t,n)).catch(async d=>{throw d.code==="auth/password-does-not-meet-requirements"&&dO(i),d})}function qv(i,t){return be(i).setPersistence(t)}function kT(i,t,n,d){return be(i).onIdTokenChanged(t,n,d)}function VT(i,t,n){return be(i).beforeAuthStateChanged(t,n)}function tg(i,t,n,d){return be(i).onAuthStateChanged(t,n,d)}function eg(i){return be(i).signOut()}function cO(i,t){return Qe(i,"POST","/v2/accounts/mfaEnrollment:start",Be(i,t))}function fO(i,t){return Qe(i,"POST","/v2/accounts/mfaEnrollment:finalize",Be(i,t))}function pO(i,t){return Qe(i,"POST","/v2/accounts/mfaEnrollment:start",Be(i,t))}function mO(i,t){return Qe(i,"POST","/v2/accounts/mfaEnrollment:finalize",Be(i,t))}var Jd="__sak";var Zd=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,"1"),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function vO(){let i=He();return Qv(i)||ac(i)}var gO=1e3,yO=10,Qd=class extends Zd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=vO()&&zL(),this.fallbackToPolling=AT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let n of Object.keys(this.listeners)){let d=this.storage.getItem(n),r=this.localCache[n];d!==r&&t(n,r,d)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((e,u,g)=>{this.notifyListeners(e,g)});return}let d=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let e=this.storage.getItem(d);if(t.newValue!==e)t.newValue!==null?this.storage.setItem(d,t.newValue):this.storage.removeItem(d);else if(this.localCache[d]===t.newValue&&!n)return}let r=()=>{let e=this.storage.getItem(d);!n&&this.localCache[d]===e||this.notifyListeners(d,e)},m=this.storage.getItem(d);UL()&&m!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,yO):r()}notifyListeners(t,n){this.localCache[t]=n;let d=this.listeners[t];if(d)for(let r of Array.from(d))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,d)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:d}),!0)})},gO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){let n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}};Qd.type="LOCAL";var oc=Qd;var _d=class extends Zd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}};_d.type="SESSION";var ig=_d;function xO(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}var Ya=class{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;let d=new Ya(t);return this.receivers.push(d),d}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let n=t,{eventId:d,eventType:r,data:m}=n.data,e=this.handlersMap[r];if(!(e!=null&&e.size))return;n.ports[0].postMessage({status:"ack",eventId:d,eventType:r});let u=Array.from(e).map(async c=>c(n.origin,m)),g=await xO(u);n.ports[0].postMessage({status:"done",eventId:d,eventType:r,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Ya.receivers=[];function ng(i="",t=10){let n="";for(let d=0;d<t;d++)n+=Math.floor(Math.random()*10);return i+n}var Hv=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,d=50){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let m,e;return new Promise((u,g)=>{let c=ng("",20);r.port1.start();let s=setTimeout(()=>{g(new Error("unsupported_event"))},d);e={messageChannel:r,onMessage(o){let a=o;if(a.data.eventId===c)switch(a.data.status){case"ack":clearTimeout(s),m=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),u(a.data.response);break;default:clearTimeout(s),clearTimeout(m),g(new Error("invalid_response"));break}}},this.handlers.add(e),r.port1.addEventListener("message",e.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[r.port2])}).finally(()=>{e&&this.removeMessageHandler(e)})}};function xn(){return window}function SO(i){xn().location.href=i}function GT(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function EO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function bO(){return GT()?self:null}var UT="firebaseLocalStorageDb",CO=1,qd="firebaseLocalStorage",zT="fbase_key",ws=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function lc(i,t){return i.transaction([qd],t?"readwrite":"readonly").objectStore(qd)}function PO(){let i=indexedDB.deleteDatabase(UT);return new ws(i).toPromise()}function Wv(){let i=indexedDB.open(UT,CO);return new Promise((t,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{let d=i.result;try{d.createObjectStore(qd,{keyPath:zT})}catch(r){n(r)}}),i.addEventListener("success",async()=>{let d=i.result;d.objectStoreNames.contains(qd)?t(d):(d.close(),await PO(),t(await Wv()))})})}async function aT(i,t,n){let d=lc(i,!0).put({[zT]:t,value:n});return new ws(d).toPromise()}async function wO(i,t){let n=lc(i,!1).get(t),d=await new ws(n).toPromise();return d===void 0?null:d.value}function oT(i,t){let n=lc(i,!0).delete(t);return new ws(n).toPromise()}var AO=800,IO=3,tc=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wv(),this.db)}async _withRetries(t){let n=0;for(;;)try{let d=await this._openDb();return await t(d)}catch(d){if(n++>IO)throw d;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ya._getInstance(bO()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await EO(),!this.activeServiceWorker)return;this.sender=new Hv(this.activeServiceWorker);let d=await this.sender._send("ping",{},800);d&&!((t=d[0])===null||t===void 0)&&t.fulfilled&&!((n=d[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||TO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Wv();return await aT(t,Jd,"1"),await oT(t,Jd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(d=>aT(d,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){let n=await this._withRetries(d=>wO(d,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>oT(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(r=>{let m=lc(r,!1).getAll();return new ws(m).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let n=[],d=new Set;if(t.length!==0)for(let{fbase_key:r,value:m}of t)d.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(m)&&(this.notifyListeners(r,m),n.push(r));for(let r of Object.keys(this.localCache))this.localCache[r]&&!d.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;let d=this.listeners[t];if(d)for(let r of Array.from(d))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}};tc.type="LOCAL";var HT=tc;function RO(i,t){return Qe(i,"POST","/v2/accounts/mfaSignIn:start",Be(i,t))}function MO(i,t){return Qe(i,"POST","/v2/accounts/mfaSignIn:finalize",Be(i,t))}function LO(i,t){return Qe(i,"POST","/v2/accounts/mfaSignIn:finalize",Be(i,t))}var Hz=MT("rcb"),Wz=new Ts(3e4,6e4);var OO="recaptcha";async function DO(i,t,n){var d;let r=await n.verify();try{vt(typeof r=="string",i,"argument-error"),vt(n.type===OO,i,"argument-error");let m;if(typeof t=="string"?m={phoneNumber:t}:m=t,"session"in m){let e=m.session;if("phoneNumber"in m)return vt(e.type==="enroll",i,"internal-error"),(await cO(i,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:m.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{vt(e.type==="signin",i,"internal-error");let u=((d=m.multiFactorHint)===null||d===void 0?void 0:d.uid)||m.multiFactorUid;return vt(u,i,"missing-multi-factor-info"),(await RO(i,{mfaPendingCredential:e.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:e}=await iO(i,{phoneNumber:m.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}var Hn=class{constructor(t){this.providerId=Hn.PROVIDER_ID,this.auth=Rs(t)}verifyPhoneNumber(t,n){return DO(this.auth,t,be(n))}static credential(t,n){return zn._fromVerification(t,n)}static credentialFromResult(t){let n=t;return Hn.credentialFromTaggedObject(n)}static credentialFromError(t){return Hn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{phoneNumber:n,temporaryProof:d}=t;return n&&d?zn._fromTokenResponse(n,d):null}};Hn.PROVIDER_ID="phone";Hn.PHONE_SIGN_IN_METHOD="phone";function FO(i,t){return t?Gn(t):(vt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}var ql=class extends Cs{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Wa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Wa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Wa(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function BO(i){return BT(i.auth,new ql(i),i.bypassAuthState)}function NO(i){let{auth:t,user:n}=i;return vt(n,t,"internal-error"),uO(n,new ql(i),i.bypassAuthState)}async function kO(i){let{auth:t,user:n}=i;return vt(n,t,"internal-error"),hO(n,new ql(i),i.bypassAuthState)}var ec=class{constructor(t,n,d,r,m=!1){this.auth=t,this.resolver=d,this.user=r,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(d){this.reject(d)}})}async onAuthEvent(t){let{urlResponse:n,sessionId:d,postBody:r,tenantId:m,error:e,type:u}=t;if(e){this.reject(e);return}let g={auth:this.auth,requestUri:n,sessionId:d,tenantId:m||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(g))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return BO;case"linkViaPopup":case"linkViaRedirect":return kO;case"reauthViaPopup":case"reauthViaRedirect":return NO;default:nn(this.auth,"internal-error")}}resolve(t){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var VO=new Ts(2e3,1e4);var Ir=class extends ec{constructor(t,n,d,r,m){super(t,n,r,m),this.provider=d,this.authWindow=null,this.pollId=null,Ir.currentPopupAction&&Ir.currentPopupAction.cancel(),Ir.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return vt(t,this.auth,"internal-error"),t}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");let t=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ir.currentPopupAction=null}pollUserCancellation(){let t=()=>{var n,d;if(!((d=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||d===void 0)&&d.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,VO.get())};t()}};Ir.currentPopupAction=null;var GO="pendingRedirect",Ud=new Map,$v=class extends ec{constructor(t,n,d=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,d),this.eventId=null}async execute(){let t=Ud.get(this.auth._key());if(!t){try{let d=await UO(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(d)}catch(n){t=()=>Promise.reject(n)}Ud.set(this.auth._key(),t)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function UO(i,t){let n=WO(t),d=HO(i);if(!await d._isAvailable())return!1;let r=await d._get(n)==="true";return await d._remove(n),r}function zO(i,t){Ud.set(i._key(),t)}function HO(i){return Gn(i._redirectPersistence)}function WO(i){return Gd(GO,i.config.apiKey,i.name)}async function $O(i,t,n=!1){let d=Rs(i),r=FO(d,t),e=await new $v(d,r,n).execute();return e&&!n&&(delete e.user._redirectEventId,await d._persistUserIfCurrent(e.user),await d._setRedirectUser(null,t)),e}var XO=10*60*1e3,Xv=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(d=>{this.isEventForConsumer(t,d)&&(n=!0,this.sendToConsumer(t,d),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!YO(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var d;if(t.error&&!WT(t)){let r=((d=t.error.code)===null||d===void 0?void 0:d.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let d=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&d}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=XO&&this.cachedEventUids.clear(),this.cachedEventUids.has(lT(t))}saveEventToCache(t){this.cachedEventUids.add(lT(t)),this.lastProcessedEventTime=Date.now()}};function lT(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function WT({type:i,error:t}){return i==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function YO(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WT(i);default:return!1}}async function jO(i,t={}){return Qe(i,"GET","/v1/projects",t)}var KO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JO=/^https?/;async function ZO(i){if(i.config.emulator)return;let{authorizedDomains:t}=await jO(i);for(let n of t)try{if(QO(n))return}catch{}nn(i,"unauthorized-domain")}function QO(i){let t=Dv(),{protocol:n,hostname:d}=new URL(t);if(i.startsWith("chrome-extension://")){let e=new URL(i);return e.hostname===""&&d===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&e.hostname===d}if(!JO.test(n))return!1;if(KO.test(i))return d===i;let r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(d)}var _O=new Ts(3e4,6e4);function hT(){let i=xn().___jsl;if(i!=null&&i.H){for(let t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function qO(i){return new Promise((t,n)=>{var d,r,m;function e(){hT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hT(),n(yn(i,"network-request-failed"))},timeout:_O.get()})}if(!((r=(d=xn().gapi)===null||d===void 0?void 0:d.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((m=xn().gapi)===null||m===void 0)&&m.load)e();else{let u=MT("iframefcb");return xn()[u]=()=>{gapi.load?e():n(yn(i,"network-request-failed"))},RT(`https://apis.google.com/js/api.js?onload=${u}`).catch(g=>n(g))}}).catch(t=>{throw zd=null,t})}var zd=null;function tD(i){return zd=zd||qO(i),zd}var eD=new Ts(5e3,15e3),iD="__/auth/iframe",nD="emulator/auth/iframe",rD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aD(i){let t=i.config;vt(t.authDomain,i,"auth-domain-config-required");let n=t.emulator?Jv(t,nD):`https://${i.config.authDomain}/${iD}`,d={apiKey:t.apiKey,appName:i.name,v:Cr},r=sD.get(i.config.apiHost);r&&(d.eid=r);let m=i._getFrameworks();return m.length&&(d.fw=m.join(",")),`${n}?${Ma(d).slice(1)}`}async function oD(i){let t=await tD(i),n=xn().gapi;return vt(n,i,"internal-error"),t.open({where:document.body,url:aD(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rD,dontclear:!0},d=>new Promise(async(r,m)=>{await d.restyle({setHideOnLeave:!1});let e=yn(i,"network-request-failed"),u=xn().setTimeout(()=>{m(e)},eD.get());function g(){xn().clearTimeout(u),r(d)}d.ping(g).then(g,()=>{m(e)})}))}var lD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hD=500,uD=600,dD="_blank",cD="http://localhost",ic=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function fD(i,t,n,d=hD,r=uD){let m=Math.max((window.screen.availHeight-r)/2,0).toString(),e=Math.max((window.screen.availWidth-d)/2,0).toString(),u="",g=Object.assign(Object.assign({},lD),{width:d.toString(),height:r.toString(),top:m,left:e}),c=He().toLowerCase();n&&(u=TT(c)?dD:n),ET(c)&&(t=t||cD,g.scrollbars="yes");let s=Object.entries(g).reduce((a,[l,p])=>`${a}${l}=${p},`,"");if(GL(c)&&u!=="_self")return pD(t||"",u),new ic(null);let o=window.open(t||"",u,s);vt(o,i,"popup-blocked");try{o.focus()}catch{}return new ic(o)}function pD(i,t){let n=document.createElement("a");n.href=i,n.target=t;let d=document.createEvent("MouseEvent");d.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(d)}var mD="__/auth/handler",vD="emulator/auth/handler",gD=encodeURIComponent("fac");async function uT(i,t,n,d,r,m){vt(i.config.authDomain,i,"auth-domain-config-required"),vt(i.config.apiKey,i,"invalid-api-key");let e={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:d,v:Cr,eventId:r};if(t instanceof Kd){t.setDefaultLanguage(i.languageCode),e.providerId=t.providerId||"",fE(t.getCustomParameters())||(e.customParameters=JSON.stringify(t.getCustomParameters()));for(let[s,o]of Object.entries(m||{}))e[s]=o}if(t instanceof Ps){let s=t.getScopes().filter(o=>o!=="");s.length>0&&(e.scopes=s.join(","))}i.tenantId&&(e.tid=i.tenantId);let u=e;for(let s of Object.keys(u))u[s]===void 0&&delete u[s];let g=await i._getAppCheckToken(),c=g?`#${gD}=${encodeURIComponent(g)}`:"";return`${yD(i)}?${Ma(u).slice(1)}${c}`}function yD({config:i}){return i.emulator?Jv(i,vD):`https://${i.authDomain}/${mD}`}var Ov="webStorageSupport",Yv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ig,this._completeRedirectFn=$O,this._overrideRedirectResult=zO}async _openPopup(t,n,d,r){var m;Wn((m=this.eventManagers[t._key()])===null||m===void 0?void 0:m.manager,"_initialize() not called before _openPopup()");let e=await uT(t,n,d,Dv(),r);return fD(t,e,ng())}async _openRedirect(t,n,d,r){await this._originValidation(t);let m=await uT(t,n,d,Dv(),r);return SO(m),new Promise(()=>{})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:r,promise:m}=this.eventManagers[n];return r?Promise.resolve(r):(Wn(m,"If manager is not set, promise should be"),m)}let d=this.initAndGetManager(t);return this.eventManagers[n]={promise:d},d.catch(()=>{delete this.eventManagers[n]}),d}async initAndGetManager(t){let n=await oD(t),d=new Xv(t);return n.register("authEvent",r=>(vt(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:d.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:d},this.iframes[t._key()]=n,d}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Ov,{type:Ov},r=>{var m;let e=(m=r==null?void 0:r[0])===null||m===void 0?void 0:m[Ov];e!==void 0&&n(!!e),nn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZO(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return AT()||Qv()||ac()}},$T=Yv,nc=class{constructor(t){this.factorId=t}_process(t,n,d){switch(n.type){case"enroll":return this._finalizeEnroll(t,n.credential,d);case"signin":return this._finalizeSignIn(t,n.credential);default:return gn("unexpected MultiFactorSessionType")}}},th=class extends nc{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new th(t)}_finalizeEnroll(t,n,d){return fO(t,{idToken:n,displayName:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,n){return MO(t,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},rc=class{constructor(){}static assertion(t){return th._fromCredential(t)}};rc.FACTOR_ID="phone";var sc=class{static assertionForEnrollment(t,n){return As._fromSecret(t,n)}static assertionForSignIn(t,n){return As._fromEnrollmentId(t,n)}static async generateSecret(t){var n;let d=t;vt(typeof((n=d.user)===null||n===void 0?void 0:n.auth)<"u","internal-error");let r=await pO(d.user.auth,{idToken:d.credential,totpEnrollmentInfo:{}});return ja._fromStartTotpMfaEnrollmentResponse(r,d.user.auth)}};sc.FACTOR_ID="totp";var As=class extends nc{constructor(t,n,d){super("totp"),this.otp=t,this.enrollmentId=n,this.secret=d}static _fromSecret(t,n){return new As(n,void 0,t)}static _fromEnrollmentId(t,n){return new As(n,t)}async _finalizeEnroll(t,n,d){return vt(typeof this.secret<"u",t,"argument-error"),mO(t,{idToken:n,displayName:d,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,n){vt(this.enrollmentId!==void 0&&this.otp!==void 0,t,"argument-error");let d={verificationCode:this.otp};return LO(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:d})}},ja=class{constructor(t,n,d,r,m,e,u){this.sessionInfo=e,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=d,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=m}static _fromStartTotpMfaEnrollmentResponse(t,n){return new ja(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,n){var d;let r=!1;return(kd(t)||kd(n))&&(r=!0),r&&(kd(t)&&(t=((d=this.auth.currentUser)===null||d===void 0?void 0:d.email)||"unknownuser"),kd(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${t}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function kd(i){return typeof i>"u"||(i==null?void 0:i.length)===0}var dT="@firebase/auth",cT="1.5.1";var jv=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(d=>{t((d==null?void 0:d.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function xD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function SD(i){br(new Di("auth",(t,{options:n})=>{let d=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),m=t.getProvider("app-check-internal"),{apiKey:e,authDomain:u}=d.options;vt(e&&!e.includes(":"),"invalid-api-key",{appName:d.name});let g={apiKey:e,authDomain:u,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(i)},c=new Uv(d,r,m,g);return KL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,d)=>{t.getProvider("auth-internal").initialize()})),br(new Di("auth-internal",t=>{let n=Rs(t.getProvider("auth").getImmediate());return(d=>new jv(d))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(dT,cT,xD(i)),Ji(dT,cT,"esm2017")}var ED=5*60,TD=Am("authIdTokenMaxAge")||ED,fT=null,bD=i=>async t=>{let n=t&&await t.getIdTokenResult(),d=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(d&&d>TD)return;let r=n==null?void 0:n.token;fT!==r&&(fT=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function eh(i=Ed()){let t=kl(i,"auth");if(t.isInitialized())return t.getImmediate();let n=LT(i,{popupRedirectResolver:$T,persistence:[HT,oc,ig]}),d=Am("authTokenSyncURL");if(d){let m=bD(d);VT(n,m,()=>m(n.currentUser)),kT(n,e=>m(e))}let r=Pm("auth");return r&&OT(n,`http://${r}`),n}SD("Browser");var CD=i=>typeof i=="object"&&i!==null&&!Array.isArray(i),XT=i=>CD(i)&&Object.prototype.hasOwnProperty.call(i,"displayName")&&Object.prototype.hasOwnProperty.call(i,"userId")&&Object.prototype.hasOwnProperty.call(i,"email");var rg="agec_local_user",Xn=()=>{PD(),Ml(null)},Ka=i=>{if(!i){Dt("[user | logInUser] user is undefined");return}Dt("[user | logInUser] user: "+i.userId),wD(i),Ml(i)},PD=()=>{Dt("Clearing local user"),localStorage.removeItem(rg)},wD=i=>{i&&(Dt("[user | setLocalUser] Setting local user: "+i.userId),localStorage.setItem(rg,JSON.stringify(i)))},YT=()=>{let i=localStorage.getItem(rg);if(i===null)return Dt("[user | getLocalUser] data is null"),null;let t=JSON.parse(i);return XT(t)?t:null};var AD={apiKey:"AIzaSyCuNvDPPLmHvznuN-SwxydlHREM77nvcy4",authDomain:"agec-dev.firebaseapp.com",projectId:"agec-dev",storageBucket:"agec-dev.appspot.com",messagingSenderId:"1021484876391",appId:"1:1021484876391:web:a93d569016aaf6c9898ac2",measurementId:"G-XDC7ZYS5P9"},ID=Hm(AD),jT=XE(ID),RD=i=>new Promise(t=>setTimeout(t,i)),Fi=class{constructor(){this.authChanged=!1;this.firebaseUserToIUserData=t=>t?{displayName:t.email,userId:t.uid,email:t.email}:null;this.getUser=async()=>{for(;!this.authChanged;)await RD(100);if(!this.userData)throw new Error("No user data available");return this.userData};this.getUserHighScore=async()=>{var n;return this.userID&&((n=(await Bd(this.highScoreDocRef())).data())==null?void 0:n.highScore)||null};this.saveDocRef=()=>this.userID?Av(jT,"saves",this.userID):null;this.highScoreDocRef=()=>this.userID?Av(jT,"high_scores",this.userID):null;this.loadGame=async()=>{if(!this.getUser())throw new Error("user not signed in");Dt("[DEV API] loadGameData");let t=this.saveDocRef(),d=(await Bd(t)).data()||null;if(d==null)throw new Error("failed to fetch document from firestore");return{...d}};this.saveGame=async t=>{var m;if(!this.getUser())throw new Error("user not signed in");try{let e=await Bd(this.highScoreDocRef()),u={highScore:t.score};e.exists()?((m=e.data())==null?void 0:m.highScore)<t.score&&QE(this.highScoreDocRef(),u):Mv(this.highScoreDocRef(),u)}catch(e){Dt("Failed to update the high score: ",e)}let n=JSON.stringify(t.data,null,2);Rl(`[DEV API] saveGameData:
${n}`);let d=this.saveDocRef(),r={...t};try{await Mv(d,r)}catch(e){ze(e)}};this.loginURL=()=>null;this.leaderBoardURL=()=>null;let t=eh();tg(t,n=>{this.userID=(n==null?void 0:n.email)||void 0,this.userData=this.firebaseUserToIUserData(n),this.authChanged=!0,this.userData?Ka(this.userData):(Xn(),ie("Logged Out Screen"))})}};Fi.signIn=async(t,n)=>{if(!!1)return;let d=eh();qv(d,oc),await _v(d,t,n)},Fi.signOut=async()=>{!1&&await eg(eh())};var KT=Et({status:0}),JT=Et({status:0}),ZT=Et({status:0}),QT=Et({status:0}),Or={userRequest:KT,loadGameRequest:JT,saveGameRequest:ZT,userHighScoreRequest:QT},hc=i=>({start:()=>{i.value={status:1}},success:t=>{i.value={status:2,data:t}},failed:t=>{i.value={status:3,errorMessage:t}}}),Ci={getUser:hc(KT),loadGame:hc(JT),saveGame:hc(ZT),getUserHighScore:hc(QT)};var ih=Et(navigator.onLine);function _T(){return ih.value}window.addEventListener("online",()=>{ih.value=!0});window.addEventListener("offline",()=>{ih.value=!1});var uc=()=>{window.installPrompt&&window.installPrompt.prompt()};var Rt=Symbol("game-context");var qT=7,MD=6,tb=Et(!1),sg=Et(0),ag=Et(!1),Ja=Et([]),og=Et(!1),lg=Et(!1),Ms=Et(1),hg=Et(0),ug=Et(0),dg=Et(1),eb=()=>{tb.value=!1,sg.value=0,ag.value=!1,Ja.value=[],og.value=!1,lg.value=!1,Ms.value=1,hg.value=0,ug.value=0,dg.value=1},Gt={complete:tb,paydayBarPercentage:sg,displayFinancialReport:ag,eventQueue:Ja,displayLevelUp:og,isPaused:lg,introPage:Ms,totalSalariesDue:hg,overdueSalaries:ug,paydayCount:dg};var ib=i=>{sg.value=i*100},dc=()=>Math.round(100-Gt.paydayBarPercentage.value),cg=i=>ag.value=i,cc=i=>{Ja.value=[...Ja.value,i]},nb=()=>{Ja.value=Ja.value.filter((i,t)=>t)};var fc=i=>og.value=i,Za=i=>{lg.value=i},rb=i=>{hg.value=i},sb=i=>{ug.value=i},ab=()=>Ms.value++,lb=()=>Ms.value=MD,Qa=()=>Ms.value>qT,hb=()=>Ms.value=1,ub=()=>Ms.value+=qT,pc=i=>dg.value=i;window.dataLayer=window.dataLayer||[];var fg="";pt.user.subscribe(i=>{i&&i.userId&&(fg=i.userId)});function Ne(i,t){if(!fg){ze("[analytics] user_id was undefined");return}window.dataLayer.push({event:i,user_id:fg,...t})}function db(){Ne("LoginSuccess",{})}function cb(i){Ne("GameStart",{game_type:i?"new_game":"Continuation of previous session"})}function fb(i,t){Ne("GameAbandoned",{payday_number:i+1,current_payday_progress:t})}function pb(i){Ne("ChooseBusinessType",{business_type:i})}function mb(i,t,n,d){Ne("StockOrdered",{stock_quantity:i,stock_cost:t,product_key:n,product_name:d})}function vb(i,t,n,d,r){Ne("ProductPricing",{selling_price:i,max_price:t,purchase_price:n,product_key:d,product_name:r})}function gb(i,t,n,d){Ne("SaleMade",{product_key:i,product_name:t,sale_price:n,profit_margin:n-d})}function yb(i,t){Ne("BeginEarningProfit",{revenue_vs_expenses:i,payday_number:t+1})}function xb(i,t,n,d){Ne("MarketingSpend",{amount_spent:i,demand_level:t,product_key:n,product_name:d})}function Sb(i,t){Ne("HireStaff",{staff_index:i,salary:t})}function Eb(i,t){Ne("PayStaff",{staff_index:i,salary:t})}function Tb(i,t,n){Ne("ProductAdded",{product_key:i,product_name:t,sale_price:n})}function bb(i,t,n){Ne("FinancialReport",{business_value:i,profit_loss:t,payday_number:n+1})}function Cb(i,t){let{product_not_available:n,till_not_available:d,product_too_expensive:r,no_marketing:m}=t;Ne("MarketResearch",{number_of_sales:i,product_feedback_received:{product_not_available:n,till_not_available:d,product_too_expensive:r,no_marketing:m}})}function Pb(i){Ne("BusinessGrowth",{level_up:i})}function wb(i,t,n,d,r){Ne("AchievementCompleted",{achievement_id:i,gold:t??0,business_value:n??0,payday_number:d+1,current_payday_progress:r})}function Ab(i){Ne("GameplayTips",{tip_id:i})}function Ib(i,t){Ne("FinalPaydayBusinessValuation",{final_business_value:i,total_profit:t})}var Kt=at`
  /*This animation is for all the in-game UI containers */
  @keyframes popInAnim {
    0% {
      transform: scale(0.5);
    }
    100% {
      transform: scale(1);
    }
  }

  /*This animation is for the score container in the game-over screen */
  @keyframes popInAnimGameOver {
    0% {
      transform: scale(0);
    }
    30% {
      transform: scale(0);
    }
    70% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }

  /*This animation is for the in-game and UI layer buttons*/
  @keyframes popInAnimButtons {
    0% {
      transform: scale(0);
    }

    50% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }

  /*This animation is for UI intro dialogue buttons as a translation Y has been applied to its styling*/
  @keyframes popInAnimIntroDialogue {
    0% {
      transform: translate(0%, 0%) scale(0);
    }
    50% {
      transform: translate(0%, 0%) scale(0);
    }
    100% {
      transform: translate(0%, 50%) scale(1);
    }
  }

  .popIn {
    animation-name: popInAnim;
    animation-duration: 0.25s;
    animation-timing-function: cubic-bezier(0.17, 0.67, 0.55, 1.35);
    animation-fill-mode: none;
  }

  .popIn.levelUp {
    animation-duration: 1s;
    animation-timing-function: ease-in-out;
    animation-fill-mode: none;
  }

  .popIn.game-button {
    animation-name: popInAnimButtons;
    animation-duration: 0.35s;
    animation-timing-function: cubic-bezier(0.17, 0.67, 0.55, 1.35);
    animation-fill-mode: none;
  }

  .popIn.ui-button {
    animation-name: popInAnimButtons;
    animation-duration: 0.6s;
    animation-timing-function: cubic-bezier(0.17, 0.67, 0.55, 1.35);
    animation-fill-mode: none;
  }

  .popIn.ui-button-dialogue {
    animation-name: popInAnimIntroDialogue;
    animation-duration: 0.6s;
    animation-timing-function: cubic-bezier(0.17, 0.67, 0.55, 1.35);
    animation-fill-mode: none;
  }
`;var nh=class{constructor(t){this.config=t}};var _a=class extends Error{constructor(n,d,r){super(r);this.name="ApiError",this.url=d.url,this.status=d.status,this.statusText=d.statusText,this.body=d.body,this.request=n}};var mc=class extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}},En,Tn,rn,Dr,Ls,qa,Fr,rh=class{constructor(t){lr(this,En,void 0);lr(this,Tn,void 0);lr(this,rn,void 0);lr(this,Dr,void 0);lr(this,Ls,void 0);lr(this,qa,void 0);lr(this,Fr,void 0);Gi(this,En,!1),Gi(this,Tn,!1),Gi(this,rn,!1),Gi(this,Dr,[]),Gi(this,Ls,new Promise((n,d)=>{Gi(this,qa,n),Gi(this,Fr,d);let r=u=>{jt(this,En)||jt(this,Tn)||jt(this,rn)||(Gi(this,En,!0),jt(this,qa)&&jt(this,qa).call(this,u))},m=u=>{jt(this,En)||jt(this,Tn)||jt(this,rn)||(Gi(this,Tn,!0),jt(this,Fr)&&jt(this,Fr).call(this,u))},e=u=>{jt(this,En)||jt(this,Tn)||jt(this,rn)||jt(this,Dr).push(u)};return Object.defineProperty(e,"isResolved",{get:()=>jt(this,En)}),Object.defineProperty(e,"isRejected",{get:()=>jt(this,Tn)}),Object.defineProperty(e,"isCancelled",{get:()=>jt(this,rn)}),t(r,m,e)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(t,n){return jt(this,Ls).then(t,n)}catch(t){return jt(this,Ls).catch(t)}finally(t){return jt(this,Ls).finally(t)}cancel(){if(!(jt(this,En)||jt(this,Tn)||jt(this,rn))){if(Gi(this,rn,!0),jt(this,Dr).length)try{for(let t of jt(this,Dr))t()}catch(t){console.warn("Cancellation threw an error",t);return}jt(this,Dr).length=0,jt(this,Fr)&&jt(this,Fr).call(this,new mc("Request aborted"))}}get isCancelled(){return jt(this,rn)}};En=new WeakMap,Tn=new WeakMap,rn=new WeakMap,Dr=new WeakMap,Ls=new WeakMap,qa=new WeakMap,Fr=new WeakMap;var mg=i=>i!=null,sh=i=>typeof i=="string",pg=i=>sh(i)&&i!=="",vg=i=>typeof i=="object"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.arrayBuffer=="function"&&typeof i.constructor=="function"&&typeof i.constructor.name=="string"&&/^(Blob|File)$/.test(i.constructor.name)&&/^(Blob|File)$/.test(i[Symbol.toStringTag]),Rb=i=>i instanceof FormData,LD=i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}},OD=i=>{let t=[],n=(r,m)=>{t.push(`${encodeURIComponent(r)}=${encodeURIComponent(String(m))}`)},d=(r,m)=>{mg(m)&&(Array.isArray(m)?m.forEach(e=>{d(r,e)}):typeof m=="object"?Object.entries(m).forEach(([e,u])=>{d(`${r}[${e}]`,u)}):n(r,m))};return Object.entries(i).forEach(([r,m])=>{d(r,m)}),t.length>0?`?${t.join("&")}`:""},DD=(i,t)=>{let n=i.ENCODE_PATH||encodeURI,d=t.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(m,e)=>{var u;return(u=t.path)!=null&&u.hasOwnProperty(e)?n(String(t.path[e])):m}),r=`${i.BASE}${d}`;return t.query?`${r}${OD(t.query)}`:r},FD=i=>{if(i.formData){let t=new FormData,n=(d,r)=>{sh(r)||vg(r)?t.append(d,r):t.append(d,JSON.stringify(r))};return Object.entries(i.formData).filter(([d,r])=>mg(r)).forEach(([d,r])=>{Array.isArray(r)?r.forEach(m=>n(d,m)):n(d,r)}),t}},vc=async(i,t)=>typeof t=="function"?t(i):t,BD=async(i,t)=>{let[n,d,r,m]=await Promise.all([vc(t,i.TOKEN),vc(t,i.USERNAME),vc(t,i.PASSWORD),vc(t,i.HEADERS)]),e=Object.entries({Accept:"application/json",...m,...t.headers}).filter(([u,g])=>mg(g)).reduce((u,[g,c])=>({...u,[g]:String(c)}),{});if(pg(n)&&(e.Authorization=`Bearer ${n}`),pg(d)&&pg(r)){let u=LD(`${d}:${r}`);e.Authorization=`Basic ${u}`}return t.body&&(t.mediaType?e["Content-Type"]=t.mediaType:vg(t.body)?e["Content-Type"]=t.body.type||"application/octet-stream":sh(t.body)?e["Content-Type"]="text/plain":Rb(t.body)||(e["Content-Type"]="application/json")),new Headers(e)},ND=i=>{var t;if(i.body!==void 0)return(t=i.mediaType)!=null&&t.includes("/json")?JSON.stringify(i.body):sh(i.body)||vg(i.body)||Rb(i.body)?i.body:JSON.stringify(i.body)},kD=async(i,t,n,d,r,m,e)=>{let u=new AbortController,g={headers:m,body:d??r,method:t.method,signal:u.signal};return i.WITH_CREDENTIALS&&(g.credentials=i.CREDENTIALS),e(()=>u.abort()),await fetch(n,g)},VD=(i,t)=>{if(t){let n=i.headers.get(t);if(sh(n))return n}},GD=async i=>{if(i.status!==204)try{let t=i.headers.get("Content-Type");if(t)return["application/json","application/problem+json"].some(r=>t.toLowerCase().startsWith(r))?await i.json():await i.text()}catch(t){console.error(t)}},UD=(i,t)=>{let d={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...i.errors}[t.status];if(d)throw new _a(i,t,d);if(!t.ok){let r=t.status??"unknown",m=t.statusText??"unknown",e=(()=>{try{return JSON.stringify(t.body,null,2)}catch{return}})();throw new _a(i,t,`Generic Error: status: ${r}; status text: ${m}; body: ${e}`)}},Mb=(i,t)=>new rh(async(n,d,r)=>{try{let m=DD(i,t),e=FD(t),u=ND(t),g=await BD(i,t);if(!r.isCancelled){let c=await kD(i,t,m,u,e,g,r),s=await GD(c),o=VD(c,t.responseHeader),a={url:m,ok:c.ok,status:c.status,statusText:c.statusText,body:o??s};UD(t,a),n(a.body)}}catch(m){d(m)}});var gc=class extends nh{constructor(t){super(t)}request(t){return Mb(this.config,t)}};var ah=class{constructor(t){this.httpRequest=t}getCurrentUser(){return this.httpRequest.request({method:"GET",url:"/resources/user",errors:{400:"One or more validation errors have occurred.",404:"No UserDataResponse could be found with the provided parameters.",500:"Server Error"}})}getUserGameData(t){return this.httpRequest.request({method:"GET",url:"/resources/game/{slug}/game-data",path:{slug:t},errors:{400:"One or more validation errors have occurred.",404:"No GameDataResponse could be found with the provided parameters.",500:"Server Error"}})}saveUserGameData(t,n){return this.httpRequest.request({method:"POST",url:"/resources/game/{slug}/game-data",path:{slug:t},body:n,mediaType:"application/json",errors:{400:"One or more validation errors have occurred.",500:"Server Error"}})}getUserHighScore(t){return this.httpRequest.request({method:"GET",url:"/resources/game/{slug}/my-high-score",path:{slug:t},errors:{400:"One or more validation errors have occurred.",404:"No UserHighScoreResponse could be found with the provided parameters.",500:"Server Error"}})}};var oh=class{constructor(t,n=gc){this.request=new n({BASE:(t==null?void 0:t.BASE)??"",VERSION:(t==null?void 0:t.VERSION)??"1.0.6",WITH_CREDENTIALS:(t==null?void 0:t.WITH_CREDENTIALS)??!1,CREDENTIALS:(t==null?void 0:t.CREDENTIALS)??"include",TOKEN:t==null?void 0:t.TOKEN,USERNAME:t==null?void 0:t.USERNAME,PASSWORD:t==null?void 0:t.PASSWORD,HEADERS:t==null?void 0:t.HEADERS,ENCODE_PATH:t==null?void 0:t.ENCODE_PATH}),this.gameData=new ah(this.request)}};var ch=Le(Fb(),1),Bb=i=>{let t=ch.default.hash.sha256.hash(i);return ch.default.codec.hex.fromBits(t)},Nb="CB6W7R2envJfkXW4NEjT",kb=i=>ch.default.encrypt(Nb,i).toString(),Vb=i=>ch.default.decrypt(Nb,i);var Ec="agec-high-school-2024",zD=async(i,t,n)=>{let d=await Bb(`${t}${i}${n}gf024mf239fj092jmff916nf1g`);return{score:i,data:t,completed:n,hash:d}},fh=class{constructor(t){this.getUser=async()=>{let t=await this.client.gameData.getCurrentUser();return{displayName:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.firstName?t.firstName:t.lastName?t.lastName:null,userId:t.userId,email:t.email}};this.getUserHighScore=async()=>(await this.client.gameData.getUserHighScore(Ec)).score;this.loadGame=async()=>{let t=await this.client.gameData.getUserGameData(Ec);return{score:t.score,data:JSON.parse(t.data),completed:t.completed}};this.saveGame=async t=>{let n=await zD(t.score,JSON.stringify(t.data),t.completed);await this.client.gameData.saveUserGameData(Ec,n)};this.loginURL=()=>`${window.location.origin}/login`;this.leaderBoardURL=()=>`${window.location.origin}/leaderboard?gameSlug=${Ec}`;this.client=new oh({BASE:t})}};var HD=Et(null),WD=Et(null),$D=Et(null),XD=Et("none"),se={highScore:HD,local:WD,cloud:$D,cloudRequestState:XD},Os=async()=>{try{se.highScore.value=await Pi.getUserHighScore()}catch(i){if(Dt("getUserHighScore failed: "+i.toString()),zb(i)===404){te(`Failed to get user high score: ${i.toString()}`);return}ze(i)}},Tc="game_save",Gb=i=>i!=null&&i.timestamp?new Date(Date.parse(i.timestamp)):null,Ub=i=>i?!i.game||i.game.completed==null||i.game.score==null?(ze("[save-state] createGameSave was passed an invalid data object",{data:i}),null):{score:i.game.score,completed:i.game.completed,data:i}:(ze("[save-state] createGameSave was passed a null data object",{data:i}),null),xg=class{constructor(){this.save=async t=>{t.timestamp=new Date(Date.now()).toISOString(),localStorage.setItem(Tc,kb(JSON.stringify(t))),this.refreshLocalSave();try{let n=Ub(t);await Pi.saveGame(n),se.cloud.value=n,se.cloudRequestState.value="successful",Os()}catch(n){te(`Failed to save game in the cloud: ${n.toString()}`)}finally{this.refreshCloudSave()}};this.cloudSave=()=>se.cloud.value;this.localSave=()=>se.local.value;this.onCloudSaveSubmission=t=>{var n;t.completed&&localStorage.getItem(Tc)&&(localStorage.removeItem(Tc),Ib(t.score,((n=t.data.game.financialReportModel)==null?void 0:n.totalProfit)??null)),this.refreshLocalSave()};this.localSaveTimeStamp=()=>{var t;return Gb((t=this.localSave())==null?void 0:t.data)};this.refreshLocalSave=async()=>{let t=localStorage.getItem(Tc);if(t===null){se.local.value=null;return}try{se.local.value=Ub(JSON.parse(Vb(t)))}catch{ze("Failed to load local save file"),se.local.value=null}};this.cloudSaveRequestState=()=>se.cloudRequestState.value;this.cloudSaveTimeStamp=()=>{var t;return Gb((t=this.cloudSave())==null?void 0:t.data)};this.refreshCloudSave=async()=>{se.cloudRequestState.value="loading";try{let t=await Pi.loadGame();se.cloud.value=t,se.cloudRequestState.value=t?"successful":"missing"}catch(t){te(`Failed to load the cloud save: ${t.toString()}`),se.cloud.value=null,se.cloudRequestState.value=zb(t)===404?"missing":"failed"}}}},zb=i=>Object.prototype.hasOwnProperty.call(i,"status")?i.status:void 0,ve=new xg;var Sg=class{constructor(){this.getUser=async()=>{Ci.getUser.start();try{let t=await this.api.getUser();return Ci.getUser.success(t),t}catch(t){throw Dt("getUser failed: "+t.toString()),Hb(t)===401&&(te("[api - getUser] user is unauthenticated - logout user"),Xn()),Ci.getUser.failed(t.toString()),t}};this.getUserHighScore=async()=>{Ci.getUserHighScore.start();try{let t=await this.api.getUserHighScore();return Ci.getUserHighScore.success(t),t}catch(t){throw Ci.getUserHighScore.failed(t.toString()),t}};this.loadGame=async()=>{Ci.loadGame.start();try{let t=await this.api.loadGame();return Ci.loadGame.success(t),t}catch(t){throw Dt(`loadGame failed: ${t.toString()}`),Ci.loadGame.failed(t.toString()),t}};this.saveGame=async t=>{Ci.saveGame.start();try{await this.api.saveGame(t),Ci.saveGame.success(),ve.onCloudSaveSubmission(t)}catch(n){throw Dt(`saveGame failed: ${n.toString()}`),Hb(n)===401&&(Xn(),ze("[api - saveGame] user is unauthenticated")),Ci.saveGame.failed(n.toString()),n}};this.loginURL=()=>this.api.loginURL();this.leaderBoardURL=()=>this.api.leaderBoardURL();!1?(Dt("Using Local API"),this.api=new fh("http://localhost:8080")):!1?(Dt("Using Firebase (development) API"),this.api=new Fi):this.api=new fh(window.location.origin)}},Hb=i=>Object.prototype.hasOwnProperty.call(i,"status")?i.status:void 0,Pi=new Sg;var Cc=()=>{!1||!1?alert("Redirect to leaderboard"):window.location.href=Pi.leaderBoardURL()},eo=()=>{!1||!1?alert("Redirect to login"):window.location.href=Pi.loginURL()};var Yn=class extends Tt(yt){constructor(){super(...arguments);this.placeholderProfileName="Guest";this.closeMenu=()=>{this.displayMenu=!1,Za(this.displayMenu)};this.toggleDisplayMenu=()=>{this.displayMenu=!this.displayMenu,Za(this.displayMenu)};this.onHome=()=>{pt.screen.value==="Game"&&(fb(this.game.getModel().getPayday().getPaydayCount(),dc()),this.game.exitGame(),Je()),ie("Main Menu")};this.onSignOut=()=>{var n,d;if(!1){Fi.signOut();return}if(((n=Or.userRequest.value)==null?void 0:n.status)!==2||!((d=Or.userRequest.value)!=null&&d.data)||!_T()){ie("Logout Warning Screen");return}Xn(),eo()}}connectedCallback(){super.connectedCallback(),pt.screen.subscribe(this.closeMenu)}disconnectedCallback(){var n;super.disconnectedCallback(),(n=this.unsubscribeFromSignal)==null||n.call(this)}render(){return q`
      ${Bt(this.displayMenu&&this.game.active(),()=>q`<div class="menu-overlay-background"></div>`)}
      ${Bt(this.displayMenu,()=>{var n,d;return q`
          <div class="menu-background border-normal">
            <div class="menu-header">
              <div class="menu-avatar-container">
                <img
                  class="menu-avatar"
                  src=${st.Menu_Avatar}
                  draggable="false"
                />
              </div>
              <div class="menu-username">
                ${((n=pt.user.value)==null?void 0:n.displayName)||((d=pt.user.value)==null?void 0:d.email)||this.placeholderProfileName}
              </div>
              <button @click=${this.toggleDisplayMenu} class="menu-close-btn">
                <img src=${st.Cross_Active} draggable="false" />
              </button>
            </div>
            <div class="menu-content-container">
              ${Bt(pt.screen.value!=="Main Menu",()=>q`<div
                    class="sub-menu-btn-container no-highlight"
                    @click=${this.onHome}
                  >
                    <app-button
                      class="popIn"
                      ?hamburgerMenu=${!0}
                      imgURL=${st.Menu_Home}
                    ></app-button>
                    <div class="sub-menu-btn-text">
                      ${tt("HamburgerMenu_Home")}
                    </div>
                  </div>`)}
              <div
                class="sub-menu-btn-container no-highlight"
                @click=${bS}
              >
                <app-button
                  class="popIn"
                  ?hamburgerMenu=${!0}
                  imgURL=${pt.isMuted.value?st.Menu_Mute:st.Menu_Unmute}
                >
                </app-button>
                <div class="sub-menu-btn-text">
                  ${pt.isMuted.value?tt("HamburgerMenu_Unmute"):tt("HamburgerMenu_Mute")}
                </div>
              </div>
              <div
                class="sub-menu-btn-container no-highlight"
                @click=${this.onSignOut}
              >
                <app-button
                  class="popIn"
                  ?hamburgerMenu=${!0}
                  imgURL=${st.Menu_Logout}
                ></app-button>
                <div class="sub-menu-btn-text">
                  ${tt("HamburgerMenu_Logout")}
                </div>
              </div>
              ${Bt(window.installPrompt,()=>q`<div
                    class="sub-menu-btn-container no-highlight"
                    @click=${uc}
                  >
                    <app-button
                      class="popIn"
                      ?hamburgerMenu=${!0}
                      imgURL=${st.Menu_Install}
                    ></app-button>
                    <div class="sub-menu-btn-text">
                      ${tt("HamburgerMenu_InstallApp")}
                    </div>
                  </div>`)}
              <div class="build-number">
                ${"v1.0.2"}${!0?"":" PROD"}
              </div>
            </div>
          </div>
        `},()=>q`
          <app-button
            ?hamburgerMenu=${!0}
            class="menu-button-events"
            ?disabled=${this.disabled}
            @click=${this.toggleDisplayMenu}
            imgURL=${st.Menu_Active}
          >
          </app-button>
        `)}
    `}};Yn.styles=[Qt,je,Kt,at`
      /*Hamburger menu button */
      .menu-button-events {
        touch-action: auto;
        pointer-events: auto;
      }

      app-button {
        width: 44px;
        height: 44px;
      }

      /*Hamburger menu content */
      .menu-background {
        position: absolute;
        top: 8px;
        left: 8px;
        min-width: 179px;

        display: flex;
        flex-direction: column;
        background: var(--white);
        touch-action: auto;
        pointer-events: auto;
      }

      .menu-header {
        display: flex;
        flex-direction: row;
        background: var(--primary);
        height: 36px;

        place-items: center;
      }

      .menu-avatar-container {
        width: 20px;
        height: 20px;
        flex-grow: 0;
        margin: 0 10px;
      }

      .menu-avatar {
        width: 100%;
        height: 100%;
      }

      .menu-username {
        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 10px;
        font-style: normal;
        font-weight: 500;

        flex-grow: 1;
      }

      .menu-close-btn {
        width: 20px;
        height: 20px;
        flex-grow: 0;
        padding: 0;
        margin: 0 13px;
      }

      .menu-content-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        gap: 8px;
        margin: 14px;
      }

      .sub-menu-btn-container {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: start;
        width: 136px;
        height: 48px;
        gap: 10px;
        cursor: pointer;
      }

      .sub-menu-btn-text {
        margin-left: 10px;
        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 12px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px;
      }

      .build-number {
        position: absolute;
        left: 50%;
        bottom: 0px;
        transform: translate(-50%, 50%);
        box-sizing: border-box;
        padding: 2px 12px;
        border-radius: 4px;
        background-color: var(--primary-navy);
        width: max-content;
        text-align: center;
        color: var(--primary-white);
        font-family: Ubuntu;
        font-size: 8px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
      }

      .menu-overlay-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--semi-translucent-bg);
      }

      .no-highlight {
        -webkit-tap-highlight-color: transparent;
      }
    `],et([It({type:String})],Yn.prototype,"placeholderProfileName",2),et([qt()],Yn.prototype,"displayMenu",2),et([It({type:Boolean})],Yn.prototype,"disabled",2),et([Mt({context:Rt})],Yn.prototype,"game",2),Yn=et([lt("hamburger-menu")],Yn);var jD=i=>{class t extends i{constructor(...r){super(r);this.language="";this.languageLoaded=()=>this.language!=="";this.unsubscribe=pe(()=>{this.language=pt.language.value})}disconnectedCallback(){var r;super.disconnectedCallback(),(r=this.unsubscribe)==null||r.call(this)}}return et([qt()],t.prototype,"language",2),t},Ct=jD(yt);var Ds=class extends Tt(Ct){constructor(){super(...arguments);this.slide=0;this.leftPagerBtnClick=()=>{this.slide--,this.slide<0&&(this.slide=4),xt("Swipe")};this.rightPagerBtnClick=()=>{this.slide++,this.slide>4&&(this.slide=0),xt("Swipe")};this.setBusinessType=n=>{this.game.setBusinessType(n),this.nextIntroPage()};this.nextIntroPage=()=>{this.dispatchEvent(new Event("continue",{bubbles:!0,composed:!0}))};this.renderSlideBreadcrumb=n=>q`
      <div
        class="breadcrumb-div"
        style="background-color: ${n?"var(--primary-navy)":"var(--primary)"};"
      ></div>
    `;this.renderSlideBreadcrumbs=()=>{let n=[];for(let d=0;d<5;d++)n.push(this.renderSlideBreadcrumb(d===this.slide));return n}}connectedCallback(){super.connectedCallback()}render(){let n,d,r,m;switch(this.slide){case 0:n="coffeeShop-pill-color",d="BusinessType_CoffeeShop",r=fi.ChooseShopCategory_Coffee,m=()=>this.setBusinessType("coffeeShop");break;case 1:n="fashionShop-pill-color",d="BusinessType_Fashion",r=fi.ChooseShopCategory_Clothing,m=()=>this.setBusinessType("clothing");break;case 2:n="stationeryShop-pill-color",d="BusinessType_Stationery",r=fi.ChooseShopCategory_Stationery,m=()=>this.setBusinessType("stationary");break;case 3:n="techShop-pill-color",d="BusinessType_Technology",r=fi.ChooseShopCategory_Technology,m=()=>this.setBusinessType("technology");break;case 4:n="toiletryShop-pill-color",d="BusinessType_HairAndBeauty",r=fi.ChooseShopCategory_Toiletries,m=()=>this.setBusinessType("toiletries");break;default:return At}return q`
      <div class="content-background popIn">
        <div class="content-header">
          <div class="content-header-text">
            ${tt("BusinessType_Choice")}
          </div>
        </div>
        <div class="content-container">
          <div class="shop-type-pill-container">
            <div class="shop-type-pill ${n}">
              <div class="shop-type-pill-text">${tt(d)}</div>
            </div>
          </div>
          <div class="shop-type-img-and-pager-buttons-container">
            <button class="pager-btn" @click=${this.leftPagerBtnClick}>
              <img
                src=${st.Cheveron_Left_Active}
                class="chevron"
                draggable="false"
              />
            </button>
            <div class="shop-type-img">
              <img src=${r} draggable="false" />
            </div>
            <button class="pager-btn" @click=${this.rightPagerBtnClick}>
              <img
                src=${st.Cheveron_Right_Active}
                class="chevron"
                draggable="false"
              />
            </button>
          </div>
          <div class="breadcrumb-container">
            ${this.renderSlideBreadcrumbs()}
          </div>
        </div>
        <div class="select-btn-container">
          <app-button
            class="popIn ui-button"
            text=${tt("BusinessType_Button_Select")}
            @click=${m}
          ></app-button>
        </div>
      </div>
    `}};Ds.styles=[Qt,Kt,at`
      :host {
        width: 100%;
        height: 100%;
        background-color: white;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .content-header {
        display: flex;
        flex-direction: column;
        background: var(--primary);
        width: 100%;
        height: 36px;
        flex-grow: 0;
        @media (min-width: 1000px) {
          height: 54px;
        }
      }

      .content-header-text {
        color: var(--primary-navy);
        text-align: center;
        font-family: Ubuntu;
        font-size: 20px;
        font-weight: 700;
        margin: 7px 0;
        @media (min-width: 1000px) {
          font-size: 30px;
        }
      }

      .content-background {
        display: flex;
        position: relative;
        flex-direction: column;
        background: var(--white);
        width: 408px;
        height: 266px;
        border: 3px solid var(--primary-navy);
        border-radius: 4px;
        @media (min-width: 1000px) {
          width: 618px;
          height: 399px;
        }

        @media (max-height: 320px) and (max-width: 999px) {
          height: 192px;
        }
      }

      .content-container {
        width: 100%;
        flex-grow: 1;
      }

      .shop-type-pill-container {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .shop-type-pill {
        width: 136px;
        height: 16px;
        padding: 4px 10px;
        border-radius: 12px;
        margin-top: 8px;
        @media (min-width: 1000px) {
          width: 204px;
          height: 24px;
          padding: 6px 15px;
          border-radius: 18px;
          margin-top: 12px;
        }
      }

      .coffeeShop-pill-color {
        background: var(--coffeeShopPill);
      }
      .fashionShop-pill-color {
        background: var(--fashionShopPill);
      }
      .stationeryShop-pill-color {
        background: var(--stationeryShopPill);
      }
      .techShop-pill-color {
        background: var(--techShopPill);
      }
      .toiletryShop-pill-color {
        background: var(--toiletryShopPill);
      }

      .shop-type-pill-text {
        color: var(--primary-navy);
        text-align: center;
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
        @media (min-width: 1000px) {
          font-size: 21px;
        }
      }

      .shop-type-img-and-pager-buttons-container {
        height: 144px;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        margin-top: 8px;
        gap: 16px;
        @media (min-width: 1000px) {
          height: 216px;
          margin-top: 12px;
          gap: 24px;
        }

        @media (max-height: 320px) and (max-width: 999px) {
          height: 72px;
        }
      }

      .breadcrumb-container {
        justify-content: center;
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 6px;
        @media (min-width: 1000px) {
          gap: 12px;
          margin-top: 9px;
        }
      }

      .breadcrumb-div {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        @media (min-width: 1000px) {
          width: 12px;
          height: 12px;
        }
      }

      .select-btn-container {
        display: flex;
        position: absolute;
        left: 50%;
        transform: translate(-50%, 50%);
        bottom: 0px;
      }

      .pager-btn {
        display: grid;
        place-content: center;
        width: 40px;
        height: 40px;
        border-radius: 59px;
        border: 2px solid var(--primary);
        background: var(--primary-highlight);
        outline: none;
        -webkit-tap-highlight-color: transparent;
      }

      .chevron {
        width: 20px;
        height: 20px;
      }

      .shop-type-img {
        width: 144px;
        height: 144px;
        margin-top: 8px;
        flex-shrink: 0;
        display: flex;
        justify-content: center;
        place-items: center;
        @media (min-width: 1000px) {
          height: 216px;
          width: 216px;
          margin-top: 12px;
        }

        @media (max-height: 320px) and (max-width: 999px) {
          height: 72px;
        }
      }
      .shop-type-img > img {
        max-width: 100%;
        max-height: 100%;
      }
    `],et([Mt({context:Rt})],Ds.prototype,"game",2),et([qt()],Ds.prototype,"slide",2),Ds=et([lt("business-selector-carousel")],Ds);var Pc,KD=new Uint8Array(16);function Eg(){if(!Pc&&(Pc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Pc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pc(KD)}var We=[];for(let i=0;i<256;++i)We.push((i+256).toString(16).slice(1));function $b(i,t=0){return We[i[t+0]]+We[i[t+1]]+We[i[t+2]]+We[i[t+3]]+"-"+We[i[t+4]]+We[i[t+5]]+"-"+We[i[t+6]]+We[i[t+7]]+"-"+We[i[t+8]]+We[i[t+9]]+"-"+We[i[t+10]]+We[i[t+11]]+We[i[t+12]]+We[i[t+13]]+We[i[t+14]]+We[i[t+15]]}var JD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tg={randomUUID:JD};function ZD(i,t,n){if(Tg.randomUUID&&!t&&!i)return Tg.randomUUID();i=i||{};let d=i.random||(i.rng||Eg)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=d[r];return t}return $b(d)}var jn=ZD;var Nt=class{constructor(t,n){this.x=t,this.y=n}add(t){return new Nt(this.x+t.x,this.y+t.y)}subtract(t){return new Nt(this.x-t.x,this.y-t.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){let t=this.length();return new Nt(this.x/t,this.y/t)}scale(t){return new Nt(this.x*t,this.y*t)}};var bg=class{constructor(t,n,d,r,m){this.toJSON=()=>({id:this.id,needKind:this.need.kind,needPurchasePrice:this.need.purchasePrice,state:this.state,walkAwayReason:this.walkAwayReason,till:this.till,x:this.x,y:this.y,speed:this.speed,yPath:this.yPath});this.walkToTill=t=>this.state!=="browsing"&&this.state!=="walking_to_till"?!1:(this.state="walking_to_till",this.till=t,!0);this.waitAtTill=()=>this.state!=="walking_to_till"&&this.state!=="waiting_at_till"?(Dt("Only a customer that walked to a till can start waiting"),!1):this.till?(Rl(`Customer [${this.id}] waiting at Till [${this.till}]`),this.state="waiting_at_till",!0):(Dt("Customer doesn't have a till set yet"),!1);this.walkAway=t=>{Rl(`Customer [${this.id}] is walking away [${t}]`),this.state="walking_away",this.walkAwayReason=t,this.till=""};this.setPosition=(t,n)=>{this.x=t,this.y=n};this.getX=()=>this.x;this.getY=()=>this.y;this.getYPath=()=>this.yPath;this.getState=()=>this.state;this.getWalkAwayReason=()=>this.walkAwayReason;this.getTill=()=>this.till;this.id=(m==null?void 0:m.id)??jn(),this.speed=(m==null?void 0:m.speed)??100,this.need=r,this.state=(m==null?void 0:m.state)??"browsing",this.walkAwayReason=(m==null?void 0:m.walkAwayReason)??void 0,this.till=(m==null?void 0:m.till)??"",this.x=t,this.y=n,this.yPath=d}move(t,n){let d=new Nt(this.getX(),this.getY()),r=t.subtract(d),m=this.speed*(n/1e3);if(r.length()<=m)return this.setPosition(t.x,t.y),!0;let e=r.normalize().scale(m),u=d.add(e);return this.setPosition(u.x,u.y),!1}moveTo(t,n,d){let r=t.x===this.getX(),m=t.y===this.getY();return d?r?m=this.move(new Nt(this.getX(),t.y),n):r=this.move(new Nt(t.x,this.getY()),n):m?r=this.move(new Nt(t.x,this.getY()),n):m=this.move(new Nt(this.getX(),t.y),n),r&&m}},Fs=bg;Fs.fromJSON=t=>new bg(t.x,t.y,t.yPath,{kind:new Oi(t.needKind.group,t.needKind.index),purchasePrice:t.needPurchasePrice},{id:t.id,state:t.state,walkAwayReason:t.walkAwayReason,till:t.till,speed:t.speed});var Cg={orderTakingSpeed:1e3,orderFetchingSpeed:1e3,orderFinishingSpeed:1e3},Pg=class{constructor(t,n,d,r,m){this.toJSON=()=>({id:this.id,index:this.index,speed:this.speed,state:this.state,till:this.till,x:this.position.x,y:this.position.y,order:this.order,progress:this.progress,progressRequired:this.progressRequired,cost:this.cost,idle:this.idle,idleTime:this.idleTime});this.setPosition=(t,n)=>{this.position=new Nt(t,n)};this.getPosition=()=>this.position;this.moveTo=(t,n)=>{let d=t.x===this.getPosition().x,r=t.y===this.getPosition().y;return r?d=this.move(new Nt(t.x,this.getPosition().y),n):r=this.move(new Nt(this.getPosition().x,t.y),n),d&&r};this.waitAtTill=()=>this.state!="walking-to-till"&&this.state!="selling-product"?!1:(this.order=void 0,this.progressRequired=void 0,this.state="waiting-at-till",!0);this.takeOrder=t=>this.state!="waiting-at-till"||this.idle?!1:(this.order=t,this.progress=0,this.progressRequired=Cg.orderTakingSpeed,this.state="taking-order",!0);this.makeProgress=t=>(this.progress+=t,this.progress>=this.progressRequired);this.getProgress=()=>Math.min(1,this.progress/this.progressRequired);this.walkToProduct=()=>this.state!="taking-order"?!1:(this.progressRequired=void 0,this.state="walking-to-product",!0);this.orderProduct=()=>this.order;this.takeProductOut=()=>this.state!="walking-to-product"?!1:(this.progress=0,this.progressRequired=Cg.orderFetchingSpeed,this.state="taking-out-product",!0);this.takeProductToTill=()=>this.state!="taking-out-product"?!1:(this.progressRequired=void 0,this.state="taking-product-to-till",!0);this.sellProduct=()=>this.state!="taking-product-to-till"?!1:(this.progress=0,this.progressRequired=Cg.orderFinishingSpeed,this.state="selling-product",!0);this.receivePayment=()=>{this.idle=!1,this.idleTime=0,this.waitAtTill()};this.setHiringCost=t=>{this.cost=t};this.getState=()=>this.state;this.getTill=()=>this.till;this.getCost=()=>this.cost;this.getOrder=()=>this.order;this.id=(m==null?void 0:m.id)??jn(),this.index=r,this.setPosition(t,n),this.till=d,this.speed=(m==null?void 0:m.speed)??500,this.state=(m==null?void 0:m.state)??"walking-to-till",this.order=(m==null?void 0:m.order)??void 0,this.progress=(m==null?void 0:m.progress)??0,this.progressRequired=(m==null?void 0:m.progressRequired)??void 0,this.cost=(m==null?void 0:m.cost)??0,this.idle=(m==null?void 0:m.idle)??!1,this.idleTime=(m==null?void 0:m.idleTime)??0}move(t,n){let d=new Nt(this.getPosition().x,this.getPosition().y),r=t.subtract(d),m=this.speed*(n/1e3);if(r.length()<=m)return this.setPosition(t.x,t.y),!0;let e=r.normalize().scale(m),u=d.add(e);return this.setPosition(u.x,u.y),!1}},Kn=Pg;Kn.fromJSON=t=>new Pg(t.x,t.y,t.till,t.index,{id:t.id,speed:t.speed,state:t.state,order:t.order,progress:t.progress,progressRequired:t.progressRequired,cost:t.cost,idle:t.idle,idleTime:t.idleTime});var wg=class{constructor(t,n,d){this.toJSON=()=>({id:this.id,customer:this.customerId,employee:this.employeeId,x:this.x,y:this.y});this.position=()=>new Nt(this.x,this.y);this.claim=t=>this.customerId!==void 0&&this.customerId!==t?!1:(this.customerId=t,!0);this.releaseClaim=()=>{this.customerId=void 0};this.claimedBy=()=>this.customerId;this.isAvailable=()=>this.claimedBy()===void 0&&this.isManned();this.man=t=>this.employeeId!==void 0?!1:(this.employeeId=t,!0);this.unman=()=>{this.employeeId=void 0};this.mannedBy=()=>this.employeeId;this.isManned=()=>this.mannedBy()!==void 0;this.id=(d==null?void 0:d.id)??jn(),this.customerId=d==null?void 0:d.claimedBy,this.employeeId=d==null?void 0:d.mannedBy,this.x=t,this.y=n}},io=wg;io.fromJSON=t=>new wg(t.x,t.y,{id:t.id,claimedBy:t.customer,mannedBy:t.employee});var Ht={Background:1,Customer:5,Till:1e3,HireEmployeeButton:1005,Employee:1015,ThoughtBubble:1030,Product:2020,AddProductButton:2025,CoinJuice:2070,CoinJuiceText:2071};var Xb=48,Yb=27,ne=50,Nr=.5,Kb=2,Jb=1,QD=Kb*Nr,_D=Jb*Nr,mi=13,Br=16,Ag=14,Zb=8,Qb=6,_b=7,qb=5,Bs={y:Br,w:2,h:1,image:"counter_empty.png",depth:Ht.Product,pickupOffsetX:0,pickupOffsetY:-1},jb={y:Ag,w:1,h:2,image:"counter_vertical.png",depth:Ht.Till},_t={width:Xb*ne,height:Yb*ne,tilesX:Xb,tilesY:Yb,tileSize:ne,roadTop:7*ne,roadBottom:10*ne,customerTopLane:8.5*ne,customerMidLane:9.5*ne,customerBottomLane:10.5*ne,tillPosition:[{x:22,y:mi},{x:24,y:mi},{x:19,y:mi},{x:27,y:mi},{x:16,y:mi},{x:30,y:mi},{x:13,y:mi}].map(i=>(i.x+=QD,i.y+=_D,i.x*=ne,i.y*=ne,i)),hireEmployeePosition:[{x:22,y:mi},{x:24,y:mi},{x:21,y:mi},{x:26,y:mi},{x:18,y:mi},{x:29,y:mi},{x:15,y:mi}].map(i=>(i.x+=Nr,i.y+=Nr,i.x*=ne,i.y*=ne,i)),tillSize:{w:Kb*ne,h:Jb*ne},products:[{...Bs,x:23},{...Bs,x:26},{...Bs,x:20},{...Bs,x:16},{...Bs,x:30},{...Bs,x:33},{...jb,x:36,pickupOffsetX:-1,pickupOffsetY:-.5},{...Bs,x:13},{...jb,x:11,pickupOffsetX:1,pickupOffsetY:-.5}].map(i=>(i.x+=i.w*Nr,i.y+=i.h*Nr,i.x*=ne,i.y*=ne,i.w*=ne,i.h*=ne,i.pickupOffsetX*=ne,i.pickupOffsetY*=ne,i)),launchProductPosition:[{x:22,y:Br,w:1,h:1},{x:25,y:Br,w:1,h:1},{x:22,y:Br,w:1,h:1},{x:19,y:Br,w:1,h:1},{x:28,y:Br,w:1,h:1},{x:32,y:Br,w:1,h:1},{x:35,y:Ag,w:1,h:1},{x:15,y:Br,w:1,h:1},{x:12,y:Ag,w:1,h:1}].map(i=>(i.x+=i.w*Nr,i.y+=i.h*Nr,i.x*=ne,i.y*=ne,i.w*=ne,i.h*=ne,i))};var Ig=class{constructor(t,n,d,r,m,e){this.toJSON=()=>({index:this.index,kind:this.kind,cost:this.cost,price:this.price,maxPrice:this.maxPrice,stock:this.stock.value,heldStock:this.heldStock.value,stockLimit:this.stockLimit,demand:this.demand});this.getChanceToFail=()=>{let t=this.kind.index===0?.5:.33;return Math.max(+((this.price-this.cost)/(this.maxPrice-this.cost)-t).toFixed(2),0)};this.index=t,this.kind=n,this.cost=d,this.price=(e==null?void 0:e.price)??d+1,this.maxPrice=r,this.stockLimit=m,this.stock=(e==null?void 0:e.stock)!=null?Et(e.stock):Et(m),this.heldStock=(e==null?void 0:e.heldStock)!=null?Et(e.heldStock):Et(0),this.availableStock=Cu(()=>this.stock.value+this.heldStock.value),this.demand=(e==null?void 0:e.demand)??0;let u=_t.products[t];this.position=new Nt(u.x,u.y),this.size=new Nt(u.w,u.h)}getMarketingCost(t,n){return t+Math.floor(n*this.demand)}},sn=Ig;sn.fromJSON=t=>new Ig(t.index,new Oi(t.kind.group,t.kind.index),t.cost,t.maxPrice,t.stockLimit,{price:t.price,demand:t.demand,stock:t.stock,heldStock:t.heldStock});var Ac={1:2,2:4,3:5,4:6,5:7},kr={1:1,2:3,3:4,4:5,5:9};var Rg=class{constructor(t,n){this.toJSON=()=>({id:this.id,level:this.level,range:this.attractionRange,tills:this.tills.map(t=>t.toJSON()),products:this.products.map(t=>t.toJSON()),businessType:this.businessType,nextProductCost:this.nextProductCost});this.levelUp=()=>this.getLevel()>=5?!1:(this.level++,Dt("[shop] - level up: "+this.level),!0);this.setBusinessType=t=>{this.businessType=t};this.addTill=(t,n,d)=>{let r=new io(t,n,{id:d});return this.tills.push(r),r};this.getTill=t=>this.tills.find(n=>n.id===t);this.nextProductMapData=()=>_t.products[this.getProducts().length];this.nextProductIndex=()=>this.getProducts().length;this.nextProductPosition=()=>{if(this.getProducts().length===kr[5])return;let t=this.nextProductMapData();return new Nt(t.x,t.y)};this.nextLaunchProduct=()=>{if(this.getProducts().length===kr[5])return;let t=_t.launchProductPosition[this.getProducts().length];return new Nt(t.x,t.y)};this.nextProductSize=()=>{if(this.getProducts().length===kr[5])return;let t=this.nextProductMapData();return new Nt(t.w,t.h)};this.nextHireEmployeePosition=()=>{if(this.getTills().length===Ac[5])return;let t=_t.hireEmployeePosition[this.getTills().length];return new Nt(t.x,t.y)};this.addProduct=(t,n,d,r)=>{if(this.hasLaunchedProduct(t)||this.getProducts().length===kr[5])return;let m=new sn(this.nextProductIndex(),t,n,d,r);return this.products.push(m),m};this.hasLaunchedProduct=t=>!!this.products.find(n=>n.kind.equals(t));this.hasProductInStock=t=>{var n;return((n=this.products.find(d=>d.kind.equals(t)))==null?void 0:n.stock.value)>0};this.getNextProductIndex=()=>{let t=kr[this.getLevel()],n=this.getProducts().length;return this.getLevel()===5&&n>=t?-1:n};this.getBusinessType=()=>this.businessType;this.getLevel=()=>this.level;this.getTills=()=>this.tills;this.getProducts=()=>this.products;this.product=t=>this.getProducts().find(n=>n.kind.equals(t));this.availableTills=()=>this.tills.filter(t=>t.isAvailable());this.id=(n==null?void 0:n.id)??jn(),this.attractionRange=t,this.level=(n==null?void 0:n.level)??1,this.tills=(n==null?void 0:n.tills)??[],this.products=(n==null?void 0:n.products)??[],this.nextProductCost=(n==null?void 0:n.nextProductCost)??void 0,this.businessType=(n==null?void 0:n.businessType)??"clothing"}},ro=Rg;ro.fromJSON=t=>new Rg(t.range,{id:t.id,level:t.level,tills:t.tills.map(io.fromJSON),products:t.products.map(sn.fromJSON),businessType:t.businessType,nextProductCost:t.nextProductCost});var Mg=class{constructor(t,n){this.getPaydayCounter=()=>this.paydayCounterMs;this.decreasePaydayCounter=t=>this.paydayCounterMs-=t;this.setPaydayCounter=t=>this.paydayCounterMs=t;this.incrementPayday=()=>this.paydayCount+=1;this.getPaydayCount=()=>this.paydayCount;this.toJSON=()=>({paydayCounterMs:this.paydayCounterMs,paydayCount:this.paydayCount});this.paydayCounterMs=t,this.paydayCount=n??0}},so=Mg;so.fromJSON=t=>new Mg(t.paydayCounterMs,t.paydayCount);var Lg=class{constructor(t){this.sellProduct=(t,n)=>{this.getProduct(n).income+=t,this.getProduct(n)["product_purchased"]++};this.loseProductSale=(t,n)=>{if(n==="exception")throw new Error("[financialReportModel] Lost a product sale due to an exception");this.getProduct(t)[n]++};this.getCustomerCount=(t,n=!0)=>{let d=this.getProduct(t);return d["product_not_available"]+d["product_purchased"]+d["product_too_expensive"]+d["till_not_available"]+(n?d.no_marketing:0)};this.getAllFailedSales=t=>{if(t==="exception")return;let n=0;return Object.values(this.productInfo).forEach(d=>n+=d[t]),Object.values(this.previousReports).forEach(d=>Object.values(d).forEach(r=>n+=r[t])),n};this.getTotalProductInfo=()=>{let t={kind:void 0,income:0,product_purchased:0,product_not_available:0,product_too_expensive:0,till_not_available:0,no_marketing:0};return Object.values(this.productInfo).forEach(n=>{t.product_purchased+=n.product_purchased,t.product_not_available+=n.product_not_available,t.product_too_expensive+=n.product_too_expensive,t.till_not_available+=n.till_not_available,t.no_marketing+=n.no_marketing}),t};this.getTotalProfit=()=>this.totalProfit;this.clearReportData=t=>{this.totalProfit+=this.profit,this.previousReports[t]={expenses:{stockCost:this.stockCost,marketing:this.marketing,salaries:this.salaries},income:{achievementsRevenue:this.achievementsRevenue},productInfo:this.productInfo},this.stockCost=0,this.marketing=0,this.salaries=0,this.achievementsRevenue=0,Object.values(this.productInfo).forEach(n=>{this.initializeProductInfo(n.kind)})};this.toJSON=()=>({stockValue:this.stockValue.value,achievementsValue:this.achievementsValue.value,stockCost:this.stockCost,marketing:this.marketing,salaries:this.salaries,achievementsRevenue:this.achievementsRevenue,productInfo:this.productInfo,previousReports:this.previousReports,totalProfit:this.totalProfit});this.stockValue=Et((t==null?void 0:t.stockValue)??0),this.achievementsValue=Et((t==null?void 0:t.achievementsValue)??0),this.stockCost=(t==null?void 0:t.stockCost)??0,this.marketing=(t==null?void 0:t.marketing)??0,this.salaries=(t==null?void 0:t.salaries)??0,this.achievementsRevenue=(t==null?void 0:t.achievementsRevenue)??0,this.productInfo=(t==null?void 0:t.productInfo)??{},this.previousReports=(t==null?void 0:t.previousReports)??{},this.totalProfit=(t==null?void 0:t.totalProfit)??0}initializeProductInfo(t){this.productInfo[t.key()]={kind:t,income:0,product_not_available:0,product_purchased:0,product_too_expensive:0,till_not_available:0,no_marketing:0}}getProduct(t){return this.productInfo[t.key()]||this.initializeProductInfo(t),this.productInfo[t.key()]}get expenses(){return this.stockCost+this.marketing+this.salaries}get salesIncome(){return Object.values(this.productInfo).reduce((t,n)=>t+n.income,0)}get income(){return this.salesIncome}get profit(){return this.income-this.expenses}},ao=Lg;ao.fromJSON=t=>{let n={},d={};return t.productInfo&&Object.entries(t.productInfo).forEach(([r,m])=>{n[r]={...m,kind:new Oi(m.kind.group,m.kind.index)}}),t.previousReports&&Object.entries(t.previousReports).forEach(([r,m])=>{let e={};Object.entries(m.productInfo).forEach(([u,g])=>{e[u]={...g,kind:new Oi(g.kind.group,g.kind.index)}}),d[+r]={...m,productInfo:e}}),new Lg({...t,productInfo:n,previousReports:d})};var Ic=class{constructor(t){this.setEventCompleted=t=>{this.completedEvents[t]=!0};this.isEventCompleted=t=>!!this.completedEvents[t];this.toJSON=()=>this.completedEvents;this.completedEvents=t??{}}},lo=Ic;lo.fromJSON=t=>Object.entries(t).find(([n,d])=>typeof n!="string"||typeof d!="boolean")?(te("[EventsModel.fromJSON] Passed object's type wasn't correct",{obj:t}),new Ic):new Ic(t);var bn=(f=>(f.ShopLevel="ShopLevel",f.Cash="Cash",f.BusinessValue="BusinessValue",f.Profit="Profit",f.Loss="Loss",f.Staff="Staff",f.ProductLaunch="ProductLaunch",f.LostSalePrice="LostSalePrice",f.LostSaleStock="LostSaleStock",f.LostSaleStaff="LostSaleStaff",f.LostSaleMarketing="LostSaleMarketing",f.StaffIdleTime="StaffIdleTime",f.Sales="Sales",f.CanLaunchBy="CanLaunchBy",f.CanHireBy="CanHireBy",f.Payday="Payday",f))(bn||{});var tC={customer:{spawnInterval:15,spawnIntervalDecrease:.2,speed:150},staff:{orderTakingSpeed:1,orderFetchingSpeed:1,orderFinishingSpeed:1,orderSpeedMultiplier:.4,speed:175,hiringCost:15,multiplierPerStaff:2},marketing:{cost:1,increasePerLevel:.5,maxDemand:50},products:[{category:"clothing",products:[{id:"product_clothing_0",name:"Caps",cost:1,maxCost:7,stockLimit:5,spawnRateMultiplier:.8},{id:"product_clothing_1",name:"Flip flops",cost:3,maxCost:25,stockLimit:3,spawnRateMultiplier:.9},{id:"product_clothing_2",name:"T-shirt",cost:8,maxCost:50,stockLimit:4,spawnRateMultiplier:2},{id:"product_clothing_3",name:"Strappy top",cost:10,maxCost:60,stockLimit:8,spawnRateMultiplier:1},{id:"product_clothing_4",name:"Hoodie",cost:50,maxCost:150,stockLimit:3,spawnRateMultiplier:4},{id:"product_clothing_5",name:"Jean",cost:100,maxCost:275,stockLimit:6,spawnRateMultiplier:2},{id:"product_clothing_6",name:"Boots",cost:180,maxCost:400,stockLimit:10,spawnRateMultiplier:1},{id:"product_clothing_7",name:"Sneakers",cost:2e3,maxCost:3e3,stockLimit:2,spawnRateMultiplier:4},{id:"product_clothing_8",name:"Street Puffer Jacket",cost:1500,maxCost:2800,stockLimit:6,spawnRateMultiplier:4}]},{category:"technology",products:[{id:"product_technology_0",name:"Phone cover",cost:1,maxCost:7,stockLimit:5,spawnRateMultiplier:.8},{id:"product_technology_1",name:"Earphones",cost:3,maxCost:25,stockLimit:3,spawnRateMultiplier:.9},{id:"product_technology_2",name:"Bluetooth speaker",cost:8,maxCost:50,stockLimit:4,spawnRateMultiplier:2},{id:"product_technology_3",name:"Ring light camera",cost:10,maxCost:60,stockLimit:8,spawnRateMultiplier:1},{id:"product_technology_4",name:"Smart watch",cost:50,maxCost:150,stockLimit:3,spawnRateMultiplier:4},{id:"product_technology_5",name:"Cellphone",cost:100,maxCost:275,stockLimit:6,spawnRateMultiplier:2},{id:"product_technology_6",name:"Camera",cost:180,maxCost:400,stockLimit:10,spawnRateMultiplier:1},{id:"product_technology_7",name:"Laptop",cost:2e3,maxCost:3e3,stockLimit:2,spawnRateMultiplier:4},{id:"product_technology_8",name:"Game Console",cost:1500,maxCost:2800,stockLimit:6,spawnRateMultiplier:4}]},{category:"coffeeShop",products:[{id:"product_coffeeShop_0",name:"Coffee",cost:1,maxCost:1000,stockLimit:2000,spawnRateMultiplier:.1},{id:"product_coffeeShop_1",name:"Pastry",cost:3,maxCost:25,stockLimit:3,spawnRateMultiplier:.9},{id:"product_coffeeShop_2",name:"Bubble Tea",cost:8,maxCost:50,stockLimit:4,spawnRateMultiplier:2},{id:"product_coffeeShop_3",name:"Sandwich",cost:10,maxCost:60,stockLimit:8,spawnRateMultiplier:1},{id:"product_coffeeShop_4",name:"Fancy Coffee (Starbucks)",cost:50,maxCost:150,stockLimit:3,spawnRateMultiplier:4},{id:"product_coffeeShop_5",name:"Full cake",cost:100,maxCost:275,stockLimit:6,spawnRateMultiplier:2},{id:"product_coffeeShop_6",name:"Cake slice",cost:180,maxCost:400,stockLimit:10,spawnRateMultiplier:1},{id:"product_coffeeShop_7",name:"Coffee Beans",cost:2e3,maxCost:3e3,stockLimit:2,spawnRateMultiplier:4},{id:"product_coffeeShop_8",name:"Coffee Machine",cost:1500,maxCost:2800,stockLimit:6,spawnRateMultiplier:4}]},{category:"stationary",products:[{id:"product_stationary_0",name:"Notebook",cost:1,maxCost:7,stockLimit:5,spawnRateMultiplier:.8},{id:"product_stationary_1",name:"Colourful pens",cost:3,maxCost:25,stockLimit:3,spawnRateMultiplier:.9},{id:"product_stationary_2",name:"Pencil case",cost:8,maxCost:50,stockLimit:4,spawnRateMultiplier:2},{id:"product_stationary_3",name:"(Tote?) Bag",cost:10,maxCost:60,stockLimit:8,spawnRateMultiplier:1},{id:"product_stationary_4",name:"Pencil holder",cost:50,maxCost:150,stockLimit:3,spawnRateMultiplier:4},{id:"product_stationary_5",name:"Desk calendar",cost:100,maxCost:275,stockLimit:6,spawnRateMultiplier:2},{id:"product_stationary_6",name:"Novel",cost:180,maxCost:400,stockLimit:10,spawnRateMultiplier:1},{id:"product_stationary_7",name:"Journal",cost:2e3,maxCost:3e3,stockLimit:2,spawnRateMultiplier:4},{id:"product_stationary_8",name:"Art Supplies Box Set",cost:1500,maxCost:2800,stockLimit:6,spawnRateMultiplier:4}]},{category:"toiletries",products:[{id:"product_toiletries_0",name:"Eyeshadow",cost:1,maxCost:7,stockLimit:5,spawnRateMultiplier:.8},{id:"product_toiletries_1",name:"Lipstick",cost:3,maxCost:25,stockLimit:3,spawnRateMultiplier:.9},{id:"product_toiletries_2",name:"Nail polish",cost:8,maxCost:50,stockLimit:4,spawnRateMultiplier:2},{id:"product_toiletries_3",name:"False Eyelashes",cost:10,maxCost:60,stockLimit:8,spawnRateMultiplier:1},{id:"product_toiletries_4",name:"Hair treatment",cost:50,maxCost:150,stockLimit:3,spawnRateMultiplier:4},{id:"product_toiletries_5",name:"Hair clip",cost:100,maxCost:275,stockLimit:6,spawnRateMultiplier:2},{id:"product_toiletries_6",name:"Face cream",cost:180,maxCost:400,stockLimit:10,spawnRateMultiplier:1},{id:"product_toiletries_7",name:"Fancy hair weave",cost:2e3,maxCost:3e3,stockLimit:2,spawnRateMultiplier:4},{id:"product_toiletries_8",name:"Serum",cost:1500,maxCost:2800,stockLimit:6,spawnRateMultiplier:4}]}],payday:{secondsPerPayday:136,paydayCount:12},events:[{id:"shop-2",trigger:{category:"ShopLevel",value:2},cash:0,businessValue:0},{id:"shop-3",trigger:{category:"ShopLevel",value:3},cash:0,businessValue:0},{id:"shop-4",trigger:{category:"ShopLevel",value:4},cash:0,businessValue:0},{id:"shop-5",trigger:{category:"ShopLevel",value:5},cash:0,businessValue:0},{id:"first-profit",trigger:{category:"Profit",value:3},cash:0,businessValue:0},{id:"first-loss",trigger:{category:"Loss",value:3},cash:0,businessValue:0},{id:"hired-1st-staff",trigger:{category:"Staff",value:2},cash:0,businessValue:0},{id:"hired-2nd-staff",trigger:{category:"Staff",value:3},cash:0,businessValue:0},{id:"hired-3rd-staff",trigger:{category:"Staff",value:4},cash:0,businessValue:0},{id:"hired-4th-staff",trigger:{category:"Staff",value:5},cash:0,businessValue:0},{id:"hired-5th-staff",trigger:{category:"Staff",value:6},cash:0,businessValue:0},{id:"hired-6th-staff",trigger:{category:"Staff",value:7},cash:0,businessValue:0},{id:"product-1-added",trigger:{category:"ProductLaunch",value:1},cash:0,businessValue:0},{id:"lost-sale-price",trigger:{category:"LostSalePrice",value:5},cash:0,businessValue:0},{id:"lost-sale-no-stock",trigger:{category:"LostSaleStock",value:4},cash:0,businessValue:0},{id:"lost-sale-no-staff",trigger:{category:"LostSaleStaff",value:4},cash:15,businessValue:0},{id:"lost-sale-no-marketing",trigger:{category:"LostSaleMarketing",value:100},cash:0,businessValue:0},{id:"lost-sale-price-n",trigger:{category:"LostSalePrice",value:0},cash:0,businessValue:0},{id:"lost-sale-no-stock-n",trigger:{category:"LostSaleStock",value:0},cash:0,businessValue:0},{id:"lost-sale-no-staff-n",trigger:{category:"LostSaleStaff",value:0},cash:0,businessValue:0},{id:"lost-sale-no-marketing-n",trigger:{category:"LostSaleMarketing",value:0},cash:0,businessValue:0},{id:"business-value-1",trigger:{category:"BusinessValue",value:500},businessValue:0,cash:0},{id:"business-value-2",trigger:{category:"BusinessValue",value:1250},cash:0,businessValue:100},{id:"business-value-3",trigger:{category:"BusinessValue",value:3e3},cash:0,businessValue:250},{id:"business-value-4",trigger:{category:"BusinessValue",value:9e3},cash:0,businessValue:0},{id:"business-value-5",trigger:{category:"BusinessValue",value:2e4},cash:0,businessValue:1e3},{id:"business-value-6",trigger:{category:"BusinessValue",value:0},cash:0,businessValue:0},{id:"cash-value",trigger:{category:"Cash",value:-5},cash:0,businessValue:0},{id:"salary-first-due-1-second",trigger:{category:"StaffIdleTime",value:5},cash:15,businessValue:0},{id:"salary-first-due-30-seconds",trigger:{category:"StaffIdleTime",value:30},cash:10,businessValue:0},{id:"number-of-sales-equals-1",trigger:{category:"Sales",value:1},cash:0,businessValue:0},{id:"number-of-sales-equals-n",trigger:{category:"Sales",value:0},cash:0,businessValue:0},{id:"cash-cost-of-next-product-x",trigger:{category:"CanLaunchBy",value:10},cash:0,businessValue:0},{id:"cash-cost-of-next-staff-x",trigger:{category:"CanHireBy",value:55},cash:0,businessValue:0},{id:"payday-1",trigger:{category:"Payday",value:1},cash:0,businessValue:0},{id:"payday-2",trigger:{category:"Payday",value:2},cash:0,businessValue:0},{id:"payday-3",trigger:{category:"Payday",value:0},cash:0,businessValue:0},{id:"payday-4",trigger:{category:"Payday",value:0},cash:0,businessValue:0},{id:"payday-5",trigger:{category:"Payday",value:0},cash:0,businessValue:0},{id:"payday-6",trigger:{category:"Payday",value:6},cash:0,businessValue:0},{id:"payday-7",trigger:{category:"Payday",value:0},cash:0,businessValue:0},{id:"payday-8",trigger:{category:"Payday",value:0},cash:0,businessValue:0},{id:"payday-9",trigger:{category:"Payday",value:0},cash:0,businessValue:0},{id:"payday-10",trigger:{category:"Payday",value:0},cash:0,businessValue:0},{id:"payday-11",trigger:{category:"Payday",value:11},cash:0,businessValue:0}]};var ge=class{constructor(t,n){this.updateEventParams=t=>{this.events=new Map,t.forEach(n=>{let d=bn[n.trigger.category];this.events.has(d)||this.events.set(d,[]),this.events.get(d).push(n)})};this.completeEvent=(t,n)=>{switch(cc(n),t.events.setEventCompleted(n.id),wb(n.id,n.cash,n.businessValue,t.getPayday().getPaydayCount(),dc()),n.id){case"first-profit":yb(t.getFinancialReportModel().profit,t.getPayday().getPaydayCount());break;default:return}};this.onValueChanged=(t,n,d,r)=>{!t.events.isEventCompleted(n.id)&&d<n.trigger.value&&r>=n.trigger.value&&this.completeEvent(t,n)};this.checkEventCateogry=(t,n,d,r)=>{t.forEach(m=>this.onValueChanged(n,m,d,r))};this.update=t=>{let n,d;Object.values(bn).forEach(r=>{if(!this.events.has(r))return;let m=this.events.get(r).filter(e=>!t.events.isEventCompleted(e.id));if(m.length){switch(r){case"Cash":n=this.prev.getGold(),d=t.getGold();break;case"BusinessValue":n=this.prev.getBusinessValue(),d=t.getBusinessValue();break;case"ShopLevel":n=this.prev.getShop().getLevel(),d=t.getShop().getLevel();break;case"Staff":n=this.prev.allEmployees().length,d=t.allEmployees().length;break;case"ProductLaunch":n=this.prev.getShop().getProducts().length,d=t.getShop().getProducts().length;break;case"LostSalePrice":n=this.prev.getFinancialReportModel().getAllFailedSales("product_too_expensive"),d=t.getFinancialReportModel().getAllFailedSales("product_too_expensive");break;case"LostSaleStock":if(!t.getShop().getProducts().length)return;n=this.prev.getFinancialReportModel().getAllFailedSales("product_not_available"),d=t.getFinancialReportModel().getAllFailedSales("product_not_available");break;case"LostSaleStaff":n=this.prev.getFinancialReportModel().getAllFailedSales("till_not_available"),d=t.getFinancialReportModel().getAllFailedSales("till_not_available");break;case"LostSaleMarketing":n=this.prev.getFinancialReportModel().getAllFailedSales("no_marketing"),d=t.getFinancialReportModel().getAllFailedSales("no_marketing");break;case"Payday":n=this.prev.getPayday().getPaydayCount(),d=t.getPayday().getPaydayCount();break;case"Sales":n=this.prev.getFinancialReportModel().getAllFailedSales("product_purchased"),d=t.getFinancialReportModel().getAllFailedSales("product_purchased");break;case"CanLaunchBy":{let e=this.prev.getShop().nextProductCost,u=t.getShop().nextProductCost;if(e==null||u==null)return;n=this.prev.getGold()-e,d=t.getGold()-u;break}case"CanHireBy":{let e=this.prev.getEmployeeHiringCost(),u=t.getEmployeeHiringCost();if(e<=0||u<=0)return;n=this.prev.getGold()-e,d=t.getGold()-u;break}case"Profit":case"Loss":if(r==="Profit"&&t.getFinancialReportModel().profit<=0||r==="Loss"&&t.getFinancialReportModel().profit>=0||t.getPayday().getPaydayCount()===this.prev.getPayday().getPaydayCount())return;n=0,d=t.getPayday().getPaydayCount();break;case"StaffIdleTime":default:return}n!==d&&this.checkEventCateogry(m,t,n,d)}}),this.setModel(t)};this.setModel=t=>{this.prev=Ni.fromJSON(t.toJSON())};ge.instance,ge.instance=this,this.updateEventParams(n),this.setModel(t)}static onModelUpdate(t){if(!this.instance){te("[modelReducer] Model Reducer wasn't instantiated.");return}this.instance.update(t)}static clearInstance(){te("[modelReducer] The model reducer's static instance shouldn't be cleared outside of tests")}};function qD(){return 5}var Og=class{constructor(t,n){this.employeeHiringCost=0;this.pay=t=>this.gold.value<t?!1:(this.gold.value-=t,this.gold.value===0&&(this.gold.value=1),!0);this.earn=t=>{t&&(this.gold.value+=t)};this.canPay=t=>this.gold.value>=t;this.buyStock=(t,n)=>this.pay(t)?(this.financialReportModel.stockValue.value+=t,this.financialReportModel.stockCost+=t,this.financialReportModel.getProduct(n),ge.onModelUpdate(this),!0):!1;this.promoteProduct=(t,n)=>this.pay(t)?(this.financialReportModel.marketing+=t,ge.onModelUpdate(this),!0):!1;this.payEmployee=t=>this.pay(t)?(this.financialReportModel.salaries+=t,ge.onModelUpdate(this),!0):!1;this.sellProduct=(t,n)=>{this.earn(t),this.financialReportModel.sellProduct(t,n),ge.onModelUpdate(this)};this.loseProductSale=(t,n)=>{this.financialReportModel.loseProductSale(t,n),ge.onModelUpdate(this)};this.onEvent=t=>{t.value&&(this.financialReportModel.achievementsValue.value+=t.value),t.gold&&(this.earn(t.gold),this.financialReportModel.achievementsRevenue+=t.gold),ge.onModelUpdate(this)};this.checkTotalSalariesDue=()=>{let t=0,n=0;this.allEmployees().length>0&&(this.allEmployees().forEach(d=>{d.getCost()&&(t+=d.getCost()),d.idle&&d.getCost()&&(n+=d.getCost())}),rb(t),sb(n))};this.getGold=()=>this.gold.value;this.getBusinessValue=()=>this.financialReportModel.achievementsValue.value+this.financialReportModel.stockValue.value+this.gold.value;this.getPayday=()=>this.payday;this.setShop=t=>this.shop=t;this.getShop=()=>this.shop;this.addCustomer=t=>this.customers[t.id]=t;this.customer=t=>this.customers[t];this.allCustomers=()=>Object.values(this.customers);this.removeCustomer=t=>delete this.customers[t];this.addEmployee=(t,n=!1)=>(this.employees[t.id]=t,n&&ge.onModelUpdate(this),this.employees[t.id]);this.employee=t=>this.employees[t];this.allEmployees=()=>Object.values(this.employees);this.removeEmployee=t=>delete this.employees[t];this.getEmployeeHiringCost=()=>this.employeeHiringCost;this.setEmployeeHiringCost=t=>this.employeeHiringCost=t;this.getFinancialReportModel=()=>this.financialReportModel;this.getUIWatchableModel=()=>({gold:this.gold,businessValue:this.businessValue});this.toJSON=()=>JSON.parse(JSON.stringify({version:3,game:{gold:this.gold.value,shop:this.shop.toJSON(),employees:Object.values(this.employees).map(t=>t.toJSON()),customers:Object.values(this.customers).map(t=>t.toJSON()),employeeHiringCost:this.employeeHiringCost,payday:this.payday.toJSON(),financialReportModel:this.financialReportModel.toJSON(),events:this.events.toJSON(),score:this.getBusinessValue(),completed:this.completed}}));this.gold=Et((t==null?void 0:t.gold)??qD()),this.financialReportModel=(t==null?void 0:t.financialReportModel)??new ao,this.businessValue=Cu(()=>this.gold.value+this.financialReportModel.stockValue.value+this.financialReportModel.achievementsValue.value),this.shop=(t==null?void 0:t.shop)??new ro(150),this.customers={},this.employees={},this.payday=(t==null?void 0:t.payday)??new so(((n==null?void 0:n.payday.secondsPerPayday)??0)*1e3),pc(this.payday.getPaydayCount()),this.events=(t==null?void 0:t.events)??new lo}get completed(){return this.payday.getPaydayCount()===12}},Ni=Og;Ni.fromJSON=t=>{if(t.version===void 0||t.game===void 0){ze("Invalid save file");return}tF(t);let n=new Og({gold:t.game.gold,stock:t.game.stock,achievements:t.game.achievements,payday:so.fromJSON(t.game.payday),financialReportModel:ao.fromJSON(t.game.financialReportModel),shop:ro.fromJSON(t.game.shop),events:lo.fromJSON(t.game.events)});return t.game.employees.forEach(d=>{n.addEmployee(Kn.fromJSON(d))}),t.game.customers.forEach(d=>{n.addCustomer(Fs.fromJSON(d))}),n.setEmployeeHiringCost(t.game.employeeHiringCost),n};var tF=i=>{eF(i),iF(i)},eF=i=>{var t,n,d;i.version===1&&((d=(n=(t=i.game)==null?void 0:t.shop)==null?void 0:n.products)==null||d.forEach((r,m)=>r.index=m),i.version=2)},iF=i=>{var t,n;i.version===2&&((n=(t=i.game)==null?void 0:t.employees)==null||n.forEach((d,r)=>d.index=r),i.version=3)};var Ns=class extends Tt(yt){constructor(){super(...arguments);this.hasRetriedFetch=!1;this.retryCloudFetch=()=>{this.hasRetriedFetch=!0,ve.refreshCloudSave()};this.getSaveValue=n=>{let d=new Date,r=Math.abs(n.getTime()-d.getTime()),m=Math.floor(r/(1e3*60)),e=Math.floor(r/(1e3*60*60)),u=Math.floor(r/(1e3*60*60*24));return m<=60?`${m} ${tt("SavedGame_SavedOption_Minutes")}`:e<=24?`${e} ${tt("SavedGame_SavedOption_Hours")}`:`${u} ${tt("SavedGame_SavedOption_Days")}`};this.getPaydayAndBusinessValue=n=>{let d=0,r=0;if(n){let m=Ni.fromJSON(n);m&&(d=m.getPayday().getPaydayCount(),r=m.getBusinessValue())}return[`${d}/12`,`${r}`]};this.renderDetailedBodyText=(n,d,r)=>q`
    <div class="body detailed">
      <div>${tt("SavedGame_Saved")}</div>
      <div>${n}</div>
    </div>
    <div class="body detailed">
      <div>${tt("SavedGame_Payday")}</div>
      <div>${d}</div>
    </div>
    <div class="body detailed">
      <div>${tt("SavedGame_BusinessValue")}</div>
      <div>${r}</div>
    </div>
  `;this.renderShortBody=n=>q`
    <div class="body short">${n}</div>
  `;this.renderSavedContainer=n=>{let d,r,m,e,u,g,c,s=!0,o,a,l=!1,p=tt("SavedGame_Button_Load"),h=se.local.value,f=se.cloud.value,v=(h?ve.localSaveTimeStamp().getTime():0)-(f?ve.cloudSaveTimeStamp().getTime():0);switch(n){case"new":r=st.SaveNewGame,d=tt("SavedGame_NewGame"),m=`0 ${tt("SavedGame_SavedOption_Hours")}`,e="0/12",u="0",a=this.newGame;break;case"local":{if(!h||h.completed)return;r=st.SaveDevice,d=tt("SavedGame_Device"),m=this.getSaveValue(ve.localSaveTimeStamp()),[e,u]=this.getPaydayAndBusinessValue(h.data),v>=0&&(o="teal",g=tt("SavedGame_Latest")),a=this.continueLocal;break}case"cloud":if(r=st.SaveInternet,d=tt("SavedGame_Internet"),f){if(f.completed)return;m=this.getSaveValue(ve.cloudSaveTimeStamp()),[e,u]=this.getPaydayAndBusinessValue(f.data),v<0&&(o="teal",g=tt("SavedGame_Latest")),a=this.continueCloud;break}if(s=!1,se.cloudRequestState.value==="loading")c=tt("SavedGame_LoadSoon"),g=tt("SavedGame_Connecting"),o="yellow",l=!0,xt("Error");else if(se.cloudRequestState.value==="missing")c=tt("SavedGame_NoGameFound"),this.hasRetriedFetch&&(g=tt("SavedGame_Reconnected"),o="violet"),l=!0,p=tt("SavedGame_Button_Load"),xt("Error");else if(se.cloudRequestState.value==="failed")c=tt("SavedGame_TryAgain"),g=tt("SavedGame_NoConnection"),o="ginger",l=!1,p=tt("SavedGame_Button_Retry"),a=this.retryCloudFetch,xt("Error");else return;break;default:return}let y=g?q` <div class="pill-info ${o}">${g}</div> `:At;return q`
      <div class="save-container">
        <img class="save-image" src=${r} draggable="false" />
        <div class="pill-info-container ${o}">${y}</div>
        <div class="title">${d}</div>
        ${s?this.renderDetailedBodyText(m,e,u):this.renderShortBody(c)}
        <app-button
          ?disabled=${l}
          text=${p}
          @click=${a}
        ></app-button>
      </div>
    `}}newGame(){this.game.startNewGame()}continueLocal(){this.game.load(!0)}continueCloud(){this.game.load(!1)}connectedCallback(){super.connectedCallback(),ve.refreshLocalSave(),ve.cloudSaveRequestState()==="none"&&ve.refreshCloudSave()}render(){return q`
      <div class="top-text">
        <div class="heading-text">${tt("SavedGame_Heading")}</div>
        <div class="subheading-text">${tt("SavedGame_SubHeading")}</div>
      </div>
      <div class="container-row">
        ${this.renderSavedContainer("new")}
        ${this.renderSavedContainer("local")}
        ${this.renderSavedContainer("cloud")}
      </div>
    `}};Ns.styles=[Qt,at`
      :host {
        width: 100%;
        height: 100%;
        background: var(--secondary-violet-highlight);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        color: var(--primary-navy);
        text-align: center;
        font-family: Ubuntu;
        line-height: normal;
        font-style: normal;
      }

      .container-row {
        display: flex;
        align-items: center;
        justify-content: start;
        flex-direction: row;
        gap: 20px;
      }

      .heading-text {
        font-size: 20px;
        font-weight: 700;

        @media (min-width: 1000px) {
          font-size: 32px;
          padding-bottom: 10px;
        }
      }

      .subheading-text {
        padding-bottom: 10px;
        font-size: 10px;
        font-weight: 500;
        line-height: 20px;

        @media (min-width: 1000px) {
          padding-bottom: 45px;
          font-size: 14px;
        }
      }

      .save-container {
        position: relative;
        width: 170px;
        height: 218px;
        box-sizing: border-box;
        padding: 10px 16px;

        border-radius: 4px;
        border: 2px solid var(--primary-navy);
        background: var(--primary-white);

        display: flex;
        flex-direction: column;
        justify-content: start;
        align-items: center;

        @media (min-width: 1000px) {
          width: 220px;
          height: 258px;
          padding: 10px 15px;
        }
      }

      .save-image {
        width: 60px;
        height: 60px;
      }

      .pill-info-container {
        display: block;
        width: 94px;
        height: 18px;
        margin: 4px 0 2px;

        @media (min-width: 1000px) {
          width: 136px;
        }
      }

      .pill-info {
        width: 100%;
        height: 100%;
        display: grid;
        place-content: center;

        border-radius: 12px;

        color: var(--primary-navy);
        /* Pill copy_small */
        font-family: Ubuntu;
        font-size: 8px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        text-transform: capitalize;

        @media (min-width: 1000px) {
          font-size: 12px;
        }
      }

      .pill-info.teal {
        background: var(--primary-teal-highlight);
      }

      .pill-info.violet {
        background: var(--secondary-violet-highlight);
      }

      .pill-info.yellow {
        background: var(--secondary-yellow-highlight);
      }

      .pill-info.ginger {
        background: var(--secondary-ginger-highlight);
      }

      .text-container {
        display: flex;
        flex-direction: column;
        justify-content: start;
        align-content: center;
      }

      .title {
        color: var(--primary-navy);
        margin: 2.5px 0;
        text-align: center;
        /* Width has to be set manually bc "On the Internet" is too big */
        width: 138px;

        /* Heading 2 */
        font-family: Ubuntu;
        font-size: 18px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        text-transform: capitalize;

        @media (min-width: 1000px) {
          width: 190px;
          font-size: 24px;
          padding-bottom: 10px;
        }
      }

      .body {
        color: var(--primary-navy);
        margin: 2px 0;
        width: 100%;

        /* Body copy_small */
        font-family: Ubuntu;
        font-size: 10px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px; /* 200% */

        @media (min-width: 1000px) {
          font-size: 14px;
        }
      }

      .body.short {
        text-align: center;
      }

      .body.detailed {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }

      app-button {
        position: absolute;
        left: 50%;
        bottom: 0;
        transform: translate(-50%, 50%);
      }

      .top-text {
        @media (max-height: 320px) {
          display: none;
        }
      }
    `],et([Mt({context:Rt})],Ns.prototype,"game",2),et([qt()],Ns.prototype,"hasRetriedFetch",2),Ns=et([lt("choose-save")],Ns);var ks=class extends yt{constructor(){super(...arguments);this.noBorder=!1}render(){return q`
      <svg
        width="26"
        height="16"
        viewBox="0 0 26 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="arrow mobile ${this.direction}"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M1.70526 -6.01262e-05L9.51372 13.8816C11.0429 16.6003 14.9571 16.6002 16.4863 13.8816L24.2948 -6.01262e-05H1.70526Z"
          fill="${this.noBorder?"":"var(--primary-navy)"}"
        />
        <path
          d="M14.7432 12.9012C13.9785 14.2605 12.0215 14.2605 11.2568 12.9012L4 0.000111914L22 0.000113487L14.7432 12.9012Z"
          fill="white"
        />
      </svg>
      <svg
        width="39"
        height="24"
        viewBox="0 0 39 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="arrow desktop ${this.direction}"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M2.55789 -2.91541e-05L14.2706 20.8225C16.5644 24.9004 22.4357 24.9004 24.7295 20.8225L36.4422 -2.91541e-05H2.55789Z"
          fill="${this.noBorder?"":"var(--primary-navy)"}"
        />
        <path
          d="M22.1147 19.3516C20.9678 21.3906 18.0322 21.3906 16.8853 19.3516L6 4.58001e-05L33 4.81606e-05L22.1147 19.3516Z"
          fill="white"
        />
      </svg>
    `}};ks.styles=[at`
      .arrow {
        position: absolute;
      }

      .arrow.mobile {
        width: 26px;
        height: 16px;
        display: block;
        @media (min-width: 1000px) {
          display: none;
        }
      }

      .arrow.desktop {
        width: 39px;
        height: 24px;
        display: none;
        @media (min-width: 1000px) {
          display: block;
        }
      }

      .left {
        bottom: 8px;
        left: -5px;
        transform: rotate(90deg) translateY(100%);
        @media (min-width: 1000px) {
          bottom: 12px;
        }
      }

      .left.desktop {
        left: -7px;
      }

      .right {
        bottom: 8px;
        right: -5px;
        transform: rotate(270deg) translateY(100%);
        @media (min-width: 1000px) {
          bottom: 12px;
        }
      }

      .right.desktop {
        right: -8px;
      }

      .bottom {
        bottom: 0px;
        left: 50%;
        transform: translate(-50%, 100%);
      }
    `],et([It({type:String})],ks.prototype,"direction",2),et([It({type:Boolean,attribute:"no-border"})],ks.prototype,"noBorder",2),ks=et([lt("dialog-arrow")],ks);var ho=class extends Ct{constructor(){super(...arguments);this.onTipButtonClicked=()=>{ld(this.tipModalKey)};this.render=()=>q`
    <button class="remove-btn-style" @click=${this.onTipButtonClicked}>
      <img src=${st.Report_Info} draggable="false" />
    </button>
  `}};ho.styles=[dr,at`
      :host {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      button {
        width: 16px;
        height: 16px;
        margin: 0;
        padding: 0;
      }

      img {
        width: 100%;
        height: 100%;
      }
    `],et([It({attribute:"key"})],ho.prototype,"tipModalKey",2),ho=et([lt("tip-button")],ho);var uo=class extends Tt(Ct){constructor(){super(...arguments);this.renderLine=()=>q`
      <div
        style="width: 100%; height: 2px; background-color: var(--primary-navy)"
      ></div>
    `}connectedCallback(){super.connectedCallback(),this.uiModel=this.game.getModel().getUIWatchableModel(),this.financialReportModel=this.game.getModel().getFinancialReportModel()}render(){return q`
      <div class="container">
        <div class="left">
          <div class="title">${tt("FinancialReport_BV_Tab_Title")}</div>
          <div class="left-total">
            <img src=${st.ValueGraph} draggable="false" />
            ${this.uiModel.businessValue}
          </div>
          ${this.renderLine()}
          <div class="left-text grow center-content">
            ${tt("FinancialReport_BV_Tab_HighestBusinessValue")}
          </div>
        </div>
        <div class="right">
          <div class="value-breakdown">
            <div class="text-line">
              <tip-button key="Tip_Cash"></tip-button>
              <div class="text-value-pair">
                <div>${tt("FinancialReport_BV_Tab_Cash")}</div>
                <div>${this.uiModel.gold}</div>
              </div>
            </div>
            <div class="text-line">
              <tip-button key="Tip_Stock"></tip-button>
              <div class="text-value-pair">
                <div>${tt("FinancialReport_BV_Tab_Stock")}</div>
                <div>${this.financialReportModel.stockValue}</div>
              </div>
            </div>
            <div class="text-line">
              <tip-button key="Tip_CommunityImpact"></tip-button>
              <div class="text-value-pair">
                <div>${tt("FinancialReport_BV_Tab_Achievements")}</div>
                <div>${this.financialReportModel.achievementsValue}</div>
              </div>
            </div>
          </div>
          <div class="value-total">
            <div class="text-value-pair">
              <div>${tt("FinancialReport_BV_Tab_Total")}</div>
              <div>${this.uiModel.businessValue}</div>
            </div>
          </div>
        </div>
      </div>
    `}};uo.styles=[Qt,je,at`
      :host {
        width: 100%;
        height: 100%;
      }

      .container {
        width: 100%;
        height: 100%;
        background-color: var(--businessValue-light-orange);

        display: flex;
        flex-direction: row;
        gap: 40px;
        place-content: center;
        place-items: center;

        @media (min-width: 1000px) {
          gap: 80px;
        }
      }

      .grow {
        flex-grow: 1;
      }

      .center-content {
        display: flex;
        place-content: center;
        place-items: center;
      }

      .left {
        box-sizing: border-box;
        width: 238px;
        height: 145px;
        padding: 14px 15px;
        border-radius: 4px;
        background-color: var(--businessValue-medium-orange);

        display: flex;
        flex-direction: column;
        gap: 8px;

        @media (min-width: 1000px) {
          width: 330px;
          height: 214px;
          padding: 30px;
          gap: 16px;
        }
      }

      .title {
        font-size: 14px;
        font-weight: 700;
        @media (min-width: 1000px) {
          font-size: 18px;
        }
      }

      .left-total {
        font-size: 24px;
        font-weight: 700;
        gap: 2px;
        @media (min-width: 1000px) {
          font-size: 36px;
        }

        display: flex;
        place-items: center;
      }

      .left-total > img {
        width: 28px;
        height: 28px;
      }

      .left-text {
        font-size: 12px;
        font-weight: 500;

        @media (min-width: 1000px) {
          font-size: 15.8px;
        }
      }

      .right {
        width: 238px;
        height: 145px;
        text-transform: uppercase;

        padding: 0 14px;

        display: flex;
        flex-direction: column;
        justify-content: end;
        gap: 10px;

        @media (min-width: 1000px) {
          width: 330px;
          height: 214px;
          gap: 20px;
        }
      }

      .value-breakdown {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .text-line {
        width: 100%;
        gap: 4px;
        display: flex;
        align-items: center;

        font-size: 12px;
        font-weight: 500;
        line-height: 20px;
        @media (min-width: 1000px) {
          font-size: 16px;
        }
      }

      .value-total {
        width: 100%;
        height: 28px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--businessValue-orange);
        border-radius: 0 0 4px 4px;
        border-top: 2px solid var(--primary-navy);

        font-size: 12px;
        font-weight: 700;
        line-height: 20px;

        @media (min-width: 1000px) {
          font-size: 16px;
        }
      }

      .text-value-pair {
        flex-grow: 1;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .value-total > .text-value-pair {
        padding: 0 5px;
        box-sizing: border-box;
      }
    `],et([Mt({context:Rt})],uo.prototype,"game",2),uo=et([lt("business-value")],uo);var ph=class extends yt{render(){return q`
      <button class="remove-btn-style" @click=${Je}>
        <img
          src=${st.Cross_Active}
          height="22px"
          width="22px"
          draggable="false"
        />
      </button>
    `}disconnectedCallback(){super.disconnectedCallback(),xt("PopOut")}};ph.styles=[dr,at`
      button {
        padding: 0;
        width: 22px;
        height: 22px;
      }
    `],ph=et([lt("close-button-fin-report")],ph);var Vr=class extends Ct{constructor(){super(...arguments);this.totalNumberOfCustomers=0;this.isDropdownOpen=!1;this.renderSaleTotal=n=>{let d=this.currentProductKey?this.financialReportModel.getCustomerCount(n.kind):this.totalNumberOfCustomers;return tt("FinancialReport_MR_Tab_XY").replace("%x",`${n.product_purchased}`).replace("%y",`${d}`)};this.renderDropdown=n=>{if(this.currentProductKey)return q`
        <button
          class="filter-clear"
          @click=${()=>this.currentProductKey=""}
        >
          ${n}
          <img src=${st.Cross_Active} />
        </button>
      `;let d=this.isDropdownOpen?q`
          <div class="dropdown-background">
            <div class="dropdown-container">
              ${this.productStrings.map(([m,e])=>q`
                  <button
                    class="remove-btn-style dropdown-button"
                    @click=${()=>{this.isDropdownOpen=!1,this.currentProductKey=m}}
                  >
                    ${e}
                  </button>
                `)}
            </div>
          </div>
        `:At;return q`
      <div class="product-container">
        <button class="product-select" @click=${()=>{this.isDropdownOpen=!this.isDropdownOpen}}>
          ${n}
          <img
            src=${this.isDropdownOpen?st.Cross_Active:st.Chevron_Down_Active}
          />
        </button>
        ${d}
      </div>
    `}}connectedCallback(){super.connectedCallback(),this.financialReportModel=this.game.getModel().getFinancialReportModel();let{productInfo:n}=this.financialReportModel;this.totalProductInfo=this.financialReportModel.getTotalProductInfo(),Object.values(n).forEach(d=>{this.totalNumberOfCustomers+=this.financialReportModel.getCustomerCount(d.kind)}),this.productStrings=this.game.getModel().getShop().getProducts().map(d=>[d.kind.key(),d.kind.productName()])}render(){let n=this.currentProductKey?this.financialReportModel.productInfo[this.currentProductKey]:this.totalProductInfo,d=this.currentProductKey?this.financialReportModel.productInfo[this.currentProductKey].kind.productName():tt("FinancialReport_MR_Tab_Default");return q`
      <div class="container">
        <div class="top">
          <div class="top-text">
            ${tt("FinancialReport_MR_Tab_NumberOfSales")}
            ${this.renderSaleTotal(n)}
          </div>
          <div class="top-text">
            <div>${tt("FinancialReport_MR_Tab_Filter")}</div>
            ${this.renderDropdown(d)}
          </div>
        </div>
        <div class="bottom">
          <div class="marketing-panel">
            <div class="panel-header">
              <tip-button key="Tip_MissedSalesPriceTooHigh"></tip-button>
              ${tt("FinancialReport_MR_Tab_PriceTooHigh")}
            </div>
            <div class="panel-body">
              <img
                src=${st.Report_Portrait_Expensive}
                draggable="false"
              />
            </div>
            <div class="panel-number">${n.product_too_expensive}</div>
          </div>
          <div class="marketing-panel">
            <div class="panel-header">
              <tip-button key="Tip_MissedSalesNoStaffAvailable"></tip-button>
              ${tt("FinancialReport_MR_Tab_NoStaff")}
            </div>
            <div class="panel-body">
              <img src=${st.Report_Portrait_Staff} draggable="false" />
            </div>
            <div class="panel-number">${n.till_not_available}</div>
          </div>
          <div class="marketing-panel">
            <div class="panel-header">
              <tip-button key="Tip_MissedSaleLackOfMarketing"></tip-button>
              ${tt("FinancialReport_MR_Tab_Lack")}
            </div>
            <div class="panel-body">
              <img
                src=${st.Report_Portrait_Marketing}
                draggable="false"
              />
            </div>
            <div class="panel-number">
              ${Math.floor(n.no_marketing)}
            </div>
          </div>
          <div class="marketing-panel">
            <div class="panel-header">
              <tip-button key="Tip_MissedSaleOutofStock"></tip-button>
              ${tt("FinancialReport_MR_Tab_OutOfStock")}
            </div>
            <div class="panel-body">
              <img src=${st.Report_Portrait_Stock} draggable="false" />
            </div>
            <div class="panel-number">${n.product_not_available}</div>
          </div>
        </div>
      </div>
    `}};Vr.styles=[Qt,dr,at`
      :host {
        width: 100%;
        height: 100%;
      }

      .container {
        background-color: var(--marketResearch-lighter-purple);
        padding: 0 17px 16px 17px;
        box-sizing: border-box;
        height: 100%;
        width: 100%;

        display: flex;
        flex-direction: column;

        @media (min-width: 1000px) {
          padding: 0 52px 30px 52px;
        }
      }

      .top {
        flex-grow: 1;
        background-color: var(--bg-color);
        border-radius: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;

        box-sizing: border-box;
        padding: 4px 0;
        width: 100%;

        font-size: 16px;
        font-weight: 500;
        @media (min-width: 1000px) {
          font-size: 18px;
          font-weight: 700;
        }
      }

      .top-text {
        display: flex;
        gap: 4px;
        justify-content: center;
        align-items: center;
      }

      .product-container {
        position: relative;
        display: flex;
        flex-direction: column;
        width: 160px;
      }

      .product-select {
        background-color: var(--secondary-violet-highlight);
        border-radius: 6px;
        border: 2px solid var(--primary-navy);

        width: 100%;
        height: 30px;
        box-sizing: border-box;

        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 12px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;

        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .product-select > img {
        height: 20px;
        width: 20px;
      }

      .dropdown-background {
        background-color: var(--primary-white);
        border-radius: 6px;
        border: 2px solid var(--primary-navy);

        position: absolute;
        z-index: 10;
        bottom: 0;
        transform: translateY(100%);

        height: fit-content;
        max-height: 110px;
        width: 100%;
        box-sizing: border-box;

        font-size: 12px;
        font-style: normal;
        font-weight: 500;

        padding: 6px;

        overflow-y: scroll;

        scrollbar-color: var(--primary-navy) transparent;
        scrollbar-width: thin;
      }

      .dropdown-background::-webkit-scrollbar {
        background-color: transparent;
        width: 10px;
      }

      .dropdown-background::-webkit-scrollbar-thumb {
        background-color: var(--primary-navy);
        border-radius: 10px;
      }

      .dropdown-container {
        display: flex;
        flex-direction: column;
        width: 100%;
      }

      .dropdown-button {
        height: 16px !important;
        padding: 4px;
        box-sizing: border-box;

        flex: 0 0;

        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 1em;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
        text-align: left;

        overflow: hidden;
      }

      .dropdown-button:hover {
        border-radius: 6px;
        background-color: var(--marketResearch-light-purple);
      }

      .filter-clear {
        display: flex;
        height: 30px;
        box-sizing: border-box;
        padding: 0px 10px;
        justify-content: center;
        align-items: center;
        gap: 8px;

        border-radius: 59px;
        background-color: var(--secondary-violet-highlight);

        color: var(--primary-navy);
        font-size: 14px;
        font-weight: 400;
      }

      .filter-clear > img {
        width: 16px;
        height: 16px;
      }

      .bottom {
        @media (min-width: 1000px) {
          gap: 50px;
        }

        display: flex;
        justify-content: center;
        align-items: center;
        gap: 30px;
      }

      .marketing-panel {
        position: relative;
        width: 114px;
        height: 140px;

        border-radius: 6px;
        border: 2px solid var(--primary-navy);

        display: flex;
        flex-direction: column;
        @media (min-width: 1000px) {
          width: 140px;
          height: 176px;
        }
      }

      .panel-header {
        background-color: var(--secondary-violet-highlight);
        padding: 4px;
        box-sizing: border-box;

        border-radius: 4px 4px 0 0;

        display: flex;
        place-items: center;
        place-content: center;
        gap: 4px;

        font-size: 12px;
        font-weight: 500;
        text-align: center;
      }

      .panel-body {
        background-color: var(--primary-white);
        border-radius: 0 0 4px 4px;

        flex-grow: 1;
        display: flex;
        justify-content: center;
      }

      .panel-body > img {
        flex-grow: 1;
      }

      .panel-number {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translate(-50%, 50%);

        display: flex;
        width: 84px;
        justify-content: center;
        align-items: center;

        border-radius: 10px;
        background: var(--violet-lowlight);

        color: var(--primary-white);
        text-align: center;
        font-size: 12px;
        font-weight: 500;
      }
    `],et([Mt({context:Rt})],Vr.prototype,"game",2),et([qt()],Vr.prototype,"currentProductKey",2),et([qt()],Vr.prototype,"isDropdownOpen",2),Vr=et([lt("market-research")],Vr);var co=class extends Ct{constructor(){super(...arguments);this.renderProfitOrLoss=()=>{let n=this.financialReportModel.profit>=0?tt("FinancialReport_P/L_Tab_Profit"):tt("FinancialReport_P/L_Tab_Loss");return q` <div class="title">
      <div class="title-text">
        <tip-button key="Tip_ProfitOrLoss"></tip-button>
        ${n}
      </div>
      <div class="title-pill">
        ${Math.abs(this.financialReportModel.profit)}
      </div>
    </div>`};this.renderProductSales=n=>q`
      <div class="text-value-pair">
        <div class="left-text">${n.kind.productName()}</div>
        <div class="right-text">${n.income}</div>
      </div>
    `}connectedCallback(){super.connectedCallback(),this.uiModel=this.game.getModel().getUIWatchableModel(),this.financialReportModel=this.game.getModel().getFinancialReportModel()}render(){return q`
      <div class="container">
        <div class="top">
          <div class="title">
            <div class="title-text">
              <tip-button key="Tip_Revenue"></tip-button>
              ${tt("FinancialReport_P/L_Tab_Revenue")}
            </div>
            <div class="title-pill">${this.financialReportModel.income}</div>
          </div>
          <img class="top-img" src=${st.Report_Minus} draggable="false" />
          <div class="title">
            <div class="title-text">
              <tip-button key="Tip_Expenses"></tip-button>
              ${tt("FinancialReport_P/L_Tab_Expenses")}
            </div>
            <div class="title-pill">${this.financialReportModel.expenses}</div>
          </div>
          <img class="top-img" src=${st.Report_Equal} draggable="false" />
          ${this.renderProfitOrLoss()}
        </div>
        <div class="bottom">
          <div class="bottom-panel">
            ${Object.values(this.financialReportModel.productInfo).map(n=>this.renderProductSales(n))}
          </div>
          <div class="bottom-panel">
            <div class="text-value-pair">
              <div class="left-text">
                ${tt("FinancialReport_P/L_Tab_Expenses_Stock")}
              </div>
              <div class="right-text">
                ${this.financialReportModel.stockCost}
              </div>
            </div>
            <div class="text-value-pair">
              <div class="left-text">
                ${tt("FinancialReport_P/L_Tab_Expenses_Marketing")}
              </div>
              <div class="right-text">
                ${this.financialReportModel.marketing}
              </div>
            </div>
            <div class="text-value-pair">
              <div class="left-text">
                ${tt("FinancialReport_P/L_Tab_Expenses_Salaries")}
              </div>
              <div class="right-text">
                ${this.financialReportModel.salaries}
              </div>
            </div>
          </div>
          <div
            class="bottom-panel"
            style="background-color: transparent !important;"
          >
            <!-- Empty box for responsive sizing -->
          </div>
        </div>
      </div>
    `}};co.styles=[Qt,at`
      :host {
        width: 100%;
        height: 100%;

        --bg-color: var(--profitLoss-yellow);
      }

      .container {
        background-color: var(--profitLoss-light-yellow);
        box-sizing: border-box;
        padding: 6px 10px;
        height: 100%;
        width: 100%;

        display: flex;
        flex-direction: column;
        gap: 4px;

        @media (min-width: 1000px) {
          padding: 8px 20px;
          gap: 8px;
        }
      }

      .top {
        background-color: var(--bg-color);
        border-radius: 4px;

        display: flex;
        justify-content: center;
        align-items: center;

        box-sizing: border-box;
        padding: 4px 0;
      }

      .title {
        flex-shrink: 1;
        flex-grow: 1;
        width: 150px; /* to give each a similar starting size to flex grow together*/

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 6px;
      }

      .title-text {
        display: flex;
        gap: 4px;
        align-items: center;
        justify-content: center;

        font-size: 18px;
        font-weight: 700;
        text-transform: uppercase;

        @media (min-width: 1000px) {
          font-size: 24px;
        }
      }

      .title-pill {
        width: 84px;
        border-radius: 10px;
        background: var(--yellow);

        display: flex;
        justify-content: center;
        align-items: center;

        text-align: center;

        font-size: 12px;
        font-weight: 500;
        @media (min-width: 1000px) {
          font-size: 16px;
        }
      }

      .top-img {
        width: 28px;
        height: 28px;
      }

      .bottom {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        width: 100%;
        flex: 1 1;

        @media (min-width: 1000px) {
          gap: 20px;
        }
      }

      .bottom-panel {
        background-color: var(--bg-color);
        border-radius: 4px;

        flex: 1 1;
        padding: 6px 12px;
        box-sizing: border-box;

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 2px;
        height: 100%;
      }

      .text-value-pair {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;

        font-size: 12px;

        @media (min-width: 1000px) {
          font-size: 16px;
        }
      }

      .text-value-pair > .left-text {
        font-weight: 500;
      }

      .text-value-pair > .right-text {
        font-weight: 400;
      }
    `],et([Mt({context:Rt})],co.prototype,"game",2),co=et([lt("profit-loss")],co);var mh=class extends yt{constructor(){super();this.selectTab=n=>{this.tabs.forEach(d=>d.removeAttribute("selected")),this.tabs[n].setAttribute("selected",""),this.panels.forEach(d=>d.removeAttribute("selected")),this.panels[n].setAttribute("selected","")};this.handleSelectTab=n=>{let d=this.tabs.findIndex(r=>r===n.target);this.selectTab(d)};this.tabs=Array.from(this.querySelectorAll("[slot=tab]")),this.panels=Array.from(this.querySelectorAll("[slot=panel]")),this.selectTab(0)}render(){return q`
      <nav>
        <slot name="tab" @click=${this.handleSelectTab}> </slot>
      </nav>
      <slot name="panel"></slot>
    `}};mh.styles=at`
    :host {
      width: 100%;
      height: 100%;

      display: flex;
      flex-direction: column;
    }
    nav {
      display: flex;
      align-items: flex-end;
      flex-grow: 0;
    }
    ::slotted([slot="tab"]) {
      flex: 1 1 auto;
      color: grey;
      text-align: center;
      margin: 0;
    }
    ::slotted([slot="tab"][selected]) {
      color: white;
    }
    ::slotted([slot="panel"]) {
      display: none;
    }
    ::slotted([slot="panel"][selected]) {
      display: block;
      width: 100%;
      height: 100%;
      flex-grow: 1;
    }
  `,mh=et([lt("tabbed-container")],mh);var fo=class extends Tt(Ct){constructor(){super(...arguments);this.onFinancialReportClose=n=>{n.preventDefault(),this.gameController.dismissFinancialReport()};this.parseTitle=(n,d)=>n.replace("%x",`${d+1}`).replace("%y","12")}tabClicked(){xt("Swipe")}firstUpdated(){xt("Report")}render(){return q`
      <div class="report-root flex-col border-normal popIn">
        <div class="header">
          <img
            src=${st.Clock}
            class="header-img no-grow"
            draggable="false"
          />
          <div class="header-text grow">
            ${this.parseTitle(tt("FinancialReport_Payday"),Gt.paydayCount.value)}
          </div>
          <close-button-fin-report
            class="no-grow"
            @click=${this.onFinancialReportClose}
          ></close-button-fin-report>
        </div>
        <div class="content rounded-b">
          <tabbed-container>
            <h2 class="tab-0 tab-header" slot="tab" @click=${this.tabClicked}>
              ${tt("FinancialReport_BV_Tab_Heading")}
            </h2>
            <div class="tab-0 tab-panel" slot="panel">
              <business-value></business-value>
            </div>
            <h2 class="tab-1 tab-header" slot="tab" @click=${this.tabClicked}>
              ${tt("FinancialReport_Profit_Tab_Heading")}
            </h2>
            <div class="tab-1 tab-panel" slot="panel">
              <profit-loss></profit-loss>
            </div>
            <h2 class="tab-2 tab-header" slot="tab" @click=${this.tabClicked}>
              ${tt("FinancialReport_MarketResearch_Tab_Heading")}
            </h2>
            <section class="tab-2 tab-panel" slot="panel">
              <market-research></market-research>
            </section>
          </tabbed-container>
        </div>
      </div>
    `}};fo.styles=[Qt,je,Kt,at`
      :host {
        max-width: 100%;
        margin-left: 72px;
        margin-right: 11px;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: var(--z-index-financial-report);

        font-family: Ubuntu;
        font-size: 12px;
        font-weight: 500;
        line-height: normal;
        text-align: left;
        color: var(--primary-navy);
      }

      .report-root {
        width: 588px;
        height: 288px;

        overflow: hidden;

        box-sizing: border-box;
        background-color: var(--primary-teal-main);
        display: flex;
        position: relative;
        flex-direction: column;

        @media (min-width: 1000px) {
          width: 824px;
          height: 382px;
        }
      }

      .flex-col {
        display: flex;
        flex-direction: column;
      }
      .no-grow {
        flex-grow: 0;
      }
      .grow {
        flex-grow: 1;
      }

      .header {
        height: 39px;
        width: 100%;
        flex-grow: 0;

        display: flex;
        flex-direction: row;
        align-items: center;

        @media (min-width: 1000px) {
          height: 54px;
        }
      }

      .header-text {
        font-family: Ubuntu;
        font-size: 20px;
        font-weight: 700;
        font-style: normal;
        line-height: normal;
      }

      .header-img {
        width: 28px;
        height: 28px;
        padding-left: 10px;
        padding-right: 6px;
      }

      close-button-fin-report {
        padding-right: 9px;
        @media (min-width: 1000px) {
          padding-right: 11px;
        }
      }

      .content {
        width: 100%;
        flex-grow: 1;
      }

      .tab-header {
        height: 22px;
        border-radius: 4px 4px 0 0;

        display: flex;
        place-items: center;
        place-content: center;

        font-size: 12px;
        font-weight: 500;
        color: var(--primary-white);

        @media (min-width: 1000px) {
          height: 26px;
          font-size: 16px;
        }
      }

      .tab-header[selected] {
        height: 28px;
        border-radius: 6px 6px 0 0;

        font-size: 14px;
        font-weight: 700;
        color: var(--primary-navy);

        @media (min-width: 1000px) {
          height: 32px;
          font-size: 18px;
        }
      }

      .tab-0.tab-header {
        background-color: var(--ginger-background);
      }

      .tab-0.tab-header[selected] {
        background-color: var(--ginger);
      }

      .tab-1.tab-header {
        background-color: var(--yellow-highlight);
      }

      .tab-1.tab-header[selected] {
        background-color: var(--yellow-lowlight);
      }

      .tab-2.tab-header {
        background-color: var(--violet-background);
      }

      .tab-2.tab-header[selected] {
        color: var(--primary-white);
        background-color: var(--violet-lowlight);
      }

      .tab-panel {
        overflow: hidden;
        background-color: white;
        border: var(--border-width) solid black;
        border-radius: 0 0 calc(var(--border-radius) - var(--border-width))
          calc(var(--border-radius) - var(--border-width));
        box-sizing: border-box;
        width: 100%;
        height: 100%;
      }

      .tab-0.tab-panel {
        background-color: var(--ginger-highlight);
        border-color: var(--ginger);
      }
      .tab-1.tab-panel {
        background-color: var(--yellow-highlight);
        border-color: var(--yellow-lowlight);
      }
      .tab-2.tab-panel {
        background-color: var(--violet-background);
        border-color: var(--violet-lowlight);
      }
    `],et([Mt({context:Rt})],fo.prototype,"gameController",2),fo=et([lt("financial-report")],fo);var Jn=class extends Tt(Ct){constructor(){super(...arguments);this.onNextClicked=()=>{this.dispatchEvent(new Event("next"))}}render(){return q`
      <div class="dialogue-content">
        <div class="character-img">
          <img src=${this.image} draggable="false" />
        </div>
        <div class="speech-bubble-container popIn">
          <div class="speech-bubble">
            <p class="body-copy no-margin body-spacing">${this.body1}</p>
            <p class="body-copy no-margin">${this.body2}</p>
            <dialog-arrow direction="left"></dialog-arrow>
          </div>
        </div>
        <app-button
          class="next-btn popIn ui-button-dialogue"
          @click=${this.onNextClicked}
          text=${this.nextText}
        >
        </app-button>
      </div>
    `}};Jn.styles=[Su,Kt,at`
      .dialogue-content {
        display: flex;
        flex-direction: row;
        gap: 36px;
        position: relative;
      }

      .character-img {
        display: flex;
        flex-direction: row;
        align-items: flex-end;
        justify-content: center;
        width: 160px;
        height: 160px;
        border-radius: 50%;
        border: 2px solid var(--primary-navy);
        background: var(--yellow);
        overflow: hidden;
        @media (min-width: 1000px) {
          width: 240px;
          height: 240px;
          border: 3px solid var(--primary-navy);
        }
      }
      .character-img > img {
        width: 100%;
        height: 100%;
      }

      .speech-bubble-container {
        display: flex;
        flex-direction: row;
        align-items: flex-end;
      }

      .speech-bubble {
        width: 273px;
        border-radius: 8px;
        border: 2px solid var(--primary-navy);
        background: var(--primary-white);
        padding: 12px;
        margin-bottom: 31px;
        box-sizing: border-box;
        display: flex;
        position: relative;
        flex-direction: column;
        place-content: center;
        @media (min-width: 1000px) {
          padding: 18px;
          width: 410px;
          margin-bottom: 46.5px;
          border-radius: 10px;
          border: 3px solid var(--primary-navy);
        }
      }

      .no-margin {
        margin: 0;
      }

      .body-spacing {
        margin-bottom: 12px;
        @media (min-width: 1000px) {
          margin-bottom: 18px;
        }
      }

      .next-btn {
        position: absolute;
        right: 0;
        bottom: -5px;
        transform: translateY(50%);
        transform-origin: center;
      }
    `],et([It()],Jn.prototype,"image",2),et([It()],Jn.prototype,"body1",2),et([It()],Jn.prototype,"body2",2),et([It()],Jn.prototype,"nextText",2),Jn=et([lt("intro-flow-character-dialog")],Jn);var Gr=class extends Tt(Ct){constructor(){super(...arguments);this.confettiDisabled=!1;this.onContinue=()=>{ab(),Gt.introPage.value===2?xt("EmailOpen"):xt("ButtonSelect_3")};this.onSkip=()=>{lb(),xt("ButtonSelect_3")};this.renderPageOne=()=>q`
    <div class="page-one-text heading-1">
      ${tt("IntroScreen01_Heading")}
    </div>
    <button @click=${this.onContinue}>
      <img
        class="envelope-img"
        src=${Dl.Intro_Envelope}
        draggable="false"
      />
    </button>
    <div class="page-one-text body-copy">
      ${tt("IntroScreen01_SubHeading")}
    </div>
  `;this.renderPageTwo=()=>q`
    <div class="letter-container">
      <div class="letter-text">
        <p class="page-two-text body-copy">
          ${tt("IntroScreen02_Heading")}
        </p>
        <p class="page-two-text body-copy">
          ${tt("IntroScreen02_Body01")}
        </p>
        <p class="page-two-text body-copy">
          ${tt("IntroScreen02_Body02")}
        </p>
        <p class="page-two-text body-copy">
          ${tt("IntroScreen02_Regards")}
        </p>
        <p class="page-two-text body-copy">
          ${tt("IntroScreen02_Sender")}
        </p>
        <div id="buttons">
          <app-button
            class="popIn ui-button"
            text=${tt("IntroScreen02_Button_Response01")}
            @click=${this.onContinue}
          ></app-button>
          <app-button
            class="popIn ui-button"
            text=${tt("IntroScreen02_Button_Response02")}
            @click=${this.onContinue}
          ></app-button>
        </div>
      </div>
      <img class="letter-img" src=${Dl.Intro_Letter} />
    </div>
  `;this.renderPageThree=()=>q`
    <intro-flow-character-dialog
      image=${st.MainCharacterExpression_Sad}
      body1=${tt("IntroScreen03_Body01")}
      body2=${tt("IntroScreen03_Body02")}
      @next=${this.onContinue}
      nextText=${tt("IntroScreen03_Button_Next")}
    ></intro-flow-character-dialog>
  `;this.renderPageFour=()=>q`
    <intro-flow-character-dialog
      image=${st.MainCharacterExpression_Determined}
      body1=${tt("IntroScreen04_Body")}
      body2=${tt("IntroScreen04_End")}
      @next=${this.onContinue}
      nextText=${tt("IntroScreen04_Button_Next")}
    ></intro-flow-character-dialog>
  `;this.renderPageFive=()=>q`
    <intro-flow-character-dialog
      image=${st.MainCharacterExpression_Pondering}
      body1=${tt("IntroScreen05_Body")}
      body2=${tt("IntroScreen05_End")}
      @next=${this.onContinue}
      nextText=${tt("IntroScreen05_Button_Next")}
    ></intro-flow-character-dialog>
  `;this.renderPageSix=()=>q`
    <business-selector-carousel
      @continue=${this.onContinue}
    ></business-selector-carousel>
  `;this.renderPageSeven=()=>q`
    <div class="market-stall-content-background popIn">
      <div class="market-stall-content-header">
        <div class="market-stall-content-header-text">
          ${tt("OpenBusiness_Level1")}
        </div>
      </div>
      <div class="market-stall-content-container">
        <div class="market-stall-pill-container">
          <div class="market-stall-pill market-stall-pill-colour">
            <div class="market-stall-type-pill-text">
              ${tt("OpenBusiness_MarketStall")}
            </div>
          </div>
        </div>
        <div class="market-stall-img-container">
          <img
            class="market-stall-img"
            src=${fi.ChooseShopCatergory_MarketStall}
            draggable="false"
          />
        </div>
      </div>
      <div class="open-btn-container">
        <app-button
          class="popIn ui-button"
          text=${tt("OpenBusiness_Button_Open")}
          @click=${this.onContinue}
        ></app-button>
      </div>
    </div>
    <confetti-juice autoplay></confetti-juice>
  `;this.renderSkipIntro=()=>q`<button
      class="skip-intro-button skip-intro-copy"
      @click=${this.onSkip}
    >
      ${tt("IntroScreen01_Button_Skip")}
    </button>`}firstUpdated(){Gt.introPage.value===1&&xt("EmailNotification")}renderCurrentPage(n){switch(n){case 1:return this.renderPageOne();case 2:return this.renderPageTwo();case 3:return this.renderPageThree();case 4:return this.renderPageFour();case 5:return this.renderPageFive();case 6:return this.renderPageSix();case 7:return this.renderPageSeven();default:return At}}render(){let n=Gt.introPage.value>=1&&Gt.introPage.value<=5;return q`
      <div
        class=${Yi({background:!0,"business-select-background":!n})}
      >
        ${Bt(n,this.renderSkipIntro)}
        <div class="content">
          ${this.renderCurrentPage(Gt.introPage.value)}
        </div>
      </div>
    `}};Gr.styles=[Qt,Su,Kt,at`
      .background {
        width: 100%;
        height: 100%;
        display: grid;
        place-items: center;
        position: relative;
        background-color: var(--secondary-violet-highlight);
      }
      .business-select-background {
        background-color: var(--semi-translucent-bg);
      }
      .skip-intro-button {
        position: absolute;
        top: 8px;
        right: 8px;
        border-radius: 59px;
        background: var(--semi-opaque-white);
        padding: 6px 10px;
        margin: 2px;
        color: var(--primary-navy);
        text-align: center;
      }

      .content {
        margin: 0;
        padding: 0;
      }

      .dialogue-content {
        display: flex;
        flex-direction: row;
        gap: 36px;
        position: relative;
      }

      /* Page One */
      .page-one-text {
        color: var(--primary-navy);
        text-align: center;
      }
      .envelope-img {
        width: 221px;
        height: 166px;
        margin: 18px 0px;
        @media (min-width: 1000px) {
          width: 326.622px;
          height: 249px;
        }
      }

      /* Page Two */
      .page-two-text {
        color: var(--primary-navy);
        text-align: left;
        margin: 0 0 14px;
      }

      .letter-container {
        display: flex;
        position: relative;
        align-items: center;
        justify-content: center;
      }

      .letter-img {
        position: absolute;
        top: -90px;
        left: -74px;
        width: 502px;
        height: 396px;
        z-index: 0;
        outline: none;
        -webkit-tap-highlight-color: transparent;
        @media (min-width: 1000px) {
          width: 753px;
          height: 594px;
          top: -135px;
          left: -111px;
        }
      }

      .letter-text {
        width: 396px;
        /* Top and Left pixel offsets based on asset placement */
        padding: 10px 17px 0;
        box-sizing: border-box;
        z-index: 1;
        @media (min-width: 1000px) {
          width: 594px;
          padding: 15px 25.5px 0;
        }
      }

      #buttons {
        display: flex;
        justify-content: center;
        width: 100%;
        flex-direction: row;
        margin-top: 16px;
        gap: 26px;
      }

      #buttons > button {
        flex-grow: 1;
      }

      /* Page Seven */
      .market-stall-content-header {
        display: flex;
        flex-direction: column;
        background: var(--primary);
        width: 100%;
        height: 36px;
        flex-grow: 0;
        @media (min-width: 1000px) {
          height: 54px;
        }
      }

      .market-stall-content-header-text {
        color: var(--primary-navy);
        text-align: center;
        font-family: Ubuntu;
        font-size: 20px;
        font-weight: 700;
        margin: 7px 0;
        @media (min-width: 1000px) {
          font-size: 30px;
        }
      }

      .market-stall-content-background {
        display: flex;
        position: relative;
        flex-direction: column;
        background: var(--white);
        width: 408px;
        height: 266px;
        border: 3px solid var(--primary-navy);
        border-radius: 4px;
        @media (min-width: 1000px) {
          width: 618px;
          height: 399px;
        }

        @media (max-height: 320px) and (max-width: 999px) {
          height: 192px;
        }
      }

      .market-stall-content-container {
        width: 100%;
        flex-grow: 1;
      }

      .market-stall-pill-container {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .market-stall-pill {
        width: 136px;
        height: 16px;
        padding: 4px 10px;
        border-radius: 12px;
        margin-top: 8px;
        @media (min-width: 1000px) {
          width: 204px;
          height: 24px;
          padding: 6px 15px;
          border-radius: 18px;
          margin-top: 12px;
        }
      }

      .market-stall-pill-colour {
        background: var(--marketStallPill);
      }

      .market-stall-type-pill-text {
        color: var(--primary-navy);
        text-align: center;
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        @media (min-width: 1000px) {
          font-size: 21px;
        }
      }

      .market-stall-img-container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 8px;
        @media (min-width: 1000px) {
          margin-top: 12px;
        }
      }

      .market-stall-img {
        width: 144px;
        height: 144px;
        @media (min-width: 1000px) {
          height: 216px;
          width: 216px;
        }

        @media (max-height: 320px) and (max-width: 999px) {
          height: 72px;
        }
      }

      .market-stall-img > img {
        max-width: 100%;
        max-height: 100%;
      }

      .open-btn-container {
        display: flex;
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translate(-50%, 50%);
      }

      confetti-juice {
        touch-action: none;
        pointer-events: none;
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        top: 0;
        left: 0;
        margin: 0;
      }
    `],et([Mt({context:Rt})],Gr.prototype,"game",2),et([Ye("confetti-juice")],Gr.prototype,"confettiJuice",2),et([It({type:Boolean})],Gr.prototype,"confettiDisabled",2),Gr=et([lt("intro-flow")],Gr);var po=at`
  :host {
    width: 100%;
    height: 100%;
    display: grid;
    place-items: center;
  }
  dialog {
    width: 70%;
    height: 70%;

    display: flex;
    flex-direction: column;
  }
  .content {
    width: 100%;
    height: 50%;
  }
  .buttons {
    width: 100%;
    height: 50%;
  }
`;var vh=class extends yt{render(){return q`
      <button class="remove-btn-style " @click=${Je}>
        <img
          src=${st.Cross_Active}
          height="20px"
          width="20px"
          class="padding"
          draggable="false"
        />
      </button>
    `}disconnectedCallback(){super.disconnectedCallback(),xt("PopOut")}};vh.styles=[dr,at`
      .padding {
        padding: 8px 8px 0 0;
      }
    `],vh=et([lt("popup-close-button")],vh);var mo=class extends yt{constructor(){super(...arguments);this.onHire=()=>{this.dispatchEvent(new CustomEvent("accept")),xt("Purchase")}}firstUpdated(){xt("PopIn")}render(){let n=this.game.getModel().allEmployees().length-1,d=this.game.getModel().getGold()<this.game.getModel().getEmployeeHiringCost();return q`
      <arrow-container smallGreen>
        <div class="header">
          <div class="header-text">${tt("HireStaff_HireStaff")}</div>
          <popup-close-button></popup-close-button>
        </div>
        <div class="content">
          <div class="staff-img-container">
            <img
              class="staff-img"
              src=${JS[n]}
              draggable="false"
            />
          </div>
          <div class="salary-text-container">
            <div class="salary-text">${tt("HireStaff_Heading")}</div>
            <div class="salary-text subheading">
              ${tt("HireStaff_Body")}
            </div>
          </div>
          <div class="salary-amount-container ">
            <img
              class="coin-line-icon"
              src=${st.CoinLine}
              draggable="false"
            />
            <div class="salary-text">
              ${this.game.getModel().getEmployeeHiringCost()}
            </div>
          </div>
        </div>
        <div class="hire-btn-container">
          <app-button
            class="popIn game-button"
            ?shorter-height=${!0}
            imgURL=${st.CoinColor}
            text=${this.game.getModel().getEmployeeHiringCost()}
            @click=${this.onHire}
            ?disabled=${d}
          ></app-button>
        </div>
      </arrow-container>
    `}};mo.styles=[Kt,po,at`
      arrow-container {
        width: 224px;
        height: 144px;
        position: absolute;
        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 20px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
      }
      .header {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
      }

      .header-text {
        display: flex;
        padding: 6px 6px 7px;
        font-size: 20px;
        font-weight: 700;
      }

      .content {
        width: 100%;
        height: 108px;
        display: flex;
        flex-direction: row;
      }

      .staff-img {
        width: 26px;
        height: 56px;
      }

      .staff-img-container {
        margin: 12px 14px 38px 18px;
      }

      .salary-text-container {
        margin-top: 24px;
        gap: 2px;
      }

      .salary-text {
        font-size: 14px;
        font-weight: 700;
      }

      .salary-text.subheading {
        font-weight: 500;
      }

      .salary-amount-container {
        display: flex;
        gap: 2px;
        margin-left: 12px;
        margin-top: 42px;
      }

      .coin-line-icon {
        width: 16px;
        height: 16px;
      }

      .hire-btn-container {
        display: flex;
        justify-content: center;
        transform: translate(0, -50%);
      }
    `],et([Mt({context:Rt})],mo.prototype,"game",2),mo=et([lt("hire-dialog")],mo);var Zn=class extends yt{constructor(){super(...arguments);this.renderDialogueArrow=n=>q`
    <dialog-arrow direction=${n?"left":"right"}></dialog-arrow>
  `}render(){return q`
      <div class="speech-bubble popIn">
        <div
          class=${Yi({"header-color":!0,small:this.smallGreen,events:this.eventsContainer})}
        >
          <slot></slot>
        </div>

        ${Bt(this.hasArrow,()=>this.renderDialogueArrow(this.isLeft))}
      </div>
    `}};Zn.styles=[Kt,Qt,at`
      .speech-bubble {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        border-radius: 6px;
        border: 2px solid var(--primary-navy);
        background: var(--primary-white);
        display: flex;
        position: relative;
        flex-direction: column;
      }

      .header-color {
        width: 100%;
        height: 67px;
        background-color: var(--primary-teal-main);
        border-radius: 4px 4px 0px 0px;
        position: relative;
        top: 0px;
      }

      .header-color.small {
        height: 36px;
      }

      .header-color.events {
        @media (min-width: 1000px) {
          height: 56px;
        }
      }
    `],et([It({type:Boolean})],Zn.prototype,"isLeft",2),et([It({type:Boolean})],Zn.prototype,"smallGreen",2),et([It({type:Boolean})],Zn.prototype,"hasArrow",2),et([It({type:Boolean})],Zn.prototype,"eventsContainer",2),Zn=et([lt("arrow-container")],Zn);var Rc=(i,t)=>{switch(t){case"coffeeShop":return ZS[i];case"clothing":return QS[i];case"toiletries":return tE[i];case"technology":return qS[i];case"stationary":return _S[i]}};var vo=class extends Ct{constructor(){super(...arguments);this.onAccept=()=>{this.game.launchProduct(),xt("Purchase"),Je()}}connectedCallback(){super.connectedCallback(),this.idx=this.game.getNextAvailableProductIdx(),this.businessType=this.game.getModel().getShop().getBusinessType(),this.productInfo=this.game.gameplayParams.products.find(n=>n.category===this.businessType).products[this.idx]}firstUpdated(){xt("PopIn")}render(){let n=this.game.getModel().getGold()<this.game.getModel().getShop().nextProductCost;return q`
      <arrow-container smallGreen>
        <div class="header">
          <div class="header-text">${tt("Product_LaunchProduct")}</div>
          <popup-close-button></popup-close-button>
        </div>
        <div class="product-body">
          <img
            src=${Rc(this.idx,this.businessType)}
            height="48px"
            style="padding-right: 14px;"
            draggable="false"
          />

          <div class="product-info">
            <div class="line-wrapper">
              <div class="line-start">${tt("Product_Max")}</div>
              <div class="line-layout">x${this.productInfo.stockLimit}</div>
            </div>
            <div class="line-wrapper">
              <div class="line-start">${tt("Product_Cost")}</div>
              <div class="line-layout">
                <img
                  height="16px"
                  src=${st.CoinLine}
                  draggable="false"
                />${this.productInfo.cost}
              </div>
            </div>
            <div class="line-wrapper">
              <div class="line-start">${tt("Product_SellingPrice")}</div>
              <div class="line-layout">
                <img
                  height="16px"
                  src=${st.CoinLine}
                  draggable="false"
                />${this.productInfo.cost+1}-${this.productInfo.maxCost}
              </div>
            </div>
          </div>
        </div>

        <div class="btn-wrapper">
          <app-button
            class="popIn game-button"
            @click=${()=>this.onAccept()}
            ?disabled=${n}
          >
            <img
              src=${st.CoinColor}
              height="28"
              style=${n?"opacity: 0.3":""}
            />
            ${this.game.getModel().getShop().nextProductCost??""}
          </app-button>
        </div>
      </arrow-container>
    `}};vo.styles=[Kt,at`
      arrow-container {
        width: fit-content;
        height: 141px;
        position: absolute;
        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 20px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
      }

      .header {
        display: flex;
        width: 100%;
        height: 36px;
        justify-content: space-between;
      }

      .header-text {
        padding: 6px;
      }

      .product-body {
        width: fit-content;
        display: flex;
        flex-direction: row;
        padding: 14px 18px 15px;
        justify-content: center;
      }

      .product-info {
        display: flex;
        font-size: 14px;
        font-weight: 500;
        flex-direction: column;
        width: fit-content;
      }

      .line-wrapper {
        display: flex;
        justify-content: space-between;
        min-width: 130px;
        padding-bottom: 1px;
        flex-grow: 1;
      }

      app-button {
        align-items: center;
      }

      .btn-wrapper {
        display: flex;
        justify-content: center;
      }

      .line-layout {
        display: flex;
        align-items: center;
        gap: 2px;
        justify-content: flex-start;
        flex-grow: 1;
      }

      .line-start {
        min-width: 81px;
        padding-right: 16px;
      }
    `],et([Mt({context:Rt})],vo.prototype,"game",2),vo=et([lt("add-product-dialog")],vo);var Mc={"shop-2":{titleKey:"Event_LevelUp_Heading",bodyKey:["Event_Level_02_Upgrade_Body01","Event_Level_02_Upgrade_Body02"],images:[ue.levelUp_1]},"shop-3":{titleKey:"Event_LevelUp_Heading",bodyKey:["Event_Level_03_Upgrade_Body01","Event_Level_03_Upgrade_Body02"],images:[ue.levelUp_2]},"shop-4":{titleKey:"Event_LevelUp_Heading",bodyKey:["Event_Level_04_Upgrade_Body01","Event_Level_04_Upgrade_Body02"],images:[ue.levelUp_3]},"shop-5":{titleKey:"Event_LevelUp_Heading",bodyKey:["Event_Level_05_Upgrade_Body01"],images:[ue.levelUp_4]},"first-profit":{titleKey:"Event_Profit_Heading",bodyKey:["Event_Profit_Body_01","Event_Profit_Body_02"],images:[ue.tip]},"first-loss":{titleKey:"Event_Loss_Heading",bodyKey:["Event_Loss_Body01","Event_Loss_Body02"],images:[ue.tip]},"hired-1st-staff":{titleKey:"Event_NewStaff_Heading",bodyKey:["Event_Staff01_Body01","Event_Staff01_Body02"],images:[ue.hire_staff]},"hired-2nd-staff":{titleKey:"Event_NewStaff_Heading",bodyKey:["Event_Staff02_Body01","Event_Staff02_Body02"],images:[ue.hire_staff]},"hired-3rd-staff":{titleKey:"Event_NewStaff_Heading",bodyKey:["Event_Staff03_Body01"],images:[ue.hire_staff]},"hired-4th-staff":{titleKey:"Event_NewStaff_Heading",bodyKey:["Event_Staff04_Body01"],images:[ue.hire_staff]},"hired-5th-staff":{titleKey:"Event_NewStaff_Heading",bodyKey:["Event_Staff05_Body01"],images:[ue.hire_staff]},"hired-6th-staff":{titleKey:"Event_NewStaff_Heading",bodyKey:["Event_Staff06_Body01"],images:[ue.hire_staff]},"product-1-added":{titleKey:"Event_FirstProduct_Heading",bodyKey:["Event_FirstProduct_Body01","Event_FirstProduct_Body02","Event_FirstProduct_Body03"],images:[ue.first_product]},"lost-sale-price":{titleKey:"Event_Tip_Heading",bodyKey:["Event_Expensive_Body01","Event_Expensive_Body02"],images:[Zt.expensive_1,Zt.expensive_2,Zt.expensive_3,Zt.expensive_4]},"lost-sale-price-n":{titleKey:"Event_Tip_Heading",bodyKey:["Not_Implemented"]},"lost-sale-no-stock":{titleKey:"Event_Tip_Heading",bodyKey:["Event_NoStock_Body_01"],images:[Zt.stock_1,Zt.stock_2,Zt.stock_3]},"lost-sale-no-stock-n":{titleKey:"Event_Tip_Heading",bodyKey:["Not_Implemented"]},"lost-sale-no-staff":{titleKey:"Event_StaffNeeded_Heading",bodyKey:["Event_StaffNeeded_Body01","Event_StaffNeeded_Body02"],images:[Zt.staff_1,Zt.staff_2,Zt.staff_3]},"lost-sale-no-staff-n":{titleKey:"Event_StaffNeeded_Heading",bodyKey:["Not_Implemented"]},"lost-sale-no-marketing":{titleKey:"Event_NoMarketing_Heading",bodyKey:["Event_NoMarketing_Body01","Event_NoMarketing_Body02"],images:[Zt.marketing_1,Zt.marketing_2,Zt.marketing_3,Zt.marketing_4]},"lost-sale-no-marketing-n":{titleKey:"Event_NoMarketing_Heading",bodyKey:["Not_Implemented"]},"business-value-1":{titleKey:"Event_BusinessValue_01_Heading",bodyKey:["Event_BusinessValue_01_Body"],images:[ue.exclamation]},"business-value-2":{titleKey:"Event_BusinessValue_02_Heading",bodyKey:["Event_BusinessValue_02_Body"],images:[ue.tip]},"business-value-3":{titleKey:"Event_BusinessValue_03_Heading",bodyKey:["Event_BusinessValue_03_Body"],images:[ue.tip]},"business-value-4":{titleKey:"Event_BusinessValue_04_Heading",bodyKey:["Event_BusinessValue_04_Body"],images:[ue.tip]},"business-value-5":{titleKey:"Event_BusinessValue_05_Heading",bodyKey:["Event_BusinessValue_05_Body"],images:[ue.tip]},"business-value-6":{titleKey:"Not_Implemented",bodyKey:["Not_Implemented"]},"cash-value":{titleKey:"Not_Implemented",bodyKey:["Not_Implemented"]},"salary-first-due-1-second":{titleKey:"Event_SalaryDue_Heading",bodyKey:["Event_SalaryDue_Body01","Event_SalaryDue_Body02"],images:[Zt.salary_1,Zt.salary_2]},"salary-first-due-30-seconds":{titleKey:"Event_Strike_Heading",bodyKey:["Event_Strike_Body"],images:[Zt.salary_1,Zt.salary_2]},"number-of-sales-equals-1":{titleKey:"Event_FirstSale_Heading",bodyKey:["Event_FirstSale_Body01","Event_FirstSale_Body02"],images:[Zt.firstSale_1,Zt.firstSale_2,Zt.firstSale_3]},"number-of-sales-equals-n":{titleKey:"Not_Implemented",bodyKey:["Not_Implemented"]},"cash-cost-of-next-product-x":{titleKey:"Event_Expand_Items_Heading",bodyKey:["Event_Expand_Items_Body"],images:[ue.time_expand]},"cash-cost-of-next-staff-x":{titleKey:"Event_Expand_Staff_Heading",bodyKey:["Event_Expand_Staff_Body"],images:[Zt.staff_1,Zt.staff_2,Zt.staff_3]},"payday-1":{titleKey:"Event_AfterPayday01_Heading",bodyKey:["Event_AfterPayday01_Body01","Event_AfterPayday01_Body02","Event_AfterPayday01_Body03"],images:[ue.tip]},"payday-2":{titleKey:"Event_AfterPayday02_Heading",bodyKey:["Event_AfterPayday02_Body01"],images:[Zt.marketing_1,Zt.marketing_2,Zt.marketing_3,Zt.marketing_4]},"payday-6":{titleKey:"Event_AfterPayday06_Heading",bodyKey:["Event_AfterPayday06_Body01","Event_AfterPayday06_Body02"],images:[ue.business_value]},"payday-11":{titleKey:"Event_AfterPayday011_Heading",bodyKey:["Event_AfterPayday011_Body01"],images:[ue.business_value]}};var nF=1300,Vs=class extends Tt(Ct){constructor(){super(...arguments);this.eventTimeout=void 0;this.closeModal=()=>{let n=Gt.eventQueue.value;if(n.length===0)return;let{cash:d,businessValue:r}=n[0];d&&xt("Sale"),this.game.getModel().onEvent({gold:d,value:r}),xt("PopOut"),this.eventTimeout&&(clearInterval(this.eventTimeout.interval),this.eventTimeout=void 0),nb()};this.nextPicture=()=>{!this.eventTimeout||!this.eventTimeout.images||(this.eventTimeout.index++,this.eventTimeout.index>=this.eventTimeout.images.length&&(this.eventTimeout.index=0),this.imgUrl=this.eventTimeout.images[this.eventTimeout.index])};this.createImgInterval=n=>{if(this.eventTimeout&&(clearInterval(this.eventTimeout.interval),this.eventTimeout=void 0),!Mc[n[0].id].images)return;let d=setInterval(this.nextPicture,nF);this.eventTimeout={id:n[0].id,index:0,images:Mc[n[0].id].images,interval:d},this.imgUrl=this.eventTimeout.images[this.eventTimeout.index]}}firstUpdated(){xt("PopIn")}render(){let n=Gt.eventQueue.value;if(n.length===0)return At;let{titleKey:d,bodyKey:r}=Mc[n[0].id],{cash:m,businessValue:e}=n[0];return(!this.eventTimeout||n[0].id!==this.eventTimeout.id)&&this.createImgInterval(n),q`
      <arrow-container smallGreen eventsContainer>
        <div class="header">
          <div class="header-text">${tt(d)}</div>
          <popup-close-button @click=${this.closeModal}></popup-close-button>
        </div>
        <div class="content">
          <div class="left-container">
            <div class="img-container">
              <img class="img-size" src=${this.imgUrl} draggable="false" />
            </div>
            <div class="cash-and-business-value-container">
              ${Bt(m,()=>q`
                  <div class="cash-and-business-value-content">
                    <div class="cash-and-business-value-text">
                      ${tt("Event_Cash")}
                    </div>
                    <div class="coin-and-number">
                      <img
                        class="coin-line-icon"
                        src=${st.CoinLine}
                        draggable="false"
                      />
                      <div class="number">${m||At}</div>
                    </div>
                  </div>
                `)}
              ${Bt(e,()=>q` <div class="cash-and-business-value-content">
                    <div class="cash-and-business-value-text">
                      ${tt("Event_BusinessValue")}
                    </div>
                    <div class="coin-and-number">
                      <img
                        class="coin-line-icon "
                        src=${st.CoinLine}
                        draggable="false"
                      />
                      <div class="number">${e||At}</div>
                    </div>
                  </div>`)}
            </div>
          </div>
          <div class="right-container">
            <div class="event-text">
              ${r.map(u=>q`<p>${tt(u)}</p>`)}
            </div>
          </div>
        </div>
        <div class="btn-container">
          <app-button
            class="popIn game-button"
            text=${tt(m||e?"Event_Claim":"Event_Dismiss")}
            @click=${this.closeModal}
          ></app-button>
        </div>
      </arrow-container>
    `}};Vs.styles=[Kt,at`
      :host {
        display: flex;
        font-family: Ubuntu;
        color: var(--primary-navy);
        font-style: normal;
        line-height: normal;
      }

      p {
        margin-block-start: 0px;
      }

      .header {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
      }

      .header-text {
        display: flex;
        padding: 6px 10px 7px;
        font-size: 20px;
        font-weight: 700;

        @media (min-width: 1000px) {
          padding: 10px 12px 7px;
          font-size: 32px;
        }
      }

      .content {
        width: 100%;
        height: 214px;
        display: flex;
        flex-direction: row;
        box-sizing: border-box;
        gap: 14px;
        padding: 12px 14px 8px;

        @media (min-width: 1000px) {
          height: 240px;
          padding: 17px 24px 22px 30px;
          gap: 22px;
        }
      }

      .left-container {
        display: flex;
        gap: 8px;
        flex-direction: column;
      }

      .img-container {
        display: flex;
        width: 204px;
        height: 108px;
      }

      .cash-and-business-value-container {
        display: flex;
        width: 204px;
        height: fit-content;
        border-radius: 4px;
        background-color: var(--secondary-violet-semi-transparent);
        flex-direction: column;
        gap: 4px;
      }

      .cash-and-business-value-content {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        padding: 8px;
      }

      .cash-and-business-value-text {
        font-size: 14px;
        font-weight: 500;
      }

      .coin-line-icon {
        width: 16px;
        height: 16px;
      }

      .right-container {
        display: flex;
        flex-direction: column;
      }

      .event-text {
        font-size: 14px;
        font-weight: 400;

        @media (min-width: 1000px) {
          font-size: 18px;
        }
      }

      .btn-container {
        display: flex;
        justify-content: center;
        transform: translate(0, -50%);
      }

      .coin-and-number {
        display: flex;
        flex-direction: row;
        gap: 4px;
        width: fit-content;
      }

      .number {
        position: relative;
        font-weight: 700;
        text-align: right;
        font-size: 14px;
        font-weight: 700;
      }

      .img-size {
        width: 204px;
        height: 108px;
      }

      arrow-container {
        width: 476px;
        height: 254px;

        @media (min-width: 1000px) {
          width: 758px;
          height: 300px;
        }
      }
    `],et([Mt({context:Rt})],Vs.prototype,"game",2),et([qt()],Vs.prototype,"imgUrl",2),Vs=et([lt("event-modal")],Vs);var go=class extends Tt(yt){constructor(){super(...arguments);this.payEmployee=()=>{this.game.payEmployee(this.employee),Je()}}connectedCallback(){super.connectedCallback();let n=pt.dialog.value.props;!n||!(n instanceof Kn)?(ze("[pay-employee-dialog] Wrong properties passed to this dialog!",pt.dialog.value),Je()):this.employee=n}firstUpdated(){xt("PopIn")}render(){let n=this.game.getModel().getGold()>=this.employee.getCost();return q`
      <arrow-container smallGreen>
        <div class="green-header">
          <div class="heading-padding">${tt("Staff_Heading")}</div>
          <popup-close-button></popup-close-button>
        </div>

        <div class="body">
          <img src=${st.AlertPip} height="16px" draggable="false" />
          <div style="padding-left: 14px">${tt("Staff_Body")}</div>
        </div>

        <div class="btn-wrapper">
          <app-button @click=${this.payEmployee} ?disabled=${!n}>
            <img
              src=${st.CoinColor}
              height="28px"
              style=${n?"":"opacity: 0.3"}
            />
            ${this.employee.getCost()}
          </app-button>
        </div>
      </arrow-container>
    `}};go.styles=[po,je,at`
      arrow-container {
        width: 146px;
        height: 108px;

        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 20px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        display: flex;
        flex-direction: column;
      }

      .heading-padding {
        padding: 6px 8px;
      }

      .green-header {
        width: 100%;
        height: 36px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .body {
        display: flex;
        font-size: 14px;
        font-weight: 500;
        padding: 14px;
      }

      .btn-wrapper {
        display: flex;
        justify-content: center;
      }
    `],et([Mt({context:Rt})],go.prototype,"game",2),go=et([lt("pay-employee-dialog")],go);function pZ(i){var t,n,d,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,d=Symbol.iterator);r--;){if(n&&(t=i[n])!=null)return t.call(i);if(d&&(t=i[d])!=null)return new Oc(t.call(i));n="@@asyncIterator",d="@@iterator"}throw new TypeError("Object is not async iterable")}function Oc(i){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var d=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:d}})}return Oc=function(n){this.s=n,this.n=n.next},Oc.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var d=this.s.return;return d===void 0?Promise.resolve({value:n,done:!0}):t(d.apply(this.s,arguments))},throw:function(n){var d=this.s.return;return d===void 0?Promise.reject(n):t(d.apply(this.s,arguments))}},new Oc(i)}var Dg;function mZ(i,t,n,d){Dg||(Dg=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103);var r=i&&i.defaultProps,m=arguments.length-3;if(t||m===0||(t={children:void 0}),m===1)t.children=d;else if(m>1){for(var e=new Array(m),u=0;u<m;u++)e[u]=arguments[u+3];t.children=e}if(t&&r)for(var g in r)t[g]===void 0&&(t[g]=r[g]);else t||(t=r||{});return{$$typeof:Dg,type:i,key:n===void 0?null:""+n,ref:null,props:t,_owner:null}}function eC(i,t){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);t&&(d=d.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),n.push.apply(n,d)}return n}function So(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(d){$g(i,d,n[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(d){Object.defineProperty(i,d,Object.getOwnPropertyDescriptor(n,d))})}return i}function iC(i){return iC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iC(i)}function nC(){nC=function(r,m){return new n(r,void 0,m)};var i=RegExp.prototype,t=new WeakMap;function n(r,m,e){var u=new RegExp(r,m);return t.set(u,e||t.get(r)),zs(u,n.prototype)}function d(r,m){var e=t.get(m);return Object.keys(e).reduce(function(u,g){return u[g]=r[e[g]],u},Object.create(null))}return rF(n,RegExp),n.prototype.exec=function(r){var m=i.exec.call(this,r);return m&&(m.groups=d(m,this)),m},n.prototype[Symbol.replace]=function(r,m){if(typeof m=="string"){var e=t.get(this);return i[Symbol.replace].call(this,r,m.replace(/\$<([^>]+)>/g,function(g,c){return"$"+e[c]}))}if(typeof m=="function"){var u=this;return i[Symbol.replace].call(this,r,function(){var g=arguments;return typeof g[g.length-1]!="object"&&(g=[].slice.call(g)).push(d(g,u)),m.apply(this,g)})}return i[Symbol.replace].call(this,r,m)},nC.apply(this,arguments)}function LC(i){this.wrapped=i}function yh(i){var t,n;function d(m,e){try{var u=i[m](e),g=u.value,c=g instanceof LC;Promise.resolve(c?g.wrapped:g).then(function(s){c?d(m==="return"?"return":"next",s):r(u.done?"return":"normal",s)},function(s){d("throw",s)})}catch(s){r("throw",s)}}function r(m,e){switch(m){case"return":t.resolve({value:e,done:!0});break;case"throw":t.reject(e);break;default:t.resolve({value:e,done:!1})}(t=t.next)?d(t.key,t.arg):n=null}this._invoke=function(m,e){return new Promise(function(u,g){var c={key:m,arg:e,resolve:u,reject:g,next:null};n?n=n.next=c:(t=n=c,d(m,e))})},typeof i.return!="function"&&(this.return=void 0)}function vZ(i){return function(){return new yh(i.apply(this,arguments))}}function gZ(i){return new LC(i)}function yZ(i,t){var n={},d=!1;function r(m,e){return d=!0,e=new Promise(function(u){u(i[m](e))}),{done:!1,value:t(e)}}return n[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},n.next=function(m){return d?(d=!1,m):r("next",m)},typeof i.throw=="function"&&(n.throw=function(m){if(d)throw d=!1,m;return r("throw",m)}),typeof i.return=="function"&&(n.return=function(m){return d?(d=!1,m):r("return",m)}),n}function rC(i,t,n,d,r,m,e){try{var u=i[m](e),g=u.value}catch(c){return void n(c)}u.done?t(g):Promise.resolve(g).then(d,r)}function zc(i){return function(){var t=this,n=arguments;return new Promise(function(d,r){var m=i.apply(t,n);function e(g){rC(m,d,r,e,u,"next",g)}function u(g){rC(m,d,r,e,u,"throw",g)}e(void 0)})}}function xZ(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function sC(i,t){for(var n=0;n<t.length;n++){var d=t[n];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function SZ(i,t,n){return t&&sC(i.prototype,t),n&&sC(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function EZ(i,t){for(var n in t)(m=t[n]).configurable=m.enumerable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(i,n,m);if(Object.getOwnPropertySymbols)for(var d=Object.getOwnPropertySymbols(t),r=0;r<d.length;r++){var m,e=d[r];(m=t[e]).configurable=m.enumerable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(i,e,m)}return i}function TZ(i,t){for(var n=Object.getOwnPropertyNames(t),d=0;d<n.length;d++){var r=n[d],m=Object.getOwnPropertyDescriptor(t,r);m&&m.configurable&&i[r]===void 0&&Object.defineProperty(i,r,m)}return i}function $g(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function aC(){return aC=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(i[d]=n[d])}return i},aC.apply(this,arguments)}function bZ(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&d.push.apply(d,Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),d.forEach(function(r){$g(i,r,n[r])})}return i}function rF(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&zs(i,t)}function CZ(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,zs(i,t)}function Eo(i){return Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Eo(i)}function zs(i,t){return zs=Object.setPrototypeOf||function(n,d){return n.__proto__=d,n},zs(i,t)}function OC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ug(i,t,n){return Ug=OC()?Reflect.construct:function(d,r,m){var e=[null];e.push.apply(e,r);var u=new(Function.bind.apply(d,e));return m&&zs(u,m.prototype),u},Ug.apply(null,arguments)}function sF(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function oC(i){var t=typeof Map=="function"?new Map:void 0;return oC=function(n){if(n===null||!sF(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(n))return t.get(n);t.set(n,d)}function d(){return Ug(n,arguments,Eo(this).constructor)}return d.prototype=Object.create(n.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),zs(d,n)},oC(i)}function PZ(i,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](i):i instanceof t}function wZ(i){return i&&i.__esModule?i:{default:i}}function DC(i){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(DC=function(d){return d?n:t})(i)}function AZ(i,t){if(!t&&i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var n=DC(t);if(n&&n.has(i))return n.get(i);var d={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var e=r?Object.getOwnPropertyDescriptor(i,m):null;e&&(e.get||e.set)?Object.defineProperty(d,m,e):d[m]=i[m]}return d.default=i,n&&n.set(i,d),d}function IZ(i,t){if(i!==t)throw new TypeError("Cannot instantiate an arrow function")}function RZ(i){if(i==null)throw new TypeError("Cannot destructure undefined")}function aF(i,t){if(i==null)return{};var n,d,r={},m=Object.keys(i);for(d=0;d<m.length;d++)n=m[d],t.indexOf(n)>=0||(r[n]=i[n]);return r}function MZ(i,t){if(i==null)return{};var n,d,r=aF(i,t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(i);for(d=0;d<m.length;d++)n=m[d],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(i,n)&&(r[n]=i[n])}return r}function oF(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function lF(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oF(i)}function LZ(i){var t=OC();return function(){var n,d=Eo(i);if(t){var r=Eo(this).constructor;n=Reflect.construct(d,arguments,r)}else n=d.apply(this,arguments);return lF(this,n)}}function FC(i,t){for(;!Object.prototype.hasOwnProperty.call(i,t)&&(i=Eo(i))!==null;);return i}function lC(){return lC=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(i,t,n){var d=FC(i,t);if(d){var r=Object.getOwnPropertyDescriptor(d,t);return r.get?r.get.call(arguments.length<3?i:n):r.value}},lC.apply(this,arguments)}function zg(i,t,n,d){return zg=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(r,m,e,u){var g,c=FC(r,m);if(c){if((g=Object.getOwnPropertyDescriptor(c,m)).set)return g.set.call(u,e),!0;if(!g.writable)return!1}if(g=Object.getOwnPropertyDescriptor(u,m)){if(!g.writable)return!1;g.value=e,Object.defineProperty(u,m,g)}else $g(u,m,e);return!0},zg(i,t,n,d)}function OZ(i,t,n,d,r){if(!zg(i,t,n,d||i)&&r)throw new Error("failed to set property");return n}function yo(i,t){return t||(t=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(t)}}))}function DZ(i,t){return t||(t=i.slice(0)),i.raw=t,i}function FZ(i){throw new TypeError('"'+i+'" is read-only')}function BZ(i){throw new TypeError('"'+i+'" is write-only')}function NZ(i){throw new Error('Class "'+i+'" cannot be referenced in computed property keys.')}function hF(){}function uF(i){throw new ReferenceError(i+" is not defined - temporal dead zone")}function kZ(i,t){return i===hF?uF(t):i}function VZ(i,t){return Xg(i)||fF(i,t)||Po(i,t)||Yg()}function GZ(i,t){return Xg(i)||pF(i,t)||Po(i,t)||Yg()}function dF(i){return Xg(i)||BC(i)||Po(i)||Yg()}function UZ(i){return cF(i)||BC(i)||Po(i)||mF()}function cF(i){if(Array.isArray(i))return Dc(i)}function Xg(i){if(Array.isArray(i))return i}function zZ(i,t,n){if(t&&!Array.isArray(t)&&typeof t.length=="number"){var d=t.length;return Dc(t,n!==void 0&&n<d?n:d)}return i(t,n)}function BC(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function fF(i,t){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var d,r,m=[],e=!0,u=!1;try{for(n=n.call(i);!(e=(d=n.next()).done)&&(m.push(d.value),!t||m.length!==t);e=!0);}catch(g){u=!0,r=g}finally{try{e||n.return==null||n.return()}finally{if(u)throw r}}return m}}function pF(i,t){var n=i&&(typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"]);if(n!=null){var d=[];for(n=n.call(i),_step;!(_step=n.next()).done&&(d.push(_step.value),!t||d.length!==t););return d}}function Po(i,t){if(i){if(typeof i=="string")return Dc(i,t);var n=Object.prototype.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dc(i,t):void 0}}function Dc(i,t){(t==null||t>i.length)&&(t=i.length);for(var n=0,d=new Array(t);n<t;n++)d[n]=i[n];return d}function mF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HZ(i,t){var n=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!n){if(Array.isArray(i)||(n=Po(i))||t&&i&&typeof i.length=="number"){n&&(i=n);var d=0,r=function(){};return{s:r,n:function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}},e:function(g){throw g},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,e=!0,u=!1;return{s:function(){n=n.call(i)},n:function(){var g=n.next();return e=g.done,g},e:function(g){u=!0,m=g},f:function(){try{e||n.return==null||n.return()}finally{if(u)throw m}}}}function WZ(i,t){var n=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n)return(n=n.call(i)).next.bind(n);if(Array.isArray(i)||(n=Po(i))||t&&i&&typeof i.length=="number"){n&&(i=n);var d=0;return function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Z(i){return function(){var t=i.apply(this,arguments);return t.next(),t}}function vF(i,t){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var d=n.call(i,t||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function NC(i){var t=vF(i,"string");return typeof t=="symbol"?t:String(t)}function XZ(i,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}function YZ(i,t,n,d){n&&Object.defineProperty(i,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(d):void 0})}function jZ(i,t,n,d,r){var m={};return Object.keys(d).forEach(function(e){m[e]=d[e]}),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=n.slice().reverse().reduce(function(e,u){return u(i,t,e)||e},m),r&&m.initializer!==void 0&&(m.value=m.initializer?m.initializer.call(r):void 0,m.initializer=void 0),m.initializer===void 0&&(Object.defineProperty(i,t,m),m=null),m}yh.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},yh.prototype.next=function(i){return this._invoke("next",i)},yh.prototype.throw=function(i){return this._invoke("throw",i)},yh.prototype.return=function(i){return this._invoke("return",i)};var gF=0;function KZ(i){return"__private_"+gF+++"_"+i}function JZ(i,t){if(!Object.prototype.hasOwnProperty.call(i,t))throw new TypeError("attempted to use private field on non-instance");return i}function ZZ(i,t){return kC(i,jg(i,t,"get"))}function QZ(i,t,n){return VC(i,jg(i,t,"set"),n),n}function _Z(i,t){return GC(i,jg(i,t,"set"))}function jg(i,t,n){if(!t.has(i))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(i)}function qZ(i,t,n){return Hc(i,t),Kg(n,"get"),kC(i,n)}function tQ(i,t,n,d){return Hc(i,t),Kg(n,"set"),VC(i,n,d),d}function eQ(i,t,n){return Hc(i,t),n}function iQ(){throw new TypeError("attempted to set read only static private field")}function kC(i,t){return t.get?t.get.call(i):t.value}function VC(i,t,n){if(t.set)t.set.call(i,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function GC(i,t){if(t.set)return"__destrObj"in t||(t.__destrObj={set value(n){t.set.call(i,n)}}),t.__destrObj;if(!t.writable)throw new TypeError("attempted to set read only private field");return t}function nQ(i,t,n){return Hc(i,t),Kg(n,"set"),GC(i,n)}function Hc(i,t){if(i!==t)throw new TypeError("Private static access of wrong provenance")}function Kg(i,t){if(i===void 0)throw new TypeError("attempted to "+t+" private static field before its declaration")}function rQ(i,t,n,d){var r=UC();if(d)for(var m=0;m<d.length;m++)r=d[m](r);var e=t(function(g){r.initializeInstanceElements(g,u.elements)},n),u=r.decorateClass(SF(e.d.map(yF)),i);return r.initializeClassElements(e.F,u.elements),r.runClassFinishers(e.F,u.finishers)}function UC(){UC=function(){return i};var i={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(t,n){["method","field"].forEach(function(d){n.forEach(function(r){r.kind===d&&r.placement==="own"&&this.defineClassElement(t,r)},this)},this)},initializeClassElements:function(t,n){var d=t.prototype;["method","field"].forEach(function(r){n.forEach(function(m){var e=m.placement;if(m.kind===r&&(e==="static"||e==="prototype")){var u=e==="static"?t:d;this.defineClassElement(u,m)}},this)},this)},defineClassElement:function(t,n){var d=n.descriptor;if(n.kind==="field"){var r=n.initializer;d={enumerable:d.enumerable,writable:d.writable,configurable:d.configurable,value:r===void 0?void 0:r.call(t)}}Object.defineProperty(t,n.key,d)},decorateClass:function(t,n){var d=[],r=[],m={static:[],prototype:[],own:[]};if(t.forEach(function(u){this.addElementPlacement(u,m)},this),t.forEach(function(u){if(!xh(u))return d.push(u);var g=this.decorateElement(u,m);d.push(g.element),d.push.apply(d,g.extras),r.push.apply(r,g.finishers)},this),!n)return{elements:d,finishers:r};var e=this.decorateConstructor(d,n);return r.push.apply(r,e.finishers),e.finishers=r,e},addElementPlacement:function(t,n,d){var r=n[t.placement];if(!d&&r.indexOf(t.key)!==-1)throw new TypeError("Duplicated element ("+t.key+")");r.push(t.key)},decorateElement:function(t,n){for(var d=[],r=[],m=t.decorators,e=m.length-1;e>=0;e--){var u=n[t.placement];u.splice(u.indexOf(t.key),1);var g=this.fromElementDescriptor(t),c=this.toElementFinisherExtras((0,m[e])(g)||g);t=c.element,this.addElementPlacement(t,n),c.finisher&&r.push(c.finisher);var s=c.extras;if(s){for(var o=0;o<s.length;o++)this.addElementPlacement(s[o],n);d.push.apply(d,s)}}return{element:t,finishers:r,extras:d}},decorateConstructor:function(t,n){for(var d=[],r=n.length-1;r>=0;r--){var m=this.fromClassDescriptor(t),e=this.toClassDescriptor((0,n[r])(m)||m);if(e.finisher!==void 0&&d.push(e.finisher),e.elements!==void 0){t=e.elements;for(var u=0;u<t.length-1;u++)for(var g=u+1;g<t.length;g++)if(t[u].key===t[g].key&&t[u].placement===t[g].placement)throw new TypeError("Duplicated element ("+t[u].key+")")}}return{elements:t,finishers:d}},fromElementDescriptor:function(t){var n={kind:t.kind,key:t.key,placement:t.placement,descriptor:t.descriptor};return Object.defineProperty(n,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t.kind==="field"&&(n.initializer=t.initializer),n},toElementDescriptors:function(t){if(t!==void 0)return dF(t).map(function(n){var d=this.toElementDescriptor(n);return this.disallowProperty(n,"finisher","An element descriptor"),this.disallowProperty(n,"extras","An element descriptor"),d},this)},toElementDescriptor:function(t){var n=String(t.kind);if(n!=="method"&&n!=="field")throw new TypeError(`An element descriptor's .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "`+n+'"');var d=NC(t.key),r=String(t.placement);if(r!=="static"&&r!=="prototype"&&r!=="own")throw new TypeError(`An element descriptor's .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "`+r+'"');var m=t.descriptor;this.disallowProperty(t,"elements","An element descriptor");var e={kind:n,key:d,placement:r,descriptor:Object.assign({},m)};return n!=="field"?this.disallowProperty(t,"initializer","A method descriptor"):(this.disallowProperty(m,"get","The property descriptor of a field descriptor"),this.disallowProperty(m,"set","The property descriptor of a field descriptor"),this.disallowProperty(m,"value","The property descriptor of a field descriptor"),e.initializer=t.initializer),e},toElementFinisherExtras:function(t){return{element:this.toElementDescriptor(t),finisher:uC(t,"finisher"),extras:this.toElementDescriptors(t.extras)}},fromClassDescriptor:function(t){var n={kind:"class",elements:t.map(this.fromElementDescriptor,this)};return Object.defineProperty(n,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),n},toClassDescriptor:function(t){var n=String(t.kind);if(n!=="class")throw new TypeError(`A class descriptor's .kind property must be "class", but a decorator created a class descriptor with .kind "`+n+'"');this.disallowProperty(t,"key","A class descriptor"),this.disallowProperty(t,"placement","A class descriptor"),this.disallowProperty(t,"descriptor","A class descriptor"),this.disallowProperty(t,"initializer","A class descriptor"),this.disallowProperty(t,"extras","A class descriptor");var d=uC(t,"finisher");return{elements:this.toElementDescriptors(t.elements),finisher:d}},runClassFinishers:function(t,n){for(var d=0;d<n.length;d++){var r=(0,n[d])(t);if(r!==void 0){if(typeof r!="function")throw new TypeError("Finishers must return a constructor.");t=r}}return t},disallowProperty:function(t,n,d){if(t[n]!==void 0)throw new TypeError(d+" can't have a ."+n+" property.")}};return i}function yF(i){var t,n=NC(i.key);i.kind==="method"?t={value:i.value,writable:!0,configurable:!0,enumerable:!1}:i.kind==="get"?t={get:i.value,configurable:!0,enumerable:!1}:i.kind==="set"?t={set:i.value,configurable:!0,enumerable:!1}:i.kind==="field"&&(t={configurable:!0,writable:!0,enumerable:!0});var d={kind:i.kind==="field"?"field":"method",key:n,placement:i.static?"static":i.kind==="field"?"own":"prototype",descriptor:t};return i.decorators&&(d.decorators=i.decorators),i.kind==="field"&&(d.initializer=i.value),d}function xF(i,t){i.descriptor.get!==void 0?t.descriptor.get=i.descriptor.get:t.descriptor.set=i.descriptor.set}function SF(i){for(var t=[],n=function(e){return e.kind==="method"&&e.key===m.key&&e.placement===m.placement},d=0;d<i.length;d++){var r,m=i[d];if(m.kind==="method"&&(r=t.find(n)))if(hC(m.descriptor)||hC(r.descriptor)){if(xh(m)||xh(r))throw new ReferenceError("Duplicated methods ("+m.key+") can't be decorated.");r.descriptor=m.descriptor}else{if(xh(m)){if(xh(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+m.key+").");r.decorators=m.decorators}xF(m,r)}else t.push(m)}return t}function xh(i){return i.decorators&&i.decorators.length}function hC(i){return i!==void 0&&!(i.value===void 0&&i.writable===void 0)}function uC(i,t){var n=i[t];if(n!==void 0&&typeof n!="function")throw new TypeError("Expected '"+t+"' to be a function");return n}function sQ(i,t,n){if(!t.has(i))throw new TypeError("attempted to get private field on non-instance");return n}function zC(i,t){if(t.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function aQ(i,t,n){zC(i,t),t.set(i,n)}function oQ(i,t){zC(i,t),t.add(i)}function lQ(){throw new TypeError("attempted to reassign private method")}var Hg=function(i,t){return Hg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,d){n.__proto__=d}||function(n,d){for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(n[r]=d[r])},Hg(i,t)};function hQ(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}Hg(i,t),i.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var dC=function(){return dC=Object.assign||function(i){for(var t,n=1,d=arguments.length;n<d;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i},dC.apply(this,arguments)};function uQ(i,t){var n={};for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&t.indexOf(d)<0&&(n[d]=i[d]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(d=Object.getOwnPropertySymbols(i);r<d.length;r++)t.indexOf(d[r])<0&&Object.prototype.propertyIsEnumerable.call(i,d[r])&&(n[d[r]]=i[d[r]])}return n}function ye(i,t,n,d){var r,m=arguments.length,e=m<3?t:d===null?d=Object.getOwnPropertyDescriptor(t,n):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(i,t,n,d);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(e=(m<3?r(e):m>3?r(t,n,e):r(t,n))||e);return m>3&&e&&Object.defineProperty(t,n,e),e}function dQ(i,t){return function(n,d){t(n,d,i)}}function cQ(i,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,t)}function fQ(i,t,n,d){return new(n||(n=Promise))(function(r,m){function e(c){try{g(d.next(c))}catch(s){m(s)}}function u(c){try{g(d.throw(c))}catch(s){m(s)}}function g(c){var s;c.done?r(c.value):(s=c.value,s instanceof n?s:new n(function(o){o(s)})).then(e,u)}g((d=d.apply(i,t||[])).next())})}function pQ(i,t){var n,d,r,m,e={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return m={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function u(g){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,d&&(r=2&s[0]?d.return:s[0]?d.throw||((r=d.return)&&r.call(d),0):d.next)&&!(r=r.call(d,s[1])).done)return r;switch(d=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,d=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!((r=r.length>0&&r[r.length-1])||s[0]!==6&&s[0]!==2)){e=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){e.label=s[1];break}if(s[0]===6&&e.label<r[1]){e.label=r[1],r=s;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(s);break}r[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(i,e)}catch(o){s=[6,o],d=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([g,c])}}}var HC=Object.create?function(i,t,n,d){d===void 0&&(d=n),Object.defineProperty(i,d,{enumerable:!0,get:function(){return t[n]}})}:function(i,t,n,d){d===void 0&&(d=n),i[d]=t[n]};function mQ(i,t){for(var n in i)n==="default"||Object.prototype.hasOwnProperty.call(t,n)||HC(t,i,n)}function cC(i){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&i[t],d=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&d>=i.length&&(i=void 0),{value:i&&i[d++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function EF(i,t){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var d,r,m=n.call(i),e=[];try{for(;(t===void 0||t-- >0)&&!(d=m.next()).done;)e.push(d.value)}catch(u){r={error:u}}finally{try{d&&!d.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}return e}function vQ(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(EF(arguments[t]));return i}function gQ(){for(var i=0,t=0,n=arguments.length;t<n;t++)i+=arguments[t].length;var d=Array(i),r=0;for(t=0;t<n;t++)for(var m=arguments[t],e=0,u=m.length;e<u;e++,r++)d[r]=m[e];return d}function yQ(i,t,n){if(n||arguments.length===2)for(var d,r=0,m=t.length;r<m;r++)!d&&r in t||(d||(d=Array.prototype.slice.call(t,0,r)),d[r]=t[r]);return i.concat(d||Array.prototype.slice.call(t))}function Fc(i){return this instanceof Fc?(this.v=i,this):new Fc(i)}function xQ(i,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,r=n.apply(i,t||[]),m=[];return d={},e("next"),e("throw"),e("return"),d[Symbol.asyncIterator]=function(){return this},d;function e(o){r[o]&&(d[o]=function(a){return new Promise(function(l,p){m.push([o,a,l,p])>1||u(o,a)})})}function u(o,a){try{(function(l){l.value instanceof Fc?Promise.resolve(l.value.v).then(g,c):s(m[0][2],l)})(r[o](a))}catch(l){s(m[0][3],l)}}function g(o){u("next",o)}function c(o){u("throw",o)}function s(o,a){o(a),m.shift(),m.length&&u(m[0][0],m[0][1])}}function SQ(i){var t,n;return t={},d("next"),d("throw",function(r){throw r}),d("return"),t[Symbol.iterator]=function(){return this},t;function d(r,m){t[r]=i[r]?function(e){return(n=!n)?{value:Fc(i[r](e)),done:r==="return"}:m?m(e):e}:m}}function EQ(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=i[Symbol.asyncIterator];return n?n.call(i):(i=typeof cC=="function"?cC(i):i[Symbol.iterator](),t={},d("next"),d("throw"),d("return"),t[Symbol.asyncIterator]=function(){return this},t);function d(r){t[r]=i[r]&&function(m){return new Promise(function(e,u){(function(g,c,s,o){Promise.resolve(o).then(function(a){g({value:a,done:s})},c)})(e,u,(m=i[r](m)).done,m.value)})}}}function TQ(i,t){return Object.defineProperty?Object.defineProperty(i,"raw",{value:t}):i.raw=t,i}var TF=Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t};function bQ(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var n in i)n!=="default"&&Object.prototype.hasOwnProperty.call(i,n)&&HC(t,i,n);return TF(t,i),t}function CQ(i){return i&&i.__esModule?i:{default:i}}function PQ(i,t,n,d){if(n==="a"&&!d)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?i!==t||!d:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?d:n==="a"?d.call(i):d?d.value:t.get(i)}function wQ(i,t,n,d,r){if(d==="m")throw new TypeError("Private method is not writable");if(d==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?i!==t||!r:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return d==="a"?r.call(i,n):r?r.value=n:t.set(i,n),n;}var Jg=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Zg=Symbol(),fC=new Map,Bc=class{constructor(t,n){if(this._$cssResult$=!0,n!==Zg)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){var t=fC.get(this.cssText);return Jg&&t===void 0&&(fC.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}},bF=i=>new Bc(typeof i=="string"?i:i+"",Zg),CF=function(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),d=1;d<t;d++)n[d-1]=arguments[d];var r=i.length===1?i[0]:n.reduce((m,e,u)=>m+(g=>{if(g._$cssResult$===!0)return g.cssText;if(typeof g=="number")return g;throw Error("Value passed to 'css' function must be a 'css' function result: "+g+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(e)+i[u+1],i[0]);return new Bc(r,Zg)},PF=(i,t)=>{Jg?i.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):t.forEach(n=>{var d=document.createElement("style"),r=window.litNonce;r!==void 0&&d.setAttribute("nonce",r),d.textContent=n.cssText,i.appendChild(d)})},pC=Jg?i=>i:i=>i instanceof CSSStyleSheet?(t=>{var n="";for(var d of t.cssRules)n+=d.cssText;return bF(n)})(i):i,Fg,mC=window.trustedTypes,wF=mC?mC.emptyScript:"",vC=window.reactiveElementPolyfillSupport,Wg={toAttribute(i,t){switch(t){case Boolean:i=i?wF:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,t){var n=i;switch(t){case Boolean:n=i!==null;break;case Number:n=i===null?null:Number(i);break;case Object:case Array:try{n=JSON.parse(i)}catch{n=null}}return n}},WC=(i,t)=>t!==i&&(t==t||i==i),Bg={attribute:!0,type:String,converter:Wg,reflect:!1,hasChanged:WC},Ng,Qn=class extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var n;(n=this.l)!==null&&n!==void 0||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();var t=[];return this.elementProperties.forEach((n,d)=>{var r=this._$Eh(d,n);r!==void 0&&(this._$Eu.set(r,d),t.push(r))}),t}static createProperty(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bg;if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(t,n),!n.noAccessor&&!this.prototype.hasOwnProperty(t)){var d=typeof t=="symbol"?Symbol():"__"+t,r=this.getPropertyDescriptor(t,d,n);r!==void 0&&Object.defineProperty(this.prototype,t,r)}}static getPropertyDescriptor(t,n,d){return{get(){return this[n]},set(r){var m=this[t];this[n]=r,this.requestUpdate(t,m,d)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||Bg}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;var t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){var n=this.properties,d=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(var r of d)this.createProperty(r,n[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){var n=[];if(Array.isArray(t)){var d=new Set(t.flat(1/0).reverse());for(var r of d)n.unshift(pC(r))}else t!==void 0&&n.push(pC(t));return n}static _$Eh(t,n){var d=n.attribute;return d===!1?void 0:typeof d=="string"?d:typeof t=="string"?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Em(),this.requestUpdate(),(t=this.constructor.l)===null||t===void 0||t.forEach(n=>n(this))}addController(t){var n,d;((n=this._$Eg)!==null&&n!==void 0?n:this._$Eg=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((d=t.hostConnected)===null||d===void 0||d.call(t))}removeController(t){var n;(n=this._$Eg)===null||n===void 0||n.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((t,n)=>{this.hasOwnProperty(n)&&(this._$Et.set(n,this[n]),delete this[n])})}createRenderRoot(){var t,n=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return PF(n,this.constructor.elementStyles),n}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$Eg)===null||t===void 0||t.forEach(n=>{var d;return(d=n.hostConnected)===null||d===void 0?void 0:d.call(n)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$Eg)===null||t===void 0||t.forEach(n=>{var d;return(d=n.hostDisconnected)===null||d===void 0?void 0:d.call(n)})}attributeChangedCallback(t,n,d){this._$AK(t,d)}_$ES(t,n){var d,r,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bg,e=this.constructor._$Eh(t,m);if(e!==void 0&&m.reflect===!0){var u=((r=(d=m.converter)===null||d===void 0?void 0:d.toAttribute)!==null&&r!==void 0?r:Wg.toAttribute)(n,m.type);this._$Ei=t,u==null?this.removeAttribute(e):this.setAttribute(e,u),this._$Ei=null}}_$AK(t,n){var d,r,m,e=this.constructor,u=e._$Eu.get(t);if(u!==void 0&&this._$Ei!==u){var g=e.getPropertyOptions(u),c=g.converter,s=(m=(r=(d=c)===null||d===void 0?void 0:d.fromAttribute)!==null&&r!==void 0?r:typeof c=="function"?c:null)!==null&&m!==void 0?m:Wg.fromAttribute;this._$Ei=u,this[u]=s(n,g.type),this._$Ei=null}}requestUpdate(t,n,d){var r=!0;t!==void 0&&(((d=d||this.constructor.getPropertyOptions(t)).hasChanged||WC)(this[t],n)?(this._$AL.has(t)||this._$AL.set(t,n),d.reflect===!0&&this._$Ei!==t&&(this._$E_===void 0&&(this._$E_=new Map),this._$E_.set(t,d))):r=!1),!this.isUpdatePending&&r&&(this._$Ep=this._$EC())}_$EC(){var t=this;return zc(function*(){t.isUpdatePending=!0;try{yield t._$Ep}catch(d){Promise.reject(d)}var n=t.scheduleUpdate();return n!=null&&(yield n),!t.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(this.isUpdatePending){this.hasUpdated,this._$Et&&(this._$Et.forEach((r,m)=>this[m]=r),this._$Et=void 0);var n=!1,d=this._$AL;try{(n=this.shouldUpdate(d))?(this.willUpdate(d),(t=this._$Eg)===null||t===void 0||t.forEach(r=>{var m;return(m=r.hostUpdate)===null||m===void 0?void 0:m.call(r)}),this.update(d)):this._$EU()}catch(r){throw n=!1,this._$EU(),r}n&&this._$AE(d)}}willUpdate(t){}_$AE(t){var n;(n=this._$Eg)===null||n===void 0||n.forEach(d=>{var r;return(r=d.hostUpdated)===null||r===void 0?void 0:r.call(d)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){this._$E_!==void 0&&(this._$E_.forEach((n,d)=>this._$ES(d,this[d],n)),this._$E_=void 0),this._$EU()}updated(t){}firstUpdated(t){}};Qn.finalized=!0,Qn.elementProperties=new Map,Qn.elementStyles=[],Qn.shadowRootOptions={mode:"open"},vC==null||vC({ReactiveElement:Qn}),((Fg=globalThis.reactiveElementVersions)!==null&&Fg!==void 0?Fg:globalThis.reactiveElementVersions=[]).push("1.2.1");var To=globalThis.trustedTypes,gC=To?To.createPolicy("lit-html",{createHTML:i=>i}):void 0,_n="lit$".concat((Math.random()+"").slice(9),"$"),Qg="?"+_n,AF="<".concat(Qg,">"),bo=document,Eh=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return bo.createComment(i)},Th=i=>i===null||typeof i!="object"&&typeof i!="function",$C=Array.isArray,XC=i=>{var t;return $C(i)||typeof((t=i)===null||t===void 0?void 0:t[Symbol.iterator])=="function"},gh=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,yC=/-->/g,xC=/>/g,Gs=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,SC=/'/g,EC=/"/g,YC=/^(?:script|style|textarea)$/i,jC=i=>function(t){for(var n=arguments.length,d=new Array(n>1?n-1:0),r=1;r<n;r++)d[r-1]=arguments[r];return{_$litType$:i,strings:t,values:d}},Lc=jC(1),AQ=jC(2),Co=Symbol.for("lit-noChange"),Ve=Symbol.for("lit-nothing"),TC=new WeakMap,IF=(i,t,n)=>{var d,r,m=(d=n==null?void 0:n.renderBefore)!==null&&d!==void 0?d:t,e=m._$litPart$;if(e===void 0){var u=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:null;m._$litPart$=e=new Ur(t.insertBefore(Eh(),u),u,void 0,n??{})}return e._$AI(i),e},xo=bo.createTreeWalker(bo,129,null,!1),KC=(i,t)=>{for(var n,d=i.length-1,r=[],m=t===2?"<svg>":"",e=gh,u=0;u<d;u++){for(var g=i[u],c=void 0,s=void 0,o=-1,a=0;a<g.length&&(e.lastIndex=a,(s=e.exec(g))!==null);)a=e.lastIndex,e===gh?s[1]==="!--"?e=yC:s[1]!==void 0?e=xC:s[2]!==void 0?(YC.test(s[2])&&(n=RegExp("</"+s[2],"g")),e=Gs):s[3]!==void 0&&(e=Gs):e===Gs?s[0]===">"?(e=n??gh,o=-1):s[1]===void 0?o=-2:(o=e.lastIndex-s[2].length,c=s[1],e=s[3]===void 0?Gs:s[3]==='"'?EC:SC):e===EC||e===SC?e=Gs:e===yC||e===xC?e=gh:(e=Gs,n=void 0);var l=e===Gs&&i[u+1].startsWith("/>")?" ":"";m+=e===gh?g+AF:o>=0?(r.push(c),g.slice(0,o)+"$lit$"+g.slice(o)+_n+l):g+_n+(o===-2?(r.push(void 0),u):l)}var p=m+(i[d]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[gC!==void 0?gC.createHTML(p):p,r]},Hs=class{constructor(t,n){var d,{strings:r,_$litType$:m}=t;this.parts=[];var e=0,u=0,g=r.length-1,c=this.parts,[s,o]=KC(r,m);if(this.el=Hs.createElement(s,n),xo.currentNode=this.el.content,m===2){var a=this.el.content,l=a.firstChild;l.remove(),a.append(...l.childNodes)}for(;(d=xo.nextNode())!==null&&c.length<g;){if(d.nodeType===1){if(d.hasAttributes()){var p=[];for(var h of d.getAttributeNames())if(h.endsWith("$lit$")||h.startsWith(_n)){var f=o[u++];if(p.push(h),f!==void 0){var v=d.getAttribute(f.toLowerCase()+"$lit$").split(_n),y=/([.?@])?(.*)/.exec(f);c.push({type:1,index:e,name:y[2],strings:v,ctor:y[1]==="."?kc:y[1]==="?"?Vc:y[1]==="@"?Gc:$s})}else c.push({type:6,index:e})}for(var x of p)d.removeAttribute(x)}if(YC.test(d.tagName)){var S=d.textContent.split(_n),E=S.length-1;if(E>0){d.textContent=To?To.emptyScript:"";for(var b=0;b<E;b++)d.append(S[b],Eh()),xo.nextNode(),c.push({type:2,index:++e});d.append(S[E],Eh())}}}else if(d.nodeType===8)if(d.data===Qg)c.push({type:2,index:e});else for(var T=-1;(T=d.data.indexOf(_n,T+1))!==-1;)c.push({type:7,index:e}),T+=_n.length-1;e++}}static createElement(t,n){var d=bo.createElement("template");return d.innerHTML=t,d}};function Ws(i,t){var n,d,r,m,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i,u=arguments.length>3?arguments[3]:void 0;if(t===Co)return t;var g=u!==void 0?(n=e._$Cl)===null||n===void 0?void 0:n[u]:e._$Cu,c=Th(t)?void 0:t._$litDirective$;return(g==null?void 0:g.constructor)!==c&&((d=g==null?void 0:g._$AO)===null||d===void 0||d.call(g,!1),c===void 0?g=void 0:(g=new c(i))._$AT(i,e,u),u!==void 0?((r=(m=e)._$Cl)!==null&&r!==void 0?r:m._$Cl=[])[u]=g:e._$Cu=g),g!==void 0&&(t=Ws(i,g._$AS(i,t.values),g,u)),t}var Nc=class{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n,{el:{content:d},parts:r}=this._$AD,m=((n=t==null?void 0:t.creationScope)!==null&&n!==void 0?n:bo).importNode(d,!0);xo.currentNode=m;for(var e=xo.nextNode(),u=0,g=0,c=r[0];c!==void 0;){if(u===c.index){var s=void 0;c.type===2?s=new Ur(e,e.nextSibling,this,t):c.type===1?s=new c.ctor(e,c.name,c.strings,this,t):c.type===6&&(s=new Uc(e,this,t)),this.v.push(s),c=r[++g]}u!==(c==null?void 0:c.index)&&(e=xo.nextNode(),u++)}return m}m(t){var n=0;for(var d of this.v)d!==void 0&&(d.strings!==void 0?(d._$AI(t,d,n),n+=d.strings.length-2):d._$AI(t[n])),n++}},Ur=class{constructor(t,n,d,r){var m;this.type=2,this._$AH=Ve,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=d,this.options=r,this._$Cg=(m=r==null?void 0:r.isConnected)===null||m===void 0||m}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$Cg}get parentNode(){var t=this._$AA.parentNode,n=this._$AM;return n!==void 0&&t.nodeType===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t){t=Ws(this,t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:this),Th(t)?t===Ve||t==null||t===""?(this._$AH!==Ve&&this._$AR(),this._$AH=Ve):t!==this._$AH&&t!==Co&&this.$(t):t._$litType$!==void 0?this.T(t):t.nodeType!==void 0?this.S(t):XC(t)?this.A(t):this.$(t)}M(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(t,n)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==Ve&&Th(this._$AH)?this._$AA.nextSibling.data=t:this.S(bo.createTextNode(t)),this._$AH=t}T(t){var n,{values:d,_$litType$:r}=t,m=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Hs.createElement(r.h,this.options)),r);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===m)this._$AH.m(d);else{var e=new Nc(m,this),u=e.p(this.options);e.m(d),this.S(u),this._$AH=e}}_$AC(t){var n=TC.get(t.strings);return n===void 0&&TC.set(t.strings,n=new Hs(t)),n}A(t){$C(this._$AH)||(this._$AH=[],this._$AR());var n,d=this._$AH,r=0;for(var m of t)r===d.length?d.push(n=new Ur(this.M(Eh()),this.M(Eh()),this,this.options)):n=d[r],n._$AI(m),r++;r<d.length&&(this._$AR(n&&n._$AB.nextSibling,r),d.length=r)}_$AR(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._$AA.nextSibling,d=arguments.length>1?arguments[1]:void 0;for((t=this._$AP)===null||t===void 0||t.call(this,!1,!0,d);n&&n!==this._$AB;){var r=n.nextSibling;n.remove(),n=r}}setConnected(t){var n;this._$AM===void 0&&(this._$Cg=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}},$s=class{constructor(t,n,d,r,m){this.type=1,this._$AH=Ve,this._$AN=void 0,this.element=t,this.name=n,this._$AM=r,this.options=m,d.length>2||d[0]!==""||d[1]!==""?(this._$AH=Array(d.length-1).fill(new String),this.strings=d):this._$AH=Ve}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this,d=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,m=this.strings,e=!1;if(m===void 0)t=Ws(this,t,n,0),(e=!Th(t)||t!==this._$AH&&t!==Co)&&(this._$AH=t);else{var u,g,c=t;for(t=m[0],u=0;u<m.length-1;u++)(g=Ws(this,c[d+u],n,u))===Co&&(g=this._$AH[u]),e||(e=!Th(g)||g!==this._$AH[u]),g===Ve?t=Ve:t!==Ve&&(t+=(g??"")+m[u+1]),this._$AH[u]=g}e&&!r&&this.k(t)}k(t){t===Ve?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},kc=class extends $s{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===Ve?void 0:t}},RF=To?To.emptyScript:"",Vc=class extends $s{constructor(){super(...arguments),this.type=4}k(t){t&&t!==Ve?this.element.setAttribute(this.name,RF):this.element.removeAttribute(this.name)}},Gc=class extends $s{constructor(t,n,d,r,m){super(t,n,d,r,m),this.type=5}_$AI(t){var n;if((t=(n=Ws(this,t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:this,0))!==null&&n!==void 0?n:Ve)!==Co){var d=this._$AH,r=t===Ve&&d!==Ve||t.capture!==d.capture||t.once!==d.once||t.passive!==d.passive,m=t!==Ve&&(d===Ve||r);r&&this.element.removeEventListener(this.name,this,d),m&&this.element.addEventListener(this.name,this,t),this._$AH=t}}handleEvent(t){var n,d;typeof this._$AH=="function"?this._$AH.call((d=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&d!==void 0?d:this.element,t):this._$AH.handleEvent(t)}},Uc=class{constructor(t,n,d){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=d}get _$AU(){return this._$AM._$AU}_$AI(t){Ws(this,t)}},IQ={P:"$lit$",V:_n,L:Qg,I:1,N:KC,R:Nc,D:XC,j:Ws,H:Ur,O:$s,F:Vc,B:Gc,W:kc,Z:Uc},bC=window.litHtmlPolyfillSupport,kg,Vg;bC==null||bC(Hs,Ur),((Ng=globalThis.litHtmlVersions)!==null&&Ng!==void 0?Ng:globalThis.litHtmlVersions=[]).push("2.1.2");var RQ=Qn,Us=class extends Qn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,n,d=super.createRenderRoot();return(t=(n=this.renderOptions).renderBefore)!==null&&t!==void 0||(n.renderBefore=d.firstChild),d}update(t){var n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=IF(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Dt)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Dt)===null||t===void 0||t.setConnected(!1)}render(){return Co}};Us.finalized=!0,Us._$litElement$=!0,(kg=globalThis.litElementHydrateSupport)===null||kg===void 0||kg.call(globalThis,{LitElement:Us});var CC=globalThis.litElementPolyfillSupport;CC==null||CC({LitElement:Us});var MQ={_$AK:(i,t,n)=>{i._$AK(t,n)},_$AL:i=>i._$AL};((Vg=globalThis.litElementVersions)!==null&&Vg!==void 0?Vg:globalThis.litElementVersions=[]).push("3.1.2");var MF=i=>t=>typeof t=="function"?((n,d)=>(window.customElements.define(n,d),d))(i,t):((n,d)=>{var{kind:r,elements:m}=d;return{kind:r,elements:m,finisher(e){window.customElements.define(n,e)}}})(i,t),LF=(i,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?So(So({},t),{},{finisher(n){n.createProperty(t.key,i)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,i)}};function Se(i){return(t,n)=>n!==void 0?((d,r,m)=>{r.constructor.createProperty(m,d)})(i,t,n):LF(i,t)}function LQ(i){return Se(So(So({},i),{},{state:!0}))}var OQ=(i,t,n)=>{Object.defineProperty(t,n,i)},DQ=(i,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:i}),wo=i=>{var{finisher:t,descriptor:n}=i;return(d,r)=>{var m;if(r===void 0){var e=(m=d.originalKey)!==null&&m!==void 0?m:d.key,u=n!=null?{kind:"method",placement:"prototype",key:e,descriptor:n(d.key)}:So(So({},d),{},{key:e});return t!=null&&(u.finisher=function(c){t(c,e)}),u}var g=d.constructor;n!==void 0&&Object.defineProperty(d,r,n(r)),t==null||t(g,r)}},Gg;function FQ(i){return wo({finisher:(t,n)=>{Object.assign(t.prototype[n],i)}})}function OF(i,t){return wo({descriptor:n=>{var d={get(){var m,e;return(e=(m=this.renderRoot)===null||m===void 0?void 0:m.querySelector(i))!==null&&e!==void 0?e:null},enumerable:!0,configurable:!0};if(t){var r=typeof n=="symbol"?Symbol():"__"+n;d.get=function(){var m,e;return this[r]===void 0&&(this[r]=(e=(m=this.renderRoot)===null||m===void 0?void 0:m.querySelector(i))!==null&&e!==void 0?e:null),this[r]}}return d}})}function BQ(i){return wo({descriptor:t=>({get(){var n,d;return(d=(n=this.renderRoot)===null||n===void 0?void 0:n.querySelectorAll(i))!==null&&d!==void 0?d:[]},enumerable:!0,configurable:!0})})}function NQ(i){return wo({descriptor:t=>({get(){var n=this;return zc(function*(){var d;return yield n.updateComplete,(d=n.renderRoot)===null||d===void 0?void 0:d.querySelector(i)})()},enumerable:!0,configurable:!0})})}var DF=((Gg=window.HTMLSlotElement)===null||Gg===void 0?void 0:Gg.prototype.assignedElements)!=null?(i,t)=>i.assignedElements(t):(i,t)=>i.assignedNodes(t).filter(n=>n.nodeType===Node.ELEMENT_NODE);function FF(i){var{slot:t,selector:n}=i??{};return wo({descriptor:d=>({get(){var r,m="slot"+(t?"[name=".concat(t,"]"):":not([name])"),e=(r=this.renderRoot)===null||r===void 0?void 0:r.querySelector(m),u=e!=null?DF(e,i):[];return n?u.filter(g=>g.matches(n)):u},enumerable:!0,configurable:!0})})}function kQ(i,t,n){var d,r=i;return typeof i=="object"?(r=i.slot,d=i):d={flatten:t},n?FF({slot:r,flatten:t,selector:n}):wo({descriptor:m=>({get(){var e,u,g="slot"+(r?"[name=".concat(r,"]"):":not([name])"),c=(e=this.renderRoot)===null||e===void 0?void 0:e.querySelector(g);return(u=c==null?void 0:c.assignedNodes(d))!==null&&u!==void 0?u:[]},enumerable:!0,configurable:!0})})}var VQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GQ(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function UQ(i){return i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function zQ(i){return i&&Object.prototype.hasOwnProperty.call(i,"default")&&Object.keys(i).length===1?i.default:i}function HQ(i){if(i.__esModule)return i;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(n){var d=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,d.get?d:{enumerable:!0,get:function(){return i[n]}})}),t}function WQ(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bh={exports:{}};(function(module,exports){var factory;typeof navigator<"u"&&(factory=function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(i){_useWebWorker=!!i},getWebWorker=function(){return _useWebWorker},setLocationHref=function(i){locationHref=i},getLocationHref=function(){return locationHref};function createTag(i){return document.createElement(i)}function extendPrototype(i,t){var n,d,r=i.length;for(n=0;n<r;n+=1)for(var m in d=i[n].prototype)Object.prototype.hasOwnProperty.call(d,m)&&(t.prototype[m]=d[m])}function getDescriptor(i,t){return Object.getOwnPropertyDescriptor(i,t)}function createProxyFunction(i){function t(){}return t.prototype=i,t}var audioControllerFactory=function(){function i(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return i.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].pause()},resume:function(){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].resume()},setRate:function(t){var n,d=this.audios.length;for(n=0;n<d;n+=1)this.audios[n].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new i}}(),createTypedArray=function(){function i(t,n){var d,r=0,m=[];switch(t){case"int16":case"uint8c":d=1;break;default:d=1.1}for(r=0;r<n;r+=1)m.push(d);return m}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?function(t,n){return t==="float32"?new Float32Array(n):t==="int16"?new Int16Array(n):t==="uint8c"?new Uint8ClampedArray(n):i(t,n)}:i}();function createSizedArray(i){return Array.apply(null,{length:i})}function _typeof$6(i){return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(i)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}(function(){var i,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=t.length;for(i=0;i<n;i+=1)BMMath[t[i]]=Math[t[i]]})(),BMMath.random=Math.random,BMMath.abs=function(i){if(_typeof$6(i)==="object"&&i.length){var t,n=createSizedArray(i.length),d=i.length;for(t=0;t<d;t+=1)n[t]=Math.abs(i[t]);return n}return Math.abs(i)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(i){_shouldRoundValues=!!i}function bmRnd(i){return _shouldRoundValues?Math.round(i):i}function styleDiv(i){i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.display="block",i.style.transformOrigin="0 0",i.style.webkitTransformOrigin="0 0",i.style.backfaceVisibility="visible",i.style.webkitBackfaceVisibility="visible",i.style.transformStyle="preserve-3d",i.style.webkitTransformStyle="preserve-3d",i.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(i,t,n,d){this.type=i,this.currentTime=t,this.totalTime=n,this.direction=d<0?-1:1}function BMCompleteEvent(i,t){this.type=i,this.direction=t<0?-1:1}function BMCompleteLoopEvent(i,t,n,d){this.type=i,this.currentLoop=n,this.totalLoops=t,this.direction=d<0?-1:1}function BMSegmentStartEvent(i,t,n){this.type=i,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(i,t){this.type=i,this.target=t}function BMRenderFrameErrorEvent(i,t){this.type="renderFrameError",this.nativeError=i,this.currentTime=t}function BMConfigErrorEvent(i){this.type="configError",this.nativeError=i}function BMAnimationConfigErrorEvent(i,t){this.type=i,this.nativeError=t}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(i,t,n){var d,r,m,e,u,g,c,s;switch(g=n*(1-t),c=n*(1-(u=6*i-(e=Math.floor(6*i)))*t),s=n*(1-(1-u)*t),e%6){case 0:d=n,r=s,m=g;break;case 1:d=c,r=n,m=g;break;case 2:d=g,r=n,m=s;break;case 3:d=g,r=c,m=n;break;case 4:d=s,r=g,m=n;break;case 5:d=n,r=g,m=c}return[d,r,m]}function RGBtoHSV(i,t,n){var d,r=Math.max(i,t,n),m=Math.min(i,t,n),e=r-m,u=r===0?0:e/r,g=r/255;switch(r){case m:d=0;break;case i:d=t-n+e*(t<n?6:0),d/=6*e;break;case t:d=n-i+2*e,d/=6*e;break;case n:d=i-t+4*e,d/=6*e}return[d,u,g]}function addSaturationToRGB(i,t){var n=RGBtoHSV(255*i[0],255*i[1],255*i[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(i,t){var n=RGBtoHSV(255*i[0],255*i[1],255*i[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(i,t){var n=RGBtoHSV(255*i[0],255*i[1],255*i[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var i,t,n=[];for(i=0;i<256;i+=1)t=i.toString(16),n[i]=t.length===1?"0"+t:t;return function(d,r,m){return d<0&&(d=0),r<0&&(r=0),m<0&&(m=0),"#"+n[d]+n[r]+n[m]}}(),setSubframeEnabled=function(i){subframeEnabled=!!i},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(i){expressionsPlugin=i},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(i){expressionsInterfaces=i},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(i){defaultCurveSegments=i},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(i){idPrefix$1=i},getIdPrefix=function(){return idPrefix$1};function createNS(i){return document.createElementNS(svgNS,i)}function _typeof$5(i){return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(i)}var dataManager=function(){var i,t,n=1,d=[],r={onmessage:function(){},postMessage:function(g){i({data:g})}},m={postMessage:function(g){r.onmessage({data:g})}};function e(){t||(t=function(g){if(window.Worker&&window.Blob&&getWebWorker()){var c=new Blob(["var _workerSelf = self; self.onmessage = ",g.toString()],{type:"text/javascript"}),s=URL.createObjectURL(c);return new Worker(s)}return i=g,r}(function(g){if(m.dataManager||(m.dataManager=function(){function s(T,P){var C,w,A,R,I,L,O=T.length;for(w=0;w<O;w+=1)if("ks"in(C=T[w])&&!C.completed){if(C.completed=!0,C.hasMask){var D=C.masksProperties;for(R=D.length,A=0;A<R;A+=1)if(D[A].pt.k.i)l(D[A].pt.k);else for(L=D[A].pt.k.length,I=0;I<L;I+=1)D[A].pt.k[I].s&&l(D[A].pt.k[I].s[0]),D[A].pt.k[I].e&&l(D[A].pt.k[I].e[0])}C.ty===0?(C.layers=o(C.refId,P),s(C.layers,P)):C.ty===4?a(C.shapes):C.ty===5&&E(C)}}function o(T,P){var C=function(w,A){for(var R=0,I=A.length;R<I;){if(A[R].id===w)return A[R];R+=1}return null}(T,P);return C?C.layers.__used?JSON.parse(JSON.stringify(C.layers)):(C.layers.__used=!0,C.layers):null}function a(T){var P,C,w;for(P=T.length-1;P>=0;P-=1)if(T[P].ty==="sh")if(T[P].ks.k.i)l(T[P].ks.k);else for(w=T[P].ks.k.length,C=0;C<w;C+=1)T[P].ks.k[C].s&&l(T[P].ks.k[C].s[0]),T[P].ks.k[C].e&&l(T[P].ks.k[C].e[0]);else T[P].ty==="gr"&&a(T[P].it)}function l(T){var P,C=T.i.length;for(P=0;P<C;P+=1)T.i[P][0]+=T.v[P][0],T.i[P][1]+=T.v[P][1],T.o[P][0]+=T.v[P][0],T.o[P][1]+=T.v[P][1]}function p(T,P){var C=P?P.split("."):[100,100,100];return T[0]>C[0]||!(C[0]>T[0])&&(T[1]>C[1]||!(C[1]>T[1])&&(T[2]>C[2]||!(C[2]>T[2])&&null))}var h,f=function(){var T=[4,4,14];function P(C){var w,A,R,I=C.length;for(w=0;w<I;w+=1)C[w].ty===5&&(R=void 0,R=(A=C[w]).t.d,A.t.d={k:[{s:R,t:0}]})}return function(C){if(p(T,C.v)&&(P(C.layers),C.assets)){var w,A=C.assets.length;for(w=0;w<A;w+=1)C.assets[w].layers&&P(C.assets[w].layers)}}}(),v=(h=[4,7,99],function(T){if(T.chars&&!p(h,T.v)){var P,C=T.chars.length;for(P=0;P<C;P+=1){var w=T.chars[P];w.data&&w.data.shapes&&(a(w.data.shapes),w.data.ip=0,w.data.op=99999,w.data.st=0,w.data.sr=1,w.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},T.chars[P].t||(w.data.shapes.push({ty:"no"}),w.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),y=function(){var T=[5,7,15];function P(C){var w,A,R=C.length;for(w=0;w<R;w+=1)C[w].ty===5&&(A=void 0,typeof(A=C[w].t.p).a=="number"&&(A.a={a:0,k:A.a}),typeof A.p=="number"&&(A.p={a:0,k:A.p}),typeof A.r=="number"&&(A.r={a:0,k:A.r}))}return function(C){if(p(T,C.v)&&(P(C.layers),C.assets)){var w,A=C.assets.length;for(w=0;w<A;w+=1)C.assets[w].layers&&P(C.assets[w].layers)}}}(),x=function(){var T=[4,1,9];function P(w){var A,R,I,L=w.length;for(A=0;A<L;A+=1)if(w[A].ty==="gr")P(w[A].it);else if(w[A].ty==="fl"||w[A].ty==="st")if(w[A].c.k&&w[A].c.k[0].i)for(I=w[A].c.k.length,R=0;R<I;R+=1)w[A].c.k[R].s&&(w[A].c.k[R].s[0]/=255,w[A].c.k[R].s[1]/=255,w[A].c.k[R].s[2]/=255,w[A].c.k[R].s[3]/=255),w[A].c.k[R].e&&(w[A].c.k[R].e[0]/=255,w[A].c.k[R].e[1]/=255,w[A].c.k[R].e[2]/=255,w[A].c.k[R].e[3]/=255);else w[A].c.k[0]/=255,w[A].c.k[1]/=255,w[A].c.k[2]/=255,w[A].c.k[3]/=255}function C(w){var A,R=w.length;for(A=0;A<R;A+=1)w[A].ty===4&&P(w[A].shapes)}return function(w){if(p(T,w.v)&&(C(w.layers),w.assets)){var A,R=w.assets.length;for(A=0;A<R;A+=1)w.assets[A].layers&&C(w.assets[A].layers)}}}(),S=function(){var T=[4,4,18];function P(w){var A,R,I;for(A=w.length-1;A>=0;A-=1)if(w[A].ty==="sh")if(w[A].ks.k.i)w[A].ks.k.c=w[A].closed;else for(I=w[A].ks.k.length,R=0;R<I;R+=1)w[A].ks.k[R].s&&(w[A].ks.k[R].s[0].c=w[A].closed),w[A].ks.k[R].e&&(w[A].ks.k[R].e[0].c=w[A].closed);else w[A].ty==="gr"&&P(w[A].it)}function C(w){var A,R,I,L,O,D,V=w.length;for(R=0;R<V;R+=1){if((A=w[R]).hasMask){var B=A.masksProperties;for(L=B.length,I=0;I<L;I+=1)if(B[I].pt.k.i)B[I].pt.k.c=B[I].cl;else for(D=B[I].pt.k.length,O=0;O<D;O+=1)B[I].pt.k[O].s&&(B[I].pt.k[O].s[0].c=B[I].cl),B[I].pt.k[O].e&&(B[I].pt.k[O].e[0].c=B[I].cl)}A.ty===4&&P(A.shapes)}}return function(w){if(p(T,w.v)&&(C(w.layers),w.assets)){var A,R=w.assets.length;for(A=0;A<R;A+=1)w.assets[A].layers&&C(w.assets[A].layers)}}}();function E(T){T.t.a.length===0&&T.t.p}var b={completeData:function(T){T.__complete||(x(T),f(T),v(T),y(T),S(T),s(T.layers,T.assets),function(P,C){if(P){var w=0,A=P.length;for(w=0;w<A;w+=1)P[w].t===1&&(P[w].data.layers=o(P[w].data.refId,C),s(P[w].data.layers,C))}}(T.chars,T.assets),T.__complete=!0)}};return b.checkColors=x,b.checkChars=v,b.checkPathProperties=y,b.checkShapes=S,b.completeLayers=s,b}()),m.assetLoader||(m.assetLoader=function(){function s(o){var a=o.getResponseHeader("content-type");return a&&o.responseType==="json"&&a.indexOf("json")!==-1||o.response&&_typeof$5(o.response)==="object"?o.response:o.response&&typeof o.response=="string"?JSON.parse(o.response):o.responseText?JSON.parse(o.responseText):null}return{load:function(o,a,l,p){var h,f=new XMLHttpRequest;try{f.responseType="json"}catch{}f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200)h=s(f),l(h);else try{h=s(f),l(h)}catch(v){p&&p(v)}};try{f.open(["G","E","T"].join(""),o,!0)}catch{f.open(["G","E","T"].join(""),a+"/"+o,!0)}f.send()}}}()),g.data.type==="loadAnimation")m.assetLoader.load(g.data.path,g.data.fullPath,function(s){m.dataManager.completeData(s),m.postMessage({id:g.data.id,payload:s,status:"success"})},function(){m.postMessage({id:g.data.id,status:"error"})});else if(g.data.type==="complete"){var c=g.data.animation;m.dataManager.completeData(c),m.postMessage({id:g.data.id,payload:c,status:"success"})}else g.data.type==="loadData"&&m.assetLoader.load(g.data.path,g.data.fullPath,function(s){m.postMessage({id:g.data.id,payload:s,status:"success"})},function(){m.postMessage({id:g.data.id,status:"error"})})}),t.onmessage=function(g){var c=g.data,s=c.id,o=d[s];d[s]=null,c.status==="success"?o.onComplete(c.payload):o.onError&&o.onError()})}function u(g,c){var s="processId_"+(n+=1);return d[s]={onComplete:g,onError:c},s}return{loadAnimation:function(g,c,s){e();var o=u(c,s);t.postMessage({type:"loadAnimation",path:g,fullPath:window.location.origin+window.location.pathname,id:o})},loadData:function(g,c,s){e();var o=u(c,s);t.postMessage({type:"loadData",path:g,fullPath:window.location.origin+window.location.pathname,id:o})},completeAnimation:function(g,c,s){e();var o=u(c,s);t.postMessage({type:"complete",animation:g,id:o})}}}(),ImagePreloader=function(){var i=function(){var u=createTag("canvas");u.width=1,u.height=1;var g=u.getContext("2d");return g.fillStyle="rgba(0,0,0,0)",g.fillRect(0,0,1,1),u}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function d(u,g,c){var s="";if(u.e)s=u.p;else if(g){var o=u.p;o.indexOf("images/")!==-1&&(o=o.split("/")[1]),s=g+o}else s=c,s+=u.u?u.u:"",s+=u.p;return s}function r(u){var g=0,c=setInterval(function(){(u.getBBox().width||g>500)&&(this._imageLoaded(),clearInterval(c)),g+=1}.bind(this),50)}function m(u){var g={assetData:u},c=d(u,this.assetsPath,this.path);return dataManager.loadData(c,function(s){g.img=s,this._footageLoaded()}.bind(this),function(){g.img={},this._footageLoaded()}.bind(this)),g}function e(){this._imageLoaded=t.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=r.bind(this),this.createFootageData=m.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return e.prototype={loadAssets:function(u,g){var c;this.imagesLoadedCb=g;var s=u.length;for(c=0;c<s;c+=1)u[c].layers||(u[c].t&&u[c].t!=="seq"?u[c].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(u[c]))):(this.totalImages+=1,this.images.push(this._createImageData(u[c]))))},setAssetsPath:function(u){this.assetsPath=u||""},setPath:function(u){this.path=u||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(u){for(var g=0,c=this.images.length;g<c;){if(this.images[g].assetData===u)return this.images[g].img;g+=1}return null},createImgData:function(u){var g=d(u,this.assetsPath,this.path),c=createTag("img");c.crossOrigin="anonymous",c.addEventListener("load",this._imageLoaded,!1),c.addEventListener("error",function(){s.img=i,this._imageLoaded()}.bind(this),!1),c.src=g;var s={img:c,assetData:u};return s},createImageData:function(u){var g=d(u,this.assetsPath,this.path),c=createNS("image");isSafari?this.testImageLoaded(c):c.addEventListener("load",this._imageLoaded,!1),c.addEventListener("error",function(){s.img=i,this._imageLoaded()}.bind(this),!1),c.setAttributeNS("http://www.w3.org/1999/xlink","href",g),this._elementHelper.append?this._elementHelper.append(c):this._elementHelper.appendChild(c);var s={img:c,assetData:u};return s},imageLoaded:t,footageLoaded:n,setCacheType:function(u,g){u==="svg"?(this._elementHelper=g,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},e}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(i,t){if(this._cbs[i])for(var n=this._cbs[i],d=0;d<n.length;d+=1)n[d](t)},addEventListener:function(i,t){return this._cbs[i]||(this._cbs[i]=[]),this._cbs[i].push(t),function(){this.removeEventListener(i,t)}.bind(this)},removeEventListener:function(i,t){if(t){if(this._cbs[i]){for(var n=0,d=this._cbs[i].length;n<d;)this._cbs[i][n]===t&&(this._cbs[i].splice(n,1),n-=1,d-=1),n+=1;this._cbs[i].length||(this._cbs[i]=null)}}else this._cbs[i]=null}};var markerParser=function(){function i(t){for(var n,d=t.split(`\r
`),r={},m=0,e=0;e<d.length;e+=1)(n=d[e].split(":")).length===2&&(r[n[0]]=n[1].trim(),m+=1);if(m===0)throw new Error;return r}return function(t){for(var n=[],d=0;d<t.length;d+=1){var r=t[d],m={time:r.tm,duration:r.dr};try{m.payload=JSON.parse(t[d].cm)}catch{try{m.payload=i(t[d].cm)}catch{m.payload={name:t[d].cm}}}n.push(m)}return n}}(),ProjectInterface=function(){function i(t){this.compositions.push(t)}return function(){function t(n){for(var d=0,r=this.compositions.length;d<r;){if(this.compositions[d].data&&this.compositions[d].data.nm===n)return this.compositions[d].prepareFrame&&this.compositions[d].data.xt&&this.compositions[d].prepareFrame(this.currentFrame),this.compositions[d].compInterface;d+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=i,t}}(),renderers={},registerRenderer=function(i,t){renderers[i]=t};function getRenderer(i){return renderers[i]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var i in renderers)if(renderers[i])return i;return""}function _typeof$4(i){return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(i)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(i){(i.wrapper||i.container)&&(this.wrapper=i.wrapper||i.container);var t="svg";i.animType?t=i.animType:i.renderer&&(t=i.renderer);var n=getRenderer(t);this.renderer=new n(this,i.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,i.loop===""||i.loop===null||i.loop===void 0||i.loop===!0?this.loop=!0:i.loop===!1?this.loop=!1:this.loop=parseInt(i.loop,10),this.autoplay=!("autoplay"in i)||i.autoplay,this.name=i.name?i.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(i,"autoloadSegments")||i.autoloadSegments,this.assetsPath=i.assetsPath,this.initialSegment=i.initialSegment,i.audioFactory&&this.audioController.setAudioFactory(i.audioFactory),i.animationData?this.setupAnimation(i.animationData):i.path&&(i.path.lastIndexOf("\\")!==-1?this.path=i.path.substr(0,i.path.lastIndexOf("\\")+1):this.path=i.path.substr(0,i.path.lastIndexOf("/")+1),this.fileName=i.path.substr(i.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(i.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(i){dataManager.completeAnimation(i,this.configAnimation)},AnimationItem.prototype.setData=function(i,t){t&&_typeof$4(t)!=="object"&&(t=JSON.parse(t));var n={wrapper:i,animationData:t},d=i.attributes;n.path=d.getNamedItem("data-animation-path")?d.getNamedItem("data-animation-path").value:d.getNamedItem("data-bm-path")?d.getNamedItem("data-bm-path").value:d.getNamedItem("bm-path")?d.getNamedItem("bm-path").value:"",n.animType=d.getNamedItem("data-anim-type")?d.getNamedItem("data-anim-type").value:d.getNamedItem("data-bm-type")?d.getNamedItem("data-bm-type").value:d.getNamedItem("bm-type")?d.getNamedItem("bm-type").value:d.getNamedItem("data-bm-renderer")?d.getNamedItem("data-bm-renderer").value:d.getNamedItem("bm-renderer")?d.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var r=d.getNamedItem("data-anim-loop")?d.getNamedItem("data-anim-loop").value:d.getNamedItem("data-bm-loop")?d.getNamedItem("data-bm-loop").value:d.getNamedItem("bm-loop")?d.getNamedItem("bm-loop").value:"";r==="false"?n.loop=!1:r==="true"?n.loop=!0:r!==""&&(n.loop=parseInt(r,10));var m=d.getNamedItem("data-anim-autoplay")?d.getNamedItem("data-anim-autoplay").value:d.getNamedItem("data-bm-autoplay")?d.getNamedItem("data-bm-autoplay").value:!d.getNamedItem("bm-autoplay")||d.getNamedItem("bm-autoplay").value;n.autoplay=m!=="false",n.name=d.getNamedItem("data-name")?d.getNamedItem("data-name").value:d.getNamedItem("data-bm-name")?d.getNamedItem("data-bm-name").value:d.getNamedItem("bm-name")?d.getNamedItem("bm-name").value:"",(d.getNamedItem("data-anim-prerender")?d.getNamedItem("data-anim-prerender").value:d.getNamedItem("data-bm-prerender")?d.getNamedItem("data-bm-prerender").value:d.getNamedItem("bm-prerender")?d.getNamedItem("bm-prerender").value:"")==="false"&&(n.prerender=!1),n.path?this.setParams(n):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(i){i.op>this.animationData.op&&(this.animationData.op=i.op,this.totalFrames=Math.floor(i.op-this.animationData.ip));var t,n,d=this.animationData.layers,r=d.length,m=i.layers,e=m.length;for(n=0;n<e;n+=1)for(t=0;t<r;){if(d[t].id===m[n].id){d[t]=m[n];break}t+=1}if((i.chars||i.fonts)&&(this.renderer.globalData.fontManager.addChars(i.chars),this.renderer.globalData.fontManager.addFonts(i.fonts,this.renderer.globalData.defs)),i.assets)for(r=i.assets.length,t=0;t<r;t+=1)this.animationData.assets.push(i.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(i){this.animationData=i;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var i=this.animationData.segments;if(!i||i.length===0||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=i.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(i){if(this.renderer)try{this.animationData=i,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(i),i.assets||(i.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(i.assets),this.markers=markerParser(i.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var i=getExpressionsPlugin();i&&i.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(i,t){var n=typeof i=="number"?i:void 0,d=typeof t=="number"?t:void 0;this.renderer.updateContainerSize(n,d)},AnimationItem.prototype.setSubframe=function(i){this.isSubframeEnabled=!!i},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded!==!1&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(i){this.triggerRenderFrameError(i)}},AnimationItem.prototype.play=function(i){i&&this.name!==i||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(i){i&&this.name!==i||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(i){i&&this.name!==i||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(i){i&&this.name!==i||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(i){for(var t,n=0;n<this.markers.length;n+=1)if((t=this.markers[n]).payload&&t.payload.name===i)return t;return null},AnimationItem.prototype.goToAndStop=function(i,t,n){if(!n||this.name===n){var d=Number(i);if(isNaN(d)){var r=this.getMarkerData(i);r&&this.goToAndStop(r.time,!0)}else t?this.setCurrentRawFrameValue(i):this.setCurrentRawFrameValue(i*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(i,t,n){if(!n||this.name===n){var d=Number(i);if(isNaN(d)){var r=this.getMarkerData(i);r&&(r.duration?this.playSegments([r.time,r.time+r.duration],!0):this.goToAndStop(r.time,!0))}else this.goToAndStop(d,t,n);this.play()}},AnimationItem.prototype.advanceTime=function(i){if(this.isPaused!==!0&&this.isLoaded!==!1){var t=this.currentRawFrame+i*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&this.loop!==!0?(n=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(i,t){this.playCount=0,i[1]<i[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=i[0]-i[1],this.timeCompleted=this.totalFrames,this.firstFrame=i[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):i[1]>i[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=i[1]-i[0],this.timeCompleted=this.totalFrames,this.firstFrame=i[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(i,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<i?n=i:this.currentRawFrame+this.firstFrame>t&&(n=t-i)),this.firstFrame=i,this.totalFrames=t-i,this.timeCompleted=this.totalFrames,n!==-1&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(i,t){if(t&&(this.segments.length=0),_typeof$4(i[0])==="object"){var n,d=i.length;for(n=0;n<d;n+=1)this.segments.push(i[n])}else this.segments.push(i);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(i){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),i&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(i){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),i),!0)},AnimationItem.prototype.destroy=function(i){i&&this.name!==i||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(i){this.currentRawFrame=i,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(i){this.playSpeed=i,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(i){this.playDirection=i<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(i){this.loop=i},AnimationItem.prototype.setVolume=function(i,t){t&&this.name!==t||this.audioController.setVolume(i)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(i){i&&this.name!==i||this.audioController.mute()},AnimationItem.prototype.unmute=function(i){i&&this.name!==i||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(i){var t="";if(i.e)t=i.p;else if(this.assetsPath){var n=i.p;n.indexOf("images/")!==-1&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=i.u?i.u:"",t+=i.p;return t},AnimationItem.prototype.getAssetData=function(i){for(var t=0,n=this.assets.length;t<n;){if(i===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(i){return i?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(i,t,n){try{this.renderer.getElementByPath(i).updateDocumentData(t,n)}catch{}},AnimationItem.prototype.trigger=function(i){if(this._cbs&&this._cbs[i])switch(i){case"enterFrame":this.triggerEvent(i,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(i,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(i,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(i,new BMCompleteEvent(i,this.frameMult));break;case"segmentStart":this.triggerEvent(i,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(i,new BMDestroyEvent(i,this));break;default:this.triggerEvent(i)}i==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(i,this.currentFrame,this.totalFrames,this.frameMult)),i==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(i,this.loop,this.playCount,this.frameMult)),i==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(i,this.frameMult)),i==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(i,this.firstFrame,this.totalFrames)),i==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(i,this))},AnimationItem.prototype.triggerRenderFrameError=function(i){var t=new BMRenderFrameErrorEvent(i,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(i){var t=new BMConfigErrorEvent(i,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var i={},t=[],n=0,d=0,r=0,m=!0,e=!1;function u(h){for(var f=0,v=h.target;f<d;)t[f].animation===v&&(t.splice(f,1),f-=1,d-=1,v.isPaused||s()),f+=1}function g(h,f){if(!h)return null;for(var v=0;v<d;){if(t[v].elem===h&&t[v].elem!==null)return t[v].animation;v+=1}var y=new AnimationItem;return o(y,h),y.setData(h,f),y}function c(){r+=1,p()}function s(){r-=1}function o(h,f){h.addEventListener("destroy",u),h.addEventListener("_active",c),h.addEventListener("_idle",s),t.push({elem:f,animation:h}),d+=1}function a(h){var f,v=h-n;for(f=0;f<d;f+=1)t[f].animation.advanceTime(v);n=h,r&&!e?window.requestAnimationFrame(a):m=!0}function l(h){n=h,window.requestAnimationFrame(a)}function p(){!e&&r&&m&&(window.requestAnimationFrame(l),m=!1)}return i.registerAnimation=g,i.loadAnimation=function(h){var f=new AnimationItem;return o(f,null),f.setParams(h),f},i.setSpeed=function(h,f){var v;for(v=0;v<d;v+=1)t[v].animation.setSpeed(h,f)},i.setDirection=function(h,f){var v;for(v=0;v<d;v+=1)t[v].animation.setDirection(h,f)},i.play=function(h){var f;for(f=0;f<d;f+=1)t[f].animation.play(h)},i.pause=function(h){var f;for(f=0;f<d;f+=1)t[f].animation.pause(h)},i.stop=function(h){var f;for(f=0;f<d;f+=1)t[f].animation.stop(h)},i.togglePause=function(h){var f;for(f=0;f<d;f+=1)t[f].animation.togglePause(h)},i.searchAnimations=function(h,f,v){var y,x=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),S=x.length;for(y=0;y<S;y+=1)v&&x[y].setAttribute("data-bm-type",v),g(x[y],h);if(f&&S===0){v||(v="svg");var E=document.getElementsByTagName("body")[0];E.innerText="";var b=createTag("div");b.style.width="100%",b.style.height="100%",b.setAttribute("data-bm-type",v),E.appendChild(b),g(b,h)}},i.resize=function(){var h;for(h=0;h<d;h+=1)t[h].animation.resize()},i.goToAndStop=function(h,f,v){var y;for(y=0;y<d;y+=1)t[y].animation.goToAndStop(h,f,v)},i.destroy=function(h){var f;for(f=d-1;f>=0;f-=1)t[f].animation.destroy(h)},i.freeze=function(){e=!0},i.unfreeze=function(){e=!1,p()},i.setVolume=function(h,f){var v;for(v=0;v<d;v+=1)t[v].animation.setVolume(h,f)},i.mute=function(h){var f;for(f=0;f<d;f+=1)t[f].animation.mute(h)},i.unmute=function(h){var f;for(f=0;f<d;f+=1)t[f].animation.unmute(h)},i.getRegisteredAnimations=function(){var h,f=t.length,v=[];for(h=0;h<f;h+=1)v.push(t[h].animation);return v},i}(),BezierFactory=function(){var i={getBezierEasing:function(s,o,a,l,p){var h=p||("bez_"+s+"_"+o+"_"+a+"_"+l).replace(/\./g,"p");if(t[h])return t[h];var f=new c([s,o,a,l]);return t[h]=f,f}},t={},n=.1,d=typeof Float32Array=="function";function r(s,o){return 1-3*o+3*s}function m(s,o){return 3*o-6*s}function e(s){return 3*s}function u(s,o,a){return((r(o,a)*s+m(o,a))*s+e(o))*s}function g(s,o,a){return 3*r(o,a)*s*s+2*m(o,a)*s+e(o)}function c(s){this._p=s,this._mSampleValues=d?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return c.prototype={get:function(s){var o=this._p[0],a=this._p[1],l=this._p[2],p=this._p[3];return this._precomputed||this._precompute(),o===a&&l===p?s:s===0?0:s===1?1:u(this._getTForX(s),a,p)},_precompute:function(){var s=this._p[0],o=this._p[1],a=this._p[2],l=this._p[3];this._precomputed=!0,s===o&&a===l||this._calcSampleValues()},_calcSampleValues:function(){for(var s=this._p[0],o=this._p[2],a=0;a<11;++a)this._mSampleValues[a]=u(a*n,s,o)},_getTForX:function(s){for(var o=this._p[0],a=this._p[2],l=this._mSampleValues,p=0,h=1;h!==10&&l[h]<=s;++h)p+=n;var f=p+(s-l[--h])/(l[h+1]-l[h])*n,v=g(f,o,a);return v>=.001?function(y,x,S,E){for(var b=0;b<4;++b){var T=g(x,S,E);if(T===0)return x;x-=(u(x,S,E)-y)/T}return x}(s,f,o,a):v===0?f:function(y,x,S,E,b){var T,P,C=0;do(T=u(P=x+(S-x)/2,E,b)-y)>0?S=P:x=P;while(Math.abs(T)>1e-7&&++C<10);return P}(s,p,p+n,o,a)}},i}(),pooling={double:function(i){return i.concat(createSizedArray(i.length))}},poolFactory=function(i,t,n){var d=0,r=i,m=createSizedArray(r);return{newElement:function(){return d?m[d-=1]:t()},release:function(e){d===r&&(m=pooling.double(m),r*=2),n&&n(e),m[d]=e,d+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(i){var t,n=i.lengths.length;for(t=0;t<n;t+=1)bezierLengthPool.release(i.lengths[t]);i.lengths.length=0});function bezFunction(){var i=Math;function t(c,s,o,a,l,p){var h=c*a+s*l+o*p-l*a-p*c-o*s;return h>-.001&&h<.001}var n=function(c,s,o,a){var l,p,h,f,v,y,x=getDefaultCurveSegments(),S=0,E=[],b=[],T=bezierLengthPool.newElement();for(h=o.length,l=0;l<x;l+=1){for(v=l/(x-1),y=0,p=0;p<h;p+=1)f=bmPow(1-v,3)*c[p]+3*bmPow(1-v,2)*v*o[p]+3*(1-v)*bmPow(v,2)*a[p]+bmPow(v,3)*s[p],E[p]=f,b[p]!==null&&(y+=bmPow(E[p]-b[p],2)),b[p]=E[p];y&&(S+=y=bmSqrt(y)),T.percents[l]=v,T.lengths[l]=S}return T.addedLength=S,T};function d(c){this.segmentLength=0,this.points=new Array(c)}function r(c,s){this.partialLength=c,this.point=s}var m,e=(m={},function(c,s,o,a){var l=(c[0]+"_"+c[1]+"_"+s[0]+"_"+s[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]).replace(/\./g,"p");if(!m[l]){var p,h,f,v,y,x,S,E=getDefaultCurveSegments(),b=0,T=null;c.length===2&&(c[0]!==s[0]||c[1]!==s[1])&&t(c[0],c[1],s[0],s[1],c[0]+o[0],c[1]+o[1])&&t(c[0],c[1],s[0],s[1],s[0]+a[0],s[1]+a[1])&&(E=2);var P=new d(E);for(f=o.length,p=0;p<E;p+=1){for(S=createSizedArray(f),y=p/(E-1),x=0,h=0;h<f;h+=1)v=bmPow(1-y,3)*c[h]+3*bmPow(1-y,2)*y*(c[h]+o[h])+3*(1-y)*bmPow(y,2)*(s[h]+a[h])+bmPow(y,3)*s[h],S[h]=v,T!==null&&(x+=bmPow(S[h]-T[h],2));b+=x=bmSqrt(x),P.points[p]=new r(x,S),T=S}P.segmentLength=b,m[l]=P}return m[l]});function u(c,s){var o=s.percents,a=s.lengths,l=o.length,p=bmFloor((l-1)*c),h=c*s.addedLength,f=0;if(p===l-1||p===0||h===a[p])return o[p];for(var v=a[p]>h?-1:1,y=!0;y;)if(a[p]<=h&&a[p+1]>h?(f=(h-a[p])/(a[p+1]-a[p]),y=!1):p+=v,p<0||p>=l-1){if(p===l-1)return o[p];y=!1}return o[p]+(o[p+1]-o[p])*f}var g=createTypedArray("float32",8);return{getSegmentsLength:function(c){var s,o=segmentsLengthPool.newElement(),a=c.c,l=c.v,p=c.o,h=c.i,f=c._length,v=o.lengths,y=0;for(s=0;s<f-1;s+=1)v[s]=n(l[s],l[s+1],p[s],h[s+1]),y+=v[s].addedLength;return a&&f&&(v[s]=n(l[s],l[0],p[s],h[0]),y+=v[s].addedLength),o.totalLength=y,o},getNewSegment:function(c,s,o,a,l,p,h){l<0?l=0:l>1&&(l=1);var f,v=u(l,h),y=u(p=p>1?1:p,h),x=c.length,S=1-v,E=1-y,b=S*S*S,T=v*S*S*3,P=v*v*S*3,C=v*v*v,w=S*S*E,A=v*S*E+S*v*E+S*S*y,R=v*v*E+S*v*y+v*S*y,I=v*v*y,L=S*E*E,O=v*E*E+S*y*E+S*E*y,D=v*y*E+S*y*y+v*E*y,V=v*y*y,B=E*E*E,U=y*E*E+E*y*E+E*E*y,W=y*y*E+E*y*y+y*E*y,F=y*y*y;for(f=0;f<x;f+=1)g[4*f]=i.round(1e3*(b*c[f]+T*o[f]+P*a[f]+C*s[f]))/1e3,g[4*f+1]=i.round(1e3*(w*c[f]+A*o[f]+R*a[f]+I*s[f]))/1e3,g[4*f+2]=i.round(1e3*(L*c[f]+O*o[f]+D*a[f]+V*s[f]))/1e3,g[4*f+3]=i.round(1e3*(B*c[f]+U*o[f]+W*a[f]+F*s[f]))/1e3;return g},getPointInSegment:function(c,s,o,a,l,p){var h=u(l,p),f=1-h;return[i.round(1e3*(f*f*f*c[0]+(h*f*f+f*h*f+f*f*h)*o[0]+(h*h*f+f*h*h+h*f*h)*a[0]+h*h*h*s[0]))/1e3,i.round(1e3*(f*f*f*c[1]+(h*f*f+f*h*f+f*f*h)*o[1]+(h*h*f+f*h*h+h*f*h)*a[1]+h*h*h*s[1]))/1e3]},buildBezierData:e,pointOnLine2D:t,pointOnLine3D:function(c,s,o,a,l,p,h,f,v){if(o===0&&p===0&&v===0)return t(c,s,a,l,h,f);var y,x=i.sqrt(i.pow(a-c,2)+i.pow(l-s,2)+i.pow(p-o,2)),S=i.sqrt(i.pow(h-c,2)+i.pow(f-s,2)+i.pow(v-o,2)),E=i.sqrt(i.pow(h-a,2)+i.pow(f-l,2)+i.pow(v-p,2));return(y=x>S?x>E?x-S-E:E-S-x:E>S?E-S-x:S-x-E)>-1e-4&&y<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(i,t){var n,d=this.offsetTime;this.propType==="multidimensional"&&(n=createTypedArray("float32",this.pv.length));for(var r,m,e,u,g,c,s,o,a,l=t.lastIndex,p=l,h=this.keyframes.length-1,f=!0;f;){if(r=this.keyframes[p],m=this.keyframes[p+1],p===h-1&&i>=m.t-d){r.h&&(r=m),l=0;break}if(m.t-d>i){l=p;break}p<h-1?p+=1:(l=0,f=!1)}e=this.keyframesMetadata[p]||{};var v,y=m.t-d,x=r.t-d;if(r.to){e.bezierData||(e.bezierData=bez.buildBezierData(r.s,m.s||r.e,r.to,r.ti));var S=e.bezierData;if(i>=y||i<x){var E=i>=y?S.points.length-1:0;for(g=S.points[E].point.length,u=0;u<g;u+=1)n[u]=S.points[E].point[u]}else{e.__fnct?a=e.__fnct:(a=BezierFactory.getBezierEasing(r.o.x,r.o.y,r.i.x,r.i.y,r.n).get,e.__fnct=a),c=a((i-x)/(y-x));var b,T=S.segmentLength*c,P=t.lastFrame<i&&t._lastKeyframeIndex===p?t._lastAddedLength:0;for(o=t.lastFrame<i&&t._lastKeyframeIndex===p?t._lastPoint:0,f=!0,s=S.points.length;f;){if(P+=S.points[o].partialLength,T===0||c===0||o===S.points.length-1){for(g=S.points[o].point.length,u=0;u<g;u+=1)n[u]=S.points[o].point[u];break}if(T>=P&&T<P+S.points[o+1].partialLength){for(b=(T-P)/S.points[o+1].partialLength,g=S.points[o].point.length,u=0;u<g;u+=1)n[u]=S.points[o].point[u]+(S.points[o+1].point[u]-S.points[o].point[u])*b;break}o<s-1?o+=1:f=!1}t._lastPoint=o,t._lastAddedLength=P-S.points[o].partialLength,t._lastKeyframeIndex=p}}else{var C,w,A,R,I;if(h=r.s.length,v=m.s||r.e,this.sh&&r.h!==1)i>=y?(n[0]=v[0],n[1]=v[1],n[2]=v[2]):i<=x?(n[0]=r.s[0],n[1]=r.s[1],n[2]=r.s[2]):quaternionToEuler(n,slerp(createQuaternion(r.s),createQuaternion(v),(i-x)/(y-x)));else for(p=0;p<h;p+=1)r.h!==1&&(i>=y?c=1:i<x?c=0:(r.o.x.constructor===Array?(e.__fnct||(e.__fnct=[]),e.__fnct[p]?a=e.__fnct[p]:(C=r.o.x[p]===void 0?r.o.x[0]:r.o.x[p],w=r.o.y[p]===void 0?r.o.y[0]:r.o.y[p],A=r.i.x[p]===void 0?r.i.x[0]:r.i.x[p],R=r.i.y[p]===void 0?r.i.y[0]:r.i.y[p],a=BezierFactory.getBezierEasing(C,w,A,R).get,e.__fnct[p]=a)):e.__fnct?a=e.__fnct:(C=r.o.x,w=r.o.y,A=r.i.x,R=r.i.y,a=BezierFactory.getBezierEasing(C,w,A,R).get,r.keyframeMetadata=a),c=a((i-x)/(y-x)))),v=m.s||r.e,I=r.h===1?r.s[p]:r.s[p]+(v[p]-r.s[p])*c,this.propType==="multidimensional"?n[p]=I:n=I}return t.lastIndex=l,n}function slerp(i,t,n){var d,r,m,e,u,g=[],c=i[0],s=i[1],o=i[2],a=i[3],l=t[0],p=t[1],h=t[2],f=t[3];return(r=c*l+s*p+o*h+a*f)<0&&(r=-r,l=-l,p=-p,h=-h,f=-f),1-r>1e-6?(d=Math.acos(r),m=Math.sin(d),e=Math.sin((1-n)*d)/m,u=Math.sin(n*d)/m):(e=1-n,u=n),g[0]=e*c+u*l,g[1]=e*s+u*p,g[2]=e*o+u*h,g[3]=e*a+u*f,g}function quaternionToEuler(i,t){var n=t[0],d=t[1],r=t[2],m=t[3],e=Math.atan2(2*d*m-2*n*r,1-2*d*d-2*r*r),u=Math.asin(2*n*d+2*r*m),g=Math.atan2(2*n*m-2*d*r,1-2*n*n-2*r*r);i[0]=e/degToRads,i[1]=u/degToRads,i[2]=g/degToRads}function createQuaternion(i){var t=i[0]*degToRads,n=i[1]*degToRads,d=i[2]*degToRads,r=Math.cos(t/2),m=Math.cos(n/2),e=Math.cos(d/2),u=Math.sin(t/2),g=Math.sin(n/2),c=Math.sin(d/2);return[u*g*e+r*m*c,u*m*e+r*g*c,r*g*e-u*m*c,r*m*e-u*g*c]}function getValueAtCurrentTime(){var i=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(i===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=n&&i>=n||this._caching.lastFrame<t&&i<t))){this._caching.lastFrame>=i&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var d=this.interpolateValue(i,this._caching);this.pv=d}return this._caching.lastFrame=i,this.pv}function setVValue(i){var t;if(this.propType==="unidimensional")t=i*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var n=0,d=this.v.length;n<d;)t=i[n]*this.mult,mathAbs(this.v[n]-t)>1e-5&&(this.v[n]=t,this._mdf=!0),n+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var i;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(i=0;i<t;i+=1)n=this.effectsSequence[i](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(i){this.effectsSequence.push(i),this.container.addDynamicProperty(this)}function ValueProperty(i,t,n,d){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=i,this.container=d,this.comp=i.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(i,t,n,d){var r;this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=i,this.container=d,this.comp=i.comp,this.k=!1,this.kf=!1,this.frameId=-1;var m=t.k.length;for(this.v=createTypedArray("float32",m),this.pv=createTypedArray("float32",m),this.vel=createTypedArray("float32",m),r=0;r<m;r+=1)this.v[r]=t.k[r]*this.mult,this.pv[r]=t.k[r];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(i,t,n,d){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=n||1,this.elem=i,this.container=d,this.comp=i.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(i,t,n,d){var r;this.propType="multidimensional";var m,e,u,g,c=t.k.length;for(r=0;r<c-1;r+=1)t.k[r].to&&t.k[r].s&&t.k[r+1]&&t.k[r+1].s&&(m=t.k[r].s,e=t.k[r+1].s,u=t.k[r].to,g=t.k[r].ti,(m.length===2&&(m[0]!==e[0]||m[1]!==e[1])&&bez.pointOnLine2D(m[0],m[1],e[0],e[1],m[0]+u[0],m[1]+u[1])&&bez.pointOnLine2D(m[0],m[1],e[0],e[1],e[0]+g[0],e[1]+g[1])||m.length===3&&(m[0]!==e[0]||m[1]!==e[1]||m[2]!==e[2])&&bez.pointOnLine3D(m[0],m[1],m[2],e[0],e[1],e[2],m[0]+u[0],m[1]+u[1],m[2]+u[2])&&bez.pointOnLine3D(m[0],m[1],m[2],e[0],e[1],e[2],e[0]+g[0],e[1]+g[1],e[2]+g[2]))&&(t.k[r].to=null,t.k[r].ti=null),m[0]===e[0]&&m[1]===e[1]&&u[0]===0&&u[1]===0&&g[0]===0&&g[1]===0&&(m.length===2||m[2]===e[2]&&u[2]===0&&g[2]===0)&&(t.k[r].to=null,t.k[r].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=i.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=n||1,this.elem=i,this.container=d,this.comp=i.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var s=t.k[0].s.length;for(this.v=createTypedArray("float32",s),this.pv=createTypedArray("float32",s),r=0;r<s;r+=1)this.v[r]=initFrame,this.pv[r]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",s)},this.addEffect=addEffect}var PropertyFactory=(ob={getProp:function(i,t,n,d,r){var m;if(t.sid&&(t=i.globalData.slotManager.getProp(t)),t.k.length)if(typeof t.k[0]=="number")m=new MultiDimensionalProperty(i,t,d,r);else switch(n){case 0:m=new KeyframedValueProperty(i,t,d,r);break;case 1:m=new KeyframedMultidimensionalProperty(i,t,d,r)}else m=new ValueProperty(i,t,d,r);return m.effectsSequence.length&&r.addDynamicProperty(m),m}},ob),ob;function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(i){this.dynamicProperties.indexOf(i)===-1&&(this.dynamicProperties.push(i),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var i;this._mdf=!1;var t=this.dynamicProperties.length;for(i=0;i<t;i+=1)this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(i){this.container=i,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(i,t){this.c=i,this.setLength(t);for(var n=0;n<t;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(i){for(;this._maxLength<i;)this.doubleArrayLength();this._length=i},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(i,t,n,d,r){var m;switch(this._length=Math.max(this._length,d+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":m=this.v;break;case"i":m=this.i;break;case"o":m=this.o;break;default:m=[]}(!m[d]||m[d]&&!r)&&(m[d]=pointPool.newElement()),m[d][0]=i,m[d][1]=t},ShapePath.prototype.setTripleAt=function(i,t,n,d,r,m,e,u){this.setXYAt(i,t,"v",e,u),this.setXYAt(n,d,"o",e,u),this.setXYAt(r,m,"i",e,u)},ShapePath.prototype.reverse=function(){var i=new ShapePath;i.setPathData(this.c,this._length);var t=this.v,n=this.o,d=this.i,r=0;this.c&&(i.setTripleAt(t[0][0],t[0][1],d[0][0],d[0][1],n[0][0],n[0][1],0,!1),r=1);var m,e=this._length-1,u=this._length;for(m=r;m<u;m+=1)i.setTripleAt(t[e][0],t[e][1],d[e][0],d[e][1],n[e][0],n[e][1],m,!1),e-=1;return i},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(i){var t,n=i._length;for(t=0;t<n;t+=1)pointPool.release(i.v[t]),pointPool.release(i.i[t]),pointPool.release(i.o[t]),i.v[t]=null,i.i[t]=null,i.o[t]=null;i._length=0,i.c=!1}),factory.clone=function(i){var t,n=factory.newElement(),d=i._length===void 0?i.v.length:i._length;for(n.setLength(d),n.c=i.c,t=0;t<d;t+=1)n.setTripleAt(i.v[t][0],i.v[t][1],i.o[t][0],i.o[t][1],i.i[t][0],i.i[t][1],t);return n},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(i){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=i,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var i;for(i=0;i<this._length;i+=1)shapePool.release(this.shapes[i]);this._length=0};var shapeCollectionPool=function(){var i={newShapeCollection:function(){return t?d[t-=1]:new ShapeCollection},release:function(r){var m,e=r._length;for(m=0;m<e;m+=1)shapePool.release(r.shapes[m]);r._length=0,t===n&&(d=pooling.double(d),n*=2),d[t]=r,t+=1}},t=0,n=4,d=createSizedArray(n);return i}(),ShapePropertyFactory=function(){var i=-999999;function t(l,p,h){var f,v,y,x,S,E,b,T,P,C=h.lastIndex,w=this.keyframes;if(l<w[0].t-this.offsetTime)f=w[0].s[0],y=!0,C=0;else if(l>=w[w.length-1].t-this.offsetTime)f=w[w.length-1].s?w[w.length-1].s[0]:w[w.length-2].e[0],y=!0;else{for(var A,R,I,L=C,O=w.length-1,D=!0;D&&(A=w[L],!((R=w[L+1]).t-this.offsetTime>l));)L<O-1?L+=1:D=!1;if(I=this.keyframesMetadata[L]||{},C=L,!(y=A.h===1)){if(l>=R.t-this.offsetTime)T=1;else if(l<A.t-this.offsetTime)T=0;else{var V;I.__fnct?V=I.__fnct:(V=BezierFactory.getBezierEasing(A.o.x,A.o.y,A.i.x,A.i.y).get,I.__fnct=V),T=V((l-(A.t-this.offsetTime))/(R.t-this.offsetTime-(A.t-this.offsetTime)))}v=R.s?R.s[0]:A.e[0]}f=A.s[0]}for(E=p._length,b=f.i[0].length,h.lastIndex=C,x=0;x<E;x+=1)for(S=0;S<b;S+=1)P=y?f.i[x][S]:f.i[x][S]+(v.i[x][S]-f.i[x][S])*T,p.i[x][S]=P,P=y?f.o[x][S]:f.o[x][S]+(v.o[x][S]-f.o[x][S])*T,p.o[x][S]=P,P=y?f.v[x][S]:f.v[x][S]+(v.v[x][S]-f.v[x][S])*T,p.v[x][S]=P}function n(){var l=this.comp.renderedFrame-this.offsetTime,p=this.keyframes[0].t-this.offsetTime,h=this.keyframes[this.keyframes.length-1].t-this.offsetTime,f=this._caching.lastFrame;return f!==i&&(f<p&&l<p||f>h&&l>h)||(this._caching.lastIndex=f<l?this._caching.lastIndex:0,this.interpolateShape(l,this.pv,this._caching)),this._caching.lastFrame=l,this.pv}function d(){this.paths=this.localShapeCollection}function r(l){(function(p,h){if(p._length!==h._length||p.c!==h.c)return!1;var f,v=p._length;for(f=0;f<v;f+=1)if(p.v[f][0]!==h.v[f][0]||p.v[f][1]!==h.v[f][1]||p.o[f][0]!==h.o[f][0]||p.o[f][1]!==h.o[f][1]||p.i[f][0]!==h.i[f][0]||p.i[f][1]!==h.i[f][1])return!1;return!0})(this.v,l)||(this.v=shapePool.clone(l),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function m(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var l,p;this.lock=!0,this._mdf=!1,l=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var h=this.effectsSequence.length;for(p=0;p<h;p+=1)l=this.effectsSequence[p](l);this.setVValue(l),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function e(l,p,h){this.propType="shape",this.comp=l.comp,this.container=l,this.elem=l,this.data=p,this.k=!1,this.kf=!1,this._mdf=!1;var f=h===3?p.pt.k:p.ks.k;this.v=shapePool.clone(f),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=d,this.effectsSequence=[]}function u(l){this.effectsSequence.push(l),this.container.addDynamicProperty(this)}function g(l,p,h){this.propType="shape",this.comp=l.comp,this.elem=l,this.container=l,this.offsetTime=l.data.st,this.keyframes=h===3?p.pt.k:p.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var f=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,f),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=i,this.reset=d,this._caching={lastFrame:i,lastIndex:0},this.effectsSequence=[n.bind(this)]}e.prototype.interpolateShape=t,e.prototype.getValue=m,e.prototype.setVValue=r,e.prototype.addEffect=u,g.prototype.getValue=m,g.prototype.interpolateShape=t,g.prototype.setVValue=r,g.prototype.addEffect=u;var c=function(){var l=roundCorner;function p(h,f){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=f.d,this.elem=h,this.comp=h.comp,this.frameId=-1,this.initDynamicPropertyContainer(h),this.p=PropertyFactory.getProp(h,f.p,1,0,this),this.s=PropertyFactory.getProp(h,f.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return p.prototype={reset:d,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var h=this.p.v[0],f=this.p.v[1],v=this.s.v[0]/2,y=this.s.v[1]/2,x=this.d!==3,S=this.v;S.v[0][0]=h,S.v[0][1]=f-y,S.v[1][0]=x?h+v:h-v,S.v[1][1]=f,S.v[2][0]=h,S.v[2][1]=f+y,S.v[3][0]=x?h-v:h+v,S.v[3][1]=f,S.i[0][0]=x?h-v*l:h+v*l,S.i[0][1]=f-y,S.i[1][0]=x?h+v:h-v,S.i[1][1]=f-y*l,S.i[2][0]=x?h+v*l:h-v*l,S.i[2][1]=f+y,S.i[3][0]=x?h-v:h+v,S.i[3][1]=f+y*l,S.o[0][0]=x?h+v*l:h-v*l,S.o[0][1]=f-y,S.o[1][0]=x?h+v:h-v,S.o[1][1]=f+y*l,S.o[2][0]=x?h-v*l:h+v*l,S.o[2][1]=f+y,S.o[3][0]=x?h-v:h+v,S.o[3][1]=f-y*l}},extendPrototype([DynamicPropertyContainer],p),p}(),s=function(){function l(p,h){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=p,this.comp=p.comp,this.data=h,this.frameId=-1,this.d=h.d,this.initDynamicPropertyContainer(p),h.sy===1?(this.ir=PropertyFactory.getProp(p,h.ir,0,0,this),this.is=PropertyFactory.getProp(p,h.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(p,h.pt,0,0,this),this.p=PropertyFactory.getProp(p,h.p,1,0,this),this.r=PropertyFactory.getProp(p,h.r,0,degToRads,this),this.or=PropertyFactory.getProp(p,h.or,0,0,this),this.os=PropertyFactory.getProp(p,h.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return l.prototype={reset:d,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var p,h,f,v,y=2*Math.floor(this.pt.v),x=2*Math.PI/y,S=!0,E=this.or.v,b=this.ir.v,T=this.os.v,P=this.is.v,C=2*Math.PI*E/(2*y),w=2*Math.PI*b/(2*y),A=-Math.PI/2;A+=this.r.v;var R=this.data.d===3?-1:1;for(this.v._length=0,p=0;p<y;p+=1){f=S?T:P,v=S?C:w;var I=(h=S?E:b)*Math.cos(A),L=h*Math.sin(A),O=I===0&&L===0?0:L/Math.sqrt(I*I+L*L),D=I===0&&L===0?0:-I/Math.sqrt(I*I+L*L);I+=+this.p.v[0],L+=+this.p.v[1],this.v.setTripleAt(I,L,I-O*v*f*R,L-D*v*f*R,I+O*v*f*R,L+D*v*f*R,p,!0),S=!S,A+=x*R}},convertPolygonToPath:function(){var p,h=Math.floor(this.pt.v),f=2*Math.PI/h,v=this.or.v,y=this.os.v,x=2*Math.PI*v/(4*h),S=.5*-Math.PI,E=this.data.d===3?-1:1;for(S+=this.r.v,this.v._length=0,p=0;p<h;p+=1){var b=v*Math.cos(S),T=v*Math.sin(S),P=b===0&&T===0?0:T/Math.sqrt(b*b+T*T),C=b===0&&T===0?0:-b/Math.sqrt(b*b+T*T);b+=+this.p.v[0],T+=+this.p.v[1],this.v.setTripleAt(b,T,b-P*x*y*E,T-C*x*y*E,b+P*x*y*E,T+C*x*y*E,p,!0),S+=f*E}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],l),l}(),o=function(){function l(p,h){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=p,this.comp=p.comp,this.frameId=-1,this.d=h.d,this.initDynamicPropertyContainer(p),this.p=PropertyFactory.getProp(p,h.p,1,0,this),this.s=PropertyFactory.getProp(p,h.s,1,0,this),this.r=PropertyFactory.getProp(p,h.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return l.prototype={convertRectToPath:function(){var p=this.p.v[0],h=this.p.v[1],f=this.s.v[0]/2,v=this.s.v[1]/2,y=bmMin(f,v,this.r.v),x=y*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(p+f,h-v+y,p+f,h-v+y,p+f,h-v+x,0,!0),this.v.setTripleAt(p+f,h+v-y,p+f,h+v-x,p+f,h+v-y,1,!0),y!==0?(this.v.setTripleAt(p+f-y,h+v,p+f-y,h+v,p+f-x,h+v,2,!0),this.v.setTripleAt(p-f+y,h+v,p-f+x,h+v,p-f+y,h+v,3,!0),this.v.setTripleAt(p-f,h+v-y,p-f,h+v-y,p-f,h+v-x,4,!0),this.v.setTripleAt(p-f,h-v+y,p-f,h-v+x,p-f,h-v+y,5,!0),this.v.setTripleAt(p-f+y,h-v,p-f+y,h-v,p-f+x,h-v,6,!0),this.v.setTripleAt(p+f-y,h-v,p+f-x,h-v,p+f-y,h-v,7,!0)):(this.v.setTripleAt(p-f,h+v,p-f+x,h+v,p-f,h+v,2),this.v.setTripleAt(p-f,h-v,p-f,h-v+x,p-f,h-v,3))):(this.v.setTripleAt(p+f,h-v+y,p+f,h-v+x,p+f,h-v+y,0,!0),y!==0?(this.v.setTripleAt(p+f-y,h-v,p+f-y,h-v,p+f-x,h-v,1,!0),this.v.setTripleAt(p-f+y,h-v,p-f+x,h-v,p-f+y,h-v,2,!0),this.v.setTripleAt(p-f,h-v+y,p-f,h-v+y,p-f,h-v+x,3,!0),this.v.setTripleAt(p-f,h+v-y,p-f,h+v-x,p-f,h+v-y,4,!0),this.v.setTripleAt(p-f+y,h+v,p-f+y,h+v,p-f+x,h+v,5,!0),this.v.setTripleAt(p+f-y,h+v,p+f-x,h+v,p+f-y,h+v,6,!0),this.v.setTripleAt(p+f,h+v-y,p+f,h+v-y,p+f,h+v-x,7,!0)):(this.v.setTripleAt(p-f,h-v,p-f+x,h-v,p-f,h-v,1,!0),this.v.setTripleAt(p-f,h+v,p-f,h+v-x,p-f,h+v,2,!0),this.v.setTripleAt(p+f,h+v,p+f-x,h+v,p+f,h+v,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:d},extendPrototype([DynamicPropertyContainer],l),l}(),a={getShapeProp:function(l,p,h){var f;return h===3||h===4?f=(h===3?p.pt:p.ks).k.length?new g(l,p,h):new e(l,p,h):h===5?f=new o(l,p):h===6?f=new c(l,p):h===7&&(f=new s(l,p)),f.k&&l.addDynamicProperty(f),f},getConstructorFunction:function(){return e},getKeyframedConstructorFunction:function(){return g}};return a}(),Matrix=function(){var i=Math.cos,t=Math.sin,n=Math.tan,d=Math.round;function r(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function m(B){if(B===0)return this;var U=i(B),W=t(B);return this._t(U,-W,0,0,W,U,0,0,0,0,1,0,0,0,0,1)}function e(B){if(B===0)return this;var U=i(B),W=t(B);return this._t(1,0,0,0,0,U,-W,0,0,W,U,0,0,0,0,1)}function u(B){if(B===0)return this;var U=i(B),W=t(B);return this._t(U,0,W,0,0,1,0,0,-W,0,U,0,0,0,0,1)}function g(B){if(B===0)return this;var U=i(B),W=t(B);return this._t(U,-W,0,0,W,U,0,0,0,0,1,0,0,0,0,1)}function c(B,U){return this._t(1,U,B,1,0,0)}function s(B,U){return this.shear(n(B),n(U))}function o(B,U){var W=i(U),F=t(U);return this._t(W,F,0,0,-F,W,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(B),1,0,0,0,0,1,0,0,0,0,1)._t(W,-F,0,0,F,W,0,0,0,0,1,0,0,0,0,1)}function a(B,U,W){return W||W===0||(W=1),B===1&&U===1&&W===1?this:this._t(B,0,0,0,0,U,0,0,0,0,W,0,0,0,0,1)}function l(B,U,W,F,G,M,N,k,z,H,$,X,Y,j,J,Q){return this.props[0]=B,this.props[1]=U,this.props[2]=W,this.props[3]=F,this.props[4]=G,this.props[5]=M,this.props[6]=N,this.props[7]=k,this.props[8]=z,this.props[9]=H,this.props[10]=$,this.props[11]=X,this.props[12]=Y,this.props[13]=j,this.props[14]=J,this.props[15]=Q,this}function p(B,U,W){return W=W||0,B!==0||U!==0||W!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,B,U,W,1):this}function h(B,U,W,F,G,M,N,k,z,H,$,X,Y,j,J,Q){var Z=this.props;if(B===1&&U===0&&W===0&&F===0&&G===0&&M===1&&N===0&&k===0&&z===0&&H===0&&$===1&&X===0)return Z[12]=Z[12]*B+Z[15]*Y,Z[13]=Z[13]*M+Z[15]*j,Z[14]=Z[14]*$+Z[15]*J,Z[15]*=Q,this._identityCalculated=!1,this;var it=Z[0],rt=Z[1],ut=Z[2],dt=Z[3],ct=Z[4],nt=Z[5],ht=Z[6],ot=Z[7],mt=Z[8],gt=Z[9],Ft=Z[10],kt=Z[11],Lt=Z[12],St=Z[13],Yt=Z[14],ae=Z[15];return Z[0]=it*B+rt*G+ut*z+dt*Y,Z[1]=it*U+rt*M+ut*H+dt*j,Z[2]=it*W+rt*N+ut*$+dt*J,Z[3]=it*F+rt*k+ut*X+dt*Q,Z[4]=ct*B+nt*G+ht*z+ot*Y,Z[5]=ct*U+nt*M+ht*H+ot*j,Z[6]=ct*W+nt*N+ht*$+ot*J,Z[7]=ct*F+nt*k+ht*X+ot*Q,Z[8]=mt*B+gt*G+Ft*z+kt*Y,Z[9]=mt*U+gt*M+Ft*H+kt*j,Z[10]=mt*W+gt*N+Ft*$+kt*J,Z[11]=mt*F+gt*k+Ft*X+kt*Q,Z[12]=Lt*B+St*G+Yt*z+ae*Y,Z[13]=Lt*U+St*M+Yt*H+ae*j,Z[14]=Lt*W+St*N+Yt*$+ae*J,Z[15]=Lt*F+St*k+Yt*X+ae*Q,this._identityCalculated=!1,this}function f(B){var U=B.props;return this.transform(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15])}function v(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function y(B){for(var U=0;U<16;){if(B.props[U]!==this.props[U])return!1;U+=1}return!0}function x(B){var U;for(U=0;U<16;U+=1)B.props[U]=this.props[U];return B}function S(B){var U;for(U=0;U<16;U+=1)this.props[U]=B[U]}function E(B,U,W){return{x:B*this.props[0]+U*this.props[4]+W*this.props[8]+this.props[12],y:B*this.props[1]+U*this.props[5]+W*this.props[9]+this.props[13],z:B*this.props[2]+U*this.props[6]+W*this.props[10]+this.props[14]}}function b(B,U,W){return B*this.props[0]+U*this.props[4]+W*this.props[8]+this.props[12]}function T(B,U,W){return B*this.props[1]+U*this.props[5]+W*this.props[9]+this.props[13]}function P(B,U,W){return B*this.props[2]+U*this.props[6]+W*this.props[10]+this.props[14]}function C(){var B=this.props[0]*this.props[5]-this.props[1]*this.props[4],U=this.props[5]/B,W=-this.props[1]/B,F=-this.props[4]/B,G=this.props[0]/B,M=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/B,N=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/B,k=new Matrix;return k.props[0]=U,k.props[1]=W,k.props[4]=F,k.props[5]=G,k.props[12]=M,k.props[13]=N,k}function w(B){return this.getInverseMatrix().applyToPointArray(B[0],B[1],B[2]||0)}function A(B){var U,W=B.length,F=[];for(U=0;U<W;U+=1)F[U]=w(B[U]);return F}function R(B,U,W){var F=createTypedArray("float32",6);if(this.isIdentity())F[0]=B[0],F[1]=B[1],F[2]=U[0],F[3]=U[1],F[4]=W[0],F[5]=W[1];else{var G=this.props[0],M=this.props[1],N=this.props[4],k=this.props[5],z=this.props[12],H=this.props[13];F[0]=B[0]*G+B[1]*N+z,F[1]=B[0]*M+B[1]*k+H,F[2]=U[0]*G+U[1]*N+z,F[3]=U[0]*M+U[1]*k+H,F[4]=W[0]*G+W[1]*N+z,F[5]=W[0]*M+W[1]*k+H}return F}function I(B,U,W){return this.isIdentity()?[B,U,W]:[B*this.props[0]+U*this.props[4]+W*this.props[8]+this.props[12],B*this.props[1]+U*this.props[5]+W*this.props[9]+this.props[13],B*this.props[2]+U*this.props[6]+W*this.props[10]+this.props[14]]}function L(B,U){if(this.isIdentity())return B+","+U;var W=this.props;return Math.round(100*(B*W[0]+U*W[4]+W[12]))/100+","+Math.round(100*(B*W[1]+U*W[5]+W[13]))/100}function O(){for(var B=0,U=this.props,W="matrix3d(";B<16;)W+=d(1e4*U[B])/1e4,W+=B===15?")":",",B+=1;return W}function D(B){return B<1e-6&&B>0||B>-1e-6&&B<0?d(1e4*B)/1e4:B}function V(){var B=this.props;return"matrix("+D(B[0])+","+D(B[1])+","+D(B[4])+","+D(B[5])+","+D(B[12])+","+D(B[13])+")"}return function(){this.reset=r,this.rotate=m,this.rotateX=e,this.rotateY=u,this.rotateZ=g,this.skew=s,this.skewFromAxis=o,this.shear=c,this.scale=a,this.setTransform=l,this.translate=p,this.transform=h,this.multiply=f,this.applyToPoint=E,this.applyToX=b,this.applyToY=T,this.applyToZ=P,this.applyToPointArray=I,this.applyToTriplePoints=R,this.applyToPointStringified=L,this.toCSS=O,this.to2dCSS=V,this.clone=x,this.cloneFromProps=S,this.equals=y,this.inversePoints=A,this.inversePoint=w,this.getInverseMatrix=C,this._t=this.transform,this.isIdentity=v,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(i){return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(i)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(i){setLocationHref(i)}function searchAnimations(){standalone===!0?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(i){setSubframeEnabled(i)}function setPrefix(i){setIdPrefix(i)}function loadAnimation(i){return standalone===!0&&(i.animationData=JSON.parse(animationData)),animationManager.loadAnimation(i)}function setQuality(i){if(typeof i=="string")switch(i){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(i)&&i>1&&setDefaultCurveSegments(i);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return typeof navigator<"u"}function installPlugin(i,t){i==="expressions"&&setExpressionsPlugin(t)}function getFactory(i){switch(i){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(i){for(var t=queryString.split("&"),n=0;n<t.length;n+=1){var d=t[n].split("=");if(decodeURIComponent(d[0])==i)return decodeURIComponent(d[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(i){}var ShapeModifiers=function(){var i={},t={};return i.registerModifier=function(n,d){t[n]||(t[n]=d)},i.getModifier=function(n,d,r){return new t[n](d,r)},i}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(i){if(!this.closed){i.sh.container.addDynamicProperty(i.sh);var t={shape:i.sh,data:i,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&i.setAsAnimated()}},ShapeModifier.prototype.init=function(i,t){this.shapes=[],this.elem=i,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(i,t){this.s=PropertyFactory.getProp(i,t.s,0,.01,this),this.e=PropertyFactory.getProp(i,t.e,0,.01,this),this.o=PropertyFactory.getProp(i,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(i){i.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(i,t,n,d,r){var m=[];t<=1?m.push({s:i,e:t}):i>=1?m.push({s:i-1,e:t-1}):(m.push({s:i,e:1}),m.push({s:0,e:t-1}));var e,u,g=[],c=m.length;for(e=0;e<c;e+=1){var s,o;(u=m[e]).e*r<d||u.s*r>d+n||(s=u.s*r<=d?0:(u.s*r-d)/n,o=u.e*r>=d+n?1:(u.e*r-d)/n,g.push([s,o]))}return g.length||g.push([0,0]),g},TrimModifier.prototype.releasePathsData=function(i){var t,n=i.length;for(t=0;t<n;t+=1)segmentsLengthPool.release(i[t]);return i.length=0,i},TrimModifier.prototype.processShapes=function(i){var t,n,d,r;if(this._mdf||i){var m=this.o.v%360/360;if(m<0&&(m+=1),(t=this.s.v>1?1+m:this.s.v<0?0+m:this.s.v+m)>(n=this.e.v>1?1+m:this.e.v<0?0+m:this.e.v+m)){var e=t;t=n,n=e}t=1e-4*Math.round(1e4*t),n=1e-4*Math.round(1e4*n),this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var u,g,c,s,o,a=this.shapes.length,l=0;if(n===t)for(r=0;r<a;r+=1)this.shapes[r].localShapeCollection.releaseShapes(),this.shapes[r].shape._mdf=!0,this.shapes[r].shape.paths=this.shapes[r].localShapeCollection,this._mdf&&(this.shapes[r].pathsData.length=0);else if(n===1&&t===0||n===0&&t===1){if(this._mdf)for(r=0;r<a;r+=1)this.shapes[r].pathsData.length=0,this.shapes[r].shape._mdf=!0}else{var p,h,f=[];for(r=0;r<a;r+=1)if((p=this.shapes[r]).shape._mdf||this._mdf||i||this.m===2){if(g=(d=p.shape.paths)._length,o=0,!p.shape._mdf&&p.pathsData.length)o=p.totalShapeLength;else{for(c=this.releasePathsData(p.pathsData),u=0;u<g;u+=1)s=bez.getSegmentsLength(d.shapes[u]),c.push(s),o+=s.totalLength;p.totalShapeLength=o,p.pathsData=c}l+=o,p.shape._mdf=!0}else p.shape.paths=p.localShapeCollection;var v,y=t,x=n,S=0;for(r=a-1;r>=0;r-=1)if((p=this.shapes[r]).shape._mdf){for((h=p.localShapeCollection).releaseShapes(),this.m===2&&a>1?(v=this.calculateShapeEdges(t,n,p.totalShapeLength,S,l),S+=p.totalShapeLength):v=[[y,x]],g=v.length,u=0;u<g;u+=1){y=v[u][0],x=v[u][1],f.length=0,x<=1?f.push({s:p.totalShapeLength*y,e:p.totalShapeLength*x}):y>=1?f.push({s:p.totalShapeLength*(y-1),e:p.totalShapeLength*(x-1)}):(f.push({s:p.totalShapeLength*y,e:p.totalShapeLength}),f.push({s:0,e:p.totalShapeLength*(x-1)}));var E=this.addShapes(p,f[0]);if(f[0].s!==f[0].e){if(f.length>1)if(p.shape.paths.shapes[p.shape.paths._length-1].c){var b=E.pop();this.addPaths(E,h),E=this.addShapes(p,f[1],b)}else this.addPaths(E,h),E=this.addShapes(p,f[1]);this.addPaths(E,h)}}p.shape.paths=h}}},TrimModifier.prototype.addPaths=function(i,t){var n,d=i.length;for(n=0;n<d;n+=1)t.addShape(i[n])},TrimModifier.prototype.addSegment=function(i,t,n,d,r,m,e){r.setXYAt(t[0],t[1],"o",m),r.setXYAt(n[0],n[1],"i",m+1),e&&r.setXYAt(i[0],i[1],"v",m),r.setXYAt(d[0],d[1],"v",m+1)},TrimModifier.prototype.addSegmentFromArray=function(i,t,n,d){t.setXYAt(i[1],i[5],"o",n),t.setXYAt(i[2],i[6],"i",n+1),d&&t.setXYAt(i[0],i[4],"v",n),t.setXYAt(i[3],i[7],"v",n+1)},TrimModifier.prototype.addShapes=function(i,t,n){var d,r,m,e,u,g,c,s,o=i.pathsData,a=i.shape.paths.shapes,l=i.shape.paths._length,p=0,h=[],f=!0;for(n?(u=n._length,s=n._length):(n=shapePool.newElement(),u=0,s=0),h.push(n),d=0;d<l;d+=1){for(g=o[d].lengths,n.c=a[d].c,m=a[d].c?g.length:g.length+1,r=1;r<m;r+=1)if(p+(e=g[r-1]).addedLength<t.s)p+=e.addedLength,n.c=!1;else{if(p>t.e){n.c=!1;break}t.s<=p&&t.e>=p+e.addedLength?(this.addSegment(a[d].v[r-1],a[d].o[r-1],a[d].i[r],a[d].v[r],n,u,f),f=!1):(c=bez.getNewSegment(a[d].v[r-1],a[d].v[r],a[d].o[r-1],a[d].i[r],(t.s-p)/e.addedLength,(t.e-p)/e.addedLength,g[r-1]),this.addSegmentFromArray(c,n,u,f),f=!1,n.c=!1),p+=e.addedLength,u+=1}if(a[d].c&&g.length){if(e=g[r-1],p<=t.e){var v=g[r-1].addedLength;t.s<=p&&t.e>=p+v?(this.addSegment(a[d].v[r-1],a[d].o[r-1],a[d].i[0],a[d].v[0],n,u,f),f=!1):(c=bez.getNewSegment(a[d].v[r-1],a[d].v[0],a[d].o[r-1],a[d].i[0],(t.s-p)/v,(t.e-p)/v,g[r-1]),this.addSegmentFromArray(c,n,u,f),f=!1,n.c=!1)}else n.c=!1;p+=e.addedLength,u+=1}if(n._length&&(n.setXYAt(n.v[s][0],n.v[s][1],"i",s),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),p>t.e)break;d<l-1&&(n=shapePool.newElement(),f=!0,h.push(n),u=0)}return h},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(i,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(i,t){var n=t/100,d=[0,0],r=i._length,m=0;for(m=0;m<r;m+=1)d[0]+=i.v[m][0],d[1]+=i.v[m][1];d[0]/=r,d[1]/=r;var e,u,g,c,s,o,a=shapePool.newElement();for(a.c=i.c,m=0;m<r;m+=1)e=i.v[m][0]+(d[0]-i.v[m][0])*n,u=i.v[m][1]+(d[1]-i.v[m][1])*n,g=i.o[m][0]+(d[0]-i.o[m][0])*-n,c=i.o[m][1]+(d[1]-i.o[m][1])*-n,s=i.i[m][0]+(d[0]-i.i[m][0])*-n,o=i.i[m][1]+(d[1]-i.i[m][1])*-n,a.setTripleAt(e,u,g,c,s,o,m);return a},PuckerAndBloatModifier.prototype.processShapes=function(i){var t,n,d,r,m,e,u=this.shapes.length,g=this.amount.v;if(g!==0)for(n=0;n<u;n+=1){if(e=(m=this.shapes[n]).localShapeCollection,m.shape._mdf||this._mdf||i)for(e.releaseShapes(),m.shape._mdf=!0,t=m.shape.paths.shapes,r=m.shape.paths._length,d=0;d<r;d+=1)e.addShape(this.processPath(t[d],g));m.shape.paths=m.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var i=[0,0];function t(n,d,r){if(this.elem=n,this.frameId=-1,this.propType="transform",this.data=d,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(r||n),d.p&&d.p.s?(this.px=PropertyFactory.getProp(n,d.p.x,0,0,this),this.py=PropertyFactory.getProp(n,d.p.y,0,0,this),d.p.z&&(this.pz=PropertyFactory.getProp(n,d.p.z,0,0,this))):this.p=PropertyFactory.getProp(n,d.p||{k:[0,0,0]},1,0,this),d.rx){if(this.rx=PropertyFactory.getProp(n,d.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(n,d.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(n,d.rz,0,degToRads,this),d.or.k[0].ti){var m,e=d.or.k.length;for(m=0;m<e;m+=1)d.or.k[m].to=null,d.or.k[m].ti=null}this.or=PropertyFactory.getProp(n,d.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(n,d.r||{k:0},0,degToRads,this);d.sk&&(this.sk=PropertyFactory.getProp(n,d.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(n,d.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(n,d.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(n,d.s||{k:[100,100,100]},1,.01,this),d.o?this.o=PropertyFactory.getProp(n,d.o,0,.01,n):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(n){var d=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||d,this.a&&n.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&n.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&n.skewFromAxis(-this.sk.v,this.sa.v),this.r?n.rotate(-this.r.v):n.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?n.translate(this.px.v,this.py.v,-this.pz.v):n.translate(this.px.v,this.py.v,0):n.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(n){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||n){var d;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,m;if(d=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/d,0),m=this.p.getValueAtTime(this.p.keyframes[0].t/d,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/d,0),m=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/d,0)):(r=this.p.pv,m=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/d,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],m=[];var e=this.px,u=this.py;e._caching.lastFrame+e.offsetTime<=e.keyframes[0].t?(r[0]=e.getValueAtTime((e.keyframes[0].t+.01)/d,0),r[1]=u.getValueAtTime((u.keyframes[0].t+.01)/d,0),m[0]=e.getValueAtTime(e.keyframes[0].t/d,0),m[1]=u.getValueAtTime(u.keyframes[0].t/d,0)):e._caching.lastFrame+e.offsetTime>=e.keyframes[e.keyframes.length-1].t?(r[0]=e.getValueAtTime(e.keyframes[e.keyframes.length-1].t/d,0),r[1]=u.getValueAtTime(u.keyframes[u.keyframes.length-1].t/d,0),m[0]=e.getValueAtTime((e.keyframes[e.keyframes.length-1].t-.01)/d,0),m[1]=u.getValueAtTime((u.keyframes[u.keyframes.length-1].t-.01)/d,0)):(r=[e.pv,u.pv],m[0]=e.getValueAtTime((e._caching.lastFrame+e.offsetTime-.01)/d,e.offsetTime),m[1]=u.getValueAtTime((u._caching.lastFrame+u.offsetTime-.01)/d,u.offsetTime))}else r=m=i;this.v.rotate(-Math.atan2(r[1]-m[1],r[0]-m[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(n){this._addDynamicProperty(n),this.elem.addDynamicProperty(n),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(n,d,r){return new t(n,d,r)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(i,t){return 1e5*Math.abs(i-t)<=Math.min(Math.abs(i),Math.abs(t))}function floatZero(i){return Math.abs(i)<=1e-5}function lerp(i,t,n){return i*(1-n)+t*n}function lerpPoint(i,t,n){return[lerp(i[0],t[0],n),lerp(i[1],t[1],n)]}function quadRoots(i,t,n){if(i===0)return[];var d=t*t-4*i*n;if(d<0)return[];var r=-t/(2*i);if(d===0)return[r];var m=Math.sqrt(d)/(2*i);return[r-m,r+m]}function polynomialCoefficients(i,t,n,d){return[3*t-i-3*n+d,3*i-6*t+3*n,-3*i+3*t,i]}function singlePoint(i){return new PolynomialBezier(i,i,i,i,!1)}function PolynomialBezier(i,t,n,d,r){r&&pointEqual(i,t)&&(t=lerpPoint(i,d,1/3)),r&&pointEqual(n,d)&&(n=lerpPoint(i,d,2/3));var m=polynomialCoefficients(i[0],t[0],n[0],d[0]),e=polynomialCoefficients(i[1],t[1],n[1],d[1]);this.a=[m[0],e[0]],this.b=[m[1],e[1]],this.c=[m[2],e[2]],this.d=[m[3],e[3]],this.points=[i,t,n,d]}function extrema(i,t){var n=i.points[0][t],d=i.points[i.points.length-1][t];if(n>d){var r=d;d=n,n=r}for(var m=quadRoots(3*i.a[t],2*i.b[t],i.c[t]),e=0;e<m.length;e+=1)if(m[e]>0&&m[e]<1){var u=i.point(m[e])[t];u<n?n=u:u>d&&(d=u)}return{min:n,max:d}}function intersectData(i,t,n){var d=i.boundingBox();return{cx:d.cx,cy:d.cy,width:d.width,height:d.height,bez:i,t:(t+n)/2,t1:t,t2:n}}function splitData(i){var t=i.bez.split(.5);return[intersectData(t[0],i.t1,i.t),intersectData(t[1],i.t,i.t2)]}function boxIntersect(i,t){return 2*Math.abs(i.cx-t.cx)<i.width+t.width&&2*Math.abs(i.cy-t.cy)<i.height+t.height}function intersectsImpl(i,t,n,d,r,m){if(boxIntersect(i,t))if(n>=m||i.width<=d&&i.height<=d&&t.width<=d&&t.height<=d)r.push([i.t,t.t]);else{var e=splitData(i),u=splitData(t);intersectsImpl(e[0],u[0],n+1,d,r,m),intersectsImpl(e[0],u[1],n+1,d,r,m),intersectsImpl(e[1],u[0],n+1,d,r,m),intersectsImpl(e[1],u[1],n+1,d,r,m)}}function crossProduct(i,t){return[i[1]*t[2]-i[2]*t[1],i[2]*t[0]-i[0]*t[2],i[0]*t[1]-i[1]*t[0]]}function lineIntersection(i,t,n,d){var r=[i[0],i[1],1],m=[t[0],t[1],1],e=[n[0],n[1],1],u=[d[0],d[1],1],g=crossProduct(crossProduct(r,m),crossProduct(e,u));return floatZero(g[2])?null:[g[0]/g[2],g[1]/g[2]]}function polarOffset(i,t,n){return[i[0]+Math.cos(t)*n,i[1]-Math.sin(t)*n]}function pointDistance(i,t){return Math.hypot(i[0]-t[0],i[1]-t[1])}function pointEqual(i,t){return floatEqual(i[0],t[0])&&floatEqual(i[1],t[1])}function ZigZagModifier(){}function setPoint(i,t,n,d,r,m,e){var u=n-Math.PI/2,g=n+Math.PI/2,c=t[0]+Math.cos(n)*d*r,s=t[1]-Math.sin(n)*d*r;i.setTripleAt(c,s,c+Math.cos(u)*m,s-Math.sin(u)*m,c+Math.cos(g)*e,s-Math.sin(g)*e,i.length())}function getPerpendicularVector(i,t){var n=[t[0]-i[0],t[1]-i[1]],d=.5*-Math.PI;return[Math.cos(d)*n[0]-Math.sin(d)*n[1],Math.sin(d)*n[0]+Math.cos(d)*n[1]]}function getProjectingAngle(i,t){var n=t===0?i.length()-1:t-1,d=(t+1)%i.length(),r=getPerpendicularVector(i.v[n],i.v[d]);return Math.atan2(0,1)-Math.atan2(r[1],r[0])}function zigZagCorner(i,t,n,d,r,m,e){var u=getProjectingAngle(t,n),g=t.v[n%t._length],c=t.v[n===0?t._length-1:n-1],s=t.v[(n+1)%t._length],o=m===2?Math.sqrt(Math.pow(g[0]-c[0],2)+Math.pow(g[1]-c[1],2)):0,a=m===2?Math.sqrt(Math.pow(g[0]-s[0],2)+Math.pow(g[1]-s[1],2)):0;setPoint(i,t.v[n%t._length],u,e,d,a/(2*(r+1)),o/(2*(r+1)),m)}function zigZagSegment(i,t,n,d,r,m){for(var e=0;e<d;e+=1){var u=(e+1)/(d+1),g=r===2?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,c=t.normalAngle(u);setPoint(i,t.point(u),c,m,n,g/(2*(d+1)),g/(2*(d+1)),r),m=-m}return m}function linearOffset(i,t,n){var d=Math.atan2(t[0]-i[0],t[1]-i[1]);return[polarOffset(i,d,n),polarOffset(t,d,n)]}function offsetSegment(i,t){var n,d,r,m,e,u,g;n=(g=linearOffset(i.points[0],i.points[1],t))[0],d=g[1],r=(g=linearOffset(i.points[1],i.points[2],t))[0],m=g[1],e=(g=linearOffset(i.points[2],i.points[3],t))[0],u=g[1];var c=lineIntersection(n,d,r,m);c===null&&(c=d);var s=lineIntersection(e,u,r,m);return s===null&&(s=e),new PolynomialBezier(n,c,s,u)}function joinLines(i,t,n,d,r){var m=t.points[3],e=n.points[0];if(d===3||pointEqual(m,e))return m;if(d===2){var u=-t.tangentAngle(1),g=-n.tangentAngle(0)+Math.PI,c=lineIntersection(m,polarOffset(m,u+Math.PI/2,100),e,polarOffset(e,u+Math.PI/2,100)),s=c?pointDistance(c,m):pointDistance(m,e)/2,o=polarOffset(m,u,2*s*roundCorner);return i.setXYAt(o[0],o[1],"o",i.length()-1),o=polarOffset(e,g,2*s*roundCorner),i.setTripleAt(e[0],e[1],e[0],e[1],o[0],o[1],i.length()),e}var a=lineIntersection(pointEqual(m,t.points[2])?t.points[0]:t.points[2],m,e,pointEqual(e,n.points[1])?n.points[3]:n.points[1]);return a&&pointDistance(a,m)<r?(i.setTripleAt(a[0],a[1],a[0],a[1],a[0],a[1],i.length()),a):m}function getIntersection(i,t){var n=i.intersections(t);return n.length&&floatEqual(n[0][0],1)&&n.shift(),n.length?n[0]:null}function pruneSegmentIntersection(i,t){var n=i.slice(),d=t.slice(),r=getIntersection(i[i.length-1],t[0]);return r&&(n[i.length-1]=i[i.length-1].split(r[0])[0],d[0]=t[0].split(r[1])[1]),i.length>1&&t.length>1&&(r=getIntersection(i[0],t[t.length-1]))?[[i[0].split(r[0])[0]],[t[t.length-1].split(r[1])[1]]]:[n,d]}function pruneIntersections(i){for(var t,n=1;n<i.length;n+=1)t=pruneSegmentIntersection(i[n-1],i[n]),i[n-1]=t[0],i[n]=t[1];return i.length>1&&(t=pruneSegmentIntersection(i[i.length-1],i[0]),i[i.length-1]=t[0],i[0]=t[1]),i}function offsetSegmentSplit(i,t){var n,d,r,m,e=i.inflectionPoints();if(e.length===0)return[offsetSegment(i,t)];if(e.length===1||floatEqual(e[1],1))return n=(r=i.split(e[0]))[0],d=r[1],[offsetSegment(n,t),offsetSegment(d,t)];n=(r=i.split(e[0]))[0];var u=(e[1]-e[0])/(1-e[0]);return m=(r=r[1].split(u))[0],d=r[1],[offsetSegment(n,t),offsetSegment(m,t),offsetSegment(d,t)]}function OffsetPathModifier(){}function getFontProperties(i){for(var t=i.fStyle?i.fStyle.split(" "):[],n="normal",d="normal",r=t.length,m=0;m<r;m+=1)switch(t[m].toLowerCase()){case"italic":d="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:d,weight:i.fWeight||n}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(i,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(i,t.c,0,null,this),this.o=PropertyFactory.getProp(i,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(i,t.tr,this),this.so=PropertyFactory.getProp(i,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(i,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(i,t,n,d,r,m){var e=m?-1:1,u=d.s.v[0]+(1-d.s.v[0])*(1-r),g=d.s.v[1]+(1-d.s.v[1])*(1-r);i.translate(d.p.v[0]*e*r,d.p.v[1]*e*r,d.p.v[2]),t.translate(-d.a.v[0],-d.a.v[1],d.a.v[2]),t.rotate(-d.r.v*e*r),t.translate(d.a.v[0],d.a.v[1],d.a.v[2]),n.translate(-d.a.v[0],-d.a.v[1],d.a.v[2]),n.scale(m?1/u:u,m?1/g:g),n.translate(d.a.v[0],d.a.v[1],d.a.v[2])},RepeaterModifier.prototype.init=function(i,t,n,d){for(this.elem=i,this.arr=t,this.pos=n,this.elemsData=d,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(i),this.initModifierProperties(i,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(i){var t,n=i.length;for(t=0;t<n;t+=1)i[t]._processed=!1,i[t].ty==="gr"&&this.resetElements(i[t].it)},RepeaterModifier.prototype.cloneElements=function(i){var t=JSON.parse(JSON.stringify(i));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(i,t){var n,d=i.length;for(n=0;n<d;n+=1)i[n]._render=t,i[n].ty==="gr"&&this.changeGroupRender(i[n].it,t)},RepeaterModifier.prototype.processShapes=function(i){var t,n,d,r,m,e=!1;if(this._mdf||i){var u,g=Math.ceil(this.c.v);if(this._groups.length<g){for(;this._groups.length<g;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),e=!0}for(m=0,d=0;d<=this._groups.length-1;d+=1){if(u=m<g,this._groups[d]._render=u,this.changeGroupRender(this._groups[d].it,u),!u){var s=this.elemsData[d].it,o=s[s.length-1];o.transform.op.v!==0?(o.transform.op._mdf=!0,o.transform.op.v=0):o.transform.op._mdf=!1}m+=1}this._currentCopies=g;var a=this.o.v,l=a%1,p=a>0?Math.floor(a):Math.ceil(a),h=this.pMatrix.props,f=this.rMatrix.props,v=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y,x,S=0;if(a>0){for(;S<p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),S+=1;l&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,l,!1),S+=l)}else if(a<0){for(;S>p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),S-=1;l&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-l,!0),S-=l)}for(d=this.data.m===1?0:this._currentCopies-1,r=this.data.m===1?1:-1,m=this._currentCopies;m;){if(x=(n=(t=this.elemsData[d].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(d/(this._currentCopies-1)),S!==0){for((d!==0&&r===1||d!==this._currentCopies-1&&r===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15]),y=0;y<x;y+=1)n[y]=this.matrix.props[y];this.matrix.reset()}else for(this.matrix.reset(),y=0;y<x;y+=1)n[y]=this.matrix.props[y];S+=1,m-=1,d+=r}}else for(m=this._currentCopies,d=0,r=1;m;)n=(t=this.elemsData[d].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,m-=1,d+=r;return e},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(i,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(i,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(i,t){var n,d=shapePool.newElement();d.c=i.c;var r,m,e,u,g,c,s,o,a,l,p,h,f=i._length,v=0;for(n=0;n<f;n+=1)r=i.v[n],e=i.o[n],m=i.i[n],r[0]===e[0]&&r[1]===e[1]&&r[0]===m[0]&&r[1]===m[1]?n!==0&&n!==f-1||i.c?(u=n===0?i.v[f-1]:i.v[n-1],c=(g=Math.sqrt(Math.pow(r[0]-u[0],2)+Math.pow(r[1]-u[1],2)))?Math.min(g/2,t)/g:0,s=p=r[0]+(u[0]-r[0])*c,o=h=r[1]-(r[1]-u[1])*c,a=s-(s-r[0])*roundCorner,l=o-(o-r[1])*roundCorner,d.setTripleAt(s,o,a,l,p,h,v),v+=1,u=n===f-1?i.v[0]:i.v[n+1],c=(g=Math.sqrt(Math.pow(r[0]-u[0],2)+Math.pow(r[1]-u[1],2)))?Math.min(g/2,t)/g:0,s=a=r[0]+(u[0]-r[0])*c,o=l=r[1]+(u[1]-r[1])*c,p=s-(s-r[0])*roundCorner,h=o-(o-r[1])*roundCorner,d.setTripleAt(s,o,a,l,p,h,v),v+=1):(d.setTripleAt(r[0],r[1],e[0],e[1],m[0],m[1],v),v+=1):(d.setTripleAt(i.v[n][0],i.v[n][1],i.o[n][0],i.o[n][1],i.i[n][0],i.i[n][1],v),v+=1);return d},RoundCornersModifier.prototype.processShapes=function(i){var t,n,d,r,m,e,u=this.shapes.length,g=this.rd.v;if(g!==0)for(n=0;n<u;n+=1){if(e=(m=this.shapes[n]).localShapeCollection,m.shape._mdf||this._mdf||i)for(e.releaseShapes(),m.shape._mdf=!0,t=m.shape.paths.shapes,r=m.shape.paths._length,d=0;d<r;d+=1)e.addShape(this.processPath(t[d],g));m.shape.paths=m.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(i){return[((this.a[0]*i+this.b[0])*i+this.c[0])*i+this.d[0],((this.a[1]*i+this.b[1])*i+this.c[1])*i+this.d[1]]},PolynomialBezier.prototype.derivative=function(i){return[(3*i*this.a[0]+2*this.b[0])*i+this.c[0],(3*i*this.a[1]+2*this.b[1])*i+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(i){var t=this.derivative(i);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(i){var t=this.derivative(i);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var i=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(i))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/i,n=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/i;if(n<0)return[];var d=Math.sqrt(n);return floatZero(d)?d>0&&d<1?[t]:[]:[t-d,t+d].filter(function(r){return r>0&&r<1})},PolynomialBezier.prototype.split=function(i){if(i<=0)return[singlePoint(this.points[0]),this];if(i>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],i),n=lerpPoint(this.points[1],this.points[2],i),d=lerpPoint(this.points[2],this.points[3],i),r=lerpPoint(t,n,i),m=lerpPoint(n,d,i),e=lerpPoint(r,m,i);return[new PolynomialBezier(this.points[0],t,r,e,!0),new PolynomialBezier(e,m,d,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var i=this.bounds();return{left:i.x.min,right:i.x.max,top:i.y.min,bottom:i.y.max,width:i.x.max-i.x.min,height:i.y.max-i.y.min,cx:(i.x.max+i.x.min)/2,cy:(i.y.max+i.y.min)/2}},PolynomialBezier.prototype.intersections=function(i,t,n){t===void 0&&(t=2),n===void 0&&(n=7);var d=[];return intersectsImpl(intersectData(this,0,1),intersectData(i,0,1),0,t,d,n),d},PolynomialBezier.shapeSegment=function(i,t){var n=(t+1)%i.length();return new PolynomialBezier(i.v[t],i.o[t],i.i[n],i.v[n],!0)},PolynomialBezier.shapeSegmentInverted=function(i,t){var n=(t+1)%i.length();return new PolynomialBezier(i.v[n],i.i[n],i.o[t],i.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(i,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(i,t.s,0,null,this),this.frequency=PropertyFactory.getProp(i,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(i,t.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0},ZigZagModifier.prototype.processPath=function(i,t,n,d){var r=i._length,m=shapePool.newElement();if(m.c=i.c,i.c||(r-=1),r===0)return m;var e=-1,u=PolynomialBezier.shapeSegment(i,0);zigZagCorner(m,i,0,t,n,d,e);for(var g=0;g<r;g+=1)e=zigZagSegment(m,u,t,n,d,-e),u=g!==r-1||i.c?PolynomialBezier.shapeSegment(i,(g+1)%r):null,zigZagCorner(m,i,g+1,t,n,d,e);return m},ZigZagModifier.prototype.processShapes=function(i){var t,n,d,r,m,e,u=this.shapes.length,g=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),s=this.pointsType.v;if(g!==0)for(n=0;n<u;n+=1){if(e=(m=this.shapes[n]).localShapeCollection,m.shape._mdf||this._mdf||i)for(e.releaseShapes(),m.shape._mdf=!0,t=m.shape.paths.shapes,r=m.shape.paths._length,d=0;d<r;d+=1)e.addShape(this.processPath(t[d],g,c,s));m.shape.paths=m.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(i,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(i,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(i,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(i,t,n,d){var r=shapePool.newElement();r.c=i.c;var m,e,u,g=i.length();i.c||(g-=1);var c=[];for(m=0;m<g;m+=1)u=PolynomialBezier.shapeSegment(i,m),c.push(offsetSegmentSplit(u,t));if(!i.c)for(m=g-1;m>=0;m-=1)u=PolynomialBezier.shapeSegmentInverted(i,m),c.push(offsetSegmentSplit(u,t));c=pruneIntersections(c);var s=null,o=null;for(m=0;m<c.length;m+=1){var a=c[m];for(o&&(s=joinLines(r,o,a[0],n,d)),o=a[a.length-1],e=0;e<a.length;e+=1)u=a[e],s&&pointEqual(u.points[0],s)?r.setXYAt(u.points[1][0],u.points[1][1],"o",r.length()-1):r.setTripleAt(u.points[0][0],u.points[0][1],u.points[1][0],u.points[1][1],u.points[0][0],u.points[0][1],r.length()),r.setTripleAt(u.points[3][0],u.points[3][1],u.points[3][0],u.points[3][1],u.points[2][0],u.points[2][1],r.length()),s=u.points[3]}return c.length&&joinLines(r,o,c[0][0],n,d),r},OffsetPathModifier.prototype.processShapes=function(i){var t,n,d,r,m,e,u=this.shapes.length,g=this.amount.v,c=this.miterLimit.v,s=this.lineJoin;if(g!==0)for(n=0;n<u;n+=1){if(e=(m=this.shapes[n]).localShapeCollection,m.shape._mdf||this._mdf||i)for(e.releaseShapes(),m.shape._mdf=!0,t=m.shape.paths.shapes,r=m.shape.paths._length,d=0;d<r;d+=1)e.addShape(this.processPath(t[d],g,s,c));m.shape.paths=m.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var i={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=127988,d=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function r(s,o){var a=createTag("span");a.setAttribute("aria-hidden",!0),a.style.fontFamily=o;var l=createTag("span");l.innerText="giItT1WQy@!-/#",a.style.position="absolute",a.style.left="-10000px",a.style.top="-10000px",a.style.fontSize="300px",a.style.fontVariant="normal",a.style.fontStyle="normal",a.style.fontWeight="normal",a.style.letterSpacing="0",a.appendChild(l),document.body.appendChild(a);var p=l.offsetWidth;return l.style.fontFamily=function(h){var f,v=h.split(","),y=v.length,x=[];for(f=0;f<y;f+=1)v[f]!=="sans-serif"&&v[f]!=="monospace"&&x.push(v[f]);return x.join(",")}(s)+", "+o,{node:l,w:p,parent:a}}function m(s,o){var a,l=document.body&&o?"svg":"canvas",p=getFontProperties(s);if(l==="svg"){var h=createNS("text");h.style.fontSize="100px",h.setAttribute("font-family",s.fFamily),h.setAttribute("font-style",p.style),h.setAttribute("font-weight",p.weight),h.textContent="1",s.fClass?(h.style.fontFamily="inherit",h.setAttribute("class",s.fClass)):h.style.fontFamily=s.fFamily,o.appendChild(h),a=h}else{var f=new OffscreenCanvas(500,500).getContext("2d");f.font=p.style+" "+p.weight+" 100px "+s.fFamily,a=f}return{measureText:function(v){return l==="svg"?(a.textContent=v,a.getComputedTextLength()):a.measureText(v).width}}}function e(s){var o=0,a=s.charCodeAt(0);if(a>=55296&&a<=56319){var l=s.charCodeAt(1);l>=56320&&l<=57343&&(o=1024*(a-55296)+l-56320+65536)}return o}function u(s){var o=e(s);return o>=127462&&o<=127487}var g=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};g.isModifier=function(s,o){var a=s.toString(16)+o.toString(16);return d.indexOf(a)!==-1},g.isZeroWidthJoiner=function(s){return s===8205},g.isFlagEmoji=function(s){return u(s.substr(0,2))&&u(s.substr(2,2))},g.isRegionalCode=u,g.isCombinedCharacter=function(s){return t.indexOf(s)!==-1},g.isRegionalFlag=function(s,o){var a=e(s.substr(o,2));if(a!==n)return!1;var l=0;for(o+=2;l<5;){if((a=e(s.substr(o,2)))<917601||a>917626)return!1;l+=1,o+=2}return e(s.substr(o,2))===917631},g.isVariationSelector=function(s){return s===65039},g.BLACK_FLAG_CODE_POINT=n;var c={addChars:function(s){if(s){var o;this.chars||(this.chars=[]);var a,l,p=s.length,h=this.chars.length;for(o=0;o<p;o+=1){for(a=0,l=!1;a<h;)this.chars[a].style===s[o].style&&this.chars[a].fFamily===s[o].fFamily&&this.chars[a].ch===s[o].ch&&(l=!0),a+=1;l||(this.chars.push(s[o]),h+=1)}}},addFonts:function(s,o){if(s){if(this.chars)return this.isLoaded=!0,void(this.fonts=s.list);if(!document.body)return this.isLoaded=!0,s.list.forEach(function(b){b.helper=m(b),b.cache={}}),void(this.fonts=s.list);var a,l=s.list,p=l.length,h=p;for(a=0;a<p;a+=1){var f,v,y=!0;if(l[a].loaded=!1,l[a].monoCase=r(l[a].fFamily,"monospace"),l[a].sansCase=r(l[a].fFamily,"sans-serif"),l[a].fPath){if(l[a].fOrigin==="p"||l[a].origin===3){if((f=document.querySelectorAll('style[f-forigin="p"][f-family="'+l[a].fFamily+'"], style[f-origin="3"][f-family="'+l[a].fFamily+'"]')).length>0&&(y=!1),y){var x=createTag("style");x.setAttribute("f-forigin",l[a].fOrigin),x.setAttribute("f-origin",l[a].origin),x.setAttribute("f-family",l[a].fFamily),x.type="text/css",x.innerText="@font-face {font-family: "+l[a].fFamily+"; font-style: normal; src: url('"+l[a].fPath+"');}",o.appendChild(x)}}else if(l[a].fOrigin==="g"||l[a].origin===1){for(f=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),v=0;v<f.length;v+=1)f[v].href.indexOf(l[a].fPath)!==-1&&(y=!1);if(y){var S=createTag("link");S.setAttribute("f-forigin",l[a].fOrigin),S.setAttribute("f-origin",l[a].origin),S.type="text/css",S.rel="stylesheet",S.href=l[a].fPath,document.body.appendChild(S)}}else if(l[a].fOrigin==="t"||l[a].origin===2){for(f=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),v=0;v<f.length;v+=1)l[a].fPath===f[v].src&&(y=!1);if(y){var E=createTag("link");E.setAttribute("f-forigin",l[a].fOrigin),E.setAttribute("f-origin",l[a].origin),E.setAttribute("rel","stylesheet"),E.setAttribute("href",l[a].fPath),o.appendChild(E)}}}else l[a].loaded=!0,h-=1;l[a].helper=m(l[a],o),l[a].cache={},this.fonts.push(l[a])}h===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(s,o,a){for(var l=0,p=this.chars.length;l<p;){if(this.chars[l].ch===s&&this.chars[l].style===o&&this.chars[l].fFamily===a)return this.chars[l];l+=1}return(typeof s=="string"&&s.charCodeAt(0)!==13||!s)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",s,o,a)),i},getFontByName:function(s){for(var o=0,a=this.fonts.length;o<a;){if(this.fonts[o].fName===s)return this.fonts[o];o+=1}return this.fonts[0]},measureText:function(s,o,a){var l=this.getFontByName(o),p=s;if(!l.cache[p]){var h=l.helper;if(s===" "){var f=h.measureText("|"+s+"|"),v=h.measureText("||");l.cache[p]=(f-v)/100}else l.cache[p]=h.measureText(s)/100}return l.cache[p]*a},checkLoadedFonts:function(){var s,o,a,l=this.fonts.length,p=l;for(s=0;s<l;s+=1)this.fonts[s].loaded?p-=1:this.fonts[s].fOrigin==="n"||this.fonts[s].origin===0?this.fonts[s].loaded=!0:(o=this.fonts[s].monoCase.node,a=this.fonts[s].monoCase.w,o.offsetWidth!==a?(p-=1,this.fonts[s].loaded=!0):(o=this.fonts[s].sansCase.node,a=this.fonts[s].sansCase.w,o.offsetWidth!==a&&(p-=1,this.fonts[s].loaded=!0)),this.fonts[s].loaded&&(this.fonts[s].sansCase.parent.parentNode.removeChild(this.fonts[s].sansCase.parent),this.fonts[s].monoCase.parent.parentNode.removeChild(this.fonts[s].monoCase.parent)));p!==0&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return g.prototype=c,g}();function SlotManager(i){this.animationData=i}function slotFactory(i){return new SlotManager(i)}function RenderableElement(){}SlotManager.prototype.getProp=function(i){return this.animationData.slots&&this.animationData.slots[i.sid]?Object.assign(i,this.animationData.slots[i.sid].p):i},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(i){this.renderableComponents.indexOf(i)===-1&&this.renderableComponents.push(i)},removeRenderableComponent:function(i){this.renderableComponents.indexOf(i)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(i),1)},prepareRenderableFrame:function(i){this.checkLayerLimits(i)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(i){this.data.ip-this.data.st<=i&&this.data.op-this.data.st>i?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var i,t=this.renderableComponents.length;for(i=0;i<t;i+=1)this.renderableComponents[i].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(i){return blendModeEnums[i]||""}),blendModeEnums;function SliderEffect(i,t,n){this.p=PropertyFactory.getProp(t,i.v,0,0,n)}function AngleEffect(i,t,n){this.p=PropertyFactory.getProp(t,i.v,0,0,n)}function ColorEffect(i,t,n){this.p=PropertyFactory.getProp(t,i.v,1,0,n)}function PointEffect(i,t,n){this.p=PropertyFactory.getProp(t,i.v,1,0,n)}function LayerIndexEffect(i,t,n){this.p=PropertyFactory.getProp(t,i.v,0,0,n)}function MaskIndexEffect(i,t,n){this.p=PropertyFactory.getProp(t,i.v,0,0,n)}function CheckboxEffect(i,t,n){this.p=PropertyFactory.getProp(t,i.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(i,t){var n,d=i.ef||[];this.effectElements=[];var r,m=d.length;for(n=0;n<m;n+=1)r=new GroupEffect(d[n],t),this.effectElements.push(r)}function GroupEffect(i,t){this.init(i,t)}function BaseElement(){}function FrameElement(){}function FootageElement(i,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(i.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(i,t,n)}function AudioElement(i,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(i.refId),this.initBaseData(i,t,n),this._isPlaying=!1,this._canPlay=!1;var d=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(d),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,i.au&&i.au.lv?i.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(i,t){var n;this.data=i,this.effectElements=[],this.initDynamicPropertyContainer(t);var d,r=this.data.ef.length,m=this.data.ef;for(n=0;n<r;n+=1){switch(d=null,m[n].ty){case 0:d=new SliderEffect(m[n],t,this);break;case 1:d=new AngleEffect(m[n],t,this);break;case 2:d=new ColorEffect(m[n],t,this);break;case 3:d=new PointEffect(m[n],t,this);break;case 4:case 7:d=new CheckboxEffect(m[n],t,this);break;case 10:d=new LayerIndexEffect(m[n],t,this);break;case 11:d=new MaskIndexEffect(m[n],t,this);break;case 5:d=new EffectsManager(m[n],t,this);break;default:d=new NoValueEffect(m[n],t,this)}d&&this.effectElements.push(d)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var i=0,t=this.data.masksProperties.length;i<t;){if(this.data.masksProperties[i].mode!=="n"&&this.data.masksProperties[i].cl!==!1)return!0;i+=1}return!1},initExpressions:function(){var i=getExpressionInterfaces();if(i){var t=i("layer"),n=i("effects"),d=i("shape"),r=i("text"),m=i("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=n.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),this.data.ty===0||this.data.xt?this.compInterface=m(this):this.data.ty===4?(this.layerInterface.shapeInterface=d(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=r(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var i=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=i},initBaseData:function(i,t,n){this.globalData=t,this.comp=n,this.data=i,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(i,t){var n,d=this.dynamicProperties.length;for(n=0;n<d;n+=1)(t||this._isParent&&this.dynamicProperties[n].propType==="transform")&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(i){this.dynamicProperties.indexOf(i)===-1&&this.dynamicProperties.push(i)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var i=getExpressionInterfaces();if(i){var t=i("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(i){if(this.prepareRenderableFrame(i,!0),this.prepareProperties(i,!0),this.tm._placeholder)this._currentTime=i/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var n=this._volume*this._volumeMultiplier;this._previousVolume!==n&&(this._previousVolume=n,this.audio.volume(n))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(i){this.audio.rate(i)},AudioElement.prototype.volume=function(i){this._volumeMultiplier=i,this._previousVolume=i*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(i){var t,n,d=this.layers.length;for(this.completeLayers=!0,t=d-1;t>=0;t-=1)this.elements[t]||(n=this.layers[t]).ip-n.st<=i-this.layers[t].st&&n.op-n.st>i-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(i){switch(i.ty){case 2:return this.createImage(i);case 0:return this.createComp(i);case 1:return this.createSolid(i);case 3:default:return this.createNull(i);case 4:return this.createShape(i);case 5:return this.createText(i);case 6:return this.createAudio(i);case 13:return this.createCamera(i);case 15:return this.createFootage(i)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(i){return new AudioElement(i,this.globalData,this)},BaseRenderer.prototype.createFootage=function(i){return new FootageElement(i,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var i,t=this.layers.length;for(i=0;i<t;i+=1)this.buildItem(i);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(i){var t;this.completeLayers=!1;var n,d=i.length,r=this.layers.length;for(t=0;t<d;t+=1)for(n=0;n<r;){if(this.layers[n].id===i[t].id){this.layers[n]=i[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(i){this.globalData.projectInterface=i},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(i,t,n){for(var d=this.elements,r=this.layers,m=0,e=r.length;m<e;)r[m].ind==t&&(d[m]&&d[m]!==!0?(n.push(d[m]),d[m].setAsParent(),r[m].parent!==void 0?this.buildElementParenting(i,r[m].parent,n):i.setHierarchy(n)):(this.buildItem(m),this.addPendingElement(i))),m+=1},BaseRenderer.prototype.addPendingElement=function(i){this.pendingElements.push(i)},BaseRenderer.prototype.searchExtraCompositions=function(i){var t,n=i.length;for(t=0;t<n;t+=1)if(i[t].xt){var d=this.createComp(i[t]);d.initExpressions(),this.globalData.projectInterface.registerComposition(d)}},BaseRenderer.prototype.getElementById=function(i){var t,n=this.elements.length;for(t=0;t<n;t+=1)if(this.elements[t].data.ind===i)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(i){var t,n=i.shift();if(typeof n=="number")t=this.elements[n];else{var d,r=this.elements.length;for(d=0;d<r;d+=1)if(this.elements[d].data.nm===n){t=this.elements[d];break}}return i.length===0?t:t.getElementByPath(i)},BaseRenderer.prototype.setupGlobalData=function(i,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(i),this.globalData.fontManager.addChars(i.chars),this.globalData.fontManager.addFonts(i.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=i.fr,this.globalData.nm=i.nm,this.globalData.compSize={w:i.w,h:i.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(i,t,n){this.data=i,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var d,r,m=this.globalData.defs,e=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(e),this.solidPath="";var u,g,c,s,o,a,l=this.masksProperties,p=0,h=[],f=createElementID(),v="clipPath",y="clip-path";for(d=0;d<e;d+=1)if((l[d].mode!=="a"&&l[d].mode!=="n"||l[d].inv||l[d].o.k!==100||l[d].o.x)&&(v="mask",y="mask"),l[d].mode!=="s"&&l[d].mode!=="i"||p!==0?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),h.push(c)),r=createNS("path"),l[d].mode==="n")this.viewData[d]={op:PropertyFactory.getProp(this.element,l[d].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[d],3),elem:r,lastPath:""},m.appendChild(r);else{var x;if(p+=1,r.setAttribute("fill",l[d].mode==="s"?"#000000":"#ffffff"),r.setAttribute("clip-rule","nonzero"),l[d].x.k!==0?(v="mask",y="mask",a=PropertyFactory.getProp(this.element,l[d].x,0,null,this.element),x=createElementID(),(s=createNS("filter")).setAttribute("id",x),(o=createNS("feMorphology")).setAttribute("operator","erode"),o.setAttribute("in","SourceGraphic"),o.setAttribute("radius","0"),s.appendChild(o),m.appendChild(s),r.setAttribute("stroke",l[d].mode==="s"?"#000000":"#ffffff")):(o=null,a=null),this.storedData[d]={elem:r,x:a,expan:o,lastPath:"",lastOperator:"",filterId:x,lastRadius:0},l[d].mode==="i"){g=h.length;var S=createNS("g");for(u=0;u<g;u+=1)S.appendChild(h[u]);var E=createNS("mask");E.setAttribute("mask-type","alpha"),E.setAttribute("id",f+"_"+p),E.appendChild(r),m.appendChild(E),S.setAttribute("mask","url("+getLocationHref()+"#"+f+"_"+p+")"),h.length=0,h.push(S)}else h.push(r);l[d].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[d]={elem:r,lastPath:"",op:PropertyFactory.getProp(this.element,l[d].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[d],3),invRect:c},this.viewData[d].prop.k||this.drawPath(l[d],this.viewData[d].prop.v,this.viewData[d])}for(this.maskElement=createNS(v),e=h.length,d=0;d<e;d+=1)this.maskElement.appendChild(h[d]);p>0&&(this.maskElement.setAttribute("id",f),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+f+")"),m.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var i=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:i,localMat:i,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var i,t=this.finalTransform.mat,n=0,d=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<d;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(i=this.finalTransform.mProp.v.props,t.cloneFromProps(i),n=0;n<d;n+=1)t.multiply(this.hierarchy[n].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var i=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;i<t;)this.localTransforms[i]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[i]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),i+=1;if(this.finalTransform._localMatMdf){var n=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(n),i=1;i<t;i+=1){var d=this.localTransforms[i].matrix;n.multiply(d)}n.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var r=this.finalTransform.localOpacity;for(i=0;i<t;i+=1)r*=.01*this.localTransforms[i].opacity;this.finalTransform.localOpacity=r}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var i=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(i.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,n=i.length;for(t=0;t<n;t+=1)this.localTransforms.push(i[t])}}},globalToLocal:function(i){var t=[];t.push(this.finalTransform);for(var n,d=!0,r=this.comp;d;)r.finalTransform?(r.data.hasMask&&t.splice(0,0,r.finalTransform),r=r.comp):d=!1;var m,e=t.length;for(n=0;n<e;n+=1)m=t[n].mat.applyToPointArray(0,0,0),i=[i[0]-m[0],i[1]-m[1],0];return i},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(i){return this.viewData[i].prop},MaskElement.prototype.renderFrame=function(i){var t,n=this.element.finalTransform.mat,d=this.masksProperties.length;for(t=0;t<d;t+=1)if((this.viewData[t].prop._mdf||i)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||i)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),this.masksProperties[t].mode!=="n"&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||i)&&this.viewData[t].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||i))){var r=this.storedData[t].expan;this.storedData[t].x.v<0?(this.storedData[t].lastOperator!=="erode"&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),r.setAttribute("radius",-this.storedData[t].x.v)):(this.storedData[t].lastOperator!=="dilate"&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var i="M0,0 ";return i+=" h"+this.globalData.compSize.w,i+=" v"+this.globalData.compSize.h,i+=" h-"+this.globalData.compSize.w,i+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(i,t,n){var d,r,m=" M"+t.v[0][0]+","+t.v[0][1];for(r=t._length,d=1;d<r;d+=1)m+=" C"+t.o[d-1][0]+","+t.o[d-1][1]+" "+t.i[d][0]+","+t.i[d][1]+" "+t.v[d][0]+","+t.v[d][1];if(t.c&&r>1&&(m+=" C"+t.o[d-1][0]+","+t.o[d-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==m){var e="";n.elem&&(t.c&&(e=i.inv?this.solidPath+m:m),n.elem.setAttribute("d",e)),n.lastPath=m}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var i={createFilter:function(t,n){var d=createNS("filter");return d.setAttribute("id",t),n!==!0&&(d.setAttribute("filterUnits","objectBoundingBox"),d.setAttribute("x","0%"),d.setAttribute("y","0%"),d.setAttribute("width","100%"),d.setAttribute("height","100%")),d},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}};return i}(),featureSupport=function(){var i={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(i.maskType=!1),/firefox/i.test(navigator.userAgent)&&(i.svgLumaHidden=!1),i}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(i){var t,n,d="SourceGraphic",r=i.data.ef?i.data.ef.length:0,m=createElementID(),e=filtersFactory.createFilter(m,!0),u=0;for(this.filters=[],t=0;t<r;t+=1){n=null;var g=i.data.ef[t].ty;registeredEffects$1[g]&&(n=new registeredEffects$1[g].effect(e,i.effectsManager.effectElements[t],i,idPrefix+u,d),d=idPrefix+u,registeredEffects$1[g].countsAsEffect&&(u+=1)),n&&this.filters.push(n)}u&&(i.globalData.defs.appendChild(e),i.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+m+")")),this.filters.length&&i.addRenderableComponent(this)}function registerEffect$1(i,t,n){registeredEffects$1[i]={effect:t,countsAsEffect:n}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(i,t,n){this.assetData=t.getAssetData(i.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(i,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(i,t){this.elem=i,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(i){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(i)},SVGEffects.prototype.getEffects=function(i){var t,n=this.filters.length,d=[];for(t=0;t<n;t+=1)this.filters[t].type===i&&d.push(this.filters[t]);return d},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var i=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),i=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),i=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var n=createNS("clipPath"),d=createNS("path");d.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var r=createElementID();if(n.setAttribute("id",r),n.appendChild(d),this.globalData.defs.appendChild(n),this.checkMasks()){var m=createNS("g");m.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")"),m.appendChild(this.layerElement),this.transformedElement=m,i?i.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(i){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[i]){var t,n,d,r,m=this.layerId+"_"+i;if(i===1||i===3){var e=createNS("mask");e.setAttribute("id",m),e.setAttribute("mask-type",i===3?"luminance":"alpha"),(d=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),e.appendChild(d),this.globalData.defs.appendChild(e),featureSupport.maskType||i!==1||(e.setAttribute("mask-type","luminance"),t=createElementID(),n=filtersFactory.createFilter(t),this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(r=createNS("g")).appendChild(d),e.appendChild(r),r.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(i===2){var u=createNS("mask");u.setAttribute("id",m),u.setAttribute("mask-type","alpha");var g=createNS("g");u.appendChild(g),t=createElementID(),n=filtersFactory.createFilter(t);var c=createNS("feComponentTransfer");c.setAttribute("in","SourceGraphic"),n.appendChild(c);var s=createNS("feFuncA");s.setAttribute("type","table"),s.setAttribute("tableValues","1.0 0.0"),c.appendChild(s),this.globalData.defs.appendChild(n);var o=createNS("rect");o.setAttribute("width",this.comp.data.w),o.setAttribute("height",this.comp.data.h),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("fill","#ffffff"),o.setAttribute("opacity","0"),g.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),g.appendChild(o),(d=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),g.appendChild(d),featureSupport.maskType||(u.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),r=createNS("g"),g.appendChild(o),r.appendChild(this.layerElement),g.appendChild(r)),this.globalData.defs.appendChild(u)}this.matteMasks[i]=m}return this.matteMasks[i]},setMatte:function(i){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+i+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(i){this.hierarchy=i},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(i,t,n){this.initFrame(),this.initBaseData(i,t,n),this.initTransform(i,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(i){this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(i){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(i)},isShapeInAnimatedModifiers:function(i){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(i))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var i,t=this.shapes.length;for(i=0;i<t;i+=1)this.shapes[i].sh.reset();for(i=(t=this.shapeModifiers.length)-1;i>=0&&!this.shapeModifiers[i].processShapes(this._isFirstFrame);i-=1);}},searchProcessedElement:function(i){for(var t=this.processedElements,n=0,d=t.length;n<d;){if(t[n].elem===i)return t[n].pos;n+=1}return 0},addProcessedElement:function(i,t){for(var n=this.processedElements,d=n.length;d;)if(n[d-=1].elem===i)return void(n[d].pos=t);n.push(new ProcessedElement(i,t))},prepareFrame:function(i){this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(i,t,n){this.caches=[],this.styles=[],this.transformers=i,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var d=0,r=i.length;d<r;){if(i[d].mProps.dynamicProperties.length){this._isAnimated=!0;break}d+=1}}function SVGStyleData(i,t){this.data=i,this.type=i.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=i.hd===!0,this.pElem=createNS("path"),this.msElem=null}function DashProperty(i,t,n,d){var r;this.elem=i,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(d);var m,e=t.length||0;for(r=0;r<e;r+=1)m=PropertyFactory.getProp(i,t[r].v,0,0,this),this.k=m.k||this.k,this.dataProps[r]={n:t[r].n,p:m};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(i,t,n){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,t.o,0,.01,this),this.w=PropertyFactory.getProp(i,t.w,0,null,this),this.d=new DashProperty(i,t.d||{},"svg",this),this.c=PropertyFactory.getProp(i,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(i,t,n){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(i,t.o,0,.01,this),this.c=PropertyFactory.getProp(i,t.c,1,255,this),this.style=n}function SVGNoStyleData(i,t,n){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.style=n}function GradientProperty(i,t,n){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var d=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",d),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=d,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(i,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(i,t,n){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.initGradientData(i,t,n)}function SVGGradientStrokeStyleData(i,t,n){this.initDynamicPropertyContainer(i),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(i,t.w,0,null,this),this.d=new DashProperty(i,t.d||{},"svg",this),this.initGradientData(i,t,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(i,t,n){this.transform={mProps:i,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(i){if((this.elem.globalData.frameId!==this.frameId||i)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||i,this._mdf)){var t=0,n=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),t=0;t<n;t+=1)this.dataProps[t].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(i,t){for(var n=0,d=this.o.length/2;n<d;){if(Math.abs(i[4*n]-i[4*t+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var i=0,t=this.data.k.k.length;i<t;){if(!this.comparePoints(this.data.k.k[i].s,this.data.p))return!1;i+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(i){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||i){var t,n,d,r=4*this.data.p;for(t=0;t<r;t+=1)n=t%4==0?100:255,d=Math.round(this.prop.v[t]*n),this.c[t]!==d&&(this.c[t]=d,this._cmdf=!i);if(this.o.length)for(r=this.prop.v.length,t=4*this.data.p;t<r;t+=1)n=t%2==0?100:1,d=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==d&&(this.o[t-4*this.data.p]=d,this._omdf=!i);this._mdf=!i}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(i,t,n){this.o=PropertyFactory.getProp(i,t.o,0,.01,this),this.s=PropertyFactory.getProp(i,t.s,1,null,this),this.e=PropertyFactory.getProp(i,t.e,1,null,this),this.h=PropertyFactory.getProp(i,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(i,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(i,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(i,t){var n=createElementID(),d=createNS(t.t===1?"linearGradient":"radialGradient");d.setAttribute("id",n),d.setAttribute("spreadMethod","pad"),d.setAttribute("gradientUnits","userSpaceOnUse");var r,m,e,u=[];for(e=4*t.g.p,m=0;m<e;m+=4)r=createNS("stop"),d.appendChild(r),u.push(r);i.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+n+")"),this.gf=d,this.cst=u},SVGGradientFillStyleData.prototype.setGradientOpacity=function(i,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,d,r,m=createNS("mask"),e=createNS("path");m.appendChild(e);var u=createElementID(),g=createElementID();m.setAttribute("id",g);var c=createNS(i.t===1?"linearGradient":"radialGradient");c.setAttribute("id",u),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),r=i.g.k.k[0].s?i.g.k.k[0].s.length:i.g.k.k.length;var s=this.stops;for(d=4*i.g.p;d<r;d+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),s.push(n);e.setAttribute(i.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+u+")"),i.ty==="gs"&&(e.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),e.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),i.lj===1&&e.setAttribute("stroke-miterlimit",i.ml)),this.of=c,this.ms=m,this.ost=s,this.maskId=g,t.msElem=e}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(i,t,n,d){if(t===0)return"";var r,m=i.o,e=i.i,u=i.v,g=" M"+d.applyToPointStringified(u[0][0],u[0][1]);for(r=1;r<t;r+=1)g+=" C"+d.applyToPointStringified(m[r-1][0],m[r-1][1])+" "+d.applyToPointStringified(e[r][0],e[r][1])+" "+d.applyToPointStringified(u[r][0],u[r][1]);return n&&t&&(g+=" C"+d.applyToPointStringified(m[r-1][0],m[r-1][1])+" "+d.applyToPointStringified(e[0][0],e[0][1])+" "+d.applyToPointStringified(u[0][0],u[0][1]),g+="z"),g},SVGElementsRenderer=function(){var i=new Matrix,t=new Matrix;function n(c,s,o){(o||s.transform.op._mdf)&&s.transform.container.setAttribute("opacity",s.transform.op.v),(o||s.transform.mProps._mdf)&&s.transform.container.setAttribute("transform",s.transform.mProps.v.to2dCSS())}function d(){}function r(c,s,o){var a,l,p,h,f,v,y,x,S,E,b=s.styles.length,T=s.lvl;for(v=0;v<b;v+=1){if(h=s.sh._mdf||o,s.styles[v].lvl<T){for(x=t.reset(),S=T-s.styles[v].lvl,E=s.transformers.length-1;!h&&S>0;)h=s.transformers[E].mProps._mdf||h,S-=1,E-=1;if(h)for(S=T-s.styles[v].lvl,E=s.transformers.length-1;S>0;)x.multiply(s.transformers[E].mProps.v),S-=1,E-=1}else x=i;if(l=(y=s.sh.paths)._length,h){for(p="",a=0;a<l;a+=1)(f=y.shapes[a])&&f._length&&(p+=buildShapeString(f,f._length,f.c,x));s.caches[v]=p}else p=s.caches[v];s.styles[v].d+=c.hd===!0?"":p,s.styles[v]._mdf=h||s.styles[v]._mdf}}function m(c,s,o){var a=s.style;(s.c._mdf||o)&&a.pElem.setAttribute("fill","rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")"),(s.o._mdf||o)&&a.pElem.setAttribute("fill-opacity",s.o.v)}function e(c,s,o){u(c,s,o),g(0,s,o)}function u(c,s,o){var a,l,p,h,f,v=s.gf,y=s.g._hasOpacity,x=s.s.v,S=s.e.v;if(s.o._mdf||o){var E=c.ty==="gf"?"fill-opacity":"stroke-opacity";s.style.pElem.setAttribute(E,s.o.v)}if(s.s._mdf||o){var b=c.t===1?"x1":"cx",T=b==="x1"?"y1":"cy";v.setAttribute(b,x[0]),v.setAttribute(T,x[1]),y&&!s.g._collapsable&&(s.of.setAttribute(b,x[0]),s.of.setAttribute(T,x[1]))}if(s.g._cmdf||o){a=s.cst;var P=s.g.c;for(p=a.length,l=0;l<p;l+=1)(h=a[l]).setAttribute("offset",P[4*l]+"%"),h.setAttribute("stop-color","rgb("+P[4*l+1]+","+P[4*l+2]+","+P[4*l+3]+")")}if(y&&(s.g._omdf||o)){var C=s.g.o;for(p=(a=s.g._collapsable?s.cst:s.ost).length,l=0;l<p;l+=1)h=a[l],s.g._collapsable||h.setAttribute("offset",C[2*l]+"%"),h.setAttribute("stop-opacity",C[2*l+1])}if(c.t===1)(s.e._mdf||o)&&(v.setAttribute("x2",S[0]),v.setAttribute("y2",S[1]),y&&!s.g._collapsable&&(s.of.setAttribute("x2",S[0]),s.of.setAttribute("y2",S[1])));else if((s.s._mdf||s.e._mdf||o)&&(f=Math.sqrt(Math.pow(x[0]-S[0],2)+Math.pow(x[1]-S[1],2)),v.setAttribute("r",f),y&&!s.g._collapsable&&s.of.setAttribute("r",f)),s.e._mdf||s.h._mdf||s.a._mdf||o){f||(f=Math.sqrt(Math.pow(x[0]-S[0],2)+Math.pow(x[1]-S[1],2)));var w=Math.atan2(S[1]-x[1],S[0]-x[0]),A=s.h.v;A>=1?A=.99:A<=-1&&(A=-.99);var R=f*A,I=Math.cos(w+s.a.v)*R+x[0],L=Math.sin(w+s.a.v)*R+x[1];v.setAttribute("fx",I),v.setAttribute("fy",L),y&&!s.g._collapsable&&(s.of.setAttribute("fx",I),s.of.setAttribute("fy",L))}}function g(c,s,o){var a=s.style,l=s.d;l&&(l._mdf||o)&&l.dashStr&&(a.pElem.setAttribute("stroke-dasharray",l.dashStr),a.pElem.setAttribute("stroke-dashoffset",l.dashoffset[0])),s.c&&(s.c._mdf||o)&&a.pElem.setAttribute("stroke","rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")"),(s.o._mdf||o)&&a.pElem.setAttribute("stroke-opacity",s.o.v),(s.w._mdf||o)&&(a.pElem.setAttribute("stroke-width",s.w.v),a.msElem&&a.msElem.setAttribute("stroke-width",s.w.v))}return{createRenderFunction:function(c){switch(c.ty){case"fl":return m;case"gf":return u;case"gs":return e;case"st":return g;case"sh":case"el":case"rc":case"sr":return r;case"tr":return n;case"no":return d;default:return null}}}}();function SVGShapeElement(i,t,n){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(i,t,n),this.prevViewData=[]}function LetterProps(i,t,n,d,r,m){this.o=i,this.sw=t,this.sc=n,this.fc=d,this.m=r,this.p=m,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!d,m:!0,p:!0}}function TextProperty(i,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=i.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=i,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var i,t,n,d,r=this.shapes.length,m=this.stylesList.length,e=[],u=!1;for(n=0;n<m;n+=1){for(d=this.stylesList[n],u=!1,e.length=0,i=0;i<r;i+=1)(t=this.shapes[i]).styles.indexOf(d)!==-1&&(e.push(t),u=t._isAnimated||u);e.length>1&&u&&this.setShapesAsAnimated(e)}},SVGShapeElement.prototype.setShapesAsAnimated=function(i){var t,n=i.length;for(t=0;t<n;t+=1)i[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(i,t){var n,d=new SVGStyleData(i,t),r=d.pElem;return i.ty==="st"?n=new SVGStrokeStyleData(this,i,d):i.ty==="fl"?n=new SVGFillStyleData(this,i,d):i.ty==="gf"||i.ty==="gs"?(n=new(i.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,i,d),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),r.setAttribute("mask","url("+getLocationHref()+"#"+n.maskId+")"))):i.ty==="no"&&(n=new SVGNoStyleData(this,i,d)),i.ty!=="st"&&i.ty!=="gs"||(r.setAttribute("stroke-linecap",lineCapEnum[i.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[i.lj||2]),r.setAttribute("fill-opacity","0"),i.lj===1&&r.setAttribute("stroke-miterlimit",i.ml)),i.r===2&&r.setAttribute("fill-rule","evenodd"),i.ln&&r.setAttribute("id",i.ln),i.cl&&r.setAttribute("class",i.cl),i.bm&&(r.style["mix-blend-mode"]=getBlendMode(i.bm)),this.stylesList.push(d),this.addToAnimatedContents(i,n),n},SVGShapeElement.prototype.createGroupElement=function(i){var t=new ShapeGroupData;return i.ln&&t.gr.setAttribute("id",i.ln),i.cl&&t.gr.setAttribute("class",i.cl),i.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(i.bm)),t},SVGShapeElement.prototype.createTransformElement=function(i,t){var n=TransformPropertyFactory.getTransformProperty(this,i,this),d=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(i,d),d},SVGShapeElement.prototype.createShapeElement=function(i,t,n){var d=4;i.ty==="rc"?d=5:i.ty==="el"?d=6:i.ty==="sr"&&(d=7);var r=new SVGShapeData(t,n,ShapePropertyFactory.getShapeProp(this,i,d,this));return this.shapes.push(r),this.addShapeToModifiers(r),this.addToAnimatedContents(i,r),r},SVGShapeElement.prototype.addToAnimatedContents=function(i,t){for(var n=0,d=this.animatedContents.length;n<d;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(i),element:t,data:i})},SVGShapeElement.prototype.setElementStyles=function(i){var t,n=i.styles,d=this.stylesList.length;for(t=0;t<d;t+=1)this.stylesList[t].closed||n.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var i;this._isFirstFrame=!0;var t=this.itemsData.length;for(i=0;i<t;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,i=0;i<t;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(i,t,n,d,r,m,e){var u,g,c,s,o,a,l=[].concat(m),p=i.length-1,h=[],f=[];for(u=p;u>=0;u-=1){if((a=this.searchProcessedElement(i[u]))?t[u]=n[a-1]:i[u]._render=e,i[u].ty==="fl"||i[u].ty==="st"||i[u].ty==="gf"||i[u].ty==="gs"||i[u].ty==="no")a?t[u].style.closed=!1:t[u]=this.createStyleElement(i[u],r),i[u]._render&&t[u].style.pElem.parentNode!==d&&d.appendChild(t[u].style.pElem),h.push(t[u].style);else if(i[u].ty==="gr"){if(a)for(c=t[u].it.length,g=0;g<c;g+=1)t[u].prevViewData[g]=t[u].it[g];else t[u]=this.createGroupElement(i[u]);this.searchShapes(i[u].it,t[u].it,t[u].prevViewData,t[u].gr,r+1,l,e),i[u]._render&&t[u].gr.parentNode!==d&&d.appendChild(t[u].gr)}else i[u].ty==="tr"?(a||(t[u]=this.createTransformElement(i[u],d)),s=t[u].transform,l.push(s)):i[u].ty==="sh"||i[u].ty==="rc"||i[u].ty==="el"||i[u].ty==="sr"?(a||(t[u]=this.createShapeElement(i[u],l,r)),this.setElementStyles(t[u])):i[u].ty==="tm"||i[u].ty==="rd"||i[u].ty==="ms"||i[u].ty==="pb"||i[u].ty==="zz"||i[u].ty==="op"?(a?(o=t[u]).closed=!1:((o=ShapeModifiers.getModifier(i[u].ty)).init(this,i[u]),t[u]=o,this.shapeModifiers.push(o)),f.push(o)):i[u].ty==="rp"&&(a?(o=t[u]).closed=!0:(o=ShapeModifiers.getModifier(i[u].ty),t[u]=o,o.init(this,i,u,t),this.shapeModifiers.push(o),e=!1),f.push(o));this.addProcessedElement(i[u],u+1)}for(p=h.length,u=0;u<p;u+=1)h[u].closed=!0;for(p=f.length,u=0;u<p;u+=1)f[u].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var i;this.renderModifiers();var t=this.stylesList.length;for(i=0;i<t;i+=1)this.stylesList[i].reset();for(this.renderShape(),i=0;i<t;i+=1)(this.stylesList[i]._mdf||this._isFirstFrame)&&(this.stylesList[i].msElem&&(this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d),this.stylesList[i].d="M0 0"+this.stylesList[i].d),this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var i,t,n=this.animatedContents.length;for(i=0;i<n;i+=1)t=this.animatedContents[i],(this._isFirstFrame||t.element._isAnimated)&&t.data!==!0&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(i,t,n,d,r,m){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var e=!1;return this.o!==i&&(this.o=i,this._mdf.o=!0,e=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,e=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,e=!0),this.fc!==d&&(this.fc=d,this._mdf.fc=!0,e=!0),this.m!==r&&(this.m=r,this._mdf.m=!0,e=!0),!m.length||this.p[0]===m[0]&&this.p[1]===m[1]&&this.p[4]===m[4]&&this.p[5]===m[5]&&this.p[12]===m[12]&&this.p[13]===m[13]||(this.p=m,this._mdf.p=!0,e=!0),e},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(i,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},TextProperty.prototype.setCurrentData=function(i){i.__complete||this.completeTextData(i),this.currentData=i,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(i){this.effectsSequence.push(i),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(i){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||i){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var d;this.lock=!0,this._mdf=!1;var r=this.effectsSequence.length,m=i||this.data.d.k[this.keysIndex].s;for(d=0;d<r;d+=1)m=n!==this.keysIndex?this.effectsSequence[d](m,m.t):this.effectsSequence[d](this.currentData,m.t);t!==m&&this.setCurrentData(m),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var i=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,d=i.length;n<=d-1&&!(n===d-1||i[n+1].t>t);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(i){for(var t,n,d=[],r=0,m=i.length,e=!1,u=!1,g="";r<m;)e=u,u=!1,t=i.charCodeAt(r),g=i.charAt(r),FontManager.isCombinedCharacter(t)?e=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(i,r)?g=i.substr(r,14):(n=i.charCodeAt(r+1))>=56320&&n<=57343&&(FontManager.isModifier(t,n)?(g=i.substr(r,2),e=!0):g=FontManager.isFlagEmoji(i.substr(r,4))?i.substr(r,4):i.substr(r,2)):t>56319?(n=i.charCodeAt(r+1),FontManager.isVariationSelector(t)&&(e=!0)):FontManager.isZeroWidthJoiner(t)&&(e=!0,u=!0),e?(d[d.length-1]+=g,e=!1):d.push(g),r+=g.length;return d},TextProperty.prototype.completeTextData=function(i){i.__complete=!0;var t,n,d,r,m,e,u,g=this.elem.globalData.fontManager,c=this.data,s=[],o=0,a=c.m.g,l=0,p=0,h=0,f=[],v=0,y=0,x=g.getFontByName(i.f),S=0,E=getFontProperties(x);i.fWeight=E.weight,i.fStyle=E.style,i.finalSize=i.s,i.finalText=this.buildFinalText(i.t),n=i.finalText.length,i.finalLineHeight=i.lh;var b,T=i.tr/1e3*i.finalSize;if(i.sz)for(var P,C,w=!0,A=i.sz[0],R=i.sz[1];w;){P=0,v=0,n=(C=this.buildFinalText(i.t)).length,T=i.tr/1e3*i.finalSize;var I=-1;for(t=0;t<n;t+=1)b=C[t].charCodeAt(0),d=!1,C[t]===" "?I=t:b!==13&&b!==3||(v=0,d=!0,P+=i.finalLineHeight||1.2*i.finalSize),g.chars?(u=g.getCharData(C[t],x.fStyle,x.fFamily),S=d?0:u.w*i.finalSize/100):S=g.measureText(C[t],i.f,i.finalSize),v+S>A&&C[t]!==" "?(I===-1?n+=1:t=I,P+=i.finalLineHeight||1.2*i.finalSize,C.splice(t,I===t?1:0,"\r"),I=-1,v=0):(v+=S,v+=T);P+=x.ascent*i.finalSize/100,this.canResize&&i.finalSize>this.minimumFontSize&&R<P?(i.finalSize-=1,i.finalLineHeight=i.finalSize*i.lh/i.s):(i.finalText=C,n=i.finalText.length,w=!1)}v=-T,S=0;var L,O=0;for(t=0;t<n;t+=1)if(d=!1,(b=(L=i.finalText[t]).charCodeAt(0))===13||b===3?(O=0,f.push(v),y=v>y?v:y,v=-2*T,r="",d=!0,h+=1):r=L,g.chars?(u=g.getCharData(L,x.fStyle,g.getFontByName(i.f).fFamily),S=d?0:u.w*i.finalSize/100):S=g.measureText(r,i.f,i.finalSize),L===" "?O+=S+T:(v+=S+T+O,O=0),s.push({l:S,an:S,add:l,n:d,anIndexes:[],val:r,line:h,animatorJustifyOffset:0}),a==2){if(l+=S,r===""||r===" "||t===n-1){for(r!==""&&r!==" "||(l-=S);p<=t;)s[p].an=l,s[p].ind=o,s[p].extra=S,p+=1;o+=1,l=0}}else if(a==3){if(l+=S,r===""||t===n-1){for(r===""&&(l-=S);p<=t;)s[p].an=l,s[p].ind=o,s[p].extra=S,p+=1;l=0,o+=1}}else s[o].ind=o,s[o].extra=0,o+=1;if(i.l=s,y=v>y?v:y,f.push(v),i.sz)i.boxWidth=i.sz[0],i.justifyOffset=0;else switch(i.boxWidth=y,i.j){case 1:i.justifyOffset=-i.boxWidth;break;case 2:i.justifyOffset=-i.boxWidth/2;break;default:i.justifyOffset=0}i.lineWidths=f;var D,V,B,U,W=c.a;e=W.length;var F=[];for(m=0;m<e;m+=1){for((D=W[m]).a.sc&&(i.strokeColorAnim=!0),D.a.sw&&(i.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(i.fillColorAnim=!0),U=0,B=D.s.b,t=0;t<n;t+=1)(V=s[t]).anIndexes[m]=U,(B==1&&V.val!==""||B==2&&V.val!==""&&V.val!==" "||B==3&&(V.n||V.val==" "||t==n-1)||B==4&&(V.n||t==n-1))&&(D.s.rn===1&&F.push(U),U+=1);c.a[m].s.totalChars=U;var G,M=-1;if(D.s.rn===1)for(t=0;t<n;t+=1)M!=(V=s[t]).anIndexes[m]&&(M=V.anIndexes[m],G=F.splice(Math.floor(Math.random()*F.length),1)[0]),V.anIndexes[m]=G}i.yOffset=i.finalLineHeight||1.2*i.finalSize,i.ls=i.ls||0,i.ascent=x.ascent*i.finalSize/100},TextProperty.prototype.updateDocumentData=function(i,t){t=t===void 0?this.keysIndex:t;var n=this.copyData({},this.data.d.k[t].s);n=this.copyData(n,i),this.data.d.k[t].s=n,this.recalculate(t),this.setCurrentData(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(i){var t=this.data.d.k[i].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(i){this.canResize=i,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(i){this.minimumFontSize=Math.floor(i)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var i=Math.max,t=Math.min,n=Math.floor;function d(r,m){this._currentTextLength=-1,this.k=!1,this.data=m,this.elem=r,this.comp=r.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(r),this.s=PropertyFactory.getProp(r,m.s||{k:0},0,0,this),this.e="e"in m?PropertyFactory.getProp(r,m.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(r,m.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(r,m.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(r,m.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(r,m.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(r,m.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return d.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var m=0,e=0,u=1,g=1;this.ne.v>0?m=this.ne.v/100:e=-this.ne.v/100,this.xe.v>0?u=1-this.xe.v/100:g=1+this.xe.v/100;var c=BezierFactory.getBezierEasing(m,e,u,g).get,s=0,o=this.finalS,a=this.finalE,l=this.data.sh;if(l===2)s=c(s=a===o?r>=a?1:0:i(0,t(.5/(a-o)+(r-o)/(a-o),1)));else if(l===3)s=c(s=a===o?r>=a?0:1:1-i(0,t(.5/(a-o)+(r-o)/(a-o),1)));else if(l===4)a===o?s=0:(s=i(0,t(.5/(a-o)+(r-o)/(a-o),1)))<.5?s*=2:s=1-2*(s-.5),s=c(s);else if(l===5){if(a===o)s=0;else{var p=a-o,h=-p/2+(r=t(i(0,r+.5-o),a-o)),f=p/2;s=Math.sqrt(1-h*h/(f*f))}s=c(s)}else l===6?(a===o?s=0:(r=t(i(0,r+.5-o),a-o),s=(1+Math.cos(Math.PI+2*Math.PI*r/(a-o)))/2),s=c(s)):(r>=n(o)&&(s=i(0,t(r-o<0?t(a,1)-(o-r):a-r,1))),s=c(s));if(this.sm.v!==100){var v=.01*this.sm.v;v===0&&(v=1e-8);var y=.5-.5*v;s<y?s=0:(s=(s-y)/v)>1&&(s=1)}return s*this.a.v},getValue:function(r){this.iterateDynamicProperties(),this._mdf=r||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,r&&this.data.r===2&&(this.e.v=this._currentTextLength);var m=this.data.r===2?1:100/this.data.totalChars,e=this.o.v/m,u=this.s.v/m+e,g=this.e.v/m+e;if(u>g){var c=u;u=g,g=c}this.finalS=u,this.finalE=g}},extendPrototype([DynamicPropertyContainer],d),{getTextSelectorProp:function(r,m,e){return new d(r,m,e)}}}();function TextAnimatorDataProperty(i,t,n){var d={propType:!1},r=PropertyFactory.getProp,m=t.a;this.a={r:m.r?r(i,m.r,0,degToRads,n):d,rx:m.rx?r(i,m.rx,0,degToRads,n):d,ry:m.ry?r(i,m.ry,0,degToRads,n):d,sk:m.sk?r(i,m.sk,0,degToRads,n):d,sa:m.sa?r(i,m.sa,0,degToRads,n):d,s:m.s?r(i,m.s,1,.01,n):d,a:m.a?r(i,m.a,1,0,n):d,o:m.o?r(i,m.o,0,.01,n):d,p:m.p?r(i,m.p,1,0,n):d,sw:m.sw?r(i,m.sw,0,0,n):d,sc:m.sc?r(i,m.sc,1,0,n):d,fc:m.fc?r(i,m.fc,1,0,n):d,fh:m.fh?r(i,m.fh,0,0,n):d,fs:m.fs?r(i,m.fs,0,.01,n):d,fb:m.fb?r(i,m.fb,0,.01,n):d,t:m.t?r(i,m.t,0,0,n):d},this.s=TextSelectorProp.getTextSelectorProp(i,t.s,n),this.s.t=t.s.t}function TextAnimatorProperty(i,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=i,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var i,t,n=this._textData.a.length,d=PropertyFactory.getProp;for(i=0;i<n;i+=1)t=this._textData.a[i],this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:d(this._elem,this._textData.p.a,0,0,this),f:d(this._elem,this._textData.p.f,0,0,this),l:d(this._elem,this._textData.p.l,0,0,this),r:d(this._elem,this._textData.p.r,0,0,this),p:d(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=d(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(i,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,d,r,m,e,u,g,c,s,o,a,l,p,h,f,v,y,x,S,E=this._moreOptions.alignment.v,b=this._animatorsData,T=this._textData,P=this.mHelper,C=this._renderType,w=this.renderedLetters.length,A=i.l;if(this._hasMaskedPath){if(S=this._pathData.m,!this._pathData.n||this._pathData._mdf){var R,I=S.v;for(this._pathData.r.v&&(I=I.reverse()),e={tLength:0,segments:[]},m=I._length-1,v=0,r=0;r<m;r+=1)R=bez.buildBezierData(I.v[r],I.v[r+1],[I.o[r][0]-I.v[r][0],I.o[r][1]-I.v[r][1]],[I.i[r+1][0]-I.v[r+1][0],I.i[r+1][1]-I.v[r+1][1]]),e.tLength+=R.segmentLength,e.segments.push(R),v+=R.segmentLength;r=m,S.v.c&&(R=bez.buildBezierData(I.v[r],I.v[0],[I.o[r][0]-I.v[r][0],I.o[r][1]-I.v[r][1]],[I.i[0][0]-I.v[0][0],I.i[0][1]-I.v[0][1]]),e.tLength+=R.segmentLength,e.segments.push(R),v+=R.segmentLength),this._pathData.pi=e}if(e=this._pathData.pi,u=this._pathData.f.v,a=0,o=1,c=0,s=!0,h=e.segments,u<0&&S.v.c)for(e.tLength<Math.abs(u)&&(u=-Math.abs(u)%e.tLength),o=(p=h[a=h.length-1].points).length-1;u<0;)u+=p[o].partialLength,(o-=1)<0&&(o=(p=h[a-=1].points).length-1);l=(p=h[a].points)[o-1],f=(g=p[o]).partialLength}m=A.length,n=0,d=0;var L,O,D,V,B,U=1.2*i.finalSize*.714,W=!0;D=b.length;var F,G,M,N,k,z,H,$,X,Y,j,J,Q=-1,Z=u,it=a,rt=o,ut=-1,dt="",ct=this.defaultPropsArray;if(i.j===2||i.j===1){var nt=0,ht=0,ot=i.j===2?-.5:-1,mt=0,gt=!0;for(r=0;r<m;r+=1)if(A[r].n){for(nt&&(nt+=ht);mt<r;)A[mt].animatorJustifyOffset=nt,mt+=1;nt=0,gt=!0}else{for(O=0;O<D;O+=1)(L=b[O].a).t.propType&&(gt&&i.j===2&&(ht+=L.t.v*ot),(B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars)).length?nt+=L.t.v*B[0]*ot:nt+=L.t.v*B*ot);gt=!1}for(nt&&(nt+=ht);mt<r;)A[mt].animatorJustifyOffset=nt,mt+=1}for(r=0;r<m;r+=1){if(P.reset(),N=1,A[r].n)n=0,d+=i.yOffset,d+=W?1:0,u=Z,W=!1,this._hasMaskedPath&&(o=rt,l=(p=h[a=it].points)[o-1],f=(g=p[o]).partialLength,c=0),dt="",j="",X="",J="",ct=this.defaultPropsArray;else{if(this._hasMaskedPath){if(ut!==A[r].line){switch(i.j){case 1:u+=v-i.lineWidths[A[r].line];break;case 2:u+=(v-i.lineWidths[A[r].line])/2}ut=A[r].line}Q!==A[r].ind&&(A[Q]&&(u+=A[Q].extra),u+=A[r].an/2,Q=A[r].ind),u+=E[0]*A[r].an*.005;var Ft=0;for(O=0;O<D;O+=1)(L=b[O].a).p.propType&&((B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars)).length?Ft+=L.p.v[0]*B[0]:Ft+=L.p.v[0]*B),L.a.propType&&((B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars)).length?Ft+=L.a.v[0]*B[0]:Ft+=L.a.v[0]*B);for(s=!0,this._pathData.a.v&&(u=.5*A[0].an+(v-this._pathData.f.v-.5*A[0].an-.5*A[A.length-1].an)*Q/(m-1),u+=this._pathData.f.v);s;)c+f>=u+Ft||!p?(y=(u+Ft-c)/g.partialLength,G=l.point[0]+(g.point[0]-l.point[0])*y,M=l.point[1]+(g.point[1]-l.point[1])*y,P.translate(-E[0]*A[r].an*.005,-E[1]*U*.01),s=!1):p&&(c+=g.partialLength,(o+=1)>=p.length&&(o=0,h[a+=1]?p=h[a].points:S.v.c?(o=0,p=h[a=0].points):(c-=g.partialLength,p=null)),p&&(l=g,f=(g=p[o]).partialLength));F=A[r].an/2-A[r].add,P.translate(-F,0,0)}else F=A[r].an/2-A[r].add,P.translate(-F,0,0),P.translate(-E[0]*A[r].an*.005,-E[1]*U*.01,0);for(O=0;O<D;O+=1)(L=b[O].a).t.propType&&(B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars),n===0&&i.j===0||(this._hasMaskedPath?B.length?u+=L.t.v*B[0]:u+=L.t.v*B:B.length?n+=L.t.v*B[0]:n+=L.t.v*B));for(i.strokeWidthAnim&&(z=i.sw||0),i.strokeColorAnim&&(k=i.sc?[i.sc[0],i.sc[1],i.sc[2]]:[0,0,0]),i.fillColorAnim&&i.fc&&(H=[i.fc[0],i.fc[1],i.fc[2]]),O=0;O<D;O+=1)(L=b[O].a).a.propType&&((B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars)).length?P.translate(-L.a.v[0]*B[0],-L.a.v[1]*B[1],L.a.v[2]*B[2]):P.translate(-L.a.v[0]*B,-L.a.v[1]*B,L.a.v[2]*B));for(O=0;O<D;O+=1)(L=b[O].a).s.propType&&((B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars)).length?P.scale(1+(L.s.v[0]-1)*B[0],1+(L.s.v[1]-1)*B[1],1):P.scale(1+(L.s.v[0]-1)*B,1+(L.s.v[1]-1)*B,1));for(O=0;O<D;O+=1){if(L=b[O].a,B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars),L.sk.propType&&(B.length?P.skewFromAxis(-L.sk.v*B[0],L.sa.v*B[1]):P.skewFromAxis(-L.sk.v*B,L.sa.v*B)),L.r.propType&&(B.length?P.rotateZ(-L.r.v*B[2]):P.rotateZ(-L.r.v*B)),L.ry.propType&&(B.length?P.rotateY(L.ry.v*B[1]):P.rotateY(L.ry.v*B)),L.rx.propType&&(B.length?P.rotateX(L.rx.v*B[0]):P.rotateX(L.rx.v*B)),L.o.propType&&(B.length?N+=(L.o.v*B[0]-N)*B[0]:N+=(L.o.v*B-N)*B),i.strokeWidthAnim&&L.sw.propType&&(B.length?z+=L.sw.v*B[0]:z+=L.sw.v*B),i.strokeColorAnim&&L.sc.propType)for($=0;$<3;$+=1)B.length?k[$]+=(L.sc.v[$]-k[$])*B[0]:k[$]+=(L.sc.v[$]-k[$])*B;if(i.fillColorAnim&&i.fc){if(L.fc.propType)for($=0;$<3;$+=1)B.length?H[$]+=(L.fc.v[$]-H[$])*B[0]:H[$]+=(L.fc.v[$]-H[$])*B;L.fh.propType&&(H=B.length?addHueToRGB(H,L.fh.v*B[0]):addHueToRGB(H,L.fh.v*B)),L.fs.propType&&(H=B.length?addSaturationToRGB(H,L.fs.v*B[0]):addSaturationToRGB(H,L.fs.v*B)),L.fb.propType&&(H=B.length?addBrightnessToRGB(H,L.fb.v*B[0]):addBrightnessToRGB(H,L.fb.v*B))}}for(O=0;O<D;O+=1)(L=b[O].a).p.propType&&(B=b[O].s.getMult(A[r].anIndexes[O],T.a[O].s.totalChars),this._hasMaskedPath?B.length?P.translate(0,L.p.v[1]*B[0],-L.p.v[2]*B[1]):P.translate(0,L.p.v[1]*B,-L.p.v[2]*B):B.length?P.translate(L.p.v[0]*B[0],L.p.v[1]*B[1],-L.p.v[2]*B[2]):P.translate(L.p.v[0]*B,L.p.v[1]*B,-L.p.v[2]*B));if(i.strokeWidthAnim&&(X=z<0?0:z),i.strokeColorAnim&&(Y="rgb("+Math.round(255*k[0])+","+Math.round(255*k[1])+","+Math.round(255*k[2])+")"),i.fillColorAnim&&i.fc&&(j="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),this._hasMaskedPath){if(P.translate(0,-i.ls),P.translate(0,E[1]*U*.01+d,0),this._pathData.p.v){x=(g.point[1]-l.point[1])/(g.point[0]-l.point[0]);var kt=180*Math.atan(x)/Math.PI;g.point[0]<l.point[0]&&(kt+=180),P.rotate(-kt*Math.PI/180)}P.translate(G,M,0),u-=E[0]*A[r].an*.005,A[r+1]&&Q!==A[r+1].ind&&(u+=A[r].an/2,u+=.001*i.tr*i.finalSize)}else{switch(P.translate(n,d,0),i.ps&&P.translate(i.ps[0],i.ps[1]+i.ascent,0),i.j){case 1:P.translate(A[r].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[A[r].line]),0,0);break;case 2:P.translate(A[r].animatorJustifyOffset+i.justifyOffset+(i.boxWidth-i.lineWidths[A[r].line])/2,0,0)}P.translate(0,-i.ls),P.translate(F,0,0),P.translate(E[0]*A[r].an*.005,E[1]*U*.01,0),n+=A[r].l+.001*i.tr*i.finalSize}C==="html"?dt=P.toCSS():C==="svg"?dt=P.to2dCSS():ct=[P.props[0],P.props[1],P.props[2],P.props[3],P.props[4],P.props[5],P.props[6],P.props[7],P.props[8],P.props[9],P.props[10],P.props[11],P.props[12],P.props[13],P.props[14],P.props[15]],J=N}w<=r?(V=new LetterProps(J,X,Y,j,dt,ct),this.renderedLetters.push(V),w+=1,this.lettersChangedFlag=!0):(V=this.renderedLetters[r],this.lettersChangedFlag=V.update(J,X,Y,j,dt,ct)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(i,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(i,t,n),this.textProperty=new TextProperty(this,i.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(i.t,this.renderType,this),this.initTransform(i,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(i){this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange)},ITextElement.prototype.createPathShape=function(i,t){var n,d,r=t.length,m="";for(n=0;n<r;n+=1)t[n].ty==="sh"&&(d=t[n].ks.k,m+=buildShapeString(d,d.i.length,!0,i));return m},ITextElement.prototype.updateDocumentData=function(i,t){this.textProperty.updateDocumentData(i,t)},ITextElement.prototype.canResizeFont=function(i){this.textProperty.canResizeFont(i)},ITextElement.prototype.setMinimumFontSize=function(i){this.textProperty.setMinimumFontSize(i)},ITextElement.prototype.applyTextPropertiesToMatrix=function(i,t,n,d,r){switch(i.ps&&t.translate(i.ps[0],i.ps[1]+i.ascent,0),t.translate(0,-i.ls,0),i.j){case 1:t.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[n]),0,0);break;case 2:t.translate(i.justifyOffset+(i.boxWidth-i.lineWidths[n])/2,0,0)}t.translate(d,r,0)},ITextElement.prototype.buildColor=function(i){return"rgb("+Math.round(255*i[0])+","+Math.round(255*i[1])+","+Math.round(255*i[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(i,t,n){this.textSpans=[],this.renderType="svg",this.initElement(i,t,n)}function ISolidElement(i,t,n){this.initElement(i,t,n)}function NullElement(i,t,n){this.initFrame(),this.initBaseData(i,t,n),this.initFrame(),this.initTransform(i,t,n),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(i,t,n){this.layers=i.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,t,n),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(i,t){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var d=createNS("title"),r=createElementID();d.setAttribute("id",r),d.textContent=t.title,this.svgElement.appendChild(d),n+=r}if(t&&t.description){var m=createNS("desc"),e=createElementID();m.setAttribute("id",e),m.textContent=t.description,this.svgElement.appendChild(m),n+=" "+e}n&&this.svgElement.setAttribute("aria-labelledby",n);var u=createNS("defs");this.svgElement.appendChild(u);var g=createNS("g");this.svgElement.appendChild(g),this.layerElement=g,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&t.hideOnTransparent===!1),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:u,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(i){for(var t=0,n=i.length,d=[],r="";t<n;)i[t]===String.fromCharCode(13)||i[t]===String.fromCharCode(3)?(d.push(r),r=""):r+=i[t],t+=1;return d.push(r),d},SVGTextLottieElement.prototype.buildShapeData=function(i,t){if(i.shapes&&i.shapes.length){var n=i.shapes[0];if(n.it){var d=n.it[n.it.length-1];d.s&&(d.s.k[0]=t,d.s.k[1]=t)}}return i},SVGTextLottieElement.prototype.buildNewText=function(){var i,t;this.addDynamicProperty(this);var n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var d=this.globalData.fontManager.getFontByName(n.f);if(d.fClass)this.layerElement.setAttribute("class",d.fClass);else{this.layerElement.setAttribute("font-family",d.fFamily);var r=n.fWeight,m=n.fStyle;this.layerElement.setAttribute("font-style",m),this.layerElement.setAttribute("font-weight",r)}this.layerElement.setAttribute("aria-label",n.t);var e,u=n.l||[],g=!!this.globalData.fontManager.chars;t=u.length;var c=this.mHelper,s=this.data.singleShape,o=0,a=0,l=!0,p=.001*n.tr*n.finalSize;if(!s||g||n.sz){var h,f=this.textSpans.length;for(i=0;i<t;i+=1){if(this.textSpans[i]||(this.textSpans[i]={span:null,childSpan:null,glyph:null}),!g||!s||i===0){if(e=f>i?this.textSpans[i].span:createNS(g?"g":"text"),f<=i){if(e.setAttribute("stroke-linecap","butt"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("stroke-miterlimit","4"),this.textSpans[i].span=e,g){var v=createNS("g");e.appendChild(v),this.textSpans[i].childSpan=v}this.textSpans[i].span=e,this.layerElement.appendChild(e)}e.style.display="inherit"}if(c.reset(),s&&(u[i].n&&(o=-p,a+=n.yOffset,a+=l?1:0,l=!1),this.applyTextPropertiesToMatrix(n,c,u[i].line,o,a),o+=u[i].l||0,o+=p),g){var y;if((h=this.globalData.fontManager.getCharData(n.finalText[i],d.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily)).t===1)y=new SVGCompElement(h.data,this.globalData,this);else{var x=emptyShapeData;h.data&&h.data.shapes&&(x=this.buildShapeData(h.data,n.finalSize)),y=new SVGShapeElement(x,this.globalData,this)}if(this.textSpans[i].glyph){var S=this.textSpans[i].glyph;this.textSpans[i].childSpan.removeChild(S.layerElement),S.destroy()}this.textSpans[i].glyph=y,y._debug=!0,y.prepareFrame(0),y.renderFrame(),this.textSpans[i].childSpan.appendChild(y.layerElement),h.t===1&&this.textSpans[i].childSpan.setAttribute("transform","scale("+n.finalSize/100+","+n.finalSize/100+")")}else s&&e.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),e.textContent=u[i].val,e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}s&&e&&e.setAttribute("d","")}else{var E=this.textContainer,b="start";switch(n.j){case 1:b="end";break;case 2:b="middle";break;default:b="start"}E.setAttribute("text-anchor",b),E.setAttribute("letter-spacing",p);var T=this.buildTextContents(n.finalText);for(t=T.length,a=n.ps?n.ps[1]+n.ascent:0,i=0;i<t;i+=1)(e=this.textSpans[i].span||createNS("tspan")).textContent=T[i],e.setAttribute("x",0),e.setAttribute("y",a),e.style.display="inherit",E.appendChild(e),this.textSpans[i]||(this.textSpans[i]={span:null,glyph:null}),this.textSpans[i].span=e,a+=n.finalLineHeight;this.layerElement.appendChild(E)}for(;i<this.textSpans.length;)this.textSpans[i].span.style.display="none",i+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var i=this.layerElement.getBBox();this.bbox={top:i.y,left:i.x,width:i.width,height:i.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var i,t,n=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,i=0;i<n;i+=1)(t=this.textSpans[i].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var i,t;this._sizeChanged=!0;var n,d,r,m=this.textAnimator.renderedLetters,e=this.textProperty.currentData.l;for(t=e.length,i=0;i<t;i+=1)e[i].n||(n=m[i],d=this.textSpans[i].span,(r=this.textSpans[i].glyph)&&r.renderFrame(),n._mdf.m&&d.setAttribute("transform",n.m),n._mdf.o&&d.setAttribute("opacity",n.o),n._mdf.sw&&d.setAttribute("stroke-width",n.sw),n._mdf.sc&&d.setAttribute("stroke",n.sc),n._mdf.fc&&d.setAttribute("fill",n.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var i=createNS("rect");i.setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.layerElement.appendChild(i)},NullElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(i){return new NullElement(i,this.globalData,this)},SVGRendererBase.prototype.createShape=function(i){return new SVGShapeElement(i,this.globalData,this)},SVGRendererBase.prototype.createText=function(i){return new SVGTextLottieElement(i,this.globalData,this)},SVGRendererBase.prototype.createImage=function(i){return new IImageElement(i,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(i){return new ISolidElement(i,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(i){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+i.w+" "+i.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",i.w),this.svgElement.setAttribute("height",i.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(i,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=i;var n=createNS("clipPath"),d=createNS("rect");d.setAttribute("width",i.w),d.setAttribute("height",i.h),d.setAttribute("x",0),d.setAttribute("y",0);var r=createElementID();n.setAttribute("id",r),n.appendChild(d),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")"),t.appendChild(n),this.layers=i.layers,this.elements=createSizedArray(i.layers.length)},SVGRendererBase.prototype.destroy=function(){var i;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(i=0;i<t;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(i){var t=0,n=this.layers.length;for(t=0;t<n;t+=1)if(this.layers[t].ind===i)return t;return-1},SVGRendererBase.prototype.buildItem=function(i){var t=this.elements;if(!t[i]&&this.layers[i].ty!==99){t[i]=!0;var n=this.createItem(this.layers[i]);if(t[i]=n,getExpressionsPlugin()&&(this.layers[i].ty===0&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,i),this.layers[i].tt){var d="tp"in this.layers[i]?this.findIndexByInd(this.layers[i].tp):i-1;if(d===-1)return;if(this.elements[d]&&this.elements[d]!==!0){var r=t[d].getMatte(this.layers[i].tt);n.setMatte(r)}else this.buildItem(d),this.addPendingElement(n)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var i=this.pendingElements.pop();if(i.checkParenting(),i.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===i){var d="tp"in i.data?this.findIndexByInd(i.data.tp):t-1,r=this.elements[d].getMatte(this.layers[t].tt);i.setMatte(r);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(i){if(this.renderedFrame!==i&&!this.destroyed){var t;i===null?i=this.renderedFrame:this.renderedFrame=i,this.globalData.frameNum=i,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=i,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(i),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(i-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(i,t){var n=i.getBaseElement();if(n){for(var d,r=0;r<t;)this.elements[r]&&this.elements[r]!==!0&&this.elements[r].getBaseElement()&&(d=this.elements[r].getBaseElement()),r+=1;d?this.layerElement.insertBefore(n,d):this.layerElement.appendChild(n)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(i,t,n){this.initFrame(),this.initBaseData(i,t,n),this.initTransform(i,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(i){if(this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=i/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,d=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=d-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var i,t=this.layers.length;for(i=0;i<t;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},ICompElement.prototype.setElements=function(i){this.elements=i},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var i,t=this.layers.length;for(i=0;i<t;i+=1)this.elements[i]&&this.elements[i].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(i){return new SVGCompElement(i,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(i){var t,n=i.length,d="_";for(t=0;t<n;t+=1)d+=i[t].transform.key+"_";var r=this.sequences[d];return r||(r={transforms:[].concat(i),finalTransform:new Matrix,_mdf:!1},this.sequences[d]=r,this.sequenceList.push(r)),r},processSequence:function(i,t){for(var n=0,d=i.transforms.length,r=t;n<d&&!t;){if(i.transforms[n].transform.mProps._mdf){r=!0;break}n+=1}if(r)for(i.finalTransform.reset(),n=d-1;n>=0;n-=1)i.finalTransform.multiply(i.transforms[n].transform.mProps.v);i._mdf=r},processSequences:function(i){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],i)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var i="__lottie_element_luma_buffer",t=null,n=null,d=null;function r(){var m,e,u;t||(m=createNS("svg"),e=createNS("filter"),u=createNS("feColorMatrix"),e.setAttribute("id",i),u.setAttribute("type","matrix"),u.setAttribute("color-interpolation-filters","sRGB"),u.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),e.appendChild(u),m.appendChild(e),m.setAttribute("id",i+"_svg"),featureSupport.svgLumaHidden&&(m.style.display="none"),d=m,document.body.appendChild(d),t=createTag("canvas"),(n=t.getContext("2d")).filter="url(#"+i+")",n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1))}return{load:r,get:function(m){return t||r(),t.width=m.width,t.height=m.height,n.filter="url(#"+i+")",t}}};function createCanvas(i,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(i,t);var n=createTag("canvas");return n.width=i,n.height=t,n}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas},registeredEffects={};function CVEffects(i){var t,n,d=i.data.ef?i.data.ef.length:0;for(this.filters=[],t=0;t<d;t+=1){n=null;var r=i.data.ef[t].ty;registeredEffects[r]&&(n=new registeredEffects[r].effect(i.effectsManager.effectElements[t],i)),n&&this.filters.push(n)}this.filters.length&&i.addRenderableComponent(this)}function registerEffect(i,t){registeredEffects[i]={effect:t}}function CVMaskElement(i,t){var n;this.data=i,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var d=this.masksProperties.length,r=!1;for(n=0;n<d;n+=1)this.masksProperties[n].mode!=="n"&&(r=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=r,r&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(i){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(i)},CVEffects.prototype.getEffects=function(i){var t,n=this.filters.length,d=[];for(t=0;t<n;t+=1)this.filters[t].type===i&&d.push(this.filters[t]);return d},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var i,t,n,d,r=this.element.finalTransform.mat,m=this.element.canvasContext,e=this.masksProperties.length;for(m.beginPath(),i=0;i<e;i+=1)if(this.masksProperties[i].mode!=="n"){var u;this.masksProperties[i].inv&&(m.moveTo(0,0),m.lineTo(this.element.globalData.compSize.w,0),m.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),m.lineTo(0,this.element.globalData.compSize.h),m.lineTo(0,0)),d=this.viewData[i].v,t=r.applyToPointArray(d.v[0][0],d.v[0][1],0),m.moveTo(t[0],t[1]);var g=d._length;for(u=1;u<g;u+=1)n=r.applyToTriplePoints(d.o[u-1],d.i[u],d.v[u]),m.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=r.applyToTriplePoints(d.o[u-1],d.i[0],d.v[0]),m.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),m.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(i,t,n,d){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var r,m=4;t.ty==="rc"?m=5:t.ty==="el"?m=6:t.ty==="sr"&&(m=7),this.sh=ShapePropertyFactory.getShapeProp(i,t,m,i);var e,u=n.length;for(r=0;r<u;r+=1)n[r].closed||(e={transforms:d.addTransformSequence(n[r].transforms),trNodes:[]},this.styledShapes.push(e),n[r].elements.push(e))}function CVShapeElement(i,t,n){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(i,t,n)}function CVTextElement(i,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(i,t,n)}function CVImageElement(i,t,n){this.assetData=t.getAssetData(i.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(i,t,n)}function CVSolidElement(i,t,n){this.initElement(i,t,n)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var i;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,i=0;i<15;i+=1){var t=new CanvasContext;this.stack[i]=t}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(i,t,n){this.completeLayers=!1,this.layers=i.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(i,t,n),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(i,t){this.animationItem=i,this.renderConfig={clearCanvas:!t||t.clearCanvas===void 0||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(i,t,n){this.initElement(i,t,n)}function HShapeElement(i,t,n){this.shapes=[],this.shapesData=i.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(i,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(i,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(i,t,n)}function HCameraElement(i,t,n){this.initFrame(),this.initBaseData(i,t,n),this.initHierarchy();var d=PropertyFactory.getProp;if(this.pe=d(this,i.pe,0,0,this),i.ks.p.s?(this.px=d(this,i.ks.p.x,1,0,this),this.py=d(this,i.ks.p.y,1,0,this),this.pz=d(this,i.ks.p.z,1,0,this)):this.p=d(this,i.ks.p,1,0,this),i.ks.a&&(this.a=d(this,i.ks.a,1,0,this)),i.ks.or.k.length&&i.ks.or.k[0].to){var r,m=i.ks.or.k.length;for(r=0;r<m;r+=1)i.ks.or.k[r].to=null,i.ks.or.k[r].ti=null}this.or=d(this,i.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=d(this,i.ks.rx,0,degToRads,this),this.ry=d(this,i.ks.ry,0,degToRads,this),this.rz=d(this,i.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(i,t,n){this.assetData=t.getAssetData(i.refId),this.initElement(i,t,n)}function HybridRendererBase(i,t){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(i,t,n){this.layers=i.layers,this.supports3d=!i.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(i,t,n),this.tm=i.tm?PropertyFactory.getProp(this,i.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(i,t){this.animationItem=i,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var i=this.globalData.canvasContext,t=assetLoader.createCanvas(i.canvas.width,i.canvas.height);this.buffers.push(t);var n=assetLoader.createCanvas(i.canvas.width,i.canvas.height);this.buffers.push(n),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var i=this.globalData;if(i.blendMode!==this.data.bm){i.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);i.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(i){i.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var i=this.buffers[0].getContext("2d");this.clearCanvas(i),i.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var i=this.buffers[1],t=i.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var n=assetLoader.getLumaCanvas(this.canvasContext.canvas);n.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(n,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(i,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(i){if(!this.hidden&&!this.data.hd&&(this.data.td!==1||i)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(i,t){var n={data:i,type:i.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:i.hd===!0},d={};if(i.ty==="fl"||i.ty==="st"?(d.c=PropertyFactory.getProp(this,i.c,1,255,this),d.c.k||(n.co="rgb("+bmFloor(d.c.v[0])+","+bmFloor(d.c.v[1])+","+bmFloor(d.c.v[2])+")")):i.ty!=="gf"&&i.ty!=="gs"||(d.s=PropertyFactory.getProp(this,i.s,1,null,this),d.e=PropertyFactory.getProp(this,i.e,1,null,this),d.h=PropertyFactory.getProp(this,i.h||{k:0},0,.01,this),d.a=PropertyFactory.getProp(this,i.a||{k:0},0,degToRads,this),d.g=new GradientProperty(this,i.g,this)),d.o=PropertyFactory.getProp(this,i.o,0,.01,this),i.ty==="st"||i.ty==="gs"){if(n.lc=lineCapEnum[i.lc||2],n.lj=lineJoinEnum[i.lj||2],i.lj==1&&(n.ml=i.ml),d.w=PropertyFactory.getProp(this,i.w,0,null,this),d.w.k||(n.wi=d.w.v),i.d){var r=new DashProperty(this,i.d,"canvas",this);d.d=r,d.d.k||(n.da=d.d.dashArray,n.do=d.d.dashoffset[0])}}else n.r=i.r===2?"evenodd":"nonzero";return this.stylesList.push(n),d.style=n,d},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(i){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,i.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,i,this)}}},CVShapeElement.prototype.createShapeElement=function(i){var t=new CVShapeData(this,i,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var i;this._isFirstFrame=!0;var t=this.itemsData.length;for(i=0;i<t;i+=1)this.prevViewData[i]=this.itemsData[i];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,i=0;i<t;i+=1)this.dynamicProperties[i].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(i){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(i)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var i,t=this.stylesList.length;for(i=0;i<t;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.pop()},CVShapeElement.prototype.closeStyles=function(i){var t,n=i.length;for(t=0;t<n;t+=1)i[t].closed=!0},CVShapeElement.prototype.searchShapes=function(i,t,n,d,r){var m,e,u,g,c,s,o=i.length-1,a=[],l=[],p=[].concat(r);for(m=o;m>=0;m-=1){if((g=this.searchProcessedElement(i[m]))?t[m]=n[g-1]:i[m]._shouldRender=d,i[m].ty==="fl"||i[m].ty==="st"||i[m].ty==="gf"||i[m].ty==="gs")g?t[m].style.closed=!1:t[m]=this.createStyleElement(i[m],p),a.push(t[m].style);else if(i[m].ty==="gr"){if(g)for(u=t[m].it.length,e=0;e<u;e+=1)t[m].prevViewData[e]=t[m].it[e];else t[m]=this.createGroupElement(i[m]);this.searchShapes(i[m].it,t[m].it,t[m].prevViewData,d,p)}else i[m].ty==="tr"?(g||(s=this.createTransformElement(i[m]),t[m]=s),p.push(t[m]),this.addTransformToStyleList(t[m])):i[m].ty==="sh"||i[m].ty==="rc"||i[m].ty==="el"||i[m].ty==="sr"?g||(t[m]=this.createShapeElement(i[m])):i[m].ty==="tm"||i[m].ty==="rd"||i[m].ty==="pb"||i[m].ty==="zz"||i[m].ty==="op"?(g?(c=t[m]).closed=!1:((c=ShapeModifiers.getModifier(i[m].ty)).init(this,i[m]),t[m]=c,this.shapeModifiers.push(c)),l.push(c)):i[m].ty==="rp"&&(g?(c=t[m]).closed=!0:(c=ShapeModifiers.getModifier(i[m].ty),t[m]=c,c.init(this,i,m,t),this.shapeModifiers.push(c),d=!1),l.push(c));this.addProcessedElement(i[m],m+1)}for(this.removeTransformFromStyleList(),this.closeStyles(a),o=l.length,m=0;m<o;m+=1)l[m].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(i,t){(i._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=i.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var i,t,n,d,r,m,e,u,g,c=this.stylesList.length,s=this.globalData.renderer,o=this.globalData.canvasContext;for(i=0;i<c;i+=1)if(((u=(g=this.stylesList[i]).type)!=="st"&&u!=="gs"||g.wi!==0)&&g.data._shouldRender&&g.coOp!==0&&this.globalData.currentGlobalAlpha!==0){for(s.save(),m=g.elements,u==="st"||u==="gs"?(s.ctxStrokeStyle(u==="st"?g.co:g.grd),s.ctxLineWidth(g.wi),s.ctxLineCap(g.lc),s.ctxLineJoin(g.lj),s.ctxMiterLimit(g.ml||0)):s.ctxFillStyle(u==="fl"?g.co:g.grd),s.ctxOpacity(g.coOp),u!=="st"&&u!=="gs"&&o.beginPath(),s.ctxTransform(g.preTransforms.finalTransform.props),n=m.length,t=0;t<n;t+=1){for(u!=="st"&&u!=="gs"||(o.beginPath(),g.da&&(o.setLineDash(g.da),o.lineDashOffset=g.do)),r=(e=m[t].trNodes).length,d=0;d<r;d+=1)e[d].t==="m"?o.moveTo(e[d].p[0],e[d].p[1]):e[d].t==="c"?o.bezierCurveTo(e[d].pts[0],e[d].pts[1],e[d].pts[2],e[d].pts[3],e[d].pts[4],e[d].pts[5]):o.closePath();u!=="st"&&u!=="gs"||(s.ctxStroke(),g.da&&o.setLineDash(this.dashResetter))}u!=="st"&&u!=="gs"&&this.globalData.renderer.ctxFill(g.r),s.restore()}},CVShapeElement.prototype.renderShape=function(i,t,n,d){var r,m;for(m=i,r=t.length-1;r>=0;r-=1)t[r].ty==="tr"?(m=n[r].transform,this.renderShapeTransform(i,m)):t[r].ty==="sh"||t[r].ty==="el"||t[r].ty==="rc"||t[r].ty==="sr"?this.renderPath(t[r],n[r]):t[r].ty==="fl"?this.renderFill(t[r],n[r],m):t[r].ty==="st"?this.renderStroke(t[r],n[r],m):t[r].ty==="gf"||t[r].ty==="gs"?this.renderGradientFill(t[r],n[r],m):t[r].ty==="gr"?this.renderShape(m,t[r].it,n[r].it):t[r].ty;d&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(i,t){if(this._isFirstFrame||t._mdf||i.transforms._mdf){var n,d,r,m=i.trNodes,e=t.paths,u=e._length;m.length=0;var g=i.transforms.finalTransform;for(r=0;r<u;r+=1){var c=e.shapes[r];if(c&&c.v){for(d=c._length,n=1;n<d;n+=1)n===1&&m.push({t:"m",p:g.applyToPointArray(c.v[0][0],c.v[0][1],0)}),m.push({t:"c",pts:g.applyToTriplePoints(c.o[n-1],c.i[n],c.v[n])});d===1&&m.push({t:"m",p:g.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&d&&(m.push({t:"c",pts:g.applyToTriplePoints(c.o[n-1],c.i[0],c.v[0])}),m.push({t:"z"}))}}i.trNodes=m}},CVShapeElement.prototype.renderPath=function(i,t){if(i.hd!==!0&&i._shouldRender){var n,d=t.styledShapes.length;for(n=0;n<d;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(i,t,n){var d=t.style;(t.c._mdf||this._isFirstFrame)&&(d.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(d.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(i,t,n){var d,r=t.style;if(!r.grd||t.g._mdf||t.s._mdf||t.e._mdf||i.t!==1&&(t.h._mdf||t.a._mdf)){var m,e=this.globalData.canvasContext,u=t.s.v,g=t.e.v;if(i.t===1)d=e.createLinearGradient(u[0],u[1],g[0],g[1]);else{var c=Math.sqrt(Math.pow(u[0]-g[0],2)+Math.pow(u[1]-g[1],2)),s=Math.atan2(g[1]-u[1],g[0]-u[0]),o=t.h.v;o>=1?o=.99:o<=-1&&(o=-.99);var a=c*o,l=Math.cos(s+t.a.v)*a+u[0],p=Math.sin(s+t.a.v)*a+u[1];d=e.createRadialGradient(l,p,0,u[0],u[1],c)}var h=i.g.p,f=t.g.c,v=1;for(m=0;m<h;m+=1)t.g._hasOpacity&&t.g._collapsable&&(v=t.g.o[2*m+1]),d.addColorStop(f[4*m]/100,"rgba("+f[4*m+1]+","+f[4*m+2]+","+f[4*m+3]+","+v+")");r.grd=d}r.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(i,t,n){var d=t.style,r=t.d;r&&(r._mdf||this._isFirstFrame)&&(d.da=r.dashArray,d.do=r.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(d.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(d.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(d.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var t=!1;i.fc?(t=!0,this.values.fill=this.buildColor(i.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;i.sc&&(n=!0,this.values.stroke=this.buildColor(i.sc),this.values.sWidth=i.sw);var d,r,m,e,u,g,c,s,o,a,l,p,h=this.globalData.fontManager.getFontByName(i.f),f=i.l,v=this.mHelper;this.stroke=n,this.values.fValue=i.finalSize+"px "+this.globalData.fontManager.getFontByName(i.f).fFamily,r=i.finalText.length;var y=this.data.singleShape,x=.001*i.tr*i.finalSize,S=0,E=0,b=!0,T=0;for(d=0;d<r;d+=1){e=(m=this.globalData.fontManager.getCharData(i.finalText[d],h.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily))&&m.data||{},v.reset(),y&&f[d].n&&(S=-x,E+=i.yOffset,E+=b?1:0,b=!1),o=(c=e.shapes?e.shapes[0].it:[]).length,v.scale(i.finalSize/100,i.finalSize/100),y&&this.applyTextPropertiesToMatrix(i,v,f[d].line,S,E),l=createSizedArray(o-1);var P=0;for(s=0;s<o;s+=1)if(c[s].ty==="sh"){for(g=c[s].ks.k.i.length,a=c[s].ks.k,p=[],u=1;u<g;u+=1)u===1&&p.push(v.applyToX(a.v[0][0],a.v[0][1],0),v.applyToY(a.v[0][0],a.v[0][1],0)),p.push(v.applyToX(a.o[u-1][0],a.o[u-1][1],0),v.applyToY(a.o[u-1][0],a.o[u-1][1],0),v.applyToX(a.i[u][0],a.i[u][1],0),v.applyToY(a.i[u][0],a.i[u][1],0),v.applyToX(a.v[u][0],a.v[u][1],0),v.applyToY(a.v[u][0],a.v[u][1],0));p.push(v.applyToX(a.o[u-1][0],a.o[u-1][1],0),v.applyToY(a.o[u-1][0],a.o[u-1][1],0),v.applyToX(a.i[0][0],a.i[0][1],0),v.applyToY(a.i[0][0],a.i[0][1],0),v.applyToX(a.v[0][0],a.v[0][1],0),v.applyToY(a.v[0][0],a.v[0][1],0)),l[P]=p,P+=1}y&&(S+=f[d].l,S+=x),this.textSpans[T]?this.textSpans[T].elem=l:this.textSpans[T]={elem:l},T+=1}},CVTextElement.prototype.renderInnerContent=function(){var i,t,n,d,r,m;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,u=this.textAnimator.renderedLetters,g=this.textProperty.currentData.l;t=g.length;var c,s,o=null,a=null,l=null,p=this.globalData.renderer;for(i=0;i<t;i+=1)if(!g[i].n){if((e=u[i])&&(p.save(),p.ctxTransform(e.p),p.ctxOpacity(e.o)),this.fill){for(e&&e.fc?o!==e.fc&&(p.ctxFillStyle(e.fc),o=e.fc):o!==this.values.fill&&(o=this.values.fill,p.ctxFillStyle(this.values.fill)),d=(c=this.textSpans[i].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<d;n+=1)for(m=(s=c[n]).length,this.globalData.canvasContext.moveTo(s[0],s[1]),r=2;r<m;r+=6)this.globalData.canvasContext.bezierCurveTo(s[r],s[r+1],s[r+2],s[r+3],s[r+4],s[r+5]);this.globalData.canvasContext.closePath(),p.ctxFill()}if(this.stroke){for(e&&e.sw?l!==e.sw&&(l=e.sw,p.ctxLineWidth(e.sw)):l!==this.values.sWidth&&(l=this.values.sWidth,p.ctxLineWidth(this.values.sWidth)),e&&e.sc?a!==e.sc&&(a=e.sc,p.ctxStrokeStyle(e.sc)):a!==this.values.stroke&&(a=this.values.stroke,p.ctxStrokeStyle(this.values.stroke)),d=(c=this.textSpans[i].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<d;n+=1)for(m=(s=c[n]).length,this.globalData.canvasContext.moveTo(s[0],s[1]),r=2;r<m;r+=6)this.globalData.canvasContext.bezierCurveTo(s[r],s[r+1],s[r+2],s[r+3],s[r+4],s[r+5]);this.globalData.canvasContext.closePath(),p.ctxStroke()}e&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var i=createTag("canvas");i.width=this.assetData.w,i.height=this.assetData.h;var t,n,d=i.getContext("2d"),r=this.img.width,m=this.img.height,e=r/m,u=this.assetData.w/this.assetData.h,g=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;e>u&&g==="xMidYMid slice"||e<u&&g!=="xMidYMid slice"?t=(n=m)*u:n=(t=r)/u,d.drawImage(this.img,(r-t)/2,(m-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=i}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(i){return new CVShapeElement(i,this.globalData,this)},CanvasRendererBase.prototype.createText=function(i){return new CVTextElement(i,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(i){return new CVImageElement(i,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(i){return new CVSolidElement(i,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(i){i[0]===1&&i[1]===0&&i[4]===0&&i[5]===1&&i[12]===0&&i[13]===0||this.canvasContext.transform(i[0],i[1],i[4],i[5],i[12],i[13])},CanvasRendererBase.prototype.ctxOpacity=function(i){this.canvasContext.globalAlpha*=i<0?0:i},CanvasRendererBase.prototype.ctxFillStyle=function(i){this.canvasContext.fillStyle=i},CanvasRendererBase.prototype.ctxStrokeStyle=function(i){this.canvasContext.strokeStyle=i},CanvasRendererBase.prototype.ctxLineWidth=function(i){this.canvasContext.lineWidth=i},CanvasRendererBase.prototype.ctxLineCap=function(i){this.canvasContext.lineCap=i},CanvasRendererBase.prototype.ctxLineJoin=function(i){this.canvasContext.lineJoin=i},CanvasRendererBase.prototype.ctxMiterLimit=function(i){this.canvasContext.miterLimit=i},CanvasRendererBase.prototype.ctxFill=function(i){this.canvasContext.fill(i)},CanvasRendererBase.prototype.ctxFillRect=function(i,t,n,d){this.canvasContext.fillRect(i,t,n,d)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(i){this.renderConfig.clearCanvas?(i&&(this.globalData.blendMode="source-over"),this.contextData.restore(i)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(i){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var n="0px 0px 0px";t.transformOrigin=n,t.mozTransformOrigin=n,t.webkitTransformOrigin=n,t["-webkit-transform"]=n,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=i,this.layers=i.layers,this.transformCanvas={w:i.w,h:i.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(i,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(i.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(i,t){var n,d,r,m;if(this.reset(),i?(n=i,d=t,this.canvasContext.canvas.width=n,this.canvasContext.canvas.height=d):(this.animationItem.wrapper&&this.animationItem.container?(n=this.animationItem.wrapper.offsetWidth,d=this.animationItem.wrapper.offsetHeight):(n=this.canvasContext.canvas.width,d=this.canvasContext.canvas.height),this.canvasContext.canvas.width=n*this.renderConfig.dpr,this.canvasContext.canvas.height=d*this.renderConfig.dpr),this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var e=this.renderConfig.preserveAspectRatio.split(" "),u=e[1]||"meet",g=e[0]||"xMidYMid",c=g.substr(0,4),s=g.substr(4);r=n/d,(m=this.transformCanvas.w/this.transformCanvas.h)>r&&u==="meet"||m<r&&u==="slice"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=n/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=d/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=d/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx=c==="xMid"&&(m<r&&u==="meet"||m>r&&u==="slice")?(n-this.transformCanvas.w*(d/this.transformCanvas.h))/2*this.renderConfig.dpr:c==="xMax"&&(m<r&&u==="meet"||m>r&&u==="slice")?(n-this.transformCanvas.w*(d/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty=s==="YMid"&&(m>r&&u==="meet"||m<r&&u==="slice")?(d-this.transformCanvas.h*(n/this.transformCanvas.w))/2*this.renderConfig.dpr:s==="YMax"&&(m>r&&u==="meet"||m<r&&u==="slice")?(d-this.transformCanvas.h*(n/this.transformCanvas.w))*this.renderConfig.dpr:0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=n/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=d/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var i;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),i=(this.layers?this.layers.length:0)-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(i,t){if((this.renderedFrame!==i||this.renderConfig.clearCanvas!==!0||t)&&!this.destroyed&&i!==-1){var n;this.renderedFrame=i,this.globalData.frameNum=i-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=i;var d=this.layers.length;for(this.completeLayers||this.checkLayers(i),n=d-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(i-this.layers[n].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=d-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(i){var t=this.elements;if(!t[i]&&this.layers[i].ty!==99){var n=this.createItem(this.layers[i],this,this.globalData);t[i]=n,n.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var i=2*this._length,t=0;for(t=this._length;t<i;t+=1)this.stack[t]=new CanvasContext;this._length=i},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(i){this.cArrPos-=1;var t,n=this.stack[this.cArrPos],d=n.transform,r=this.cTr.props;for(t=0;t<16;t+=1)r[t]=d[t];if(i){this.nativeContext.restore();var m=this.stack[this.cArrPos+1];this.appliedFillStyle=m.fillStyle,this.appliedStrokeStyle=m.strokeStyle,this.appliedLineWidth=m.lineWidth,this.appliedLineCap=m.lineCap,this.appliedLineJoin=m.lineJoin,this.appliedMiterLimit=m.miterLimit}this.nativeContext.setTransform(d[0],d[1],d[4],d[5],d[12],d[13]),(i||n.opacity!==-1&&this.currentOpacity!==n.opacity)&&(this.nativeContext.globalAlpha=n.opacity,this.currentOpacity=n.opacity),this.currentFillStyle=n.fillStyle,this.currentStrokeStyle=n.strokeStyle,this.currentLineWidth=n.lineWidth,this.currentLineCap=n.lineCap,this.currentLineJoin=n.lineJoin,this.currentMiterLimit=n.miterLimit},CVContextData.prototype.save=function(i){i&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var n,d=this.stack[this.cArrPos];for(n=0;n<16;n+=1)d.transform[n]=t[n];this.cArrPos+=1;var r=this.stack[this.cArrPos];r.opacity=d.opacity,r.fillStyle=d.fillStyle,r.strokeStyle=d.strokeStyle,r.lineWidth=d.lineWidth,r.lineCap=d.lineCap,r.lineJoin=d.lineJoin,r.miterLimit=d.miterLimit},CVContextData.prototype.setOpacity=function(i){this.stack[this.cArrPos].opacity=i},CVContextData.prototype.setContext=function(i){this.nativeContext=i},CVContextData.prototype.fillStyle=function(i){this.stack[this.cArrPos].fillStyle!==i&&(this.currentFillStyle=i,this.stack[this.cArrPos].fillStyle=i)},CVContextData.prototype.strokeStyle=function(i){this.stack[this.cArrPos].strokeStyle!==i&&(this.currentStrokeStyle=i,this.stack[this.cArrPos].strokeStyle=i)},CVContextData.prototype.lineWidth=function(i){this.stack[this.cArrPos].lineWidth!==i&&(this.currentLineWidth=i,this.stack[this.cArrPos].lineWidth=i)},CVContextData.prototype.lineCap=function(i){this.stack[this.cArrPos].lineCap!==i&&(this.currentLineCap=i,this.stack[this.cArrPos].lineCap=i)},CVContextData.prototype.lineJoin=function(i){this.stack[this.cArrPos].lineJoin!==i&&(this.currentLineJoin=i,this.stack[this.cArrPos].lineJoin=i)},CVContextData.prototype.miterLimit=function(i){this.stack[this.cArrPos].miterLimit!==i&&(this.currentMiterLimit=i,this.stack[this.cArrPos].miterLimit=i)},CVContextData.prototype.transform=function(i){this.transformMat.cloneFromProps(i);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var n=t.props;this.nativeContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])},CVContextData.prototype.opacity=function(i){var t=this.stack[this.cArrPos].opacity;t*=i<0?0:i,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==i&&(this.nativeContext.globalAlpha=i,this.currentOpacity=i),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(i){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(i)},CVContextData.prototype.fillRect=function(i,t,n,d){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(i,t,n,d)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var i,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),i=this.layers.length-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},CVCompElement.prototype.destroy=function(){var i;for(i=this.layers.length-1;i>=0;i-=1)this.elements[i]&&this.elements[i].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(i){return new CVCompElement(i,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var i=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();i.transform=t,i.webkitTransform=t}this.finalTransform._opMdf&&(i.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var i;this.data.hasMask?((i=createNS("rect")).setAttribute("width",this.data.sw),i.setAttribute("height",this.data.sh),i.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((i=createTag("div")).style.width=this.data.sw+"px",i.style.height=this.data.sh+"px",i.style.backgroundColor=this.data.sc),this.layerElement.appendChild(i)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var i;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),i=this.svgElement;else{i=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;i.setAttribute("width",t.w),i.setAttribute("height",t.h),i.appendChild(this.shapesContainer),this.layerElement.appendChild(i)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=i},HShapeElement.prototype.getTransformedPoint=function(i,t){var n,d=i.length;for(n=0;n<d;n+=1)t=i[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(i,t){var n,d,r,m,e,u=i.sh.v,g=i.transformers,c=u._length;if(!(c<=1)){for(n=0;n<c-1;n+=1)d=this.getTransformedPoint(g,u.v[n]),r=this.getTransformedPoint(g,u.o[n]),m=this.getTransformedPoint(g,u.i[n+1]),e=this.getTransformedPoint(g,u.v[n+1]),this.checkBounds(d,r,m,e,t);u.c&&(d=this.getTransformedPoint(g,u.v[n]),r=this.getTransformedPoint(g,u.o[n]),m=this.getTransformedPoint(g,u.i[0]),e=this.getTransformedPoint(g,u.v[0]),this.checkBounds(d,r,m,e,t))}},HShapeElement.prototype.checkBounds=function(i,t,n,d,r){this.getBoundsOfCurve(i,t,n,d);var m=this.shapeBoundingBox;r.x=bmMin(m.left,r.x),r.xMax=bmMax(m.right,r.xMax),r.y=bmMin(m.top,r.y),r.yMax=bmMax(m.bottom,r.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(i,t,n,d){for(var r,m,e,u,g,c,s,o=[[i[0],d[0]],[i[1],d[1]]],a=0;a<2;++a)m=6*i[a]-12*t[a]+6*n[a],r=-3*i[a]+9*t[a]-9*n[a]+3*d[a],e=3*t[a]-3*i[a],m|=0,e|=0,(r|=0)==0&&m===0||(r===0?(u=-e/m)>0&&u<1&&o[a].push(this.calculateF(u,i,t,n,d,a)):(g=m*m-4*e*r)>=0&&((c=(-m+bmSqrt(g))/(2*r))>0&&c<1&&o[a].push(this.calculateF(c,i,t,n,d,a)),(s=(-m-bmSqrt(g))/(2*r))>0&&s<1&&o[a].push(this.calculateF(s,i,t,n,d,a))));this.shapeBoundingBox.left=bmMin.apply(null,o[0]),this.shapeBoundingBox.top=bmMin.apply(null,o[1]),this.shapeBoundingBox.right=bmMax.apply(null,o[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,o[1])},HShapeElement.prototype.calculateF=function(i,t,n,d,r,m){return bmPow(1-i,3)*t[m]+3*bmPow(1-i,2)*i*n[m]+3*(1-i)*bmPow(i,2)*d[m]+bmPow(i,3)*r[m]},HShapeElement.prototype.calculateBoundingBox=function(i,t){var n,d=i.length;for(n=0;n<d;n+=1)i[n]&&i[n].sh?this.calculateShapeBoundingBox(i[n],t):i[n]&&i[n].it?this.calculateBoundingBox(i[n].it,t):i[n]&&i[n].style&&i[n].w&&this.expandStrokeBoundingBox(i[n].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(i,t){var n=0;if(i.keyframes){for(var d=0;d<i.keyframes.length;d+=1){var r=i.keyframes[d].s;r>n&&(n=r)}n*=i.mult}else n=i.v*i.mult;t.x-=n,t.xMax+=n,t.y-=n,t.yMax+=n},HShapeElement.prototype.currentBoxContains=function(i){return this.currentBBox.x<=i.x&&this.currentBBox.y<=i.y&&this.currentBBox.width+this.currentBBox.x>=i.x+i.width&&this.currentBBox.height+this.currentBBox.y>=i.y+i.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var i=this.tempBoundingBox,t=999999;if(i.x=t,i.xMax=-t,i.y=t,i.yMax=-t,this.calculateBoundingBox(this.itemsData,i),i.width=i.xMax<i.x?0:i.xMax-i.x,i.height=i.yMax<i.y?0:i.yMax-i.y,this.currentBoxContains(i))return;var n=!1;if(this.currentBBox.w!==i.width&&(this.currentBBox.w=i.width,this.shapeCont.setAttribute("width",i.width),n=!0),this.currentBBox.h!==i.height&&(this.currentBBox.h=i.height,this.shapeCont.setAttribute("height",i.height),n=!0),n||this.currentBBox.x!==i.x||this.currentBBox.y!==i.y){this.currentBBox.w=i.width,this.currentBBox.h=i.height,this.currentBBox.x=i.x,this.currentBBox.y=i.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var d=this.shapeCont.style,r="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";d.transform=r,d.webkitTransform=r}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var i=createNS("g");this.maskedElement.appendChild(i),this.innerElem=i}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i.l?i.l.length:0);var t=this.innerElem.style,n=i.fc?this.buildColor(i.fc):"rgba(0,0,0,0)";t.fill=n,t.color=n,i.sc&&(t.stroke=this.buildColor(i.sc),t.strokeWidth=i.sw+"px");var d,r,m=this.globalData.fontManager.getFontByName(i.f);if(!this.globalData.fontManager.chars)if(t.fontSize=i.finalSize+"px",t.lineHeight=i.finalSize+"px",m.fClass)this.innerElem.className=m.fClass;else{t.fontFamily=m.fFamily;var e=i.fWeight,u=i.fStyle;t.fontStyle=u,t.fontWeight=e}var g,c,s,o=i.l;r=o.length;var a,l=this.mHelper,p="",h=0;for(d=0;d<r;d+=1){if(this.globalData.fontManager.chars?(this.textPaths[h]?g=this.textPaths[h]:((g=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),g.setAttribute("stroke-linejoin",lineJoinEnum[2]),g.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[h]?s=(c=this.textSpans[h]).children[0]:((c=createTag("div")).style.lineHeight=0,(s=createNS("svg")).appendChild(g),styleDiv(c)))):this.isMasked?g=this.textPaths[h]?this.textPaths[h]:createNS("text"):this.textSpans[h]?(c=this.textSpans[h],g=this.textPaths[h]):(styleDiv(c=createTag("span")),styleDiv(g=createTag("span")),c.appendChild(g)),this.globalData.fontManager.chars){var f,v=this.globalData.fontManager.getCharData(i.finalText[d],m.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily);if(f=v?v.data:null,l.reset(),f&&f.shapes&&f.shapes.length&&(a=f.shapes[0].it,l.scale(i.finalSize/100,i.finalSize/100),p=this.createPathShape(l,a),g.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(g);else{if(this.innerElem.appendChild(c),f&&f.shapes){document.body.appendChild(s);var y=s.getBBox();s.setAttribute("width",y.width+2),s.setAttribute("height",y.height+2),s.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));var x=s.style,S="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";x.transform=S,x.webkitTransform=S,o[d].yOffset=y.y-1}else s.setAttribute("width",1),s.setAttribute("height",1);c.appendChild(s)}}else if(g.textContent=o[d].val,g.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(g);else{this.innerElem.appendChild(c);var E=g.style,b="translate3d(0,"+-i.finalSize/1.2+"px,0)";E.transform=b,E.webkitTransform=b}this.isMasked?this.textSpans[h]=g:this.textSpans[h]=c,this.textSpans[h].style.display="block",this.textPaths[h]=g,h+=1}for(;h<this.textSpans.length;)this.textSpans[h].style.display="none",h+=1},HTextElement.prototype.renderInnerContent=function(){var i;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),i=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";i.transform=t,i.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var n,d,r,m,e,u=0,g=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(d=c.length,n=0;n<d;n+=1)c[n].n?u+=1:(m=this.textSpans[n],e=this.textPaths[n],r=g[u],u+=1,r._mdf.m&&(this.isMasked?m.setAttribute("transform",r.m):(m.style.webkitTransform=r.m,m.style.transform=r.m)),m.style.opacity=r.o,r.sw&&r._mdf.sw&&e.setAttribute("stroke-width",r.sw),r.sc&&r._mdf.sc&&e.setAttribute("stroke",r.sc),r.fc&&r._mdf.fc&&(e.setAttribute("fill",r.fc),e.style.color=r.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var s=this.innerElem.getBBox();if(this.currentBBox.w!==s.width&&(this.currentBBox.w=s.width,this.svgElement.setAttribute("width",s.width)),this.currentBBox.h!==s.height&&(this.currentBBox.h=s.height,this.svgElement.setAttribute("height",s.height)),this.currentBBox.w!==s.width+2||this.currentBBox.h!==s.height+2||this.currentBBox.x!==s.x-1||this.currentBBox.y!==s.y-1){this.currentBBox.w=s.width+2,this.currentBBox.h=s.height+2,this.currentBBox.x=s.x-1,this.currentBBox.y=s.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),i=this.svgElement.style;var o="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=o,i.webkitTransform=o}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var i,t,n,d,r=this.comp.threeDElements.length;for(i=0;i<r;i+=1)if((t=this.comp.threeDElements[i]).type==="3d"){n=t.perspectiveElem.style,d=t.container.style;var m=this.pe.v+"px",e="0px 0px 0px",u="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=m,n.webkitPerspective=m,d.transformOrigin=e,d.mozTransformOrigin=e,d.webkitTransformOrigin=e,n.transform=u,n.webkitTransform=u}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var i,t,n=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,i=0;i<t;i+=1)n=this.hierarchy[i].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(i=t=this.hierarchy.length-1;i>=0;i-=1){var d=this.hierarchy[i].finalTransform.mProp;this.mat.translate(-d.p.v[0],-d.p.v[1],d.p.v[2]),this.mat.rotateX(-d.or.v[0]).rotateY(-d.or.v[1]).rotateZ(d.or.v[2]),this.mat.rotateX(-d.rx.v).rotateY(-d.ry.v).rotateZ(d.rz.v),this.mat.scale(1/d.s.v[0],1/d.s.v[1],1/d.s.v[2]),this.mat.translate(d.a.v[0],d.a.v[1],d.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var r;r=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var m=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)),e=[r[0]/m,r[1]/m,r[2]/m],u=Math.sqrt(e[2]*e[2]+e[0]*e[0]),g=Math.atan2(e[1],u),c=Math.atan2(e[0],-e[2]);this.mat.rotateY(c).rotateX(-g)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var s=!this._prevMat.equals(this.mat);if((s||this.pe._mdf)&&this.comp.threeDElements){var o,a,l;for(t=this.comp.threeDElements.length,i=0;i<t;i+=1)if((o=this.comp.threeDElements[i]).type==="3d"){if(s){var p=this.mat.toCSS();(l=o.container.style).transform=p,l.webkitTransform=p}this.pe._mdf&&((a=o.perspectiveElem.style).perspective=this.pe.v+"px",a.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(i){this.prepareProperties(i,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var i=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=i,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(i,t){var n=i.getBaseElement();if(n){var d=this.layers[t];if(d.ddd&&this.supports3d)this.addTo3dContainer(n,t);else if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var r,m,e=0;e<t;)this.elements[e]&&this.elements[e]!==!0&&this.elements[e].getBaseElement&&(m=this.elements[e],r=(this.layers[e].ddd?this.getThreeDContainerByPos(e):m.getBaseElement())||r),e+=1;r?d.ddd&&this.supports3d||this.layerElement.insertBefore(n,r):d.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRendererBase.prototype.createShape=function(i){return this.supports3d?new HShapeElement(i,this.globalData,this):new SVGShapeElement(i,this.globalData,this)},HybridRendererBase.prototype.createText=function(i){return this.supports3d?new HTextElement(i,this.globalData,this):new SVGTextLottieElement(i,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(i){return this.camera=new HCameraElement(i,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(i){return this.supports3d?new HImageElement(i,this.globalData,this):new IImageElement(i,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(i){return this.supports3d?new HSolidElement(i,this.globalData,this):new ISolidElement(i,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(i){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=i&&this.threeDElements[t].endPos>=i)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(i,t){var n,d,r=createTag("div");styleDiv(r);var m=createTag("div");if(styleDiv(m),t==="3d"){(n=r.style).width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var e="50% 50%";n.webkitTransformOrigin=e,n.mozTransformOrigin=e,n.transformOrigin=e;var u="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(d=m.style).transform=u,d.webkitTransform=u}r.appendChild(m);var g={container:m,perspectiveElem:r,startPos:i,endPos:i,type:t};return this.threeDElements.push(g),g},HybridRendererBase.prototype.build3dContainers=function(){var i,t,n=this.layers.length,d="";for(i=0;i<n;i+=1)this.layers[i].ddd&&this.layers[i].ty!==3?(d!=="3d"&&(d="3d",t=this.createThreeDContainer(i,"3d")),t.endPos=Math.max(t.endPos,i)):(d!=="2d"&&(d="2d",t=this.createThreeDContainer(i,"2d")),t.endPos=Math.max(t.endPos,i));for(i=(n=this.threeDElements.length)-1;i>=0;i-=1)this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(i,t){for(var n=0,d=this.threeDElements.length;n<d;){if(t<=this.threeDElements[n].endPos){for(var r,m=this.threeDElements[n].startPos;m<t;)this.elements[m]&&this.elements[m].getBaseElement&&(r=this.elements[m].getBaseElement()),m+=1;r?this.threeDElements[n].container.insertBefore(i,r):this.threeDElements[n].container.appendChild(i);break}n+=1}},HybridRendererBase.prototype.configAnimation=function(i){var t=createTag("div"),n=this.animationItem.wrapper,d=t.style;d.width=i.w+"px",d.height=i.h+"px",this.resizerElem=t,styleDiv(t),d.transformStyle="flat",d.mozTransformStyle="flat",d.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),d.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var m=createNS("defs");r.appendChild(m),this.data=i,this.setupGlobalData(i,r),this.globalData.defs=m,this.layers=i.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var i;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(i=0;i<t;i+=1)this.elements[i]&&this.elements[i].destroy&&this.elements[i].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var i,t,n,d,r=this.animationItem.wrapper.offsetWidth,m=this.animationItem.wrapper.offsetHeight,e=r/m;this.globalData.compSize.w/this.globalData.compSize.h>e?(i=r/this.globalData.compSize.w,t=r/this.globalData.compSize.w,n=0,d=(m-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(i=m/this.globalData.compSize.h,t=m/this.globalData.compSize.h,n=(r-this.globalData.compSize.w*(m/this.globalData.compSize.h))/2,d=0);var u=this.resizerElem.style;u.webkitTransform="matrix3d("+i+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+d+",0,1)",u.transform=u.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var i,t=this.globalData.compSize.w,n=this.globalData.compSize.h,d=this.threeDElements.length;for(i=0;i<d;i+=1){var r=this.threeDElements[i].perspectiveElem.style;r.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px",r.perspective=r.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(i){var t,n=i.length,d=createTag("div");for(t=0;t<n;t+=1)if(i[t].xt){var r=this.createComp(i[t],d,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(i,t){for(var n,d=0;d<t;)this.elements[d]&&this.elements[d].getBaseElement&&(n=this.elements[d].getBaseElement()),d+=1;n?this.layerElement.insertBefore(i,n):this.layerElement.appendChild(i)},HCompElement.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(i){return this.supports3d?new HCompElement(i,this.globalData,this):new SVGCompElement(i,this.globalData,this)};var CompExpressionInterface=function(i){function t(n){for(var d=0,r=i.layers.length;d<r;){if(i.layers[d].nm===n||i.layers[d].ind===n)return i.elements[d].layerInterface;d+=1}return null}return Object.defineProperty(t,"_name",{value:i.data.nm}),t.layer=t,t.pixelAspect=1,t.height=i.data.h||i.globalData.compSize.h,t.width=i.data.w||i.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/i.globalData.frameRate,t.displayStartTime=0,t.numLayers=i.layers.length,t};function _typeof$2(i){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(i)}function seedRandom(i,t){var n=this,d=256,r=t.pow(d,6),m=t.pow(2,52),e=2*m,u=255;function g(l){var p,h=l.length,f=this,v=0,y=f.i=f.j=0,x=f.S=[];for(h||(l=[h++]);v<d;)x[v]=v++;for(v=0;v<d;v++)x[v]=x[y=u&y+l[v%h]+(p=x[v])],x[y]=p;f.g=function(S){for(var E,b=0,T=f.i,P=f.j,C=f.S;S--;)E=C[T=u&T+1],b=b*d+C[u&(C[T]=C[P=u&P+E])+(C[P]=E)];return f.i=T,f.j=P,b}}function c(l,p){return p.i=l.i,p.j=l.j,p.S=l.S.slice(),p}function s(l,p){var h,f=[],v=_typeof$2(l);if(p&&v=="object")for(h in l)try{f.push(s(l[h],p-1))}catch{}return f.length?f:v=="string"?l:l+"\0"}function o(l,p){for(var h,f=l+"",v=0;v<f.length;)p[u&v]=u&(h^=19*p[u&v])+f.charCodeAt(v++);return a(p)}function a(l){return String.fromCharCode.apply(0,l)}t.seedrandom=function(l,p,h){var f=[],v=o(s((p=p===!0?{entropy:!0}:p||{}).entropy?[l,a(i)]:l===null?function(){try{var S=new Uint8Array(d);return(n.crypto||n.msCrypto).getRandomValues(S),a(S)}catch{var E=n.navigator,b=E&&E.plugins;return[+new Date,n,b,n.screen,a(i)]}}():l,3),f),y=new g(f),x=function(){for(var S=y.g(6),E=r,b=0;S<m;)S=(S+b)*d,E*=d,b=y.g(1);for(;S>=e;)S/=2,E/=2,b>>>=1;return(S+b)/E};return x.int32=function(){return 0|y.g(4)},x.quick=function(){return y.g(4)/4294967296},x.double=x,o(a(y.S),i),(p.pass||h||function(S,E,b,T){return T&&(T.S&&c(T,y),S.state=function(){return c(y,{})}),b?(t.random=S,E):S})(x,v,"global"in p?p.global:this==t,p.state)},o(t.random(),i)}function initialize$2(i){seedRandom([],i)}var propTypes={SHAPE:"shape"};function _typeof$1(i){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(i)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(i){return i.constructor===Array||i.constructor===Float32Array}function isNumerable(i,t){return i==="number"||t instanceof Number||i==="boolean"||i==="string"}function $bm_neg(i){var t=_typeof$1(i);if(t==="number"||i instanceof Number||t==="boolean")return-i;if($bm_isInstanceOfArray(i)){var n,d=i.length,r=[];for(n=0;n<d;n+=1)r[n]=-i[n];return r}return i.propType?i.v:-i}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(i,t){var n=_typeof$1(i),d=_typeof$1(t);if(isNumerable(n,i)&&isNumerable(d,t)||n==="string"||d==="string")return i+t;if($bm_isInstanceOfArray(i)&&isNumerable(d,t))return(i=i.slice(0))[0]+=t,i;if(isNumerable(n,i)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=i+t[0],t;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(t)){for(var r=0,m=i.length,e=t.length,u=[];r<m||r<e;)(typeof i[r]=="number"||i[r]instanceof Number)&&(typeof t[r]=="number"||t[r]instanceof Number)?u[r]=i[r]+t[r]:u[r]=t[r]===void 0?i[r]:i[r]||t[r],r+=1;return u}return 0}var add=sum;function sub(i,t){var n=_typeof$1(i),d=_typeof$1(t);if(isNumerable(n,i)&&isNumerable(d,t))return n==="string"&&(i=parseInt(i,10)),d==="string"&&(t=parseInt(t,10)),i-t;if($bm_isInstanceOfArray(i)&&isNumerable(d,t))return(i=i.slice(0))[0]-=t,i;if(isNumerable(n,i)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=i-t[0],t;if($bm_isInstanceOfArray(i)&&$bm_isInstanceOfArray(t)){for(var r=0,m=i.length,e=t.length,u=[];r<m||r<e;)(typeof i[r]=="number"||i[r]instanceof Number)&&(typeof t[r]=="number"||t[r]instanceof Number)?u[r]=i[r]-t[r]:u[r]=t[r]===void 0?i[r]:i[r]||t[r],r+=1;return u}return 0}function mul(i,t){var n,d,r,m=_typeof$1(i),e=_typeof$1(t);if(isNumerable(m,i)&&isNumerable(e,t))return i*t;if($bm_isInstanceOfArray(i)&&isNumerable(e,t)){for(r=i.length,n=createTypedArray("float32",r),d=0;d<r;d+=1)n[d]=i[d]*t;return n}if(isNumerable(m,i)&&$bm_isInstanceOfArray(t)){for(r=t.length,n=createTypedArray("float32",r),d=0;d<r;d+=1)n[d]=i*t[d];return n}return 0}function div(i,t){var n,d,r,m=_typeof$1(i),e=_typeof$1(t);if(isNumerable(m,i)&&isNumerable(e,t))return i/t;if($bm_isInstanceOfArray(i)&&isNumerable(e,t)){for(r=i.length,n=createTypedArray("float32",r),d=0;d<r;d+=1)n[d]=i[d]/t;return n}if(isNumerable(m,i)&&$bm_isInstanceOfArray(t)){for(r=t.length,n=createTypedArray("float32",r),d=0;d<r;d+=1)n[d]=i/t[d];return n}return 0}function mod(i,t){return typeof i=="string"&&(i=parseInt(i,10)),typeof t=="string"&&(t=parseInt(t,10)),i%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(i,t,n){if(t>n){var d=n;n=t,t=d}return Math.min(Math.max(i,t),n)}function radiansToDegrees(i){return i/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(i){return i*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(i,t){if(typeof i=="number"||i instanceof Number)return t=t||0,Math.abs(i-t);var n;t||(t=helperLengthArray);var d=Math.min(i.length,t.length),r=0;for(n=0;n<d;n+=1)r+=Math.pow(t[n]-i[n],2);return Math.sqrt(r)}function normalize(i){return div(i,length(i))}function rgbToHsl(i){var t,n,d=i[0],r=i[1],m=i[2],e=Math.max(d,r,m),u=Math.min(d,r,m),g=(e+u)/2;if(e===u)t=0,n=0;else{var c=e-u;switch(n=g>.5?c/(2-e-u):c/(e+u),e){case d:t=(r-m)/c+(r<m?6:0);break;case r:t=(m-d)/c+2;break;case m:t=(d-r)/c+4}t/=6}return[t,n,g,i[3]]}function hue2rgb(i,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+6*(t-i)*n:n<.5?t:n<2/3?i+(t-i)*(2/3-n)*6:i}function hslToRgb(i){var t,n,d,r=i[0],m=i[1],e=i[2];if(m===0)t=e,d=e,n=e;else{var u=e<.5?e*(1+m):e+m-e*m,g=2*e-u;t=hue2rgb(g,u,r+1/3),n=hue2rgb(g,u,r),d=hue2rgb(g,u,r-1/3)}return[t,n,d,i[3]]}function linear(i,t,n,d,r){if(d!==void 0&&r!==void 0||(d=t,r=n,t=0,n=1),n<t){var m=n;n=t,t=m}if(i<=t)return d;if(i>=n)return r;var e,u=n===t?0:(i-t)/(n-t);if(!d.length)return d+(r-d)*u;var g=d.length,c=createTypedArray("float32",g);for(e=0;e<g;e+=1)c[e]=d[e]+(r[e]-d[e])*u;return c}function random(i,t){if(t===void 0&&(i===void 0?(i=0,t=1):(t=i,i=void 0)),t.length){var n,d=t.length;i||(i=createTypedArray("float32",d));var r=createTypedArray("float32",d),m=BMMath.random();for(n=0;n<d;n+=1)r[n]=i[n]+m*(t[n]-i[n]);return r}return i===void 0&&(i=0),i+BMMath.random()*(t-i)}function createPath(i,t,n,d){var r,m=i.length,e=shapePool.newElement();e.setPathData(!!d,m);var u,g,c=[0,0];for(r=0;r<m;r+=1)u=t&&t[r]?t[r]:c,g=n&&n[r]?n[r]:c,e.setTripleAt(i[r][0],i[r][1],g[0]+i[r][0],g[1]+i[r][1],u[0]+i[r][0],u[1]+i[r][1],r,!0);return e}function initiateExpression(elem,data,property){function noOp(i){return i}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function(i,t){var n,d,r=this.pv.length?this.pv.length:1,m=createTypedArray("float32",r),e=Math.floor(5*time);for(n=0,d=0;n<e;){for(d=0;d<r;d+=1)m[d]+=-t+2*t*BMMath.random();n+=1}var u=5*time,g=u-Math.floor(u),c=createTypedArray("float32",r);if(r>1){for(d=0;d<r;d+=1)c[d]=this.pv[d]+m[d]+(-t+2*t*BMMath.random())*g;return c}return this.pv+m[0]+(-t+2*t*BMMath.random())*g}.bind(this);function loopInDuration(i,t){return loopIn(i,t,!0)}function loopOutDuration(i,t){return loopOut(i,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(i,t){var n=[t[0]-i[0],t[1]-i[1],t[2]-i[2]],d=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,d,0]}function easeOut(i,t,n,d,r){return applyEase(easeOutBez,i,t,n,d,r)}function easeIn(i,t,n,d,r){return applyEase(easeInBez,i,t,n,d,r)}function ease(i,t,n,d,r){return applyEase(easeInOutBez,i,t,n,d,r)}function applyEase(i,t,n,d,r,m){r===void 0?(r=n,m=d):t=(t-n)/(d-n),t>1?t=1:t<0&&(t=0);var e=i(t);if($bm_isInstanceOfArray(r)){var u,g=r.length,c=createTypedArray("float32",g);for(u=0;u<g;u+=1)c[u]=(m[u]-r[u])*e+r[u];return c}return(m-r)*e+r}function nearestKey(i){var t,n,d,r=data.k.length;if(data.k.length&&typeof data.k[0]!="number")if(n=-1,(i*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,d=data.k[0].t;else{for(t=0;t<r-1;t+=1){if(i===data.k[t].t){n=t+1,d=data.k[t].t;break}if(i>data.k[t].t&&i<data.k[t+1].t){i-data.k[t].t>data.k[t+1].t-i?(n=t+2,d=data.k[t+1].t):(n=t+1,d=data.k[t].t);break}}n===-1&&(n=t+1,d=data.k[t].t)}else n=0,d=0;var m={};return m.index=n,m.time=d/elem.comp.globalData.frameRate,m}function key(i){var t,n,d;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+i);i-=1,t={time:data.k[i].t/elem.comp.globalData.frameRate,value:[]};var r=Object.prototype.hasOwnProperty.call(data.k[i],"s")?data.k[i].s:data.k[i-1].e;for(d=r.length,n=0;n<d;n+=1)t[n]=r[n],t.value[n]=r[n];return t}function framesToTime(i,t){return t||(t=elem.comp.globalData.frameRate),i/t}function timeToFrames(i,t){return i||i===0||(i=time),t||(t=elem.comp.globalData.frameRate),i*t}function seedRandom(i){BMMath.seedrandom(randSeed+i)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(i,t){return typeof value=="string"?t===void 0?value.substring(i):value.substring(i,t):""}function substr(i,t){return typeof value=="string"?t===void 0?value.substr(i):value.substr(i,t):""}function posterizeTime(i){time=i===0?0:Math.floor(time*i)/i,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(i){return value=i,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType!==4||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var i={initExpressions:function(t){var n=0,d=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){n+=1},t.renderer.globalData.popExpression=function(){(n-=1)==0&&function(){var r,m=d.length;for(r=0;r<m;r+=1)d[r].release();d.length=0}()},t.renderer.globalData.registerExpressionProperty=function(r){d.indexOf(r)===-1&&d.push(r)}}};return i.resetFrame=ExpressionManager.resetFrame,i}(),MaskManagerInterface=function(){function i(t,n){this._mask=t,this._data=n}return Object.defineProperty(i.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(i.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var n,d=createSizedArray(t.viewData.length),r=t.viewData.length;for(n=0;n<r;n+=1)d[n]=new i(t.viewData[n],t.masksProperties[n]);return function(m){for(n=0;n<r;){if(t.masksProperties[n].nm===m)return d[n];n+=1}return null}}}(),ExpressionPropertyInterface=function(){var i={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(r,m,e){Object.defineProperty(r,"velocity",{get:function(){return m.getVelocityAtTime(m.comp.currentFrame)}}),r.numKeys=m.keyframes?m.keyframes.length:0,r.key=function(u){if(!r.numKeys)return 0;var g="";g="s"in m.keyframes[u-1]?m.keyframes[u-1].s:"e"in m.keyframes[u-2]?m.keyframes[u-2].e:m.keyframes[u-2].s;var c=e==="unidimensional"?new Number(g):Object.assign({},g);return c.time=m.keyframes[u-1].t/m.elem.comp.globalData.frameRate,c.value=e==="unidimensional"?g[0]:g,c},r.valueAtTime=m.getValueAtTime,r.speedAtTime=m.getSpeedAtTime,r.velocityAtTime=m.getVelocityAtTime,r.propertyGroup=m.propertyGroup}function d(){return i}return function(r){return r?r.propType==="unidimensional"?function(m){m&&"pv"in m||(m=i);var e=1/m.mult,u=m.pv*e,g=new Number(u);return g.value=u,n(g,m,"unidimensional"),function(){return m.k&&m.getValue(),u=m.v*e,g.value!==u&&((g=new Number(u)).value=u,n(g,m,"unidimensional")),g}}(r):function(m){m&&"pv"in m||(m=t);var e=1/m.mult,u=m.data&&m.data.l||m.pv.length,g=createTypedArray("float32",u),c=createTypedArray("float32",u);return g.value=c,n(g,m,"multidimensional"),function(){m.k&&m.getValue();for(var s=0;s<u;s+=1)c[s]=m.v[s]*e,g[s]=c[s];return g}}(r):d}}(),TransformExpressionInterface=function(i){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var n,d,r,m;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(i.r||i.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(i.rz||i.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(i.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(i.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(i.s)}),i.p?m=ExpressionPropertyInterface(i.p):(n=ExpressionPropertyInterface(i.px),d=ExpressionPropertyInterface(i.py),i.pz&&(r=ExpressionPropertyInterface(i.pz))),Object.defineProperty(t,"position",{get:function(){return i.p?m():[n(),d(),r?r():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(i.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(i.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(i.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(i.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(i.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(i.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(i.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(i.or)}),t},LayerExpressionInterface=function(){function i(c){var s=new Matrix;return c!==void 0?this._elem.finalTransform.mProp.getValueAtTime(c).clone(s):this._elem.finalTransform.mProp.applyToMatrix(s),s}function t(c,s){var o=this.getMatrix(s);return o.props[12]=0,o.props[13]=0,o.props[14]=0,this.applyPoint(o,c)}function n(c,s){var o=this.getMatrix(s);return this.applyPoint(o,c)}function d(c,s){var o=this.getMatrix(s);return o.props[12]=0,o.props[13]=0,o.props[14]=0,this.invertPoint(o,c)}function r(c,s){var o=this.getMatrix(s);return this.invertPoint(o,c)}function m(c,s){if(this._elem.hierarchy&&this._elem.hierarchy.length){var o,a=this._elem.hierarchy.length;for(o=0;o<a;o+=1)this._elem.hierarchy[o].finalTransform.mProp.applyToMatrix(c)}return c.applyToPointArray(s[0],s[1],s[2]||0)}function e(c,s){if(this._elem.hierarchy&&this._elem.hierarchy.length){var o,a=this._elem.hierarchy.length;for(o=0;o<a;o+=1)this._elem.hierarchy[o].finalTransform.mProp.applyToMatrix(c)}return c.inversePoint(s)}function u(c){var s=new Matrix;if(s.reset(),this._elem.finalTransform.mProp.applyToMatrix(s),this._elem.hierarchy&&this._elem.hierarchy.length){var o,a=this._elem.hierarchy.length;for(o=0;o<a;o+=1)this._elem.hierarchy[o].finalTransform.mProp.applyToMatrix(s);return s.inversePoint(c)}return s.inversePoint(c)}function g(){return[1,1,1,1]}return function(c){var s;function o(l){switch(l){case"ADBE Root Vectors Group":case"Contents":case 2:return o.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return s;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return o.effect;case"ADBE Text Properties":return o.textInterface;default:return null}}o.getMatrix=i,o.invertPoint=e,o.applyPoint=m,o.toWorld=n,o.toWorldVec=t,o.fromWorld=r,o.fromWorldVec=d,o.toComp=n,o.fromComp=u,o.sampleImage=g,o.sourceRectAtTime=c.sourceRectAtTime.bind(c),o._elem=c;var a=getDescriptor(s=TransformExpressionInterface(c.finalTransform.mProp),"anchorPoint");return Object.defineProperties(o,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(s,"rotation"),scale:getDescriptor(s,"scale"),position:getDescriptor(s,"position"),opacity:getDescriptor(s,"opacity"),anchorPoint:a,anchor_point:a,transform:{get:function(){return s}},active:{get:function(){return c.isInRange}}}),o.startTime=c.data.st,o.index=c.data.ind,o.source=c.data.refId,o.height=c.data.ty===0?c.data.h:100,o.width=c.data.ty===0?c.data.w:100,o.inPoint=c.data.ip/c.comp.globalData.frameRate,o.outPoint=c.data.op/c.comp.globalData.frameRate,o._name=c.data.nm,o.registerMaskInterface=function(l){o.mask=new MaskManagerInterface(l,c)},o.registerEffectsInterface=function(l){o.effect=l},o}}(),propertyGroupFactory=function(i,t){return function(n){return(n=n===void 0?1:n)<=0?i:t(n-1)}},PropertyInterface=function(i,t){var n={_name:i};return function(d){return(d=d===void 0?1:d)<=0?n:t(d-1)}},EffectsExpressionInterface=function(){var i={createEffectsInterface:function(d,r){if(d.effectsManager){var m,e=[],u=d.data.ef,g=d.effectsManager.effectElements.length;for(m=0;m<g;m+=1)e.push(t(u[m],d.effectsManager.effectElements[m],r,d));var c=d.data.ef||[],s=function(o){for(m=0,g=c.length;m<g;){if(o===c[m].nm||o===c[m].mn||o===c[m].ix)return e[m];m+=1}return null};return Object.defineProperty(s,"numProperties",{get:function(){return c.length}}),s}return null}};function t(d,r,m,e){function u(a){for(var l=d.ef,p=0,h=l.length;p<h;){if(a===l[p].nm||a===l[p].mn||a===l[p].ix)return l[p].ty===5?s[p]:s[p]();p+=1}throw new Error}var g,c=propertyGroupFactory(u,m),s=[],o=d.ef.length;for(g=0;g<o;g+=1)d.ef[g].ty===5?s.push(t(d.ef[g],r.effectElements[g],r.effectElements[g].propertyGroup,e)):s.push(n(r.effectElements[g],d.ef[g].ty,e,c));return d.mn==="ADBE Color Control"&&Object.defineProperty(u,"color",{get:function(){return s[0]()}}),Object.defineProperties(u,{numProperties:{get:function(){return d.np}},_name:{value:d.nm},propertyGroup:{value:c}}),u.enabled=d.en!==0,u.active=u.enabled,u}function n(d,r,m,e){var u=ExpressionPropertyInterface(d.p);return d.p.setGroupProperty&&d.p.setGroupProperty(PropertyInterface("",e)),function(){return r===10?m.comp.compInterface(d.p.v):u()}}return i}(),ShapePathInterface=function(i,t,n){var d=t.sh;function r(e){return e==="Shape"||e==="shape"||e==="Path"||e==="path"||e==="ADBE Vector Shape"||e===2?r.path:null}var m=propertyGroupFactory(r,n);return d.setGroupProperty(PropertyInterface("Path",m)),Object.defineProperties(r,{path:{get:function(){return d.k&&d.getValue(),d}},shape:{get:function(){return d.k&&d.getValue(),d}},_name:{value:i.nm},ix:{value:i.ix},propertyIndex:{value:i.ix},mn:{value:i.mn},propertyGroup:{value:n}}),r},ShapeExpressionInterface=function(){function i(a,l,p){var h,f=[],v=a?a.length:0;for(h=0;h<v;h+=1)a[h].ty==="gr"?f.push(t(a[h],l[h],p)):a[h].ty==="fl"?f.push(n(a[h],l[h],p)):a[h].ty==="st"?f.push(r(a[h],l[h],p)):a[h].ty==="tm"?f.push(m(a[h],l[h],p)):a[h].ty==="tr"||(a[h].ty==="el"?f.push(u(a[h],l[h],p)):a[h].ty==="sr"?f.push(g(a[h],l[h],p)):a[h].ty==="sh"?f.push(ShapePathInterface(a[h],l[h],p)):a[h].ty==="rc"?f.push(c(a[h],l[h],p)):a[h].ty==="rd"?f.push(s(a[h],l[h],p)):a[h].ty==="rp"?f.push(o(a[h],l[h],p)):a[h].ty==="gf"?f.push(d(a[h],l[h],p)):f.push((a[h],l[h],function(){return null})));return f}function t(a,l,p){var h=function(y){switch(y){case"ADBE Vectors Group":case"Contents":case 2:return h.content;default:return h.transform}};h.propertyGroup=propertyGroupFactory(h,p);var f=function(y,x,S){var E,b=function(P){for(var C=0,w=E.length;C<w;){if(E[C]._name===P||E[C].mn===P||E[C].propertyIndex===P||E[C].ix===P||E[C].ind===P)return E[C];C+=1}return typeof P=="number"?E[P-1]:null};b.propertyGroup=propertyGroupFactory(b,S),E=i(y.it,x.it,b.propertyGroup),b.numProperties=E.length;var T=e(y.it[y.it.length-1],x.it[x.it.length-1],b.propertyGroup);return b.transform=T,b.propertyIndex=y.cix,b._name=y.nm,b}(a,l,h.propertyGroup),v=e(a.it[a.it.length-1],l.it[l.it.length-1],h.propertyGroup);return h.content=f,h.transform=v,Object.defineProperty(h,"_name",{get:function(){return a.nm}}),h.numProperties=a.np,h.propertyIndex=a.ix,h.nm=a.nm,h.mn=a.mn,h}function n(a,l,p){function h(f){return f==="Color"||f==="color"?h.color:f==="Opacity"||f==="opacity"?h.opacity:null}return Object.defineProperties(h,{color:{get:ExpressionPropertyInterface(l.c)},opacity:{get:ExpressionPropertyInterface(l.o)},_name:{value:a.nm},mn:{value:a.mn}}),l.c.setGroupProperty(PropertyInterface("Color",p)),l.o.setGroupProperty(PropertyInterface("Opacity",p)),h}function d(a,l,p){function h(f){return f==="Start Point"||f==="start point"?h.startPoint:f==="End Point"||f==="end point"?h.endPoint:f==="Opacity"||f==="opacity"?h.opacity:null}return Object.defineProperties(h,{startPoint:{get:ExpressionPropertyInterface(l.s)},endPoint:{get:ExpressionPropertyInterface(l.e)},opacity:{get:ExpressionPropertyInterface(l.o)},type:{get:function(){return"a"}},_name:{value:a.nm},mn:{value:a.mn}}),l.s.setGroupProperty(PropertyInterface("Start Point",p)),l.e.setGroupProperty(PropertyInterface("End Point",p)),l.o.setGroupProperty(PropertyInterface("Opacity",p)),h}function r(a,l,p){var h,f=propertyGroupFactory(E,p),v=propertyGroupFactory(S,f);function y(b){Object.defineProperty(S,a.d[b].nm,{get:ExpressionPropertyInterface(l.d.dataProps[b].p)})}var x=a.d?a.d.length:0,S={};for(h=0;h<x;h+=1)y(h),l.d.dataProps[h].p.setGroupProperty(v);function E(b){return b==="Color"||b==="color"?E.color:b==="Opacity"||b==="opacity"?E.opacity:b==="Stroke Width"||b==="stroke width"?E.strokeWidth:null}return Object.defineProperties(E,{color:{get:ExpressionPropertyInterface(l.c)},opacity:{get:ExpressionPropertyInterface(l.o)},strokeWidth:{get:ExpressionPropertyInterface(l.w)},dash:{get:function(){return S}},_name:{value:a.nm},mn:{value:a.mn}}),l.c.setGroupProperty(PropertyInterface("Color",f)),l.o.setGroupProperty(PropertyInterface("Opacity",f)),l.w.setGroupProperty(PropertyInterface("Stroke Width",f)),E}function m(a,l,p){function h(v){return v===a.e.ix||v==="End"||v==="end"?h.end:v===a.s.ix?h.start:v===a.o.ix?h.offset:null}var f=propertyGroupFactory(h,p);return h.propertyIndex=a.ix,l.s.setGroupProperty(PropertyInterface("Start",f)),l.e.setGroupProperty(PropertyInterface("End",f)),l.o.setGroupProperty(PropertyInterface("Offset",f)),h.propertyIndex=a.ix,h.propertyGroup=p,Object.defineProperties(h,{start:{get:ExpressionPropertyInterface(l.s)},end:{get:ExpressionPropertyInterface(l.e)},offset:{get:ExpressionPropertyInterface(l.o)},_name:{value:a.nm}}),h.mn=a.mn,h}function e(a,l,p){function h(v){return a.a.ix===v||v==="Anchor Point"?h.anchorPoint:a.o.ix===v||v==="Opacity"?h.opacity:a.p.ix===v||v==="Position"?h.position:a.r.ix===v||v==="Rotation"||v==="ADBE Vector Rotation"?h.rotation:a.s.ix===v||v==="Scale"?h.scale:a.sk&&a.sk.ix===v||v==="Skew"?h.skew:a.sa&&a.sa.ix===v||v==="Skew Axis"?h.skewAxis:null}var f=propertyGroupFactory(h,p);return l.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",f)),l.transform.mProps.p.setGroupProperty(PropertyInterface("Position",f)),l.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",f)),l.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",f)),l.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",f)),l.transform.mProps.sk&&(l.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",f)),l.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",f))),l.transform.op.setGroupProperty(PropertyInterface("Opacity",f)),Object.defineProperties(h,{opacity:{get:ExpressionPropertyInterface(l.transform.mProps.o)},position:{get:ExpressionPropertyInterface(l.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(l.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(l.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(l.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(l.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(l.transform.mProps.sa)},_name:{value:a.nm}}),h.ty="tr",h.mn=a.mn,h.propertyGroup=p,h}function u(a,l,p){function h(y){return a.p.ix===y?h.position:a.s.ix===y?h.size:null}var f=propertyGroupFactory(h,p);h.propertyIndex=a.ix;var v=l.sh.ty==="tm"?l.sh.prop:l.sh;return v.s.setGroupProperty(PropertyInterface("Size",f)),v.p.setGroupProperty(PropertyInterface("Position",f)),Object.defineProperties(h,{size:{get:ExpressionPropertyInterface(v.s)},position:{get:ExpressionPropertyInterface(v.p)},_name:{value:a.nm}}),h.mn=a.mn,h}function g(a,l,p){function h(y){return a.p.ix===y?h.position:a.r.ix===y?h.rotation:a.pt.ix===y?h.points:a.or.ix===y||y==="ADBE Vector Star Outer Radius"?h.outerRadius:a.os.ix===y?h.outerRoundness:!a.ir||a.ir.ix!==y&&y!=="ADBE Vector Star Inner Radius"?a.is&&a.is.ix===y?h.innerRoundness:null:h.innerRadius}var f=propertyGroupFactory(h,p),v=l.sh.ty==="tm"?l.sh.prop:l.sh;return h.propertyIndex=a.ix,v.or.setGroupProperty(PropertyInterface("Outer Radius",f)),v.os.setGroupProperty(PropertyInterface("Outer Roundness",f)),v.pt.setGroupProperty(PropertyInterface("Points",f)),v.p.setGroupProperty(PropertyInterface("Position",f)),v.r.setGroupProperty(PropertyInterface("Rotation",f)),a.ir&&(v.ir.setGroupProperty(PropertyInterface("Inner Radius",f)),v.is.setGroupProperty(PropertyInterface("Inner Roundness",f))),Object.defineProperties(h,{position:{get:ExpressionPropertyInterface(v.p)},rotation:{get:ExpressionPropertyInterface(v.r)},points:{get:ExpressionPropertyInterface(v.pt)},outerRadius:{get:ExpressionPropertyInterface(v.or)},outerRoundness:{get:ExpressionPropertyInterface(v.os)},innerRadius:{get:ExpressionPropertyInterface(v.ir)},innerRoundness:{get:ExpressionPropertyInterface(v.is)},_name:{value:a.nm}}),h.mn=a.mn,h}function c(a,l,p){function h(y){return a.p.ix===y?h.position:a.r.ix===y?h.roundness:a.s.ix===y||y==="Size"||y==="ADBE Vector Rect Size"?h.size:null}var f=propertyGroupFactory(h,p),v=l.sh.ty==="tm"?l.sh.prop:l.sh;return h.propertyIndex=a.ix,v.p.setGroupProperty(PropertyInterface("Position",f)),v.s.setGroupProperty(PropertyInterface("Size",f)),v.r.setGroupProperty(PropertyInterface("Rotation",f)),Object.defineProperties(h,{position:{get:ExpressionPropertyInterface(v.p)},roundness:{get:ExpressionPropertyInterface(v.r)},size:{get:ExpressionPropertyInterface(v.s)},_name:{value:a.nm}}),h.mn=a.mn,h}function s(a,l,p){function h(y){return a.r.ix===y||y==="Round Corners 1"?h.radius:null}var f=propertyGroupFactory(h,p),v=l;return h.propertyIndex=a.ix,v.rd.setGroupProperty(PropertyInterface("Radius",f)),Object.defineProperties(h,{radius:{get:ExpressionPropertyInterface(v.rd)},_name:{value:a.nm}}),h.mn=a.mn,h}function o(a,l,p){function h(y){return a.c.ix===y||y==="Copies"?h.copies:a.o.ix===y||y==="Offset"?h.offset:null}var f=propertyGroupFactory(h,p),v=l;return h.propertyIndex=a.ix,v.c.setGroupProperty(PropertyInterface("Copies",f)),v.o.setGroupProperty(PropertyInterface("Offset",f)),Object.defineProperties(h,{copies:{get:ExpressionPropertyInterface(v.c)},offset:{get:ExpressionPropertyInterface(v.o)},_name:{value:a.nm}}),h.mn=a.mn,h}return function(a,l,p){var h;function f(v){if(typeof v=="number")return(v=v===void 0?1:v)===0?p:h[v-1];for(var y=0,x=h.length;y<x;){if(h[y]._name===v)return h[y];y+=1}return null}return f.propertyGroup=propertyGroupFactory(f,function(){return p}),h=i(a,l,f.propertyGroup),f.numProperties=h.length,f._name="Contents",f}}(),TextExpressionInterface=function(i){var t;function n(d){return d==="ADBE Text Document"?n.sourceText:null}return Object.defineProperty(n,"sourceText",{get:function(){i.textProperty.getValue();var d=i.textProperty.currentData.t;return t&&d===t.value||((t=new String(d)).value=d||new String(d),Object.defineProperty(t,"style",{get:function(){return{fillColor:i.textProperty.currentData.fc}}})),t}}),n};function _typeof(i){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(i)}var FootageInterface=(dataInterfaceFactory=function(i){function t(n){return n==="Outline"?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(n){var d="",r=n.getFootageData();function m(e){if(r[e])return d=e,_typeof(r=r[e])==="object"?m:r;var u=e.indexOf(d);if(u!==-1){var g=parseInt(e.substr(u+d.length),10);return _typeof(r=r[g])==="object"?m:r}return""}return function(){return d="",r=n.getFootageData(),m}}(i),t},function(i){function t(n){return n==="Data"?t.dataInterface:null}return t._name="Data",t.dataInterface=dataInterfaceFactory(i),t}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(i){return interfaces[i]||null}var expressionHelpers={searchExpressions:function(i,t,n){t.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(i,t,n).bind(n)))},getSpeedAtTime:function(i){var t=this.getValueAtTime(i),n=this.getValueAtTime(i+-.01),d=0;if(t.length){var r;for(r=0;r<t.length;r+=1)d+=Math.pow(n[r]-t[r],2);d=100*Math.sqrt(d)}else d=0;return d},getVelocityAtTime:function(i){if(this.vel!==void 0)return this.vel;var t,n,d=-.001,r=this.getValueAtTime(i),m=this.getValueAtTime(i+d);if(r.length)for(t=createTypedArray("float32",r.length),n=0;n<r.length;n+=1)t[n]=(m[n]-r[n])/d;else t=(m-r)/d;return t},getValueAtTime:function(i){return i*=this.elem.globalData.frameRate,(i-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<i?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(i,this._cachingAtTime),this._cachingAtTime.lastFrame=i),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(i){this.propertyGroup=i}};function addPropertyDecorator(){function i(o,a,l){if(!this.k||!this.keyframes)return this.pv;o=o?o.toLowerCase():"";var p,h,f,v,y,x=this.comp.renderedFrame,S=this.keyframes,E=S[S.length-1].t;if(x<=E)return this.pv;if(l?h=E-(p=a?Math.abs(E-this.elem.comp.globalData.frameRate*a):Math.max(0,E-this.elem.data.ip)):((!a||a>S.length-1)&&(a=S.length-1),p=E-(h=S[S.length-1-a].t)),o==="pingpong"){if(Math.floor((x-h)/p)%2!=0)return this.getValueAtTime((p-(x-h)%p+h)/this.comp.globalData.frameRate,0)}else{if(o==="offset"){var b=this.getValueAtTime(h/this.comp.globalData.frameRate,0),T=this.getValueAtTime(E/this.comp.globalData.frameRate,0),P=this.getValueAtTime(((x-h)%p+h)/this.comp.globalData.frameRate,0),C=Math.floor((x-h)/p);if(this.pv.length){for(v=(y=new Array(b.length)).length,f=0;f<v;f+=1)y[f]=(T[f]-b[f])*C+P[f];return y}return(T-b)*C+P}if(o==="continue"){var w=this.getValueAtTime(E/this.comp.globalData.frameRate,0),A=this.getValueAtTime((E-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(v=(y=new Array(w.length)).length,f=0;f<v;f+=1)y[f]=w[f]+(w[f]-A[f])*((x-E)/this.comp.globalData.frameRate)/5e-4;return y}return w+(x-E)/.001*(w-A)}}return this.getValueAtTime(((x-h)%p+h)/this.comp.globalData.frameRate,0)}function t(o,a,l){if(!this.k)return this.pv;o=o?o.toLowerCase():"";var p,h,f,v,y,x=this.comp.renderedFrame,S=this.keyframes,E=S[0].t;if(x>=E)return this.pv;if(l?h=E+(p=a?Math.abs(this.elem.comp.globalData.frameRate*a):Math.max(0,this.elem.data.op-E)):((!a||a>S.length-1)&&(a=S.length-1),p=(h=S[a].t)-E),o==="pingpong"){if(Math.floor((E-x)/p)%2==0)return this.getValueAtTime(((E-x)%p+E)/this.comp.globalData.frameRate,0)}else{if(o==="offset"){var b=this.getValueAtTime(E/this.comp.globalData.frameRate,0),T=this.getValueAtTime(h/this.comp.globalData.frameRate,0),P=this.getValueAtTime((p-(E-x)%p+E)/this.comp.globalData.frameRate,0),C=Math.floor((E-x)/p)+1;if(this.pv.length){for(v=(y=new Array(b.length)).length,f=0;f<v;f+=1)y[f]=P[f]-(T[f]-b[f])*C;return y}return P-(T-b)*C}if(o==="continue"){var w=this.getValueAtTime(E/this.comp.globalData.frameRate,0),A=this.getValueAtTime((E+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(v=(y=new Array(w.length)).length,f=0;f<v;f+=1)y[f]=w[f]+(w[f]-A[f])*(E-x)/.001;return y}return w+(w-A)*(E-x)/.001}}return this.getValueAtTime((p-((E-x)%p+E))/this.comp.globalData.frameRate,0)}function n(o,a){if(!this.k)return this.pv;if(o=.5*(o||.4),(a=Math.floor(a||5))<=1)return this.pv;var l,p,h=this.comp.renderedFrame/this.comp.globalData.frameRate,f=h-o,v=a>1?(h+o-f)/(a-1):1,y=0,x=0;for(l=this.pv.length?createTypedArray("float32",this.pv.length):0;y<a;){if(p=this.getValueAtTime(f+y*v),this.pv.length)for(x=0;x<this.pv.length;x+=1)l[x]+=p[x];else l+=p;y+=1}if(this.pv.length)for(x=0;x<this.pv.length;x+=1)l[x]/=a;else l/=a;return l}function d(o){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var a=this._transformCachingAtTime.v;if(a.cloneFromProps(this.pre.props),this.appliedTransformations<1){var l=this.a.getValueAtTime(o);a.translate(-l[0]*this.a.mult,-l[1]*this.a.mult,l[2]*this.a.mult)}if(this.appliedTransformations<2){var p=this.s.getValueAtTime(o);a.scale(p[0]*this.s.mult,p[1]*this.s.mult,p[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var h=this.sk.getValueAtTime(o),f=this.sa.getValueAtTime(o);a.skewFromAxis(-h*this.sk.mult,f*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var v=this.r.getValueAtTime(o);a.rotate(-v*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var y=this.rz.getValueAtTime(o),x=this.ry.getValueAtTime(o),S=this.rx.getValueAtTime(o),E=this.or.getValueAtTime(o);a.rotateZ(-y*this.rz.mult).rotateY(x*this.ry.mult).rotateX(S*this.rx.mult).rotateZ(-E[2]*this.or.mult).rotateY(E[1]*this.or.mult).rotateX(E[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var b=this.px.getValueAtTime(o),T=this.py.getValueAtTime(o);if(this.data.p.z){var P=this.pz.getValueAtTime(o);a.translate(b*this.px.mult,T*this.py.mult,-P*this.pz.mult)}else a.translate(b*this.px.mult,T*this.py.mult,0)}else{var C=this.p.getValueAtTime(o);a.translate(C[0]*this.p.mult,C[1]*this.p.mult,-C[2]*this.p.mult)}return a}function r(){return this.v.clone(new Matrix)}var m=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(o,a,l){var p=m(o,a,l);return p.dynamicProperties.length?p.getValueAtTime=d.bind(p):p.getValueAtTime=r.bind(p),p.setGroupProperty=expressionHelpers.setGroupProperty,p};var e=PropertyFactory.getProp;PropertyFactory.getProp=function(o,a,l,p,h){var f=e(o,a,l,p,h);f.kf?f.getValueAtTime=expressionHelpers.getValueAtTime.bind(f):f.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(f),f.setGroupProperty=expressionHelpers.setGroupProperty,f.loopOut=i,f.loopIn=t,f.smooth=n,f.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(f),f.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(f),f.numKeys=a.a===1?a.k.length:0,f.propertyIndex=a.ix;var v=0;return l!==0&&(v=createTypedArray("float32",a.a===1?a.k[0].s.length:a.k.length)),f._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:v},expressionHelpers.searchExpressions(o,a,f),f.k&&h.addDynamicProperty(f),f};var u=ShapePropertyFactory.getConstructorFunction(),g=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(o,a){this.k&&this.getValue();var l,p=this.v;a!==void 0&&(p=this.getValueAtTime(a,0));var h=p._length,f=p[o],v=p.v,y=createSizedArray(h);for(l=0;l<h;l+=1)y[l]=o==="i"||o==="o"?[f[l][0]-v[l][0],f[l][1]-v[l][1]]:[f[l][0],f[l][1]];return y},points:function(o){return this.vertices("v",o)},inTangents:function(o){return this.vertices("i",o)},outTangents:function(o){return this.vertices("o",o)},isClosed:function(){return this.v.c},pointOnPath:function(o,a){var l=this.v;a!==void 0&&(l=this.getValueAtTime(a,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(l));for(var p,h=this._segmentsLength,f=h.lengths,v=h.totalLength*o,y=0,x=f.length,S=0;y<x;){if(S+f[y].addedLength>v){var E=y,b=l.c&&y===x-1?0:y+1,T=(v-S)/f[y].addedLength;p=bez.getPointInSegment(l.v[E],l.v[b],l.o[E],l.i[b],T,f[y]);break}S+=f[y].addedLength,y+=1}return p||(p=l.c?[l.v[0][0],l.v[0][1]]:[l.v[l._length-1][0],l.v[l._length-1][1]]),p},vectorOnPath:function(o,a,l){o==1?o=this.v.c:o==0&&(o=.999);var p=this.pointOnPath(o,a),h=this.pointOnPath(o+.001,a),f=h[0]-p[0],v=h[1]-p[1],y=Math.sqrt(Math.pow(f,2)+Math.pow(v,2));return y===0?[0,0]:l==="tangent"?[f/y,v/y]:[-v/y,f/y]},tangentOnPath:function(o,a){return this.vectorOnPath(o,a,"tangent")},normalOnPath:function(o,a){return this.vectorOnPath(o,a,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],u),extendPrototype([c],g),g.prototype.getValueAtTime=function(o){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),o*=this.elem.globalData.frameRate,(o-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<o?this._caching.lastIndex:0,this._cachingAtTime.lastTime=o,this.interpolateShape(o,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},g.prototype.initiateExpression=ExpressionManager.initiateExpression;var s=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(o,a,l,p,h){var f=s(o,a,l,p,h);return f.propertyIndex=a.ix,f.lock=!1,l===3?expressionHelpers.searchExpressions(o,a.pt,f):l===4&&expressionHelpers.searchExpressions(o,a.ks,f),f.k&&o.addDynamicProperty(f),f}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(i,t){var n=this.calculateExpression(t);if(i.t!==n){var d={};return this.copyData(d,i),d.t=n.toString(),d.__complete=!1,d}return i},TextProperty.prototype.searchProperty=function(){var i=this.searchKeyframes(),t=this.searchExpressions();return this.kf=i||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(i,t){var n,d,r=createNS("feMerge");for(r.setAttribute("result",i),d=0;d<t.length;d+=1)(n=createNS("feMergeNode")).setAttribute("in",t[d]),r.appendChild(n),r.appendChild(n);return r}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(i,t,n,d,r){this.filterManager=t;var m=createNS("feColorMatrix");m.setAttribute("type","matrix"),m.setAttribute("color-interpolation-filters","linearRGB"),m.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=m,m.setAttribute("result",d+"_tint_1"),i.appendChild(m),(m=createNS("feColorMatrix")).setAttribute("type","matrix"),m.setAttribute("color-interpolation-filters","sRGB"),m.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),m.setAttribute("result",d+"_tint_2"),i.appendChild(m),this.matrixFilter=m;var e=this.createMergeNode(d,[r,d+"_tint_1",d+"_tint_2"]);i.appendChild(e)}function SVGFillFilter(i,t,n,d){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result",d),i.appendChild(r),this.matrixFilter=r}function SVGStrokeEffect(i,t,n){this.initialized=!1,this.filterManager=t,this.elem=n,this.paths=[]}function SVGTritoneFilter(i,t,n,d){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.appendChild(r);var m=createNS("feComponentTransfer");m.setAttribute("color-interpolation-filters","sRGB"),m.setAttribute("result",d),this.matrixFilter=m;var e=createNS("feFuncR");e.setAttribute("type","table"),m.appendChild(e),this.feFuncR=e;var u=createNS("feFuncG");u.setAttribute("type","table"),m.appendChild(u),this.feFuncG=u;var g=createNS("feFuncB");g.setAttribute("type","table"),m.appendChild(g),this.feFuncB=g,i.appendChild(m)}function SVGProLevelsFilter(i,t,n,d){this.filterManager=t;var r=this.filterManager.effectElements,m=createNS("feComponentTransfer");(r[10].p.k||r[10].p.v!==0||r[11].p.k||r[11].p.v!==1||r[12].p.k||r[12].p.v!==1||r[13].p.k||r[13].p.v!==0||r[14].p.k||r[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",m)),(r[17].p.k||r[17].p.v!==0||r[18].p.k||r[18].p.v!==1||r[19].p.k||r[19].p.v!==1||r[20].p.k||r[20].p.v!==0||r[21].p.k||r[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",m)),(r[24].p.k||r[24].p.v!==0||r[25].p.k||r[25].p.v!==1||r[26].p.k||r[26].p.v!==1||r[27].p.k||r[27].p.v!==0||r[28].p.k||r[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",m)),(r[31].p.k||r[31].p.v!==0||r[32].p.k||r[32].p.v!==1||r[33].p.k||r[33].p.v!==1||r[34].p.k||r[34].p.v!==0||r[35].p.k||r[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",m)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(m.setAttribute("color-interpolation-filters","sRGB"),i.appendChild(m)),(r[3].p.k||r[3].p.v!==0||r[4].p.k||r[4].p.v!==1||r[5].p.k||r[5].p.v!==1||r[6].p.k||r[6].p.v!==0||r[7].p.k||r[7].p.v!==1)&&((m=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),m.setAttribute("result",d),i.appendChild(m),this.feFuncRComposed=this.createFeFunc("feFuncR",m),this.feFuncGComposed=this.createFeFunc("feFuncG",m),this.feFuncBComposed=this.createFeFunc("feFuncB",m))}function SVGDropShadowEffect(i,t,n,d,r){var m=t.container.globalData.renderConfig.filterSize,e=t.data.fs||m;i.setAttribute("x",e.x||m.x),i.setAttribute("y",e.y||m.y),i.setAttribute("width",e.width||m.width),i.setAttribute("height",e.height||m.height),this.filterManager=t;var u=createNS("feGaussianBlur");u.setAttribute("in","SourceAlpha"),u.setAttribute("result",d+"_drop_shadow_1"),u.setAttribute("stdDeviation","0"),this.feGaussianBlur=u,i.appendChild(u);var g=createNS("feOffset");g.setAttribute("dx","25"),g.setAttribute("dy","0"),g.setAttribute("in",d+"_drop_shadow_1"),g.setAttribute("result",d+"_drop_shadow_2"),this.feOffset=g,i.appendChild(g);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",d+"_drop_shadow_3"),this.feFlood=c,i.appendChild(c);var s=createNS("feComposite");s.setAttribute("in",d+"_drop_shadow_3"),s.setAttribute("in2",d+"_drop_shadow_2"),s.setAttribute("operator","in"),s.setAttribute("result",d+"_drop_shadow_4"),i.appendChild(s);var o=this.createMergeNode(d,[d+"_drop_shadow_4",r]);i.appendChild(o)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,d=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+d+" 0"),this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var i,t,n,d,r=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(this.filterManager.effectElements[1].p.v===1?(d=this.elem.maskManager.masksProperties.length,n=0):d=1+(n=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<d;n+=1)i=createNS("path"),t.appendChild(i),this.paths.push({p:i,m:n});if(this.filterManager.effectElements[10].p.v===3){var m=createNS("mask"),e=createElementID();m.setAttribute("id",e),m.setAttribute("mask-type","alpha"),m.appendChild(t),this.elem.globalData.defs.appendChild(m);var u=createNS("g");for(u.setAttribute("mask","url("+getLocationHref()+"#"+e+")");r[0];)u.appendChild(r[0]);this.elem.layerElement.appendChild(u),this.masker=m,t.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(i){var t;this.initialized||this.initialize();var n,d,r=this.paths.length;for(t=0;t<r;t+=1)if(this.paths[t].m!==-1&&(n=this.elem.maskManager.viewData[this.paths[t].m],d=this.paths[t].p,(i||this.filterManager._mdf||n.prop._mdf)&&d.setAttribute("d",n.lastPath),i||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var m;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var e=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),u=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),g=d.getTotalLength();m="0 0 0 "+g*e+" ";var c,s=g*(u-e),o=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,a=Math.floor(s/o);for(c=0;c<a;c+=1)m+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";m+="0 "+10*g+" 0 0"}else m="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;d.setAttribute("stroke-dasharray",m)}if((i||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(i||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(i||this.filterManager.effectElements[3].p._mdf)){var l=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*l[0])+","+bmFloor(255*l[1])+","+bmFloor(255*l[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,d=this.filterManager.effectElements[2].p.v,r=d[0]+" "+n[0]+" "+t[0],m=d[1]+" "+n[1]+" "+t[1],e=d[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",m),this.feFuncB.setAttribute("tableValues",e)}},SVGProLevelsFilter.prototype.createFeFunc=function(i,t){var n=createNS(i);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(i,t,n,d,r){for(var m,e,u=0,g=Math.min(i,t),c=Math.max(i,t),s=Array.call(null,{length:256}),o=0,a=r-d,l=t-i;u<=256;)e=(m=u/256)<=g?l<0?r:d:m>=c?l<0?d:r:d+a*Math.pow((m-i)/l,1/n),s[o]=e,o+=1,u+=256/255;return s.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(i||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(i||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(i||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(i||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(i||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){if((i||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),i||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((i||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),i||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,d=(this.filterManager.effectElements[2].p.v-90)*degToRads,r=n*Math.cos(d),m=n*Math.sin(d);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",m)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(i,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=i,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGGaussianBlurEffect(i,t,n,d){i.setAttribute("x","-100%"),i.setAttribute("y","-100%"),i.setAttribute("width","300%"),i.setAttribute("height","300%"),this.filterManager=t;var r=createNS("feGaussianBlur");r.setAttribute("result",d),i.appendChild(r),this.feGaussianBlur=r}function TransformEffect(){}function SVGTransformEffect(i,t){this.init(t)}function CVTransformEffect(i){this.init(i)}return SVGMatte3Effect.prototype.findSymbol=function(i){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===i)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(i,t){var n=i.layerElement.parentNode;if(n){for(var d,r=n.children,m=0,e=r.length;m<e&&r[m]!==i.layerElement;)m+=1;m<=e-2&&(d=r[m+1]);var u=createNS("use");u.setAttribute("href","#"+t),d?n.insertBefore(u,d):n.appendChild(u)}},SVGMatte3Effect.prototype.setElementAsMask=function(i,t){if(!this.findSymbol(t)){var n=createElementID(),d=createNS("mask");d.setAttribute("id",t.layerId),d.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var r=i.globalData.defs;r.appendChild(d);var m=createNS("symbol");m.setAttribute("id",n),this.replaceInParent(t,n),m.appendChild(t.layerElement),r.appendChild(m);var e=createNS("use");e.setAttribute("href","#"+n),d.appendChild(e),t.data.hd=!1,t.show()}i.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var i=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,d=t.length;n<d;)t[n]&&t[n].data.ind===i&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(i){if(i||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,d=n==3?0:t,r=n==2?0:t;this.feGaussianBlur.setAttribute("stdDeviation",d+" "+r);var m=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",m)}},TransformEffect.prototype.init=function(i){this.effectsManager=i,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(i){if(this._opMdf=!1,this._mdf=!1,i||this.effectsManager._mdf){var t=this.effectsManager.effectElements,n=t[0].p.v,d=t[1].p.v,r=t[2].p.v===1,m=t[3].p.v,e=r?m:t[4].p.v,u=t[5].p.v,g=t[6].p.v,c=t[7].p.v;this.matrix.reset(),this.matrix.translate(-n[0],-n[1],n[2]),this.matrix.scale(.01*e,.01*m,1),this.matrix.rotate(-c*degToRads),this.matrix.skewFromAxis(-u*degToRads,(g+90)*degToRads),this.matrix.translate(d[0],d[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())})(bh,bh.exports);var $Q=bh.exports,PC,BF=CF(PC||(PC=yo([`
  * {
    box-sizing: border-box;
  }

  :host {
    --lottie-player-toolbar-height: 35px;
    --lottie-player-toolbar-background-color: transparent;
    --lottie-player-toolbar-icon-color: #999;
    --lottie-player-toolbar-icon-hover-color: #222;
    --lottie-player-toolbar-icon-active-color: #555;
    --lottie-player-seeker-track-color: #ccc;
    --lottie-player-seeker-thumb-color: rgba(0, 107, 120, 0.8);
    --lottie-player-seeker-display: block;

    display: block;
    width: 100%;
    height: 100%;
  }

  .main {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
  }

  .animation {
    width: 100%;
    height: 100%;
    display: flex;
  }
  .animation.controls {
    height: calc(100% - 35px);
  }

  .toolbar {
    display: flex;
    align-items: center;
    justify-items: center;
    background-color: var(--lottie-player-toolbar-background-color);
    margin: 0 5px;
    height: 35px;
  }

  .toolbar button {
    cursor: pointer;
    fill: var(--lottie-player-toolbar-icon-color);
    display: flex;
    background: none;
    border: 0;
    padding: 0;
    outline: none;
    height: 100%;
  }

  .toolbar button:hover {
    fill: var(--lottie-player-toolbar-icon-hover-color);
  }

  .toolbar button.active {
    fill: var(--lottie-player-toolbar-icon-active-color);
  }

  .toolbar button.active:hover {
    fill: var(--lottie-player-toolbar-icon-hover-color);
  }

  .toolbar button:focus {
    outline: 1px dotted var(--lottie-player-toolbar-icon-active-color);
  }

  .toolbar button svg {
  }

  .toolbar button.disabled svg {
    display: none;
  }

  .seeker {
    -webkit-appearance: none;
    width: 95%;
    outline: none;
    background-color: var(--lottie-player-toolbar-background-color);
    display: var(--lottie-player-seeker-display);
  }

  .seeker::-webkit-slider-runnable-track {
    width: 100%;
    height: 5px;
    cursor: pointer;
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-webkit-slider-thumb {
    height: 15px;
    width: 15px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
    -webkit-appearance: none;
    margin-top: -5px;
  }
  .seeker:focus::-webkit-slider-runnable-track {
    background: #999;
  }
  .seeker::-moz-range-track {
    width: 100%;
    height: 5px;
    cursor: pointer;
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-moz-range-thumb {
    height: 15px;
    width: 15px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
  }
  .seeker::-ms-track {
    width: 100%;
    height: 5px;
    cursor: pointer;
    background: transparent;
    border-color: transparent;
    color: transparent;
  }
  .seeker::-ms-fill-lower {
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-ms-fill-upper {
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-ms-thumb {
    border: 0;
    height: 15px;
    width: 15px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
  }
  .seeker:focus::-ms-fill-lower {
    background: var(--lottie-player-seeker-track-color);
  }
  .seeker:focus::-ms-fill-upper {
    background: var(--lottie-player-seeker-track-color);
  }

  .error {
    display: flex;
    justify-content: center;
    height: 100%;
    align-items: center;
  }
`]))),NF="2.0.3",kF="^5.12.2",wC,AC,IC,RC,MC,ee,Sh,ke;function VF(i){if(typeof i=="object")return i;try{return JSON.parse(i)}catch{return new URL(i,window.location.href).toString()}}function GF(i){return["v","ip","op","layers","fr","w","h"].every(t=>Object.prototype.hasOwnProperty.call(i,t))}function UF(i){return JC.apply(this,arguments)}function JC(){return(JC=zc(function*(i){if(typeof i!="string")throw new Error("The url value must be a string");var t;try{var n=new URL(i),d=yield fetch(n.toString());t=yield d.json()}catch{throw new Error("An error occurred while trying to load the Lottie file from URL")}return t})).apply(this,arguments)}(function(i){i.Destroyed="destroyed",i.Error="error",i.Frozen="frozen",i.Loading="loading",i.Paused="paused",i.Playing="playing",i.Stopped="stopped"})(ee||(ee={})),function(i){i.Bounce="bounce",i.Normal="normal"}(Sh||(Sh={})),function(i){i.Complete="complete",i.Destroyed="destroyed",i.Error="error",i.Frame="frame",i.Freeze="freeze",i.Load="load",i.Loop="loop",i.Pause="pause",i.Play="play",i.Ready="ready",i.Rendered="rendered",i.Stop="stop"}(ke||(ke={}));var de=class extends Us{constructor(){super(...arguments),this.autoplay=!1,this.background="transparent",this.controls=!1,this.currentState=ee.Loading,this.description="Lottie animation",this.direction=1,this.disableCheck=!1,this.disableShadowDOM=!1,this.hover=!1,this.intermission=1,this.loop=!1,this.mode=Sh.Normal,this.preserveAspectRatio="xMidYMid meet",this.renderer="svg",this.speed=1,this._io=void 0,this._counter=1}load(i){var t=this;return zc(function*(){var n={container:t.container,loop:!1,autoplay:!1,renderer:t.renderer,rendererSettings:Object.assign({preserveAspectRatio:t.preserveAspectRatio,clearCanvas:!1,progressiveLoad:!0,hideOnTransparent:!0},t.viewBoxSize&&{viewBoxSize:t.viewBoxSize})};try{var d=VF(i),r={},m=typeof d=="string"?"path":"animationData";t._lottie&&t._lottie.destroy(),t.webworkers&&bh.exports.useWebWorker(!0),t._lottie=bh.exports.loadAnimation(Object.assign(Object.assign({},n),{[m]:d})),t._attachEventListeners(),t.disableCheck||(m==="path"?(r=yield UF(d),m="animationData"):r=d,GF(r)||(t.currentState=ee.Error,t.dispatchEvent(new CustomEvent(ke.Error))))}catch{t.currentState=ee.Error,t.dispatchEvent(new CustomEvent(ke.Error))}})()}getLottie(){return this._lottie}getVersions(){return{lottieWebVersion:kF,lottiePlayerVersion:NF}}play(){this._lottie&&(this._lottie.play(),this.currentState=ee.Playing,this.dispatchEvent(new CustomEvent(ke.Play)))}pause(){this._lottie&&(this._lottie.pause(),this.currentState=ee.Paused,this.dispatchEvent(new CustomEvent(ke.Pause)))}stop(){this._lottie&&(this._counter=1,this._lottie.stop(),this.currentState=ee.Stopped,this.dispatchEvent(new CustomEvent(ke.Stop)))}destroy(){this._lottie&&(this._lottie.destroy(),this._lottie=null,this.currentState=ee.Destroyed,this.dispatchEvent(new CustomEvent(ke.Destroyed)),this.remove())}seek(i){if(this._lottie){var t=/^(\d+)(%?)$/.exec(i.toString());if(t){var n=t[2]==="%"?this._lottie.totalFrames*Number(t[1])/100:Number(t[1]);this.seeker=n,this.currentState===ee.Playing?this._lottie.goToAndPlay(n,!0):(this._lottie.goToAndStop(n,!0),this._lottie.pause())}}}snapshot(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];if(this.shadowRoot){var t=this.shadowRoot.querySelector(".animation svg"),n=new XMLSerializer().serializeToString(t);if(i){var d=document.createElement("a");d.href="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(n)),d.download="download_".concat(this.seeker,".svg"),document.body.appendChild(d),d.click(),document.body.removeChild(d)}return n}}setSpeed(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._lottie&&this._lottie.setSpeed(i)}setDirection(i){this._lottie&&this._lottie.setDirection(i)}setLooping(i){this._lottie&&(this.loop=i,this._lottie.loop=i)}togglePlay(){return this.currentState===ee.Playing?this.pause():this.play()}toggleLooping(){this.setLooping(!this.loop)}resize(){this._lottie&&this._lottie.resize()}static get styles(){return BF}disconnectedCallback(){this.isConnected||(this._io&&(this._io.disconnect(),this._io=void 0),document.removeEventListener("visibilitychange",()=>this._onVisibilityChange()),this.destroy())}render(){var i=this.controls?"main controls":"main",t=this.controls?"animation controls":"animation";return Lc(wC||(wC=yo([` <div
      id="animation-container"
      class=`,`
      lang="en"
      aria-label=`,`
      role="img"
    >
      <div
        id="animation"
        class=`,`
        style="background:`,`;"
      >
        `,`
      </div>
      `,`
    </div>`])),i,this.description,t,this.background,this.currentState===ee.Error?Lc(AC||(AC=yo(['<div class="error">\u26A0\uFE0F</div>']))):void 0,this.controls&&!this.disableShadowDOM?this.renderControls():void 0)}createRenderRoot(){return this.disableShadowDOM&&(this.style.display="block"),this.disableShadowDOM?this:super.createRenderRoot()}firstUpdated(){"IntersectionObserver"in window&&(this._io=new IntersectionObserver(i=>{i[0].isIntersecting?this.currentState===ee.Frozen&&this.play():this.currentState===ee.Playing&&this.freeze()}),this._io.observe(this.container)),document.hidden!==void 0&&document.addEventListener("visibilitychange",()=>this._onVisibilityChange()),this.src&&this.load(this.src),this.dispatchEvent(new CustomEvent(ke.Rendered))}renderControls(){var i=this.currentState===ee.Playing,t=this.currentState===ee.Paused,n=this.currentState===ee.Stopped;return Lc(IC||(IC=yo([`
      <div
        id="lottie-controls"
        aria-label="lottie-animation-controls"
        class="toolbar"
      >
        <button
          id="lottie-play-button"
          @click=`,`
          class=`,`
          style="align-items:center;"
          tabindex="0"
          aria-label="play-pause"
        >
          `,`
        </button>
        <button
          id="lottie-stop-button"
          @click=`,`
          class=`,`
          style="align-items:center;"
          tabindex="0"
          aria-label="stop"
        >
          <svg width="24" height="24" aria-hidden="true" focusable="false">
            <path d="M6 6h12v12H6V6z" />
          </svg>
        </button>
        <input
          id="lottie-seeker-input"
          class="seeker"
          type="range"
          min="0"
          step="1"
          max="100"
          .value=`,`
          @input=`,`
          @mousedown=`,`
          @mouseup=`,`
          aria-valuemin="1"
          aria-valuemax="100"
          role="slider"
          aria-valuenow=`,`
          tabindex="0"
          aria-label="lottie-seek-input"
        />
        <button
          id="lottie-loop-toggle"
          @click=`,`
          class=`,`
          style="align-items:center;"
          tabindex="0"
          aria-label="loop-toggle"
        >
          <svg width="24" height="24" aria-hidden="true" focusable="false">
            <path
              d="M17.016 17.016v-4.031h1.969v6h-12v3l-3.984-3.984 3.984-3.984v3h10.031zM6.984 6.984v4.031H5.015v-6h12v-3l3.984 3.984-3.984 3.984v-3H6.984z"
            />
          </svg>
        </button>
      </div>
    `])),this.togglePlay,i||t?"active":"",Lc(i?RC||(RC=yo([`<svg
                width="24"
                height="24"
                aria-hidden="true"
                focusable="false"
              >
                <path
                  d="M14.016 5.016H18v13.969h-3.984V5.016zM6 18.984V5.015h3.984v13.969H6z"
                />
              </svg>`])):MC||(MC=yo([`<svg
                width="24"
                height="24"
                aria-hidden="true"
                focusable="false"
              >
                <path d="M8.016 5.016L18.985 12 8.016 18.984V5.015z" />
              </svg>`]))),this.stop,n?"active":"",this.seeker,this._handleSeekChange,()=>{this._prevState=this.currentState,this.freeze()},()=>{this._prevState===ee.Playing&&this.play()},this.seeker,this.toggleLooping,this.loop?"active":"")}_onVisibilityChange(){document.hidden===!0&&this.currentState===ee.Playing?this.freeze():this.currentState===ee.Frozen&&this.play()}_handleSeekChange(i){if(this._lottie&&!isNaN(i.target.value)){var t=i.target.value/100*this._lottie.totalFrames;this.seek(t)}}_attachEventListeners(){this._lottie.addEventListener("enterFrame",()=>{this.seeker=this._lottie.currentFrame/this._lottie.totalFrames*100,this.dispatchEvent(new CustomEvent(ke.Frame,{detail:{frame:this._lottie.currentFrame,seeker:this.seeker}}))}),this._lottie.addEventListener("complete",()=>{if(this.currentState===ee.Playing){if((!this.loop||this.count&&this._counter>=this.count)&&(this.dispatchEvent(new CustomEvent(ke.Complete)),this.mode!==Sh.Bounce||this._lottie.currentFrame===0))return;this.mode===Sh.Bounce?(this.count&&(this._counter+=.5),setTimeout(()=>{this.dispatchEvent(new CustomEvent(ke.Loop)),this.currentState===ee.Playing&&(this._lottie.setDirection(-1*this._lottie.playDirection),this._lottie.play())},this.intermission)):(this.count&&(this._counter+=1),window.setTimeout(()=>{this.dispatchEvent(new CustomEvent(ke.Loop)),this.currentState===ee.Playing&&(this.direction===-1?(this.seek("99%"),this.play()):(this._lottie.stop(),this._lottie.play()))},this.intermission))}else this.dispatchEvent(new CustomEvent(ke.Complete))}),this._lottie.addEventListener("DOMLoaded",()=>{this.setSpeed(this.speed),this.setDirection(this.direction),this.autoplay&&(this.direction===-1&&this.seek("100%"),this.play()),this.dispatchEvent(new CustomEvent(ke.Ready))}),this._lottie.addEventListener("data_ready",()=>{this.dispatchEvent(new CustomEvent(ke.Load))}),this._lottie.addEventListener("data_failed",()=>{this.currentState=ee.Error,this.dispatchEvent(new CustomEvent(ke.Error))}),this.container.addEventListener("mouseenter",()=>{this.hover&&this.currentState!==ee.Playing&&this.play()}),this.container.addEventListener("mouseleave",()=>{this.hover&&this.currentState===ee.Playing&&this.stop()})}freeze(){this._lottie&&(this._lottie.pause(),this.currentState=ee.Frozen,this.dispatchEvent(new CustomEvent(ke.Freeze)))}};ye([Se({type:Boolean})],de.prototype,"autoplay",void 0),ye([Se({type:String,reflect:!0})],de.prototype,"background",void 0),ye([Se({type:Boolean})],de.prototype,"controls",void 0),ye([Se({type:Number})],de.prototype,"count",void 0),ye([Se({type:String})],de.prototype,"currentState",void 0),ye([Se({type:String})],de.prototype,"description",void 0),ye([Se({type:Number})],de.prototype,"direction",void 0),ye([Se({type:Boolean})],de.prototype,"disableCheck",void 0),ye([Se({type:Boolean})],de.prototype,"disableShadowDOM",void 0),ye([Se({type:Boolean})],de.prototype,"hover",void 0),ye([Se()],de.prototype,"intermission",void 0),ye([Se({type:Boolean,reflect:!0})],de.prototype,"loop",void 0),ye([Se()],de.prototype,"mode",void 0),ye([Se({type:String})],de.prototype,"preserveAspectRatio",void 0),ye([Se({type:String})],de.prototype,"renderer",void 0),ye([Se({type:String})],de.prototype,"viewBoxSize",void 0),ye([Se()],de.prototype,"seeker",void 0),ye([Se({type:Number})],de.prototype,"speed",void 0),ye([Se({type:String})],de.prototype,"src",void 0),ye([Se({type:Boolean})],de.prototype,"webworkers",void 0),ye([OF(".animation")],de.prototype,"container",void 0),de=ye([MF("lottie-player")],de);var qn=class extends Ct{constructor(){super(...arguments);this.onValueChanged=()=>{this.dispatchEvent(new CustomEvent("change",{detail:{value:+this.input.value},bubbles:!0,composed:!0}))}}render(){return q`<div class="slider">
      <div class="slider-wrapper rel">
        <div id="slider-track" class="abs">
          <div id="slider-track-line"></div>
          <div class="slider-track-end left"></div>
          <div class="slider-track-end right"></div>
        </div>
        <input
          id="slider-input"
          type="range"
          min=${this.minValue}
          max=${this.maxValue}
          value=${this.value}
          class="price-slider"
          @input=${this.onValueChanged}
        />
      </div>
    </div>`}};qn.styles=at`
    :host {
      --thumb-size: 28px;
      --end-size: 6px;

      width: 100%;
      min-height: var(--thumb-size);
      max-height: var(--thumb-size);
    }

    .slider {
      display: flex;
      align-items: center;
      flex-direction: column;
      width: 100%;
    }

    .slider-wrapper {
      width: 100%;
      display: flex;
      align-items: center;
      margin: 0;
    }

    #slider-track {
      width: 100%;
      display: flex;
      place-items: center;
    }

    #slider-track-line {
      width: calc(100% - var(--thumb-size)); /* half from both sides */
      height: 2px;
      margin-left: calc(var(--thumb-size) / 2);
      background: var(--primary-navy);
    }

    .slider-track-end {
      width: var(--end-size);
      height: var(--end-size);
      border-radius: 50%;
      background-color: var(--primary-navy);
    }
    .slider-track-end.left {
      position: absolute;
      left: calc((var(--thumb-size) - var(--end-size)) / 2);
    }
    .slider-track-end.right {
      position: absolute;
      right: calc((var(--thumb-size) - var(--end-size)) / 2);
    }

    #slider-input {
      -webkit-appearance: none;
      margin: 0;
      background: none;
      width: 100%;
      z-index: 2;
    }

    #slider-input::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: var(--thumb-size);
      height: var(--thumb-size);
      border: 0;
      background: url("assets/misc-game/icon_coin_colour.svg");
      cursor: pointer;
      box-shadow: none;
    }

    #slider-input::-moz-range-thumb {
      box-shadow: none;
      appearance: none;
      width: var(--thumb-size);
      height: var(--thumb-size);
      border: 0;
      background: url("assets/misc-game/icon_coin_colour.svg");
      cursor: pointer;
    }

    .abs {
      position: absolute;
    }
    .rel {
      position: relative;
    }
  `,et([It({type:Number})],qn.prototype,"minValue",2),et([It({type:Number})],qn.prototype,"maxValue",2),et([It({type:Number})],qn.prototype,"value",2),et([Ye("#slider-input")],qn.prototype,"input",2),qn=et([lt("coin-slider")],qn);var zF=1500,an=class extends Tt(yt){constructor(){super(...arguments);this.stockBought=0;this.currentAnimationIndex=0;this.createMarketingJuice=n=>{let d=Math.floor(n/10);if(d>=Sr.MarketingJuice.length)return;this.currentAnimationIndex>=Sr.MarketingJuice[d].length&&(this.currentAnimationIndex=0);let r=Sr.MarketingJuice[d][this.currentAnimationIndex];this.currentAnimationIndex++;let e=q`
      <lottie-player
        id="marketing-juice-${n}"
        autoplay
        mode="normal"
        src=${r}
        class="marketing-juice"
        @complete=${()=>{this.juiceLottiePlayers={...this.juiceLottiePlayers,[n]:q`${At}`}}}
      >
      </lottie-player>
    `;this.juiceLottiePlayers={...this.juiceLottiePlayers,[n]:e}};this.addStock=()=>{this.game.buyStock(this.product),this.stockBought++,xt("Purchase"),this.buyStockJuice()};this.addDemand=()=>{this.game.promoteProduct(this.product),this.createMarketingJuice(this.product.demand),this.calculateDemand(),xt("Purchase")};this.calculateDemand=()=>{let{cost:n,increasePerLevel:d}=this.game.gameplayParams.marketing;this.nextPromoteCost=this.product.getMarketingCost(n,d)};this.onPriceChanged=n=>{this.itemPrice=n.detail.value,this.game.setProductPrice(this.product,this.itemPrice)};this.renderMarketingLevelCircle=(n,d)=>q`
      <div
        class=${d<=n?"level-circle completed":"level-circle"}
      >
        ${d}
      </div>
    `;this.displayMarketingLevel=n=>{let d=[];for(let r=1;r<=5;r++)d.push(this.renderMarketingLevelCircle(n,r));return q`<div class="levels">${d}</div> `};this.productImage=(n,d,r)=>q`
      <img
        id="product_${r}"
        class="product-juice-pos product-juice-anim"
        src=${Rc(n,d)}
        draggable="false"
      />
    `;this.buyStockJuice=()=>{let n=new Date().toISOString(),d=this.game.getModel().getShop().getBusinessType(),r=this.product.kind.index,m=this.productImage(r,d,n);this.productJuice={...this.productJuice,[n]:m},setTimeout(()=>{this.productJuice={...this.productJuice,[n]:q`${At}`}},zF)};this.getMarketingPercentagePerLevel=n=>{let d=(this.product.demand-n*10+1)*10;return n<1&&(d=(this.product.demand-n*10)*11.1),n===5&&(d=100),d}}firstUpdated(){xt("PopIn")}connectedCallback(){super.connectedCallback(),this.juiceLottiePlayers={},this.productJuice={},this.product=pt.dialog.value.props.product,this.stockBought=0,!this.product||!(this.product instanceof sn)?(ze("[open-product-dialog] Wrong properties passed to this dialog!",pt.dialog.value),Je()):(this.calculateDemand(),this.itemPrice=this.product.price),this.gold=this.game.getModel().getUIWatchableModel().gold}disconnectedCallback(){super.disconnectedCallback(),this.product&&(mb(this.stockBought,this.product.cost,this.product.kind.key(),this.product.kind.productName()),vb(this.product.price,this.product.maxPrice,this.product.cost,this.product.kind.key(),this.product.kind.productName()))}render(){if(!this.product||!(this.product instanceof sn))return At;let n=this.product.cost<=this.gold.value&&this.product.availableStock.value<this.product.stockLimit,d=this.product.availableStock.value===this.product.stockLimit,r=this.product.demand>=this.game.gameplayParams.marketing.maxDemand,m=this.nextPromoteCost<=this.gold.value&&!r,e=Math.floor(this.product.demand/10),u=this.getMarketingPercentagePerLevel(e),g=e>=0&&e<5?tt(`ItemPopUp_Marketing0${e+1}`):tt("ItemPopUp_Max");return q`
      <arrow-container>
        <div class="wrapper">
          <div class="header">
            <div class="header-content">${this.product.kind.productName()}</div>
            <popup-close-button></popup-close-button>
          </div>

          <div class="button-pill-container">
            <app-button
              id="buy-stock-btn"
              @click=${this.addStock}
              class="gold-value popIn game-button"
              ?disabled=${!n}
            >
              <div class="gold-wrapper">
                <div class="gold-amount">
                  <img
                    src=${st.CoinColor}
                    height="28px"
                    style=${n?"":"opacity: 0.3"}
                    draggable="false"
                  />
                  ${d?tt("ItemPopUp_Button_Full"):this.product.cost}
                </div>
                <div class="buy-stock">
                  ${tt("ItemPopUp_Button_BuyStock")}
                </div>
              </div>
            </app-button>
            <div class="pill-wrapper">
              <div class="pill">
                ${fr(this.product.availableStock)}
                ${tt("ItemPopUp_InStock")}
              </div>
              ${Object.values(this.productJuice)}
            </div>
          </div>

          <div class="tabbed-wrapper">
            <tabbed-container>
              <h2 class="tab-header price" slot="tab">
                ${tt("ItemPopUp_SetPrice")}
              </h2>
              <section slot="panel">
                <div class="tab-section price">
                  <div id="price-tab-container">
                    <div class="selling-price-indicator border-normal">
                      <div>${tt("ItemPopUp_SellingPrice")}:</div>
                      <div class="item-price">
                        <img
                          src=${st.CoinLine}
                          height="16px"
                          draggable="false"
                        />
                        ${this.itemPrice}
                      </div>
                    </div>
                    <div>
                      <div id="coin-slider-text">
                        <div>${tt("ItemPopUp_LowRisk")}</div>
                        <div>${tt("ItemPopUp_HighRisk")}</div>
                      </div>
                      <coin-slider
                        minValue=${this.product.cost+1}
                        maxValue=${this.product.maxPrice}
                        value=${this.itemPrice}
                        @change=${this.onPriceChanged}
                      ></coin-slider>
                    </div>
                  </div>
                </div>
              </section>
              <h2 class="tab-header marketing" slot="tab">
                ${tt("ItemPopUp_Marketing")}
              </h2>
              <section slot="panel">
                <div class="tab-section marketing">
                  ${tt("ItemPopUp_MoreCustomers")}
                  <div class="marketing-bar-wrapper">
                    <div class="level-indicator">
                      <div>${tt("ItemPopUp_Level")}</div>
                      ${this.displayMarketingLevel(e)}
                    </div>
                    <div class="marketing-bar-outer">
                      <div
                        class="marketing-bar-inner"
                        style=${"width:"+u+"%"}
                      ></div>
                    </div>

                    <div
                      style="font-size: 14px; weight: 500; padding-top: 8px; margin: 0px;"
                    >
                      ${g}
                    </div>
                  </div>
                </div>
                <div class="marketing-button ">
                  <app-button
                    class="popIn game-button"
                    ?disabled=${!m}
                    @click=${this.addDemand}
                  >
                    <div style="display: flex; align-items: center; gap: 10px">
                      <img
                        src=${st.CoinColor}
                        style="padding-right: 8px;"
                        style=${m?"":"opacity: 0.3"}
                        draggable="false"
                      />
                      ${r?tt("ItemPopUp_Button_Max"):this.nextPromoteCost}
                    </div>
                    ${Object.values(this.juiceLottiePlayers)}
                  </app-button>
                </div>
              </section>
            </tabbed-container>
          </div>
        </div>
      </arrow-container>
    `}};an.styles=[po,xu,je,Kt,at`
      :host {
        font-family: Ubuntu;
        font-size: 20px;
        font-weight: 700;
        line-height: normal;
        text-align: left;
        color: var(--primary-navy);

        --button-container: 1;
        --tabbed-container: 2;
        --product-count-z-index: 10;
        --product-z-index: 1;
        --marketing-juice-lottie: 15;
      }

      arrow-container {
        width: 272px;
        height: 242px;
        position: absolute;
      }

      .wrapper {
        width: 100%;
        height: 100%;

        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;

        position: absolute;
        top: 0px;
      }

      .header-color {
        height: 67px;
        width: 100%;
        background-color: var(--primary);
      }

      .header {
        display: flex;
        width: 100%;
        justify-content: space-between;
      }

      .header-content {
        display: flex;
        padding: 8px 6px 6px;
      }

      .tabbed-wrapper {
        width: 256px;
        height: 127px;
        display: flex;
        align-items: center;
        padding: 6px;
        position: relative;
        z-index: var(--tabbed-container);
      }

      .gold-value {
        margin-left: 10px;
        display: flex;
        flex-direction: column;
      }

      .gold-wrapper {
        display: flex;
        width: 100%;
        flex-direction: column;
      }

      .gold-amount {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
      }

      .buy-stock {
        font-size: 14px;
        display: flex;
        justify-content: center;
      }

      .button-pill-container {
        width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        position: relative;
        z-index: var(--button-container);
      }

      .pill {
        width: 100px;
        height: 20px;
        background-color: var(--primary-highlight);
        border-radius: 12px;
        border: 2px solid var(--primary);

        display: flex;
        align-items: center;
        justify-content: center;

        font-size: 14px;
        font-weight: 500;
        margin-right: 10px;

        position: relative;
        z-index: var(--product-count-z-index);
      }

      .tab-header {
        height: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0px;
        padding: 0px;
        border-top-left-radius: 6px;
        border-top-right-radius: 6px;
        font-size: 14px;
        font-weight: 700;
        color: var(--white);
      }

      .tab-header.marketing {
        background-color: var(--secondary-violet-highlight);
      }

      .tab-header.marketing[selected] {
        background-color: var(--violet-lowlight);
      }

      .tab-header.price {
        background-color: var(--light-purple);
      }

      .tab-header.price[selected] {
        background-color: var(--blue-lowlight);
      }

      .tab-section {
        height: 105px;
        box-sizing: border-box;
        border-radius: 0px 0px 4px 4px;
        width: 100%;
        display: flex;
        align-items: center;
        flex-direction: column;
        justify-content: center;
      }

      .tab-section.price {
        background-color: var(--light-purple);
        box-sizing: border-box;
        border: 2px solid var(--blue-lowlight);
      }

      .tab-section.marketing {
        background-color: var(--secondary-violet-highlight);
        box-sizing: border-box;
        border: 2px solid var(--violet);

        font-size: 14px;
        font-weight: 700;

        width: 100%;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;

        display: flex;
        padding: 6px;
        margin-bottom: 8px;
      }

      .marketing-bar-wrapper {
        font-weight: 500;
        padding-top: 4px;
        padding-bottom: 4px;
      }

      .marketing-bar-outer {
        width: 236px;
        height: 10px;
        box-sizing: border-box;
        border: 2px solid var(--primary-navy);
        border-radius: 6px;
        background-color: var(--white);
      }

      .marketing-bar-inner {
        width: 50%;
        height: 100%;
        border-radius: 10px;
        background-color: var(--violet);
      }

      .levels {
        display: flex;
      }

      .level-indicator {
        display: flex;
        justify-content: space-between;
      }

      .level-circle {
        display: flex;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        box-sizing: border-box;
        border: 2px solid var(--primary-navy);
        background-color: var(--white);
        color: var(--primary-navy);
        justify-content: center;
        align-items: center;
        font-size: 12px;
        font-weight: 700;
        margin: 2px;
      }

      .level-circle.completed {
        background-color: var(--violet);
        color: var(--white);
      }

      .marketing-button {
        display: flex;
        justify-content: center;
        translate: 0px -50%;
        position: relative;
      }

      .selling-price-indicator {
        width: 232px;
        height: 24px;
        box-sizing: border-box;
        background-color: var(--white);
        display: flex;
        font-size: 14px;
        line-height: normal;
        justify-content: space-between;
        align-items: center;
        padding: 4px;
      }

      .item-price {
        display: flex;
        gap: 8px;
      }

      .pill-wrapper {
        position: relative;
      }

      .product-juice-pos {
        position: absolute;
        transform: translate(-50%, 0);
        left: 50px;
        top: -50px;
        opacity: 0;
        z-index: var(--product-z-index);
      }

      .product-juice-anim {
        animation: 0.7s ease-in stockAnim;
        transform-origin: center;
      }

      @keyframes stockAnim {
        0% {
          top: -50px;
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        99% {
          top: -5px;
        }
        100% {
          top: -50px;
          opacity: 0;
        }
      }

      .marketing-juice {
        position: absolute;
        left: 50%;
        bottom: 0;
        transform: translateX(-50%);
        z-index: var(--marketing-juice-lottie);
        width: 300px;
        height: 240px;
        pointer-events: none;
      }

      #buy-stock-btn {
        --app-btn-padding: 4px 6px 8px;
        --app-btn-padding-active: 4px 6px;
      }

      #price-tab-container {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        padding: 14px 10px 10px 10px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      #coin-slider-text {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 14px;
        margin-bottom: 4px;

        font-size: 14px;
        width: 100%;
      }
    `],et([Mt({context:Rt})],an.prototype,"game",2),et([qt()],an.prototype,"nextPromoteCost",2),et([qt()],an.prototype,"itemPrice",2),et([Ye("#price-input")],an.prototype,"priceSlider",2),et([qt()],an.prototype,"productJuice",2),et([qt()],an.prototype,"juiceLottiePlayers",2),an=et([lt("open-product-dialog")],an);var Ch=class extends Tt(yt){render(){return q`
      <div class="level-up-container block-pointers">
        <div class="level-up-background">
          <img class="rays" src=${st.LevelUpRays} draggable="false" />
        </div>
        <img
          class="banner popIn levelUp"
          src=${st.LevelUpBanner}
          draggable="false"
        />
      </div>
      <confetti-juice autoplay></confetti-juice>
    `}};Ch.styles=[wx,Kt,at`
      :host {
        display: flex;
        place-items: center;
        width: 100%;
        height: 100%;
        display: grid;
      }

      confetti-juice {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        top: 0;
        left: 0;
        margin: 0;
      }

      .level-up-container {
        display: flex;
        position: absolute;
        width: 100%;
        height: 100%;
        align-items: center;
        justify-content: center;
      }

      .level-up-background {
        display: flex;
        position: relative;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;

        background-color: var(--level-up-bg);
        opacity: 0.3;
      }

      .banner {
        position: absolute;
        opacity: 1 !important;
      }
      .rays {
        position: relative;
        flex-shrink: 0;
      }
    `],Ch=et([lt("level-up")],Ch);var Ao=class extends Tt(yt){connectedCallback(){super.connectedCallback(),this.uiModel=this.game.getModel().getUIWatchableModel()}render(){return q`
      <div class="green-container wrapper popIn">
        <div class="container">
          <img src=${st.CoinColor} height="28px" draggable="false" />
          <div class="gold-text">${fr(this.uiModel.gold)}</div>
        </div>
        <div class="container">
          <img src=${st.Clock} height="28px" draggable="false" />
          <div class="bar-container">
            <div class="payday-text">
              ${Gt.paydayCount.value+1} of 12
            </div>
            <div class="payday-bar">
              <div
                id="bar"
                style="width: ${fr(Gt.paydayBarPercentage)}%"
              ></div>
            </div>
          </div>
        </div>
      </div>
    `}};Ao.styles=[xu,Kt,at`
      :host {
        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        width: 100%;
        height: 100%;
      }

      .wrapper {
        display: flex;
        flex-direction: column;
      }

      .container {
        display: flex;
        align-items: center;
        padding-bottom: 4px;
      }

      .gold-text {
        margin: 0px;
        padding-left: 8px;
      }

      .bar-container {
        display: flex;
        flex-direction: column;
        margin-left: 8px;
        width: 100%;
      }

      .payday-bar {
        background-color: white;
        border-radius: 8px;
        border: 2px solid var(--primary-navy);

        flex-grow: 0;

        display: flex;
        align-items: center;
      }

      .payday-text {
        margin: 0px;
      }

      #bar {
        background-color: var(--blue);
        height: 6px;
        border-radius: 4px;
      }
    `],et([Mt({context:Rt})],Ao.prototype,"game",2),Ao=et([lt("payday-tracker")],Ao);var Ph=class extends yt{constructor(){super(...arguments);this.clickHandler=()=>{this.dispatchEvent(new Event("open",{bubbles:!0,composed:!0}))}}render(){return q`
      <button @click=${this.clickHandler} class="border-normal popIn">
        <div class="content-wrapper">
          <img src=${st.ValueGraph} height="28px" draggable="false" />
          <div>Business Value</div>
        </div>
      </button>
    `}};Ph.styles=[je,Kt,at`
      button {
        background: var(--primary);
        box-shadow: 0px -4px 0px 0px var(--primary-lowlight) inset;
        outline: none;
        -webkit-tap-highlight-color: transparent;

        width: 100%;
        height: 100%;

        padding-bottom: 4px;
      }

      button:hover {
        cursor: pointer;
      }

      button:active {
        background: var(--primary-lowlight);
        box-shadow: none;
      }

      button:disabled {
        background: var(--button-disabled-primary);
        border: 2px solid var(--button-disabled-lowlight);
        box-shadow: 0px -4px 0px 0px var(--button-disabled-lowlight) inset;
      }

      .content-wrapper {
        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        margin: 0px;

        display: flex;
        align-items: center;

        width: 100%;
        height: 100%;
      }
    `],Ph=et([lt("business-value-tracker")],Ph);var Xs=class extends Tt(Ct){constructor(){super(...arguments);this.hireClicked=()=>{yr(1)};this.hire=()=>{Je(),this.game.hire()};this.cancelHire=()=>{Je()};this.handleExitGame=()=>{this.game.exitGame(),ie("Main Menu")};this.renderTipsModal=()=>q` <tip-modal></tip-modal> `;this.renderLevelUp=()=>q`<level-up></level-up>`;this.renderEventModal=()=>q`<event-modal></event-modal> `;this.renderDialog=()=>{switch(pt.dialog.value.type){case 1:return q` <hire-dialog
          class="game-dialog"
          @accept=${this.hire}
          @cancel=${this.cancelHire}
        ></hire-dialog>`;case 2:return q`<pay-employee-dialog
          class="game-dialog"
        ></pay-employee-dialog>`;case 3:return q`<add-product-dialog
          class="game-dialog"
        ></add-product-dialog>`;case 4:return q`<open-product-dialog
          class="game-dialog"
        ></open-product-dialog>`;default:return At}}}connectedCallback(){super.connectedCallback(),this.uiModel=this.game.getModel().getUIWatchableModel()}firstUpdated(){this.unsubscribeFromSignal=pe(()=>{this.uiModel.gold.value>=0&&this.game.getModel().checkTotalSalariesDue(),Gt.displayLevelUp.value&&setTimeout(()=>{fc(!1)},3e3)})}disconnectedCallback(){var n;super.disconnectedCallback(),(n=this.unsubscribeFromSignal)==null||n.call(this)}render(){return Qa()?Gt.displayFinancialReport.value?q`
        ${Bt(pt.tip.value,this.renderTipsModal)}
        <financial-report></financial-report>
      `:q`
      ${this.renderDialog()} ${Bt(pt.tip.value,this.renderTipsModal)}
      ${Bt(Gt.eventQueue.value.length&&!Gt.displayLevelUp.value,this.renderEventModal)}
      ${Bt(Gt.displayLevelUp.value,()=>this.renderLevelUp())}

      <payday-tracker></payday-tracker>
      <business-value-tracker
        @open=${()=>this.game.displayFinancialReport()}
      ></business-value-tracker>

      <div class="shortfall-wrapper-ui">
        ${Bt(this.uiModel.gold.value<Gt.overdueSalaries.value,()=>q`<div class="shortfall-ui">
              <img
                class="shortfall-ui-img"
                src=${st.CoinLine}
                draggable="false"
              />
              <div class="shortfall-ui-text">
                ${Gt.overdueSalaries.value}
                ${tt("BusinessView_Overdue")}
              </div>
            </div>`)}
        ${Bt(this.uiModel.gold.value<Gt.totalSalariesDue.value,()=>q`<div class="shortfall-ui">
              <img
                class="shortfall-ui-img"
                src=${st.CoinLine}
                draggable="false"
              />
              <div class="shortfall-ui-text">
                ${Gt.totalSalariesDue.value}
                ${tt("BusinessView_Due")}
              </div>
            </div>`)}
      </div>
    `:q` <intro-flow></intro-flow>`}};Xs.styles=at`
    :host {
      width: 100%;
      height: 100%;

      display: flex;
      flex-direction: column;
      justify-content: space-between;

      /* This disables the element from processing mouse
      events so the phaser canvas can receive events. */
      pointer-events: none;

      --level-up-z: 100;
      --info-modal-z: 25;
      --intro-flow-z: 20;
      --event-modal-z: 10;
      --game-dialog-z: 5;
    }

    :host > * {
      pointer-events: auto;
    }

    intro-flow {
      position: absolute;
      z-index: var(--intro-flow-z);
      width: 100%;
      height: 100%;
    }
    tip-modal {
      position: absolute;
      z-index: var(--info-modal-z);
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    event-modal {
      position: absolute;
      z-index: var(--event-modal-z);
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .game-dialog {
      position: absolute;
      z-index: var(--game-dialog-z);
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #gamebar {
      width: 100%;
      height: 25px;
      background-color: var(--primary-navy);
      color: white;
      display: flex;
      flex-direction: row;
    }
    #gold {
      height: 100%;
      display: flex;
      align-content: center;
    }
    #gold img {
      height: 100%;
      aspect-ratio: 1;
    }
    #business-value {
      height: 100%;
      display: flex;
      align-content: center;
    }
    #business-value img {
      height: 100%;
      aspect-ratio: 1;
    }
    payday-timer {
      width: 250px;
    }

    button {
      background-color: black;
      color: white;
      height: 100%;

      cursor: pointer;
    }

    level-up {
      width: 100%;
      height: 100%;
      position: absolute;
      z-index: var(--level-up-z);
      pointer-events: none !important;
    }

    .shortfall-ui {
      display: flex;
      width: fit-content;
      height: 24px;
      border-radius: 4px;
      background-color: var(--ginger);
      gap: 4px;
      box-shadow: 0px -2px 0px 0px var(--ginger-lowlight) inset;
      align-content: center;
      justify-content: end;
      flex-wrap: wrap;
    }

    .shortfall-ui-text {
      margin-right: 4px;
      color: var(--primary-navy);
      text-align: center;
      font-family: Ubuntu;
      font-size: 14px;
      font-style: normal;
      font-weight: 700;
      line-height: normal;
    }

    .shortfall-ui-img {
      margin-left: 4px;
      width: 16px;
      height: 16px;
    }

    .shortfall-wrapper-ui {
      display: flex;
      position: absolute;
      right: 137px;
      top: 10px;
      flex-direction: column;
      gap: 6px;
      align-items: flex-end;
    }

    payday-tracker {
      position: absolute;
      top: 10px;
      right: 10px;

      width: 119px;
      height: 74px;

      @media (min-width: 1000px) {
        right: 12px;
      }
    }

    business-value-tracker {
      position: absolute;
      top: 92px;
      right: 10px;

      width: 119px;
      height: 50px;

      @media (min-width: 1000px) {
        right: 12px;
      }
    }
  `,et([Mt({context:Rt})],Xs.prototype,"game",2),et([qt()],Xs.prototype,"tipModalKey",2),Xs=et([lt("game-ui")],Xs);var wh=class extends Tt(yt){render(){return q` ${Bt(pt.screen.value==="Game",()=>q`
          <game-ui></game-ui>
          ${Bt(!1,()=>q`<gameplay-parameters></gameplay-parameters>`)}
        `)}
      <phaser-game></phaser-game>`}};wh.styles=at`
    :host {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      position: relative;
    }
    game-ui {
      position: absolute;
      top: 0;
      left: 0;
    }
  `,wh=et([lt("game-container")],wh);var zr=class extends Tt(Ct){constructor(){super(...arguments);this.hasTriedToSubmit=!1;this.hasPlayedSuccessAudio=!1;this.isOffline=!1;this.isLoading=!1;this.currentScore=0;this.highScore=0;this.isHighScore=!1;this.shouldAnimate=!0;this.submit=()=>{var n;this.game.save(),this.hasTriedToSubmit=!0,(n=this.confettiJuice)==null||n.stop()};this.toLeaderboard=()=>{var n;(n=this.confettiJuice)==null||n.stop(),Cc()};this.toMainMenu=()=>{var n;ie("Main Menu"),(n=this.confettiJuice)==null||n.stop()};this.renderScoreText=n=>n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");this.renderButtons=()=>this.isOffline&&this.isHighScore?q`
        <app-button @click=${this.submit}>
          ${tt("GameEnd_Button_SubmitNow")}
        </app-button>
        <app-button @click=${this.toMainMenu}>
          ${tt("GameEnd_Button_SubmitLater")}
        </app-button>
      `:q`
      <app-button class="button" @click=${this.toLeaderboard}>
        ${tt("GameEnd_Button_LeaderBoard")}
      </app-button>
      <app-button @click=${this.toMainMenu}>
        ${tt("GameEnd_Button_PlayAgain")}
      </app-button>
    `;this.renderInfoTab=()=>this.isOffline?q`
        <div class="info-alert">
          ${tt("GameEnd_Offline_Heading")}
          <img class="info-pip" src=${st.AlertPip} draggable="false" />
        </div>
        <div class="info-tab">
          <p>${tt("GameEnd_Offline_Offline_Body01")}</p>
          <p>${tt("GameEnd_Offline_Offline_Body02")}</p>
        </div>
      `:this.isHighScore?q`
        <div class="info-tab">
          <p>${tt("GameEnd_Submitted_Body01")}</p>
          <p>${tt("GameEnd_Submitted_Body02")}</p>
        </div>
      `:q`
      <div class="info-tab">
        <p>${tt("GameEnd_WellDone")}</p>
      </div>
    `}connectedCallback(){super.connectedCallback(),se.highScore.value===null&&Os()}render(){this.highScore=se.highScore.value??0;let n=ve.localSave();this.currentScore=(n==null?void 0:n.score)??this.game.getModel().getBusinessValue(),this.isHighScore=this.currentScore>=this.highScore;let d=Or.saveGameRequest.value;return this.isOffline=d.status===3,this.isLoading=d.status===1,!this.isLoading&&!this.hasPlayedSuccessAudio&&(xt("Success"),this.hasPlayedSuccessAudio=!0),this.hasTriedToSubmit&&this.isHighScore?q`
        <div class="retry-popup border-normal">
          <div class="retry-popup-header">
            ${tt("GameEnd_Heading")}
            <img src=${st.Cross_Active} draggable="false" />
          </div>
          <div class="retry-popup-content">
            <img src=${st.AlertPip} draggable="false" />
            ${tt("GameEnd_Body")}
          </div>
          <div class="retry-popup-buttons">
            <app-button @click=${this.toMainMenu}>
              ${tt("GameEnd_Button_Later")}
            </app-button>
            <app-button @click=${this.submit} ?disabled=${this.isLoading}>
              ${tt("GameEnd_Button_TryAgain")}
            </app-button>
          </div>
        </div>
      `:this.isLoading?q`
        <loading-spinner style="width: 160px; height: 160px;"></loading-spinner>
      `:q`
      <confetti-juice autoplay></confetti-juice>
      <div id="main-container">
        <div id="info-container-balancer"></div>
        <div id="center-container">
          <div class="game-over-img">
            <lottie-player
              autoplay
              mode="normal"
              src=${Sr.GameOver}
              style="width: 100%; height: 100%;"
            ></lottie-player>
          </div>
          <div
            class=${Yi({"score-container":!0,"high-score":this.isHighScore,"is-animated":this.shouldAnimate})}
          >
            ${this.renderScoreText(this.currentScore)}
            <div class="value-pill">
              ${tt("GameEnd_BusinessValue")}
              <img
                class="value-icon"
                src=${st.ValueGraph}
                draggable="false"
              />
            </div>
            <div
              class=${Yi({"score-pill":!0,"high-score":this.isHighScore})}
            >
              ${this.isHighScore?tt("GameEnd_NewBest"):q`${tt("GameEnd_BestScore")}
                    <i>${this.renderScoreText(this.highScore)}</i>`}
            </div>
          </div>
          <div class="button-container">${this.renderButtons()}</div>
        </div>
        <div id="info-container">${this.renderInfoTab()}</div>
      </div>
      <img
        class="character-img"
        src=${st.GameOver_MainCharacter}
        draggable="false"
      />
    `}};zr.styles=[Kt,je,Qt,at`
      :host {
        position: relative;
        width: 100%;
        height: 100%;
        background: no-repeat center url("assets/game-over/endgame_bg.svg");
        background-size: cover;
        display: flex;
        align-items: center;
        justify-content: center;

        --title-z-index: 0;
        --container-z-index: 1;
        --info-z-index: 2;
      }

      #main-container {
        display: flex;
        flex-direction: column;
        place-content: center;
        place-items: center;

        @media (min-width: 1000px) {
          gap: 57px;
        }
      }

      #center-container {
        position: relative;
        z-index: var(--container-z-index);
        height: 280px;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: end;
        gap: 47px;

        @media (min-width: 1000px) {
          height: 312px;
        }
      }

      confetti-juice {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        top: 0;
        left: 0;
        margin: 0;
      }

      .game-over-img {
        position: absolute;
        top: 0;
        z-index: var(--title-z-index);
        width: 498px;
        height: 150px;

        @media (min-width: 1000px) {
          top: 8px;
        }
      }

      .score-container {
        position: relative;
        width: 236px;
        height: 66px;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;

        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 40px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;

        border-radius: 4px;
        border: 2px solid var(--primary-navy);
        background: var(--primary-white);
      }
      .score-container.is-animated {
        animation-name: popInAnimGameOver;
        animation-duration: 2s;
        animation-timing-function: cubic-bezier(0.17, 0.67, 0.55, 1.35);
      }

      .score-container.high-score {
        color: var(--orange);
        border-radius: 4px;
        border: 2px solid var(--orange);
        background: no-repeat center
          url("assets/game-over/endgame_container_highscore.svg");
        background-color: var(--yellow-highlight);
        background-size: cover;
      }

      .value-pill {
        position: absolute;
        width: max-content;
        height: 22px;
        top: 0;
        left: 50%;
        transform: translate(-50%, -50%);

        display: flex;
        justify-content: center;
        align-items: center;

        box-sizing: border-box;
        padding: 2px 6px 2px 34px;

        border-radius: 0px 11px 11px 0px;
        background: var(--primary-navy);

        color: var(--primary-white);
        text-align: center;
        font-family: Ubuntu;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        text-transform: capitalize;
      }

      .value-pill > * {
        flex-shrink: 1;
      }

      .value-icon {
        position: absolute;
        left: 0;
        top: -4px;

        flex-shrink: 0;
        width: 28px;
        height: 28px;
      }

      .score-pill {
        position: absolute;
        left: 50%;
        bottom: 0;
        transform: translate(-50%, 50%);

        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        gap: 8px;

        color: var(--primary-navy);
        text-align: center;
        font-family: Ubuntu;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        text-transform: capitalize;
      }

      .score-pill > i {
        font-weight: 400;
        font-style: normal;
      }

      .score-pill:not(.high-score) {
        width: max-content;
        padding: 0px 14px;
        border-radius: 14px;
        border: 2px solid var(--primary-navy);
        background: var(--primary-teal-main);
      }

      .score-pill.high-score {
        width: 154px;
        height: 46px;
        color: var(--orange);
        background: no-repeat center/100%
          url("assets/game-over/endgame_pill_highscore.svg");
      }

      .button-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
      }

      app-button {
        height: 44px;
        width: max-content;
      }

      /* Used to balance out the info-container in the main-container on desktop sizing, so the
      center-container stays in the center*/
      #info-container-balancer {
        height: 0;

        @media (min-width: 1000px) {
          height: 150px;
          flex-grow: 1;
          flex-shrink: 1;
        }
      }

      #info-container {
        position: absolute;
        left: 0;
        bottom: 0;
        min-height: 150px;
        width: 152px;

        display: flex;
        flex-direction: column;
        justify-content: end;
        align-items: center;

        @media (min-width: 1000px) {
          justify-content: start;
          position: relative;
          width: 248px;
          flex-grow: 1;
          flex-shrink: 1;
        }
      }

      .info-tab {
        box-sizing: border-box;
        padding: 8px;
        border-radius: 0px 4px 0px 0px;

        display: flex;
        flex-direction: column;
        justify-content: start;
        align-items: center;
        gap: 10px;

        background-color: var(--primary-white);

        color: var(--primary-navy, #16006d);
        text-align: center;
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;

        @media (min-width: 1000px) {
          border-radius: 4px;
        }
      }

      .info-tab > p {
        margin: 0;
      }

      .info-alert {
        height: 24px;
        position: absolute;
        top: -24px;

        display: flex;
        justify-content: center;
        align-items: center;

        box-sizing: border-box;
        padding: 4px 8px;
        border-radius: 4px 4px 0px 0px;
        background: var(--ginger);

        color: var(--primary-white);
        text-align: center;
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        text-transform: capitalize;
      }

      .info-pip {
        position: absolute;
        top: 0;
        right: 0;
        transform: translate(50%, -50%);
      }

      .character-img {
        width: 180px;
        height: 210px;
        position: absolute;
        bottom: 0;
        right: 0;
      }

      .retry-popup {
        width: 354px;
        position: relative;
        background-color: var(--primary-white);
        border-radius: 6px;
      }

      .retry-popup-header {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        border-radius: 4px 4px 0px 0px;
        background: var(--primary-teal-main);
        width: 100%;
        height: 36px;
        flex-grow: 0;

        box-sizing: border-box;
        padding: 6px 8px;
      }

      .retry-popup-content {
        box-sizing: border-box;
        width: 100%;
        flex-grow: 1;
        border-radius: 0px 0px 4px 4px;
        padding: 14px 22px 36px;
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        justify-content: flex-start;
        gap: 8px;

        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
      }

      .retry-popup-buttons {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translate(-50%, 50%);

        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        gap: 10px;
      }
    `],et([qt()],zr.prototype,"hasTriedToSubmit",2),et([Mt({context:Rt})],zr.prototype,"game",2),et([Ye("confetti-juice")],zr.prototype,"confettiJuice",2),zr=et([lt("game-over")],zr);function re(i){return i==null}function My(i){return i!==null&&typeof i=="object"}function a0(i){return i!==null&&typeof i=="object"}function HF(i,t){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==t[n])return!1;return!0}function Ks(i,t){return Array.from(new Set([...Object.keys(i),...Object.keys(t)])).reduce((d,r)=>{let m=i[r],e=t[r];return a0(m)&&a0(e)?Object.assign(Object.assign({},d),{[r]:Ks(m,e)}):Object.assign(Object.assign({},d),{[r]:r in t?e:m})},{})}function Ly(i){return My(i)?"target"in i:!1}var WF={alreadydisposed:()=>"View has been already disposed",invalidparams:i=>`Invalid parameters for '${i.name}'`,nomatchingcontroller:i=>`No matching controller for '${i.key}'`,nomatchingview:i=>`No matching view for '${JSON.stringify(i.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:i=>`Not compatible with  plugin '${i.id}'`,propertynotfound:i=>`Property '${i.name}' not found`,shouldneverhappen:()=>"This error should never happen"},le=class{static alreadyDisposed(){return new le({type:"alreadydisposed"})}static notBindable(){return new le({type:"notbindable"})}static notCompatible(t,n){return new le({type:"notcompatible",context:{id:`${t}.${n}`}})}static propertyNotFound(t){return new le({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new le({type:"shouldneverhappen"})}constructor(t){var n;this.message=(n=WF[t.type](t.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}toString(){return this.message}},Mo=class{constructor(t,n){this.obj_=t,this.key=n}static isBindable(t){return!(t===null||typeof t!="object"&&typeof t!="function")}read(){return this.obj_[this.key]}write(t){this.obj_[this.key]=t}writeProperty(t,n){let d=this.read();if(!Mo.isBindable(d))throw le.notBindable();if(!(t in d))throw le.propertyNotFound(t);d[t]=n}},xe=class{constructor(){this.observers_={}}on(t,n){let d=this.observers_[t];return d||(d=this.observers_[t]=[]),d.push({handler:n}),this}off(t,n){let d=this.observers_[t];return d&&(this.observers_[t]=d.filter(r=>r.handler!==n)),this}emit(t,n){let d=this.observers_[t];d&&d.forEach(r=>{r.handler(n)})}},o0=class{constructor(t,n){var d;this.constraint_=n==null?void 0:n.constraint,this.equals_=(d=n==null?void 0:n.equals)!==null&&d!==void 0?d:(r,m)=>r===m,this.emitter=new xe,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){let d=n??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t,m=this.rawValue_;this.equals_(m,r)&&!d.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:d,previousRawValue:m,rawValue:r,sender:this}))}},l0=class{constructor(t){this.emitter=new xe,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,n){let d=n??{forceEmit:!1,last:!0},r=this.value_;r===t&&!d.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:d,previousRawValue:r,rawValue:this.value_,sender:this}))}},h0=class{constructor(t){this.emitter=new xe,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}};function he(i,t){let n=t==null?void 0:t.constraint,d=t==null?void 0:t.equals;return!n&&!d?new l0(i):new o0(i,t)}function $F(i){return[new h0(i),(t,n)=>{i.setRawValue(t,n)}]}var wt=class{constructor(t){this.emitter=new xe,this.valMap_=t;for(let n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(t){return Object.keys(t).reduce((d,r)=>Object.assign(d,{[r]:he(t[r])}),{})}static fromObject(t){let n=this.createCore(t);return new wt(n)}get(t){return this.valMap_[t].rawValue}set(t,n){this.valMap_[t].rawValue=n}value(t){return this.valMap_[t]}},Js=class{constructor(t){this.values=wt.fromObject({max:t.max,min:t.min})}constrain(t){let n=this.values.get("max"),d=this.values.get("min");return Math.min(Math.max(t,d),n)}},u0=class{constructor(t){this.values=wt.fromObject({max:t.max,min:t.min})}constrain(t){let n=this.values.get("max"),d=this.values.get("min"),r=t;return re(d)||(r=Math.max(r,d)),re(n)||(r=Math.min(r,n)),r}},d0=class{constructor(t,n=0){this.step=t,this.origin=n}constrain(t){let n=this.origin%this.step,d=Math.round((t-n)/this.step);return n+d*this.step}},c0=class{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}},XF={"**":(i,t)=>Math.pow(i,t),"*":(i,t)=>i*t,"/":(i,t)=>i/t,"%":(i,t)=>i%t,"+":(i,t)=>i+t,"-":(i,t)=>i-t,"<<":(i,t)=>i<<t,">>":(i,t)=>i>>t,">>>":(i,t)=>i>>>t,"&":(i,t)=>i&t,"^":(i,t)=>i^t,"|":(i,t)=>i|t},f0=class{constructor(t,n,d){this.left=n,this.operator=t,this.right=d}evaluate(){let t=XF[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}},YF={"+":i=>i,"-":i=>-i,"~":i=>~i},p0=class{constructor(t,n){this.operator=t,this.expression=n}evaluate(){let t=YF[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function Oy(i){return(t,n)=>{for(let d=0;d<i.length;d++){let r=i[d](t,n);if(r!=="")return r}return""}}function Lh(i,t){var n;let d=i.substr(t).match(/^\s+/);return(n=d&&d[0])!==null&&n!==void 0?n:""}function jF(i,t){let n=i.substr(t,1);return n.match(/^[1-9]$/)?n:""}function Oh(i,t){var n;let d=i.substr(t).match(/^[0-9]+/);return(n=d&&d[0])!==null&&n!==void 0?n:""}function KF(i,t){let n=Oh(i,t);if(n!=="")return n;let d=i.substr(t,1);if(t+=1,d!=="-"&&d!=="+")return"";let r=Oh(i,t);return r===""?"":d+r}function Dy(i,t){let n=i.substr(t,1);if(t+=1,n.toLowerCase()!=="e")return"";let d=KF(i,t);return d===""?"":n+d}function EP(i,t){let n=i.substr(t,1);if(n==="0")return n;let d=jF(i,t);return t+=d.length,d===""?"":d+Oh(i,t)}function JF(i,t){let n=EP(i,t);if(t+=n.length,n==="")return"";let d=i.substr(t,1);if(t+=d.length,d!==".")return"";let r=Oh(i,t);return t+=r.length,n+d+r+Dy(i,t)}function ZF(i,t){let n=i.substr(t,1);if(t+=n.length,n!==".")return"";let d=Oh(i,t);return t+=d.length,d===""?"":n+d+Dy(i,t)}function QF(i,t){let n=EP(i,t);return t+=n.length,n===""?"":n+Dy(i,t)}var _F=Oy([JF,ZF,QF]);function qF(i,t){var n;let d=i.substr(t).match(/^[01]+/);return(n=d&&d[0])!==null&&n!==void 0?n:""}function t3(i,t){let n=i.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0b")return"";let d=qF(i,t);return d===""?"":n+d}function e3(i,t){var n;let d=i.substr(t).match(/^[0-7]+/);return(n=d&&d[0])!==null&&n!==void 0?n:""}function i3(i,t){let n=i.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0o")return"";let d=e3(i,t);return d===""?"":n+d}function n3(i,t){var n;let d=i.substr(t).match(/^[0-9a-f]+/i);return(n=d&&d[0])!==null&&n!==void 0?n:""}function r3(i,t){let n=i.substr(t,2);if(t+=n.length,n.toLowerCase()!=="0x")return"";let d=n3(i,t);return d===""?"":n+d}var s3=Oy([t3,i3,r3]),a3=Oy([s3,_F]);function o3(i,t){let n=a3(i,t);return t+=n.length,n===""?null:{evaluable:new c0(n),cursor:t}}function l3(i,t){let n=i.substr(t,1);if(t+=n.length,n!=="(")return null;let d=bP(i,t);if(!d)return null;t=d.cursor,t+=Lh(i,t).length;let r=i.substr(t,1);return t+=r.length,r!==")"?null:{evaluable:d.evaluable,cursor:t}}function h3(i,t){var n;return(n=o3(i,t))!==null&&n!==void 0?n:l3(i,t)}function TP(i,t){let n=h3(i,t);if(n)return n;let d=i.substr(t,1);if(t+=d.length,d!=="+"&&d!=="-"&&d!=="~")return null;let r=TP(i,t);return r?(t=r.cursor,{cursor:t,evaluable:new p0(d,r.evaluable)}):null}function u3(i,t,n){n+=Lh(t,n).length;let d=i.filter(r=>t.startsWith(r,n))[0];return d?(n+=d.length,n+=Lh(t,n).length,{cursor:n,operator:d}):null}function d3(i,t){return(n,d)=>{let r=i(n,d);if(!r)return null;d=r.cursor;let m=r.evaluable;for(;;){let e=u3(t,n,d);if(!e)break;d=e.cursor;let u=i(n,d);if(!u)return null;d=u.cursor,m=new f0(e.operator,m,u.evaluable)}return m?{cursor:d,evaluable:m}:null}}var c3=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((i,t)=>d3(i,t),TP);function bP(i,t){return t+=Lh(i,t).length,c3(i,t)}function f3(i){let t=bP(i,0);return!t||t.cursor+Lh(i,t.cursor).length!==i.length?null:t.evaluable}function nr(i){var t;let n=f3(i);return(t=n==null?void 0:n.evaluate())!==null&&t!==void 0?t:null}function CP(i){if(typeof i=="number")return i;if(typeof i=="string"){let t=nr(i);if(!re(t))return t}return 0}function p3(i){return String(i)}function gi(i){return t=>t.toFixed(Math.max(Math.min(i,20),0))}function Jt(i,t,n,d,r){let m=(i-t)/(n-t);return d+m*(r-d)}function QC(i){return String(i.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Re(i,t,n){return Math.min(Math.max(i,t),n)}function PP(i,t){return(i%t+t)%t}function m3(i,t){return re(i.step)?Math.max(QC(t),2):QC(i.step)}function wP(i){var t;return(t=i.step)!==null&&t!==void 0?t:1}function AP(i,t){var n;let d=Math.abs((n=i.step)!==null&&n!==void 0?n:t);return d===0?.1:Math.pow(10,Math.floor(Math.log10(d))-1)}function IP(i,t){return re(i.step)?null:new d0(i.step,t)}function RP(i){return!re(i.max)&&!re(i.min)?new Js({max:i.max,min:i.min}):!re(i.max)||!re(i.min)?new u0({max:i.max,min:i.min}):null}function MP(i,t){var n,d,r;return{formatter:(n=i.format)!==null&&n!==void 0?n:gi(m3(i,t)),keyScale:(d=i.keyScale)!==null&&d!==void 0?d:wP(i),pointerScale:(r=i.pointerScale)!==null&&r!==void 0?r:AP(i,t)}}function LP(i){return{format:i.optional.function,keyScale:i.optional.number,max:i.optional.number,min:i.optional.number,pointerScale:i.optional.number,step:i.optional.number}}function Fy(i){return{constraint:i.constraint,textProps:wt.fromObject(MP(i.params,i.initialValue))}}var rr=class{constructor(t){this.controller=t}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(t){this.controller.viewProps.set("disabled",t)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(t){this.controller.viewProps.set("hidden",t)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(t){return this.controller.importState(t)}exportState(){return this.controller.exportState()}},Lo=class{constructor(t){this.target=t}},Zs=class extends Lo{constructor(t,n,d){super(t),this.value=n,this.last=d??!0}},m0=class extends Lo{constructor(t,n){super(t),this.expanded=n}},v0=class extends Lo{constructor(t,n){super(t),this.index=n}},Qs=class extends rr{constructor(t){super(t),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new xe,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(t){this.controller.tag=t}on(t,n){let d=n.bind(this);return this.emitter_.on(t,r=>{d(r)}),this}refresh(){this.controller.value.fetch()}onValueChange_(t){let n=this.controller.value;this.emitter_.emit("change",new Zs(this,n.binding.target.read(),t.options.last))}},g0=class{constructor(t,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=t,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new xe}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}};function v3(i){if(!("binding"in i))return!1;let t=i.binding;return Ly(t)&&"read"in t&&"write"in t}function g3(i,t){let d=Object.keys(t).reduce((r,m)=>{if(r===void 0)return;let e=t[m],u=e(i[m]);return u.succeeded?Object.assign(Object.assign({},r),{[m]:u.value}):void 0},{});return d}function y3(i,t){return i.reduce((n,d)=>{if(n===void 0)return;let r=t(d);if(!(!r.succeeded||r.value===void 0))return[...n,r.value]},[])}function x3(i){return i===null?!1:typeof i=="object"}function tr(i){return t=>n=>{if(!t&&n===void 0)return{succeeded:!1,value:void 0};if(t&&n===void 0)return{succeeded:!0,value:void 0};let d=i(n);return d!==void 0?{succeeded:!0,value:d}:{succeeded:!1,value:void 0}}}function _C(i){return{custom:t=>tr(t)(i),boolean:tr(t=>typeof t=="boolean"?t:void 0)(i),number:tr(t=>typeof t=="number"?t:void 0)(i),string:tr(t=>typeof t=="string"?t:void 0)(i),function:tr(t=>typeof t=="function"?t:void 0)(i),constant:t=>tr(n=>n===t?t:void 0)(i),raw:tr(t=>t)(i),object:t=>tr(n=>{if(x3(n))return g3(n,t)})(i),array:t=>tr(n=>{if(Array.isArray(n))return y3(n,t)})(i)}}var y0={optional:_C(!0),required:_C(!1)};function ce(i,t){let n=t(y0),d=y0.required.object(n)(i);return d.succeeded?d.value:void 0}function wi(i,t,n,d){if(t&&!t(i))return!1;let r=ce(i,n);return r?d(r):!1}function Ai(i,t){var n;return Ks((n=i==null?void 0:i())!==null&&n!==void 0?n:{},t)}function js(i){return"value"in i}function OP(i){if(!My(i)||!("binding"in i))return!1;let t=i.binding;return Ly(t)}var Cn="http://www.w3.org/2000/svg";function Yc(i){i.offsetHeight}function S3(i,t){let n=i.style.transition;i.style.transition="none",t(),i.style.transition=n}function By(i){return i.ontouchstart!==void 0}function E3(){return globalThis}function T3(){return E3().document}function b3(i){let t=i.ownerDocument.defaultView;return t&&"document"in t?i.getContext("2d",{willReadFrequently:!0}):null}var C3={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function of(i,t){let n=i.createElementNS(Cn,"svg");return n.innerHTML=C3[t],n}function DP(i,t,n){i.insertBefore(t,i.children[n])}function Ny(i){i.parentElement&&i.parentElement.removeChild(i)}function FP(i){for(;i.children.length>0;)i.removeChild(i.children[0])}function P3(i){for(;i.childNodes.length>0;)i.removeChild(i.childNodes[0])}function BP(i){return i.relatedTarget?i.relatedTarget:"explicitOriginalTarget"in i?i.explicitOriginalTarget:null}function ir(i,t){i.emitter.on("change",n=>{t(n.rawValue)}),t(i.rawValue)}function wn(i,t,n){ir(i.value(t),n)}var w3="tp";function Wt(i){return(n,d)=>[w3,"-",i,"v",n?`_${n}`:"",d?`-${d}`:""].join("")}var Ah=Wt("lbl");function A3(i,t){let n=i.createDocumentFragment();return t.split(`
`).map(r=>i.createTextNode(r)).forEach((r,m)=>{m>0&&n.appendChild(i.createElement("br")),n.appendChild(r)}),n}var jc=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ah()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("div");d.classList.add(Ah("l")),wn(n.props,"label",m=>{re(m)?this.element.classList.add(Ah(void 0,"nol")):(this.element.classList.remove(Ah(void 0,"nol")),P3(d),d.appendChild(A3(t,m)))}),this.element.appendChild(d),this.labelElement=d;let r=t.createElement("div");r.classList.add(Ah("v")),this.element.appendChild(r),this.valueElement=r}},Kc=class{constructor(t,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new jc(t,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(t){return wi(t,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Ai(null,{label:this.props.get("label")})}};function I3(){return["veryfirst","first","last","verylast"]}var qC=Wt(""),tP={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},Oo=class{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;let n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{I3().forEach(d=>{n.classList.remove(qC(void 0,tP[d]))}),this.blade.get("positions").forEach(d=>{n.classList.add(qC(void 0,tP[d]))})}),this.viewProps.handleDispose(()=>{Ny(n)})}get parent(){return this.parent_}set parent(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(t){return wi(t,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Ai(null,Object.assign({},this.viewProps.exportState()))}},sr=class extends Oo{constructor(t,n){if(n.value!==n.valueController.value)throw le.shouldNeverHappen();let d=n.valueController.viewProps,r=new Kc(t,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new jc(t,{props:n.props,viewProps:d}),viewProps:d})),this.labelController=r,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(t){return wi(t,n=>{var d,r,m;return super.importState(n)&&this.labelController.importProps(n)&&((m=(r=(d=this.valueController).importProps)===null||r===void 0?void 0:r.call(d,t))!==null&&m!==void 0?m:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var t,n,d;return Ai(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(d=(n=(t=this.valueController).exportProps)===null||n===void 0?void 0:n.call(t))!==null&&d!==void 0?d:{}))}};function eP(i){let t=Object.assign({},i);return delete t.value,t}var Jc=class extends sr{constructor(t,n){super(t,n),this.tag=n.tag}importState(t){return wi(t,n=>super.importState(eP(t)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return Ai(()=>eP(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}};function R3(i){return js(i)&&OP(i.value)}var x0=class extends Jc{importState(t){return wi(t,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}};function M3(i){return js(i)&&v3(i.value)}function NP(i,t){for(;i.length<t;)i.push(void 0)}function L3(i){let t=[];return NP(t,i),t}function O3(i){let t=i.indexOf(void 0);return t<0?i:i.slice(0,t)}function D3(i,t){let n=[...O3(i),t];return n.length>i.length?n.splice(0,n.length-i.length):NP(n,i.length),n}var S0=class{constructor(t){this.emitter=new xe,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t.binding,this.value_=he(L3(t.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(t){this.value_.rawValue=t}setRawValue(t,n){this.value_.setRawValue(t,n)}fetch(){this.value_.rawValue=D3(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}onValueChange_(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}};function F3(i){if(!("binding"in i))return!1;let t=i.binding;return Ly(t)&&"read"in t&&!("write"in t)}var E0=class extends Jc{exportState(){return Ai(()=>super.exportState(),{binding:{readonly:!0}})}};function B3(i){return js(i)&&F3(i.value)}var T0=class extends rr{get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get title(){var t;return(t=this.controller.buttonController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.buttonController.props.set("title",t)}on(t,n){let d=n.bind(this);return this.controller.buttonController.emitter.on(t,()=>{d(new Lo(this))}),this}};function N3(i,t,n){n?i.classList.add(t):i.classList.remove(t)}function Bo(i,t){return n=>{N3(i,t,n)}}function ky(i,t){ir(i,n=>{t.textContent=n??""})}var _g=Wt("btn"),b0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(_g()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("button");d.classList.add(_g("b")),n.viewProps.bindDisabled(d),this.element.appendChild(d),this.buttonElement=d;let r=t.createElement("div");r.classList.add(_g("t")),ky(n.props.value("title"),r),this.buttonElement.appendChild(r)}},C0=class{constructor(t,n){this.emitter=new xe,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new b0(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(t){return wi(t,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Ai(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},Zc=class extends Oo{constructor(t,n){let d=new C0(t,{props:n.buttonProps,viewProps:n.viewProps}),r=new Kc(t,{blade:n.blade,props:n.labelProps,valueController:d});super({blade:n.blade,view:r.view,viewProps:n.viewProps}),this.buttonController=d,this.labelController=r}importState(t){return wi(t,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Ai(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},Qc=class{constructor(t){let[n,d]=t.split("-"),r=n.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=d??null}toString(){let t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}},No=new Qc("2.0.1");function ai(i){return Object.assign({core:No},i)}var k3=ai({id:"button",type:"blade",accept(i){let t=ce(i,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return t?{params:t}:null},controller(i){return new Zc(i.document,{blade:i.blade,buttonProps:wt.fromObject({title:i.params.title}),labelProps:wt.fromObject({label:i.params.label}),viewProps:i.viewProps})},api(i){return i.controller instanceof Zc?new T0(i.controller):null}});function V3(i,t){return i.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function G3(i,t){return i.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function U3(i,t){return i.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}function z3(i){return My(i)?"refresh"in i&&typeof i.refresh=="function":!1}function H3(i,t){if(!Mo.isBindable(i))throw le.notBindable();return new Mo(i,t)}var P0=class{constructor(t,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=t,this.emitter_=new xe,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(t=>this.pool_.createApi(t))}addBinding(t,n,d){let r=d??{},m=this.controller_.element.ownerDocument,e=this.pool_.createBinding(m,H3(t,n),r),u=this.pool_.createBindingApi(e);return this.add(u,r.index)}addFolder(t){return G3(this,t)}addButton(t){return V3(this,t)}addTab(t){return U3(this,t)}add(t,n){let d=t.controller;return this.controller_.rack.add(d,n),t}remove(t){this.controller_.rack.remove(t.controller)}addBlade(t){let n=this.controller_.element.ownerDocument,d=this.pool_.createBlade(n,t),r=this.pool_.createApi(d);return this.add(r,t.index)}on(t,n){let d=n.bind(this);return this.emitter_.on(t,r=>{d(r)}),this}refresh(){this.children.forEach(t=>{z3(t)&&t.refresh()})}onRackValueChange_(t){let n=t.bladeController,d=this.pool_.createApi(n),r=OP(n.value)?n.value.binding:null;this.emitter_.emit("change",new Zs(d,r?r.target.read():n.value.rawValue,t.options.last))}},Dh=class extends rr{constructor(t,n){super(t),this.rackApi_=new P0(t.rackController,n)}refresh(){this.rackApi_.refresh()}},Fh=class extends Oo{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}importState(t){return wi(t,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((d,r)=>d.importState(n.children[r])))}exportState(){return Ai(()=>super.exportState(),{children:this.rackController.rack.children.map(t=>t.exportState())})}};function w0(i){return"rackController"in i}var A0=class{constructor(t){this.emitter=new xe,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(let n of this.allItems())if(t(n))return n;return null}includes(t){return this.cache_.has(t)}add(t,n){if(this.includes(t))throw le.shouldNeverHappen();let d=n!==void 0?n:this.items_.length;this.items_.splice(d,0,t),this.cache_.add(t);let r=this.extract_(t);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(m=>{this.cache_.add(m)})),this.emitter.emit("add",{index:d,item:t,root:this,target:this})}remove(t){let n=this.items_.indexOf(t);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(t);let d=this.extract_(t);d&&(d.allItems().forEach(r=>{this.cache_.delete(r)}),d.emitter.off("add",this.onSubListAdd_),d.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}};function W3(i,t){for(let n=0;n<i.length;n++){let d=i[n];if(js(d)&&d.value===t)return d}return null}function $3(i){return w0(i)?i.rackController.rack.bcSet_:null}var I0=class{constructor(t){var n,d;this.emitter=new xe,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=t.blade)!==null&&n!==void 0?n:null,(d=this.blade_)===null||d===void 0||d.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new A0($3),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,n){var d;(d=t.parent)===null||d===void 0||d.remove(t),t.parent=this,this.bcSet_.add(t,n)}remove(t){t.parent=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(t)}onSetAdd_(t){this.updatePositions_();let n=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:n,sender:this}),!n)return;let d=t.item;if(d.viewProps.emitter.on("change",this.onChildViewPropsChange_),d.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),d.viewProps.handleDispose(this.onChildDispose_),js(d))d.value.emitter.on("change",this.onChildValueChange_);else if(w0(d)){let r=d.rackController.rack;if(r){let m=r.emitter;m.on("layout",this.onRackLayout_),m.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(t){this.updatePositions_();let n=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:n,sender:this}),!n)return;let d=t.item;if(js(d))d.value.emitter.off("change",this.onChildValueChange_);else if(w0(d)){let r=d.rackController.rack;if(r){let m=r.emitter;m.off("layout",this.onRackLayout_),m.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){let t=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),n=t[0],d=t[t.length-1];this.bcSet_.items.forEach(r=>{let m=[];r===n&&(m.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&m.push("veryfirst")),r===d&&(m.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&m.push("verylast")),r.blade.set("positions",m)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(t){let n=W3(this.find(js),t.sender);if(!n)throw le.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:t.options,sender:this})}onRackLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},Bh=class{constructor(t){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=t.element,this.viewProps=t.viewProps;let n=new I0({blade:t.root?void 0:t.blade,viewProps:t.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let d=this.rack.children.length-1;d>=0;d--)this.rack.children[d].viewProps.set("disposed",!0)})}onRackAdd_(t){t.root&&DP(this.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.root&&Ny(t.bladeController.view.element)}};function ko(){return new wt({positions:he([],{equals:HF})})}var _s=class extends wt{constructor(t){super(t)}static create(t){let n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},d=wt.createCore(n);return new _s(d)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";let t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!re(t)?`${t}px`:"auto"}bindExpandedClass(t,n){let d=()=>{this.styleExpanded?t.classList.add(n):t.classList.remove(n)};wn(this,"expanded",d),wn(this,"temporaryExpanded",d)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function X3(i,t){let n=0;return S3(t,()=>{i.set("expandedHeight",null),i.set("temporaryExpanded",!0),Yc(t),n=t.clientHeight,i.set("temporaryExpanded",null),Yc(t)}),n}function iP(i,t){t.style.height=i.styleHeight}function Vy(i,t){i.value("expanded").emitter.on("beforechange",()=>{if(i.set("completed",!1),re(i.get("expandedHeight"))){let n=X3(i,t);n>0&&i.set("expandedHeight",n)}i.set("shouldFixHeight",!0),Yc(t)}),i.emitter.on("change",()=>{iP(i,t)}),iP(i,t),t.addEventListener("transitionend",n=>{n.propertyName==="height"&&i.cleanUpTransition()})}var _c=class extends Dh{constructor(t,n){super(t,n),this.emitter_=new xe,this.controller.foldable.value("expanded").emitter.on("change",d=>{this.emitter_.emit("fold",new m0(this,d.sender.rawValue))}),this.rackApi_.on("change",d=>{this.emitter_.emit("change",d)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(t){this.controller.foldable.set("expanded",t)}get title(){return this.controller.props.get("title")}set title(t){this.controller.props.set("title",t)}get children(){return this.rackApi_.children}addBinding(t,n,d){return this.rackApi_.addBinding(t,n,d)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){return this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,n){let d=n.bind(this);return this.emitter_.on(t,r=>{d(r)}),this}},kP=Wt("cnt"),R0=class{constructor(t,n){var d;this.className_=Wt((d=n.viewName)!==null&&d!==void 0?d:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),kP()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),wn(this.foldable_,"completed",Bo(this.element,this.className_(void 0,"cpl")));let r=t.createElement("button");r.classList.add(this.className_("b")),wn(n.props,"title",c=>{re(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;let m=t.createElement("div");m.classList.add(this.className_("i")),this.element.appendChild(m);let e=t.createElement("div");e.classList.add(this.className_("t")),ky(n.props.value("title"),e),this.buttonElement.appendChild(e),this.titleElement=e;let u=t.createElement("div");u.classList.add(this.className_("m")),this.buttonElement.appendChild(u);let g=t.createElement("div");g.classList.add(this.className_("c")),this.element.appendChild(g),this.containerElement=g}},Nh=class extends Fh{constructor(t,n){var d;let r=_s.create((d=n.expanded)!==null&&d!==void 0?d:!0),m=new R0(t,{foldable:r,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Bh({blade:n.blade,element:m.containerElement,root:n.root,viewProps:n.viewProps}),view:m})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=r,Vy(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(t){return wi(t,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Ai(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}},Y3=ai({id:"folder",type:"blade",accept(i){let t=ce(i,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return t?{params:t}:null},controller(i){return new Nh(i.document,{blade:i.blade,expanded:i.params.expanded,props:wt.fromObject({title:i.params.title}),viewProps:i.viewProps})},api(i){return i.controller instanceof Nh?new _c(i.controller,i.pool):null}}),j3=Wt("");function nP(i,t){return Bo(i,j3(void 0,t))}var on=class extends wt{constructor(t){var n;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=$F(he(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var n,d,r;let m=t??{};return new on(wt.createCore({disabled:(n=m.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(d=m.hidden)!==null&&d!==void 0?d:!1,parent:(r=m.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){ir(this.globalDisabled_,nP(t,"disabled")),wn(this,"hidden",nP(t,"hidden"))}bindDisabled(t){ir(this.globalDisabled_,n=>{t.disabled=n})}bindTabIndex(t){ir(this.globalDisabled_,n=>{t.tabIndex=n?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",n=>{n&&t()})}importState(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){let t=this.get("parent");return(t?t.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var n;let d=t.previousRawValue;d==null||d.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}},rP=Wt("tbp"),M0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(rP()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("div");d.classList.add(rP("c")),this.element.appendChild(d),this.containerElement=d}},Ih=Wt("tbi"),L0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ih()),n.viewProps.bindClassModifiers(this.element),wn(n.props,"selected",m=>{m?this.element.classList.add(Ih(void 0,"sel")):this.element.classList.remove(Ih(void 0,"sel"))});let d=t.createElement("button");d.classList.add(Ih("b")),n.viewProps.bindDisabled(d),this.element.appendChild(d),this.buttonElement=d;let r=t.createElement("div");r.classList.add(Ih("t")),ky(n.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}},O0=class{constructor(t,n){this.emitter=new xe,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new L0(t,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},kh=class extends Fh{constructor(t,n){let d=new M0(t,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Bh({blade:n.blade,element:d.containerElement,viewProps:n.viewProps}),view:d})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new O0(t,{props:n.itemProps,viewProps:on.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,wn(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(t){return wi(t,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Ai(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},D0=class extends Dh{constructor(t,n){super(t,n),this.emitter_=new xe,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",d=>{this.emitter_.emit("change",d)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(t){let n=this.controller.view.element.ownerDocument,d=new kh(n,{blade:ko(),itemProps:wt.fromObject({selected:!1,title:t.title}),props:wt.fromObject({selected:!1}),viewProps:on.create()}),r=this.pool_.createApi(d);return this.rackApi_.add(r,t.index)}removePage(t){this.rackApi_.remove(this.rackApi_.children[t])}on(t,n){let d=n.bind(this);return this.emitter_.on(t,r=>{d(r)}),this}onSelect_(t){this.emitter_.emit("select",new v0(this,t.rawValue))}},F0=class extends Dh{get title(){var t;return(t=this.controller.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller.itemController.props.set("title",t)}get selected(){return this.controller.props.get("selected")}set selected(t){this.controller.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,n){this.rackApi_.add(t,n)}remove(t){this.rackApi_.remove(t)}addBinding(t,n,d){return this.rackApi_.addBinding(t,n,d)}addBlade(t){return this.rackApi_.addBlade(t)}},sP=-1,B0=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=he(!0),this.selectedIndex=he(sP),this.items_=[]}add(t,n){let d=n??this.items_.length;this.items_.splice(d,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){let n=this.items_.indexOf(t);n<0||(this.items_.splice(n,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=sP,this.empty.rawValue=!0;return}let t=this.items_.findIndex(n=>n.rawValue);t<0?(this.items_.forEach((n,d)=>{n.rawValue=d===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,d)=>{n.rawValue=d===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){let n=this.items_.findIndex(d=>d===t.sender);this.items_.forEach((d,r)=>{d.rawValue=r===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}},Rh=Wt("tab"),N0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Rh(),kP()),n.viewProps.bindClassModifiers(this.element),ir(n.empty,Bo(this.element,Rh(void 0,"nop")));let d=t.createElement("div");d.classList.add(Rh("t")),this.element.appendChild(d),this.itemsElement=d;let r=t.createElement("div");r.classList.add(Rh("i")),this.element.appendChild(r);let m=t.createElement("div");m.classList.add(Rh("c")),this.element.appendChild(m),this.contentsElement=m}},qc=class extends Fh{constructor(t,n){let d=new B0,r=new N0(t,{empty:d.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Bh({blade:n.blade,element:r.contentsElement,viewProps:n.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);let m=this.rackController.rack;m.emitter.on("add",this.onRackAdd_),m.emitter.on("remove",this.onRackRemove_),this.tab=d}add(t,n){this.rackController.rack.add(t,n)}remove(t){this.rackController.rack.remove(this.rackController.rack.children[t])}onRackAdd_(t){if(!t.root)return;let n=t.bladeController;DP(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(t){if(!t.root)return;let n=t.bladeController;Ny(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}},VP=ai({id:"tab",type:"blade",accept(i){let t=ce(i,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!t||t.pages.length===0?null:{params:t}},controller(i){let t=new qc(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(n=>{let d=new kh(i.document,{blade:ko(),itemProps:wt.fromObject({selected:!1,title:n.title}),props:wt.fromObject({selected:!1}),viewProps:on.create()});t.add(d)}),t},api(i){return i.controller instanceof qc?new D0(i.controller,i.pool):i.controller instanceof kh?new F0(i.controller,i.pool):null}});function K3(i,t){let n=i.accept(t.params);if(!n)return null;let d=ce(t.params,r=>({disabled:r.optional.boolean,hidden:r.optional.boolean}));return i.controller({blade:ko(),document:t.document,params:Object.assign(Object.assign({},n.params),{disabled:d==null?void 0:d.disabled,hidden:d==null?void 0:d.hidden}),viewProps:on.create({disabled:d==null?void 0:d.disabled,hidden:d==null?void 0:d.hidden})})}var Vh=class extends Qs{get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}},k0=class{constructor(){this.disabled=!1,this.emitter=new xe}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},V0=class{constructor(t,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new xe,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;let t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;let t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},qs=class{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((n,d)=>d.constrain(n),t)}};function tf(i,t){if(i instanceof t)return i;if(i instanceof qs){let n=i.constraints.reduce((d,r)=>d||(r instanceof t?r:null),null);if(n)return n}return null}var ta=class{constructor(t){this.values=wt.fromObject({options:t})}constrain(t){let n=this.values.get("options");return n.length===0||n.filter(r=>r.value===t).length>0?t:n[0].value}};function jh(i){var t;let n=y0;if(Array.isArray(i))return(t=ce({items:i},d=>({items:d.required.array(d.required.object({text:d.required.string,value:d.required.raw}))})))===null||t===void 0?void 0:t.items;if(typeof i=="object")return n.required.raw(i).value}function Gy(i){if(Array.isArray(i))return i;let t=[];return Object.keys(i).forEach(n=>{t.push({text:n,value:i[n]})}),t}function Uy(i){return re(i)?null:new ta(Gy(i))}var qg=Wt("lst"),G0=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=t.createElement("div"),this.element.classList.add(qg()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("select");d.classList.add(qg("s")),n.viewProps.bindDisabled(d),this.element.appendChild(d),this.selectElement=d;let r=t.createElement("div");r.classList.add(qg("m")),r.appendChild(of(t,"dropdown")),this.element.appendChild(r),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,wn(this.props_,"options",m=>{FP(this.selectElement),m.forEach(e=>{let u=t.createElement("option");u.textContent=e.text,this.selectElement.appendChild(u)}),this.update_()})}update_(){let t=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},An=class{constructor(t,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new G0(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){let n=t.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(t){return wi(t,null,n=>({options:n.required.custom(jh)}),n=>(this.props.set("options",Gy(n.options)),!0))}exportProps(){return Ai(null,{options:this.props.get("options")})}},aP=Wt("pop"),U0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(aP()),n.viewProps.bindClassModifiers(this.element),ir(n.shows,Bo(this.element,aP(void 0,"v")))}},ef=class{constructor(t,n){this.shows=he(!1),this.viewProps=n.viewProps,this.view=new U0(t,{shows:this.shows,viewProps:this.viewProps})}},oP=Wt("txt"),z0=class{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(oP()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);let d=t.createElement("input");d.classList.add(oP("i")),d.type="text",n.viewProps.bindDisabled(d),this.element.appendChild(d),this.inputElement=d,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){let t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}},ea=class{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new z0(t,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){let d=t.currentTarget.value,r=this.parser_(d);re(r)||(this.value.rawValue=r),this.view.refresh()}};function J3(i){return String(i)}function GP(i){return i==="false"?!1:!!i}function lP(i){return J3(i)}function Z3(i){return t=>i.reduce((n,d)=>n!==null?n:d(t),null)}var Q3=gi(0);function nf(i){return Q3(i)+"%"}function UP(i){return String(i)}function H0(i){return i}function Vo({primary:i,secondary:t,forward:n,backward:d}){let r=!1;function m(e){r||(r=!0,e(),r=!1)}i.emitter.on("change",e=>{m(()=>{t.setRawValue(n(i.rawValue,t.rawValue),e.options)})}),t.emitter.on("change",e=>{m(()=>{i.setRawValue(d(i.rawValue,t.rawValue),e.options)}),m(()=>{t.setRawValue(n(i.rawValue,t.rawValue),e.options)})}),m(()=>{t.setRawValue(n(i.rawValue,t.rawValue),{forceEmit:!1,last:!0})})}function vi(i,t){let n=i*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+n:t.downKey?-n:0}function Gh(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}function ar(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}function _3(i){return i==="ArrowUp"||i==="ArrowDown"}function zP(i){return _3(i)||i==="ArrowLeft"||i==="ArrowRight"}function t0(i,t){var n,d;let r=t.ownerDocument.defaultView,m=t.getBoundingClientRect();return{x:i.pageX-(((n=r&&r.scrollX)!==null&&n!==void 0?n:0)+m.left),y:i.pageY-(((d=r&&r.scrollY)!==null&&d!==void 0?d:0)+m.top)}}var or=class{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new xe,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){let n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var n;t.preventDefault(),(n=t.currentTarget)===null||n===void 0||n.focus();let d=this.elem_.ownerDocument;d.addEventListener("mousemove",this.onDocumentMouseMove_),d.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(t0(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(t0(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){let n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(t0(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();let n=t.targetTouches.item(0),d=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-d.left,y:n.clientY-d.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchMove_(t){let n=t.targetTouches.item(0),d=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-d.left,y:n.clientY-d.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=n}onTouchEnd_(t){var n;let d=(n=t.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(d?{x:d.clientX-r.left,y:d.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}},ki=Wt("txt"),W0=class{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(ki(),ki(void 0,"num")),n.arrayPosition&&this.element.classList.add(ki(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("input");d.classList.add(ki("i")),d.type="text",n.viewProps.bindDisabled(d),this.element.appendChild(d),this.inputElement=d,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ki()),this.inputElement.classList.add(ki("i"));let r=t.createElement("div");r.classList.add(ki("k")),this.element.appendChild(r),this.knobElement=r;let m=t.createElementNS(Cn,"svg");m.classList.add(ki("g")),this.knobElement.appendChild(m);let e=t.createElementNS(Cn,"path");e.classList.add(ki("gb")),m.appendChild(e),this.guideBodyElem_=e;let u=t.createElementNS(Cn,"path");u.classList.add(ki("gh")),m.appendChild(u),this.guideHeadElem_=u;let g=t.createElement("div");g.classList.add(Wt("tt")()),this.knobElement.appendChild(g),this.tooltipElem_=g,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(ki(void 0,"drg"));return}this.element.classList.add(ki(void 0,"drg"));let n=t.rawValue/this.props_.get("pointerScale"),d=n+(n>0?-1:n<0?1:0),r=Re(-d,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${d+r},0 L${d},4 L${d+r},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);let m=this.props_.get("formatter");this.tooltipElem_.textContent=m(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){let t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}},ia=class{constructor(t,n){var d;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(d=n.sliderProps)!==null&&d!==void 0?d:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=he(null),this.view=new W0(t,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);let r=new or(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var n,d;let r=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),m=(d=this.sliderProps_)===null||d===void 0?void 0:d.get("max"),e=t;return r!==void 0&&(e=Math.max(e,r)),m!==void 0&&(e=Math.min(e,m)),e}onInputChange_(t){let d=t.currentTarget.value,r=this.parser_(d);re(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(t){let n=vi(this.props.get("keyScale"),Gh(t));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(t){vi(this.props.get("keyScale"),Gh(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;let n=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(t){let n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){let n=this.computeDraggingValue_(t.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}},e0=Wt("sld"),$0=class{constructor(t,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(e0()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("div");d.classList.add(e0("t")),n.viewProps.bindTabIndex(d),this.element.appendChild(d),this.trackElement=d;let r=t.createElement("div");r.classList.add(e0("k")),this.trackElement.appendChild(r),this.knobElement=r,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){let t=Re(Jt(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}},X0=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new $0(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new or(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){t.point&&this.value.setRawValue(Jt(Re(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){let n=vi(this.props.get("keyScale"),ar(t));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(t){vi(this.props.get("keyScale"),ar(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},i0=Wt("sldtxt"),Y0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(i0());let d=t.createElement("div");d.classList.add(i0("s")),this.sliderView_=n.sliderView,d.appendChild(this.sliderView_.element),this.element.appendChild(d);let r=t.createElement("div");r.classList.add(i0("t")),this.textView_=n.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}},Do=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new X0(t,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new ia(t,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new Y0(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(t){return wi(t,null,n=>({max:n.required.number,min:n.required.number}),n=>{let d=this.sliderC_.props;return d.set("max",n.max),d.set("min",n.min),!0})}exportProps(){let t=this.sliderC_.props;return Ai(null,{max:t.get("max"),min:t.get("min")})}};function HP(i){return{sliderProps:new wt({keyScale:i.keyScale,max:i.max,min:i.min}),textProps:new wt({formatter:he(i.formatter),keyScale:i.keyScale,pointerScale:he(i.pointerScale)})}}var q3={containerUnitSize:"cnt-usz"};function WP(i){return`--${q3[i]}`}function Uh(i){return LP(i)}function Xr(i){if(a0(i))return ce(i,Uh)}function er(i,t){if(!i)return;let n=[],d=IP(i,t);d&&n.push(d);let r=RP(i);return r&&n.push(r),new qs(n)}function t5(i){return i?i.major===No.major:!1}function $P(i){if(i==="inline"||i==="popup")return i}function Kh(i,t){i.write(t)}var Wc=Wt("ckb"),j0=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Wc()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("label");d.classList.add(Wc("l")),this.element.appendChild(d);let r=t.createElement("input");r.classList.add(Wc("i")),r.type="checkbox",d.appendChild(r),this.inputElement=r,n.viewProps.bindDisabled(this.inputElement);let m=t.createElement("div");m.classList.add(Wc("w")),d.appendChild(m);let e=of(t,"check");m.appendChild(e),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},K0=class{constructor(t,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new j0(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){let n=t.currentTarget;this.value.rawValue=n.checked}};function e5(i){let t=[],n=Uy(i.options);return n&&t.push(n),new qs(t)}var i5=ai({id:"input-bool",type:"input",accept:(i,t)=>{if(typeof i!="boolean")return null;let n=ce(t,d=>({options:d.optional.custom(jh),readonly:d.optional.constant(!1)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>GP,constraint:i=>e5(i.params),writer:i=>Kh},controller:i=>{let t=i.document,n=i.value,d=i.constraint,r=d&&tf(d,ta);return r?new An(t,{props:new wt({options:r.values.value("options")}),value:n,viewProps:i.viewProps}):new K0(t,{value:n,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="boolean"?null:i.controller.valueController instanceof An?new Vh(i.controller):null}}),Ys=Wt("col"),J0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ys()),n.foldable.bindExpandedClass(this.element,Ys(void 0,"expanded")),wn(n.foldable,"completed",Bo(this.element,Ys(void 0,"cpl")));let d=t.createElement("div");d.classList.add(Ys("h")),this.element.appendChild(d);let r=t.createElement("div");r.classList.add(Ys("s")),d.appendChild(r),this.swatchElement=r;let m=t.createElement("div");if(m.classList.add(Ys("t")),d.appendChild(m),this.textElement=m,n.pickerLayout==="inline"){let e=t.createElement("div");e.classList.add(Ys("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}};function n5(i,t,n){let d=Re(i/255,0,1),r=Re(t/255,0,1),m=Re(n/255,0,1),e=Math.max(d,r,m),u=Math.min(d,r,m),g=e-u,c=0,s=0,o=(u+e)/2;return g!==0&&(s=g/(1-Math.abs(e+u-1)),d===e?c=(r-m)/g:r===e?c=2+(m-d)/g:c=4+(d-r)/g,c=c/6+(c<0?1:0)),[c*360,s*100,o*100]}function r5(i,t,n){let d=(i%360+360)%360,r=Re(t/100,0,1),m=Re(n/100,0,1),e=(1-Math.abs(2*m-1))*r,u=e*(1-Math.abs(d/60%2-1)),g=m-e/2,c,s,o;return d>=0&&d<60?[c,s,o]=[e,u,0]:d>=60&&d<120?[c,s,o]=[u,e,0]:d>=120&&d<180?[c,s,o]=[0,e,u]:d>=180&&d<240?[c,s,o]=[0,u,e]:d>=240&&d<300?[c,s,o]=[u,0,e]:[c,s,o]=[e,0,u],[(c+g)*255,(s+g)*255,(o+g)*255]}function s5(i,t,n){let d=Re(i/255,0,1),r=Re(t/255,0,1),m=Re(n/255,0,1),e=Math.max(d,r,m),u=Math.min(d,r,m),g=e-u,c;g===0?c=0:e===d?c=60*(((r-m)/g%6+6)%6):e===r?c=60*((m-d)/g+2):c=60*((d-r)/g+4);let s=e===0?0:g/e,o=e;return[c,s*100,o*100]}function XP(i,t,n){let d=PP(i,360),r=Re(t/100,0,1),m=Re(n/100,0,1),e=m*r,u=e*(1-Math.abs(d/60%2-1)),g=m-e,c,s,o;return d>=0&&d<60?[c,s,o]=[e,u,0]:d>=60&&d<120?[c,s,o]=[u,e,0]:d>=120&&d<180?[c,s,o]=[0,e,u]:d>=180&&d<240?[c,s,o]=[0,u,e]:d>=240&&d<300?[c,s,o]=[u,0,e]:[c,s,o]=[e,0,u],[(c+g)*255,(s+g)*255,(o+g)*255]}function a5(i,t,n){let d=n+t*(100-Math.abs(2*n-100))/200;return[i,d!==0?t*(100-Math.abs(2*n-100))/d:0,n+t*(100-Math.abs(2*n-100))/(2*100)]}function o5(i,t,n){let d=100-Math.abs(n*(200-t)/100-100);return[i,d!==0?t*n/d:0,n*(200-t)/(2*100)]}function In(i){return[i[0],i[1],i[2]]}function lf(i,t){return[i[0],i[1],i[2],t]}var l5={hsl:{hsl:(i,t,n)=>[i,t,n],hsv:a5,rgb:r5},hsv:{hsl:o5,hsv:(i,t,n)=>[i,t,n],rgb:XP},rgb:{hsl:n5,hsv:s5,rgb:(i,t,n)=>[i,t,n]}};function Fo(i,t){return[t==="float"?1:i==="rgb"?255:360,t==="float"?1:i==="rgb"?255:100,t==="float"?1:i==="rgb"?255:100]}function h5(i,t){return i===t?t:PP(i,t)}function YP(i,t,n){var d;let r=Fo(t,n);return[t==="rgb"?Re(i[0],0,r[0]):h5(i[0],r[0]),Re(i[1],0,r[1]),Re(i[2],0,r[2]),Re((d=i[3])!==null&&d!==void 0?d:1,0,1)]}function hP(i,t,n,d){let r=Fo(t,n),m=Fo(t,d);return i.map((e,u)=>e/r[u]*m[u])}function jP(i,t,n){let d=hP(i,t.mode,t.type,"int"),r=l5[t.mode][n.mode](...d);return hP(r,n.mode,"int",n.type)}var Ut=class{static black(){return new Ut([0,0,0],"rgb")}constructor(t,n){this.type="int",this.mode=n,this.comps_=YP(t,n,this.type)}getComponents(t){return lf(jP(In(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}},Hr=Wt("colp"),Z0=class{constructor(t,n){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Hr()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("div");d.classList.add(Hr("hsv"));let r=t.createElement("div");r.classList.add(Hr("sv")),this.svPaletteView_=n.svPaletteView,r.appendChild(this.svPaletteView_.element),d.appendChild(r);let m=t.createElement("div");m.classList.add(Hr("h")),this.hPaletteView_=n.hPaletteView,m.appendChild(this.hPaletteView_.element),d.appendChild(m),this.element.appendChild(d);let e=t.createElement("div");if(e.classList.add(Hr("rgb")),this.textsView_=n.textsView,e.appendChild(this.textsView_.element),this.element.appendChild(e),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};let u=t.createElement("div");u.classList.add(Hr("a"));let g=t.createElement("div");g.classList.add(Hr("ap")),g.appendChild(this.alphaViews_.palette.element),u.appendChild(g);let c=t.createElement("div");c.classList.add(Hr("at")),c.appendChild(this.alphaViews_.text.element),u.appendChild(c),this.element.appendChild(u)}}get allFocusableElements(){let t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}};function u5(i){return i==="int"?"int":i==="float"?"float":void 0}function zy(i){return ce(i,t=>({color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(u5)}),expanded:t.optional.boolean,picker:t.optional.custom($P),readonly:t.optional.constant(!1)}))}function na(i){return i?.1:1}function KP(i){var t;return(t=i.color)===null||t===void 0?void 0:t.type}var zh=class{constructor(t,n){this.type="float",this.mode=n,this.comps_=YP(t,n,this.type)}getComponents(t){return lf(jP(In(this.comps_),{mode:this.mode,type:this.type},{mode:t??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){let t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}},d5={int:(i,t)=>new Ut(i,t),float:(i,t)=>new zh(i,t)};function Hy(i,t,n){return d5[n](i,t)}function c5(i){return i.type==="float"}function f5(i){return i.type==="int"}function p5(i){let t=i.getComponents(),n=Fo(i.mode,"int");return new Ut([Math.round(Jt(t[0],0,1,0,n[0])),Math.round(Jt(t[1],0,1,0,n[1])),Math.round(Jt(t[2],0,1,0,n[2])),t[3]],i.mode)}function m5(i){let t=i.getComponents(),n=Fo(i.mode,"int");return new zh([Jt(t[0],0,n[0],0,1),Jt(t[1],0,n[1],0,1),Jt(t[2],0,n[2],0,1),t[3]],i.mode)}function si(i,t){if(i.type===t)return i;if(f5(i)&&t==="float")return m5(i);if(c5(i)&&t==="int")return p5(i);throw le.shouldNeverHappen()}function v5(i,t){return i.alpha===t.alpha&&i.mode===t.mode&&i.notation===t.notation&&i.type===t.type}function Vi(i,t){let n=i.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*t:parseFloat(i),t)}var g5={deg:i=>i,grad:i=>i*360/400,rad:i=>i*360/(2*Math.PI),turn:i=>i*360};function JP(i){let t=i.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(i);let n=parseFloat(t[1]),d=t[2];return g5[d](n)}function ZP(i){let t=i.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let n=[Vi(t[1],255),Vi(t[2],255),Vi(t[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function y5(i){let t=ZP(i);return t?new Ut(t,"rgb"):null}function QP(i){let t=i.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let n=[Vi(t[1],255),Vi(t[2],255),Vi(t[3],255),Vi(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function x5(i){let t=QP(i);return t?new Ut(t,"rgb"):null}function _P(i){let t=i.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let n=[JP(t[1]),Vi(t[2],100),Vi(t[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function S5(i){let t=_P(i);return t?new Ut(t,"hsl"):null}function qP(i){let t=i.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;let n=[JP(t[1]),Vi(t[2],100),Vi(t[3],100),Vi(t[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function E5(i){let t=qP(i);return t?new Ut(t,"hsl"):null}function tw(i){let t=i.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];let n=i.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function T5(i){let t=tw(i);return t?new Ut(t,"rgb"):null}function ew(i){let t=i.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),Jt(parseInt(t[4]+t[4],16),0,255,0,1)];let n=i.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Jt(parseInt(n[4],16),0,255,0,1)]:null}function b5(i){let t=ew(i);return t?new Ut(t,"rgb"):null}function iw(i){let t=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;let n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function uP(i){return t=>{let n=iw(t);return n?Hy(n,"rgb",i):null}}function nw(i){let t=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;let n=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function dP(i){return t=>{let n=nw(t);return n?Hy(n,"rgb",i):null}}var C5=[{parser:tw,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ew,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:ZP,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:QP,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:_P,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:qP,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:iw,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:nw,result:{alpha:!0,mode:"rgb",notation:"object"}}];function P5(i){return C5.reduce((t,{parser:n,result:d})=>t||(n(i)?d:null),null)}function w5(i,t="int"){let n=P5(i);return n?n.notation==="hex"&&t!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:t}):null:null}function Jh(i){let t=[T5,b5,y5,x5,S5,E5];i==="int"&&t.push(uP("int"),dP("int")),i==="float"&&t.push(uP("float"),dP("float"));let n=Z3(t);return d=>{let r=n(d);return r?si(r,i):null}}function A5(i){let t=Jh("int");if(typeof i!="string")return Ut.black();let n=t(i);return n??Ut.black()}function rw(i){let t=Re(Math.floor(i),0,255).toString(16);return t.length===1?`0${t}`:t}function Wy(i,t="#"){let n=In(i.getComponents("rgb")).map(rw).join("");return`${t}${n}`}function $y(i,t="#"){let n=i.getComponents("rgb"),d=[n[0],n[1],n[2],n[3]*255].map(rw).join("");return`${t}${d}`}function sw(i){let t=gi(0),n=si(i,"int");return`rgb(${In(n.getComponents("rgb")).map(r=>t(r)).join(", ")})`}function $c(i){let t=gi(2),n=gi(0);return`rgba(${si(i,"int").getComponents("rgb").map((m,e)=>(e===3?t:n)(m)).join(", ")})`}function I5(i){let t=[gi(0),nf,nf],n=si(i,"int");return`hsl(${In(n.getComponents("hsl")).map((r,m)=>t[m](r)).join(", ")})`}function R5(i){let t=[gi(0),nf,nf,gi(2)];return`hsla(${si(i,"int").getComponents("hsl").map((r,m)=>t[m](r)).join(", ")})`}function aw(i,t){let n=gi(t==="float"?2:0),d=["r","g","b"],r=si(i,t);return`{${In(r.getComponents("rgb")).map((e,u)=>`${d[u]}: ${n(e)}`).join(", ")}}`}function M5(i){return t=>aw(t,i)}function ow(i,t){let n=gi(2),d=gi(t==="float"?2:0),r=["r","g","b","a"];return`{${si(i,t).getComponents("rgb").map((u,g)=>{let c=g===3?n:d;return`${r[g]}: ${c(u)}`}).join(", ")}}`}function L5(i){return t=>ow(t,i)}var O5=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Wy},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:$y},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:sw},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:$c},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:I5},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:R5},...["int","float"].reduce((i,t)=>[...i,{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:M5(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:L5(t)}],[])];function lw(i){return O5.reduce((t,n)=>t||(v5(n.format,i)?n.stringifier:null),null)}var Mh=Wt("apl"),Q0=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Mh()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);let d=t.createElement("div");d.classList.add(Mh("b")),this.element.appendChild(d);let r=t.createElement("div");r.classList.add(Mh("c")),d.appendChild(r),this.colorElem_=r;let m=t.createElement("div");m.classList.add(Mh("m")),this.element.appendChild(m),this.markerElem_=m;let e=t.createElement("div");e.classList.add(Mh("p")),this.markerElem_.appendChild(e),this.previewElem_=e,this.update_()}update_(){let t=this.value.rawValue,n=t.getComponents("rgb"),d=new Ut([n[0],n[1],n[2],0],"rgb"),r=new Ut([n[0],n[1],n[2],255],"rgb"),m=["to right",$c(d),$c(r)];this.colorElem_.style.background=`linear-gradient(${m.join(",")})`,this.previewElem_.style.backgroundColor=$c(t);let e=Jt(n[3],0,1,0,100);this.markerElem_.style.left=`${e}%`}onValueChange_(){this.update_()}},_0=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Q0(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new or(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;let d=t.point.x/t.bounds.width,r=this.value.rawValue,[m,e,u]=r.getComponents("hsv");this.value.setRawValue(new Ut([m,e,u,d],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){let n=vi(na(!0),ar(t));if(n===0)return;let d=this.value.rawValue,[r,m,e,u]=d.getComponents("hsv");this.value.setRawValue(new Ut([r,m,e,u+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){vi(na(!0),ar(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Io=Wt("coltxt");function D5(i){let t=i.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return t.appendChild(n.reduce((d,r)=>{let m=i.createElement("option");return m.textContent=r.text,m.value=r.value,d.appendChild(m),d},i.createDocumentFragment())),t}var q0=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Io()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("div");d.classList.add(Io("m")),this.modeElem_=D5(t),this.modeElem_.classList.add(Io("ms")),d.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);let r=t.createElement("div");r.classList.add(Io("mm")),r.appendChild(of(t,"dropdown")),d.appendChild(r),this.element.appendChild(d);let m=t.createElement("div");m.classList.add(Io("w")),this.element.appendChild(m),this.inputsElem_=m,this.inputViews_=n.inputViews,this.applyInputViews_(),ir(n.mode,e=>{this.modeElem_.value=e})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(t){this.inputViews_=t,this.applyInputViews_()}applyInputViews_(){FP(this.inputsElem_);let t=this.element.ownerDocument;this.inputViews_.forEach(n=>{let d=t.createElement("div");d.classList.add(Io("c")),d.appendChild(n.element),this.inputsElem_.appendChild(d)})}};function F5(i){return gi(i==="float"?2:0)}function B5(i,t,n){let d=Fo(i,t)[n];return new Js({min:0,max:d})}function N5(i,t,n){return new ia(i,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:t.parser,props:wt.fromObject({formatter:F5(t.colorType),keyScale:na(!1),pointerScale:t.colorType==="float"?.01:1}),value:he(0,{constraint:B5(t.colorMode,t.colorType,n)}),viewProps:t.viewProps})}function k5(i,t){let n={colorMode:t.colorMode,colorType:t.colorType,parser:nr,viewProps:t.viewProps};return[0,1,2].map(d=>{let r=N5(i,n,d);return Vo({primary:t.value,secondary:r.value,forward(m){return si(m,t.colorType).getComponents(t.colorMode)[d]},backward(m,e){let u=t.colorMode,c=si(m,t.colorType).getComponents(u);c[d]=e;let s=Hy(lf(In(c),c[3]),u,t.colorType);return si(s,"int")}}),r})}function V5(i,t){let n=new ea(i,{parser:Jh("int"),props:wt.fromObject({formatter:Wy}),value:he(Ut.black()),viewProps:t.viewProps});return Vo({primary:t.value,secondary:n.value,forward:d=>new Ut(In(d.getComponents()),d.mode),backward:(d,r)=>new Ut(lf(In(r.getComponents(d.mode)),d.getComponents()[3]),d.mode)}),[n]}function G5(i){return i!=="hex"}var ty=class{constructor(t,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=he(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new q0(t,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){let n=this.colorMode.rawValue;return G5(n)?k5(t,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):V5(t,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(t){let n=t.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(d=>d.view)}},n0=Wt("hpl"),ey=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(n0()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);let d=t.createElement("div");d.classList.add(n0("c")),this.element.appendChild(d);let r=t.createElement("div");r.classList.add(n0("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){let t=this.value.rawValue,[n]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=sw(new Ut([n,100,100],"hsv"));let d=Jt(n,0,360,0,100);this.markerElem_.style.left=`${d}%`}onValueChange_(){this.update_()}},iy=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new ey(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new or(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;let d=Jt(Re(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),r=this.value.rawValue,[,m,e,u]=r.getComponents("hsv");this.value.setRawValue(new Ut([d,m,e,u],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){let n=vi(na(!1),ar(t));if(n===0)return;let d=this.value.rawValue,[r,m,e,u]=d.getComponents("hsv");this.value.setRawValue(new Ut([r+n,m,e,u],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){vi(na(!1),ar(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},r0=Wt("svp"),cP=64,ny=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(r0()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);let d=t.createElement("canvas");d.height=cP,d.width=cP,d.classList.add(r0("c")),this.element.appendChild(d),this.canvasElement=d;let r=t.createElement("div");r.classList.add(r0("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){let t=b3(this.canvasElement);if(!t)return;let d=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,m=this.canvasElement.height,e=t.getImageData(0,0,r,m),u=e.data;for(let s=0;s<m;s++)for(let o=0;o<r;o++){let a=Jt(o,0,r,0,100),l=Jt(s,0,m,100,0),p=XP(d[0],a,l),h=(s*r+o)*4;u[h]=p[0],u[h+1]=p[1],u[h+2]=p[2],u[h+3]=255}t.putImageData(e,0,0);let g=Jt(d[1],0,100,0,100);this.markerElem_.style.left=`${g}%`;let c=Jt(d[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}},ry=class{constructor(t,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new ny(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new or(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;let d=Jt(t.point.x,0,t.bounds.width,0,100),r=Jt(t.point.y,0,t.bounds.height,100,0),[m,,,e]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Ut([m,d,r,e],"hsv"),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){zP(t.key)&&t.preventDefault();let[n,d,r,m]=this.value.rawValue.getComponents("hsv"),e=na(!1),u=vi(e,ar(t)),g=vi(e,Gh(t));u===0&&g===0||this.value.setRawValue(new Ut([n,d+u,r+g,m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){let n=na(!1),d=vi(n,ar(t)),r=vi(n,Gh(t));d===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},sy=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new iy(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new ry(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new _0(t,{value:this.value,viewProps:this.viewProps}),text:new ia(t,{parser:nr,props:wt.fromObject({pointerScale:.01,keyScale:.1,formatter:gi(2)}),value:he(0,{constraint:new Js({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Vo({primary:this.value,secondary:this.alphaIcs_.text.value,forward:d=>d.getComponents()[3],backward:(d,r)=>{let m=d.getComponents();return m[3]=r,new Ut(m,d.mode)}}),this.textsC_=new ty(t,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Z0(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}},s0=Wt("colsw"),ay=class{constructor(t,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=t.createElement("div"),this.element.classList.add(s0()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("div");d.classList.add(s0("sw")),this.element.appendChild(d),this.swatchElem_=d;let r=t.createElement("button");r.classList.add(s0("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){let t=this.value.rawValue;this.swatchElem_.style.backgroundColor=$y(t)}onValueChange_(){this.update_()}},oy=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new ay(t,{value:this.value,viewProps:this.viewProps})}},Hh=class{constructor(t,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=_s.create(n.expanded),this.swatchC_=new oy(t,{value:this.value,viewProps:this.viewProps});let d=this.swatchC_.view.buttonElement;d.addEventListener("blur",this.onButtonBlur_),d.addEventListener("click",this.onButtonClick_),this.textC_=new ea(t,{parser:n.parser,props:wt.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new J0(t,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new ef(t,{viewProps:this.viewProps}):null;let r=new sy(t,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(m=>{m.addEventListener("blur",this.onPopupChildBlur_),m.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Vo({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:m=>m,backward:(m,e)=>e})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Vy(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;let n=this.view.element,d=t.relatedTarget;(!d||!n.contains(d))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;let n=this.popC_.view.element,d=BP(t);d&&n.contains(d)||d&&d===this.swatchC_.view.buttonElement&&!By(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function U5(i){return In(i.getComponents("rgb")).reduce((t,n)=>t<<8|Math.floor(n)&255,0)}function z5(i){return i.getComponents("rgb").reduce((t,n,d)=>{let r=Math.floor(d===3?n*255:n)&255;return t<<8|r},0)>>>0}function H5(i){return new Ut([i>>16&255,i>>8&255,i&255],"rgb")}function W5(i){return new Ut([i>>24&255,i>>16&255,i>>8&255,Jt(i&255,0,255,0,1)],"rgb")}function $5(i){return typeof i!="number"?Ut.black():H5(i)}function X5(i){return typeof i!="number"?Ut.black():W5(i)}function Xc(i,t){return typeof i!="object"||re(i)?!1:t in i&&typeof i[t]=="number"}function hw(i){return Xc(i,"r")&&Xc(i,"g")&&Xc(i,"b")}function uw(i){return hw(i)&&Xc(i,"a")}function dw(i){return hw(i)}function Xy(i,t){if(i.mode!==t.mode||i.type!==t.type)return!1;let n=i.getComponents(),d=t.getComponents();for(let r=0;r<n.length;r++)if(n[r]!==d[r])return!1;return!0}function fP(i){return"a"in i?[i.r,i.g,i.b,i.a]:[i.r,i.g,i.b]}function Y5(i){let t=lw(i);return t?(n,d)=>{Kh(n,t(d))}:null}function j5(i){let t=i?z5:U5;return(n,d)=>{Kh(n,t(d))}}function K5(i,t,n){let r=si(t,n).toRgbaObject();i.writeProperty("r",r.r),i.writeProperty("g",r.g),i.writeProperty("b",r.b),i.writeProperty("a",r.a)}function J5(i,t,n){let r=si(t,n).toRgbaObject();i.writeProperty("r",r.r),i.writeProperty("g",r.g),i.writeProperty("b",r.b)}function Z5(i,t){return(n,d)=>{i?K5(n,d,t):J5(n,d,t)}}function Q5(i){var t;return!!(!((t=i==null?void 0:i.color)===null||t===void 0)&&t.alpha)}function _5(i){return i?t=>$y(t,"0x"):t=>Wy(t,"0x")}function q5(i){return"color"in i||i.view==="color"}var t6=ai({id:"input-color-number",type:"input",accept:(i,t)=>{if(typeof i!="number"||!q5(t))return null;let n=zy(t);return n?{initialValue:i,params:Object.assign(Object.assign({},n),{supportsAlpha:Q5(t)})}:null},binding:{reader:i=>i.params.supportsAlpha?X5:$5,equals:Xy,writer:i=>j5(i.params.supportsAlpha)},controller:i=>{var t,n;return new Hh(i.document,{colorType:"int",expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,formatter:_5(i.params.supportsAlpha),parser:Jh("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:i.params.supportsAlpha,value:i.value,viewProps:i.viewProps})}});function e6(i,t){if(!dw(i))return si(Ut.black(),t);if(t==="int"){let n=fP(i);return new Ut(n,"rgb")}if(t==="float"){let n=fP(i);return new zh(n,"rgb")}return si(Ut.black(),"int")}function i6(i){return uw(i)}function n6(i){return t=>{let n=e6(t,i);return si(n,"int")}}function r6(i,t){return n=>i?ow(n,t):aw(n,t)}var s6=ai({id:"input-color-object",type:"input",accept:(i,t)=>{var n;if(!dw(i))return null;let d=zy(t);return d?{initialValue:i,params:Object.assign(Object.assign({},d),{colorType:(n=KP(t))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:i=>n6(i.params.colorType),equals:Xy,writer:i=>Z5(i6(i.initialValue),i.params.colorType)},controller:i=>{var t,n;let d=uw(i.initialValue);return new Hh(i.document,{colorType:i.params.colorType,expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,formatter:r6(d,i.params.colorType),parser:Jh("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:d,value:i.value,viewProps:i.viewProps})}}),a6=ai({id:"input-color-string",type:"input",accept:(i,t)=>{if(typeof i!="string"||t.view==="text")return null;let n=w5(i,KP(t));if(!n)return null;let d=lw(n);if(!d)return null;let r=zy(t);return r?{initialValue:i,params:Object.assign(Object.assign({},r),{format:n,stringifier:d})}:null},binding:{reader:()=>A5,equals:Xy,writer:i=>{let t=Y5(i.params.format);if(!t)throw le.notBindable();return t}},controller:i=>{var t,n;return new Hh(i.document,{colorType:i.params.format.type,expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,formatter:i.params.stringifier,parser:Jh("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:i.params.format.alpha,value:i.value,viewProps:i.viewProps})}}),Wh=class{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){let n=this.asm_.toComponents(t).map((d,r)=>{var m,e;return(e=(m=this.components[r])===null||m===void 0?void 0:m.constrain(d))!==null&&e!==void 0?e:d});return this.asm_.fromComponents(n)}},pP=Wt("pndtxt"),ly=class{constructor(t,n){this.textViews=n.textViews,this.element=t.createElement("div"),this.element.classList.add(pP()),this.textViews.forEach(d=>{let r=t.createElement("div");r.classList.add(pP("a")),r.appendChild(d.element),this.element.appendChild(r)})}};function o6(i,t,n){return new ia(i,{arrayPosition:n===0?"fst":n===t.axes.length-1?"lst":"mid",parser:t.parser,props:t.axes[n].textProps,value:he(0,{constraint:t.axes[n].constraint}),viewProps:t.viewProps})}var $h=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((d,r)=>o6(t,n,r)),this.acs_.forEach((d,r)=>{Vo({primary:this.value,secondary:d.value,forward:m=>n.assembly.toComponents(m)[r],backward:(m,e)=>{let u=n.assembly.toComponents(m);return u[r]=e,n.assembly.fromComponents(u)}})}),this.view=new ly(t,{textViews:this.acs_.map(d=>d.view)})}get textControllers(){return this.acs_}},hy=class extends Qs{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}};function l6(i,t){let n=[],d=IP(i,t);d&&n.push(d);let r=RP(i);r&&n.push(r);let m=Uy(i.options);return m&&n.push(m),new qs(n)}var h6=ai({id:"input-number",type:"input",accept:(i,t)=>{if(typeof i!="number")return null;let n=ce(t,d=>Object.assign(Object.assign({},LP(d)),{options:d.optional.custom(jh),readonly:d.optional.constant(!1)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>CP,constraint:i=>l6(i.params,i.initialValue),writer:i=>Kh},controller:i=>{let t=i.value,n=i.constraint,d=n&&tf(n,ta);if(d)return new An(i.document,{props:new wt({options:d.values.value("options")}),value:t,viewProps:i.viewProps});let r=MP(i.params,t.rawValue),m=n&&tf(n,Js);return m?new Do(i.document,Object.assign(Object.assign({},HP(Object.assign(Object.assign({},r),{keyScale:he(r.keyScale),max:m.values.value("max"),min:m.values.value("min")}))),{parser:nr,value:t,viewProps:i.viewProps})):new ia(i.document,{parser:nr,props:wt.fromObject(r),value:t,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="number"?null:i.controller.valueController instanceof Do?new hy(i.controller):i.controller.valueController instanceof An?new Vh(i.controller):null}}),Pn=class{constructor(t=0,n=0){this.x=t,this.y=n}getComponents(){return[this.x,this.y]}static isObject(t){if(re(t))return!1;let n=t.x,d=t.y;return!(typeof n!="number"||typeof d!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y}toObject(){return{x:this.x,y:this.y}}},cw={toComponents:i=>i.getComponents(),fromComponents:i=>new Pn(...i)},Ro=Wt("p2d"),uy=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(Ro()),n.viewProps.bindClassModifiers(this.element),ir(n.expanded,Bo(this.element,Ro(void 0,"expanded")));let d=t.createElement("div");d.classList.add(Ro("h")),this.element.appendChild(d);let r=t.createElement("button");r.classList.add(Ro("b")),r.appendChild(of(t,"p2dpad")),n.viewProps.bindDisabled(r),d.appendChild(r),this.buttonElement=r;let m=t.createElement("div");if(m.classList.add(Ro("t")),d.appendChild(m),this.textElement=m,n.pickerLayout==="inline"){let e=t.createElement("div");e.classList.add(Ro("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}},Wr=Wt("p2dp"),dy=class{constructor(t,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=t.createElement("div"),this.element.classList.add(Wr()),n.layout==="popup"&&this.element.classList.add(Wr(void 0,"p")),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("div");d.classList.add(Wr("p")),n.viewProps.bindTabIndex(d),this.element.appendChild(d),this.padElement=d;let r=t.createElementNS(Cn,"svg");r.classList.add(Wr("g")),this.padElement.appendChild(r),this.svgElem_=r;let m=t.createElementNS(Cn,"line");m.classList.add(Wr("ax")),m.setAttributeNS(null,"x1","0"),m.setAttributeNS(null,"y1","50%"),m.setAttributeNS(null,"x2","100%"),m.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(m);let e=t.createElementNS(Cn,"line");e.classList.add(Wr("ax")),e.setAttributeNS(null,"x1","50%"),e.setAttributeNS(null,"y1","0"),e.setAttributeNS(null,"x2","50%"),e.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(e);let u=t.createElementNS(Cn,"line");u.classList.add(Wr("l")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(u),this.lineElem_=u;let g=t.createElement("div");g.classList.add(Wr("m")),this.padElement.appendChild(g),this.markerElem_=g,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){let[t,n]=this.value.rawValue.getComponents(),d=this.props_.get("max"),r=Jt(t,-d,+d,0,100),m=Jt(n,-d,+d,0,100),e=this.props_.get("invertsY")?100-m:m;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${e}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${e}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function mP(i,t,n){return[vi(t[0],ar(i)),vi(t[1],Gh(i))*(n?1:-1)]}var cy=class{constructor(t,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new dy(t,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new or(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,n){if(!t.point)return;let d=this.props.get("max"),r=Jt(t.point.x,0,t.bounds.width,-d,+d),m=Jt(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-d,+d);this.value.setRawValue(new Pn(r,m),n)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){zP(t.key)&&t.preventDefault();let[n,d]=mP(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&d===0||this.value.setRawValue(new Pn(this.value.rawValue.x+n,this.value.rawValue.y+d),{forceEmit:!1,last:!1})}onPadKeyUp_(t){let[n,d]=mP(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&d===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},fy=class{constructor(t,n){var d,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=_s.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new ef(t,{viewProps:this.viewProps}):null;let m=new cy(t,{layout:n.pickerLayout,props:new wt({invertsY:he(n.invertsY),max:he(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});m.view.allFocusableElements.forEach(e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=m,this.textC_=new $h(t,{assembly:cw,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new uy(t,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(d=this.view.buttonElement)===null||d===void 0||d.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Vo({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e,backward:(e,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Vy(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(t){if(!this.popC_)return;let n=this.view.element,d=t.relatedTarget;(!d||!n.contains(d))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;let n=this.popC_.view.element,d=BP(t);d&&n.contains(d)||d&&d===this.view.buttonElement&&!By(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}};function u6(i){return Pn.isObject(i)?new Pn(i.x,i.y):new Pn}function d6(i,t){i.writeProperty("x",t.x),i.writeProperty("y",t.y)}function c6(i,t){return new Wh({assembly:cw,components:[er(Object.assign(Object.assign({},i),i.x),t.x),er(Object.assign(Object.assign({},i),i.y),t.y)]})}function vP(i,t){var n,d;if(!re(i.min)||!re(i.max))return Math.max(Math.abs((n=i.min)!==null&&n!==void 0?n:0),Math.abs((d=i.max)!==null&&d!==void 0?d:0));let r=wP(i);return Math.max(Math.abs(r)*10,Math.abs(t)*10)}function f6(i,t){var n,d;let r=vP(Ks(i,(n=i.x)!==null&&n!==void 0?n:{}),t.x),m=vP(Ks(i,(d=i.y)!==null&&d!==void 0?d:{}),t.y);return Math.max(r,m)}function p6(i){if(!("y"in i))return!1;let t=i.y;return t&&"inverted"in t?!!t.inverted:!1}var m6=ai({id:"input-point2d",type:"input",accept:(i,t)=>{if(!Pn.isObject(i))return null;let n=ce(t,d=>Object.assign(Object.assign({},Uh(d)),{expanded:d.optional.boolean,picker:d.optional.custom($P),readonly:d.optional.constant(!1),x:d.optional.custom(Xr),y:d.optional.object(Object.assign(Object.assign({},Uh(d)),{inverted:d.optional.boolean}))}));return n?{initialValue:i,params:n}:null},binding:{reader:()=>u6,constraint:i=>c6(i.params,i.initialValue),equals:Pn.equals,writer:()=>d6},controller:i=>{var t,n;let d=i.document,r=i.value,m=i.constraint,e=[i.params.x,i.params.y];return new fy(d,{axes:r.rawValue.getComponents().map((u,g)=>{var c;return Fy({constraint:m.components[g],initialValue:u,params:Ks(i.params,(c=e[g])!==null&&c!==void 0?c:{})})}),expanded:(t=i.params.expanded)!==null&&t!==void 0?t:!1,invertsY:p6(i.params),max:f6(i.params,r.rawValue),parser:nr,pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",value:r,viewProps:i.viewProps})}}),Yr=class{constructor(t=0,n=0,d=0){this.x=t,this.y=n,this.z=d}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(re(t))return!1;let n=t.x,d=t.y,r=t.z;return!(typeof n!="number"||typeof d!="number"||typeof r!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}},fw={toComponents:i=>i.getComponents(),fromComponents:i=>new Yr(...i)};function v6(i){return Yr.isObject(i)?new Yr(i.x,i.y,i.z):new Yr}function g6(i,t){i.writeProperty("x",t.x),i.writeProperty("y",t.y),i.writeProperty("z",t.z)}function y6(i,t){return new Wh({assembly:fw,components:[er(Object.assign(Object.assign({},i),i.x),t.x),er(Object.assign(Object.assign({},i),i.y),t.y),er(Object.assign(Object.assign({},i),i.z),t.z)]})}var x6=ai({id:"input-point3d",type:"input",accept:(i,t)=>{if(!Yr.isObject(i))return null;let n=ce(t,d=>Object.assign(Object.assign({},Uh(d)),{readonly:d.optional.constant(!1),x:d.optional.custom(Xr),y:d.optional.custom(Xr),z:d.optional.custom(Xr)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>v6,constraint:i=>y6(i.params,i.initialValue),equals:Yr.equals,writer:i=>g6},controller:i=>{let t=i.value,n=i.constraint,d=[i.params.x,i.params.y,i.params.z];return new $h(i.document,{assembly:fw,axes:t.rawValue.getComponents().map((r,m)=>{var e;return Fy({constraint:n.components[m],initialValue:r,params:Ks(i.params,(e=d[m])!==null&&e!==void 0?e:{})})}),parser:nr,value:t,viewProps:i.viewProps})}}),jr=class{constructor(t=0,n=0,d=0,r=0){this.x=t,this.y=n,this.z=d,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(re(t))return!1;let n=t.x,d=t.y,r=t.z,m=t.w;return!(typeof n!="number"||typeof d!="number"||typeof r!="number"||typeof m!="number")}static equals(t,n){return t.x===n.x&&t.y===n.y&&t.z===n.z&&t.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}},pw={toComponents:i=>i.getComponents(),fromComponents:i=>new jr(...i)};function S6(i){return jr.isObject(i)?new jr(i.x,i.y,i.z,i.w):new jr}function E6(i,t){i.writeProperty("x",t.x),i.writeProperty("y",t.y),i.writeProperty("z",t.z),i.writeProperty("w",t.w)}function T6(i,t){return new Wh({assembly:pw,components:[er(Object.assign(Object.assign({},i),i.x),t.x),er(Object.assign(Object.assign({},i),i.y),t.y),er(Object.assign(Object.assign({},i),i.z),t.z),er(Object.assign(Object.assign({},i),i.w),t.w)]})}var b6=ai({id:"input-point4d",type:"input",accept:(i,t)=>{if(!jr.isObject(i))return null;let n=ce(t,d=>Object.assign(Object.assign({},Uh(d)),{readonly:d.optional.constant(!1),w:d.optional.custom(Xr),x:d.optional.custom(Xr),y:d.optional.custom(Xr),z:d.optional.custom(Xr)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>S6,constraint:i=>T6(i.params,i.initialValue),equals:jr.equals,writer:i=>E6},controller:i=>{let t=i.value,n=i.constraint,d=[i.params.x,i.params.y,i.params.z,i.params.w];return new $h(i.document,{assembly:pw,axes:t.rawValue.getComponents().map((r,m)=>{var e;return Fy({constraint:n.components[m],initialValue:r,params:Ks(i.params,(e=d[m])!==null&&e!==void 0?e:{})})}),parser:nr,value:t,viewProps:i.viewProps})}});function C6(i){let t=[],n=Uy(i.options);return n&&t.push(n),new qs(t)}var P6=ai({id:"input-string",type:"input",accept:(i,t)=>{if(typeof i!="string")return null;let n=ce(t,d=>({readonly:d.optional.constant(!1),options:d.optional.custom(jh)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>UP,constraint:i=>C6(i.params),writer:i=>Kh},controller:i=>{let t=i.document,n=i.value,d=i.constraint,r=d&&tf(d,ta);return r?new An(t,{props:new wt({options:r.values.value("options")}),value:n,viewProps:i.viewProps}):new ea(t,{parser:m=>m,props:wt.fromObject({formatter:H0}),value:n,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="string"?null:i.controller.valueController instanceof An?new Vh(i.controller):null}}),Zh={monitor:{defaultInterval:200,defaultRows:3}},gP=Wt("mll"),py=class{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(gP()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("textarea");d.classList.add(gP("i")),d.style.height=`calc(var(${WP("containerUnitSize")}) * ${n.rows})`,d.readOnly=!0,n.viewProps.bindDisabled(d),this.element.appendChild(d),this.textareaElem_=d,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){let t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,d=[];this.value.rawValue.forEach(r=>{r!==void 0&&d.push(this.formatter_(r))}),t.textContent=d.join(`
`),n&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}},Xh=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new py(t,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}},yP=Wt("sgl"),my=class{constructor(t,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=t.createElement("div"),this.element.classList.add(yP()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("input");d.classList.add(yP("i")),d.readOnly=!0,d.type="text",n.viewProps.bindDisabled(d),this.element.appendChild(d),this.inputElement=d,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){let t=this.value.rawValue,n=t[t.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},Yh=class{constructor(t,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new my(t,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}},w6=ai({id:"monitor-bool",type:"monitor",accept:(i,t)=>{if(typeof i!="boolean")return null;let n=ce(t,d=>({readonly:d.required.constant(!0),rows:d.optional.number}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>GP},controller:i=>{var t;return i.value.rawValue.length===1?new Yh(i.document,{formatter:lP,value:i.value,viewProps:i.viewProps}):new Xh(i.document,{formatter:lP,rows:(t=i.params.rows)!==null&&t!==void 0?t:Zh.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}}),vy=class extends Qs{get max(){return this.controller.valueController.props.get("max")}set max(t){this.controller.valueController.props.set("max",t)}get min(){return this.controller.valueController.props.get("min")}set min(t){this.controller.valueController.props.set("min",t)}},$r=Wt("grl"),gy=class{constructor(t,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add($r()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);let d=t.createElementNS(Cn,"svg");d.classList.add($r("g")),d.style.height=`calc(var(${WP("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(d),this.svgElem_=d;let r=t.createElementNS(Cn,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;let m=t.createElement("div");m.classList.add($r("t"),Wt("tt")()),this.element.appendChild(m),this.tooltipElem_=m,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){let t=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,d=this.props_.get("min"),r=this.props_.get("max"),m=[];this.value.rawValue.forEach((s,o)=>{if(s===void 0)return;let a=Jt(o,0,n,0,t.width),l=Jt(s,d,r,t.height,0);m.push([a,l].join(","))}),this.lineElem_.setAttributeNS(null,"points",m.join(" "));let e=this.tooltipElem_,u=this.value.rawValue[this.cursor_.rawValue];if(u===void 0){e.classList.remove($r("t","a"));return}let g=Jt(this.cursor_.rawValue,0,n,0,t.width),c=Jt(u,d,r,t.height,0);e.style.left=`${g}px`,e.style.top=`${c}px`,e.textContent=`${this.formatter_(u)}`,e.classList.contains($r("t","a"))||(e.classList.add($r("t","a"),$r("t","in")),Yc(e),e.classList.remove($r("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},rf=class{constructor(t,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=he(-1),this.view=new gy(t,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!By(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{let d=new or(this.view.element);d.emitter.on("down",this.onGraphPointerDown_),d.emitter.on("move",this.onGraphPointerMove_),d.emitter.on("up",this.onGraphPointerUp_)}}importProps(t){return wi(t,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Ai(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){let n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Jt(t.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Jt(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function yy(i){return re(i.format)?gi(2):i.format}function A6(i){var t;return i.value.rawValue.length===1?new Yh(i.document,{formatter:yy(i.params),value:i.value,viewProps:i.viewProps}):new Xh(i.document,{formatter:yy(i.params),rows:(t=i.params.rows)!==null&&t!==void 0?t:Zh.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}function I6(i){var t,n,d;return new rf(i.document,{formatter:yy(i.params),rows:(t=i.params.rows)!==null&&t!==void 0?t:Zh.monitor.defaultRows,props:wt.fromObject({max:(n=i.params.max)!==null&&n!==void 0?n:100,min:(d=i.params.min)!==null&&d!==void 0?d:0}),value:i.value,viewProps:i.viewProps})}function xP(i){return i.view==="graph"}var R6=ai({id:"monitor-number",type:"monitor",accept:(i,t)=>{if(typeof i!="number")return null;let n=ce(t,d=>({format:d.optional.function,max:d.optional.number,min:d.optional.number,readonly:d.required.constant(!0),rows:d.optional.number,view:d.optional.string}));return n?{initialValue:i,params:n}:null},binding:{defaultBufferSize:i=>xP(i)?64:1,reader:i=>CP},controller:i=>xP(i.params)?I6(i):A6(i),api:i=>i.controller.valueController instanceof rf?new vy(i.controller):null}),M6=ai({id:"monitor-string",type:"monitor",accept:(i,t)=>{if(typeof i!="string")return null;let n=ce(t,d=>({multiline:d.optional.boolean,readonly:d.required.constant(!0),rows:d.optional.number}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>UP},controller:i=>{var t;let n=i.value;return n.rawValue.length>1||i.params.multiline?new Xh(i.document,{formatter:H0,rows:(t=i.params.rows)!==null&&t!==void 0?t:Zh.monitor.defaultRows,value:n,viewProps:i.viewProps}):new Yh(i.document,{formatter:H0,value:n,viewProps:i.viewProps})}}),xy=class{constructor(){this.map_=new Map}get(t){var n;return(n=this.map_.get(t))!==null&&n!==void 0?n:null}has(t){return this.map_.has(t)}add(t,n){return this.map_.set(t,n),t.viewProps.handleDispose(()=>{this.map_.delete(t)}),n}},Sy=class{constructor(t){this.target=t.target,this.reader_=t.reader,this.writer_=t.writer}read(){return this.reader_(this.target.read())}write(t){this.writer_(this.target,t)}inject(t){this.write(this.reader_(t))}};function L6(i,t){var n;let d=i.accept(t.target.read(),t.params);if(re(d))return null;let r={target:t.target,initialValue:d.initialValue,params:d.params},m=ce(t.params,o=>({disabled:o.optional.boolean,hidden:o.optional.boolean,label:o.optional.string,tag:o.optional.string})),e=i.binding.reader(r),u=i.binding.constraint?i.binding.constraint(r):void 0,g=new Sy({reader:e,target:t.target,writer:i.binding.writer(r)}),c=new g0(he(e(d.initialValue),{constraint:u,equals:i.binding.equals}),g),s=i.controller({constraint:u,document:t.document,initialValue:d.initialValue,params:d.params,value:c,viewProps:on.create({disabled:m==null?void 0:m.disabled,hidden:m==null?void 0:m.hidden})});return new x0(t.document,{blade:ko(),props:wt.fromObject({label:"label"in t.params?(n=m==null?void 0:m.label)!==null&&n!==void 0?n:null:t.target.key}),tag:m==null?void 0:m.tag,value:c,valueController:s})}var Ey=class{constructor(t){this.target=t.target,this.reader_=t.reader}read(){return this.reader_(this.target.read())}};function O6(i,t){return t===0?new k0:new V0(i,t??Zh.monitor.defaultInterval)}function D6(i,t){var n,d,r;let m=i.accept(t.target.read(),t.params);if(re(m))return null;let e={target:t.target,initialValue:m.initialValue,params:m.params},u=ce(t.params,a=>({bufferSize:a.optional.number,disabled:a.optional.boolean,hidden:a.optional.boolean,interval:a.optional.number,label:a.optional.string})),g=i.binding.reader(e),c=(d=(n=u==null?void 0:u.bufferSize)!==null&&n!==void 0?n:i.binding.defaultBufferSize&&i.binding.defaultBufferSize(m.params))!==null&&d!==void 0?d:1,s=new S0({binding:new Ey({reader:g,target:t.target}),bufferSize:c,ticker:O6(t.document,u==null?void 0:u.interval)}),o=i.controller({document:t.document,params:m.params,value:s,viewProps:on.create({disabled:u==null?void 0:u.disabled,hidden:u==null?void 0:u.hidden})});return o.viewProps.bindDisabled(s.ticker),o.viewProps.handleDispose(()=>{s.ticker.dispose()}),new E0(t.document,{blade:ko(),props:wt.fromObject({label:"label"in t.params?(r=u==null?void 0:u.label)!==null&&r!==void 0?r:null:t.target.key}),value:s,valueController:o})}var Ty=class{constructor(t){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=t}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t,n){if(!t5(n.core))throw le.notCompatible(t,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(t,n,d){return this.pluginsMap_.inputs.reduce((r,m)=>r??L6(m,{document:t,target:n,params:d}),null)}createMonitor_(t,n,d){return this.pluginsMap_.monitors.reduce((r,m)=>r??D6(m,{document:t,params:d,target:n}),null)}createBinding(t,n,d){let r=n.read();if(re(r))throw new le({context:{key:n.key},type:"nomatchingcontroller"});let m=this.createInput_(t,n,d);if(m)return m;let e=this.createMonitor_(t,n,d);if(e)return e;throw new le({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(t,n){let d=this.pluginsMap_.blades.reduce((r,m)=>r??K3(m,{document:t,params:n}),null);if(!d)throw new le({type:"nomatchingview",context:{params:n}});return d}createInputBindingApi_(t){let n=this.pluginsMap_.inputs.reduce((d,r)=>{var m,e;return d||((e=(m=r.api)===null||m===void 0?void 0:m.call(r,{controller:t}))!==null&&e!==void 0?e:null)},null);return this.apiCache_.add(t,n??new Qs(t))}createMonitorBindingApi_(t){let n=this.pluginsMap_.monitors.reduce((d,r)=>{var m,e;return d||((e=(m=r.api)===null||m===void 0?void 0:m.call(r,{controller:t}))!==null&&e!==void 0?e:null)},null);return this.apiCache_.add(t,n??new Qs(t))}createBindingApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(M3(t))return this.createInputBindingApi_(t);if(B3(t))return this.createMonitorBindingApi_(t);throw le.shouldNeverHappen()}createApi(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(R3(t))return this.createBindingApi(t);let n=this.pluginsMap_.blades.reduce((d,r)=>d??r.api({controller:t,pool:this}),null);if(!n)throw le.shouldNeverHappen();return this.apiCache_.add(t,n)}},F6=new xy;function B6(){let i=new Ty(F6);return[m6,x6,b6,P6,h6,a6,s6,t6,i5,w6,M6,R6,k3,Y3,VP].forEach(t=>{i.register("core",t)}),i}var by=class extends rr{constructor(t){super(t),this.emitter_=new xe,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Zs(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get options(){return this.controller.valueController.props.get("options")}set options(t){this.controller.valueController.props.set("options",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){let d=n.bind(this);return this.emitter_.on(t,r=>{d(r)}),this}},Cy=class extends rr{},Py=class extends rr{constructor(t){super(t),this.emitter_=new xe,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Zs(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(t){this.controller.valueController.sliderController.props.set("max",t)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(t){this.controller.valueController.sliderController.props.set("min",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){let d=n.bind(this);return this.emitter_.on(t,r=>{d(r)}),this}},wy=class extends rr{constructor(t){super(t),this.emitter_=new xe,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new Zs(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(t){this.controller.labelController.props.set("label",t)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(t){this.controller.valueController.props.set("formatter",t)}get value(){return this.controller.value.rawValue}set value(t){this.controller.value.rawValue=t}on(t,n){let d=n.bind(this);return this.emitter_.on(t,r=>{d(r)}),this}},N6=function(){return{id:"list",type:"blade",core:No,accept(i){let t=ce(i,n=>({options:n.required.custom(jh),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return t?{params:t}:null},controller(i){let t=new ta(Gy(i.params.options)),n=he(i.params.value,{constraint:t}),d=new An(i.document,{props:new wt({options:t.values.value("options")}),value:n,viewProps:i.viewProps});return new sr(i.document,{blade:i.blade,props:wt.fromObject({label:i.params.label}),value:n,valueController:d})},api(i){return!(i.controller instanceof sr)||!(i.controller.valueController instanceof An)?null:new by(i.controller)}}}(),Ay=class extends _c{constructor(t,n){super(t,n)}get element(){return this.controller.view.element}},Iy=class extends Nh{constructor(t,n){super(t,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}},SP=Wt("spr"),Ry=class{constructor(t,n){this.element=t.createElement("div"),this.element.classList.add(SP()),n.viewProps.bindClassModifiers(this.element);let d=t.createElement("hr");d.classList.add(SP("r")),this.element.appendChild(d)}},sf=class extends Oo{constructor(t,n){super(Object.assign(Object.assign({},n),{view:new Ry(t,{viewProps:n.viewProps})}))}},k6={id:"separator",type:"blade",core:No,accept(i){let t=ce(i,n=>({view:n.required.constant("separator")}));return t?{params:t}:null},controller(i){return new sf(i.document,{blade:i.blade,viewProps:i.viewProps})},api(i){return i.controller instanceof sf?new Cy(i.controller):null}},V6={id:"slider",type:"blade",core:No,accept(i){let t=ce(i,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return t?{params:t}:null},controller(i){var t,n;let d=(t=i.params.value)!==null&&t!==void 0?t:0,r=new Js({max:i.params.max,min:i.params.min}),m=he(d,{constraint:r}),e=new Do(i.document,Object.assign(Object.assign({},HP({formatter:(n=i.params.format)!==null&&n!==void 0?n:p3,keyScale:he(1),max:r.values.value("max"),min:r.values.value("min"),pointerScale:AP(i.params,d)})),{parser:nr,value:m,viewProps:i.viewProps}));return new sr(i.document,{blade:i.blade,props:wt.fromObject({label:i.params.label}),value:m,valueController:e})},api(i){return!(i.controller instanceof sr)||!(i.controller.valueController instanceof Do)?null:new Py(i.controller)}},G6=function(){return{id:"text",type:"blade",core:No,accept(i){let t=ce(i,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return t?{params:t}:null},controller(i){var t;let n=he(i.params.value),d=new ea(i.document,{parser:i.params.parse,props:wt.fromObject({formatter:(t=i.params.format)!==null&&t!==void 0?t:r=>String(r)}),value:n,viewProps:i.viewProps});return new sr(i.document,{blade:i.blade,props:wt.fromObject({label:i.params.label}),value:n,valueController:d})},api(i){return!(i.controller instanceof sr)||!(i.controller.valueController instanceof ea)?null:new wy(i.controller)}}}();function U6(i){let t=i.createElement("div");return t.classList.add(Wt("dfw")()),i.body&&i.body.appendChild(t),t}function z6(i,t,n){if(i.querySelector(`style[data-tp-style=${t}]`))return;let d=i.createElement("style");d.dataset.tpStyle=t,d.textContent=n,i.head.appendChild(d)}var af=class extends Ay{constructor(t){var n,d;let r=t??{},m=(n=r.document)!==null&&n!==void 0?n:T3(),e=B6(),u=new Iy(m,{expanded:r.expanded,blade:ko(),props:wt.fromObject({title:r.title}),viewProps:on.create()});super(u,e),this.pool_=e,this.containerElem_=(d=r.container)!==null&&d!==void 0?d:U6(m),this.containerElem_.appendChild(this.element),this.doc_=m,this.usesDefaultWrapper_=!r.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw le.alreadyDisposed();return this.doc_}dispose(){let t=this.containerElem_;if(!t)throw le.alreadyDisposed();if(this.usesDefaultWrapper_){let n=t.parentElement;n&&n.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){t.css&&z6(this.document,`plugin-${t.id}`,t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(d=>{this.pool_.register(t.id,d)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[N6,k6,V6,VP,G6]})}},Jq=new Qc("4.0.1");var Go=class extends yt{constructor(){super(...arguments);this.toggleShowDialog=()=>{this.pane.hidden=!this.pane.hidden};this.downloadJSON=()=>{let n=JSON.stringify({version:1,timestamp:new Date().toUTCString(),params:this.game.gameplayParams},null,2),d=document.createElement("a");d.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),d.setAttribute("download","params.json"),d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d)}}connectedCallback(){super.connectedCallback(),this.uiModel=this.game.getModel().getUIWatchableModel()}addActions(){this.pane.addButton({title:"Save"}).on("click",this.game.save),this.pane.addButton({title:"Load"}).on("click",()=>{this.game.load(!0),this.uiModel=this.game.getModel().getUIWatchableModel()})}createCustomerFolder(){let n=this.pane.addFolder({title:"Customer",expanded:!1});n.addBinding(this.game.gameplayParams.customer,"spawnInterval",{label:"Spawn Interval",min:.1}),n.addBinding(this.game.gameplayParams.customer,"spawnIntervalDecrease",{label:"Spawn Interval Decrease Per Level of Marketing"}),n.addBinding(this.game.gameplayParams.customer,"speed",{label:"Speed",min:100,max:500})}createStaffFolder(){let n=this.pane.addFolder({title:"Staff",expanded:!1});n.addBinding(this.game.gameplayParams.staff,"hiringCost",{label:"Hiring Cost"}),n.addBinding(this.game.gameplayParams.staff,"multiplierPerStaff",{label:"Multiplier Per Staff Hired"}),n.addBinding(this.game.gameplayParams.staff,"speed",{label:"Speed"}),n.addBinding(this.game.gameplayParams.staff,"orderSpeedMultiplier",{label:"Loading Bar Speed Multiplier"});let d=n.addFolder({title:"Loading Bar Values",expanded:!1});d.addBinding(this.game.gameplayParams.staff,"orderTakingSpeed",{label:"Employee First Loading Bar",readonly:!0}),d.addBinding(this.game.gameplayParams.staff,"orderFetchingSpeed",{label:"Employee Second Loading Bar",readonly:!0}),d.addBinding(this.game.gameplayParams.staff,"orderFinishingSpeed",{label:"Employee Third Loading Bar",readonly:!0})}createPaydayFolder(){let n=this.pane.addFolder({title:"Payday",expanded:!1});n.addBinding(this.game.gameplayParams.payday,"secondsPerPayday",{label:"Seconds Per Payday",min:1}),n.addBinding(this.game.gameplayParams.payday,"paydayCount",{label:"Number of Paydays Per Game",min:1})}createMarketingFolder(){let n=this.pane.addFolder({title:"Marketing",expanded:!1});n.addBinding(this.game.gameplayParams.marketing,"cost",{label:"Cost Base"}),n.addBinding(this.game.gameplayParams.marketing,"increasePerLevel",{label:"Cost Increase Per Level"}),n.addBinding(this.game.gameplayParams.marketing,"maxDemand",{label:"Max Demand Level"})}createProductsFolder(){let n=this.pane.addFolder({title:"Products",expanded:!1});Object.values(this.game.gameplayParams.products).forEach(d=>{let r=n.addFolder({title:d.category.toUpperCase(),expanded:!1});d.products.forEach(m=>{let e=r.addFolder({title:m.name,expanded:!1});e.addBinding(m,"cost",{label:"Cost"}),e.addBinding(m,"maxCost",{label:"Max Cost"}),e.addBinding(m,"stockLimit",{label:"Stock Limit"}),e.addBinding(m,"spawnRateMultiplier",{label:"Spawn Rate Multiplier",max:4,min:.5,step:.1})})})}createEventsFolder(){let n=this.pane.addFolder({title:"Events",expanded:!1}),d=new Map;this.game.gameplayParams.events.forEach(r=>{let m=bn[r.trigger.category];d.has(m)||d.set(m,n.addFolder({title:r.trigger.category,expanded:!1}));let e=d.get(bn[r.trigger.category]).addFolder({title:r.id,expanded:!1});r.cash=r.cash??0,r.businessValue=r.businessValue??0,e.addBinding(r,"cash",{label:"Cash"}),e.addBinding(r,"businessValue",{label:"Business Value"}),e.addBinding(r.trigger,"category",{label:"Trigger Category",readonly:!0}),e.addBinding(r.trigger,"value",{label:"Trigger Value"})})}firstUpdated(n){super.firstUpdated(n),this.pane=new af,this.addActions(),this.createCustomerFolder(),this.createStaffFolder(),this.createPaydayFolder(),this.createMarketingFolder(),this.createProductsFolder(),this.createEventsFolder(),this.pane.addButton({title:"Close"}).on("click",()=>{this.pane.hidden=!0}),this.pane.hidden=!0,this.pane.on("change",this.game.updateGameplayParams)}render(){return q`
      <button @click=${this.toggleShowDialog}>
        <img src="assets/icons/gear-solid.svg" />
      </button>
      <button @click=${this.downloadJSON}>
        <img src="assets/icons/download.svg" />
      </button>
    `}};Go.styles=at`
    :host {
      position: absolute;
      top: 0;
      left: 50%;
    }

    button {
      background-color: #fcca6f;
      width: 30px;
      height: 30px;
    }
  `,et([Mt({context:Rt})],Go.prototype,"game",2),Go=et([lt("gameplay-parameters")],Go);var hf=class extends yt{render(){return q`
      <lottie-player
        autoplay
        loop
        mode="normal"
        src=${Sr.LoadingSpinner}
        style="width: 100%; height: 100%;"
      ></lottie-player>
    `}};hf=et([lt("loading-spinner")],hf);var Qh=class extends Ct{render(){return q`
      <img class="loader-logo" src=${st.LogoLoader} draggable="false" />
      <div class="secondary-button">
        <loading-spinner></loading-spinner>
        <div class="loader-text">${tt("LoadingScreen_Loading")}</div>
      </div>
    `}};Qh.styles=[Qt,at`
      @keyframes tileLoop {
        0% {
          background-position: 0px 0px;
        }
        100% {
          background-position: 500px 500px;
        }
      }

      :host {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 34px;
        background: url("assets/tiles/BG_pattern_transparent.png") repeat 0 0;
        background-size: 500px 500px;
        background-color: var(--primary);
        animation: tileLoop 15s infinite;
        animation-timing-function: linear;
      }

      .loader-logo {
        width: 216px;
        height: 96px;
      }

      .secondary-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        justify-content: center;
        box-sizing: border-box;
        padding: 4px;

        border-radius: 59px;
        border: 2px solid var(--primary-teal-main);
        background-color: var(--primary-teal-highlight);

        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 16px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        text-align: center;
      }

      .loader-text {
        width: 105px;
      }

      loading-spinner {
        width: 26px;
        height: 28px;
      }
    `],Qh=et([lt("loading-screen")],Qh);var ra=class extends Tt(Ct){render(){return q`<dialog open>
      <div id="header">${this.title}</div>
      <div id="content">
        <slot name="content"></slot>
      </div>
      <div id="button-container">
        ${this.buttons.map(n=>q`<app-button
              @click=${n.onClick}
              text=${n.text}
              imgUrl=${n.img??""}
            ></app-button>`)}
      </div>
    </dialog>`}};ra.styles=[Qt,at`
      :host {
        width: 100%;
        height: 100%;
      }

      dialog {
        position: relative;
        width: 100%;
        height: 100%;
        padding: 0;
        border-radius: 4px;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      #header {
        width: 100%;
        height: 35px;
        flex-grow: 0;

        background: var(--seconday-ginger-highlight);
        color: var(--primary-navy);

        text-align: center;
        font-family: Ubuntu;
        font-size: 20px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        text-transform: capitalize;

        display: flex;
        place-content: center;
        place-items: center;

        @media (min-width: 1000px) {
          height: 54px;
          font-size: 32px;
        }
      }

      #content {
        flex-grow: 1;

        color: var(--primary-navy);

        text-align: center;
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 24px; /* 171.429% */

        display: flex;
        place-content: center;
        place-items: center;
        padding: 0px 74px 0px 74px;

        @media (min-width: 1000px) {
          padding: 0px 76px 0px 72px;
          font-size: 20px;
        }
      }

      #button-container {
        position: absolute;

        bottom: -22px;
        width: 100%;
        height: 44px;

        display: flex;
        justify-content: center;
        gap: 24px;
      }
    `],et([It()],ra.prototype,"title",2),et([It({attribute:!1})],ra.prototype,"buttons",2),ra=et([lt("warning-dialog")],ra);var Uo=class extends Tt(Ct){render(){return q`
      <div id="background">
        <div id="dialog-container">
          <warning-dialog
            title=${this.details.title}
            .buttons=${this.details.buttons}
          >
            <div slot="content">
              ${this.details.content.map((n,d)=>d===0?q`${n}`:q`<br />${n}`)}
            </div>
          </warning-dialog>
        </div>
      </div>
    `}};Uo.styles=at`
    :host {
      width: 100%;
      height: 100%;
    }

    #background {
      width: 100%;
      height: 100%;
      background: url("assets/tiles/BG_pattern_transparent.png") repeat 0 0;
      background-size: 500px 500px;
      background-color: var(--secondary-violet-highlight);
    }

    #dialog-container {
      width: 100%;
      height: 100%;
      background-color: var(--semi-opaque-white);

      display: flex;
      align-items: center;
      justify-content: center;
    }

    #dialog-container > warning-dialog {
      display: block;
      width: 412px;
      height: 228px;

      @media (min-width: 1000px) {
        width: 618px;
        height: 399px;
      }
    }
  `,et([It({attribute:!1})],Uo.prototype,"details",2),Uo=et([lt("error-screen")],Uo);var _h=class extends Tt(Ct){constructor(){super(...arguments);this.tryAgain=()=>{Pi.getUser().then(Ka).catch(()=>{te("User failed to log in again"),eo()})}}render(){let n=[{text:tt("Error_Button_TryAgain"),onClick:this.tryAgain}];return!1&&n.push({text:"[DEV] Login",onClick:()=>ie("Sign-in Screen")}),q`
      <error-screen
        .details=${{title:tt("Error_Heading"),buttons:n,content:[tt("Error_Body")]}}
      ></error-screen>
    `}};_h.styles=at`
    :host {
      width: 100%;
      height: 100%;
    }
  `,_h=et([lt("logged-out")],_h);var qh=class extends Tt(Ct){constructor(){super(...arguments);this.toScreen=n=>()=>ie(n);this.logOut=()=>{if(!1){Fi.signOut();return}Xn(),eo()}}render(){return q`
      <error-screen
        .details=${{title:tt("Warning_Heading"),buttons:[{text:tt("Warning_Button_Logout"),onClick:this.logOut,img:st.Menu_Logout},{text:tt("Warning_Button_Cancel"),onClick:this.toScreen("Main Menu"),img:st.Cross_Active}],content:[tt("Warning_Body01"),tt("Warning_Body02")]}}
      ></error-screen>
    `}};qh.styles=at`
    :host {
      width: 100%;
      height: 100%;
      background: url("assets/tiles/BG_pattern_transparent.png") repeat 0 0;
      background-size: 500px 500px;
      background-color: var(--secondary-violet-highlight);
    }

    #dialog-container {
      width: 100%;
      height: 100%;
      background-color: var(--semi-opaque-white);

      display: flex;
      align-items: center;
      justify-content: center;
    }

    #dialog-container > warning-dialog {
      display: block;
      width: 412px;
      height: 228px;
    }
  `,qh=et([lt("logout-warning")],qh);var sa=class extends Tt(Ct){constructor(){super(...arguments);this.submitScoreToLeaderboard=async()=>{ve.localSave()&&(await Pi.saveGame(ve.localSave()),await Os())};this.renderDownloadButton=()=>q`
    <svg
      width="20"
      height="19"
      viewBox="0 0 20 19"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M4.5 6H1L1 18L19 18L19 6H15.5"
        stroke="var(--primary-navy)"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
      <path
        d="M10 11L10 1"
        stroke="var(--primary-navy)"
        stroke-width="2"
        stroke-linecap="round"
      />
      <path
        d="M10 13L13 10"
        stroke="var(--primary-navy)"
        stroke-width="2"
        stroke-linecap="round"
      />
      <path
        d="M10 13L7 10"
        stroke="var(--primary-navy)"
        stroke-width="2"
        stroke-linecap="round"
      />
    </svg>
  `;this.renderSubmitButton=(n,d,r)=>{let m;return r?m=tt("GameEnd_Button_TryAgain"):d?m=q`<loading-spinner></loading-spinner>`:m=tt("HomeScreen_Submit"),q`
      <button
        class="score-submit secondary-button"
        @click=${this.submitScoreToLeaderboard}
        ?disabled=${d}
        style="display: ${n?"block":"none"}"
      >
        ${m}
      </button>
    `}}render(){let n=se.highScore.value,d=ve.localSave(),r=d&&d.score>n,m=Or.saveGameRequest.value.status===1,e=Or.saveGameRequest.value.status===3;return q`
      <div class="container">
        <div class="main">
          <img class="logo" src=${st.LogoHome} draggable="false" />
          <div
            class=${Yi({"score-container":!0,hidden:!n})}
            style="margin-bottom: ${r?"16px":"0"};"
          >
            <div
              class="score"
              style="background-image: url(${st.ScoreContainer});"
            >
              <div class="score-text-container">
                <p class="score-text">${tt("HomeScreen_HighScore")}</p>
                <h1 class="score-text">${n}</h1>
              </div>
            </div>
            ${this.renderSubmitButton(r,m,e)}
          </div>

          <app-button
            @click=${()=>ie("Choose Save")}
            text=${tt("HomeScreen_Start")}
          >
          </app-button>
        </div>
        ${Bt(window.installPrompt,()=>q`
            <div class="install-prompt">
              <div class="install-tip">
                ${tt("HomeScreen_InstallTip")}
                <dialog-arrow direction="bottom" no-border></dialog-arrow>
              </div>
              <button class="secondary-button" @click=${uc}>
                ${this.renderDownloadButton()}
                ${tt("HomeScreen_InstallButton")}
              </button>
            </div>
          `)}
      </div>
    `}};sa.styles=[Qt,at`
      :host {
        width: 100%;
        height: 100%;
        background: url("assets/tiles/BG_pattern_transparent.png") repeat 0 0;
        background-size: 500px 500px;
        background-color: var(--secondary-violet-highlight);

        display: flex;
        align-items: center;
        justify-content: center;
      }

      .container {
        position: relative;
        width: 100%;
        height: 100%;
        display: grid;
        place-content: center;
        background-color: var(--semi-opaque-white);
      }

      .main {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 16px;

        @media (min-width: 1000px) {
          gap: 32px;
        }
      }

      .install-prompt {
        display: flex;
        flex-direction: column;
        place-items: center;
        position: absolute;
        bottom: 28px;
        right: 18px;
      }

      .logo {
        width: 180px;
        height: 76px;

        @media (min-width: 1000px) {
          width: 276px;
          height: 118px;
        }
      }

      .score-container {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .hidden {
        display: none !important;
      }

      .score {
        width: 252px;
        height: 84px;
        box-sizing: border-box;
        padding: 12px 2px 2px 2px;
        fill: var(--seconday-violet-lowlight);
        stroke-width: 2px;
        stroke: var(--primary-navy);
        position: relative;
        background-size: 100% 100%;

        @media (min-width: 1000px) {
          width: 500px;
          height: 166px;
          padding-top: 32px;
        }
      }

      .score-text-container {
        display: flex;
        flex-direction: column;
        margin-top: 10px;
      }

      .score-text {
        color: var(--primary-white);
        text-align: center;
        font-family: Ubuntu;
        font-style: normal;
        line-height: normal;
        margin: 0;
      }
      p.score-text {
        font-size: 14px;
        font-weight: 500;

        @media (min-width: 1000px) {
          font-size: 24px;
          padding-bottom: 13px;
        }
      }
      h1.score-text {
        font-size: 24px;
        font-weight: 700;
        letter-spacing: -0.144px;

        @media (min-width: 1000px) {
          font-size: 36px;
        }
      }

      .score-submit {
        position: absolute;
        bottom: 0;
        margin: 0;
        transform: translateY(50%);
      }

      /* TODO - We should refactor this into the secondary app button at some point */
      .secondary-button {
        display: inline-flex;

        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 10px;

        height: 40px;

        border-radius: 59px;
        border: 2px solid var(--primary-teal-main);
        background-color: var(--primary-teal-highlight);

        color: var(--primary-navy);
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
      }

      .secondary-button:active {
        border: 2px solid var(--primary-teal-lowlight);
        background: var(--primary-teal-main);
      }

      .secondary-button:disabled {
        border: 2px solid var(--button-disabled-lowlight);
        background: var(--button-disabled-primary);
      }

      .secondary-button > * {
        flex-shrink: 1;
      }

      .install-tip {
        position: relative;
        width: 149px;
        background-color: var(--primary-white);
        box-sizing: border-box;
        padding: 9px;
        border-radius: 4px;
        margin-bottom: 12px;

        color: var(--primary-navy);
        text-align: center;
        font-family: Ubuntu;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;

        @media (min-width: 1000px) {
          width: 268px;
          margin-bottom: 16px;
          font-size: 24px;
          margin-bottom: 24px;
        }
      }
    `],et([qt()],sa.prototype,"displayDevUI",2),et([Mt({context:Rt})],sa.prototype,"game",2),sa=et([lt("main-menu")],sa);var tu=class extends yt{render(){return q`
      <div id="orientation-change">
        <img
          class="rotate-device-img"
          src=${st.RotateDevice}
          draggable="false"
        />
      </div>
    `}};tu.styles=at`
    #orientation-change {
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      background-color: var(--violet-lowlight);
      align-items: center;
      text-align: center;
    }

    .rotate-device-img {
        width: 158px;
        height: 178px;
        flex-shrink: 0;
  `,tu=et([lt("orientation-change")],tu);var Jy=Le($e(),1);var zo=Le($e(),1);var Ee={backgroundWidth:2400,backgroundHeight:1350,mobileZoom:2,desktopZoom:1.2,smlDeviceWidth:1e3,smlDeviceHeight:400,cameraOffsetMobile:50,cameraOffsetDeskop:75,textColor:"#16006D",strokeColor:"#FFFFFF"};var mw=i=>({x:i.pageX,y:i.pageY,kind:"pointer"}),vw=i=>({x:i.touches[0].pageX,y:i.touches[0].pageY,kind:"touch"}),jy=class extends zo.default.Scene{constructor(n,d){super();this.clicking=!1;this.adjustCameraZoomAndScroll=()=>{let n=this.cameras.main;n.setPosition(0,0),n.setBounds(1,1,Ee.backgroundWidth-1,Ee.backgroundHeight-1);let d=Ee.mobileZoom,r=Ee.backgroundWidth/2-n.width/2,m=Ee.backgroundHeight/2-n.height/2-Ee.cameraOffsetMobile;this.game.canvas.width/window.devicePixelRatio>Ee.smlDeviceWidth&&(d=Ee.desktopZoom,m=Ee.backgroundHeight/2-n.height/2-Ee.cameraOffsetDeskop);let u=n.height/(Ee.backgroundHeight/d),g=n.width/(Ee.backgroundWidth/d);this.defaultZoom=Math.max(u,g),n.zoom=this.defaultZoom,this.currentZoom=n.zoom,n.setScroll(r,m)};this.onDragStartPointer=n=>this.onDragStart(mw(n));this.onDragStartTouch=n=>this.onDragStart(vw(n));this.onDragStart=n=>{this.clicking=!0,this.startCoord=n,this.startScroll={x:this.cameras.main.scrollX,y:this.cameras.main.scrollY,kind:this.startCoord.kind}};this.onDraggingPointer=n=>this.onDragging(mw(n));this.onDraggingTouch=n=>this.onDragging(vw(n));this.onDragging=n=>{if(!this.clicking||n.kind!=this.startCoord.kind)return;let d=this.cameras.main;d.scrollX=this.startScroll.x+(this.startCoord.x-n.x)/d.zoom*window.devicePixelRatio,d.scrollY=this.startScroll.y+(this.startCoord.y-n.y)/d.zoom*window.devicePixelRatio};this.onDragStop=()=>{this.clicking=!1,this.startCoord=null,this.startScroll=null};this.onCreated=d,this.gameCtrl=n}init(){this.events.on(zo.default.Scenes.Events.CREATE,this.onCreated),this.adjustCameraZoomAndScroll(),this.scale.on(zo.default.Scale.Events.RESIZE,this.adjustCameraZoomAndScroll),this.unsubscribeFromSignal=pe(()=>{let n=Gt.eventQueue.value.length&&!Gt.displayLevelUp.value;!Gt.displayFinancialReport.value&&!Gt.isPaused.value&&!n&&!pt.tip.value&&pt.isHorizontal.value&&!pt.isPageHidden.value&&Qa()?this.scene.resume():(this.input.resetPointers(),this.scene.pause()),Gt.displayLevelUp.value&&this.input.resetPointers()})}preload(){HS(this),WS(this),zS(this),$S(this),YS(this),jS(this),KS(this),XS(this)}create(){this.input.on(zo.default.Input.Events.POINTER_WHEEL,n=>{let d=this.cameras.main,r=d.zoom*(1-n.deltaY/1e3);this.currentZoom=r<this.defaultZoom?this.defaultZoom:r,d.zoom=this.currentZoom}),this.game.canvas.addEventListener("pointerdown",this.onDragStartPointer),this.game.canvas.addEventListener("pointermove",this.onDraggingPointer),window.addEventListener("pointerup",this.onDragStop),this.game.canvas.addEventListener("touchstart",this.onDragStartTouch),this.game.canvas.addEventListener("touchmove",this.onDraggingTouch),window.addEventListener("touchend",this.onDragStop),SS()}destroy(){var n;this.scale.off(zo.default.Scale.Events.RESIZE,this.adjustCameraZoomAndScroll),this.game.canvas.removeEventListener("pointerdown",this.onDragStartPointer),this.game.canvas.removeEventListener("pointermove",this.onDraggingPointer),window.removeEventListener("pointerup",this.onDragStop),this.game.canvas.removeEventListener("touchstart",this.onDragStartTouch),this.game.canvas.removeEventListener("touchmove",this.onDraggingTouch),window.removeEventListener("touchend",this.onDragStop),(n=this.unsubscribeFromSignal)==null||n.call(this)}update(n,d){this.gameCtrl.tick(d)}},gw=jy;var Ky=Le($e(),1);var xw=Le($e(),1);var yw=Le($e(),1);var Ho=class extends yw.default.GameObjects.Container{constructor(n,d,r){super(n);this.coinXOffset=24;this.cost=5;this.setPosition(d,r),this.costText=this.scene.add.text(0,0,this.cost.toString(),{color:`${Ee.textColor}`,fontSize:"14px",fontStyle:"Bold",fontFamily:"Ubuntu",stroke:`${Ee.strokeColor}`,strokeThickness:4}),this.costText.setOrigin(.5,.5),this.add(this.costText),this.calculateCoinXOffset(this.cost.toString()),this.coinImage=this.scene.add.image(this.costText.getCenter().x-this.coinXOffset,this.costText.getCenter().y,"coin"),this.add(this.coinImage)}setCostAmount(n){this.cost=n,this.calculateCoinXOffset(this.cost.toString()),this.costText.setText(this.cost.toString()),this.coinImage.setX(this.costText.getCenter().x-this.coinXOffset)}calculateCoinXOffset(n){switch(n.length){case 1:this.coinXOffset=24;break;case 2:this.coinXOffset=26;break;case 3:this.coinXOffset=28;break;case 4:this.coinXOffset=30;break;default:this.coinXOffset=24;break}}};var Xe=class{constructor(t){this.scene=t,this.options=function(n,d){return(d=d||{}).x===0?d.x=1e-5:d.y===0&&(d.y=1e-5),{x:d.x||n.x,y:d.y||n.y,alpha:d.alpha||n.alpha,scaleX:d.scaleX||n.scaleX,scaleY:d.scaleY||n.scaleY,angle:d.angle||n.angle,duration:d.duration||n.duration,yoyo:d.yoyo||n.yoyo,repeat:d.repeat||n.repeat,ease:d.ease||n.ease,delay:d.delay||n.delay,paused:d.paused||n.paused,onStart:d.onStart||n.onStart,onComplete:d.onComplete||n.onComplete}}}add(t){return this.target=t,this}shake(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={x:5,y:0,duration:50,yoyo:!0,repeat:8,ease:"Bounce.easeInOut",delay:0,paused:!1},e=this.options(m,n);return this.shakeTween=r.tweens.add({targets:t,x:t.x+e.x,y:t.y-e.y,duration:e.duration,yoyo:e.yoyo,repeat:e.repeat,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&shake.remove()}}),this}shakeY(t){t==null&&(t=this.target);let n={x:0,y:5},d=this.shake(t,n)}wobble(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={x:20,y:0,duration:150,yoyo:!0,repeat:5,ease:"Sine.easeInOut",delay:0,paused:!1},e=this.options(m,n);return this.wobbleTween=r.tweens.add({targets:t,x:t.x+e.x,y:t.y+e.y,duration:e.duration,yoyo:e.yoyo,repeat:e.repeat,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&wobble.remove()}}),this}wobbleY(t){t==null&&(t=this.target);let n={x:0,y:20},d=this.wobble(t,n)}scaleUp(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={scaleX:t.scaleX+.25,scaleY:t.scaleY+.25,duration:750,delay:0,paused:!1},e=this.options(m,n);return this.scaleUpTween=r.tweens.add({targets:t,scaleX:e.scaleX,scaleY:e.scaleY,duration:e.duration,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&grow.remove()}}),this}scaleDown(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={scaleX:t.scaleX-.25,scaleY:t.scaleY-.25,duration:750,delay:0,paused:!1},e=this.options(m,n);return this.scaleDown=r.tweens.add({targets:t,scaleX:e.scaleX,scaleY:e.scaleY,duration:e.duration,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&shrink.remove()}}),this}pulse(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={scaleX:1.25*t.scaleX,scaleY:1.25*t.scaleY,duration:750,repeat:2,yoyo:!0,ease:"Quad.easeInOut",delay:0,paused:!1},e=this.options(m,n);return this.pulseTween=r.tweens.add({targets:t,scaleX:e.scaleX,scaleY:e.scaleY,yoyo:e.yoyo,repeat:e.repeat,duration:e.duration,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&pulse.remove()}}),this}flash(t,n,d){let r=this.scene;t==null&&(t=this.target),n==null&&(n=150),d==null&&(d="0xffffff"),t.setTintFill(d);let m=r.time.addEvent({delay:n,callback:function(){t.setTint("0xffffff")},callbackScope:this});return this}rotate(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={angle:360,duration:500,ease:"Circular.easeInOut",delay:0,paused:!1},e=this.options(m,n);return this.rotateTween=r.tweens.add({targets:t,angle:e.angle,yoyo:e.yoyo,repeat:e.repeat,duration:e.duration,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&rotate.remove()}}),this}bounce(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={y:25,duration:1e3,ease:"Bounce",delay:0,paused:!1},e=this.options(m,n);return this.bounceTween=r.tweens.add({targets:t,y:t.y+e.y,repeat:e.repeat,duration:e.duration,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&bounce.remove()}}),this}fadeIn(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={alpha:1,duration:750,ease:"Circular.easeIn",delay:0,paused:!1},e=this.options(m,n);return this.fadeInTween=r.tweens.add({targets:t,alpha:e.alpha,duration:e.duration,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&fadeIn.remove()}}),this}fadeOut(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={alpha:0,duration:750,ease:"Circular.easeOut",delay:0,paused:!1},e=this.options(m,n);return this.fadeOutTween=r.tweens.add({targets:t,alpha:e.alpha,duration:e.duration,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&fadeOut.remove()}}),this}fadeInOut(t,n,d){let r=this.scene;t==null&&(t=this.target),d==null&&(d=!1);let m={alpha:0,duration:500,yoyo:!0,repeat:3,ease:"Circular.easeInOut",delay:0,paused:!1},e=this.options(m,n);return this.fadeInOutTween=r.tweens.add({targets:t,alpha:e.alpha,duration:e.duration,yoyo:e.yoyo,repeat:e.repeat,ease:e.ease,delay:e.delay,paused:e.paused,onStart:function(u,g){e.onStart!==void 0&&e.onStart(u,g)},onComplete:function(u,g){e.onComplete!==void 0&&e.onComplete(u,g),d&&fadeInOut.remove()}}),this}flipX(t,n,d,r){let m=this.scene;t==null&&(t=this.target),n==null&&(n=!0),r==null&&(r=!1);let e={scaleX:n=n?-1:1,duration:500,ease:"Sine.easeInOut",delay:0,paused:!1},u=this.options(e,d);return this.flipXTween=m.tweens.add({targets:t,scaleX:u.scaleX,duration:u.duration,ease:u.ease,delay:u.delay,paused:u.paused,onStart:function(g,c){u.onStart!==void 0&&u.onStart(g,c)},onComplete:function(g,c){u.onComplete!==void 0&&u.onComplete(g,c),r&&flipX.remove()}}),this}flipY(t,n,d,r){let m=this.scene;t==null&&(t=this.target),n==null&&(n=!0),r==null&&(r=!1);let e={scaleY:n=n?-1:1,duration:500,ease:"Sine.easeInOut",delay:0,paused:!1},u=this.options(e,d);return this.flipYTween=m.tweens.add({targets:t,scaleY:u.scaleY,duration:u.duration,ease:u.ease,delay:u.delay,paused:u.paused,onStart:function(g,c){u.onStart!==void 0&&u.onStart(g,c)},onComplete:function(g,c){u.onComplete!==void 0&&u.onComplete(g,c),r&&flipY.remove()}}),this}spinX(t,n,d,r){let m=this.scene;t==null&&(t=this.target),n==null&&(n=!0),r==null&&(r=!1);let e={scaleX:n=n?-1:1,duration:500,yoyo:!0,repeat:3,ease:"Sine.easeInOut",delay:0,paused:!1},u=this.options(e,d);return this.spinXTween=m.tweens.add({targets:t,scaleX:u.scaleX,yoyo:u.yoyo,repeat:u.repeat,duration:u.duration,ease:u.ease,delay:u.delay,paused:u.paused,onStart:function(g,c){u.onStart!==void 0&&u.onStart(g,c)},onComplete:function(g,c){u.onComplete!==void 0&&u.onComplete(g,c),r&&spinX.remove()}}),this}spinY(t,n,d,r){let m=this.scene;t==null&&(t=this.target),n==null&&(n=!0),r==null&&(r=!1);let e={scaleY:n=n?-1:1,duration:500,yoyo:!0,repeat:3,ease:"Sine.easeInOut",delay:0,paused:!1},u=this.options(e,d);return this.spinYTween=m.tweens.add({targets:t,scaleY:u.scaleY,yoyo:u.yoyo,repeat:u.repeat,duration:u.duration,ease:u.ease,delay:u.delay,paused:u.paused,onStart:function(g,c){u.onStart!==void 0&&u.onStart(g,c)},onComplete:function(g,c){u.onComplete!==void 0&&u.onComplete(g,c),r&&spinY.remove()}}),this}reset(t){return t==null&&(t=this.target),t.setAlpha(1),t.setScale(1),t.setAngle(0),t.setTint("0xffffff"),this}};var W6="bubble.png",$6="bubble_no_staff.png",X6="bubble_prohibited.png",Y6=48,Wo=class extends xw.default.GameObjects.Container{constructor(n,d,r,m,e){super(n);this.setImageWithKeyAndFrame=(n,d)=>{this.thoughtImage.texture.key!==n&&this.thoughtImage.setTexture(n,d)};this.setPayPipVisibility=n=>{this.alertPip.visible!==n&&(this.alertPip.setVisible(n),this.pulse())};this.spawnProhibitedSign=()=>{let n=this.scene.add.image(0,this.yCentreOffset,"emoticonAndThoughtBubble_sheet",X6);this.add(n)};this.setImageFromWalkAwayReason=(n,d)=>{if(n!==this.reason)switch(this.reason=n,n){case"product_purchased":this.bubble.setVisible(!1),this.thoughtImage.setVisible(!1),this.costText.setCostAmount(d.purchasePrice),this.costText.setVisible(!0);break;case"product_not_available":this.alertPip.setVisible(!0),this.thoughtImage.setTexture(Fl(d.kind).spriteKey,Fl(d.kind).frame),this.spawnProhibitedSign(),this.costText.setVisible(!1);return;case"till_not_available":this.thoughtImage.setTexture("emoticonAndThoughtBubble_sheet",$6),this.spawnProhibitedSign(),this.costText.setVisible(!1);return;case"product_too_expensive":this.thoughtImage.setTexture("coin"),this.spawnProhibitedSign(),this.costText.setVisible(!1);return;case"exception":default:return}};this.create=(n,d)=>{this.bubble=this.scene.add.image(0,0,"emoticonAndThoughtBubble_sheet",W6),this.add(this.bubble),this.yCentreOffset=this.bubble.getTopCenter().y+Y6/2,this.thoughtImage=this.scene.add.image(0,this.yCentreOffset,n,d),this.add(this.thoughtImage),this.alertPip=this.scene.add.image(this.bubble.getTopRight().x,this.bubble.getTopRight().y,"stock_and_pay_alert"),this.alertPip.setVisible(!1),this.add(this.alertPip)};this.create(m,e),this.setPosition(d,r-this.bubble.height/2),this.setDepth(Ht.ThoughtBubble),this.juice=new Xe(this.scene),this.costText=new Ho(n,this.bubble.width/4,this.bubble.height/4),this.costText.setDepth(Ht.ThoughtBubble),this.add(this.costText),this.costText.setVisible(!1)}pulse(){this.alertPip.setScale(1),this.pulseJuice=this.juice.pulse(this.alertPip,{repeat:-1,duration:500,scaleX:this.alertPip.scaleX*1.2,scaleY:this.alertPip.scaleY*1.2,ease:"Quad.easeInOut"})}};var Ew=(i,t,n,d)=>i===n&&t<d||i===n&&t===d?"front":i===n&&t>d?"back":t===d&&i<n?"right":"left",Tw=(i,t,n,d)=>i===n&&t<d?"front":i===n&&t>d?"back":t===d&&i<n?"right":t===d&&i>n?"left":d>_t.products[Zb].y||d>_t.products[Qb].y?"front":n<_t.products[_b].x?"left":n>_t.products[qb].x?"right":"back";var Cw=Le($e(),1);var bw=(i,t)=>({key:"emoticonAndThoughtBubble_sheet",frame:`emote_${i}_${t}.png`,duration:.5,visible:!0}),J6=i=>({spriteKey:"emoticonAndThoughtBubble_sheet",frames:[bw(i,1),bw(i,2)]}),$o=class extends Cw.default.GameObjects.Container{constructor(n,d,r){super(n);this.width=200;this.height=125;this.setEmoteReaction=(n,d)=>{var e,u,g,c,s;if(n!=="happy"&&n!=="annoyed")return;let r=J6(n);if(this.emoteSprite&&(((u=(e=this.emoteSprite)==null?void 0:e.anims)==null?void 0:u.getFrameName())===r.frames[0].frame||((c=(g=this.emoteSprite)==null?void 0:g.anims)==null?void 0:c.getFrameName())===r.frames[1].frame)){d&&this.replayEmote(r);return}(s=this.emoteSprite)==null||s.destroy(),this.emoteSprite=this.scene.add.sprite(this.xPos,this.yPos,r.spriteKey),this.add(this.emoteSprite);let m=n==="happy"?2:0;this.emoteSprite.anims.create({key:r.spriteKey,frameRate:4,repeat:m,frames:r.frames}),this.emoteSprite.anims.play(r.spriteKey)};this.replayEmote=n=>{this.emoteSprite.anims.play(n.spriteKey)};this.xPos=d,this.yPos=r-15,this.setDepth(Ht.ThoughtBubble)}};var uf=class extends Ky.default.GameObjects.Container{constructor(n,d){super(n);this.updateWithModel=n=>{if(!n)return;this.setPosition(n.getX(),n.getY());let d=Ew(this.prevX,this.prevY,n.getX(),n.getY());this.updateCustomerDirection(d),this.prevX===n.getX()&&this.prevY===n.getY()?(this.bobMovement.wobbleTween.pause(),this.bobMovement.wobbleTween.restart()):this.bobMovement.wobbleTween.resume(),this.updateCustomerReaction(n),this.need!==n.need&&(this.need=n.need),this.prevX=n.getX(),this.prevY=n.getY()};this.updateCustomerReaction=n=>{var d,r,m,e;n.getState()==="walking_away"&&(this.setEmoteReaction(n.getWalkAwayReason()),this.thoughtBubble.setImageFromWalkAwayReason(n.getWalkAwayReason(),n.need)),(r=(d=this.emote.emoteSprite)==null?void 0:d.anims)!=null&&r.isPlaying&&this.thoughtBubble.visible?(this.thoughtBubble.setVisible(!1),this.emote.setVisible(!0),this.emote.visible&&n.getWalkAwayReason()==="product_purchased"&&this.coinJuice()):!((e=(m=this.emote.emoteSprite)==null?void 0:m.anims)!=null&&e.isPlaying)&&!this.thoughtBubble.visible&&(this.thoughtBubble.setVisible(!0),this.emote.setVisible(!1))};this.updateCustomerDirection=n=>{n==="left"?this.spriteBody.setTexture("customer_sheet",this.getFrame("side")).setScale(1,1):n==="right"?this.spriteBody.setTexture("customer_sheet",this.getFrame("side")).setScale(-1,1):this.spriteBody.setTexture("customer_sheet",this.getFrame(n)).setScale(1,1)};this.create=n=>{this.prevX=n.getX(),this.prevY=n.getYPath();let d=this.scene.add.image(0,0,"customer_sheet","Shadow.png");this.add(d),this.spriteIndex=Ky.default.Math.RND.between(0,19),this.spriteBody=this.scene.add.image(0,0,"customer_sheet",this.getFrame("front")).setOrigin(.5),this.add(this.spriteBody);let{spriteKey:r,frame:m}=Fl(n.need.kind);this.thoughtBubble=new Wo(this.scene,this.spriteBody.getTopCenter().x,this.spriteBody.getTopCenter().y,r,m),this.add(this.thoughtBubble),this.emote=new $o(this.scene,this.spriteBody.getTopCenter().x,this.spriteBody.getTopCenter().y),this.add(this.emote)};this.getEmoteStateFromWalkAwayReason=n=>{switch(n){case"product_not_available":return"sad";case"product_too_expensive":return"shocked";case"till_not_available":return"frustrated";case"product_purchased":default:return"happy"}};this.id=d.id,this.create(d),this.setDepth(Ht.Customer),this.juice=new Xe(this.scene),this.particleEmitter=this.scene.add.particles(this.spriteBody.getCenter().x,this.spriteBody.getCenter().y,"coin",{duration:2e3,lifespan:{min:1e3,max:2e3},speed:{min:150,max:200},scale:{start:2,end:0,ease:"Cubic.easeOut"},gravityY:200,gravityX:0,emitting:!1,alpha:{start:1,end:0}}),this.particleEmitter.setDepth(Ht.CoinJuice),this.bobJuice(),this.updateWithModel(d)}setEmoteReaction(n){this.emoteState!==this.getEmoteStateFromWalkAwayReason(n)&&(this.emoteState=this.getEmoteStateFromWalkAwayReason(n),this.emote.setEmoteReaction(this.emoteState,!1))}getFrame(n){return`customer_${this.spriteIndex}_${n}.png`}bobJuice(){this.bobMovement=this.juice.wobble(this.spriteBody,{x:0,y:-10,repeat:-1,yoyo:!0,angle:-45,ease:"linear",duration:200})}coinJuice(){if(!this.need)return;this.particleEmitter.setPosition(this.x,this.y),this.particleEmitter.explode(5);let n=12.5,d=10,r=this.x+d,m=this.y;this.costText=new Ho(this.scene,r,m),this.costText.setDepth(Ht.CoinJuiceText),this.scene.add.existing(this.costText),this.costText.setCostAmount(this.need.purchasePrice);let e={targets:this.costText,y:{start:m,to:m-n},x:r,ease:"easeInOut",duration:400,repeat:0,yoyo:!1},u={targets:this.costText,alpha:0,duration:150,delay:450},g=this.scene.tweens.add(e),c=this.scene.tweens.add(u);g.play(),c.play()}destroy(n){this.costText&&this.costText.destroy(n),super.destroy(n)}};var iu=Le($e(),1);var Pw=Le($e(),1);var Q6="loading_circle_BG.png",_6="loading_circle_fill.png",df=class extends Pw.default.GameObjects.Container{constructor(n,d,r){super(n);this.progress=0;this.setProgress=n=>{this.progress=n,this.update()};this.update=()=>{this.barInner.setCrop(0,0,this.barInner.width,this.progress*this.barInner.height).setAngle(180)};this.setPosition(d,r),this.barBG=this.scene.add.image(0,0,"emoticonAndThoughtBubble_sheet",Q6),this.add(this.barBG),this.barInner=this.scene.add.image(0,0,"emoticonAndThoughtBubble_sheet",_6),this.add(this.barInner),this.update()}};var ww=Le($e(),1);var q6="ellips.png",cf=class extends ww.default.GameObjects.Container{constructor(n,d,r){super(n);this.xPos=d,this.yPos=r-15,this.setDepth(Ht.ThoughtBubble),this.create()}create(){this.ellips=this.scene.add.image(this.xPos,this.yPos,"emoticonAndThoughtBubble_sheet",q6),this.add(this.ellips)}};var ff=class extends iu.default.GameObjects.Container{constructor(n,d){super(n);this.isIdle=!1;this.updateWithModel=n=>{if(!n)return;let d=Tw(this.prevX,this.prevY,n.getPosition().x,n.getPosition().y);this.updateEmployeeDirection(d),this.prevX===n.getPosition().x&&this.prevY===n.getPosition().y?(this.bobMovement.wobbleTween.pause(),this.bobMovement.wobbleTween.restart()):this.bobMovement.wobbleTween.resume(),this.updateEmployeeServingState(n),this.prevX=n.getPosition().x,this.prevY=n.getPosition().y;let{x:r,y:m}=n.getPosition();this.setPosition(r,m),this.employee=n};this.handleEmoteAndThoughtBubbleVisibility=()=>{var n,d,r,m;this.employeeServingState==="annoyed"&&((d=(n=this.emote.emoteSprite)==null?void 0:n.anims)!=null&&d.isPlaying&&!this.emote.visible?(this.thoughtBubble.setVisible(!1),this.emote.setVisible(!0)):!((m=(r=this.emote.emoteSprite)==null?void 0:r.anims)!=null&&m.isPlaying)&&!this.thoughtBubble.visible&&(this.thoughtBubble.setVisible(!0),this.emote.setVisible(!1)))};this.updateEmployeeServingState=n=>{let d=this.getEmployeeServingState(n);if(this.employeeServingState===d){this.employeeServingState==="loading-bar"&&this.progressBar.setProgress(n.getProgress()),this.handleEmoteAndThoughtBubbleVisibility();return}switch(this.employeeServingState=d,this.employeeServingState){case"ellips":this.ellipsObject.setVisible(!0),this.progressBar.setVisible(!1),this.thoughtBubble.setVisible(!1),this.emote.setVisible(!1),this.updateIdleState(!1);return;case"annoyed":this.ellipsObject.setVisible(!1),this.progressBar.setVisible(!1),this.emote.setEmoteReaction("annoyed",!0),this.handleEmoteAndThoughtBubbleVisibility(),this.updateIdleState(!0);return;case"loading-bar":this.ellipsObject.setVisible(!1),this.progressBar.setVisible(!0),this.progressBar.setProgress(n.getProgress()),this.thoughtBubble.setVisible(!1),this.updateIdleState(!1);return;case"nothing":default:this.ellipsObject.setVisible(!1),this.progressBar.setVisible(!1),this.thoughtBubble.setVisible(!1),this.updateIdleState(!1);return}};this.getEmployeeServingState=n=>{switch(n.getState()){case"taking-order":return"loading-bar";case"walking-to-product":return"nothing";case"taking-out-product":return"loading-bar";case"taking-product-to-till":return"nothing";case"selling-product":return"loading-bar";case"waiting-at-till":return n.idle?"annoyed":"ellips";default:return n.idle?"annoyed":"ellips"}};this.updateEmployeeDirection=n=>{n==="left"?this.spriteBody.setTexture(this.spriteSheetKey,this.getFrame("side")).setScale(1,1):n==="right"?this.spriteBody.setTexture(this.spriteSheetKey,this.getFrame("side")).setScale(-1,1):this.spriteBody.setTexture(this.spriteSheetKey,this.getFrame(n)).setScale(1,1)};this.create=n=>{this.employee=n,this.prevX=n.getPosition().x,this.prevY=n.getPosition().y;let d=this.scene.add.image(0,0,"employee_sheet","Shadow.png");this.add(d),this.spriteBody=this.scene.add.image(0,0,this.spriteSheetKey,this.getFrame("back")).setOrigin(.5),this.add(this.spriteBody),this.scene.input.on(iu.default.Input.Events.POINTER_DOWN,this.onPointerDown),this.createEmployeeReactionObjects()};this.createEmployeeReactionObjects=()=>{this.progressBar=new df(this.scene,this.spriteBody.getTopCenter().x,this.spriteBody.getTopCenter().y-10),this.add(this.progressBar),this.thoughtBubble=new Wo(this.scene,this.spriteBody.getTopCenter().x,this.spriteBody.getTopCenter().y,"emoticonAndThoughtBubble_sheet","bubble_salary_due.png"),this.thoughtBubble.setVisible(!1),this.add(this.thoughtBubble),this.emote=new $o(this.scene,this.spriteBody.getTopCenter().x,this.spriteBody.getTopCenter().y),this.add(this.emote),this.ellipsObject=new cf(this.scene,this.spriteBody.getTopCenter().x,this.spriteBody.getTopCenter().y),this.add(this.ellipsObject)};this.updateIdleState=n=>{this.isIdle!==n&&(this.isIdle=n,n?(this.spriteBody.setInteractive({useHandCursor:!0}),this.thoughtBubble.bubble.setInteractive({useHandCursor:!0}),this.thoughtBubble.setImageWithKeyAndFrame("emoticonAndThoughtBubble_sheet","bubble_salary_due.png")):this.spriteBody.disableInteractive(),this.thoughtBubble.setPayPipVisibility(n))};this.onPointerDown=(n,d)=>{this.employee.idle&&(d.includes(this.spriteBody)||d.includes(this.thoughtBubble.bubble))&&yr(2,this.employee)};this.id=d.id,this.spriteIndex=d.index,this.spriteSheetKey="employee_sheet",this.spriteIndex===0&&(this.spriteSheetKey="main_character_sheet"),this.create(d),this.setDepth(Ht.Employee),this.juice=new Xe(this.scene),this.bobJuice(),this.updateWithModel(d)}getFrame(n){return this.spriteIndex===0?`main_${n}.png`:`employee_${this.spriteIndex-1}_${n}.png`}bobJuice(){this.bobMovement=this.juice.wobble(this.spriteBody,{x:0,y:-10,repeat:-1,yoyo:!0,angle:-45,ease:"linear",duration:100})}destroy(n){this.scene.input.off(iu.default.Input.Events.POINTER_DOWN),this.thoughtBubble.bubble.off(iu.default.Input.Events.POINTER_DOWN),super.destroy(n)}};var Rw=Le($e(),1);var Aw=Le($e(),1);var pf=class extends Aw.default.GameObjects.Container{constructor(t){super(t);let n=this.scene.add.image(0,0,"till_sheet","counter_serving.png");this.add(n),this.setDepth(Ht.Till)}};var nu=Le($e(),1);var e4=16,i4=i=>{let t;switch(i.group){case"clothing":t="clothing_sheet";break;case"coffeeShop":t="coffeeShop_sheet";break;case"stationary":t="stationary_sheet";break;case"technology":t="technology_sheet";break;case"toiletries":t="toiletries_sheet";break}return{spriteKey:t,frame:`${i.group}_${i.index}.png`}},mf=class extends nu.default.GameObjects.Container{constructor(n,d){super(n);this.onPointerDown=(n,d)=>{d.includes(this.till)&&this.emit("click",n.worldX,n.worldY)};this.juice=new Xe(this.scene),this.setPosition(d.position.x,d.position.y);let r=_t.products[d.index];this.setDepth(r.depth),this.till=this.scene.add.image(0,0,"till_sheet",r.image),this.add(this.till);let{spriteKey:m,frame:e}=i4(d.kind),u=new nu.default.Math.Vector2(0,-e4/2),g=this.scene.add.image(u.x,u.y,m,e);this.add(g);let c=this.scene.add.image(u.x,u.y+g.height,"till_sheet","pill_stock_indicator.png");this.add(c);let s=this.scene.add.text(c.getCenter().x,c.getCenter().y,`${d.availableStock.value}`,{fontSize:"14px",fontStyle:"Normal",fontFamily:"Ubuntu",color:`${Ee.textColor}`}).setOrigin(.5);this.add(s),this.stockPip=this.scene.add.image(c.getTopRight().x,c.getTopRight().y,"stock_and_pay_alert"),this.add(this.stockPip),this.unsubscribeFromSignal=pe(()=>{s.text=`${d.availableStock.value}`,this.stockPip.setVisible(d.availableStock.value===0),d.availableStock.value===0&&this.pulse()}),this.till.setInteractive({useHandCursor:!0}),this.scene.input.on(nu.default.Input.Events.POINTER_DOWN,this.onPointerDown)}destroy(n){var d;(d=this.unsubscribeFromSignal)==null||d.call(this),this.scene.input.off(nu.default.Input.Events.POINTER_DOWN,this.onPointerDown),super.destroy(n)}pulse(){this.stockPip.setScale(1),this.juice.pulse(this.stockPip,{repeat:-1,duration:500,scaleX:this.stockPip.scaleX*1.2,scaleY:this.stockPip.scaleY*1.2,ease:"Quad.easeInOut"})}};var vf=Le($e(),1);var Iw=Le($e(),1);var Xo=class extends Iw.default.GameObjects.Container{constructor(n){super(n);this.juice=new Xe(this.scene),this.setDepth(Ht.Product),this.pointer=this.scene.add.image(0,0,"pointer"),this.add(this.pointer),this.pointer.setVisible(!1)}destroy(n){super.destroy(n)}playJuice(){this.pointer.setVisible(!0),this.juice.wobble(this.pointer,{x:-20,y:-20,repeat:-1,yoyo:!1,ease:"Linear",duration:500,onComplete:()=>{this.pointer.setVisible(!1)}})}};var gf=class extends vf.default.GameObjects.Container{constructor(n){super(n);this.playPointerJuice=()=>{this.pointer=new Xo(this.scene),this.pointer.pointer.setPosition(this.button.getCenter().x+this.pointer.pointer.width,this.button.getBottomRight().y+this.pointer.pointer.height/2),this.add(this.pointer),this.pointer.playJuice()};this.destroyPointer=()=>{var n;(n=this.pointer)==null||n.destroy()};this.setUpgradePipVisibility=n=>{this.upgradePip.visible!==n&&this.upgradePip.setVisible(n)};this.onPointerDown=(n,d)=>{d.includes(this.button)&&this.emit("click",n.worldX,n.worldY)};this.juice=new Xe(this.scene),this.button=this.scene.add.image(0,0,"till_sheet","button_new_product.png"),this.add(this.button),this.setDepth(Ht.Product),this.upgradePip=this.scene.add.image(this.button.getTopRight().x,this.button.getTopRight().y,"demand_and_upgrade_alert"),this.add(this.upgradePip),this.wiggle(),this.button.setInteractive({useHandCursor:!0}),this.scene.input.on(vf.default.Input.Events.POINTER_DOWN,this.onPointerDown)}destroy(n){this.scene.input.off(vf.default.Input.Events.POINTER_DOWN,this.onPointerDown),this.destroyPointer(),super.destroy(n)}wiggle(){this.juice.rotate(this.upgradePip,{target:this.upgradePip,x:0,y:0,repeat:-1,yoyo:!0,angle:[-15,15],ease:"Circular.easeInOut",duration:300})}};var yf=Le($e(),1);var xf=class extends yf.default.GameObjects.Container{constructor(n){super(n);this.playPointerJuice=()=>{this.pointer=new Xo(this.scene),this.pointer.pointer.setPosition(this.button.getCenter().x+this.pointer.pointer.width,this.button.getBottomRight().y+this.pointer.pointer.height/2),this.add(this.pointer),this.pointer.playJuice()};this.destroyPointer=()=>{var n;(n=this.pointer)==null||n.destroy()};this.setUpgradePipVisibility=n=>{this.upgradePip.visible!==n&&this.upgradePip.setVisible(n)};this.onPointerDown=(n,d)=>{d.includes(this.button)&&this.emit("click",n.worldX,n.worldY)};this.juice=new Xe(this.scene),this.button=this.scene.add.image(0,0,"till_sheet","button_new_serve.png"),this.add(this.button),this.setDepth(Ht.Product),this.upgradePip=this.scene.add.image(this.button.getTopRight().x,this.button.getTopRight().y,"demand_and_upgrade_alert"),this.add(this.upgradePip),this.wiggle(),this.button.setInteractive({useHandCursor:!0}),this.scene.input.on(yf.default.Input.Events.POINTER_DOWN,this.onPointerDown)}destroy(n){this.scene.input.off(yf.default.Input.Events.POINTER_DOWN,this.onPointerDown),this.destroyPointer(),super.destroy(n)}wiggle(){this.juice.rotate(this.upgradePip,{target:this.upgradePip,x:0,y:0,repeat:-1,yoyo:!0,angle:[-15,15],ease:"Circular.easeInOut",duration:300})}};var Sf=class extends Rw.default.GameObjects.Container{constructor(n,d,r,m,e){super(n);this.destroy=()=>{var n,d;Object.keys(this.tills).forEach(r=>{this.tills[r].destroy()}),Object.values(this.products).forEach(r=>r.destroy(!0)),(n=this.addProduct)==null||n.destroy(!0),(d=this.hireEmployee)==null||d.destroy(!0),this.unsubscribeFromSignal!==void 0&&this.unsubscribeFromSignal()};this.till=n=>this.tills[n];this.createTill=n=>{let d=new pf(this.scene);d.setPosition(n.x,n.y),this.scene.add.existing(d),this.tills[n.id]=d};this.createProduct=n=>{let d=new mf(this.scene,n);this.scene.add.existing(d),this.products[n.kind.key()]=d,d.on("click",()=>{let r=n;yr(4,{product:r})})};this.createAddProductButton=(n,d)=>{var r;(r=this.addProduct)==null||r.destroy(),this.addProduct=new gf(this.scene),this.addProduct.setPosition(n.x,n.y).setDepth(Ht.AddProductButton),d<=0?this.addProduct.playPointerJuice():this.addProduct.destroyPointer(),this.addProduct.on("click",()=>{yr(3)}),this.scene.add.existing(this.addProduct)};this.createHireEmployeeButton=n=>{var d;(d=this.hireEmployee)==null||d.destroy(),this.hireEmployee=new xf(this.scene),this.hireEmployee.setPosition(n.x,n.y).setDepth(Ht.HireEmployeeButton),this.unsubscribeFromSignal!==void 0&&this.unsubscribeFromSignal(),this.unsubscribeFromSignal=pe(()=>{n.x===_t.hireEmployeePosition[1].x&&Gt.eventQueue.value.length>=1&&Gt.eventQueue.value[0].id==="lost-sale-no-staff"&&this.hireEmployee.playPointerJuice()}),n.x!==_t.hireEmployeePosition[1].x&&this.hireEmployee.destroyPointer(),this.hireEmployee.on("click",()=>{yr(1)}),this.scene.add.existing(this.hireEmployee)};this.displayAddProductAlert=n=>{var d;(d=this.addProduct)==null||d.setUpgradePipVisibility(n)};this.displayHireEmployeeAlert=n=>{var d;(d=this.hireEmployee)==null||d.setUpgradePipVisibility(n)};this.scene=n,this.tills={},this.products={};let u=this.scene.add.image(0,0,`shop_level${d}`);u.setOrigin(0,0),u.setDepth(Ht.Background),u.setDisplaySize(Ee.backgroundWidth,Ee.backgroundHeight).setPosition(0,0),r&&this.createAddProductButton(r,e),m&&this.createHireEmployeeButton(m)}};var Ef=class{constructor(t){this.updateShop=t=>{this.destroyShop(),t&&(this.shopObject=new Sf(this.scene,t.getLevel(),t.nextLaunchProduct(),t.nextHireEmployeePosition(),t.getNextProductIndex()),t.getTills().forEach(this.shopObject.createTill),t.getProducts().forEach(n=>{this.shopObject.createProduct(n)}))};this.destroyShop=()=>{var t;(t=this.shopObject)==null||t.destroy(),this.shopObject=void 0};this.createCustomer=t=>{let n=new uf(this.scene,t);n.setDepth(Ht.Customer+n.y),this.scene.add.existing(n),this.customerObjects[t.id]=n};this.updateCustomer=t=>{var d;(d=this.customerObjects[t.id])==null||d.updateWithModel(t);let n=this.customerObjects[t.id];n==null||n.setDepth(Ht.Customer+n.y)};this.destroyCustomer=t=>{var n;(n=this.customerObjects[t])==null||n.destroy(!0),delete this.customerObjects[t]};this.addEmployee=t=>{let n=new ff(this.scene,t);n.setDepth(Ht.Employee),this.scene.add.existing(n),this.employeeObjects[t.id]=n};this.updateEmployee=t=>{var d;(d=this.employeeObjects[t.id])==null||d.updateWithModel(t);let n=this.employeeObjects[t.id];n==null||n.setDepth(Ht.Employee+n.y)};this.syncToModel=t=>{this.destroyAll(),this.updateShop(t.getShop()),t.allEmployees().forEach(this.addEmployee),t.allCustomers().forEach(this.createCustomer)};this.destroyAll=()=>{this.destroyShop(),Object.values(this.customerObjects).forEach(t=>t.destroy(!0)),this.customerObjects={},Object.values(this.employeeObjects).forEach(t=>t.destroy(!0)),this.employeeObjects={}};this.scene=t,this.customerObjects={},this.employeeObjects={}}get shop(){return this.shopObject}},Tf=class{constructor(){this.updateShop=()=>{};this.destroyShop=()=>{};this.createCustomer=()=>{};this.updateCustomer=()=>{};this.destroyCustomer=()=>{};this.addEmployee=()=>{};this.updateEmployee=()=>{};this.destroyAll=()=>{};this.syncToModel=()=>{}}get shop(){}};var Mw=Le($e(),1),n4={type:Mw.CANVAS,transparent:!1,fps:{target:60},backgroundColor:"#00FF00",render:{roundPixels:!0,failIfMajorPerformanceCaveat:!0},audio:{disableWebAudio:!1},plugins:{},title:"",version:"0"},Lw=n4;var Kr=class extends yt{constructor(){super(...arguments);this.handleResize=()=>{let n=window.innerWidth,d=window.innerHeight;d>n&&([n,d]=[d,n]);let r=n*window.devicePixelRatio,m=d*window.devicePixelRatio;this.phaserGame.scale.resize(r,m),this.phaserWrapper.style.width=`${n}px`,this.phaserWrapper.style.height=`${d}px`,this.phaserGame.scale.canvas.width=r,this.phaserGame.scale.canvas.height=m,this.phaserGame.scale.canvas.style.width=`${n}px`,this.phaserGame.scale.canvas.style.height=`${d}px`};this.onResize=()=>{this.handleResize(),setTimeout(()=>{this.handleResize()},500)}}firstUpdated(n){super.firstUpdated(n),this.loadPhaser()}loadPhaser(){let n=new gw(this.game,()=>{this.game.setView(new Ef(n))});this.phaserConfig={...Lw,canvas:this.phaserCanvas,scene:n,scale:{mode:Jy.default.Scale.NONE}},this.phaserGame=new Jy.default.Game(this.phaserConfig),this.handleResize(),window.addEventListener("resize",this.onResize),document.addEventListener("fullscreenchange",this.onResize)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.onResize),document.removeEventListener("fullscreenchange",this.onResize)}render(){return q`
      <div id="phaser-wrapper">
        <canvas id="phaser-canvas"></canvas>
      </div>
    `}};Kr.styles=at`
    :host {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
    }

    #phaser-wrapper {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
  `,et([Ye("#phaser-canvas")],Kr.prototype,"phaserCanvas",2),et([Ye("#phaser-wrapper")],Kr.prototype,"phaserWrapper",2),et([Mt({context:Rt})],Kr.prototype,"game",2),Kr=et([lt("phaser-game")],Kr);var ru=class extends yt{render(){return q`
      <div id="container">
        <div id="icon">
          <slot name="icon"></slot>
        </div>
        <slot></slot>
      </div>
    `}};ru.styles=at`
    :host {
      background-color: var(--primary-highlight);
      color: var(--primary-navy);
      border-radius: 5px;
      padding: 5px;

      --icon-padding: 5px;
      --icon-size: 20px;
    }

    #container {
      display: flex;
      flex-direction: row;
      align-items: center;
    }

    #icon {
      width: var(--icon-size);
      height: var(--icon-size);
      margin-right: var(--icon-padding);
    }
  `,ru=et([lt("chip-component")],ru);var su=class extends yt{render(){return q`
      <chip-component>
        <loading-spinner slot="icon"></loading-spinner>
        Saving
      </chip-component>
    `}};su.styles=at`
    :host {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      z-index: var(--z-index-save);

      display: flex;
      flex-direction: row;
      place-content: center;
    }

    chip-component {
      margin-top: 50px;
    }
  `,su=et([lt("saving-indicator")],su);var aa=class extends Tt(Ct){constructor(){super();this.onSignIn=()=>{Fi.signIn(this.emailRef.value,this.passwordRef.value).then(()=>ie("Main Menu")).catch(()=>{alert("Failed to log in"),this.emailRef.value="",this.passwordRef.value="",this.emailRef.focus()})};this.continueToGame=()=>{ie("Main Menu")}}render(){return!!1||pt.user.value!==null?q`
        <div class="signInContainer">
          <button class="primary" @click=${this.continueToGame}>
            Continue
          </button>
        </div>
      `:q`
      <div class="signInContainer">
        <div>Email: <input id="email" type="email" /></div>
        <div>Password: <input id="password" type="password" /></div>
        <div class="btnContainer">
          <button class="primary" @click=${this.onSignIn}>Sign In</button>
        </div>
      </div>
    `}};aa.styles=[at`
      :host {
        width: 100%;
        height: 100%;
        background-color: white;

        display: flex;
        justify-content: center;
        align-items: center;
      }

      .signInContainer {
        max-width: 400px;
        max-height: 200px;
      }

      .btnContainer {
        display: flex;
        flex-direction: row;
      }
      .btnContainer > button {
        flex-grow: 1;
      }
    `,Qt],et([Ye("#email")],aa.prototype,"emailRef",2),et([Ye("#password")],aa.prototype,"passwordRef",2),aa=et([lt("sign-in-screen")],aa);var Ow={Tip_MissedSalesNoStaffAvailable:{title:"Tip_NoStaff_Heading",body:["Tip_NoStaff_Body"],image:Ki.noStaff},Tip_MissedSalesPriceTooHigh:{title:"Tip_HighPrice_Heading",body:["Tip_HighPrice_Body01","Tip_HighPrice_Body02"],image:Ki.priceTooHigh},Tip_MissedSaleLackOfMarketing:{title:"Tip_NoMarketing_Heading",body:["Tip_NoMarketing_Body"],image:Ki.lackOfMarketing},Tip_MissedSaleOutofStock:{title:"Tip_OutOfStock_Heading",body:["Tip_OutOfStock_Body"],image:Ki.noStock},Tip_ProfitOrLoss:{title:"Tip_ProfitOrLoss_Heading",body:["Tip_ProfitOrLoss_Body"],image:Ki.phone},Tip_Expenses:{title:"Tip_Expenses_Heading",body:["Tip_Expenses_Body"],image:Ki.phone},Tip_Revenue:{title:"Tip_Revenue_Heading",body:["Tip_Revenue_Body"],image:Ki.phone},Tip_CommunityImpact:{title:"Tip_CommunityImpact_Heading",body:["Tip_CommunityImpact_Body01","Tip_CommunityImpact_Body02"],image:Ki.phone},Tip_Stock:{title:"Tip_Stock_Heading",body:["Tip_Stock_Body"],image:Ki.stock},Tip_Cash:{title:"Tip_Cash_Heading",body:["Tip_Cash_Body"],image:Ki.cash}};var au=class extends Ct{constructor(){super(...arguments);this.dismissButton=n=>{n.preventDefault(),this.closeModal()};this.closeModal=()=>{xt("PopOut"),ld(null)}}firstUpdated(){xt("PopIn"),pt.tip.value&&Ab(pt.tip.value)}render(){if(!pt.tip.value)return At;let n=Ow[pt.tip.value];return q`
      <arrow-container smallGreen>
        <div class="header">
          <div class="header-text">${tt(n.title)}</div>
          <popup-close-button @click=${this.closeModal}></popup-close-button>
        </div>
        <div class="content">
          <div class="left-container">
            <div class="img-container">
              <img class="img-size" src=${n.image} draggable="false" />
            </div>
          </div>
          <div class="right-container">
            <div class="tip-text">
              ${n.body.map(d=>q`<p>${tt(d)}</p>`)}
            </div>
          </div>
        </div>
        <div class="btn-container">
          <app-button
            class="popIn game-button"
            text=${tt("Tip_Button_Dismiss")}
            @click=${this.closeModal}
          ></app-button>
        </div>
      </arrow-container>
    `}};au.styles=[Kt,at`
      :host {
        display: flex;
        font-family: Ubuntu;
        color: var(--primary-navy);
        font-style: normal;
        line-height: normal;
      }

      p {
        margin-block-start: 0px;
      }

      .header {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
      }

      .header-text {
        display: flex;
        padding: 6px 6px 7px;
        font-size: 20px;
        font-weight: 700;
      }

      .content {
        width: 100%;
        height: 214px;
        display: flex;
        flex-direction: row;
        box-sizing: border-box;
        gap: 14px;
        padding: 12px 14px 8px;
      }

      .left-container {
        display: flex;
        gap: 8px;
        flex-direction: column;
      }

      .img-container {
        display: flex;
        width: 204px;
        height: 108px;
      }

      .right-container {
        display: flex;
        flex-direction: column;
      }

      .tip-text {
        font-size: 14px;
        font-weight: 400;
      }

      .btn-container {
        display: flex;
        justify-content: center;
        transform: translate(0, -50%);
      }

      .img-size {
        width: 204px;
        height: 108px;
      }

      arrow-container {
        width: 476px;
        height: 254px;
      }
    `],au=et([lt("tip-modal")],au);function Zy(i,t){return Math.floor(Math.random()*(t-i+1)+i)}function Dw(i,t,n){return Math.min(Math.max(i,t),n)}var Fw=["#ff7336","#f9e038","#02cca4","#383082","#fed3f5","#b1245a","#f2733f"],bf=25,Bw=11,r4=33,Qy=class{constructor(t,n){this.x=Math.random()*t,this.y=Math.random()*n-n,this.r=Zy(Bw,r4),this.d=Math.random()*bf+Bw,this.color=Fw[Zy(0,Fw.length)],this.tilt=Math.floor(Math.random()*33)-11,this.tiltAngleIncremental=Math.random()*.07+.05,this.tiltAngle=0}draw(t){return t.beginPath(),t.lineWidth=this.r/2,t.strokeStyle=this.color,t.moveTo(this.x+this.tilt+this.r/3,this.y),t.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/5),t.stroke()}},oa=class extends yt{constructor(){super(...arguments);this.autoplay=!1;this.particles=[];this.stop=()=>{this.animationId&&cancelAnimationFrame(this.animationId)};this.draw=()=>{this.animationId=requestAnimationFrame(this.draw);let{width:n,height:d}=this.canvas;this.context.clearRect(0,0,n,d);for(let m=0;m<bf;m++)this.particles[m].draw(this.context);let r;for(let m=0;m<bf;m++)r=this.particles[m],r.tiltAngle+=r.tiltAngleIncremental,r.y+=(Math.cos(r.d)+3+r.r/2)/2,r.tilt=Math.sin(r.tiltAngle-m/3)*15,(r.x>n+30||r.x<-30||r.y>d)&&(r.x=Math.random()*n,r.y=-30,r.tilt=Math.floor(Math.random()*10)-20)}}firstUpdated(){this.context=this.canvas.getContext("2d"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight;for(let n=0;n<bf;n++)this.particles.push(new Qy(this.canvas.width,this.canvas.height));this.autoplay&&this.draw()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}render(){return q`
      <canvas
        id="canvas"
        @resize=${()=>{this.canvas&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight)}}
      ></canvas>
    `}};oa.styles=[at`
      #canvas {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        top: 0;
        left: 0;
        margin: 0;
      }

      .hiddenDiv {
        display: none;
      }
    `],et([Ye("#canvas")],oa.prototype,"canvas",2),et([It({type:Boolean})],oa.prototype,"autoplay",2),oa=et([lt("confetti-juice")],oa);var Jr=class{constructor(t,n){this.setModel=t=>{this.model=t};this.setView=t=>{this.view=t};this.model=t,this.view=n}};var Yo=class{constructor(t,n){this._call=()=>{for(;this.ticks>=this.interval;)this.fn(),this.ticks-=this.interval};this.tick=t=>{this.ticks+=t,this._call()};this.setInterval=t=>{this.interval=t,this._call()};this.fn=t,this.ticks=0,this.interval=n}};var Cf=class extends Jr{constructor(n,d,r,m){super(n,d);this.customerSpawnProductMultipliers={};this.customerSpawnTimers={};this.startGame=n=>{this.customerSpawnTimers={},!n&&!this.model.getShop().getProducts().length&&this.createFirstCustomerSpawnTimer(n),this.model.getShop().getProducts().forEach(this.addCustomerSpawnTimer)};this.updateParams=n=>{this.customerSpeed!==n.customer.speed&&(this.customerSpeed=n.customer.speed,this.model.allCustomers().forEach(d=>{d.speed=this.customerSpeed})),(this.customerSpawnInterval!==n.customer.spawnInterval||this.spawnIntervalDecrease!==n.customer.spawnIntervalDecrease)&&(this.customerSpawnInterval=n.customer.spawnInterval,this.spawnIntervalDecrease=n.customer.spawnIntervalDecrease,Object.entries(this.customerSpawnTimers).forEach(([d,r])=>{var m;return r.setInterval(this.getCustomerSpawnTimerMs(((m=this.model.getShop().getProducts().find(e=>e.kind.key()===d))==null?void 0:m.demand)??0,d))})),this.setCustomerSpawnProductMultipliers(n,!0)};this.removeCustomer=n=>{this.model.removeCustomer(n.id),this.view.destroyCustomer(n.id)};this.getCustomerLane=()=>{switch(Math.floor(Math.random()*3)){case 0:return _t.customerTopLane;case 1:return _t.customerMidLane;case 2:return _t.customerBottomLane}};this.create=(n,d)=>{let r=d?{kind:d.kind,purchasePrice:d.price}:void 0,m=this.getCustomerLane(),e=new Fs(_t.width,m,m,r,{speed:n});return this.model.addCustomer(e),this.view.createCustomer(e),e.id};this.tickAll=n=>{this.model.allCustomers().forEach(d=>{this.tick(d,n),this.view.updateCustomer(d)}),Object.values(this.customerSpawnTimers).forEach(d=>d.tick(n))};this.tick=(n,d)=>{if(n)switch(n.getState()){case"browsing":this.browse(n,d);break;case"walking_to_till":this.walkToTill(n,d);break;case"walking_away":this.walkAway(n,d);break}};this.browse=(n,d)=>{let r=new Nt(0,n.getY());n.moveTo(r,d,!0)&&this.removeCustomer(n)};this.walkToTill=(n,d)=>{var e;let r=(e=this.model.getShop())==null?void 0:e.getTill(n.getTill());if(!r){te(`Can't find till to walk to ${n.getTill()}`);return}let m=r.position().subtract(new Nt(0,_t.tileSize));n.moveTo(m,d,!0)&&this.reachedTill(n.id)};this.walkAway=(n,d)=>{let r=new Nt(-_t.tileSize,n.getYPath());n.moveTo(r,d,!1)&&this.removeCustomer(n)};this.thinkAll=()=>{this.model.allCustomers().forEach(this.think)};this.think=n=>{switch(n.getState()){case"browsing":{if(!this.shop.withinRange(n.getX()))return;let d=this.model.getShop().product(n.need.kind);if(!d||d.stock.value===0){this.onCustomerWalkAway(n,"product_not_available");return}let r=this.shop.availableTills();if(r.length==0){this.onCustomerWalkAway(n,"till_not_available");return}let m=d.getChanceToFail();if(!!m&&m>=Math.random()){this.onCustomerWalkAway(n,"product_too_expensive");return}else n.need.purchasePrice=d.price;let u=Math.floor(Math.random()*(r.length-1)),g=r[u];g.claim(n.id)?n.walkToTill(g.id):this.onCustomerWalkAway(n,"till_not_available");return}}};this.onCustomerWalkAway=(n,d)=>{n.walkAway(d),d!=="exception"&&this.model.getShop().product(n.need.kind)&&this.model.loseProductSale(n.need.kind,d)};this.createFirstCustomerSpawnTimer=(n=!0)=>{if(Object.keys(this.customerSpawnTimers).length){te("[CustomerController] Tried to set the first spawn timer, but the timer object wasn't empty",{spawnTimers:this.customerSpawnTimers});return}let d=this.shop.createFirstProduct();this.addCustomerSpawnTimer(d),n&&this.create(this.customerSpeed,d)};this.addCustomerSpawnTimer=n=>{this.customerSpawnTimers[n.kind.key()]=new Yo(()=>{this.create(this.customerSpeed,n)},this.getCustomerSpawnTimerMs(n.demand,n.kind.key()))};this.getCustomerSpawnTimerMs=(n,d)=>(this.customerSpawnInterval-n*this.spawnIntervalDecrease)*1e3*(this.customerSpawnProductMultipliers[d]??1);this.setCustomerSpawnProductMultipliers=(n,d=!1)=>{n.products.forEach(r=>r.products.forEach(m=>{var e;(!d||this.customerSpawnProductMultipliers[m.id]!==m.spawnRateMultiplier)&&(this.customerSpawnProductMultipliers[m.id]=m.spawnRateMultiplier,(e=this.customerSpawnTimers[m.id])==null||e.setInterval(this.getCustomerSpawnTimerMs(this.model.getShop().getProducts().find(u=>u.kind.key()===m.id).demand,m.id)))}))};this.onProductLaunched=n=>{this.addCustomerSpawnTimer(n),this.create(this.customerSpeed,n)};this.onProductPromoted=n=>{var d;(d=this.customerSpawnTimers[n.kind.key()])==null||d.setInterval(this.getCustomerSpawnTimerMs(n.demand,n.kind.key()))};this.shop=r,this.customerSpeed=m.customer.speed,this.customerSpawnInterval=m.customer.spawnInterval,this.spawnIntervalDecrease=m.customer.spawnIntervalDecrease,this.setCustomerSpawnProductMultipliers(m)}reachedTill(n){let d=this.model.customer(n);if(!d)return;let r=this.shop.orderItem(n,d.need.kind,d.getTill());if(r===!0)d.waitAtTill();else{let m=this.model.getShop().getTill(d.getTill());m&&m.claimedBy()===d.id&&m.releaseClaim(),this.onCustomerWalkAway(d,r||"exception")}}};var Pf=class extends Jr{constructor(n,d,r){super(n,d);this.updateParams=n=>{n.products!==this.productParams&&(this.productParams=n.products),n.marketing.cost!==this.marketingCost&&(this.marketingCost=n.marketing.cost),n.marketing.increasePerLevel!==this.marketingCostPerLevel&&(this.marketingCostPerLevel=n.marketing.increasePerLevel),n.marketing.maxDemand!==this.maxDemand&&(this.maxDemand=n.marketing.maxDemand)};this.startGame=n=>{n&&this.view.updateShop(this.model.getShop())};this.tick=()=>{this.view.shop.displayAddProductAlert(this.model.getShop().nextProductCost>0&&this.model.getShop().nextProductCost<=this.model.getGold()),this.view.shop.displayHireEmployeeAlert(this.model.getEmployeeHiringCost()>0&&this.model.getEmployeeHiringCost()<=this.model.getGold())};this.levelUp=()=>{let n=this.model.getShop(),d=Ac[n.getLevel()],r=kr[n.getLevel()],m=!1;return(n.getTills().length>d||n.getProducts().length>r)&&(m=n.levelUp(),xt("Success")),m&&(ge.onModelUpdate(this.model),this.view.updateShop(n),m)};this.setBusinessType=n=>{this.model.getShop().setBusinessType(n)};this.addTill=()=>{let n=this.model.getShop(),d=this.model.getShop().getTills().length,r=_t.tillPosition[d],m=n.addTill(r.x,r.y);return this.view.updateShop(n),m.id};this.createFirstProduct=()=>{let n=this.model.getShop(),d=n.getBusinessType(),r=this.productParams.find(g=>g.category===d),{cost:m,maxCost:e,stockLimit:u}=r.products[0];return this.updateNextShopCost(n),new sn(n.nextProductIndex(),new Oi(d,0),m,e,u)};this.launchProduct=()=>{let n=this.model.getShop(),d=n.getNextProductIndex();if(d<=-1)return;let r=n.getBusinessType(),m=this.productParams.find(s=>s.category===r),{cost:e,maxCost:u,stockLimit:g}=m.products[d];if(!this.model.canPay(e*g))return;let c=n.addProduct(new Oi(r,d),e,u,g);return c&&(this.updateNextShopCost(n),this.model.buyStock(c.cost*c.stockLimit,c.kind),ge.onModelUpdate(this.model),this.view.updateShop(n)),c};this.orderItem=(n,d,r)=>{var u,g;if(!((u=this.model.getShop())!=null&&u.hasProductInStock(d)))return Dt("Shop doesn't stock the product"),"product_not_available";let m=(g=this.model.getShop())==null?void 0:g.getTill(r);if(!m)return Dt("Can't claim till, it does not exist"),!1;if(m.claimedBy()!==n)return Dt("Till not claimed by current customer"),!1;let e=this.model.employee(m.mannedBy());if(!e)return"till_not_available";if(e.takeOrder(d)){let c=this.model.getShop().product(d);c.heldStock.value++,c.stock.value--,xt("OrderTaken")}else return e.idle?"till_not_available":(te("Can't claim till, employee failed to take order"),!1);return m.claim(n)};this.availableTills=()=>this.model.getShop().availableTills();this.withinRange=n=>{let d=this.model.getShop();return!!(d!=null&&d.getTills().find(r=>n>=r.x-d.attractionRange&&n<=r.x+d.attractionRange))};this.productParams=r.products,this.marketingCost=r.marketing.cost,this.marketingCostPerLevel=r.marketing.increasePerLevel,this.maxDemand=r.marketing.maxDemand}updateNextShopCost(n){let d=n.getNextProductIndex();if(d<0){n.nextProductCost=void 0;return}let{cost:r,stockLimit:m}=this.productParams.find(e=>e.category===n.getBusinessType()).products[d];n.nextProductCost=r*m}};var wf=class extends Jr{constructor(n,d,r){super(n,d);this.startGame=n=>{n&&this.model.setEmployeeHiringCost(this.baseHiringCost)};this.updateParams=n=>{if(this.baseHiringCost!==n.staff.hiringCost||this.hiringMultiplier!==n.staff.multiplierPerStaff){this.baseHiringCost=n.staff.hiringCost,this.hiringMultiplier=n.staff.multiplierPerStaff;let d=this.baseHiringCost,r=this.model.allEmployees().filter(m=>m.getCost()).length;for(let m=0;m<r;m++)d*=this.hiringMultiplier;this.model.setEmployeeHiringCost(d)}this.employeeIdleEvents=n.events.filter(d=>bn[d.trigger.category]==="StaffIdleTime"),this.employeeSpeedMultiplier!==n.staff.orderSpeedMultiplier&&(this.employeeSpeedMultiplier=n.staff.orderSpeedMultiplier),this.employeeSpeed!==n.staff.speed&&(this.employeeSpeed=n.staff.speed,this.model.allEmployees().forEach(d=>d.speed=this.employeeSpeed))};this.hire=(n,d)=>{let r=this.spawn(n);if(r&&!d){let m=this.model.getEmployeeHiringCost();r.setHiringCost(m),this.model.setEmployeeHiringCost(m*this.hiringMultiplier),Sb(r.index,m)}return r==null?void 0:r.id};this.spawn=n=>{var m;let d=(m=this.model.getShop())==null?void 0:m.getTill(n);if(!d){te("Till does not exist, can't spawn employee");return}let r=new Kn(d.x,d.y+ne,n,this.model.allEmployees().length,{speed:this.employeeSpeed});return this.model.addEmployee(r,!0),this.view.addEmployee(r),r};this.tickAll=n=>{this.model.allEmployees().forEach(d=>{this.tick(d,n),this.view.updateEmployee(d)})};this.tick=(n,d)=>{if(n)switch(n.getState()){case"walking-to-till":case"taking-product-to-till":this.walkToTillTick(n,d);break;case"taking-order":this.takeOrderTick(n,d*this.employeeSpeedMultiplier);break;case"walking-to-product":this.walkToProduct(n,d);break;case"taking-out-product":this.takeOutProduct(n,d*this.employeeSpeedMultiplier);break;case"selling-product":this.sellProduct(n,d*this.employeeSpeedMultiplier);break;case"waiting-at-till":this.waitAtTillTick(n,d);break}};this.walkToTillTick=(n,d)=>{var e;let r=(e=this.model.getShop())==null?void 0:e.getTill(n.getTill());if(!r){te(`Employee can't find till to walk to ${n.getTill()}`);return}let m=r.position().add(new Nt(0,_t.tileSize/2));n.moveTo(m,d)&&(n.getState()==="taking-product-to-till"?n.sellProduct():n.waitAtTill())};this.takeOrderTick=(n,d)=>{n.makeProgress(d)&&n.walkToProduct()};this.walkToProduct=(n,d)=>{var g;let r=(g=this.model.getShop())==null?void 0:g.product(n.orderProduct());if(!r){te(`Employee can't find product to walk to ${n.orderProduct()}`);return}let m=_t.products[r.index],e=new Nt(m.pickupOffsetX,m.pickupOffsetY),u=r.position.add(e);n.moveTo(u,d)&&n.takeProductOut()};this.takeOutProduct=(n,d)=>{n.makeProgress(d)&&(this.model.getShop().product(n.getOrder()).heldStock.value--,n.takeProductToTill())};this.sellProduct=(n,d)=>{var r;if(n.makeProgress(d)){let m=(r=this.model.getShop())==null?void 0:r.getTill(n.getTill());if(m){let e=this.model.customer(m.claimedBy());if(e){e.walkAway("product_purchased"),xt("Sale");let u=this.model.getShop().product(e.need.kind).cost;this.model.sellProduct(e.need.purchasePrice,e.need.kind),gb(e.need.kind.key(),e.need.kind.productName(),e.need.purchasePrice,u)}m.releaseClaim()}n.waitAtTill()}};this.waitAtTillTick=(n,d)=>{var m;let r=(m=this.model.getShop())==null?void 0:m.getTill(n.getTill());if(!r){te(`Employee can't find till to walk to ${n.getTill()}`);return}n.idle&&(n.idleTime+=d,this.employeeIdleEvents.forEach(e=>{this.model.events.isEventCompleted(e.id)||e.trigger.value*1e3<n.idleTime&&(cc(e),this.model.events.setEventCompleted(e.id))})),n.getState()==="waiting-at-till"&&!r.isManned()&&!n.idle&&r.man(n.id),n.getState()==="waiting-at-till"&&n.idle&&r.isManned()&&r.unman()};this.idleAll=()=>{this.model.allEmployees().forEach(this.idle),this.model.checkTotalSalariesDue()};this.idle=n=>{n.getCost()&&(n.idle=!0,n.idleTime=0,this.view.updateEmployee(n))};this.payEmployee=n=>{this.model.payEmployee(n.getCost())&&(Eb(n.index,n.getCost()),n.receivePayment(),this.view.updateEmployee(n),this.model.checkTotalSalariesDue())};this.baseHiringCost=r.staff.hiringCost,this.hiringMultiplier=r.staff.multiplierPerStaff,this.employeeIdleEvents=r.events.filter(m=>bn[m.trigger.category]==="StaffIdleTime"),this.employeeSpeed=r.staff.speed,this.employeeSpeedMultiplier=r.staff.orderSpeedMultiplier}};var hn,jo,Af,If;hn=window.document,jo=hn.documentElement,Af=jo.requestFullscreen||jo.mozRequestFullScreen||jo.webkitRequestFullScreen||jo.msRequestFullscreen,If=hn.exitFullscreen||hn.mozCancelFullScreen||hn.webkitExitFullscreen||hn.msExitFullscreen;function Nw(){return hn.fullscreenElement||hn.mozFullScreenElement||hn.webkitFullscreenElement||hn.msFullscreenElement}function kw(){return/iPad|iPhone|iPod|ipad|iphone|ipod/.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Vw(){kw()||Nw()||Af==null||Af.call(jo)}function Gw(){kw()||!Nw()||If==null||If.call(hn)}var Rf=class{constructor(t,n,d){this.loading=!1;this.ready=!1;this.handleSaveTimerTick=()=>{Dt("Autosaving..."),this.save()};this.initializeSubcontrollers=()=>{this.subcontrollers=[],this.shopController=new Pf(this.model,this.view,this.gameplayParams),this.subcontrollers.push(this.shopController),this.customersController=new Cf(this.model,this.view,this.shopController,this.gameplayParams),this.subcontrollers.push(this.customersController),this.employeesController=new wf(this.model,this.view,this.gameplayParams),this.subcontrollers.push(this.employeesController)};this.getModel=()=>this.model;this.setModel=t=>{this.model=t,this.subcontrollers.forEach(n=>n.setModel(this.model)),this.view.syncToModel(this.model),this.modelSubscriptions.forEach(n=>n(this.model)),this.modelReducer=new ge(this.model,this.gameplayParams.events)};this.setView=t=>{this.view=t,this.subcontrollers.forEach(n=>n.setView(this.view)),this.view.syncToModel(this.model)};this.startGame=t=>{Vw(),cb(t),this.subcontrollers.forEach(n=>n.startGame(t)),this.paydayIntervalMs=this.gameplayParams.payday.secondsPerPayday*1e3,!1&&this.cacheMaxCustomers(),t&&(this.hire(!0),this.model.getPayday().setPaydayCounter(this.paydayIntervalMs)),this.aiThoughtTimer=setInterval(()=>{this.active()&&this.customersController.thinkAll()},100),this.ready=!0,ie("Game"),this.unsubscribeFromPageVisibility&&this.unsubscribeFromPageVisibility(),this.unsubscribeFromPageVisibility=pe(()=>{pt.isPageHidden.value&&this.save()})};this.exitGame=()=>{Gw(),this.active()&&this.save(),this.ready=!1,this.view.destroyAll(),this.unsubscribeFromPageVisibility&&this.unsubscribeFromPageVisibility(),clearInterval(this.aiThoughtTimer),eb()};this.active=()=>Qa()&&!this.loading&&this.ready;this.updateGameplayParams=()=>{this.paydayIntervalMs!==this.gameplayParams.payday.secondsPerPayday*1e3&&(this.paydayIntervalMs=this.gameplayParams.payday.secondsPerPayday*1e3,this.model.getPayday().setPaydayCounter(this.paydayIntervalMs)),this.customersController.updateParams(this.gameplayParams),this.shopController.updateParams(this.gameplayParams),this.employeesController.updateParams(this.gameplayParams),this.modelReducer.updateEventParams(this.gameplayParams.events)};this.hire=(t=!1)=>{let n=t?0:this.model.getEmployeeHiringCost();if(!this.model.canPay(n))return!1;let d=this.shopController.addTill();return d?(this.model.payEmployee(n),this.employeesController.hire(d,t),this.model.checkTotalSalariesDue(),this.levelUp(),!0):!1};this.levelUp=()=>{this.shopController.levelUp()&&(Pb(this.model.getShop().getLevel()),fc(!0))};this.setBusinessType=t=>{this.shopController.setBusinessType(t),pb(t),this.customersController.createFirstCustomerSpawnTimer()};this.getNextAvailableProductIdx=()=>this.model.getShop().getNextProductIndex();this.launchProduct=()=>{let t=this.shopController.launchProduct();t&&(Tb(t.kind.key(),t.kind.productName(),t.price),this.customersController.onProductLaunched(t),this.levelUp())};this.buyStock=t=>{t.availableStock.value<t.stockLimit&&this.model.buyStock(t.cost,t.kind)&&t.stock.value++};this.promoteProduct=t=>{if(t.demand>=this.gameplayParams.marketing.maxDemand)return;let n=t.getMarketingCost(this.gameplayParams.marketing.cost,this.gameplayParams.marketing.increasePerLevel);this.model.promoteProduct(n,t.kind)&&(xb(n,t.demand,t.kind.key(),t.kind.productName()),t.demand++,this.customersController.onProductPromoted(t))};this.setProductPrice=(t,n)=>{n>t.maxPrice||n<t.cost+1||(t.price=n)};this.tickPaydayCounter=t=>{let n=this.model.getPayday().decreasePaydayCounter(t);ib(Math.max(n/this.paydayIntervalMs,0)),n<=0&&this.endPayday()};this.endPayday=()=>{Za(!0),bb(this.model.getBusinessValue(),this.model.getFinancialReportModel().profit,this.model.getPayday().getPaydayCount());let t=this.model.getFinancialReportModel().getTotalProductInfo();Cb(t.product_purchased,t),this.displayFinancialReport(),ge.onModelUpdate(this.model),this.save()};this.displayFinancialReport=()=>{this.setCustomersLostDueToNoMarketing(),cg(!0)};this.dismissFinancialReport=()=>{cg(!1),this.model.getPayday().getPaydayCounter()<=0&&this.startNextPayday()};this.setCustomersLostDueToNoMarketing=()=>{let t=Dw(1-this.model.getPayday().getPaydayCounter()/this.paydayIntervalMs,0,1);this.model.getShop().getProducts().forEach(n=>{this.model.getFinancialReportModel().getProduct(n.kind).no_marketing=Math.max(Math.floor((this.getMaxCustomersForProduct(n.kind)-this.model.getFinancialReportModel().getCustomerCount(n.kind,!1))*t),0)})};this.getMaxCustomersForProduct=t=>{let n=this.gameplayParams.products.find(d=>d.category===t.group).products[t.index].spawnRateMultiplier;return Math.floor(this.maxCustomersSpawned/n)};this.cacheMaxCustomers=()=>{let t=this.gameplayParams.payday.secondsPerPayday,{spawnInterval:n,spawnIntervalDecrease:d}=this.gameplayParams.customer,r=this.gameplayParams.marketing.maxDemand;this.maxCustomersSpawned=t/(n-r*d)};this.startNextPayday=()=>{Za(!1),this.model.getPayday().setPaydayCounter(this.paydayIntervalMs),this.employeesController.idleAll();let t=this.model.getPayday().incrementPayday();pc(t),ge.onModelUpdate(this.model),this.model.getFinancialReportModel().clearReportData(t),ge.onModelUpdate(this.model),!1&&this.cacheMaxCustomers(),t===this.gameplayParams.payday.paydayCount&&(this.exitGame(),ie("GameOver")),this.save()};this.payEmployee=t=>{this.employeesController.payEmployee(t)};this.tick=t=>{this.active()&&(this.saveTimer.tick(t),this.employeesController.tickAll(t),this.customersController.tickAll(t),this.shopController.tick(),this.tickPaydayCounter(t))};this.save=()=>{lm(!0),this.saveManager.save(this.model.toJSON()),lm(!1)};this.load=async t=>{var d,r;ub(),this.loading=!0;let n;t?(Dt("Loading local save"),n=(d=this.saveManager.localSave())==null?void 0:d.data):(Dt("Loading cloud save"),n=(r=this.saveManager.cloudSave())==null?void 0:r.data),this.setModel(Ni.fromJSON(n)),this.startGame(!1),this.loading=!1};this.startNewGame=()=>{hb(),this.setModel(new Ni),this.startGame(!0)};this.saveManager=ve,this.model=n,this.view=d??new Tf,this.gameplayParams=t,this.initializeSubcontrollers(),this.cacheMaxCustomers(),this.modelSubscriptions=[],this.modelReducer=new ge(this.model,this.gameplayParams.events),this.saveTimer=new Yo(this.handleSaveTimerTick,6e4)}};function Uw(){tm({dsn:"https://2ae6f34cb4d5d27c05f0bd556ba6621d@o393088.ingest.us.sentry.io/4506824621883392",tracesSampleRate:.1,environment:"PROD",release:"24e47f41"})}pe(()=>{pt.user.value&&pt.user.value.userId&&(Dt("[sentry] setting user - user id: "+pt.user.value.userId),Ju({id:pt.user.value.userId,email:pt.user.value.email}))});var la=class extends Tt(Ct){constructor(){super();this.fetchUserAndGameData=async()=>{try{let n=await Pi.getUser();Ka(n),n&&db()}catch{let n=YT();if(Ml(n),n===null){te("[fetchUserAndGameData] User is null - show logged out screen"),ie("Logged Out Screen");return}}await Os(),await ve.refreshLocalSave(),await ve.refreshCloudSave(),ie("Main Menu")};this.savingDebounce=!1;this.setupSavingDebounce=()=>{let n;pe(()=>{pt.saving.value&&(this.savingDebounce=!0,clearTimeout(n),n=setTimeout(()=>{this.savingDebounce=!1},500))})};this.isGameControllerLoaded=!1;this.initializeGameController=async()=>{this.game=new Rf(tC,new Ni),this.isGameControllerLoaded=!0};this.renderCurrentScreen=()=>{switch(pt.screen.value){case"Game":return At;case"Main Menu":return q`<main-menu class="ui"></main-menu>`;case"Sign-in Screen":return q`<sign-in-screen class="ui"></sign-in-screen>`;case"GameOver":return q`<game-over class="ui"></game-over>`;case"Choose Save":return q`<choose-save class="ui"></choose-save>`;case"Logout Warning Screen":return q`<logout-warning class="ui"></logout-warning>`;case"Logged Out Screen":return q`<logged-out class="ui"></logged-out>`;default:return q`<loading-screen class="ui"></loading-screen>`}};this.renderLoadingScreen=()=>q`<loading-screen class="ui"></loading-screen>`;US(),Uw(),this.initializeGameController(),RS(eE),this.setupSavingDebounce(),this.fetchUserAndGameData(),document.addEventListener("dblclick",n=>{n.preventDefault()})}connectedCallback(){super.connectedCallback(),pt.user.subscribe(n=>{n===null?ie("Logged Out Screen"):pt.screen.value==="Logged Out Screen"&&ie("Main Menu")})}render(){if(!this.isGameControllerLoaded)return q` <div>Loading...</div> `;let n=TS()||pt.screen.value==="Loading",d=pt.screen.value==="Main Menu"||pt.screen.value==="Choose Save"||pt.screen.value==="Game";return q`
      ${Bt(!pt.isHorizontal.value,()=>q`<orientation-change
            class="orientation-ui"
          ></orientation-change>`)}
      ${Bt(!ih.value,()=>q`<div class="offline-tag">Offline</div>`)}
      ${Bt(!1&&this.testingMessage,()=>q`<div class="testing-ui">${this.testingMessage}</div>`)}

      <div>
        ${Bt(n,this.renderCurrentScreen,this.renderLoadingScreen)}
        <game-container class="ui"></game-container>
        ${Bt(pt.saving.value||this.savingDebounce,()=>q`<saving-indicator></saving-indicator>`)}
      </div>
      <div class="menu-ui">
        ${Bt(n&&d,()=>q`<hamburger-menu></hamburger-menu>`)}
        ${Bt(n&&pt.screen.value==="Main Menu",()=>q`<app-button
              imgURL=${st.Menu_Leaderboard}
              @click=${Cc}
            >
            </app-button>`)}
      </div>
    `}};la.styles=at`
    :host {
      display: block;
      width: 100%;
      height: 100%;
      background-color: #ffeeee;
      position: relative;
    }

    .orientation-ui {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      z-index: var(--z-index-orientation);
    }

    .ui {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      z-index: var(--z-index-ui);
    }
    game-container.ui {
      z-index: var(--z-index-game);
    }

    .offline-tag {
      position: absolute;
      bottom: 0;
      right: 0;
      background-color: var(--semi-opaque-red);
      display: inline-block;
      z-index: 15;
    }

    .testing-ui {
      position: absolute;
      bottom: 0;
      right: 50%;
      background-color: var(--semi-opaque-red);
      display: inline-block;
      z-index: 15;
    }

    .menu-ui {
      position: absolute;
      top: 0;
      left: 0;
      z-index: var(--z-index-hamburger-menu);

      padding-left: 8px;
      padding-top: 8px;

      display: flex;
      flex-direction: column;
      gap: 10px;
    }
  `,et([qt()],la.prototype,"savingDebounce",2),et([um({context:Rt})],la.prototype,"game",2),et([qt()],la.prototype,"isGameControllerLoaded",2);customElements.define("app-main",la);
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)

phaser/dist/phaser.js:
  (**
   * @author       samme
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       samme <samme.npm@gmail.com>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Jason Nicholls <nicholls.jason@gmail.com>
   * @copyright    2018 Photon Storm Ltd.
   * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       Felipe Alfonso <@bitnenfer>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Florian Vazelle
   * @author       Geoffrey Glaive
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       Florian Mertens
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @copyright    2021 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Greg McLean <GregDevProjects>
   * @copyright    2021 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Vladislav Forsh <vlad@robowhale.com>
   * @copyright    2021 RoboWhale
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       @samme
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Joachim Grill <joachim@codeandweb.com>
   * @author       Richard Davey <rich@photonstorm.com>
   * @copyright    2018 CodeAndWeb GmbH
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       @dxu https://github.com/dxu/matter-collision-events
   * @author       Richard Davey <rich@photonstorm.com>
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
  * @author       Richard Davey <rich@photonstorm.com>
  * @copyright    2013-2023 Photon Storm Ltd.
  * @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
  *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       Felipe Alfonso <@bitnenfer>
   * @author       Matthew Groves <@doormat>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       samme
   * @copyright    2021 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       pi-kei
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Vladimir Agafonkin
   * @author       Richard Davey <rich@photonstorm.com>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Seth Berrier <berriers@uwstout.edu>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Richard Davey <rich@photonstorm.com>
   * @author       Angry Bytes (and contributors)
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)
  (**
   * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
   * @author       Richard Davey <rich@photonstorm.com>
   * @copyright    2013-2023 Photon Storm Ltd.
   * @license      {@link https://opensource.org/licenses/MIT|MIT License}
   *)

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-element/lit-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/custom-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/property.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/state.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/event-options.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/base.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-all.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-async.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/when.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit-labs/preact-signals/lib/signal-watcher.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/async-directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit-labs/preact-signals/lib/watch.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit-labs/preact-signals/lib/html-tag.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/context-request-event.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/create-context.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/controllers/context-consumer.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/value-notifier.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/controllers/context-provider.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/context-root.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/decorators/provide.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/context/lib/decorators/consume.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/logger/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm2017.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/lite/index.browser.esm2017.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm2017/index-dd468b12.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@lottiefiles/lottie-player/dist/lottie-player.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

tweakpane/dist/tweakpane.js:
  (*! Tweakpane 4.0.1 (c) 2016 cocopon, licensed under the MIT license. *)
*/